module.exports=[62085,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(48024),f=a.i(27863),g=a.i(10850),h=a.i(73233),i=a.i(66960),j=a.i(73445);a.s(["default",0,()=>{let{data:a,isLoading:k,error:l}=(0,g.useAuth)(),{data:m=[],isLoading:n,refetch:o}=(0,h.useVolumes)(),{data:p=[],isLoading:q}=(0,i.useSubmittedArticles)(),{data:r=[],isLoading:s}=(0,i.usePublishedArticles)(),{data:t=[],isLoading:u}=(0,j.useDownloadRequests)();(0,i.usePublishArticle)(),(0,j.useApproveDownloadRequest)(),(0,j.useDenyDownloadRequest)();let[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)({volumeId:"",number:"",month:"",year:""}),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)({}),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(null),J=async a=>{a.preventDefault();let b=parseInt(v,10);if(b)try{await (0,e.createVolume)(b),w(""),await (0,f.revalidateContent)("volumes"),o()}catch(a){console.error("Failed to create volume:",a),alert("Failed to create volume: "+a.message)}},K=async a=>{a.preventDefault();let{volumeId:b,number:c,month:d,year:g}=x;if(b&&c&&d&&g)try{await (0,e.createIssue)(b,parseInt(c,10),d,parseInt(g,10)),y({volumeId:"",number:"",month:"",year:""}),await (0,f.revalidateContent)("volumes"),o()}catch(a){console.error("Failed to create issue:",a),alert("Failed to create issue: "+a.message)}},L=async(a,b)=>{try{await (0,e.updateVolume)(a,parseInt(b,10)),E(null),await (0,f.revalidateContent)("volumes"),o()}catch(a){console.error("Failed to update volume:",a),alert("Failed to update volume: "+a.message)}},M=async a=>{try{await (0,e.deleteVolume)(a),I(null),await (0,f.revalidateContent)("volumes"),o()}catch(a){console.error("Failed to delete volume:",a),alert("Failed to delete volume: "+a.message)}},N=async(a,b,c,d)=>{try{await (0,e.updateIssue)(a,parseInt(b,10),c,parseInt(d,10)),G(null),await (0,f.revalidateContent)("volumes"),o()}catch(a){console.error("Failed to update issue:",a),alert("Failed to update issue: "+a.message)}},O=async a=>{try{await (0,e.deleteIssue)(a),I(null),await (0,f.revalidateContent)("volumes"),o()}catch(a){console.error("Failed to delete issue:",a),alert("Failed to delete issue: "+a.message)}};return k?(0,b.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,b.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,b.jsx)("div",{className:"h-6 w-40 bg-gray-200 animate-pulse rounded mb-6"})})}):l||!a?(0,b.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,b.jsx)("div",{className:"max-w-2xl mx-auto text-center",children:"Please sign in."})}):"EDITOR"!==a.role?(0,b.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,b.jsx)("div",{className:"max-w-2xl mx-auto text-center",children:"Forbidden. Editor access required."})}):(0,b.jsx)("div",{className:"min-h-screen w-full text-justify text-black bg-white mt-16 py-8 px-5",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"Admin Panel"}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 flex-wrap",children:[(0,b.jsx)(d.default,{href:"/admin/submitted",className:"px-4 py-2 rounded-lg bg-black text-white  transition-colors text-sm text-center",children:"Submitted Articles"}),(0,b.jsx)(d.default,{href:"/admin/published",className:"px-4 py-2 rounded-lg bg-black text-white  transition-colors text-sm text-center",children:"Published Articles"}),(0,b.jsx)(d.default,{href:"/admin/publish",className:"px-4 py-2 rounded-lg bg-[#083b7a] text-white hover:bg-[#0a4ea3] transition-colors text-sm text-center",children:"ðŸ“¨ Publish Articles"}),(0,b.jsx)(d.default,{href:"/admin/download-requests",className:"px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors text-sm text-center",children:"ðŸ“¥ Full Access Requests"}),(0,b.jsx)("button",{onClick:()=>window.history.back(),className:"px-4 py-2 rounded-lg border border-gray-300 text-sm hover:bg-gray-50 transition-colors",children:"â† Back"})]})]}),(0,b.jsx)("div",{className:"grid gap-8",children:(0,b.jsxs)("section",{className:"bg-gray-50 w-full rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Volumes & Issues Management"}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-6 shadow-sm",children:[(0,b.jsx)("h3",{className:"font-medium mb-3 text-gray-700",children:"Add New Volume"}),(0,b.jsxs)("form",{onSubmit:J,className:"flex gap-2",children:[(0,b.jsx)("input",{type:"number",className:"flex-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",placeholder:"Volume number",value:v,onChange:a=>w(a.target.value)}),(0,b.jsx)("button",{className:"px-4 py-2 rounded-lg bg-[#083b7a] text-white hover:bg-[#0a4ea3] transition-colors",children:"Add Volume"})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-6 shadow-sm",children:[(0,b.jsx)("h3",{className:"font-medium mb-3 text-gray-700",children:"Add New Issue"}),(0,b.jsxs)("form",{onSubmit:K,className:"space-y-3",children:[(0,b.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",value:x.volumeId,onChange:a=>y(b=>({...b,volumeId:a.target.value})),children:[(0,b.jsx)("option",{value:"",children:"Select Volume"}),m.map(a=>(0,b.jsxs)("option",{value:a.id,children:["Volume ",a.number]},a.id))]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[(0,b.jsx)("input",{type:"number",className:"border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",placeholder:"Issue #",value:x.number,onChange:a=>y(b=>({...b,number:a.target.value}))}),(0,b.jsxs)("select",{className:"border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",value:x.month,onChange:a=>y(b=>({...b,month:a.target.value})),children:[(0,b.jsx)("option",{value:"",children:"Month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsx)("input",{type:"number",className:"border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",placeholder:"Year",value:x.year,onChange:a=>y(b=>({...b,year:a.target.value}))})]}),(0,b.jsx)("button",{className:"w-full px-4 py-2 rounded-lg bg-[#083b7a] text-white hover:bg-[#0a4ea3] transition-colors",children:"Add Issue"})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-700 p-4 bg-gray-100 border-b",children:"Existing Volumes"}),(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Volume Number"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Issues"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:m.map(a=>(0,b.jsxs)(c.default.Fragment,{children:[(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:D?.id===a.id?(0,b.jsx)("input",{type:"number",className:"border rounded px-2 py-1 w-24",value:D.number,onChange:a=>E({...D,number:a.target.value})}):(0,b.jsxs)("span",{className:"font-semibold text-gray-800",children:["Volume ",a.number]})}),(0,b.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-600",children:[a.issues?.length||0," issue(s)"]}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:(0,b.jsx)("div",{className:"flex gap-2 justify-end",children:D?.id===a.id?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>L(a.id,D.number),className:"px-3 py-1 text-sm rounded bg-green-600 text-white hover:bg-green-700",children:"Save"}),(0,b.jsx)("button",{onClick:()=>E(null),className:"px-3 py-1 text-sm rounded bg-gray-500 text-white hover:bg-gray-600",children:"Cancel"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>E({id:a.id,number:a.number}),className:"px-3 py-1 text-sm rounded bg-blue-600 text-white hover:bg-blue-700",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>I({type:"volume",id:a.id,name:`Volume ${a.number}`,issueCount:a.issues?.length||0}),className:"px-3 py-1 text-sm rounded bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})})})]}),a.issues&&a.issues.length>0&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:"3",className:"px-4 py-2 bg-gray-50",children:(0,b.jsx)("div",{className:"ml-8",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-300",children:[(0,b.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600",children:"Issue #"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600",children:"Month"}),(0,b.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600",children:"Year"}),(0,b.jsx)("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-600",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:a.issues.map(a=>(0,b.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,b.jsx)("td",{className:"px-4 py-2",children:F?.id===a.id?(0,b.jsx)("input",{type:"number",className:"border rounded px-2 py-1 w-20",value:F.number,onChange:a=>G({...F,number:a.target.value})}):(0,b.jsxs)("span",{className:"text-sm",children:["#",a.number]})}),(0,b.jsx)("td",{className:"px-4 py-2",children:F?.id===a.id?(0,b.jsx)("select",{className:"border rounded px-2 py-1",value:F.month,onChange:a=>G({...F,month:a.target.value}),children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(a=>(0,b.jsx)("option",{value:a,children:a},a))}):(0,b.jsx)("span",{className:"text-sm",children:a.month})}),(0,b.jsx)("td",{className:"px-4 py-2",children:F?.id===a.id?(0,b.jsx)("input",{type:"number",className:"border rounded px-2 py-1 w-24",value:F.year,onChange:a=>G({...F,year:a.target.value})}):(0,b.jsx)("span",{className:"text-sm",children:a.year})}),(0,b.jsx)("td",{className:"px-4 py-2 text-right",children:(0,b.jsx)("div",{className:"flex gap-2 justify-end",children:F?.id===a.id?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>N(a.id,F.number,F.month,F.year),className:"px-2 py-1 text-xs rounded bg-green-600 text-white hover:bg-green-700",children:"Save"}),(0,b.jsx)("button",{onClick:()=>G(null),className:"px-2 py-1 text-xs rounded bg-gray-500 text-white hover:bg-gray-600",children:"Cancel"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>G({id:a.id,number:a.number,month:a.month,year:a.year}),className:"px-2 py-1 text-xs rounded bg-blue-600 text-white hover:bg-blue-700",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>I({type:"issue",id:a.id,name:`Issue #${a.number} (${a.month} ${a.year})`}),className:"px-2 py-1 text-xs rounded bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})})})]},a.id))})]})})})})]},a.id))})]}),0===m.length&&(0,b.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No volumes created yet"})]})]})]})}),H&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-xl",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-center text-gray-900 mb-2",children:"Confirm Deletion"}),(0,b.jsxs)("p",{className:"text-center text-gray-600 mb-4",children:["Are you sure you want to delete ",(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:H.name}),"?"]}),"volume"===H.type&&H.issueCount>0&&(0,b.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:(0,b.jsxs)("p",{className:"text-sm text-yellow-800",children:["âš ï¸ This will also delete ",(0,b.jsxs)("span",{className:"font-semibold",children:[H.issueCount," issue(s)"]})," associated with this volume."]})}),(0,b.jsx)("p",{className:"text-center text-sm text-gray-500 mb-6",children:"This action cannot be undone."}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>I(null),className:"flex-1 px-4 py-2 rounded-lg bg-gray-200 text-gray-800 hover:bg-gray-300 transition-colors font-medium",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{"volume"===H.type?M(H.id):O(H.id)},className:"flex-1 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors font-medium",children:"Delete"})]})]})})]})})}])}];

//# sourceMappingURL=app_admin_page_4e2cc4a7.js.map