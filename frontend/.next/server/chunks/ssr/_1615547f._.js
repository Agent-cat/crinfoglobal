module.exports=[73445,a=>{"use strict";var b=a.i(33217),c=a.i(70025),d=a.i(37927),e=a.i(48024);a.s(["useApproveDownloadRequest",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>(0,e.approveDownloadRequest)(a),onSuccess:()=>{a.invalidateQueries({queryKey:["downloadRequests"]})}})},"useDenyDownloadRequest",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>(0,e.denyDownloadRequest)(a),onSuccess:()=>{a.invalidateQueries({queryKey:["downloadRequests"]})}})},"useDownloadRequests",0,()=>(0,b.useQuery)({queryKey:["downloadRequests"],queryFn:async()=>await (0,e.listDownloadRequests)(),staleTime:0})])},44425,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(10850),f=a.i(73445);a.s(["default",0,()=>{let{data:a,isLoading:g,error:h}=(0,e.useAuth)(),{data:i=[],isLoading:j,refetch:k}=(0,f.useDownloadRequests)(),l=(0,f.useApproveDownloadRequest)(),m=(0,f.useDenyDownloadRequest)(),[n,o]=(0,c.useState)("ALL"),p=async a=>{try{await l.mutateAsync(a),k()}catch(a){console.error("Failed to approve request:",a),alert("Failed to approve request: "+a.message)}},q=async a=>{try{await m.mutateAsync(a),k()}catch(a){console.error("Failed to deny request:",a),alert("Failed to deny request: "+a.message)}};if(g)return(0,b.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsx)("div",{className:"h-6 w-40 bg-gray-200 animate-pulse rounded mb-6"}),(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-24 bg-gray-200 animate-pulse rounded"},a))})]})});if(h||!a)return(0,b.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Please sign in"}),(0,b.jsx)(d.default,{href:"/auth/signin",className:"text-blue-600 hover:underline",children:"Go to Sign In"})]})});if("EDITOR"!==a.role)return(0,b.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Forbidden"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Editor access required."})]})});let r=i.filter(a=>"ALL"===n||a.status===n).sort((a,b)=>{let c={PENDING:0,APPROVED:1,DENIED:2},d=c[a.status]-c[b.status];return 0!==d?d:new Date(b.createdAt)-new Date(a.createdAt)}),s={total:i.length,pending:i.filter(a=>"PENDING"===a.status).length,approved:i.filter(a=>"APPROVED"===a.status).length,denied:i.filter(a=>"DENIED"===a.status).length};return(0,b.jsx)("div",{className:"min-h-screen w-full text-black bg-white mt-16 py-8 px-5",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"Full Access Requests"}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)(d.default,{href:"/admin",className:"px-4 py-2 rounded-lg border border-gray-300 text-sm hover:bg-gray-50 transition-colors text-center",children:"â† Back to Admin"}),(0,b.jsx)("button",{onClick:()=>window.history.back(),className:"px-4 py-2 rounded-lg border border-gray-300 text-sm hover:bg-gray-50 transition-colors",children:"â† Back"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center border-2 border-gray-200",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-700",children:s.total}),(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Total Full Access Requests"})]}),(0,b.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 text-center border-2 border-orange-200",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:s.pending}),(0,b.jsx)("div",{className:"text-sm text-orange-800",children:"Pending"})]}),(0,b.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center border-2 border-green-200",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.approved}),(0,b.jsx)("div",{className:"text-sm text-green-800",children:"Approved"})]}),(0,b.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 text-center border-2 border-red-200",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600",children:s.denied}),(0,b.jsx)("div",{className:"text-sm text-red-800",children:"Denied"})]})]}),(0,b.jsx)("div",{className:"flex gap-2 mb-6 flex-wrap",children:["ALL","PENDING","APPROVED","DENIED"].map(a=>(0,b.jsx)("button",{onClick:()=>o(a),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n===a?"bg-[#083b7a] text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:a},a))}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden border",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b hidden sm:table-header-group",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Article"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Volume/Issue"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Requested By"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 block sm:table-row-group",children:j?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"Loading requests..."})}):r.length>0?r.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 block sm:table-row bg-white rounded-lg shadow-sm sm:shadow-none mb-4 sm:mb-0 border sm:border-0 p-4 sm:p-0",children:[(0,b.jsxs)("td",{className:"sm:px-4 sm:py-3 block sm:table-cell mb-2 sm:mb-0",children:[(0,b.jsx)("span",{className:"sm:hidden font-semibold text-gray-700 block mb-1",children:"Article:"}),(0,b.jsx)("div",{className:"font-medium text-gray-900 line-clamp-2",children:a.article?.title||"Unknown Article"})]}),(0,b.jsxs)("td",{className:"sm:px-4 sm:py-3 text-sm text-gray-600 block sm:table-cell mb-2 sm:mb-0",children:[(0,b.jsx)("span",{className:"sm:hidden font-semibold text-gray-700 block mb-1",children:"Volume/Issue:"}),a.article?.issue?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{children:["Vol ",a.article.issue.volume?.number??"â€”"]}),(0,b.jsxs)("div",{children:["Issue ",a.article.issue.number??"â€”"]})]}):"â€”"]}),(0,b.jsxs)("td",{className:"sm:px-4 sm:py-3 text-sm text-gray-600 block sm:table-cell mb-2 sm:mb-0",children:[(0,b.jsx)("span",{className:"sm:hidden font-semibold text-gray-700 block mb-1",children:"Requested By:"}),(0,b.jsx)("div",{children:a.user?.userName||"Unknown"}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.user?.email||a.userId})]}),(0,b.jsxs)("td",{className:"sm:px-4 sm:py-3 block sm:table-cell mb-2 sm:mb-0",children:[(0,b.jsx)("span",{className:"sm:hidden font-semibold text-gray-700 block mb-1",children:"Status:"}),(0,b.jsx)("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded ${"PENDING"===a.status?"bg-orange-100 text-orange-800":"APPROVED"===a.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.status})]}),(0,b.jsxs)("td",{className:"sm:px-4 sm:py-3 text-sm text-gray-600 block sm:table-cell mb-4 sm:mb-0",children:[(0,b.jsx)("span",{className:"sm:hidden font-semibold text-gray-700 block mb-1",children:"Date:"}),new Date(a.createdAt).toLocaleDateString()]}),(0,b.jsx)("td",{className:"sm:px-4 sm:py-3 text-right block sm:table-cell",children:(0,b.jsxs)("div",{className:"flex gap-2 justify-end sm:justify-end border-t sm:border-t-0 pt-3 sm:pt-0",children:["PENDING"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>p(a.id),className:"px-3 py-1 text-sm rounded bg-green-600 text-white hover:bg-green-700 transition-colors",disabled:l.isLoading,children:"Approve"}),(0,b.jsx)("button",{onClick:()=>q(a.id),className:"px-3 py-1 text-sm rounded bg-red-600 text-white hover:bg-red-700 transition-colors",disabled:m.isLoading,children:"Deny"})]}),"DENIED"===a.status&&(0,b.jsx)("button",{onClick:()=>p(a.id),className:"px-3 py-1 text-sm rounded bg-green-600 text-white hover:bg-green-700 transition-colors",disabled:l.isLoading,children:"Approve"}),"APPROVED"===a.status&&(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"No actions"})]})})]},a.id)):(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:"6",className:"px-4 py-12 text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ“¥"}),(0,b.jsxs)("div",{className:"text-lg font-medium text-gray-700 mb-2",children:["No ","ALL"!==n?n.toLowerCase():""," requests found"]}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Full Access requests will appear here"})]})})})]})})})]})})}])}];

//# sourceMappingURL=_1615547f._.js.map