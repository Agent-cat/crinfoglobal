module.exports=[76209,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(66960),g=a.i(73233),h=a.i(10850),i=a.i(88770),j=a.i(27863);a.s(["default",0,()=>{let a=(0,e.useRouter)(),{data:k,isLoading:l}=(0,h.useAuth)(),{data:m=[],isLoading:n}=(0,f.usePublishedArticles)(),{data:o=[],isLoading:p}=(0,g.useVolumes)(),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)({}),[u,v]=(0,c.useState)(null),w=(0,f.useUpdateArticle)(),x=(0,f.useDeleteArticle)(),y=async()=>{if(u)try{await x.mutateAsync(u),await (0,j.revalidateContent)("articles"),await (0,j.revalidateContent)("latest-articles"),await (0,j.revalidateContent)("volumes"),v(null),alert("Article deleted successfully.")}catch(a){console.error("Failed to delete article:",a),alert("Failed to delete article: "+a.message)}},z=(a,b,c)=>{let d=[...s.authors||[]];d[a]={...d[a],[b]:c},t({...s,authors:d})},A=async()=>{if(q)try{let a,b=JSON.stringify(s.authors||[]);if(s.file){let c=new FormData;c.append("title",s.title),c.append("abstract",s.abstract),c.append("keywords",s.keywords),c.append("doi",s.doi),c.append("totalPages",s.totalPages),c.append("articleType",s.articleType),c.append("issueId",s.issueId),c.append("authors",b),c.append("pdf",s.file),a=c}else{let{file:c,authors:d,...e}=s;(a={...e,authors:b}).authors=s.authors}await w.mutateAsync({articleId:q.id,data:a}),await (0,j.revalidateContent)("articles"),await (0,j.revalidateContent)("latest-articles"),await (0,j.revalidateContent)(`article-${q.id}`),await (0,j.revalidateContent)("volumes"),r(null),t({}),alert("Article updated successfully!")}catch(a){console.error("Failed to update article:",a),alert("Failed to update article: "+a.message)}};return l?(0,b.jsx)("div",{className:"min-h-screen text-justify bg-white mt-16 py-8 px-5",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsx)("div",{className:"h-6 w-40 bg-gray-200 animate-pulse rounded mb-6"}),(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-24 bg-gray-200 animate-pulse rounded"},a))})]})}):k?"EDITOR"!==k.role?(0,b.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Forbidden"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Editor access required."})]})}):(0,b.jsx)("div",{className:"min-h-screen w-full text-black bg-white mt-16 py-8 px-5",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:"Published Articles"}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)(d.default,{href:"/admin",className:"px-4 py-2 rounded-lg border border-gray-300 text-sm hover:bg-gray-50 transition-colors text-center",children:"â† Back to Admin"}),(0,b.jsx)("button",{onClick:()=>window.history.back(),className:"px-4 py-2 rounded-lg border border-gray-300 text-sm hover:bg-gray-50 transition-colors",children:"â† Back"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,b.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:m.length}),(0,b.jsx)("div",{className:"text-sm text-blue-800",children:"Total Published"})]}),(0,b.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:m.filter(a=>a.doi).length}),(0,b.jsx)("div",{className:"text-sm text-green-800",children:"With DOI"})]}),(0,b.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:m.reduce((a,b)=>a+(b.totalPages||0),0)}),(0,b.jsx)("div",{className:"text-sm text-purple-800",children:"Total Pages"})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Published Articles"}),l||n||p?(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 animate-pulse rounded mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 animate-pulse rounded w-1/3"})]},a))}):m.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:m.map(c=>(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer group",onClick:()=>a.push(`/admin/published/${c.id}`),children:(0,b.jsxs)("div",{className:"p-5",children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 text-lg mb-2 group-hover:text-[#083b7a] transition-colors line-clamp-2",children:(0,i.sanitizeText)(c.title||"")}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,b.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-black text-white rounded",children:c.articleType}),c.issue&&(0,b.jsxs)("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-white text-black rounded",children:["Vol ",c.issue.volume?.number," â€¢ Issue"," ",c.issue.number]})]})]})}),c.abstract&&(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3",children:(0,i.sanitizeText)(c.abstract)}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-gray-500 mb-4",children:[c.doi&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,b.jsx)("span",{className:"line-clamp-1",children:(0,i.sanitizeDoi)(c.doi||"")})]}),c.totalPages&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,b.jsxs)("span",{children:[c.totalPages," pages"]})]}),c.publishedAt&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,b.jsx)("span",{children:new Date(c.publishedAt).toLocaleDateString()})]}),c.views&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),(0,b.jsxs)("span",{children:[c.views," views"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[(0,b.jsx)("button",{onClick:a=>{a.stopPropagation();r(c);let b=[];try{"string"==typeof c.authorsJson?b=JSON.parse(c.authorsJson):Array.isArray(c.authorsJson)&&(b=c.authorsJson)}catch(a){}Array.isArray(b)||(b=[]),t({title:c.title||"",abstract:c.abstract||"",keywords:c.keywords||"",doi:c.doi||"",totalPages:c.totalPages||"",articleType:c.articleType||"Research Article",issueId:c.issueId||"",authors:b})},className:"px-3 py-1 text-xs rounded bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"âœï¸ Edit"}),(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),v(c.id)},className:"px-3 py-1 text-xs rounded bg-red-600 text-white hover:bg-red-700 transition-colors ml-2",children:"ðŸ—‘ï¸ Delete"}),(0,b.jsx)("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#083b7a] transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})},c.id))}):(0,b.jsxs)("div",{className:"text-center text-gray-500 py-12 bg-white rounded-lg border-2 border-dashed",children:[(0,b.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ“š"}),(0,b.jsx)("div",{className:"text-lg font-medium mb-2",children:"No published articles"}),(0,b.jsx)("div",{className:"text-sm",children:"Articles will appear here once they are published."})]})]}),q&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsx)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:"Edit Article"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,b.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",value:s.title,onChange:a=>t({...s,title:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Article Type"}),(0,b.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",value:s.articleType,onChange:a=>t({...s,articleType:a.target.value}),children:[(0,b.jsx)("option",{value:"Research Article",children:"Research Article"}),(0,b.jsx)("option",{value:"Review Article",children:"Review Article"}),(0,b.jsx)("option",{value:"Case Study",children:"Case Study"}),(0,b.jsx)("option",{value:"Short Communication",children:"Short Communication"}),(0,b.jsx)("option",{value:"Editorial",children:"Editorial"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Issue"}),(0,b.jsxs)("select",{className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",value:s.issueId,onChange:a=>t({...s,issueId:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"-- Select Issue --"}),o.map(a=>(0,b.jsx)("optgroup",{label:`Volume ${a.number}`,children:(a.issues||[]).map(a=>(0,b.jsxs)("option",{value:a.id,children:["Issue ",a.number," (",a.month," ",a.year,")"]},a.id))},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Authors"}),(0,b.jsx)("div",{className:"space-y-3",children:(s.authors||[]).map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",placeholder:"Name",className:"flex-1 border rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-[#083b7a]",value:a.name||"",onChange:a=>z(c,"name",a.target.value)}),(0,b.jsx)("input",{type:"email",placeholder:"Email",className:"flex-1 border rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-[#083b7a]",value:a.email||"",onChange:a=>z(c,"email",a.target.value)})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",placeholder:"Affiliation",className:"flex-1 border rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-[#083b7a]",value:a.affiliation||"",onChange:a=>z(c,"affiliation",a.target.value)}),(0,b.jsx)("button",{onClick:()=>{t(a=>({...a,authors:(a.authors||[]).filter((a,b)=>b!==c)}))},className:"px-2 py-1 text-xs bg-red-100 text-red-600 rounded hover:bg-red-200",children:"Remove"})]})]},c))}),(0,b.jsx)("button",{onClick:()=>{t(a=>({...a,authors:[...a.authors||[],{name:"",email:"",affiliation:""}]}))},className:"mt-2 text-sm text-[#083b7a] hover:underline font-medium",children:"+ Add Author"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Abstract"}),(0,b.jsx)("textarea",{className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",rows:"6",value:s.abstract,onChange:a=>t({...s,abstract:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Keywords"}),(0,b.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",value:s.keywords,onChange:a=>t({...s,keywords:a.target.value}),placeholder:"Separate with commas"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DOI"}),(0,b.jsx)("input",{type:"text",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",value:s.doi,onChange:a=>t({...s,doi:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Pages"}),(0,b.jsx)("input",{type:"number",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",value:s.totalPages,onChange:a=>t({...s,totalPages:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Update PDF (optional)"}),(0,b.jsx)("input",{type:"file",accept:"application/pdf",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a]",onChange:a=>t({...s,file:a.target.files[0]})}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a new PDF to replace the existing one."})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:A,className:"flex-1 px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors font-medium",children:"Save Changes"}),(0,b.jsx)("button",{onClick:()=>{r(null),t({})},className:"flex-1 px-4 py-2 rounded-lg bg-gray-500 text-white hover:bg-gray-600 transition-colors font-medium",children:"Cancel"})]})]})})}),u&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg max-w-sm w-full p-6 shadow-xl",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Delete Article?"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this article? This action cannot be undone."}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:y,className:"flex-1 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors font-medium",children:"Delete"}),(0,b.jsx)("button",{onClick:()=>v(null),className:"flex-1 px-4 py-2 rounded-lg bg-gray-200 text-gray-800 hover:bg-gray-300 transition-colors font-medium",children:"Cancel"})]})]})})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Please sign in"}),(0,b.jsx)(d.default,{href:"/auth/signin",className:"text-blue-600 hover:underline",children:"Go to Sign In"})]})})}])}];

//# sourceMappingURL=app_admin_published_page_d0abeb9d.js.map