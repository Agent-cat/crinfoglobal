(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95187,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={callServer:function(){return i.callServer},createServerReference:function(){return n.createServerReference},findSourceMapURL:function(){return l.findSourceMapURL}};for(var r in a)Object.defineProperty(s,r,{enumerable:!0,get:a[r]});let i=e.r(32120),l=e.r(92245),n=e.r(35326)},34903,e=>{"use strict";var t=e.i(95187),s=(0,t.createServerReference)("40970c2075e74888b788b91d6535d7be88ac0bbbde",t.callServer,void 0,t.findSourceMapURL,"revalidateContent");e.s(["revalidateContent",()=>s])},78793,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(22016),r=e.i(18566),i=e.i(25151),l=e.i(34903),n=e.i(83102);e.s(["default",0,()=>{let e=(0,r.useParams)(),d=(0,r.useRouter)(),c=e.id,[o,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)(null),[u,b]=(0,s.useState)(null),[g,p]=(0,s.useState)([]),[f,j]=(0,s.useState)(!0),[v,y]=(0,s.useState)(""),[N,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let e=await (0,i.checkAuth)();if(h(e),e?.role!=="EDITOR")return void x(!0);let[t,s]=await Promise.all([(0,i.listSubmittedArticles)(),(0,i.listVolumes)()]),a=t.find(e=>e.id===c);b(a),p(s)}catch(e){h(null)}x(!0),j(!1)})()},[c]);let S=async()=>{if(!v)return void alert("Please select an issue first");w(!0);try{await (0,i.publishArticle)(c,v),await (0,l.revalidateContent)("articles"),await (0,l.revalidateContent)("volumes"),alert("Article published successfully!"),d.push("/admin/submitted")}catch(e){console.error("Failed to publish article:",e),alert("Failed to publish article. Please try again.")}finally{w(!1)}};return!o||f?(0,t.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,t.jsx)("div",{className:"h-6 w-40 bg-gray-200 animate-pulse rounded mb-6"}),(0,t.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 animate-pulse rounded mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 animate-pulse rounded mb-2 w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 animate-pulse rounded w-1/2"})]})]})}):m?"EDITOR"!==m.role?(0,t.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Forbidden"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Editor access required."})]})}):u?(0,t.jsx)("div",{className:"min-h-screen w-full text-black bg-white mt-16 py-8 px-5",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,t.jsxs)(a.default,{href:"/admin/submitted",className:"flex items-center gap-2 text-gray-600 hover:text-[#083b7a] transition-colors",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,t.jsx)("span",{children:"Back to Submitted Articles"})]})}),(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-white p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsx)("span",{className:"inline-block px-3 py-1 text-sm font-medium bg-orange-100 text-orange-800 rounded",children:u.articleType}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Submitted: ",new Date(u.createdAt).toLocaleDateString()]})]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:(0,n.sanitizeText)(u.title||"")}),(0,t.jsx)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:u.totalPages&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,t.jsxs)("span",{className:"font-medium",children:[u.totalPages," pages"]})]})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Authors"}),(0,t.jsx)("p",{className:"text-gray-700",children:(e=>{if(!e)return"N/A";try{let t="string"==typeof e?JSON.parse(e):e;if(!Array.isArray(t))return"N/A";return t.map(n.sanitizeAuthor).filter(e=>null!==e).map(e=>(0,n.sanitizeText)(e.name)+(e.superscript?`^${(0,n.sanitizeText)(e.superscript)}`:"")).join(", ")}catch{return"N/A"}})(u.authorsJson)})]}),u.abstract&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Abstract"}),(0,t.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 text-gray-700 leading-relaxed whitespace-pre-wrap",children:(0,n.sanitizeText)(u.abstract)})]}),u.keywords&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Keywords"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,n.sanitizeKeywords)(u.keywords).map((e,s)=>(0,t.jsx)("span",{className:"px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:e},s))})]}),(u.conflictOfInterest||u.fundingInfo||u.dataAvailability)&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Additional Information"}),u.conflictOfInterest&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Conflict of Interest"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:(0,n.sanitizeText)(u.conflictOfInterest)})]}),u.fundingInfo&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Funding Information"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:(0,n.sanitizeText)(u.fundingInfo)})]}),u.dataAvailability&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Data Availability"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:(0,n.sanitizeText)(u.dataAvailability)})]})]}),u.pdfPath&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Manuscript"}),(0,t.jsxs)("a",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors",href:u.pdfPath.startsWith("/api/")?`${i.BASE_URL}${u.pdfPath}`:u.pdfPath,target:"_blank",rel:"noreferrer",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download PDF"]})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Publish Article"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Select an issue to publish this article to. Once published, the article will be moved to the published articles list."}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsxs)("select",{className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#083b7a] bg-white",value:v,onChange:e=>y(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"Select Issue"}),g.flatMap(e=>(e.issues||[]).map(t=>({...t,volumeNumber:e.number}))).map(e=>(0,t.jsxs)("option",{value:e.id,children:["Volume ",e.volumeNumber," - Issue ",e.number," (",e.month," ",e.year,")"]},e.id))]}),(0,t.jsx)("button",{className:"px-6 py-2 rounded-lg bg-[#083b7a] text-white hover:bg-[#0a4ea3] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",onClick:S,disabled:N||!v,children:N?"Publishing...":"Publish Article"})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Article not found"}),(0,t.jsx)(a.default,{href:"/admin/submitted",className:"text-[#083b7a] hover:underline",children:"‚Üê Back to Submitted Articles"})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-white mt-16 py-8 px-5",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Please sign in"}),(0,t.jsx)(a.default,{href:"/auth/signin",className:"text-blue-600 hover:underline",children:"Go to Sign In"})]})})}])}]);