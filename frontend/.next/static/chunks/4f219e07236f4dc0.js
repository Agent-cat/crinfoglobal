(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72278,(t,e,i)=>{"use strict";var r,s,n,a,o,l,u,p,c,h,f={PROCESSOR_VERSION:"1.4.61",error:function(t){if("undefined"==typeof Error)throw Error("citeproc-js error: "+t);throw"citeproc-js error: "+t},debug:function(t){"undefined"==typeof console?dump("CSL: "+t+"\n"):console.log("citeproc-js warning: "+t)},toLocaleUpperCase(t){var e=this.tmp.lang_array;try{t=t.toLocaleUpperCase(e)}catch(e){t=t.toUpperCase()}return t},toLocaleLowerCase(t){var e=this.tmp.lang_array;try{t=t.toLocaleLowerCase(e)}catch(e){t=t.toLowerCase()}return t},LOCATOR_LABELS_REGEXP:RegExp("^((vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\\.)\\s+(.*)"),STATUTE_SUBDIV_PLAIN_REGEX:/(?:(?:^| )(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_PLAIN_REGEX_FRONT:/(?:^\s*[.,;]*\s*(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_STRINGS:{"vrs.":"verse","sv.":"sub-verbo","subpara.":"subparagraph","op.":"opus","subch.":"subchapter","add.":"addendum","amend.":"amendment","annot.":"annotation","app.":"appendix","art.":"article","bibliog.":"bibliography","bk.":"book","ch.":"chapter","cl.":"clause","col.":"column","cmt.":"comment","dec.":"decision","dept.":"department","ex.":"example","fig.":"figure","fld.":"field","fol.":"folio","n.":"note","hypo.":"hypothetical","illus.":"illustration","intro.":"introduction","l.":"line","no.":"issue","p.":"page","pp.":"page","para.":"paragraph","pt.":"part","pmbl.":"preamble","princ.":"principle","pub.":"publication","r.":"rule","rn.":"randnummer","sched.":"schedule","sec.":"section","ser.":"series,","subdiv.":"subdivision","subsec.":"subsection","supp.":"supplement","tbl.":"table","tit.":"title","vol.":"volume"},STATUTE_SUBDIV_STRINGS_REVERSE:{verse:"vrs.","sub-verbo":"sv.","sub verbo":"sv.",subparagraph:"subpara.",opus:"op.",subchapter:"subch.",addendum:"add.",amendment:"amend.",annotation:"annot.",appendix:"app.",article:"art.",bibliography:"bibliog.",book:"bk.",chapter:"ch.",clause:"cl.",column:"col.",comment:"cmt.",decision:"dec.",department:"dept.",example:"ex.",figure:"fig.",field:"fld.",folio:"fol.",note:"n.",hypothetical:"hypo.",illustration:"illus.",introduction:"intro.",line:"l.",issue:"no.",page:"p.",paragraph:"para.",part:"pt.",preamble:"pmbl.",principle:"princ.",publication:"pub.",rule:"r.",randnummer:"rn.",schedule:"sched.",section:"sec.","series,":"ser.",subdivision:"subdiv.",subsection:"subsec.",supplement:"supp.",table:"tbl.",title:"tit.",volume:"vol."},LOCATOR_LABELS_MAP:{vrs:"verse",sv:"sub-verbo",subpara:"subparagraph",op:"opus",subch:"subchapter",add:"addendum",amend:"amendment",annot:"annotation",app:"appendix",art:"article",bibliog:"bibliography",bk:"book",ch:"chapter",cl:"clause",col:"column",cmt:"comment",dec:"decision",dept:"department",ex:"example",fig:"figure",fld:"field",fol:"folio",n:"note",hypo:"hypothetical",illus:"illustration",intro:"introduction",l:"line",no:"issue",p:"page",pp:"page",para:"paragraph",pt:"part",pmbl:"preamble",princ:"principle",pub:"publication",r:"rule",rn:"randnummer",sched:"schedule",sec:"section",ser:"series,",subdiv:"subdivision",subsec:"subsection",supp:"supplement",tbl:"table",tit:"title",vol:"volume"},MODULE_MACROS:{"juris-pretitle":!0,"juris-title":!0,"juris-pretitle-short":!0,"juris-title-short":!0,"juris-main":!0,"juris-main-short":!0,"juris-tail":!0,"juris-tail-short":!0,"juris-locator":!0},MODULE_TYPES:{legal_case:!0,legislation:!0,bill:!0,hearing:!0,gazette:!0,report:!0,regulation:!0,standard:!0,patent:!0,locator:!0},checkNestedBrace:function(t){"note"===t.opt.xclass?(this.depth=0,this.update=function(t){for(var t=t||"",e=t.split(/([\(\)])/),i=1,r=e.length;i<r;i+=2)"("===e[i]?(1==this.depth%2&&(e[i]="["),this.depth+=1):")"===e[i]&&(0==this.depth%2&&(e[i]="]"),this.depth-=1);return e.join("")}):this.update=function(t){return t}},MULTI_FIELDS:["event","publisher","publisher-place","event-place","title","container-title","collection-title","authority","genre","title-short","medium","country","jurisdiction","archive","archive-place"],LangPrefsMap:{title:"titles","title-short":"titles",event:"titles",genre:"titles",medium:"titles","container-title":"journals","collection-title":"titles",archive:"journals",publisher:"publishers",authority:"publishers","publisher-place":"places","event-place":"places","archive-place":"places",jurisdiction:"places",number:"places",edition:"places",issue:"places",volume:"places"},AbbreviationSegments:function(){this["container-title"]={},this["collection-title"]={},this["institution-entire"]={},this["institution-part"]={},this.nickname={},this.number={},this.title={},this.place={},this.hereinafter={},this.classic={},this["container-phrase"]={},this["title-phrase"]={}},getAbbrevsDomain:function(t,e,i){var r=null;if(t.opt.availableAbbrevDomains&&e&&"default"!==e){var s=t.locale[t.opt.lang].opts["jurisdiction-preference"],n=null;if(t.locale[i]&&(n=t.locale[i].opts["jurisdiction-preference"]),n){for(var a=n.length-1;a>-1;a--)if(t.opt.availableAbbrevDomains[e].indexOf(n[a])>-1){r=n[a];break}}if(!r&&s){for(var a=s.length-1;a>-1;a--)if(t.opt.availableAbbrevDomains[e].indexOf(s[a])>-1){r=s[a];break}}}return r},FIELD_CATEGORY_REMAP:{title:"title","container-title":"container-title","collection-title":"collection-title",country:"place",number:"number",place:"place",archive:"container-title","title-short":"title",genre:"title",event:"title",medium:"title","archive-place":"place","publisher-place":"place","event-place":"place",jurisdiction:"place","language-name":"place","language-name-original":"place","call-number":"number","chapter-number":"number","collection-number":"number",edition:"number",page:"number",issue:"number",locator:"number","locator-extra":"number","number-of-pages":"number","number-of-volumes":"number",volume:"number","citation-number":"number",publisher:"institution-part"},parseLocator:function(t){if(this.opt.development_extensions.locator_date_and_revision&&t.locator){t.locator=""+t.locator;var e=t.locator.indexOf("|");if(e>-1){var i=t.locator;t.locator=i.slice(0,e);var r=(i=i.slice(e+1)).match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}).*/);r&&(t["locator-date"]=this.fun.dateparser.parseDateToObject(r[1]),i=i.slice(r[1].length)),t["locator-extra"]=i.replace(/^\s+/,"").replace(/\s+$/,"")}}return t.locator&&(t.locator=(""+t.locator).replace(/\s+$/,"")),t},normalizeLocaleStr:function(t){if(t){var e=t.split("-");return e[0]=e[0].toLowerCase(),e[1]&&(e[1]=e[1].toUpperCase()),e.join("-")}},parseNoteFieldHacks:function(t,e,i){if("string"==typeof t.note){for(var r=[],s=t.note.split("\n"),n=0,a=s.length;n<a;n++){var o=s[n],r=[],l=o.match(f.NOTE_FIELDS_REGEXP);if(l){for(var u=o.split(f.NOTE_FIELDS_REGEXP),p=0,c=u.length-1;p<c;p++)r.push(u[p]),r.push(l[p]);r.push(u[u.length-1]);for(var p=1,c=r.length;p<c;p+=2)if(r[p-1].trim()&&(n>0||p>1)&&!r[p-1].match(f.NOTE_FIELD_REGEXP))break;else r[p]="\n"+r[p].slice(2,-1).trim()+"\n";s[n]=r.join("")}}s=s.join("\n").split("\n");for(var h=0,m={},n=0,a=s.length;n<a;n++){var o=s[n],d=o.match(f.NOTE_FIELD_REGEXP);if(o.trim()){if(!d)if(0===n)continue;else{h=n;break}var g=d[1],b=d[2].replace(/^\s+/,"").replace(/\s+$/,"");if("type"===g)t.type=b,s[n]="";else if(f.DATE_VARIABLES.indexOf(g.replace(/^alt-/,""))>-1)(!t[g]||i)&&(t[g]=f.DateParser.parseDateToArray(b),(!e||e[g]&&this.isDateString(b))&&(s[n]=""));else if(!t[g]){if(f.NAME_VARIABLES.indexOf(g.replace(/^alt-/,""))>-1){m[g]||(m[g]=[]);var y=b.split(/\s*\|\|\s*/);if(1===y.length)m[g].push({literal:y[0]});else if(2===y.length){var v={family:y[0],given:y[1]};f.parseParticles(v),m[g].push(v)}}else t[g]=b;(!e||e[g])&&(s[n]="")}}}for(var g in m)t[g]=m[g];if(e){s[h].trim()&&(s[h]="\n"+s[h]);for(var n=h-1;n>-1;n--)s[n].trim()||(s=s.slice(0,n).concat(s.slice(n+1)))}t.note=s.join("\n").trim()}},checkPrefixSpaceAppend:function(t,e){e||(e="");var i="",r=e.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,""),s=r.slice(-1);r.match(f.ENDSWITH_ROMANESQUE_REGEXP)||f.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(s)>-1?i=" ":s.match(/[\)\],0-9]/)&&(i=" ");var e=(e+i).replace(/\s+/g," ");return e},checkIgnorePredecessor:function(t,e){var i=e.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,"").slice(-1);return!!(f.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(i)>-1&&e.trim().indexOf(" ")>-1)&&(t.tmp.term_predecessor=!1,!0)},checkSuffixSpacePrepend:function(t,e){return e?((e.match(f.STARTSWITH_ROMANESQUE_REGEXP)||["[","("].indexOf(e.slice(0,1))>-1)&&(e=" "+e),e):""},GENDERS:["masculine","feminine"],ERROR_NO_RENDERED_FORM:1,PREVIEW:"Just for laughs.",ASSUME_ALL_ITEMS_REGISTERED:2,START:0,END:1,SINGLETON:2,SEEN:6,SUCCESSOR:3,SUCCESSOR_OF_SUCCESSOR:4,SUPPRESS:5,SINGULAR:0,PLURAL:1,LITERAL:!0,BEFORE:1,AFTER:2,DESCENDING:1,ASCENDING:2,PRIMARY:1,SECONDARY:2,POSITION_FIRST:0,POSITION_SUBSEQUENT:1,POSITION_IBID:2,POSITION_IBID_WITH_LOCATOR:3,POSITION_CONTAINER_SUBSEQUENT:4,POSITION_MAP:{0:0,4:1,1:2,2:3,3:4},POSITION_TEST_VARS:["position","first-reference-note-number","near-note"],AREAS:["citation","citation_sort","bibliography","bibliography_sort","intext"],CITE_FIELDS:["first-reference-note-number","first-container-reference-note-number","locator","locator-extra"],SWAPPING_PUNCTUATION:[".","!","?",":",","],TERMINAL_PUNCTUATION:[":",".",";","!","?"," "],NONE:0,NUMERIC:1,POSITION:2,TRIGRAPH:3,DATE_PARTS:["year","month","day"],DATE_PARTS_ALL:["year","month","day","season"],DATE_PARTS_INTERNAL:["year","month","day","year_end","month_end","day_end"],NAME_PARTS:["non-dropping-particle","family","given","dropping-particle","suffix","literal"],DISAMBIGUATE_OPTIONS:["disambiguate-add-names","disambiguate-add-givenname","disambiguate-add-year-suffix"],GIVENNAME_DISAMBIGUATION_RULES:["all-names","all-names-with-initials","primary-name","primary-name-with-initials","by-cite"],NAME_ATTRIBUTES:["and","delimiter-precedes-last","delimiter-precedes-et-al","initialize-with","initialize","name-as-sort-order","sort-separator","et-al-min","et-al-use-first","et-al-subsequent-min","et-al-subsequent-use-first","form","prefix","suffix","delimiter"],LOOSE:0,STRICT:1,TOLERANT:2,PREFIX_PUNCTUATION:/[.;:]\s*$/,SUFFIX_PUNCTUATION:/^\s*[.;:,\(\)]/,NUMBER_REGEXP:/(?:^\d+|\d+$)/,NAME_INITIAL_REGEXP:/^([A-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u042f\u0590-\u05d4\u05d6-\u05ff\u0600-\u06ff\u0370\u0372\u0376\u0386\u0388-\u03ab\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03fd-\u03ff])([a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u052f\u0600-\u06ff\u0370-\u03ff\u1f00-\u1fff]*|)(\.)*/,ROMANESQUE_REGEXP:/[-0-9a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ROMANESQUE_NOT_REGEXP:/[^a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/g,STARTSWITH_ROMANESQUE_REGEXP:/^[&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ENDSWITH_ROMANESQUE_REGEXP:/[.;:&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]$/,ALL_ROMANESQUE_REGEXP:/^[a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]+$/,VIETNAMESE_SPECIALS:/[\u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]/,VIETNAMESE_NAMES:/^(?:(?:[.AaBbCcDdEeGgHhIiKkLlMmNnOoPpQqRrSsTtUuVvXxYy \u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]{2,6})(\s+|$))+$/,NOTE_FIELDS_REGEXP:/\{:(?:[\-_a-z]+|[A-Z]+):[^\}]+\}/g,NOTE_FIELD_REGEXP:/^([\-_a-z]+|[A-Z]+):\s*([^\}]+)$/,PARTICLE_GIVEN_REGEXP:/^([^ ]+(?:\u02bb |\u2019 | |\' ) *)(.+)$/,PARTICLE_FAMILY_REGEXP:/^([^ ]+(?:\-|\u02bb|\u2019| |\') *)(.+)$/,DISPLAY_CLASSES:["block","left-margin","right-inline","indent"],NAME_VARIABLES:["author","chair","collection-editor","compiler","composer","container-author","contributor","curator","director","editor","editor-translator","editorial-director","executive-producer","guest","host","illustrator","interviewer","narrator","organizer","original-author","performer","producer","recipient","reviewed-author","script-writer","series-creator","translator","commenter"],CREATORS:["author","chair","collection-editor","compiler","composer","container-author","contributor","curator","director","editor","editor-translator","editorial-director","executive-producer","guest","host","illustrator","interviewer","narrator","organizer","original-author","performer","producer","recipient","reviewed-author","script-writer","series-creator","translator","commenter"],NUMERIC_VARIABLES:["call-number","chapter-number","collection-number","division","edition","page","issue","locator","locator-extra","number","number-of-pages","number-of-volumes","part-number","printing-number","section","supplement-number","version","volume","supplement","citation-number"],DATE_VARIABLES:["locator-date","issued","event-date","accessed","original-date","publication-date","available-date","submitted","alt-issued","alt-event"],VARIABLES_WITH_SHORT_FORM:["title","container-title"],TITLE_FIELD_SPLITS:function(t){for(var e=["title","short","main","sub","subjoin"],i={},r=0,s=e.length;r<s;r++)i[e[r]]=t+"title"+("title"===e[r]?"":"-"+e[r]);return i},demoteNoiseWords:function(t,e,i){var r=t.locale[t.opt.lang].opts["leading-noise-words"];if(e&&i){(e=e.split(/\s+/)).reverse();for(var s=[],n=e.length-1;n>-1;n+=-1)if(r.indexOf(e[n].toLowerCase())>-1)s.push(e.pop());else break;e.reverse();var a=e.join(" "),o=s.join(" ");"drop"!==i&&o?"demote"===i&&(e=[a,o].join(", ")):e=a}return e},extractTitleAndSubtitle:function(t,e){var i=e?" ":"",r=[""];this.opt.development_extensions.split_container_title&&r.push("container-");for(var s=0,n=r.length;s<n;s++){var a=r[s],o=f.TITLE_FIELD_SPLITS(a),l=[!1];if(t.multi)for(var u in t.multi._keys[o.short])l.push(u);for(var p=0,c=l.length;p<c;p++){var u=l[p],h={};u?(t.multi._keys[o.title]&&(h[o.title]=t.multi._keys[o.title][u]),t.multi._keys[o.short]&&(h[o.short]=t.multi._keys[o.short][u])):(h[o.title]=t[o.title],h[o.short]=t[o.short]),h[o.main]=h[o.title],h[o.sub]=!1;var m=h[o.short];if(h[o.title]){if(m&&m.toLowerCase()===h[o.title].toLowerCase())h[o.main]=h[o.title],h[o.subjoin]="",h[o.sub]="";else if(m){var d=h[o.title].slice(m.replace(/[\?\!]+$/,"").length),g=h[o.title].replace(d.replace(/^[\?\!]+/,""),"").trim(),b=f.TITLE_SPLIT_REGEXP.matchfirst.exec(d);if(b&&g.toLowerCase()===m.toLowerCase())h[o.main]=g,h[o.subjoin]=b[1].replace(/[\?\!]+(\s*)$/,"$1"),h[o.sub]=d.replace(f.TITLE_SPLIT_REGEXP.matchfirst,""),this.opt.development_extensions.force_short_title_casing_alignment&&(h[o.short]=h[o.main]);else{var y=f.TITLE_SPLIT(h[o.title]);3==y.length?(h[o.main]=y[0],h[o.subjoin]=y[1],h[o.sub]=y[2]):(h[o.main]=h[o.title],h[o.subjoin]="",h[o.sub]="")}}else{var y=f.TITLE_SPLIT(h[o.title]);if(3==y.length){if(h[o.main]=y[0],h[o.subjoin]=y[1],h[o.sub]=y[2],this.opt.development_extensions.implicit_short_title&&"legal_case"!==t.type&&!t[o.short]&&!h[o.main].match(/^[\-\.[0-9]+$/)){var v=h[o.subjoin].trim();-1===["?","!"].indexOf(v)&&(v=""),h[o.short]=h[o.main]+v}}else h[o.main]=h[o.title],h[o.subjoin]="",h[o.sub]=""}if(h[o.subjoin]&&h[o.subjoin].match(/([\?\!])/)){var b=h[o.subjoin].match(/(\s*)$/);h[o.main]=h[o.main]+i+h[o.subjoin].trim(),h[o.subjoin]=b[1]}}if(h[o.subjoin]&&(h[o.subjoin].indexOf(":")>-1&&(h[o.subjoin]=i+": "),(h[o.subjoin].indexOf("-")>-1||h[o.subjoin].indexOf("—")>-1)&&(h[o.subjoin]="—")),u)for(var _ in h)t.multi._keys[_]||(t.multi._keys[_]={}),t.multi._keys[_][u]=h[_];else for(var _ in h)t[_]=h[_]}}},titlecaseSentenceOrNormal:function(t,e,i,r,s){var n=f.TITLE_FIELD_SPLITS(i),a={};if(r&&e.multi?(e.multi._keys[n.title]&&(a[n.title]=e.multi._keys[n.title][r]),e.multi._keys[n.main]&&(a[n.main]=e.multi._keys[n.main][r]),e.multi._keys[n.sub]&&(a[n.sub]=e.multi._keys[n.sub][r]),e.multi._keys[n.subjoin]&&(a[n.subjoin]=e.multi._keys[n.subjoin][r])):(a[n.title]=e[n.title],a[n.main]=e[n.main],a[n.sub]=e[n.sub],a[n.subjoin]=e[n.subjoin]),a[n.main]&&a[n.sub]){var o=a[n.main],l=a[n.subjoin],u=a[n.sub];return s?(o=f.Output.Formatters.sentence(t,o),u=f.Output.Formatters.sentence(t,u)):t.opt.development_extensions.uppercase_subtitles&&(u=f.Output.Formatters["capitalize-first"](t,u)),[o,l,u].join("")}if(!a[n.title])return"";if(s)return f.Output.Formatters.sentence(t,a[n.title]);if(!t.opt.development_extensions.uppercase_subtitles)return a[n.title];for(var p=f.TITLE_SPLIT(a[n.title]),c=0,h=p.length;c<h;c+=2)p[c]=f.Output.Formatters["capitalize-first"](t,p[c]);for(var c=1,h=p.length-1;c<h;c+=2){var m=p[c].match(/([:\?\!] )/);if(m){var d="fr"===t.opt["default-locale"][0].slice(0,2).toLowerCase()?" ":"";p[c]=d+m[1]}(p[c].indexOf("-")>-1||p[c].indexOf("—")>-1)&&(p[c]="—")}return a[n.title]=p.join(""),a[n.title]},getSafeEscape:function(t){if(!(["bibliography","citation"].indexOf(t.tmp.area)>-1))return function(t){return t};var e=[];return(t.opt.development_extensions.thin_non_breaking_space_html_hack&&"html"===t.opt.mode&&e.push(function(t){return t.replace(/\u202f/g,'<span style="white-space:nowrap">&thinsp;</span>')}),e.length)?function(i){for(var r=0,s=e.length;r<s;r+=1)i=e[r](i);return f.Output.Formats[t.opt.mode].text_escape(i)}:f.Output.Formats[t.opt.mode].text_escape},SKIP_WORDS:["about","above","across","afore","after","against","al","along","alongside","amid","amidst","among","amongst","anenst","apropos","apud","around","as","aside","astride","at","athwart","atop","barring","before","behind","below","beneath","beside","besides","between","beyond","but","by","circa","despite","down","during","et","except","for","forenenst","from","given","in","inside","into","lest","like","modulo","near","next","notwithstanding","of","off","on","onto","out","over","per","plus","pro","qua","sans","since","than","through"," thru","throughout","thruout","till","to","toward","towards","under","underneath","until","unto","up","upon","versus","vs.","v.","vs","v","via","vis-à-vis","with","within","without","according to","ahead of","apart from","as for","as of","as per","as regards","aside from","back to","because of","close to","due to","except for","far from","inside of","instead of","near to","next to","on to","out from","out of","outside of","prior to","pursuant to","rather than","regardless of","such as","that of","up to","where as","or","yet","so","for","and","nor","a","an","the","de","d'","von","van","c","ca"],FORMAT_KEY_SEQUENCE:["@strip-periods","@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align","@quotes"],INSTITUTION_KEYS:["font-style","font-variant","font-weight","text-decoration","text-case"],SUFFIX_CHARS:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z",ROMAN_NUMERALS:[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xc"],["","c","cc","ccc","cd","d","dc","dcc","dccc","cm"],["","m","mm","mmm","mmmm","mmmmm"]],LANGS:{"af-ZA":"Afrikaans",ar:"Arabic","bg-BG":"Bulgarian","ca-AD":"Catalan","cs-CZ":"Czech","da-DK":"Danish","de-AT":"Austrian","de-CH":"German (CH)","de-DE":"German (DE)","el-GR":"Greek","en-GB":"English (GB)","en-US":"English (US)","es-ES":"Spanish","et-EE":"Estonian",eu:"European","fa-IR":"Persian","fi-FI":"Finnish","fr-CA":"French (CA)","fr-FR":"French (FR)","he-IL":"Hebrew","hr-HR":"Croatian","hu-HU":"Hungarian","is-IS":"Icelandic","it-IT":"Italian","ja-JP":"Japanese","km-KH":"Khmer","ko-KR":"Korean","lt-LT":"Lithuanian","lv-LV":"Latvian","mn-MN":"Mongolian","nb-NO":"Norwegian (Bokmål)","nl-NL":"Dutch","nn-NO":"Norwegian (Nynorsk)","pl-PL":"Polish","pt-BR":"Portuguese (BR)","pt-PT":"Portuguese (PT)","ro-RO":"Romanian","ru-RU":"Russian","sk-SK":"Slovak","sl-SI":"Slovenian","sr-RS":"Serbian","sv-SE":"Swedish","th-TH":"Thai","tr-TR":"Turkish","uk-UA":"Ukrainian","vi-VN":"Vietnamese","zh-CN":"Chinese (CN)","zh-TW":"Chinese (TW)"},LANG_BASES:{af:"af_ZA",ar:"ar",bg:"bg_BG",ca:"ca_AD",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",et:"et_EE",eu:"eu",fa:"fa_IR",fi:"fi_FI",fr:"fr_FR",he:"he_IL",hr:"hr-HR",hu:"hu_HU",is:"is_IS",it:"it_IT",ja:"ja_JP",km:"km_KH",ko:"ko_KR",lt:"lt_LT",lv:"lv-LV",mn:"mn_MN",nb:"nb_NO",nl:"nl_NL",nn:"nn-NO",pl:"pl_PL",pt:"pt_PT",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sl:"sl_SI",sr:"sr_RS",sv:"sv_SE",th:"th_TH",tr:"tr_TR",uk:"uk_UA",vi:"vi_VN",zh:"zh_CN"},SUPERSCRIPTS:{ª:"a","²":"2","³":"3","¹":"1",º:"o",ʰ:"h",ʱ:"ɦ",ʲ:"j",ʳ:"r",ʴ:"ɹ",ʵ:"ɻ",ʶ:"ʁ",ʷ:"w",ʸ:"y",ˠ:"ɣ",ˡ:"l",ˢ:"s",ˣ:"x",ˤ:"ʕ",ᴬ:"A",ᴭ:"Æ",ᴮ:"B",ᴰ:"D",ᴱ:"E",ᴲ:"Ǝ",ᴳ:"G",ᴴ:"H",ᴵ:"I",ᴶ:"J",ᴷ:"K",ᴸ:"L",ᴹ:"M",ᴺ:"N",ᴼ:"O",ᴽ:"Ȣ",ᴾ:"P",ᴿ:"R",ᵀ:"T",ᵁ:"U",ᵂ:"W",ᵃ:"a",ᵄ:"ɐ",ᵅ:"ɑ",ᵆ:"ᴂ",ᵇ:"b",ᵈ:"d",ᵉ:"e",ᵊ:"ə",ᵋ:"ɛ",ᵌ:"ɜ",ᵍ:"g",ᵏ:"k",ᵐ:"m",ᵑ:"ŋ",ᵒ:"o",ᵓ:"ɔ",ᵔ:"ᴖ",ᵕ:"ᴗ",ᵖ:"p",ᵗ:"t",ᵘ:"u",ᵙ:"ᴝ",ᵚ:"ɯ",ᵛ:"v",ᵜ:"ᴥ",ᵝ:"β",ᵞ:"γ",ᵟ:"δ",ᵠ:"φ",ᵡ:"χ","⁰":"0",ⁱ:"i","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","⁺":"+","⁻":"−","⁼":"=","⁽":"(","⁾":")",ⁿ:"n","℠":"SM","™":"TM","㆒":"一","㆓":"二","㆔":"三","㆕":"四","㆖":"上","㆗":"中","㆘":"下","㆙":"甲","㆚":"乙","㆛":"丙","㆜":"丁","㆝":"天","㆞":"地","㆟":"人",ˀ:"ʔ",ˁ:"ʕ",ۥ:"و",ۦ:"ي"},SUPERSCRIPTS_REGEXP:RegExp("[ª²³¹ºʰʱʲʳʴʵʶʷʸˠˡˢˣˤᴬᴭᴮᴰᴱᴲᴳᴴᴵᴶᴷᴸᴹᴺᴼᴽᴾᴿᵀᵁᵂᵃᵄᵅᵆᵇᵈᵉᵊᵋᵌᵍᵏᵐᵑᵒᵓᵔᵕᵖᵗᵘᵙᵚᵛᵜᵝᵞᵟᵠᵡ⁰ⁱ⁴⁵⁶⁷⁸⁹⁺⁻⁼⁽⁾ⁿ℠™㆒㆓㆔㆕㆖㆗㆘㆙㆚㆛㆜㆝㆞㆟ˀˁۥۦ]","g"),UPDATE_GROUP_CONTEXT_CONDITION:function(t,e,i,r,s){if(t.opt.use_context_condition){var n=t.tmp.group_context.tip;n.condition?(n.condition.termtxt||(n.condition.termtxt=e,n.condition.valueTerm=i),!n.value_seen&&"comma-safe-numbers-only"===n.condition.test&&s&&(n.value_seen=!0,s.match(/^[0-9]/)||(t.tmp.just_did_number=!1))):r&&r.decorations.filter(t=>"@vertical-align"===t[0]).length>0||r&&r.strings.suffix?t.tmp.just_did_number=!1:e&&(e.match(/[0-9]$/)?t.tmp.just_did_number=!0:t.tmp.just_did_number=!1)}},EVALUATE_GROUP_CONDITION:function(t,e){if(t.opt.use_context_condition){var i,r="comma-safe-numbers-only"===e.condition.test;if("empty-label"===e.condition.test)i=!e.condition.termtxt;else if("empty-label-no-decor"===e.condition.test)i=!e.condition.termtxt||e.condition.termtxt.indexOf("%s")>-1;else if(["comma-safe","comma-safe-numbers-only"].indexOf(e.condition.test)>-1){var s=e.condition.termtxt,n=!1;e.condition.termtxt&&(n=e.condition.termtxt.slice(0,1).match(f.ALL_ROMANESQUE_REGEXP)),i=t.tmp.just_did_number?e.condition.valueTerm?!r:!s||(n?!r:["always","after-number"].indexOf(t.opt.require_comma_on_symbol)>-1):!e.condition.valueTerm&&!!s&&(n?!r:"always"===t.opt.require_comma_on_symbol)}if(i)var a=!1;else var a=!0;return e.condition.not&&(a=!a),a}},SYS_OPTIONS:["prioritize_disambiguate_condition","csl_reverse_lookup_support","main_title_from_short_title","uppercase_subtitles","force_short_title_casing_alignment","implicit_short_title","split_container_title"],TITLE_SPLIT_REGEXP:{match:RegExp("("+(r=["\\.\\s+","\\!\\s+","\\?\\s+","\\s*::*\\s+","\\s*—\\s*","\\s+\\-\\s+","\\s*\\-\\-\\-*\\s*"]).join("|")+")","g"),matchfirst:RegExp("^("+r.join("|")+")"),split:RegExp("(?:"+r.join("|")+")")},TITLE_SPLIT:function(t){if(!t)return t;for(var e=t.match(f.TITLE_SPLIT_REGEXP.match),i=t.split(f.TITLE_SPLIT_REGEXP.split),r=i.length-2;r>-1;r--)i[r]=i[r].trim(),i[r]&&i[r].slice(-1).toLowerCase()!==i[r].slice(-1)?(i[r]=i[r]+e[r]+i[r+1],i=i.slice(0,r+1).concat(i.slice(r+2))):i=i.slice(0,r+1).concat([e[r]]).concat(i.slice(r+1));return i},GET_COURT_CLASS:function(t,e,i){var r="",s=null,n=e.jurisdiction?e.jurisdiction.split(":")[0]:null,a="court_condition_classes";return i&&(a="court_key_classes"),n&&e.authority&&("string"==typeof e.authority?s=e.authority:e.authority[0]&&e.authority[0].literal&&(s=e.authority[0].literal)),s&&(this.lang&&t.locale[this.lang].opts[a]&&t.locale[this.lang].opts[a][n]&&t.locale[this.lang].opts[a][n][s]?r=t.locale[this.lang].opts[a][n][s]:t.locale[t.opt["default-locale"][0]].opts[a]&&t.locale[t.opt["default-locale"][0]].opts[a][n]&&t.locale[t.opt["default-locale"][0]].opts[a][n][s]&&(r=t.locale[t.opt["default-locale"][0]].opts[a][n][s])),r},SET_COURT_CLASSES:function(t,e,i,r){for(var s=i.getNodesByName(r,"court-class"),n=0,a=i.numberofnodes(s);n<a;n+=1){var o=s[n],l=i.attributes(o),u=l["@name"],p=l["@country"],c=l["@courts"],h="court_key_classes";if(t.registry&&(h="court_condition_classes"),u&&p&&c){c=c.trim().split(/\s+/),t.locale[e].opts[h]||(t.locale[e].opts[h]={}),t.locale[e].opts[h][p]||(t.locale[e].opts[h][p]={});for(var f=0,m=c.length;f<m;f++)t.locale[e].opts[h][p][c[f]]=u}}},INIT_JURISDICTION_MACROS:function(t,e,i,r){if(e["best-jurisdiction"])return!0;if(!t.sys.retrieveStyleModule||!f.MODULE_MACROS[r]||!e.jurisdiction)return!1;var s=t.getJurisdictionList(e.jurisdiction);if(!t.opt.jurisdictions_seen[s[0]]){var n=t.retrieveAllStyleModules(s);for(var a in n){var o=t.loadStyleModule(a,n[a]);o&&!n[o]&&(Object.assign(n,t.retrieveAllStyleModules([o])),t.loadStyleModule(o,n[o],!0))}}var s=t.getJurisdictionList(e.jurisdiction);t.opt.parallel.enable&&!t.parallel&&(t.parallel=new f.Parallel(t));for(var l=0,u=s.length;l<u;l++){var a=s[l];if(i&&t.juris[a]&&!i["best-jurisdiction"]&&t.juris[a].types.locator&&(e["best-jurisdiction"]=a),t.juris[a]&&t.juris[a].types[e.type])return e["best-jurisdiction"]=a,!0}return!1}};f.XmlJSON=function(t){this.dataObj=t,this.institution={name:"institution",attrs:{"institution-parts":"long",delimiter:", "},children:[{name:"institution-part",attrs:{name:"long"},children:[]}]}},f.XmlJSON.prototype.clean=function(t){return t},f.XmlJSON.prototype.getStyleId=function(t,e){var i="id";e&&(i="title");for(var r="",s=t.children,n=0,a=s.length;n<a;n++)if("info"===s[n].name)for(var o=s[n].children,l=0,u=o.length;l<u;l++)o[l].name===i&&(r=o[l].children[0]);return r},f.XmlJSON.prototype.children=function(t){return!!t&&!!t.children.length&&t.children.slice()},f.XmlJSON.prototype.nodename=function(t){return t?t.name:null},f.XmlJSON.prototype.attributes=function(t){var e={};for(var i in t.attrs)e["@"+i]=t.attrs[i];return e},f.XmlJSON.prototype.content=function(t){var e="";if(!t||!t.children)return e;for(var i=0,r=t.children.length;i<r;i+=1)"string"==typeof t.children[i]&&(e+=t.children[i]);return e},f.XmlJSON.prototype.namespace={},f.XmlJSON.prototype.numberofnodes=function(t){return t&&"number"==typeof t.length?t.length:0},f.XmlJSON.prototype.getAttributeValue=function(t,e,i){var r="";return i&&(e=i+":"+e),t&&t.attrs&&(r=t.attrs[e]?t.attrs[e]:""),r},f.XmlJSON.prototype.getNodeValue=function(t,e){var i="";if(e)for(var r=0,s=t.children.length;r<s;r+=1)t.children[r].name===e&&(i=t.children[r].children.length?t.children[r]:"");else t&&(i=t);return i&&i.children&&1==i.children.length&&"string"==typeof i.children[0]&&(i=i.children[0]),i},f.XmlJSON.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(t,e,i,r,s){"@"===r.slice(0,1)&&(r=r.slice(1));for(var n=0,a=t.children.length;n<a;n+=1)t.children[n].name===e&&t.children[n].attrs.name===i&&(t.children[n].attrs[r]=s)},f.XmlJSON.prototype.deleteNodeByNameAttribute=function(t,e){var i,r;for(i=0,r=t.children.length;i<r;i+=1)t.children[i]&&"string"!=typeof t.children[i]&&t.children[i].attrs.name==e&&(t.children=t.children.slice(0,i).concat(t.children.slice(i+1)))},f.XmlJSON.prototype.deleteAttribute=function(t,e){void 0!==t.attrs[e]&&t.attrs.pop(e)},f.XmlJSON.prototype.setAttribute=function(t,e,i){return t.attrs[e]=i,!1},f.XmlJSON.prototype.nodeCopy=function(t,e){if(!e)var e={};if("object"==typeof e&&void 0===e.length)for(var i in t)"string"==typeof t[i]?e[i]=t[i]:"object"==typeof t[i]&&(void 0===t[i].length?e[i]=this.nodeCopy(t[i],{}):e[i]=this.nodeCopy(t[i],[]));else for(var r=0,s=t.length;r<s;r+=1)"string"==typeof t[r]?e[r]=t[r]:e[r]=this.nodeCopy(t[r],{});return e},f.XmlJSON.prototype.getNodesByName=function(t,e,i,r){if(!r)var r=[];if(!t||!t.children)return r;e===t.name&&(i?i===t.attrs.name&&r.push(t):r.push(t));for(var s=0,n=t.children.length;s<n;s+=1)"object"==typeof t.children[s]&&this.getNodesByName(t.children[s],e,i,r);return r},f.XmlJSON.prototype.nodeNameIs=function(t,e){return void 0!==t&&e==t.name},f.XmlJSON.prototype.makeXml=function(t){return"string"==typeof t&&(t="<"===t.slice(0,1)?this.jsonStringWalker.walkToObject(t):JSON.parse(t)),t},f.XmlJSON.prototype.insertChildNodeAfter=function(t,e,i,r){for(var s=0,n=t.children.length;s<n;s+=1)if(e===t.children[s]){t.children=t.children.slice(0,s).concat([r]).concat(t.children.slice(s+1));break}return t},f.XmlJSON.prototype.insertPublisherAndPlace=function(t){if("group"===t.name){for(var e=!0,i=["publisher","publisher-place"],r=0,s=t.children.length;r<s;r+=1){var n=i.indexOf(t.children[r].attrs.variable);if("text"!==t.children[r].name||!(n>-1)||t.children[r].attrs.prefix||t.children[r].attrs.suffix){e=!1;break}i=i.slice(0,n).concat(i.slice(n+1))}e&&!i.length&&(t.attrs["has-publisher-and-publisher-place"]=!0)}for(var r=0,s=t.children.length;r<s;r+=1)"object"==typeof t.children[r]&&this.insertPublisherAndPlace(t.children[r])},f.XmlJSON.prototype.isChildOfSubstitute=function(t){if(t.length>0){var e=t.slice();return"substitute"===e.pop()||this.isChildOfSubstitute(e)}return!1},f.XmlJSON.prototype.addMissingNameNodes=function(t,e){if(e||(e=[]),"names"===t.name&&!this.isChildOfSubstitute(e)){for(var i=!0,r=0,s=t.children.length;r<s;r++)if("name"===t.children[r].name){i=!1;break}i&&(t.children=[{name:"name",attrs:{},children:[]}].concat(t.children))}e.push(t.name);for(var r=0,s=t.children.length;r<s;r+=1)"object"==typeof t.children[r]&&this.addMissingNameNodes(t.children[r],e);e.pop()},f.XmlJSON.prototype.addInstitutionNodes=function(t){var e;if("names"===t.name){for(var i={},r=-1,s=0,n=t.children.length;s<n;s+=1){if("name"==t.children[s].name){for(var a in t.children[s].attrs)i[a]=t.children[s].attrs[a];i.delimiter=t.children[s].attrs.delimiter,i.and=t.children[s].attrs.and,r=s;for(var o=0,l=t.children[s].children.length;o<l;o+=1)if("family"===t.children[s].children[o].attrs.name)for(var a in t.children[s].children[o].attrs)i[a]=t.children[s].children[o].attrs[a]}if("institution"==t.children[s].name){r=-1;break}}if(r>-1){for(var e=this.nodeCopy(this.institution),s=0,n=f.INSTITUTION_KEYS.length;s<n;s+=1){var u=f.INSTITUTION_KEYS[s];void 0!==i[u]&&(e.children[0].attrs[u]=i[u]),i.delimiter&&(e.attrs.delimiter=i.delimiter),i.and&&(e.attrs.and=i.and)}t.children=t.children.slice(0,r+1).concat([e]).concat(t.children.slice(r+1))}}for(var s=0,n=t.children.length;s<n;s+=1)"string"!=typeof t.children[s]&&this.addInstitutionNodes(t.children[s])},f.XmlJSON.prototype.flagDateMacros=function(t){for(var e=0,i=t.children.length;e<i;e+=1)"macro"===t.children[e].name&&this.inspectDateMacros(t.children[e])&&(t.children[e].attrs["macro-has-date"]="true")},f.XmlJSON.prototype.inspectDateMacros=function(t){if(!t||!t.children)return!1;if("date"===t.name)return!0;for(var e=0,i=t.children.length;e<i;e+=1)if(this.inspectDateMacros(t.children[e]))return!0;return!1},f.stripXmlProcessingInstruction=function(t){return t?t=(t=(t=(t=t.replace(/^<\?[^?]+\?>/,"")).replace(/<!--[^>]+-->/g,"")).replace(/^\s+/g,"")).replace(/\s+$/g,""):t},f.parseXml=function(t){var e=[],i=[e];function r(t){return t.split("&amp;").join("&").split("&quot;").join('"').split("&gt;").join(">").split("&lt;").join("<").replace(/&#([0-9]{1,6});/gi,function(t,e){return String.fromCharCode(parseInt(e,10))}).replace(/&#x([a-f0-9]{1,6});/gi,function(t,e){return String.fromCharCode(parseInt(e,16))})}function s(t){var e=RegExp("^<([^	 />]+)"),i=t.match(e);return i?i[1]:null}function n(t){var e={};e.name=s(t),e.attrs={};var i=function(t){var e=t.match(/([^\'\"=	 ]+)=(?:\"[^\"]*\"|\'[^\']*\')/g);if(e)for(var i=0,r=e.length;i<r;i++)e[i]=e[i].replace(/=.*/,"");return e}(t);if(i)for(var n=0,a=i.length;n<a;n++){var o={name:i[n],value:function(t,e){var i=RegExp("^.*[	 ]+"+e+"=(\"(?:[^\"]*)\"|'(?:[^']*)').*$"),r=t.match(i);return r?r[1].slice(1,-1):null}(t,i[n])};e.attrs[o.name]=r(o.value)}return e.children=[],e}function a(t){i.slice(-1)[0].push(t)}for(var o=function(t){for(var e=(t=t.split(/(?:\r\n|\n|\r)/).join(" ").replace(/>[	 ]+</g,"><").replace(/<\!--.*?-->/g,"")).split("><"),i=null,r=0,s=e.length;r<s;r++)r>0&&(e[r]="<"+e[r]),r<e.length-1&&(e[r]=e[r]+">"),"number"!=typeof i&&("<style "===e[r].slice(0,7)||"<locale "==e[r].slice(0,8))&&(i=r);e=e.slice(i);for(var r=e.length-2;r>-1;r--)if(-1===e[r].slice(1).indexOf("<")){var n=e[r].slice(0,5);"/>"!==e[r].slice(-2)&&("<term"===n?"</term"===e[r+1].slice(0,6)&&(e[r]=e[r]+e[r+1],e=e.slice(0,r+1).concat(e.slice(r+2))):["<sing","<mult"].indexOf(n)>-1&&"/>"!==e[r].slice(-2)&&"<"===e[r+1].slice(0,1)&&(e[r]=e[r]+e[r+1],e=e.slice(0,r+1).concat(e.slice(r+2))))}return e}(t),l=0,u=o.length;l<u;l++)!function(t){var e,o;t.slice(1).indexOf("<")>-1?((e=n(t.slice(0,t.indexOf(">")+1))).children=[r(t.match(/^.*>([^<]*)<.*$/)[1])],a(e)):"/>"===t.slice(-2)?(e=n(t),"term"===s(t)&&e.children.push(""),a(e)):"</"===t.slice(0,2)?i.pop():(a(e=n(t)),o=e,i.push(o.children))}(o[l]);return e[0]},f.XmlDOM=function(t){this.dataObj=t,"undefined"==typeof DOMParser?((DOMParser=function(){}).prototype.parseFromString=function(t,e){if("undefined"!=typeof ActiveXObject){var i=new ActiveXObject("MSXML.DomDocument");return i.async=!1,i.loadXML(t),i}if("undefined"!=typeof XMLHttpRequest){var i=new XMLHttpRequest;return e||(e="text/xml"),i.open("GET","data:"+e+";charset=utf-8,"+encodeURIComponent(t),!1),i.overrideMimeType&&i.overrideMimeType(e),i.send(null),i.responseXML}if("undefined"!=typeof marknote)return new marknote.Parser().parse(t)},this.hasAttributes=function(t){return!!t.attributes&&!!t.attributes.length}):this.hasAttributes=function(t){return!!t.attributes&&!!t.attributes.length},this.importNode=function(t,e){return void 0===t.importNode?this._importNode(t,e,!0):t.importNode(e,!0)},this._importNode=function(t,e,i){if(1===e.nodeType){var r=t.createElement(e.nodeName);if(e.attributes&&e.attributes.length>0)for(var s=0,n=e.attributes.length;s<n;)r.setAttribute(e.attributes[s].nodeName,e.getAttribute(e.attributes[s++].nodeName));if(i&&e.childNodes&&e.childNodes.length>0)for(var s=0,n=e.childNodes.length;s<n;)r.appendChild(this._importNode(t,e.childNodes[s++],i));return r}},this.parser=new DOMParser;var e=this.parser.parseFromString('<docco><institution institution-parts="long" delimiter=", " substitute-use-first="1" use-last="1"><institution-part name="long"/></institution></docco>',"text/xml"),i=e.getElementsByTagName("institution");this.institution=i.item(0);var r=e.getElementsByTagName("institution-part");this.institutionpart=r.item(0),this.ns="http://purl.org/net/xbiblio/csl"},f.XmlDOM.prototype.clean=function(t){return(t=(t=(t=(t=t.replace(/<\?[^?]+\?>/g,"")).replace(/<![^>]+>/g,"")).replace(/^\s+/,"")).replace(/\s+$/,"")).replace(/^\n*/,"")},f.XmlDOM.prototype.getStyleId=function(t,e){var i="",r="id";e&&(r="title");var s=t.getElementsByTagName(r);return s&&s.length&&(s=s.item(0)),s&&(i=s.textContent),i||(i=s.innerText),i||(i=s.innerHTML),i},f.XmlDOM.prototype.children=function(t){var e,i,r,s;if(!t)return[];for(i=0,s=[],r=(e=t.childNodes).length;i<r;i+=1)"#text"!=e[i].nodeName&&s.push(e[i]);return s},f.XmlDOM.prototype.nodename=function(t){return t.nodeName},f.XmlDOM.prototype.attributes=function(t){var e,i,r,s,n;if(e={},t&&this.hasAttributes(t))for(s=0,n=(i=t.attributes).length;s<n;s+=1)e["@"+(r=i[s]).name]=r.value;return e},f.XmlDOM.prototype.content=function(t){return void 0!==t.textContent?t.textContent:void 0!==t.innerText?t.innerText:t.txt},f.XmlDOM.prototype.namespace={xml:"http://www.w3.org/XML/1998/namespace"},f.XmlDOM.prototype.numberofnodes=function(t){return t?t.length:0},f.XmlDOM.prototype.getAttributeName=function(t){return t.name},f.XmlDOM.prototype.getAttributeValue=function(t,e,i){var r="";return i&&(e=i+":"+e),t&&this.hasAttributes(t)&&t.getAttribute(e)&&(r=t.getAttribute(e)),r},f.XmlDOM.prototype.getNodeValue=function(t,e){var i=null;if(e){var r=t.getElementsByTagName(e);r.length>0&&(i=void 0!==r[0].textContent?r[0].textContent:void 0!==r[0].innerText?r[0].innerText:r[0].text)}return null===i&&t&&t.childNodes&&(0==t.childNodes.length||1==t.childNodes.length&&"#text"==t.firstChild.nodeName)&&(i=void 0!==t.textContent?t.textContent:void 0!==t.innerText?t.innerText:t.text),null===i&&(i=t),i},f.XmlDOM.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(t,e,i,r,s){var n,a,o,l;for("@"===r.slice(0,1)&&(r=r.slice(1)),n=0,a=(o=t.getElementsByTagName(e)).length;n<a;n+=1)(l=o[n]).getAttribute("name")==i&&l.setAttribute(r,s)},f.XmlDOM.prototype.deleteNodeByNameAttribute=function(t,e){var i,r,s,n;for(i=0,r=(n=t.childNodes).length;i<r;i+=1)(s=n[i])&&s.nodeType!=s.TEXT_NODE&&this.hasAttributes(s)&&s.getAttribute("name")==e&&t.removeChild(n[i])},f.XmlDOM.prototype.deleteAttribute=function(t,e){t.removeAttribute(e)},f.XmlDOM.prototype.setAttribute=function(t,e,i){return t.ownerDocument||(t=t.firstChild),["function","unknown"].indexOf(typeof t.setAttribute)>-1&&t.setAttribute(e,i),!1},f.XmlDOM.prototype.nodeCopy=function(t){return t.cloneNode(!0)},f.XmlDOM.prototype.getNodesByName=function(t,e,i){var r,s,n,a,o;for(a=0,r=[],o=(s=t.getElementsByTagName(e)).length;a<o;a+=1)n=s.item(a),(!i||this.hasAttributes(n)&&n.getAttribute("name")==i)&&r.push(n);return r},f.XmlDOM.prototype.nodeNameIs=function(t,e){return e==t.nodeName},f.XmlDOM.prototype.makeXml=function(t){return t||(t="<docco><bogus/></docco>"),t=t.replace(/\s*<\?[^>]*\?>\s*\n*/g,""),this.parser.parseFromString(t,"application/xml").firstChild},f.XmlDOM.prototype.insertChildNodeAfter=function(t,e,i,r){var s;return s=this.importNode(e.ownerDocument,r),t.replaceChild(s,e),t},f.XmlDOM.prototype.insertPublisherAndPlace=function(t){for(var e=t.getElementsByTagName("group"),i=0,r=e.length;i<r;i+=1){for(var s=e.item(i),n=[],a=0,o=s.childNodes.length;a<o;a+=1)1!==s.childNodes.item(a).nodeType&&n.push(a);if(s.childNodes.length-n.length==2){for(var l=[],a=0,o=2;a<o;a+=1)if(!(n.indexOf(a)>-1)){for(var u=s.childNodes.item(a),p=[],c=0,h=u.childNodes.length;c<h;c+=1)1!==u.childNodes.item(c).nodeType&&p.push(c);if(u.childNodes.length-p.length==0&&(l.push(u.getAttribute("variable")),u.getAttribute("suffix")||u.getAttribute("prefix"))){l=[];break}}l.indexOf("publisher")>-1&&l.indexOf("publisher-place")>-1&&s.setAttribute("has-publisher-and-publisher-place",!0)}}},f.XmlDOM.prototype.isChildOfSubstitute=function(t){if(t.parentNode)if("substitute"===t.parentNode.tagName.toLowerCase())return!0;else return this.isChildOfSubstitute(t.parentNode);return!1},f.XmlDOM.prototype.addMissingNameNodes=function(t){for(var e=t.getElementsByTagName("names"),i=0,r=e.length;i<r;i+=1){var s=e.item(i),n=s.getElementsByTagName("name");if((!n||0===n.length)&&!this.isChildOfSubstitute(s)){var a=s.ownerDocument.createElement("name");s.appendChild(a)}}},f.XmlDOM.prototype.addInstitutionNodes=function(t){var e,i,r,s,n,a,o,l;for(o=0,l=(e=t.getElementsByTagName("names")).length;o<l;o+=1)if(0!=(n=(i=e.item(o)).getElementsByTagName("name")).length&&0==i.getElementsByTagName("institution").length){s=(r=this.importNode(t.ownerDocument,this.institution)).getElementsByTagName("institution-part").item(0),a=n.item(0),i.insertBefore(r,a.nextSibling);for(var u=0,p=f.INSTITUTION_KEYS.length;u<p;u+=1){var c=f.INSTITUTION_KEYS[u],h=a.getAttribute(c);h&&s.setAttribute(c,h)}for(var m=a.getElementsByTagName("name-part"),u=0,p=m.length;u<p;u+=1)if("family"===m[u].getAttribute("name"))for(var d=0,g=f.INSTITUTION_KEYS.length;d<g;d+=1){var c=f.INSTITUTION_KEYS[d],h=m[u].getAttribute(c);h&&s.setAttribute(c,h)}}},f.XmlDOM.prototype.flagDateMacros=function(t){var e,i,r,s=t.getElementsByTagName("macro");for(e=0,i=s.length;e<i;e+=1)(r=s.item(e)).getElementsByTagName("date").length&&r.setAttribute("macro-has-date","true")},f.setupXml=function(t){var e={},i=null;return void 0!==t?"string"==typeof t?(e="<"===(t=t.replace("^\uFEFF","").replace(/^\s+/,"")).slice(0,1)?f.parseXml(t):JSON.parse(t),i=new f.XmlJSON(e)):i=void 0!==t.getAttribute?new f.XmlDOM(t):void 0!==t.toXMLString?new f.XmlE4X(t):new f.XmlJSON(t):f.error("unable to parse XML input"),i||f.error("citeproc-js error: unable to parse CSL style or locale object"),i},f.getSortCompare=function(t){if(f.stringCompare)return f.stringCompare;var e,i=this,r={sensitivity:"base",ignorePunctuation:!0,numeric:!0};t||(t="en-US");var s=function(t){return t.replace(/^[\[\]\'\"]*/g,"")},n=!!(e=function(e,s){return f.toLocaleLowerCase.call(i,e).localeCompare(f.toLocaleLowerCase.call(i,s),t,r)})("[x","x")&&function(t,i){return e(s(t),s(i))};return function(t,i){return n?n(t,i):e(t,i)}},f.ambigConfigDiff=function(t,e){var i,r,s,n;if(t.names.length!==e.names.length)return 1;for(i=0,r=t.names.length;i<r;i+=1)if(t.names[i]!==e.names[i])return 1;else for(s=0,n=t.givens[i];s<n;s+=1)if(t.givens[i][s]!==e.givens[i][s])return 1;return+(t.disambiguate!=e.disambiguate||t.year_suffix!==e.year_suffix)},f.cloneAmbigConfig=function(t,e){var i,r,s,n,a,o={};for(i=0,o.names=[],o.givens=[],o.year_suffix=!1,o.disambiguate=!1,r=t.names.length;i<r;i+=1)a=t.names[i],o.names[i]=a;for(i=0,r=t.givens.length;i<r;i+=1){for(s=0,a=[],n=t.givens[i].length;s<n;s+=1)a.push(t.givens[i][s]);o.givens.push(a)}return e?(o.year_suffix=e.year_suffix,o.disambiguate=e.disambiguate):(o.year_suffix=t.year_suffix,o.disambiguate=t.disambiguate),o},f.getAmbigConfig=function(){var t;return(t=this.tmp.disambig_request)||(t=this.tmp.disambig_settings),f.cloneAmbigConfig(t)},f.getMaxVals=function(){return this.tmp.names_max.mystack.slice()},f.getMinVal=function(){return this.tmp["et-al-min"]},f.tokenExec=function(t,e,i){var r=t.next,s=!1;t.test&&(r=(function(e){return e?(this.tmp.jump.replace("succeed"),t.succeed):(this.tmp.jump.replace("fail"),t.fail)}).call(this,t.test(e,i)));for(var n=0,a=t.execs.length;n<a;n++)(s=t.execs[n].call(t,this,e,i))&&(r=s);return r},f.expandMacro=function(t,e){var i,r,s,n=t.postponed_macro,a=t.strings.sort_direction;t=new f.Token("group",f.START);var o=!1,l=!1;(i=this.cslXml.getNodesByName(this.cslXml.dataObj,"macro",n)).length&&(l=this.cslXml.getAttributeValue(i[0],"cslid"),o=this.cslXml.getAttributeValue(i[0],"macro-has-date")),o&&(n=n+"@"+this.build.current_default_locale,s=function(t){t.tmp.extension&&(t.tmp["doing-macro-with-date"]=!0)},t.execs.push(s)),this.build.macro_stack.indexOf(n)>-1?f.error('CSL processor error: call to macro "'+n+'" would cause an infinite loop'):this.build.macro_stack.push(n),t.cslid=l,f.MODULE_MACROS[n]&&(t.juris=n,this.opt.update_mode=f.POSITION),f.Node.group.build.call(t,this,e,!0),this.cslXml.getNodeValue(i)||f.error('CSL style error: undefined macro "'+n+'"');var u=f.getMacroTarget.call(this,n);if(u&&(f.buildMacro.call(this,u,i),f.configureMacro.call(this,u)),!this.build.extension){var p,s=(p=n,function(t,e,i){for(var r=0;r<t.macros[p].length;)r=f.tokenExec.call(t,t.macros[p][r],e,i)}),c=new f.Token("text",f.SINGLETON);c.execs.push(s),e.push(c)}(r=new f.Token("group",f.END)).strings.sort_direction=a,o&&(s=function(t){t.tmp.extension&&(t.tmp["doing-macro-with-date"]=!1)},r.execs.push(s)),t.juris&&(r.juris=n),f.Node.group.build.call(r,this,e,!0),this.build.macro_stack.pop()},f.getMacroTarget=function(t){var e=!1;return this.build.extension?e=this[this.build.root+this.build.extension].tokens:this.macros[t]||(e=[],this.macros[t]=e),e},f.buildMacro=function(t,e){f.makeBuilder(this,t)(void 0===e.length?e:e[0])},f.configureMacro=function(t){this.build.extension||this.configureTokenList(t)},f.XmlToToken=function(t,e,i,r){var s,n,a,o,l,u,p;if(s=t.cslXml.nodename(this),!t.build.skip||t.build.skip===s){if(!s){(n=t.cslXml.content(this))&&(t.build.text=n);return}if(f.Node[t.cslXml.nodename(this)]||f.error('Undefined node name "'+s+'".'),a=t.cslXml.attributes(this),o=f.setDecorations.call(this,t,a),l=new f.Token(s,e),e!==f.END||"if"===s||"else-if"===s||"layout"===s){for(var u in a)if(a.hasOwnProperty(u)){if(e===f.END&&"@language"!==u&&"@locale"!==u)continue;if(a.hasOwnProperty(u))if(f.Attributes[u])try{f.Attributes[u].call(l,t,""+a[u])}catch(t){f.error(u+" attribute: "+t)}else f.debug('warning: undefined attribute "'+u+'" in style')}l.decorations=o,f.DATE_VARIABLES.indexOf(a["@variable"])>-1&&r.push(l.variables)}else e===f.END&&a["@variable"]&&(l.hasVariable=!0,f.DATE_VARIABLES.indexOf(a["@variable"])>-1&&(l.variables=r.pop()));p=i||t[t.build.area].tokens,f.Node[s].build.call(l,t,p,!0)}},f.DateParser=function(){for(var t=[["明治",1867],["大正",1911],["昭和",1925],["平成",1988]],e={},i=0,r=t.length;i<r;i++){var s=t[i][0],n=t[i][1];e[s]=n}for(var a=[],o={},i=0,r=t.length;i<r;i++){var l=t[i],n=l[0];a.push(n),o[l[0]]=l[1]}var u=a.join("|"),p=RegExp("(?:"+u+")(?:[0-9]+)"),c=RegExp("(?:"+u+")(?:[0-9]+)","g"),h=/(\u6708|\u5E74)/g,m=/\u65E5/g,d=/\u301c/g,g="([?0-9]{4}(?:%%NUMD%%[?0-9]{1,2}){0,2}(?![0-9])|(?:[?0-9]{1,2}%%NUMD%%){0,2}[?0-9]{4}(?![0-9])|[?0-9]{1,3}|[%%DATED%%]|[?~]|[^-/~?0-9]+)",b=new RegExp(g.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"-")),y=new RegExp(g.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"/")),v=new RegExp(g.replace(/%%NUMD%%/g,"/").replace(/%%DATED%%/g,"-"));this.monthStrings="january february march april may june july august september october november december spring summer fall winter spring summer".split(" "),this.setOrderDayMonth=function(){this.monthGuess=1,this.dayGuess=0},this.setOrderMonthDay=function(){this.monthGuess=0,this.dayGuess=1},this.resetDateParserMonths=function(){this.monthSets=[];for(var t=0,e=this.monthStrings.length;t<e;t++)this.monthSets.push([this.monthStrings[t]]);this.monthAbbrevs=[];for(var t=0,e=this.monthSets.length;t<e;t++){this.monthAbbrevs.push([]);for(var i=0,r=this.monthSets[t].length;i<r;i++)this.monthAbbrevs[t].push(this.monthSets[t][0].slice(0,3))}this.monthRexes=[];for(var t=0,e=this.monthAbbrevs.length;t<e;t++)this.monthRexes.push(RegExp("(?:"+this.monthAbbrevs[t].join("|")+")"))},this.addDateParserMonths=function(t){if("string"==typeof t&&(t=t.split(/\s+/)),12!==t.length&&16!==t.length)return void f.debug("month [+season] list of "+t.length+", expected 12 or 16. Ignoring.");for(var e=0,i=t.length;e<i;e++){for(var r=null,s=!1,n=3,a={},o=0,l=this.monthAbbrevs.length;o<l;o++){if(a[o]={},o===e){for(var u=0,p=this.monthAbbrevs[e].length;u<p;u++)if(this.monthAbbrevs[e][u]===t[e].slice(0,this.monthAbbrevs[e][u].length)){s=!0;break}}else for(var u=0,p=this.monthAbbrevs[o].length;u<p;u++)if(r=this.monthAbbrevs[o][u].length,this.monthAbbrevs[o][u]===t[e].slice(0,r)){for(;this.monthSets[o][u].slice(0,r)===t[e].slice(0,r);)if(r>t[e].length||r>this.monthSets[o][u].length){f.debug("unable to disambiguate month string in date parser: "+t[e]);break}else r+=1;n=r,a[o][u]=r}for(var c in a)for(var h in a[c])r=a[c][h],c=parseInt(c,10),h=parseInt(h,10),this.monthAbbrevs[c][h]=this.monthSets[c][h].slice(0,r)}s||(this.monthSets[e].push(t[e]),this.monthAbbrevs[e].push(t[e].slice(0,n)))}this.monthRexes=[],this.monthRexStrs=[];for(var e=0,i=this.monthAbbrevs.length;e<i;e++)this.monthRexes.push(RegExp("^(?:"+this.monthAbbrevs[e].join("|")+")")),this.monthRexStrs.push("^(?:"+this.monthAbbrevs[e].join("|")+")");if(18===this.monthAbbrevs.length)for(var e=12,i=14;e<i;e++)this.monthRexes[e+4]=RegExp("^(?:"+this.monthAbbrevs[e].join("|")+")"),this.monthRexStrs[e+4]="^(?:"+this.monthAbbrevs[e].join("|")+")"},this.convertDateObjectToArray=function(t){t["date-parts"]=[],t["date-parts"].push([]);for(var e,i=0,r=0,s=3;r<s&&t[e=["year","month","day"][r]];r++)i+=1,t["date-parts"][0].push(t[e]),delete t[e];t["date-parts"].push([]);for(var r=0,s=i;r<s&&t[e=["year_end","month_end","day_end"][r]];r++)t["date-parts"][1].push(t[e]),delete t[e];return t["date-parts"][0].length!==t["date-parts"][1].length&&t["date-parts"].pop(),t},this.convertDateObjectToString=function(t){for(var e=[],i=0;i<3;i+=1)if(t[f.DATE_PARTS_ALL[i]])e.push(t[f.DATE_PARTS_ALL[i]]);else break;return e.join("-")},this._parseNumericDate=function(t,e,i,r){i||(i="");for(var s=r.split(e),n=0,a=s.length;n<a;n++)if(4===s[n].length){t["year"+i]=s[n].replace(/^0*/,""),s=n?s.slice(0,n):s.slice(1);break}for(var n=0,a=s.length;n<a;n++)s[n]=parseInt(s[n],10);if(1!==s.length&&(2!==s.length||s[1])){if(2===s.length)if(s[this.monthGuess]>12){var o=s[this.dayGuess],l=s[this.monthGuess];o&&(t["month"+i]=""+o,l&&(t["day"+i]=""+l))}else{var o=s[this.monthGuess],l=s[this.dayGuess];o&&(t["month"+i]=""+o,l&&(t["day"+i]=""+l))}}else{var o=s[0];o&&(t["month"+i]=""+s[0])}},this.parseDateToObject=function(t){var e,i,r,s=t,n=-1,a=-1,l=!1;if(t){if("-"===(t=t.replace(/^(.*[0-9])T[0-9].*/,"$1")).slice(0,1)&&(l=!0,t=t.slice(1)),t.match(/^[0-9]{1,3}$/))for(;t.length<4;)t="0"+t;var u=(t=(t=""+t).replace(/\s*[0-9]{2}:[0-9]{2}(?::[0-9]+)/,"")).match(h);if(u){var g=(t=(t=(t=(t=(t=(t=t.replace(/\s+/g,"")).replace(m,"")).replace(h,"-")).replace(d,"/")).replace(/\-\//g,"/")).replace(/-$/g,"")).split(p);e=[];var _=t.match(c);if(_){for(var k=[],w=0,x=_.length;w<x;w++)k=k.concat(_[w].match(/([^0-9]+)([0-9]+)/).slice(1));for(var w=0,x=g.length;w<x;w++)if(e.push(g[w]),w!==x-1){var E=2*w;e.push(k[E]),e.push(k[E+1])}}else e=g;for(var w=1,x=e.length;w<x;w+=3)e[w+1]=o[e[w]]+parseInt(e[w+1],10),e[w]="";n=(t=(t=(t=(t=e.join("")).replace(/\s*-\s*$/,"").replace(/\s*-\s*\//,"/")).replace(/\.\s*$/,"")).replace(/\.(?! )/,"")).indexOf("/"),a=t.indexOf("-")}}t=t.replace(/([A-Za-z])\./g,"$1");var T="",O="",A={};if('"'===t.slice(0,1)&&'"'===t.slice(-1))return A.literal=t.slice(1,-1),A;n>-1&&a>-1?t.split("/").length>3?(i="-",t=t.replace(/\_/g,"-"),r="/",e=t.split(v)):(i="/",t=t.replace(/\_/g,"/"),r="-",e=t.split(y)):(t=(t=t.replace(/\//g,"-")).replace(/\_/g,"-"),i="-",r="-",e=t.split(b));for(var S=[],w=0,x=e.length;w<x;w++){var u=e[w].match(/^\s*([\-\/]|[^\-\/\~\?0-9]+|[\-~?0-9]+)\s*$/);u&&S.push(u[1])}var I=S.indexOf(i),j=[],C=!1;I>-1?(j.push([0,I]),j.push([I+1,S.length]),C=!0):j.push([0,S.length]);for(var N="",w=0,x=j.length;w<x;w++){var P=j[w],D=S.slice(P[0],P[1]);t:for(var R=0,L=D.length;R<L;R++){var B=D[R];if(B.indexOf(r)>-1){this._parseNumericDate(A,r,N,B);continue}if(B.match(/[0-9]{4}/)){A["year"+N]=B.replace(/^0*/,"");continue}("~"===B||"?"===B||"c"===B||B.match(/^cir/))&&(A.circa=!0);for(var F=0,M=this.monthRexes.length;F<M;F++)if(B.toLocaleLowerCase().match(this.monthRexes[F])){A["month"+N]=""+(parseInt(F,10)+1);continue t}if(B.match(/^[0-9]+$/)&&(T=B),B.toLocaleLowerCase().match(/^bc/)&&T){A["year"+N]=""+-1*T,T="";continue}if(B.toLocaleLowerCase().match(/^ad/)&&T){A["year"+N]=""+T,T="";continue}if(B.toLocaleLowerCase().match(/(?:mic|tri|hil|eas)/)&&!A["season"+N]){O=B;continue}}T&&(A["day"+N]=T,T=""),O&&!A["season"+N]&&(A["season"+N]=O.trim(),O=""),N="_end"}if(C)for(var R=0,L=f.DATE_PARTS_ALL.length;R<L;R++){var U=f.DATE_PARTS_ALL[R];A[U]&&!A[U+"_end"]?A[U+"_end"]=A[U]:!A[U]&&A[U+"_end"]&&(A[U]=A[U+"_end"])}(!A.year||A.year&&A.day&&!A.month)&&(A={literal:s});for(var q=["year","month","day","year_end","month_end","day_end"],w=0,x=q.length;w<x;w++){var $=q[w];"string"==typeof A[$]&&A[$].match(/^[0-9]+$/)&&(A[$]=parseInt(A[$],10))}return l&&Object.keys(A).indexOf("year")>-1&&(A.year=-1*A.year),A},this.parseDateToArray=function(t){return this.convertDateObjectToArray(this.parseDateToObject(t))},this.parseDateToString=function(t){return this.convertDateObjectToString(this.parseDateToObject(t))},this.parse=function(t){return this.parseDateToObject(t)},this.setOrderMonthDay(),this.resetDateParserMonths()},f.DateParser=new f.DateParser,f.Engine=function(t,e,i,r){for(var s in this.processor_version=f.PROCESSOR_VERSION,this.csl_version="1.0",this.sys=t,"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},writable:!0,configurable:!0}),t.variableWrapper&&(f.VARIABLE_WRAPPER_PREPUNCT_REX=RegExp("^(["+[" "].concat(f.SWAPPING_PUNCTUATION).join("")+"]*)(.*)")),f.retrieveStyleModule&&(this.sys.retrieveStyleModule=f.retrieveStyleModule),f.getAbbreviation&&(this.sys.getAbbreviation=f.getAbbreviation),this.sys.stringCompare&&(f.stringCompare=this.sys.stringCompare),this.sys.AbbreviationSegments=f.AbbreviationSegments,this.transform=new f.Transform(this),this.setParseNames=function(t){this.opt["parse-names"]=t},this.opt=new f.Engine.Opt,this.tmp=new f.Engine.Tmp,this.build=new f.Engine.Build,this.fun=new f.Engine.Fun(this),this.configure=new f.Engine.Configure,this.citation_sort=new f.Engine.CitationSort,this.bibliography_sort=new f.Engine.BibliographySort,this.citation=new f.Engine.Citation(this),this.bibliography=new f.Engine.Bibliography,this.intext=new f.Engine.InText,this.output=new f.Output.Queue(this),this.dateput=new f.Output.Queue(this),this.cslXml=f.setupXml(e),f.SYS_OPTIONS){var n,a=f.SYS_OPTIONS[s];"boolean"==typeof this.sys[a]&&(this.opt.development_extensions[a]=this.sys[a])}(this.opt.development_extensions.uppercase_subtitles||this.opt.development_extensions.implicit_short_title)&&(this.opt.development_extensions.main_title_from_short_title=!0),this.opt.development_extensions.csl_reverse_lookup_support&&(this.build.cslNodeId=0,this.setCslNodeIds=function(t,e){var i=this.cslXml.children(t);this.cslXml.setAttribute(t,"cslid",this.build.cslNodeId),this.opt.nodenames.push(e),this.build.cslNodeId+=1;for(var r=0,s=this.cslXml.numberofnodes(i);r<s;r+=1)(e=this.cslXml.nodename(i[r]))&&this.setCslNodeIds(i[r],e)},this.setCslNodeIds(this.cslXml.dataObj,"style")),this.cslXml.addMissingNameNodes(this.cslXml.dataObj),this.cslXml.addInstitutionNodes(this.cslXml.dataObj),this.cslXml.insertPublisherAndPlace(this.cslXml.dataObj),this.cslXml.flagDateMacros(this.cslXml.dataObj),void 0===this.cslXml.attributes(this.cslXml.dataObj)["@sort-separator"]&&this.cslXml.setAttribute(this.cslXml.dataObj,"sort-separator",", "),this.opt["initialize-with-hyphen"]=!0,this.setStyleAttributes(),this.opt.xclass=this.cslXml.getAttributeValue(this.cslXml.dataObj,"class"),this.opt.class=this.opt.xclass,this.opt.styleID=this.cslXml.getStyleId(this.cslXml.dataObj),this.opt.styleName=this.cslXml.getStyleId(this.cslXml.dataObj,!0),"1.1m"===this.opt.version.slice(0,4)&&(this.opt.development_extensions.consolidate_legal_items=!0,this.opt.development_extensions.consolidate_container_items=!0,this.opt.development_extensions.main_title_from_short_title=!0,this.opt.development_extensions.expect_and_symbol_form=!0,this.opt.development_extensions.require_explicit_legal_case_title_short=!0,this.opt.development_extensions.force_jurisdiction=!0,this.opt.development_extensions.force_title_abbrev_fallback=!0),i&&(i=i.replace("_","-"),i=f.normalizeLocaleStr(i)),this.opt["default-locale"][0]&&(this.opt["default-locale"][0]=this.opt["default-locale"][0].replace("_","-"),this.opt["default-locale"][0]=f.normalizeLocaleStr(this.opt["default-locale"][0])),i&&r&&(this.opt["default-locale"]=[i]),i&&!r&&this.opt["default-locale"][0]&&(i=this.opt["default-locale"][0]),0===this.opt["default-locale"].length&&(i||(i="en-US"),this.opt["default-locale"].push("en-US")),i||(i=this.opt["default-locale"][0]),n=f.localeResolve(i),this.opt.lang=n.best,this.opt["default-locale"][0]=n.best,this.locale={},this.opt["default-locale-sort"]||(this.opt["default-locale-sort"]=this.opt["default-locale"][0]),"dale|".localeCompare("daleb",this.opt["default-locale-sort"])>-1?this.opt.sort_sep="@":this.opt.sort_sep="|",this.localeConfigure(n),this.locale[this.opt.lang].opts["skip-words-regexp"]=RegExp("(?:(?:[?!:]*\\s+|-|^)(?:"+this.locale[this.opt.lang].opts["skip-words"].slice().join("|")+")(?=[!?:]*\\s+|-|$))","g"),this.output.adjust=new f.Output.Queue.adjust(this.getOpt("punctuation-in-quote")),this.registry=new f.Registry(this),this.macros={},this.build.area="citation";var o=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(o,this[this.build.area].tokens),this.build.area="bibliography";var o=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(o,this[this.build.area].tokens),this.build.area="intext";var o=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(o,this[this.build.area].tokens),this.opt.parallel.enable&&(this.parallel=new f.Parallel(this)),this.juris={},this.configureTokenLists(),this.disambiguate=new f.Disambiguation(this),this.splice_delimiter=!1,this.fun.dateparser=f.DateParser,this.fun.flipflopper=new f.Util.FlipFlopper(this),this.setCloseQuotesArray(),this.fun.ordinalizer.init(this),this.fun.long_ordinalizer.init(this),this.fun.page_mangler=f.Util.PageRangeMangler.getFunction(this,"page"),this.fun.year_mangler=f.Util.PageRangeMangler.getFunction(this,"year"),this.setOutputFormat("html")},f.Engine.prototype.setCloseQuotesArray=function(){var t;(t=[]).push(this.getTerm("close-quote")),t.push(this.getTerm("close-inner-quote")),t.push('"'),t.push("'"),this.opt.close_quotes_array=t},f.makeBuilder=function(t,e){var i=[],r=[];return function s(n,a,o){o||(o=[]),n||(n=[]),void 0===n.length&&(n=[n]);for(var l=0;l<n.length;l++){var u,p,c=n[l];null!==t.cslXml.nodename(c)&&((a&&"date"===t.cslXml.nodename(c)&&(f.Util.fixDateNode.call(t,a,l,c),c=t.cslXml.children(a)[l]),t.cslXml.numberofnodes(t.cslXml.children(c)))?(u=c,r.push(u),f.XmlToToken.call(u,t,f.START,e,i),s(t.cslXml.children(c),c,o),function(){var s=r.pop();f.XmlToToken.call(s,t,f.END,e,i)}()):(p=c,f.XmlToToken.call(p,t,f.SINGLETON,e,i)))}}},f.Engine.prototype.buildTokenLists=function(t,e){this.cslXml.getNodeValue(t)&&f.makeBuilder(this,e)(void 0===t.length?t:t[0])},f.Engine.prototype.setStyleAttributes=function(){var t,e,i={};for(e in i.name=this.cslXml.nodename(this.cslXml.dataObj),t=this.cslXml.attributes(this.cslXml.dataObj))t.hasOwnProperty(e)&&f.Attributes[e].call(i,this,t[e])},f.Engine.prototype.getTerm=function(t,e,i,r,s,n){t&&t.match(/[A-Z]/)&&t===t.toUpperCase()&&(f.debug("Warning: term key is in uppercase form: "+t),t=t.toLowerCase());var a=n?this.opt["default-locale"][0]:this.opt.lang,o=f.Engine.getField(f.LOOSE,this.locale[a].terms,t,e,i,r);return o||"range-delimiter"!==t||(o="–"),void 0===o&&(s===f.STRICT?f.error('Error in getTerm: term "'+t+'" does not exist.'):s===f.TOLERANT&&(o="")),o&&(this.tmp.cite_renders_content=!0),o},f.Engine.prototype.getDate=function(t,e){var i;return i=e?this.opt["default-locale"]:this.opt.lang,!!this.locale[i].dates[t]&&this.locale[i].dates[t]},f.Engine.prototype.getOpt=function(t){return void 0!==this.locale[this.opt.lang].opts[t]&&this.locale[this.opt.lang].opts[t]},f.Engine.prototype.getVariable=function(t,e,i,r){return f.Engine.getField(f.LOOSE,t,e,i,r)},f.Engine.prototype.getDateNum=function(t,e){return void 0===t?0:t[e]},f.Engine.getField=function(t,e,i,r,s,n){var a,o,l,u,p,c;if(a="",void 0===e[i])if(t!==f.STRICT)return;else f.error('Error in getField: term "'+i+'" does not exist.');for(c=n&&e[i][n]?e[i][n]:e[i],o=[],"symbol"===r?o=["symbol","short"]:"verb-short"===r?o=["verb-short","verb"]:"long"!==r&&(o=[r]),p=(o=o.concat(["long"])).length,u=0;u<p;u+=1)if(l=o[u],"string"==typeof c||"number"==typeof c)a=c;else if(void 0!==c[l]){a="string"==typeof c[l]||"number"==typeof c[l]?c[l]:"number"==typeof s?c[l][s]:c[l][0];break}return a},f.Engine.prototype.configureTokenLists=function(){var t,e;for(t=0,e=f.AREAS.length;t<e;t+=1){var i=this[f.AREAS[t]].tokens;this.configureTokenList(i)}return this.version=f.version,this.state},f.Engine.prototype.configureTokenList=function(t){var e,i,r,s,n,a,o;for(e=["year","month","day"],s=a=t.length-1;s>-1;s+=-1){if("date"===(i=t[s]).name&&f.END===i.tokentype&&(r=[]),"date-part"===i.name&&i.strings.name)for(n=0,o=e.length;n<o;n+=1)e[n]===i.strings.name&&r.push(i.strings.name);"date"===i.name&&f.START===i.tokentype&&(r.reverse(),i.dateparts=r),i.next=s+1,i.name&&f.Node[i.name].configure&&f.Node[i.name].configure.call(i,this,s)}},f.Engine.prototype.refetchItems=function(t){for(var e=[],i=0,r=t.length;i<r;i+=1)e.push(this.refetchItem(""+t[i]));return e},f.ITERATION=0,f.Engine.prototype.retrieveItem=function(t){if(this.tmp.loadedItemIDs[t])return this.registry.refhash[t];if(this.tmp.loadedItemIDs[t]=!0,this.opt.development_extensions.normalize_lang_keys_to_lowercase&&"boolean"==typeof this.opt.development_extensions.normalize_lang_keys_to_lowercase){for(var e,i=0,r=this.opt["default-locale"].length;i<r;i+=1)this.opt["default-locale"][i]=this.opt["default-locale"][i].toLowerCase();for(var i=0,r=this.opt["locale-translit"].length;i<r;i+=1)this.opt["locale-translit"][i]=this.opt["locale-translit"][i].toLowerCase();for(var i=0,r=this.opt["locale-translat"].length;i<r;i+=1)this.opt["locale-translat"][i]=this.opt["locale-translat"][i].toLowerCase();this.opt.development_extensions.normalize_lang_keys_to_lowercase=100}if(f.ITERATION+=1,h=JSON.parse(JSON.stringify(this.sys.retrieveItem(""+t))),this.opt.development_extensions.normalize_lang_keys_to_lowercase){if(h.multi){if(h.multi._keys)for(var s in h.multi._keys)for(var n in h.multi._keys[s])n!==n.toLowerCase()&&(h.multi._keys[s][n.toLowerCase()]=h.multi._keys[s][n],delete h.multi._keys[s][n]);if(h.multi.main)for(var s in h.multi.main)h.multi.main[s]=h.multi.main[s].toLowerCase()}for(var i=0,r=f.NAME_VARIABLES.length;i>r;i+=1){var a=f.NAME_VARIABLES[i];if(h[a]&&h[a].multi)for(var o=0,l=h[a].length;o<l;o+=1){var u=h[a][o];if(u.multi){if(u.multi._key)for(var n in u.multi._key)n!==n.toLowerCase()&&(u.multi._key[n.toLowerCase()]=u.multi._key[n],delete u.multi._key[n]);u.multi.main&&(u.multi.main=u.multi.main.toLowerCase())}}}}if(h.language&&h.language.match(/[><]/)){var p=h.language.match(/(.*?)([<>])(.*)/);"<"===p[2]?(h["language-name"]=p[1],h["language-name-original"]=p[3]):(h["language-name"]=p[3],h["language-name-original"]=p[1]),this.opt.multi_layout?h["language-name-original"]&&(h.language=h["language-name-original"]):h["language-name"]&&(h.language=h["language-name"])}if(h.page){h["page-first"]=h.page;var p=(""+h.page).split(/\s*(?:&|, |-|\u2013)\s*/);"\\"!==p[0].slice(-1)&&(h["page-first"]=p[0])}for(var n in this.opt.development_extensions.field_hack&&h.note&&f.parseNoteFieldHacks(h,!1,this.opt.development_extensions.allow_field_hack_date_override),h)if(f.DATE_VARIABLES.indexOf(n.replace(/^alt-/,""))>-1){var c=h[n];c&&(this.opt.development_extensions.raw_date_parsing&&c.raw&&(!c["date-parts"]||0===c["date-parts"].length)&&(c=this.fun.dateparser.parseDateToObject(c.raw)),h[n]=this.dateParseArray(c))}if(this.opt.development_extensions.consolidate_legal_items&&h.type&&["bill","gazette","legislation","regulation","treaty"].indexOf(h.type)>-1){for(var h,p,i,m,d=["type","title","jurisdiction","genre","volume","container-title"],g=[],i=0,r=d.length;i<r;i+=1)h[m=d[i]]&&g.push(h[m]);d=["original-date","issued"];for(var i=0,r=d.length;i<r;i+=1)if(h[m=d[i]]&&h[m].year){var b=h[m].year;g.push(b);break}h.legislation_id=g.join("::")}if(this.bibliography.opt.track_container_items&&this.bibliography.opt.track_container_items.indexOf(h.type)>-1){for(var m,d=["type","container-title","publisher","edition"],y=[],i=0,r=d.length;i<r;i+=1)h[m=d[i]]&&y.push(h[m]);h.container_id=y.join("::")}if(this.opt.development_extensions.force_jurisdiction&&"string"==typeof h.authority&&(h.authority=[{literal:h.authority,multi:{_key:{}}}],h.multi&&h.multi._keys&&h.multi._keys.authority))for(var n in h.authority[0].multi._key={},h.multi._keys.authority)h.authority[0].multi._key[n]={literal:h.multi._keys.authority[n]};if(h["title-short"]||(h["title-short"]=h.shortTitle),this.opt.development_extensions.main_title_from_short_title){var v="fr"===this.opt["default-locale"][0].slice(0,2).toLowerCase();f.extractTitleAndSubtitle.call(this,h,v)}var _=["bill","legal_case","legislation","gazette","regulation"].indexOf(h.type)>-1;if(this.opt.development_extensions.force_jurisdiction&&_&&!h.jurisdiction&&(h.jurisdiction="us"),!_&&h.title&&this.sys.getAbbreviation){h.jurisdiction,e=this.sys.normalizeAbbrevsKey?this.sys.normalizeAbbrevsKey("title",h.title):h.title;var k=this.transform.loadAbbreviation(h.jurisdiction,"title",e,h.language);this.transform.abbrevs[k].title&&this.transform.abbrevs[k].title[e]&&(h["title-short"]=this.transform.abbrevs[k].title[e])}if(h["container-title-short"]||(h["container-title-short"]=h.journalAbbreviation),h["container-title"]&&this.sys.getAbbreviation){e=this.sys.normalizeAbbrevsKey?this.sys.normalizeAbbrevsKey(h["container-title"]):h["container-title"];var k=this.transform.loadAbbreviation(h.jurisdiction,"container-title",e,h.language);this.transform.abbrevs[k]["container-title"]&&this.transform.abbrevs[k]["container-title"][e]&&(h["container-title-short"]=this.transform.abbrevs[k]["container-title"][e])}if(h.jurisdiction&&(h.country=h.jurisdiction.split(":")[0]),this.registry.refhash[t]){if(JSON.stringify(this.registry.refhash[t])!=JSON.stringify(h)){for(var n in this.registry.refhash[t])delete this.registry.refhash[t][n];this.tmp.taintedItemIDs[h.id]=!0,Object.assign(this.registry.refhash[t],h)}}else this.registry.refhash[t]=h;return this.registry.refhash[t]},f.Engine.prototype.refetchItem=function(t){return this.registry.refhash[t]},f.Engine.prototype.setOpt=function(t,e,i){"style"===t.name||"cslstyle"===t.name?(this.opt.inheritedAttributes[e]=i,this.citation.opt.inheritedAttributes[e]=i,this.bibliography.opt.inheritedAttributes[e]=i):["citation","bibliography"].indexOf(t.name)>-1?this[t.name].opt.inheritedAttributes[e]=i:t.strings[e]=i},f.Engine.prototype.inheritOpt=function(t,e,i,r){if(void 0!==t.strings[e])return t.strings[e];var s=this[this.tmp.root].opt.inheritedAttributes[i||e];return void 0!==s?s:r},f.Engine.prototype.remapSectionVariable=function(t){for(var e=0,i=t.length;e<i;e+=1){var r=t[e][0],s=t[e][1];if(["bill","gazette","legislation","regulation","treaty"].indexOf(r.type)>-1){if(s.locator){s.locator=s.locator.trim();var n=s.locator.match(f.STATUTE_SUBDIV_PLAIN_REGEX_FRONT);n||(s.label?s.locator=f.STATUTE_SUBDIV_STRINGS_REVERSE[s.label]+" "+s.locator:s.locator="p. "+s.locator)}var a=null;if(r.section){r.section=r.section.trim();var n=r.section.match(f.STATUTE_SUBDIV_PLAIN_REGEX_FRONT);n?a=n[0].trim():(r.section="sec. "+r.section,a="sec.")}if(r.section)if(s.locator){var n=s.locator.match(/^([^ ]*)\s*(.*)/),o=" ";n?("p."===n[1]&&"p."!==a&&(s.locator=n[2]),["[","(",".",",",";",":","?"].indexOf(s.locator.slice(0,1))>-1&&(o="")):o="",s.locator=r.section+o+s.locator}else s.locator=r.section;s.label=""}}},f.Engine.prototype.setNumberLabels=function(t){if(t.number&&["bill","gazette","legislation","regulation","treaty"].indexOf(t.type)>-1&&this.opt.development_extensions.consolidate_legal_items&&!this.tmp.shadow_numbers.number){this.tmp.shadow_numbers.number={},this.tmp.shadow_numbers.number.values=[],this.tmp.shadow_numbers.number.plural=0,this.tmp.shadow_numbers.number.numeric=!1,this.tmp.shadow_numbers.number.label=!1;var e=""+t.number,i=(e=e.split("\\").join("")).split(/\s+/)[0],r=f.STATUTE_SUBDIV_STRINGS[i];if(r){var s=e.split(f.STATUTE_SUBDIV_PLAIN_REGEX);if(s.length>1){for(var n=[],a=1,o=s.length;a<o;a+=1)n.push(s[a].replace(/\s*$/,"").replace(/^\s*/,""));e=n.join(" ")}else e=s[0];this.tmp.shadow_numbers.number.label=r,this.tmp.shadow_numbers.number.values.push(["Blob",e,!1]),this.tmp.shadow_numbers.number.numeric=!1}else this.tmp.shadow_numbers.number.values.push(["Blob",e,!1]),this.tmp.shadow_numbers.number.numeric=!0}},f.substituteOne=function(t){return function(e,i){return i?t.replace("%%STRING%%",i):""}},f.substituteTwo=function(t){return function(e){var i=t.replace("%%PARAM%%",e);return function(t,e){return e?i.replace("%%STRING%%",e):""}}},f.Mode=function(t){var e,i,r,s,n,a;for(r in e={},i=f.Output.Formats[t]){if("@"!==r.slice(0,1)){e[r]=i[r];continue}s=!1,n=i[r],a=r.split("/"),"string"==typeof n&&n.indexOf("%%STRING%%")>-1?s=n.indexOf("%%PARAM%%")>-1?f.substituteTwo(n):f.substituteOne(n):"boolean"!=typeof n||n?"function"==typeof n?s=n:f.error("Bad "+t+" config entry for "+r+": "+n):s=f.Output.Formatters.passthrough,1===a.length?e[a[0]]=s:2===a.length&&(e[a[0]]||(e[a[0]]={}),e[a[0]][a[1]]=s)}return e},f.setDecorations=function(t,e){var i,r,s;for(s in i=[],f.FORMAT_KEY_SEQUENCE){var r=f.FORMAT_KEY_SEQUENCE[s];e[r]&&(i.push([r,e[r]]),delete e[r])}return i},f.Doppeler=function(t,e){var i=RegExp("("+t+")","g"),r=RegExp(t,"g");this.split=function(t){e&&(t=e(t));var s=t.match(i);if(!s)return{tags:[],strings:[t]};for(var n=t.split(r),a=s.length-1;a>-1;a--)"number"==typeof s[a]&&(s[a]=""),"'"===s[a]&&n[a+1].length>0&&(n[a+1]=s[a]+n[a+1],s[a]="");return{tags:s,strings:n,origStrings:n.slice()}},this.join=function(t){for(var e=t.strings.slice(-1),i=t.tags.length-1;i>-1;i--)e.push(t.tags[i]),e.push(t.strings[i]);return e.reverse(),e.join("")}},f.Engine.prototype.normalDecorIsOrphan=function(t,e){if("normal"===e[1]){var i,r=!1;i="citation"===this.tmp.area?[this.citation.opt.layout_decorations].concat(t.alldecor):t.alldecor;for(var s=i.length-1;s>-1;s+=-1)for(var n=i[s].length-1;n>-1;n+=-1)i[s][n][0]===e[0]&&"normal"!==i[s][n][1]&&(r=!0);if(!r)return!0}return!1},f.Engine.prototype.getCitationLabel=function(t){var e="",i=this.getTrigraphParams(),r=i[0],s=this.getTerm("reference","short",0);void 0===s&&(s="reference"),s=(s=s.replace(".","")).slice(0,1).toUpperCase()+s.slice(1);for(var n=0,a=f.NAME_VARIABLES.length;n<a;n+=1){var o=f.NAME_VARIABLES[n];if(t[o]){var l=t[o];r=l.length>i.length?i[i.length-1]:i[l.length-1];for(var u=0,p=l.length;u<p&&u!==r.authors.length;u+=1){var c=this.nameOutput.getName(l[u],"locale-translit",!0).name;c&&c.family?s=(s=c.family).replace(/^([ \'\u2019a-z]+\s+)/,""):c&&c.literal&&(s=c.literal);var h=s.toLowerCase().match(/^(a\s+|the\s+|an\s+)/);if(h&&(s=s.slice(h[1].length)),!(s=s.replace(f.ROMANESQUE_NOT_REGEXP,"")))break;(s=s.slice(0,r.authors[u])).length>1?s=s.slice(0,1).toUpperCase()+s.slice(1).toLowerCase():1===s.length&&(s=s.toUpperCase()),e+=s}break}}if(!e&&t.title){for(var m=this.locale[this.opt.lang].opts["skip-words"],d=t.title.split(/\s+/),n=d.length-1;n>-1;n--)m.indexOf(d[n])>-1&&(d=d.slice(0,n).concat(d.slice(n+1)));var g=d.join("");(g=g.slice(0,i[0].authors[0])).length>1?g=g.slice(0,1).toUpperCase()+g.slice(1).toLowerCase():1===g.length&&(g=g.toUpperCase()),e=g}var b="0000";return t.issued&&t.issued.year&&(b=""+t.issued.year),e+=b=b.slice(-1*r.year)},f.Engine.prototype.getTrigraphParams=function(){var t=[],e=this.opt.trigraph.split(":");this.opt.trigraph&&"A"===this.opt.trigraph.slice(0,1)||f.error("Bad trigraph definition: "+this.opt.trigraph);for(var i=0,r=e.length;i<r;i+=1){for(var s=e[i],n={authors:[],year:0},a=0,o=s.length;a<o;a+=1)switch(s.slice(a,a+1)){case"A":n.authors.push(1);break;case"a":n.authors[n.authors.length-1]+=1;break;case"0":n.year+=1;break;default:f.error("Invalid character in trigraph definition: "+this.opt.trigraph)}t.push(n)}return t},f.Engine.prototype.setOutputFormat=function(t){this.opt.mode=t,this.fun.decorate=f.Mode(t),this.output[t]||(this.output[t]={},this.output[t].tmp={})},f.Engine.prototype.getSortFunc=function(){return function(t,e){return(t=t.split("-"),e=e.split("-"),t.length<e.length)?1:t.length>e.length?-1:(t=t.slice(-1)[0],e=e.slice(-1)[0],t.length<e.length)?1:t.length>e.length?-1:0}},f.Engine.prototype.setLangTagsForCslSort=function(t){var e,i;if(t)for(e=0,this.opt["locale-sort"]=[],i=t.length;e<i;e+=1)this.opt["locale-sort"].push(t[e]);this.opt["locale-sort"].sort(this.getSortFunc())},f.Engine.prototype.setLangTagsForCslTransliteration=function(t){var e,i;if(this.opt["locale-translit"]=[],t)for(e=0,i=t.length;e<i;e+=1)this.opt["locale-translit"].push(t[e]);this.opt["locale-translit"].sort(this.getSortFunc())},f.Engine.prototype.setLangTagsForCslTranslation=function(t){var e,i;if(this.opt["locale-translat"]=[],t)for(e=0,i=t.length;e<i;e+=1)this.opt["locale-translat"].push(t[e]);this.opt["locale-translat"].sort(this.getSortFunc())},f.Engine.prototype.setLangPrefsForCites=function(t,e){var i=this.opt["cite-lang-prefs"];e||(e=function(t){return t.toLowerCase()});for(var r=["Persons","Institutions","Titles","Journals","Publishers","Places"],s=0,n=r.length;s<n;s+=1){var a=e(r[s]),o=r[s].toLowerCase();if(t[a]){for(var l=[];t[a].length>1;)l.push(t[a].pop());var u={orig:1,translit:2,translat:3};for(2===l.length&&u[l[0]]<u[l[1]]&&l.reverse();l.length;)t[a].push(l.pop());for(var p=i[o];p.length;)p.pop();for(var c=0,h=t[a].length;c<h;c+=1)p.push(t[a][c])}}},f.Engine.prototype.setLangPrefsForCiteAffixes=function(t){if(t&&48===t.length){for(var e,i=this.opt.citeAffixes,r=0,s=["persons","institutions","titles","journals","publishers","places"],n=["translit","orig","translit","translat"],a=0,o=s.length;a<o;a+=1)for(var l=0,u=n.length;l<u;l+=1)e="",r%8==4&&(i[s[a]]["locale-"+n[l]].prefix||i[s[a]]["locale-"+n[l]].suffix)||(e=t[r]?t[r]:"",i[s[a]]["locale-"+n[l]].prefix=e,e=t[r]?t[r+1]:"",i[s[a]]["locale-"+n[l]].suffix=e),r+=2;this.opt.citeAffixes=i}},f.Engine.prototype.setAutoVietnameseNamesOption=function(t){t?this.opt["auto-vietnamese-names"]=!0:this.opt["auto-vietnamese-names"]=!1},f.Engine.prototype.setAbbreviations=function(t){this.sys.setAbbreviations&&this.sys.setAbbreviations(t)},f.Engine.prototype.setSuppressTrailingPunctuation=function(t){this.citation.opt.suppressTrailingPunctuation=!!t},f.Output={},f.Output.Queue=function(t){this.levelname=["top"],this.state=t,this.queue=[],this.empty=new f.Token("empty");var e={};e.empty=this.empty,this.formats=new f.Stack(e),this.current=new f.Stack(this.queue)},f.Output.Queue.prototype.pop=function(){var t=this.current.value();return t.length?t.pop():t.blobs.pop()},f.Output.Queue.prototype.getToken=function(t){return this.formats.value()[t]},f.Output.Queue.prototype.mergeTokenStrings=function(t,e){var i,r,s,n;if(i=this.formats.value()[t],r=this.formats.value()[e],s=i,r){i||((i=new f.Token(t,f.SINGLETON)).decorations=[]),s=new f.Token(t,f.SINGLETON);var n="";for(var n in i.strings)i.strings.hasOwnProperty(n)&&(s.strings[n]=i.strings[n]);for(var n in r.strings)r.strings.hasOwnProperty(n)&&(s.strings[n]=r.strings[n]);s.decorations=i.decorations.concat(r.decorations)}return s},f.Output.Queue.prototype.addToken=function(t,e,i){var r,s;if(r=new f.Token("output"),"string"==typeof i&&(i=this.formats.value()[i]),i&&i.strings){for(s in i.strings)i.strings.hasOwnProperty(s)&&(r.strings[s]=i.strings[s]);r.decorations=i.decorations}"string"==typeof e&&(r.strings.delimiter=e),this.formats.value()[t]=r},f.Output.Queue.prototype.pushFormats=function(t){t||(t={}),t.empty=this.empty,this.formats.push(t)},f.Output.Queue.prototype.popFormats=function(){this.formats.pop()},f.Output.Queue.prototype.startTag=function(t,e){var i={};this.state.tmp["doing-macro-with-date"]&&this.state.tmp.extension&&(e=this.empty,t="empty"),i[t]=e,this.pushFormats(i),this.openLevel(t)},f.Output.Queue.prototype.endTag=function(t){this.closeLevel(t),this.popFormats()},f.Output.Queue.prototype.openLevel=function(t){var e,i;"object"==typeof t?e=new f.Blob(void 0,t):void 0===t?e=new f.Blob(void 0,this.formats.value().empty,"empty"):(this.formats.value()&&this.formats.value()[t]||f.error('CSL processor error: call to nonexistent format token "'+t+'"'),e=new f.Blob(void 0,this.formats.value()[t],t)),i=this.current.value(),!this.state.tmp.just_looking&&this.checkNestedBrace&&(e.strings.prefix=this.checkNestedBrace.update(e.strings.prefix)),i.push(e),this.current.push(e)},f.Output.Queue.prototype.closeLevel=function(t){t&&t!==this.current.value().levelname&&f.error("Level mismatch error:  wanted "+t+" but found "+this.current.value().levelname);var e=this.current.pop();!this.state.tmp.just_looking&&this.checkNestedBrace&&(e.strings.suffix=this.checkNestedBrace.update(e.strings.suffix))},f.Output.Queue.prototype.append=function(t,e,i,r,s){var n,a,o,l=!0;if(i&&(r=!0),this.state.tmp["doing-macro-with-date"]&&!i){if("macro-with-date"!==e)return!1;"macro-with-date"===e&&(e="empty")}if(void 0===t||("number"==typeof t&&(t=""+t),!i&&this.state.tmp.element_trace&&"suppress-me"===this.state.tmp.element_trace.value()))return!1;if(a=!1,e?"literal"===e?(n=!0,l=!1):n="string"==typeof e?this.formats.value()[e]:e:n=this.formats.value().empty,n||f.error("CSL processor error: unknown format token name: "+e),n.strings&&void 0===n.strings.delimiter&&(n.strings.delimiter=""),"string"==typeof t&&t.length&&(t=t.replace(/ ([:;?!\u00bb])/g," $1").replace(/\u00ab /g,"« "),this.last_char_rendered=t.slice(-1),t=t.replace(/\s+'/g," '"),i||(t=t.replace(/^'/g," '")),r?i&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),a=new f.Blob(t,n),void 0===(o=this.current.value())&&0===this.current.mystack.length&&(this.current.mystack.push([]),o=this.current.value()),"string"==typeof a.blobs&&(r?i&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),"string"==typeof t){if("string"==typeof a.blobs&&" "!==a.blobs.slice(0,1)){for(var u="",p=a.blobs;f.TERMINAL_PUNCTUATION.indexOf(p.slice(0,1))>-1;)u+=p.slice(0,1),p=p.slice(1);p&&u&&(a.strings.prefix=a.strings.prefix+u,a.blobs=p)}a.strings["text-case"]&&(a.blobs=f.Output.Formatters[a.strings["text-case"]](this.state,t)),this.state.tmp.strip_periods&&!s&&(a.blobs=a.blobs.replace(/\.([^a-z]|$)/g,"$1"));for(var c=a.decorations.length-1;c>-1;c+=-1)"@quotes"===a.decorations[c][0]&&"false"!==a.decorations[c][1]&&(a.punctuation_in_quote=this.state.getOpt("punctuation-in-quote")),a.blobs.match(f.ROMANESQUE_REGEXP)||"@font-style"!==a.decorations[c][0]||(a.decorations=a.decorations.slice(0,c).concat(a.decorations.slice(c+1)));o.push(a),this.state.fun.flipflopper.processTags(a)}else l?o.push(a):o.push(t);return!0},f.Output.Queue.prototype.string=function(t,e,i){var r,s,n,a,o,l,u,p,c,h=f.getSafeEscape(this.state),m=e.slice(),d=[];if(0===m.length)return d;var g="";i?g=i.strings.delimiter:(t.tmp.count_offset_characters=!1,t.tmp.offset_characters=0),i&&i.new_locale&&(i.old_locale=t.opt.lang,t.opt.lang=i.new_locale);for(var r=0,s=m.length;r<s;r+=1){if((l=m[r]).strings.first_blob&&(t.tmp.count_offset_characters=l.strings.first_blob),"string"==typeof l.blobs){if("number"==typeof l.num)d.push(l);else if(l.blobs){l.particle&&(l.blobs=l.particle+l.blobs,l.particle="");var b=(o=h(l.blobs)).length;if(!t.tmp.suppress_decorations)for(n=0,a=l.decorations.length;n<a;n+=1)"@showid"!==(c=l.decorations[n])[0]&&(t.normalDecorIsOrphan(l,c)||(o=t.fun.decorate[c[0]][c[1]].call(l,t,o,c[2])));if(o&&o.length){if(o=h(l.strings.prefix)+o+h(l.strings.suffix),t.opt.development_extensions.csl_reverse_lookup_support&&!t.tmp.suppress_decorations)for(n=0,a=l.decorations.length;n<a;n+=1)"@showid"===(c=l.decorations[n])[0]&&(o=t.fun.decorate[c[0]][c[1]].call(l,t,o,c[2]));d.push(o),t.tmp.count_offset_characters&&(t.tmp.offset_characters+=b+l.strings.suffix.length+l.strings.prefix.length)}}}else if(l.blobs.length){var y=t.output.string(t,l.blobs,l);if(i&&"string"!==y&&y.length>1&&l.strings.delimiter)for(var v=!1,n=0,a=y.length;n<a;n++)"string"!=typeof y[n]?v=!0:v&&(y[n]=l.strings.delimiter+y[n]);d=d.concat(y)}l.strings.first_blob&&t.registry.registry[l.strings.first_blob]&&(t.registry.registry[l.strings.first_blob].offset=t.tmp.offset_characters,t.tmp.count_offset_characters=!1)}for(r=0,s=d.length-1;r<s;r+=1)"number"!=typeof d[r].num||"number"!=typeof d[r+1].num||d[r+1].UGLY_DELIMITER_SUPPRESS_HACK||(d[r].strings.suffix=d[r].strings.suffix+(g||""),d[r+1].successor_prefix="",d[r+1].UGLY_DELIMITER_SUPPRESS_HACK=!0);for(var _=0,r=0,s=d.length;r<s;r+=1)"string"==typeof d[r]&&(_=parseInt(r,10)+1,r<d.length-1&&"object"==typeof d[r+1]&&(g&&!d[r+1].UGLY_DELIMITER_SUPPRESS_HACK&&(d[r]+=h(g)),d[r+1].UGLY_DELIMITER_SUPPRESS_HACK=!0));if(i&&(i.decorations.length||i.strings.suffix))_=d.length;else if(i&&i.strings.prefix){for(var r=0,s=d.length;r<s;r++)if(void 0!==d[r].num){_=r,0===r&&(d[r].strings.prefix=i.strings.prefix+d[r].strings.prefix);break}}var k=t.output.renderBlobs(d.slice(0,_),g,!1,i);if(k&&i&&(i.decorations.length||i.strings.suffix||i.strings.prefix)){if(!t.tmp.suppress_decorations)for(var r=0,s=i.decorations.length;r<s;r+=1)!(["@cite","@bibliography","@display","@showid"].indexOf((c=i.decorations[r])[0])>-1||t.normalDecorIsOrphan(l,c))&&c[0]&&"string"==typeof k&&(k=t.fun.decorate[c[0]][c[1]].call(i,t,k,c[2]));if(o=k,u=i.strings.suffix,o&&o.length&&(o=h(p=i.strings.prefix)+o+h(u),t.tmp.count_offset_characters&&(t.tmp.offset_characters+=p.length+u.length)),k=o,!t.tmp.suppress_decorations)for(var r=0,s=i.decorations.length;r<s;r+=1)-1!==["@cite","@bibliography","@display","@showid"].indexOf((c=i.decorations[r])[0])&&"string"==typeof k&&(k=t.fun.decorate[c[0]][c[1]].call(i,t,k,c[2]))}var w=d.slice(_,d.length);return!w.length&&k?d=[k]:w.length&&!k?d=w:k&&w.length&&(d=[k].concat(w)),void 0===i?(this.queue=[],this.current.mystack=[],this.current.mystack.push(this.queue),t.tmp.suppress_decorations&&(d=t.output.renderBlobs(d,void 0,!1))):"boolean"==typeof i&&(d=t.output.renderBlobs(d,void 0,!0)),i&&i.new_locale&&(t.opt.lang=i.old_locale),d},f.Output.Queue.prototype.clearlevel=function(){var t,e,i;for(e=0,i=(t=this.current.value()).blobs.length;e<i;e+=1)t.blobs.pop()},f.Output.Queue.prototype.renderBlobs=function(t,e,i,r){if(d=f.getSafeEscape(this.state),e||(e=""),s=this.state,n="",a="",u=t.length,"citation"===this.state.tmp.area&&!this.state.tmp.just_looking&&1===u&&"object"==typeof t[0]&&r)return t[0].strings.prefix=r.strings.prefix+t[0].strings.prefix,t[0].strings.suffix=t[0].strings.suffix+r.strings.suffix,t[0].decorations=t[0].decorations.concat(r.decorations),t[0].params=r.params,t[0];var s,n,a,o,l,u,p,c,h,m,d,g=!0;for(l=0;l<u;l+=1)t[l].checkNext?(t[l].checkNext(t[l+1],g),g=!1):g=!t[l+1]||!t[l+1].splice_prefix;var b=!0;for(l=t.length-1;l>0;l+=-1)t[l].checkLast?b&&t[l].checkLast(t[l-1])&&(b=!1):b=!0;for(l=0,u=t.length;l<u;l+=1)if(o=t[l],n&&(a=e),"string"==typeof o)n+=d(a),n+=o,s.tmp.count_offset_characters&&(s.tmp.offset_characters+=a.length);else if(i)n=n?[n,o]:[o];else if(o.status!==f.SUPPRESS){var y=(h=o.particle?o.particle+o.num:o.formatter.format(o.num,o.gender)).replace(/<[^>]*>/g,"").length;this.append(h,"empty",!0);var v=this.pop(),_=s.tmp.count_offset_characters;if(h=this.string(s,[v],!1),s.tmp.count_offset_characters=_,o.strings["text-case"]&&(h=f.Output.Formatters[o.strings["text-case"]](this.state,h)),h&&this.state.tmp.strip_periods&&(h=h.replace(/\.([^a-z]|$)/g,"$1")),!s.tmp.suppress_decorations)for(p=0,c=o.decorations.length;p<c;p+=1)m=o.decorations[p],s.normalDecorIsOrphan(o,m)||(h=s.fun.decorate[m[0]][m[1]].call(o,s,h,m[2]));h=d(o.strings.prefix)+h+d(o.strings.suffix);var k="";o.status===f.END?k=d(o.range_prefix):o.status===f.SUCCESSOR?k=d(o.successor_prefix):o.status===f.START?k=l>0&&!o.suppress_splice_prefix?d(o.splice_prefix):"":o.status===f.SEEN&&(k=d(o.splice_prefix)),n+=k,n+=h,s.tmp.count_offset_characters&&(s.tmp.offset_characters+=k.length+o.strings.prefix.length+y+o.strings.suffix.length)}return n},f.Output.Queue.purgeEmptyBlobs=function(t){if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length)for(var e=t.blobs.length-1;e>-1;e--){f.Output.Queue.purgeEmptyBlobs(t.blobs[e]);var i=t.blobs[e];if(!i||!i.blobs||!i.blobs.length){for(var r=[];t.blobs.length-1>e;)r.push(t.blobs.pop());for(t.blobs.pop();r.length;)t.blobs.push(r.pop())}}},f.Output.Queue.adjust=function(t){var e={";":!0,":":!0},i={".":!0,"!":!0,"?":!0},r={"!":{".":"!","?":"!?",":":"!",",":"!,",";":"!;"},"?":{"!":"?!",".":"?",":":"?",",":"?,",";":"?;"},".":{"!":".!","?":".?",":":".:",",":".,",";":".;"},":":{"!":"!","?":"?",".":":",",":":,",";":":;"},",":{"!":",!","?":",?",":":",:",".":",.",";":",;"},";":{"!":"!","?":"?",":":";",",":";,",".":";"}},s={},n={},a={},o={};for(var l in r)a[l]=!0,o[l]=!0,e[l]||(s[l]=!0),i[l]||(n[l]=!0);o[" "]=!0,o[" "]=!0;var u={};for(var l in r)for(var p in r[l])u[p]||(u[p]={}),u[p][l]=r[l][p];function c(t){return"number"==typeof t.num||t.blobs&&1===t.blobs.length&&"number"==typeof t.blobs[0].num}function h(t,e){var i=!1,r=["@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align"];if(e&&r.push("@quotes"),t.decorations){for(var s=0,n=t.decorations.length;s<n;s++)if(r.indexOf(t.decorations[s][0])>-1){i=!0;break}}return i}function f(t,e,i,s,n){var a="blobs"===e?t:t.strings,o="blobs"===s?i:i.strings,l=a[e].slice(-1),p=o[s].slice(0,1);function c(){o[s]=o[s].slice(1)}function h(){a[e]=a[e].slice(0,-1)}var f=n?function(){return r[l]}:function(){return u[p]},m=n?function(){var t=r[l][p];"string"==typeof t?(h(),c(),o[s]=t+o[s]):(o[s]=l+o[s],h())}:function(){var t=u[p][l];"string"==typeof t?(h(),c(),a[e]+=t):(a[e]+=p,c())};l===p?(n?h:c)():f()&&m()}this.upward=function(t){if(t.blobs&&"string"==typeof t.blobs){a[t.strings.suffix.slice(0,1)]&&t.strings.suffix.slice(0,1)===t.blobs.slice(-1)&&(t.strings.suffix=t.strings.suffix.slice(1));return}if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length)for(var e=h(t,!0),i=t.blobs.length-1;i>-1;i--){this.upward(t.blobs[i]);var r=t.strings,s=t.blobs[i].strings;if(0===i){" "===r.prefix.slice(-1)&&" "===s.prefix.slice(0,1)&&(s.prefix=s.prefix.slice(1));var n=s.prefix.slice(0,1);e||!o[n]||r.prefix||(r.prefix+=n,s.prefix=s.prefix.slice(1))}if(i===t.blobs.length-1){var n=s.suffix.slice(-1);!e&&[" "].indexOf(n)>-1&&(r.suffix.slice(0,1)!==n&&(r.suffix=n+r.suffix),s.suffix=s.suffix.slice(0,-1))}r.delimiter&&i>0&&o[r.delimiter.slice(-1)]&&r.delimiter.slice(-1)===s.prefix.slice(0,1)&&(s.prefix=s.prefix.slice(1))}},this.leftward=function(t){if("object"==typeof t&&"object"==typeof t.blobs&&t.blobs.length){for(var e=t.blobs.length-1;e>-1;e--)if(this.leftward(t.blobs[e]),e<t.blobs.length-1&&!t.strings.delimiter){var i=t.blobs[e],r=i.strings.suffix.slice(-1),s=t.blobs[e+1],n=s.strings.prefix.slice(0,1),o=h(i)||h(s),l="number"==typeof r||"number"==typeof n;if(!o&&!l&&a[n]&&!l){var u=n===i.strings.suffix.slice(-1),p=!i.strings.suffix&&"string"==typeof i.blobs&&i.blobs.slice(-1)===n;u||p?s.strings.prefix=s.strings.prefix.slice(1):f(i,"suffix",s,"prefix")}}}},this.downward=function(e){if(e.blobs&&"string"==typeof e.blobs){a[e.strings.suffix.slice(0,1)]&&e.strings.suffix.slice(0,1)===e.blobs.slice(-1)&&(e.strings.suffix=e.strings.suffix.slice(1));return}if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length){for(var i=e.strings,r=0,s=e.blobs.length;r<s&&!c(e.blobs[r]);r++);if(i.delimiter&&a[i.delimiter.slice(0,1)]){for(var n=i.delimiter.slice(0,1),r=e.blobs.length-2;r>-1;r--){var l=e.blobs[r].strings;l.suffix.slice(-1)!==n&&(l.suffix+=n)}i.delimiter=i.delimiter.slice(1)}for(var r=e.blobs.length-1;r>-1;r--){var p=e.blobs[r],l=e.blobs[r].strings,m=h(p,!0),d=c(p);if(r===e.blobs.length-1){var g=i.suffix.slice(0,1),b=!1;a[g]&&((b=function t(e,i){var r=i.strings.suffix.slice(-1);r||"string"!=typeof i.blobs||(r=i.blobs.slice(-1));var s=u[e][r];return!!s&&1===s.length||"object"==typeof i.blobs&&!!t(e,i.blobs[i.blobs.length-1])}(g,p))||!t||(b=function t(e){if(e.decorations){for(var i=0,r=e.decorations.length;i<r;i++)if("@quotes"===e.decorations[i][0]&&"false"!==e.decorations[i][1])return!0}return"object"==typeof e.blobs&&t(e.blobs[e.blobs.length-1])}(p))),b&&a[g]&&!function t(e){return"number"==typeof e.num||!!e.blobs&&"object"==typeof e.blobs&&(!!t(e.blobs[e.blobs.length-1])||void 0)}(p)&&("string"==typeof p.blobs?f(p,"blobs",e,"suffix"):f(p,"suffix",e,"suffix"),"."===i.suffix.slice(0,1)&&(l.suffix+=i.suffix.slice(0,1),i.suffix=i.suffix.slice(1)))," "===l.suffix.slice(-1)&&" "===i.suffix.slice(0,1)&&(i.suffix=i.suffix.slice(1)),o[l.suffix.slice(0,1)]&&("string"==typeof p.blobs&&p.blobs.slice(-1)===l.suffix.slice(0,1)&&(l.suffix=l.suffix.slice(1)),l.suffix.slice(-1)===i.suffix.slice(0,1)&&(i.suffix=i.suffix.slice(0,-1))),function t(e,i){if(!a[i])return!1;if("string"==typeof e.blobs)if(e.blobs.slice(-1)===i)return!0;else return!1;var r=e.blobs[e.blobs.length-1];return!!r&&(r.strings.suffix.slice(-1)?r.strings.suffix.slice(-1)==i:t(r,i))}(e,e.strings.suffix.slice(0,1))&&(e.strings.suffix=e.strings.suffix.slice(1))}else if(i.delimiter)o[i.delimiter.slice(0,1)]&&i.delimiter.slice(0,1)===l.suffix.slice(-1)&&(e.blobs[r].strings.suffix=e.blobs[r].strings.suffix.slice(0,-1));else{var y=e.blobs[r+1].strings;c(p)||m||!o[l.suffix.slice(-1)]||l.suffix.slice(-1)!==y.prefix.slice(0,1)||(y.prefix=y.prefix.slice(1))}d||m||!a[l.suffix.slice(0,1)]||"string"!=typeof p.blobs||f(p,"blobs",p,"suffix"),this.downward(e.blobs[r])}}},this.fix=function(e){if("object"==typeof e&&"object"==typeof e.blobs&&e.blobs.length){for(var i,r=0,a=e.blobs.length;r<a;r++){for(var o=e.blobs[r],l=!1,u=0,p=o.decorations.length;u<p;u++){var c=o.decorations[u];"@quotes"===c[0]&&"false"!==c[1]&&(l=!0)}l&&(t?function(t){var e=t.strings.suffix.slice(0,1);if("string"==typeof t.blobs)for(;s[e];)f(t,"blobs",t,"suffix"),e=t.strings.suffix.slice(0,1);else for(;s[e];)f(t.blobs[t.blobs.length-1],"suffix",t,"suffix"),e=t.strings.suffix.slice(0,1)}(o):function(t){if("string"==typeof t.blobs)for(var e=t.blobs.slice(-1);n[e];)f(t,"blobs",t,"suffix",!0),e=t.blobs.slice(-1);else for(var e=t.blobs[t.blobs.length-1].strings.suffix.slice(-1);n[e];)f(t.blobs[t.blobs.length-1],"suffix",t,"suffix",!0),e=t.blobs[t.blobs.length-1].strings.suffix.slice(-1)}(o)),i=this.fix(e.blobs[r]),o.blobs&&"string"==typeof o.blobs&&(i=o.blobs.slice(-1))}return i}}},f.Engine.Opt=function(){this.parallel={enable:!1},this.has_disambiguate=!1,this.mode="html",this.dates={},this.jurisdictions_seen={},this.suppressedJurisdictions={},this.inheritedAttributes={},this["locale-sort"]=[],this["locale-translit"]=[],this["locale-translat"]=[],this.citeAffixes={persons:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},institutions:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},titles:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},journals:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},publishers:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},places:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}}},this["default-locale"]=[],this.update_mode=f.NONE,this.bib_mode=f.NONE,this.sort_citations=!1,this["et-al-min"]=0,this["et-al-use-first"]=1,this["et-al-use-last"]=!1,this["et-al-subsequent-min"]=!1,this["et-al-subsequent-use-first"]=!1,this["demote-non-dropping-particle"]="display-and-sort",this["parse-names"]=!0,this.citation_number_slug=!1,this.trigraph="Aaaa00:AaAa00:AaAA00:AAAA00",this.nodenames=[],this.gender={},this["cite-lang-prefs"]={persons:["orig"],institutions:["orig"],titles:["orig"],journals:["orig"],publishers:["orig"],places:["orig"],number:["orig"]},this.has_layout_locale=!1,this.disable_duplicate_year_suppression=[],this.use_context_condition=!1,this.jurisdiction_fallbacks={},this.development_extensions={},this.development_extensions.field_hack=!0,this.development_extensions.allow_field_hack_date_override=!0,this.development_extensions.locator_date_and_revision=!0,this.development_extensions.locator_label_parse=!0,this.development_extensions.raw_date_parsing=!0,this.development_extensions.clean_up_csl_flaws=!0,this.development_extensions.consolidate_legal_items=!1,this.development_extensions.csl_reverse_lookup_support=!1,this.development_extensions.wrap_url_and_doi=!1,this.development_extensions.thin_non_breaking_space_html_hack=!1,this.development_extensions.apply_citation_wrapper=!1,this.development_extensions.main_title_from_short_title=!1,this.development_extensions.uppercase_subtitles=!1,this.development_extensions.normalize_lang_keys_to_lowercase=!1,this.development_extensions.strict_text_case_locales=!1,this.development_extensions.expect_and_symbol_form=!1,this.development_extensions.require_explicit_legal_case_title_short=!1,this.development_extensions.spoof_institutional_affiliations=!1,this.development_extensions.force_jurisdiction=!1,this.development_extensions.parse_names=!0,this.development_extensions.hanging_indent_legacy_number=!1,this.development_extensions.throw_on_empty=!1,this.development_extensions.strict_inputs=!0,this.development_extensions.prioritize_disambiguate_condition=!1,this.development_extensions.force_short_title_casing_alignment=!0,this.development_extensions.implicit_short_title=!1,this.development_extensions.force_title_abbrev_fallback=!1,this.development_extensions.split_container_title=!1,this.development_extensions.legacy_institution_name_ordering=!1,this.development_extensions.etal_min_etal_usefirst_hack=!1},f.Engine.Tmp=function(){this.names_max=new f.Stack,this.names_base=new f.Stack,this.givens_base=new f.Stack,this.value=[],this.namepart_decorations={},this.namepart_type=!1,this.area="citation",this.root="citation",this.extension="",this.can_substitute=new f.Stack(0,f.LITERAL),this.element_rendered_ok=!1,this.element_trace=new f.Stack("style"),this.nameset_counter=0,this.group_context=new f.Stack({term_intended:!1,variable_attempt:!1,variable_success:!1,output_tip:void 0,label_form:void 0,parallel_first:void 0,parallel_last:void 0,parallel_delimiter_override:void 0,condition:!1,force_suppress:!1,done_vars:[]}),this.term_predecessor=!1,this.in_cite_predecessor=!1,this.jump=new f.Stack(0,f.LITERAL),this.decorations=new f.Stack,this.tokenstore_stack=new f.Stack,this.last_suffix_used="",this.last_names_used=[],this.last_years_used=[],this.years_used=[],this.names_used=[],this.taintedItemIDs={},this.taintedCitationIDs={},this.initialize_with=new f.Stack,this.disambig_request=!1,this["name-as-sort-order"]=!1,this.suppress_decorations=!1,this.disambig_settings=new f.AmbigConfig,this.bib_sort_keys=[],this.prefix=new f.Stack("",f.LITERAL),this.suffix=new f.Stack("",f.LITERAL),this.delimiter=new f.Stack("",f.LITERAL),this.cite_locales=[],this.cite_affixes={citation:!1,bibliography:!1,citation_sort:!1,bibliography_sort:!1},this.strip_periods=0,this.shadow_numbers={},this.authority_stop_last=0,this.loadedItemIDs={},this.condition_counter=0,this.condition_lang_val_arr=[],this.condition_lang_counter_arr=[]},f.Engine.Fun=function(t){this.match=new f.Util.Match,this.suffixator=new f.Util.Suffixator(f.SUFFIX_CHARS),this.romanizer=new f.Util.Romanizer,this.ordinalizer=new f.Util.Ordinalizer(t),this.long_ordinalizer=new f.Util.LongOrdinalizer},f.Engine.Build=function(){this["alternate-term"]=!1,this.in_bibliography=!1,this.in_style=!1,this.skip=!1,this.postponed_macro=!1,this.layout_flag=!1,this.name=!1,this.names_variables=[[]],this.name_label=[{}],this.form=!1,this.term=!1,this.macro={},this.macro_stack=[],this.text=!1,this.lang=!1,this.area="citation",this.root="citation",this.extension="",this.substitute_level=new f.Stack(0,f.LITERAL),this.names_level=0,this.render_nesting_level=0,this.render_seen=!1,this.bibliography_key_pos=0},f.Engine.Configure=function(){this.tests=[],this.fail=[],this.succeed=[]},f.Engine.Citation=function(t){this.opt={inheritedAttributes:{}},this.tokens=[],this.srt=new f.Registry.Comparifier(t,"citation_sort"),this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="citation"},f.Engine.Bibliography=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt["line-spacing"]=1,this.opt["entry-spacing"]=1,this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="bibliography"},f.Engine.BibliographySort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.opt.topdecor=[],this.opt.citation_number_sort_direction=f.ASCENDING,this.opt.citation_number_secondary=!1,this.tmp={},this.keys=[],this.root="bibliography"},f.Engine.CitationSort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.keys=[],this.opt.topdecor=[],this.root="citation"},f.Engine.InText=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="intext"},f.Engine.prototype.previewCitationCluster=function(t,e,i,r){var s=this.opt.mode;this.setOutputFormat(r),t.citationID&&delete t.citationID;var n=this.processCitationCluster(t,e,i,f.PREVIEW);return this.setOutputFormat(s),n[1]},f.Engine.prototype.appendCitationCluster=function(t){for(var e=[],i=this.registry.citationreg.citationByIndex.length,r=0;r<i;r+=1){var s=this.registry.citationreg.citationByIndex[r];e.push([""+s.citationID,s.properties.noteIndex])}return this.processCitationCluster(t,e,[])[1]},f.Engine.prototype.processCitationCluster=function(t,e,i,r){if(this.debug=!1,this.tmp.loadedItemIDs={},this.tmp.citation_errors=[],this.registry.return_data={bibchange:!1},this.setCitationId(t),r===f.PREVIEW){this.debug&&f.debug("****** start state save *********"),ti=this.registry.citationreg.citationByIndex.slice(),tr=this.registry.reflist.slice();for(var s=e.concat(i),n={},a=[],o=0,l=s.length;o<l;o+=1)for(X=0,V=($=this.registry.citationreg.citationById[s[o][0]]).citationItems.length;X<V;X+=1)n[$.citationItems[X].id]=!0,a.push(""+$.citationItems[X].id);for(X=0,V=t.citationItems.length;X<V;X+=1)n[t.citationItems[X].id]=!0,a.push(""+t.citationItems[X].id);ts={};for(var o=0,l=tr.length;o<l;o+=1)if(!n[tr[o].id]){var u=this.registry.registry[tr[o].id].ambig,p=this.registry.ambigcites[u];if(p)for(X=0,V=p.length;X<V;X+=1)ts[p[X]]=f.cloneAmbigConfig(this.registry.registry[p[X]].disambig)}this.debug&&f.debug("****** end state save *********")}this.tmp.taintedCitationIDs={};for(var c=[],h={},o=0,l=t.citationItems.length;o<l;o+=1){for(var m in Q={},t.citationItems[o])Q[m]=t.citationItems[o][m];if((Y=this.retrieveItem(""+Q.id)).id&&this.transform.loadAbbreviation("default","hereinafter",Y.id,Y.language),Q=f.parseLocator.call(this,Q),this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable([[Y,Q]]),this.opt.development_extensions.locator_label_parse&&Q.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(Y.type)&&(!Q.label||"page"===Q.label)){var d=f.LOCATOR_LABELS_REGEXP.exec(Q.locator);if(d){var g=f.LOCATOR_LABELS_MAP[d[2]];this.getTerm(g)&&(Q.label=g,Q.locator=d[3])}}var b=[Y,Q];c.push(b),t.citationItems[o].item=Y}t.sortedItems=c;var y=[],v={};for(o=0,l=e.length;o<l;o+=1)z=e[o],this.opt.development_extensions.strict_inputs&&(v[z[0]]&&f.error("Previously referenced citationID "+z[0]+" encountered in citationsPre"),z[1]&&(tn>z[1]&&f.debug("Note index sequence is not sane at citationsPre["+o+"]"),tn=z[1])),this.registry.citationreg.citationById[z[0]].properties.noteIndex=z[1],y.push(this.registry.citationreg.citationById[z[0]]),v[z[0]]=this.registry.citationreg.citationById[z[0]];for(t.properties||(t.properties={noteIndex:0}),this.opt.development_extensions.strict_inputs&&(v[t.citationID]&&f.error("Citation with previously referenced citationID "+t.citationID),t.properties.noteIndex&&(tn>t.properties.noteIndex&&f.debug("Note index sequence is not sane for citation "+t.citationID),tn=t.properties.noteIndex)),y.push(t),v[t.citationID]=t,o=0,l=i.length;o<l;o+=1)G=i[o],this.opt.development_extensions.strict_inputs&&(v[G[0]]&&f.error("Previously referenced citationID "+G[0]+" encountered in citationsPost"),G[1]&&(tn>G[1]&&f.debug("Note index sequence is not sane at postCitation["+o+"]"),tn=G[1])),this.registry.citationreg.citationById[G[0]].properties.noteIndex=G[1],y.push(this.registry.citationreg.citationById[G[0]]),v[G[0]]=this.registry.citationreg.citationById[G[0]];this.registry.citationreg.citationByIndex=y,this.registry.citationreg.citationById=v,this.registry.citationreg.citationsByItemId={},this.opt.update_mode===f.POSITION&&(tt=[],Z=[],te={});for(var _=[],o=0,l=y.length;o<l;o+=1){for(X=0,y[o].properties.index=o,V=y[o].sortedItems.length;X<V;X+=1)Q=y[o].sortedItems[X],this.registry.citationreg.citationsByItemId[Q[1].id]||(this.registry.citationreg.citationsByItemId[Q[1].id]=[],_.push(""+Q[1].id)),-1===this.registry.citationreg.citationsByItemId[Q[1].id].indexOf(y[o])&&this.registry.citationreg.citationsByItemId[Q[1].id].push(y[o]);this.opt.update_mode===f.POSITION&&(y[o].properties.noteIndex?Z.push(y[o]):(y[o].properties.noteIndex=0,tt.push(y[o])))}if(r!==f.ASSUME_ALL_ITEMS_REGISTERED&&(this.debug&&f.debug("****** start update items *********"),this.updateItems(_,null,null,!0),this.debug&&f.debug("****** endo update items *********")),!this.opt.citation_number_sort&&c&&c.length>1&&this.citation_sort.tokens.length>0){for(var o=0,l=c.length;o<l;o+=1)c[o][1].sortkeys=f.getSortKeys.call(this,c[o][0],"citation_sort");if(this.opt.grouped_sort&&!t.properties.unsorted){for(var o=0,l=c.length;o<l;o+=1){var k=c[o][1].sortkeys;this.tmp.authorstring_request=!0;var w=this.registry.registry[c[o][0].id].disambig;this.tmp.authorstring_request=!0,f.getAmbiguousCite.call(this,c[o][0],w);var x=this.registry.authorstrings[c[o][0].id];this.tmp.authorstring_request=!1,c[o][1].sortkeys=[x].concat(k)}c.sort(this.citation.srt.compareCompositeKeys);for(var E=!1,T=!1,O=!1,o=0,l=c.length;o<l;o+=1)c[o][1].sortkeys[0]!==E&&(O=c[o][1].sortkeys[0],T=c[o][1].sortkeys[1]),c[o][1].sortkeys[0]=""+T+o,E=O}t.properties.unsorted||c.sort(this.citation.srt.compareCompositeKeys)}if(this.opt.parallel.enable&&this.parallel.StartCitation(t.sortedItems),this.opt.update_mode===f.POSITION)for(var o=0;o<2;o+=1){var A={},S={},I={};for(X=0,V=(ta=[tt,Z][o]).length;X<V;X+=1){var j=ta[X];for(ta[X].properties.noteIndex||(ta[X].properties.noteIndex=0),ta[X].properties.noteIndex=parseInt(ta[X].properties.noteIndex,10),X>0&&j.properties.noteIndex&&ta[X-1].properties.noteIndex>j.properties.noteIndex&&(te={},A={},S={},I={}),W=0,J=j.sortedItems.length;W<J;W+=1)j.sortedItems[W][1].parallel&&"first"!==j.sortedItems[W][1].parallel||(te[j.properties.noteIndex]?te[j.properties.noteIndex]+=1:te[j.properties.noteIndex]=1);for(W=0,J=ta[X].sortedItems.length;W<J;W+=1){var C=(Q=ta[X].sortedItems[W])[0].id,N=Q[0].legislation_id?Q[0].legislation_id:Q[0].id,P=Q[0].legislation_id?Q[0].legislation_id:Q[0].container_id?Q[0].container_id:Q[0].id,D=Q[1]["locator-extra"],R=Q[1].locator,L=Q[1].label;if(W>0)if(j.sortedItems[W-1][0].legislation_id)to=j.sortedItems[W-1][0].legislation_id;else{to=j.sortedItems[W-1][1].id,tl=j.sortedItems[W-1][1]["locator-extra"];for(var B=W-2;B>-1;B--)"first"===j.sortedItems[B][1].parallel&&(to=j.sortedItems[B][1].id,tl=j.sortedItems[B][1]["locator-extra"])}if(r===f.PREVIEW&&j.citationID!=t.citationID){void 0===A[Q[1].id]&&(A[N]=j.properties.noteIndex),S[P]=j.properties.noteIndex;continue}var F={};if(F.position=Q[1].position,F["first-reference-note-number"]=Q[1]["first-reference-note-number"],F["first-container-reference-note-number"]=Q[1]["first-container-reference-note-number"],F["near-note"]=Q[1]["near-note"],Q[1]["first-reference-note-number"]=0,Q[1]["first-container-reference-note-number"]=0,Q[1]["near-note"]=!1,this.registry.citationreg.citationsByItemId[C]&&"note"===this.opt.xclass&&this.opt.has_disambiguate){var M=this.registry.registry[Q[0].id]["citation-count"],U=this.registry.citationreg.citationsByItemId[C].length;if(this.registry.registry[Q[0].id]["citation-count"]=this.registry.citationreg.citationsByItemId[C].length,"number"==typeof M){if(M<2!=U<2)for(var B=0,q=this.registry.citationreg.citationsByItemId[C].length;B<q;B++)h[this.registry.registry[Q[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[C][B].citationID]=!0}else for(var B=0,q=this.registry.citationreg.citationsByItemId[C].length;B<q;B++)h[this.registry.registry[Q[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[C][B].citationID]=!0}if(void 0===S[P]&&"author-only"!==j.properties.mode)A[N]=j.properties.noteIndex,S[P]=j.properties.noteIndex,I[P]=j.properties.noteIndex,Q[1].position=f.POSITION_FIRST;else{var $,z,G,o,l,X,V,W,J,H,K,m,Y,Q,Z,tt,d,te,ti,tr,ts,tn,ta,to,tl,tu,tp,tc,th,tf,tm,td=!1,tg=!1,tb=null;if(X>0)var tb=ta[X-1];var ty=ta[X];if(X>0){var tv=1;"author-only"===tb.properties.mode&&X>1&&(tv=2);var t_=X-tv;ta[t_].sortedItems.length&&(tu=ta[t_].sortedItems.slice(-1)[0][1].id,tp=ta[X-tv].sortedItems.slice(-1)[0][1]["locator-extra"]),tb.sortedItems.length&&tb.sortedItems[0].slice(-1)[0].legislation_id&&(tu=tb.sortedItems[0].slice(-1)[0].legislation_id)}if(X>0&&0===W&&tb.properties.noteIndex!==ty.properties.noteIndex){var tk=!1,tw=tb.sortedItems[0][0].id;if(tb.sortedItems[0][0].legislation_id&&(tw=tb.sortedItems[0][0].legislation_id),tw==N&&tb.properties.noteIndex>=ty.properties.noteIndex-1){var tx=tb.sortedItems[0][1]["locator-extra"],tE=ty.sortedItems[0][1]["locator-extra"];(1===te[tb.properties.noteIndex]||0===tb.properties.noteIndex)&&tx===tE&&(tk=!0)}tk?td=!0:tg=!0}else W>0&&to==N&&tl==D||0===W&&X>0&&tb.properties.noteIndex==ty.properties.noteIndex&&tb.sortedItems.length&&tu==N&&tp==D?td=!0:tg=!0;td&&((tc=W>0?j.sortedItems[W-1][1]:ta[X-1].sortedItems[0][1]).locator?(tf=tc.label?tc.label:"",th=""+tc.locator+tf):th=tc.locator,tm=R?""+R+(L||""):R),td&&th&&!tm&&(td=!1,tg=!0),td&&(!th&&tm?Q[1].position=f.POSITION_IBID_WITH_LOCATOR:th||tm?th&&tm===th?Q[1].position=f.POSITION_IBID:th&&tm&&tm!==th?Q[1].position=f.POSITION_IBID_WITH_LOCATOR:(td=!1,tg=!0):Q[1].position=f.POSITION_IBID),tg&&(Q[1].position=f.POSITION_CONTAINER_SUBSEQUENT,void 0===A[N]?A[N]=j.properties.noteIndex:Q[1].position=f.POSITION_SUBSEQUENT),(tg||td)&&("author-only"===j.properties.mode&&(Q[1].position=f.POSITION_FIRST),I[P]!=j.properties.noteIndex&&(Q[1]["first-container-reference-note-number"]=I[P],this.registry.registry[Q[0].id]&&(this.registry.registry[Q[0].id]["first-container-reference-note-number"]=I[P])),A[N]!=j.properties.noteIndex&&(Q[1]["first-reference-note-number"]=A[N],this.registry.registry[Q[0].id]&&(this.registry.registry[Q[0].id]["first-reference-note-number"]=A[N])))}if(j.properties.noteIndex){var tT=parseInt(j.properties.noteIndex,10)-parseInt(S[P],10);Q[1].position!==f.POSITION_FIRST&&tT<=this.citation.opt["near-note-distance"]&&(Q[1]["near-note"]=!0),S[P]=j.properties.noteIndex}else Q[1].position!==f.POSITION_FIRST&&(Q[1]["near-note"]=!0);if(j.citationID!=t.citationID)for(H=0,K=f.POSITION_TEST_VARS.length;H<K;H+=1){var tO=f.POSITION_TEST_VARS[H];Q[1][tO]!==F[tO]&&(this.registry.registry[Q[0].id]&&"first-reference-note-number"===tO&&(h[this.registry.registry[Q[0].id].ambig]=!0,this.tmp.taintedItemIDs[Q[0].id]=!0),this.tmp.taintedCitationIDs[j.citationID]=!0)}this.sys.variableWrapper&&(Q[1].index=j.properties.index,Q[1].noteIndex=j.properties.noteIndex)}}}if(this.opt.citation_number_sort&&c&&c.length>1&&this.citation_sort.tokens.length>0&&!t.properties.unsorted){for(var o=0,l=c.length;o<l;o+=1)c[o][1].sortkeys=f.getSortKeys.call(this,c[o][0],"citation_sort");c.sort(this.citation.srt.compareCompositeKeys)}for(var m in this.tmp.taintedItemIDs)if(this.tmp.taintedItemIDs.hasOwnProperty(m)&&(ta=this.registry.citationreg.citationsByItemId[m]))for(var o=0,l=ta.length;o<l;o+=1)this.tmp.taintedCitationIDs[ta[o].citationID]=!0;var tA=[];if(r===f.PREVIEW){this.debug&&f.debug("****** start run processor *********");try{tA=this.process_CitationCluster.call(this,t.sortedItems,t)}catch(t){f.error("Error running CSL processor for preview: "+t)}this.debug&&(f.debug("****** end run processor *********"),f.debug("****** start state restore *********")),this.registry.citationreg.citationByIndex=ti,this.registry.citationreg.citationById={};for(var o=0,l=ti.length;o<l;o+=1)this.registry.citationreg.citationById[ti[o].citationID]=ti[o];this.debug&&f.debug("****** start final update *********");for(var tS=[],o=0,l=tr.length;o<l;o+=1)tS.push(""+tr[o].id);for(var m in this.updateItems(tS,null,null,!0),this.debug&&f.debug("****** end final update *********"),ts)ts.hasOwnProperty(m)&&(this.registry.registry[m].disambig=ts[m]);this.debug&&f.debug("****** end state restore *********")}else{for(var tI in h)this.disambiguate.run(tI,t);for(var m in this.tmp.taintedCitationIDs)if(m!=t.citationID){var tj,tC=this.registry.citationreg.citationById[m];if(!tC.properties.unsorted){for(var o=0,l=tC.sortedItems.length;o<l;o+=1)tC.sortedItems[o][1].sortkeys=f.getSortKeys.call(this,tC.sortedItems[o][0],"citation_sort");tC.sortedItems.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_pos=tC.properties.index,this.tmp.citation_note_index=tC.properties.noteIndex,this.tmp.citation_id=""+tC.citationID,(tj=[]).push(tC.properties.index),tj.push(this.process_CitationCluster.call(this,tC.sortedItems,tC)),tj.push(tC.citationID),tA.push(tj)}this.tmp.taintedItemIDs={},this.tmp.taintedCitationIDs={},this.tmp.citation_pos=t.properties.index,this.tmp.citation_note_index=t.properties.noteIndex,this.tmp.citation_id=""+t.citationID,(tj=[]).push(e.length),tj.push(this.process_CitationCluster.call(this,c,t)),tj.push(t.citationID),tA.push(tj),tA.sort(function(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:0})}return this.registry.return_data.citation_errors=this.tmp.citation_errors.slice(),[this.registry.return_data,tA]},f.Engine.prototype.process_CitationCluster=function(t,e){var i="";if(e&&e.properties&&"composite"===e.properties.mode){e.properties.mode="author-only";var r=f.getCitationCluster.call(this,t,e);e.properties.mode="suppress-author";var s="";e.properties.infix&&(this.output.append(e.properties.infix),"object"==typeof(s=this.output.string(this,this.output.queue))&&(s=s.join("")));var n=f.getCitationCluster.call(this,t,e);e.properties.mode="composite",r&&s&&f.SWAPPING_PUNCTUATION.concat(["’","'"]).indexOf(s[0])>-1&&(r+=s,s=!1),i=[r,s,n].filter(function(t){return t}).join(" ")}else i=f.getCitationCluster.call(this,t,e);return i},f.Engine.prototype.makeCitationCluster=function(t){for(n=0,i=[],a=t.length;n<a;n+=1){for(var e in o={},t[n])o[e]=t[n][e];if(l=this.retrieveItem(""+o.id),this.opt.development_extensions.locator_label_parse&&o.locator&&-1===["bill","gazette","legislation","regulation","treaty"].indexOf(l.type)&&(!o.label||"page"===o.label)){var i,r,s,n,a,o,l,u=f.LOCATOR_LABELS_REGEXP.exec(o.locator);if(u){var p=f.LOCATOR_LABELS_MAP[u[2]];this.getTerm(p)&&(o.label=p,o.locator=u[3])}}o.locator&&(o.locator=(""+o.locator).replace(/\s+$/,"")),r=[l,o],i.push(r)}if(this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable(i),i&&i.length>1&&this.citation_sort.tokens.length>0){for(n=0,a=i.length;n<a;n+=1)i[n][1].sortkeys=f.getSortKeys.call(this,i[n][0],"citation_sort");i.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_errors=[];var s=f.getCitationCluster.call(this,i);return s},f.getAmbiguousCite=function(t,e,i,r){var s,n=this.tmp.group_context.tip,a={term_intended:n.term_intended,variable_attempt:n.variable_attempt,variable_success:n.variable_success,output_tip:n.output_tip,label_form:n.label_form,non_parallel:n.non_parallel,parallel_last:n.parallel_last,parallel_first:n.parallel_first,parallel_last_override:n.parallel_last_override,parallel_delimiter_override:n.parallel_delimiter_override,parallel_delimiter_override_on_suppress:n.parallel_delimiter_override_on_suppress,condition:n.condition,force_suppress:n.force_suppress,done_vars:n.done_vars.slice()};e?this.tmp.disambig_request=e:this.tmp.disambig_request=!1;var o={position:f.POSITION_SUBSEQUENT,"near-note":!0};r&&(o.locator=r.locator,o.label=r.label),this.registry.registry[t.id]&&this.registry.citationreg.citationsByItemId&&this.registry.citationreg.citationsByItemId[t.id]&&this.registry.citationreg.citationsByItemId[t.id].length&&i&&"by-cite"===this.citation.opt["givenname-disambiguation-rule"]&&(o["first-reference-note-number"]=this.registry.registry[t.id]["first-reference-note-number"]),this.tmp.area="citation",this.tmp.root="citation";var l=this.tmp.suppress_decorations;this.tmp.suppress_decorations=!0,this.tmp.just_looking=!0,f.getCite.call(this,t,o,null,!1);for(var u=0,p=this.output.queue.length;u<p;u+=1)f.Output.Queue.purgeEmptyBlobs(this.output.queue[u]);if(this.opt.development_extensions.clean_up_csl_flaws)for(var c=0,h=this.output.queue.length;c<h;c+=1)this.output.adjust.upward(this.output.queue[c]),this.output.adjust.leftward(this.output.queue[c]),this.output.adjust.downward(this.output.queue[c]),this.output.adjust.fix(this.output.queue[c]);var s=this.output.string(this,this.output.queue);return this.tmp.just_looking=!1,this.tmp.suppress_decorations=l,this.tmp.group_context.replace(a),s},f.getSpliceDelimiter=function(t,e,i){if(void 0!==this.citation.opt["after-collapse-delimiter"])t||e&&!this.tmp.have_collapsed?this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:e||this.tmp.have_collapsed||"year-suffix"===this.citation.opt.collapse?this.tmp.splice_delimiter=this.citation.opt.layout_delimiter:this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"];else if(this.tmp.use_cite_group_delimiter)this.tmp.splice_delimiter=this.citation.opt.cite_group_delimiter;else if(this.tmp.have_collapsed&&"in-text"===this.opt.xclass&&this.opt.update_mode!==f.NUMERIC)this.tmp.splice_delimiter=", ";else if(this.tmp.cite_locales[i-1]){var r=this.tmp.cite_affixes[this.tmp.area][this.tmp.cite_locales[i-1]];r&&r.delimiter&&(this.tmp.splice_delimiter=r.delimiter)}else this.tmp.splice_delimiter||(this.tmp.splice_delimiter="");return this.tmp.splice_delimiter},f.getCitationCluster=function(t,e){var i,r,s,n,a,o,l,u,p,c,h,m,d,g,b,y,v,_,k,w,x,E="";this.output.checkNestedBrace=new f.checkNestedBrace(this),e&&(k=e.citationID,w="author-only"===e.properties.mode&&!!e.properties.mode,"note"!==this.opt.xclass&&(x="suppress-author"===e.properties.mode&&!!e.properties.mode),e.properties.prefix&&(E=f.checkPrefixSpaceAppend(this,e.properties.prefix))),t=t||[],this.tmp.last_primary_names_string=!1,v=f.getSafeEscape(this),this.tmp.area="citation",this.tmp.root="citation",i="",r=[],this.tmp.last_suffix_used="",this.tmp.last_names_used=[],this.tmp.last_years_used=[],this.tmp.backref_index=[],this.tmp.cite_locales=[],this.tmp.just_looking||(this.tmp.abbrev_trimmer={QUASHES:{}});var T=this.output.checkNestedBrace.update(this.citation.opt.layout_prefix+E),O=!1;if(this.citation.opt.suppressTrailingPunctuation&&(O=!0),k&&this.registry.citationreg.citationById[k].properties["suppress-trailing-punctuation"]&&(O=!0),"note"===this.opt.xclass){for(var A=[],S=!1,I=!1,j=[],C=0,N=t.length;C<N;C+=1){var P=t[C][0].type,D=t[C][0].title,R=t[C][1].position,L=t[C][0].id;D&&"legal_case"===P&&L!==I&&R&&((D!==S||0===A.length)&&(j=[],A.push(j)),j.push(t[C][1])),S=D,I=L}for(C=0,N=A.length;C<N;C+=1)if(!((j=A[C]).length<2)){var B=j.slice(-1)[0].locator;if(B)for(var F=0,M=j.length-1;F<M;F+=1)j[F].locator&&(B=!1);B&&(j[0].locator=B,delete j.slice(-1)[0].locator,j[0].label=j.slice(-1)[0].label,j.slice(-1)[0].label&&delete j.slice(-1)[0].label)}}for(s=[],n=t.length,t[0]&&t[0][1]&&(w?(delete t[0][1]["suppress-author"],t[0][1]["author-only"]=!0):x&&(delete t[0][1]["author-only"],t[0][1]["suppress-author"]=!0)),this.opt.parallel.enable&&this.parallel.StartCitation(t),a=0;a<n;a+=1){this.tmp.cite_index=a,m=t[a][0],o=t[a][1],o=f.parseLocator.call(this,o),l=this.tmp.have_collapsed;var U=!1;if(a>0&&t[a-1][1]&&(U=!!t[a-1][1].locator),u={},this.tmp.shadow_numbers={},!this.tmp.just_looking&&this.opt.hasPlaceholderTerm){var q=this.output;this.output=new f.Output.Queue(this),this.output.adjust=new f.Output.Queue.adjust,f.getAmbiguousCite.call(this,m,null,!1,o),this.output=q}if(this.tmp.in_cite_predecessor=!1,a>0?f.getCite.call(this,m,o,""+t[a-1][0].id,!0):(this.tmp.term_predecessor=!1,f.getCite.call(this,m,o,null,!0)),this.tmp.cite_renders_content||(_={citationID:""+this.tmp.citation_id,index:this.tmp.citation_pos,noteIndex:this.tmp.citation_note_index,itemID:""+m.id,citationItems_pos:a,error_code:f.ERROR_NO_RENDERED_FORM},this.tmp.citation_errors.push(_)),u.splice_delimiter=f.getSpliceDelimiter.call(this,U,l,a),o&&o["author-only"]&&(this.tmp.suppress_decorations=!0),a>0){var $=(y=t[a-1][1]).suffix&&[";",".",","].indexOf(y.suffix.slice(-1))>-1,z=!y.suffix&&o.prefix&&[";",".",","].indexOf(o.prefix.slice(0,1))>-1;if($||z){var G=u.splice_delimiter.indexOf(" ");G>-1&&!z?u.splice_delimiter=u.splice_delimiter.slice(G):u.splice_delimiter=""}}if(u.suppress_decorations=this.tmp.suppress_decorations,u.have_collapsed=this.tmp.have_collapsed,s.push(u),o["author-only"])break}h=this.output.queue.slice();var X="";e&&(X=f.checkSuffixSpacePrepend(this,e.properties.suffix));var V=this.citation.opt.layout_suffix,W=this.tmp.cite_locales[this.tmp.cite_locales.length-1];W&&this.tmp.cite_affixes[this.tmp.area][W]&&this.tmp.cite_affixes[this.tmp.area][W].suffix&&(V=this.tmp.cite_affixes[this.tmp.area][W].suffix),f.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(V.slice(0,1))>-1&&(V=V.slice(0,1)),V=this.output.checkNestedBrace.update(X+V);for(var C=0,N=this.output.queue.length;C<N;C+=1)f.Output.Queue.purgeEmptyBlobs(this.output.queue[C]);if(this.tmp.suppress_decorations||!this.output.queue.length||this.opt.development_extensions.apply_citation_wrapper&&this.sys.wrapCitationEntry&&!this.tmp.just_looking&&"citation"===this.tmp.area||(O||(this.output.queue[this.output.queue.length-1].strings.suffix=V),this.output.queue[0].strings.prefix=T),this.opt.development_extensions.clean_up_csl_flaws)for(var F=0,M=this.output.queue.length;F<M;F+=1)this.output.adjust.upward(this.output.queue[F]),this.output.adjust.leftward(this.output.queue[F]),this.output.adjust.downward(this.output.queue[F]),this.tmp.last_chr=this.output.adjust.fix(this.output.queue[F]);for(a=0,n=h.length;a<n;a+=1){var J=[];if(this.output.queue=[h[a]],this.tmp.suppress_decorations=s[a].suppress_decorations,this.tmp.splice_delimiter=s[a].splice_delimiter,h[a].parallel_delimiter&&(this.tmp.splice_delimiter=h[a].parallel_delimiter),this.tmp.have_collapsed=s[a].have_collapsed,p=this.output.string(this,this.output.queue),this.tmp.suppress_decorations=!1,"string"==typeof p)return this.tmp.suppress_decorations=!1,p||(this.opt.development_extensions.throw_on_empty?f.error("Citation would render no content"):p="[NO_PRINTED_FORM]"),p;if("object"==typeof p&&0===p.length&&!o["suppress-author"]){if(0===a){var H=0===a?v(this.citation.opt.layout_prefix):"",K=a===h.length-1?v(this.citation.opt.layout_suffix):"";p.push(H+"[CSL STYLE ERROR: reference with no printed form.]"+K)}else if(a===h.length-1){var Y=r[r.length-1];"string"==typeof Y?r[r.length-1]+=v(this.citation.opt.layout_suffix):"object"==typeof Y&&(Y.strings.suffix+=v(this.citation.opt.layout_suffix))}}if(J.length&&"string"==typeof p[0]){p.reverse();var Q=p.pop();Q&&","===Q.slice(0,1)?J.push(Q):"string"==typeof J.slice(-1)[0]&&","===J.slice(-1)[0].slice(-1)?J.push(" "+Q):Q&&J.push(v(this.tmp.splice_delimiter)+Q)}else p.reverse(),void 0!==(c=p.pop())&&(J.length&&"string"==typeof J[J.length-1]&&(J[J.length-1]+=c.successor_prefix),J.push(c));for(g=0,d=p.length;g<d;g+=1){if("string"==typeof(b=p[g])){J.push(v(this.tmp.splice_delimiter)+b);continue}void 0!==(c=p.pop())&&J.push(c)}0===J.length&&t[a][1]["suppress-author"],J.length>1&&"string"!=typeof J[0]&&(J=[this.output.renderBlobs(J)]),J.length&&("string"==typeof J[0]?a>0&&(J[0]=v(this.tmp.splice_delimiter)+J[0]):a>0?J[0].splice_prefix=this.tmp.splice_delimiter:J[0].splice_prefix=""),r=r.concat(J)}if((i+=this.output.renderBlobs(r))&&!this.tmp.suppress_decorations)for(a=0,n=this.citation.opt.layout_decorations.length;a<n;a+=1)"normal"!==(u=this.citation.opt.layout_decorations[a])[1]&&(o&&o["author-only"]||(i=this.fun.decorate[u[0]][u[1]](this,i)));return this.tmp.suppress_decorations=!1,i||(this.opt.development_extensions.throw_on_empty?f.error("Citation would render no content"):i="[NO_PRINTED_FORM]"),i},f.getCite=function(t,e,i,r){var s,n,a=this.tmp.area;for(e&&e["author-only"]&&this.intext&&this.intext.tokens.length>0&&(this.tmp.area="intext"),this.tmp.cite_renders_content=!1,this.tmp.probably_rendered_something=!1,this.tmp.prevItemID=i,f.citeStart.call(this,t,e,r),s=0,this.tmp.name_node={},this.nameOutput=new f.NameOutput(this,t,e);s<this[this.tmp.area].tokens.length;)s=f.tokenExec.call(this,this[this.tmp.area].tokens[s],t,e);return f.citeEnd.call(this,t,e),this.tmp.cite_renders_content||this.tmp.just_looking||"bibliography"!==this.tmp.area||(n={index:this.tmp.bibliography_pos,itemID:""+t.id,error_code:f.ERROR_NO_RENDERED_FORM},this.tmp.bibliography_errors.push(n)),this.tmp.area=a,""+t.id},f.citeStart=function(t,e,i){if(this.tmp.lang_array=[],t.language){var r=t.language.match(/^([a-zA-Z]+).*/);r&&this.tmp.lang_array.push(r[1].toLowerCase())}if(this.tmp.lang_array.push(this.opt.lang),i||(this.tmp.shadow_numbers={}),this.tmp.disambiguate_count=0,this.tmp.disambiguate_maxMax=0,this.tmp.same_author_as_previous_cite=!1,this.tmp.suppress_decorations?this.tmp.subsequent_author_substitute_ok=!1:this.tmp.subsequent_author_substitute_ok=!0,this.tmp.lastchr="","citation"===this.tmp.area&&this.citation.opt.collapse&&this.citation.opt.collapse.length?this.tmp.have_collapsed=!0:this.tmp.have_collapsed=!1,this.tmp.render_seen=!1,this.tmp.disambig_request&&!this.tmp.disambig_override?this.tmp.disambig_settings=this.tmp.disambig_request:this.registry.registry[t.id]&&!this.tmp.disambig_override?(this.tmp.disambig_request=this.registry.registry[t.id].disambig,this.tmp.disambig_settings=this.registry.registry[t.id].disambig):this.tmp.disambig_settings=new f.AmbigConfig,"citation"!==this.tmp.area)if(this.registry.registry[t.id]){if(this.tmp.disambig_restore=f.cloneAmbigConfig(this.registry.registry[t.id].disambig),"bibliography"===this.tmp.area&&this.tmp.disambig_settings&&this.tmp.disambig_override&&(this.opt["disambiguate-add-names"]&&(this.tmp.disambig_settings.names=this.registry.registry[t.id].disambig.names.slice(),this.tmp.disambig_request&&(this.tmp.disambig_request.names=this.registry.registry[t.id].disambig.names.slice())),this.opt["disambiguate-add-givenname"])){this.tmp.disambig_request=this.tmp.disambig_settings,this.tmp.disambig_settings.givens=this.registry.registry[t.id].disambig.givens.slice(),this.tmp.disambig_request.givens=this.registry.registry[t.id].disambig.givens.slice();for(var s=0,n=this.tmp.disambig_settings.givens.length;s<n;s+=1)this.tmp.disambig_settings.givens[s]=this.registry.registry[t.id].disambig.givens[s].slice();for(var s=0,n=this.tmp.disambig_request.givens.length;s<n;s+=1)this.tmp.disambig_request.givens[s]=this.registry.registry[t.id].disambig.givens[s].slice()}}else this.tmp.disambig_restore=new f.AmbigConfig;this.tmp.names_used=[],this.tmp.nameset_counter=0,this.tmp.years_used=[],this.tmp.names_max.clear(),this.tmp.just_looking||e&&"first"!==e.parallel&&e.parallel||(this.tmp.abbrev_trimmer={QUASHES:{}}),this.tmp.splice_delimiter=this[this.tmp.area].opt.layout_delimiter,this.bibliography_sort.keys=[],this.citation_sort.keys=[],this.tmp.has_done_year_suffix=!1,this.tmp.last_cite_locale=!1,!this.tmp.just_looking&&e&&!e.position&&this.registry.registry[t.id]&&(this.tmp.disambig_restore=f.cloneAmbigConfig(this.registry.registry[t.id].disambig)),this.tmp.first_name_string=!1,this.tmp.authority_stop_last=0},f.citeEnd=function(t,e){if(this.tmp.disambig_restore&&this.registry.registry[t.id]){this.registry.registry[t.id].disambig.names=this.tmp.disambig_restore.names.slice(),this.registry.registry[t.id].disambig.givens=this.tmp.disambig_restore.givens.slice();for(var i=0,r=this.registry.registry[t.id].disambig.givens.length;i<r;i+=1)this.registry.registry[t.id].disambig.givens[i]=this.tmp.disambig_restore.givens[i].slice()}if(this.tmp.disambig_restore=!1,e&&e.suffix?this.tmp.last_suffix_used=e.suffix:this.tmp.last_suffix_used="",this.tmp.last_years_used=this.tmp.years_used.slice(),this.tmp.last_names_used=this.tmp.names_used.slice(),this.tmp.cut_var=!1,this.tmp.disambig_request=!1,this.tmp.cite_locales.push(this.tmp.last_cite_locale),this.tmp.issued_date&&this.tmp.renders_collection_number){for(var s=[],i=this.tmp.issued_date.list.length-1;i>this.tmp.issued_date.pos;i+=-1)s.push(this.tmp.issued_date.list.pop());for(this.tmp.issued_date.list.pop(),i=s.length-1;i>-1;i+=-1)this.tmp.issued_date.list.push(s.pop())}this.tmp.issued_date=!1,this.tmp.renders_collection_number=!1},f.Engine.prototype.makeBibliography=function(t){if(!t&&(this.bibliography.opt.exclude_types||this.bibliography.opt.exclude_with_fields)){if(t={exclude:[]},this.bibliography.opt.exclude_types)for(var e in this.bibliography.opt.exclude_types){var i,r,s,n,a,o,l,u=this.bibliography.opt.exclude_types[e];t.exclude.push({field:"type",value:u})}if(this.bibliography.opt.exclude_with_fields)for(var e in this.bibliography.opt.exclude_with_fields){var p=this.bibliography.opt.exclude_with_fields[e];t.exclude.push({field:p,value:!0})}}if(!this.bibliography.tokens.length)return!1;"string"==typeof t&&(this.opt.citation_number_slug=t,t=!1),o=(i=f.getBibliographyEntries.call(this,t))[0],l=i[1];var c=i[2];for(r={maxoffset:0,entryspacing:this.bibliography.opt["entry-spacing"],linespacing:this.bibliography.opt["line-spacing"],"second-field-align":!1,entry_ids:o,bibliography_errors:this.tmp.bibliography_errors.slice(),done:c},this.bibliography.opt["second-field-align"]&&(r["second-field-align"]=this.bibliography.opt["second-field-align"]),a=0,n=this.registry.reflist.length;a<n;a+=1)(s=this.registry.reflist[a]).offset>r.maxoffset&&(r.maxoffset=s.offset);return this.bibliography.opt.hangingindent&&(r.hangingindent=this.bibliography.opt.hangingindent),r.bibstart=this.fun.decorate.bibstart,r.bibend=this.fun.decorate.bibend,this.opt.citation_number_slug=!1,[r,l]},f.getBibliographyEntries=function(t){function e(t,e){if("boolean"!=typeof t&&t)if("string"==typeof e)return t===e;else{if(!e)return!1;for(h=0,c=e.length;h<c;h+=1)if(t===e[h])return!0;return!1}return t?!!e:!e}if(i=[],w=[],this.tmp.area="bibliography",this.tmp.root="bibliography",this.tmp.last_rendered_name=!1,this.tmp.bibliography_errors=[],this.tmp.bibliography_pos=0,r=t&&t.page_start&&t.page_length?this.registry.getSortedIds():this.refetchItems(this.registry.getSortedIds()),this.tmp.disambig_override=!0,_={},t&&t.page_start&&t.page_length&&(T=0,!0!==t.page_start))for(b=0,y=r.length;b<y&&(_[r[b]]=!0,t.page_start!=r[b]);b+=1);var i,r,s,n,a,o,l,u,p,c,h,m,d,g,b,y,v,_,k,w,x,E,T,O=[],A={};for(b=0,this.tmp.container_item_count={},r=r.filter(t=>{var e=t;return t.legislation_id?A[t.legislation_id]?e=!1:A[t.legislation_id]=!0:t.container_id&&(this.tmp.container_item_count[t.container_id]||(this.tmp.container_item_count[t.container_id]=0),this.tmp.container_item_count[t.container_id]++,this.bibliography.opt.consolidate_containers.indexOf(t.type)>-1&&(A[t.container_id]?e=!1:A[t.container_id]=!0)),e}),this.tmp.container_item_pos={},y=r.length;b<y;b+=1){if(t&&t.page_start&&t.page_length){if(_[r[b]])continue;if(u=this.refetchItem(r[b]),T===t.page_length)break}else if(_[(u=r[b]).id])continue;if(t){if(s=!0,t.include){for(x=0,s=!1,E=t.include.length;x<E;x+=1)if(e((p=t.include[x]).value,u[p.field])){s=!0;break}}else if(t.exclude){for(x=0,n=!1,E=t.exclude.length;x<E;x+=1)if(e((p=t.exclude[x]).value,u[p.field])){n=!0;break}n&&(s=!1)}else if(t.select){for(x=0,s=!1,a=!0,E=t.select.length;x<E;x+=1)e((p=t.select[x]).value,u[p.field])||(a=!1);a&&(s=!0)}if(t.quash){for(x=0,a=!0,E=t.quash.length;x<E;x+=1)e((p=t.quash[x]).value,u[p.field])||(a=!1);a&&(s=!1)}if(!s)continue}if(g&&f.debug("BIB: "+u.id),u.container_id&&(this.tmp.container_item_pos[u.container_id]||(this.tmp.container_item_pos[u.container_id]=0),this.tmp.container_item_pos[u.container_id]++),(o=new f.Token("group",f.START)).decorations=[["@bibliography","entry"]].concat(this.bibliography.opt.layout_decorations),this.output.startTag("bib_entry",o),u.system_id&&this.sys.embedBibliographyEntry?this.output.current.value().item_id=u.system_id:this.output.current.value().system_id=u.id,d=[],this.registry.registry[u.id].master&&!(t&&t.page_start&&t.page_length)){k=[[u,{id:u.id}]],v=this.registry.registry[u.id].siblings;for(var x=0,E=v.length;x<E;x++)k.push([this.refetchItem(v[x]),{id:v[x]}]);for(this.parallel.StartCitation(k),this.registry.registry[u.id].parallel_delimiter_override?this.output.queue[0].strings.delimiter=this.registry.registry[u.id].parallel_delimiter_override:this.output.queue[0].strings.delimiter=", ",this.tmp.term_predecessor=!1,this.tmp.cite_index=0,x=0,E=k.length;x<E;x+=1)x<k.length-1?this.tmp.parallel_and_not_last=!0:delete this.tmp.parallel_and_not_last,d.push(""+f.getCite.call(this,k[x][0],k[x][1])),this.tmp.cite_index++,_[k[x][0].id]=!0}else!this.registry.registry[u.id].siblings&&(this.tmp.term_predecessor=!1,this.tmp.cite_index=0,d.push(""+f.getCite.call(this,u)),t&&t.page_start&&t.page_length&&(T+=1));for(w.push(""),this.tmp.bibliography_pos+=1,O.push(d),this.output.endTag("bib_entry"),this.output.queue[0].blobs.length&&this.output.queue[0].blobs[0].blobs.length&&((m=this.output.queue[0].blobs[0].blobs[0].strings?this.output.queue[0].blobs[0].blobs:this.output.queue[0].blobs)[0].strings.prefix=this.bibliography.opt.layout_prefix+m[0].strings.prefix),x=0,E=this.output.queue.length;x<E;x+=1)f.Output.Queue.purgeEmptyBlobs(this.output.queue[x]);for(x=0,E=this.output.queue.length;x<E;x+=1)this.output.adjust.upward(this.output.queue[x]),this.output.adjust.leftward(this.output.queue[x]),this.output.adjust.downward(this.output.queue[x],!0),this.output.adjust.fix(this.output.queue[x]);if(!(l=this.output.string(this,this.output.queue)[0])&&this.opt.update_mode===f.NUMERIC){var S=i.length+1+". [CSL STYLE ERROR: reference with no printed form.]";l=f.Output.Formats[this.opt.mode]["@bibliography/entry"](this,S)}l&&i.push(l)}var I=!1;if(t&&t.page_start&&t.page_length){var j=r.slice(-1)[0],C=O.slice(-1)[0];j&&C&&j!=C||(I=!0)}return this.tmp.disambig_override=!1,[O,i,I]},f.Engine.prototype.setCitationId=function(t,e){var i,r,s;if(i=!1,!t.citationID||e){for(r=Math.floor(1e14*Math.random());;){if(s=0,this.registry.citationreg.citationById[r])s=!s&&r<5e13?1:-1;else{t.citationID="a"+r.toString(32);break}1===s?r+=1:r+=-1}i=""+r}return this.registry.citationreg.citationById[t.citationID]=t,i},f.Engine.prototype.rebuildProcessorState=function(t,e,i){t||(t=[]),e||(e="html");for(var r={},s=[],n=0,a=t.length;n<a;n+=1)for(var o=0,l=t[n].citationItems.length;o<l;o+=1){var u=""+t[n].citationItems[o].id;r[u]||s.push(u),r[u]=!0}this.updateItems(s);var p=[],c=[],h=[],m=this.opt.mode;this.setOutputFormat(e);for(var n=0,a=t.length;n<a;n+=1){var d=this.processCitationCluster(t[n],p,c,f.ASSUME_ALL_ITEMS_REGISTERED);p.push([t[n].citationID,t[n].properties.noteIndex]);for(var o=0,l=d[1].length;o<l;o+=1){var g=d[1][o][0];h[g]=[p[g][0],p[g][1],d[1][o][1]]}}return this.updateUncitedItems(i),this.setOutputFormat(m),h},f.Engine.prototype.restoreProcessorState=function(t){t||(t=[]);var e,i,r,s,n,a,o,l,u=[],p=[],c=[],h={};for(e=0,i=t.length;e<i;e+=1)h[t[e].citationID]&&this.setCitationId(t[e],!0),h[t[e].citationID]=!0,c.push(t[e].properties.index);var m=t.slice();for(m.sort(function(t,e){return t.properties.index<e.properties.index?-1:+(t.properties.index>e.properties.index)}),e=0,i=m.length;e<i;e+=1)m[e].properties.index=e;for(e=0,i=m.length;e<i;e+=1){for(r=0,l=[],s=m[e].citationItems.length;r<s;r+=1)void 0===(n=m[e].citationItems[r]).sortkeys&&(n.sortkeys=[]),o=[a=this.retrieveItem(""+n.id),n],l.push(o),m[e].citationItems[r].item=a,p.push(""+n.id);m[e].properties.unsorted||l.sort(this.citation.srt.compareCompositeKeys),m[e].sortedItems=l,this.registry.citationreg.citationById[m[e].citationID]=m[e]}for(this.updateItems(p),e=0,i=t.length;e<i;e+=1)u.push([""+t[e].citationID,t[e].properties.noteIndex]);var d=[];return t&&t.length?d=this.processCitationCluster(t[0],[],u.slice(1)):(this.registry=new f.Registry(this),this.tmp=new f.Engine.Tmp,this.disambiguate=new f.Disambiguation(this)),d},f.Engine.prototype.updateItems=function(t,e,i,r){var s=this.tmp.area,n=this.tmp.root,a=this.tmp.extension;if(0===this.bibliography_sort.tokens.length&&(e=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",r||(this.tmp.loadedItemIDs={}),this.registry.init(t),i)for(var o in this.registry.ambigcites)this.registry.ambigsTouched[o]=!0;return this.registry.dodeletes(this.registry.myhash),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(e),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(e),this.registry.renumber(),this.tmp.extension=a,this.tmp.area=s,this.tmp.root=n,this.registry.getSortedIds()},f.Engine.prototype.updateUncitedItems=function(t,e){var i,r=this.tmp.area,s=this.tmp.root,n=this.tmp.extension;if(0===this.bibliography_sort.tokens.length&&(e=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",this.tmp.loadedItemIDs={},t||(t=[]),"object"==typeof t){if(void 0===t.length)for(var a in i=t,t=[],i)t.push(a);else if("number"==typeof t.length){i={};for(var o=0,l=t.length;o<l;o+=1)i[t[o]]=!0}}return this.registry.init(t,!0),this.registry.dopurge(i),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(e),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(e),this.registry.renumber(),this.tmp.extension=n,this.tmp.area=r,this.tmp.root=s,this.registry.getSortedIds()},f.localeResolve=function(t,e){var i,r;return(e||(e="en-US"),t||(t=e),i={},r=t.split(/[\-_]/),i.base=f.LANG_BASES[r[0]],void 0===i.base)?{base:e,best:t,bare:r[0]}:(1===r.length&&(i.generic=!0),1===r.length||"x"===r[1]?i.best=i.base.replace("_","-"):i.best=r.slice(0,2).join("-"),i.base=i.base.replace("_","-"),i.bare=r[0],i)},f.Engine.prototype.localeConfigure=function(t,e){var i;if((!e||!this.locale[t.best])&&("en-US"===t.best?(i=f.setupXml(this.sys.retrieveLocale("en-US")),this.localeSet(i,"en-US",t.best)):"en-US"!==t.best&&(t.base!==t.best&&(i=f.setupXml(this.sys.retrieveLocale(t.base)),this.localeSet(i,t.base,t.best)),i=f.setupXml(this.sys.retrieveLocale(t.best)),this.localeSet(i,t.best,t.best)),this.localeSet(this.cslXml,"",t.best),this.localeSet(this.cslXml,t.bare,t.best),t.base!==t.best&&this.localeSet(this.cslXml,t.base,t.best),this.localeSet(this.cslXml,t.best,t.best),void 0===this.locale[t.best].terms["page-range-delimiter"]&&(["fr","pt"].indexOf(t.best.slice(0,2).toLowerCase())>-1?this.locale[t.best].terms["page-range-delimiter"]="-":this.locale[t.best].terms["page-range-delimiter"]="–"),void 0===this.locale[t.best].terms["year-range-delimiter"]&&(this.locale[t.best].terms["year-range-delimiter"]="–"),void 0===this.locale[t.best].terms["citation-range-delimiter"]&&(this.locale[t.best].terms["citation-range-delimiter"]="–"),this.opt.development_extensions.normalize_lang_keys_to_lowercase)){for(var r=["default-locale","locale-sort","locale-translit","locale-translat"],s=0,n=r.length;s<n;s+=1)for(var a=0,o=this.opt[r[s]].length;a<o;a+=1)this.opt[r[s]][a]=this.opt[r[s]][a].toLowerCase();this.opt.lang=this.opt.lang.toLowerCase()}},f.Engine.prototype.localeSet=function(t,e,i){if(e=e.replace("_","-"),i=i.replace("_","-"),this.opt.development_extensions.normalize_lang_keys_to_lowercase&&(e=e.toLowerCase(),i=i.toLowerCase()),this.locale[i]||(this.locale[i]={},this.locale[i].terms={},this.locale[i].opts={},this.locale[i].opts["skip-words"]=f.SKIP_WORDS,this.locale[i].opts["leading-noise-words"]||(this.locale[i].opts["leading-noise-words"]=[]),this.locale[i].dates={},this.locale[i].ord={"1.0.1":!1,keys:{}},this.locale[i]["noun-genders"]={}),s=t.makeXml(),t.nodeNameIs(t.dataObj,"locale"))s=t.dataObj;else{var r,s,n,a,o,l,u,p,c,h,m,d,g,b,y,v=t.getNodesByName(t.dataObj,"locale"),_=!1;for(a=0,m=t.numberofnodes(v);a<m;a+=1)if(r=v[a],_||t.getAttributeValue(r,"lang","xml")!==e){var k=t.getAttributeValue(r,"lang","xml"),w=t.getNodesByName(r,"style-options");if(k&&w&&w.length){var x=t.getAttributeValue(w[0],"jurisdiction-preference");x&&(this.locale[k]||(this.locale[k]={opts:{}}),this.locale[k].opts["jurisdiction-preference"]=x.split(/\s+/))}}else s=r,_=!0}for(b=0,v=t.getNodesByName(s,"type"),y=t.numberofnodes(v);b<y;b+=1){var E=v[b],T=t.getAttributeValue(E,"name"),O=t.getAttributeValue(E,"gender");this.opt.gender[T]=O}if(t.getNodesByName(s,"term","ordinal").length){for(var A in this.locale[i].ord.keys)delete this.locale[i].terms[A];this.locale[i].ord={"1.0.1":!1,keys:{}}}v=t.getNodesByName(s,"term");var S={"last-digit":{},"last-two-digits":{},"whole-number":{}},I=!1,j={};for(a=0,m=t.numberofnodes(v);a<m;a+=1){if(o=v[a],"sub verbo"===(u=t.getAttributeValue(o,"name"))&&(u="sub-verbo"),"ordinal"===u.slice(0,7)){if("ordinal"===u)I=!0;else{var C=t.getAttributeValue(o,"match"),N=u.slice(8),d=t.getAttributeValue(o,"gender-form");d||(d="neuter"),C||(C="last-two-digits","0"===N.slice(0,1)&&(C="last-digit")),"0"===N.slice(0,1)&&(N=N.slice(1)),S[C][N]||(S[C][N]={}),S[C][N][d]=u}this.locale[i].ord.keys[u]=!0}void 0===this.locale[i].terms[u]&&(this.locale[i].terms[u]={}),l="long",d=!1,t.getAttributeValue(o,"form")&&(l=t.getAttributeValue(o,"form")),t.getAttributeValue(o,"gender-form")&&(d=t.getAttributeValue(o,"gender-form")),t.getAttributeValue(o,"gender")&&(this.locale[i]["noun-genders"][u]=t.getAttributeValue(o,"gender")),d?(this.locale[i].terms[u][d]={},this.locale[i].terms[u][d][l]=[],g=this.locale[i].terms[u][d],j[u]=!0):(this.locale[i].terms[u][l]=[],g=this.locale[i].terms[u]),t.numberofnodes(t.getNodesByName(o,"multiple"))?(g[l][0]=t.getNodeValue(o,"single"),g[l][0].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0),g[l][1]=t.getNodeValue(o,"multiple"),g[l][1].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0)):(g[l]=t.getNodeValue(o),g[l].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0))}if(this.locale[i].terms.supplement||(this.locale[i].terms.supplement={}),this.locale[i].terms.supplement.long||(this.locale[i].terms.supplement.long=["supplement","supplements"]),I){for(var P in j){var D={},R=0;for(var L in this.locale[i].terms[P])["masculine","feminine"].indexOf(L)>-1?D[L]=this.locale[i].terms[P][L]:R+=1;if(!R){if(D.feminine)for(var L in D.feminine)this.locale[i].terms[P][L]=D.feminine[L];else if(D.masculine)for(var L in D.masculine)this.locale[i].terms[P][L]=D.masculine[L]}}this.locale[i].ord["1.0.1"]=S}for(u in this.locale[i].terms)for(b=0,y=2;b<y;b+=1)if(d=f.GENDERS[b],this.locale[i].terms[u][d])for(l in this.locale[i].terms[u])this.locale[i].terms[u][d][l]||(this.locale[i].terms[u][d][l]=this.locale[i].terms[u][l]);for(a=0,v=t.getNodesByName(s,"style-options"),m=t.numberofnodes(v);a<m;a+=1)for(h in p=v[a],n=t.attributes(p))if(n.hasOwnProperty(h)){if("@punctuation-in-quote"===h||"@limit-day-ordinals-to-day-1"===h)"true"===n[h]?this.locale[i].opts[h.slice(1)]=!0:this.locale[i].opts[h.slice(1)]=!1;else if("@jurisdiction-preference"===h){var B=n[h].split(/\s+/);this.locale[i].opts[h.slice(1)]=B}else if("@skip-words"===h){var F=n[h].split(/\s*,\s*/);this.locale[i].opts[h.slice(1)]=F}else if("@leading-noise-words"===h){var M=n[h].split(/\s*,\s*/);this.locale[i].opts["leading-noise-words"]=M}else if("@name-as-sort-order"===h){this.locale[i].opts["name-as-sort-order"]={};for(var U=n[h].split(/\s+/),b=0,y=U.length;b<y;b+=1)this.locale[i].opts["name-as-sort-order"][U[b]]=!0}else if("@name-as-reverse-order"===h){this.locale[i].opts["name-as-reverse-order"]={};for(var U=n[h].split(/\s+/),b=0,y=U.length;b<y;b+=1)this.locale[i].opts["name-as-reverse-order"][U[b]]=!0}else if("@name-never-short"===h){this.locale[i].opts["name-never-short"]={};for(var U=n[h].split(/\s+/),b=0,y=U.length;b<y;b+=1)this.locale[i].opts["name-never-short"][U[b]]=!0}}for(a=0,v=t.getNodesByName(s,"date"),m=t.numberofnodes(v);a<m;a+=1){var c=v[a];this.locale[i].dates[t.getAttributeValue(c,"form")]=c}f.SET_COURT_CLASSES(this,i,t,s)},f.getLocaleNames=function(t,e){var i=f.setupXml(t);function r(t,e){var i=["base","best"];if(e)for(var r=f.localeResolve(e),s=0,n=i.length;s<n;s++)r[i[s]]&&-1===t.indexOf(r[i[s]])&&t.push(r[i[s]])}var s=["en-US"];r(s,e);var n=i.getNodesByName(i.dataObj,"style")[0];r(s,i.getAttributeValue(n,"default-locale"));for(var a=["layout","if","else-if","condition"],o=0,l=a.length;o<l;o++)!function(t){for(var e=i.getNodesByName(i.dataObj,t),r=0,n=e.length;r<n;r++){var a=i.getAttributeValue(e[r],"locale");if(a){a=a.split(/ +/);for(var o=0,l=a.length;o<l;o++)this.extendLocaleList(s,a[o])}}}(i,s,a[o]);return s},f.Node={},f.Node.bibliography={build:function(t,e){this.tokentype===f.START&&(t.build.area="bibliography",t.build.root="bibliography",t.build.extension="",this.execs.push(function(t){t.tmp.area="bibliography",t.tmp.root="bibliography",t.tmp.extension=""})),e.push(this)}},f.Node.choose={build:function(t,e){var i;this.tokentype===f.START&&(i=function(t){t.tmp.jump.push(void 0,f.LITERAL)}),this.tokentype===f.END&&(i=function(t){t.tmp.jump.pop()}),this.execs.push(i),e.push(this)},configure:function(t,e){this.tokentype===f.END?(t.configure.fail.push(e),t.configure.succeed.push(e)):(t.configure.fail.pop(),t.configure.succeed.pop())}},f.Node.citation={build:function(t,e){if(this.tokentype===f.START&&(t.build.area="citation",t.build.root="citation",t.build.extension="",this.execs.push(function(t){t.tmp.area="citation",t.tmp.root="citation",t.tmp.extension=""})),this.tokentype===f.END){if(t.opt.grouped_sort="in-text"===t.opt.xclass&&t.citation.opt.collapse&&t.citation.opt.collapse.length||t.citation.opt.cite_group_delimiter&&t.citation.opt.cite_group_delimiter.length&&t.opt.update_mode!==f.POSITION&&t.opt.update_mode!==f.NUMERIC,t.opt.grouped_sort&&t.citation_sort.opt.sort_directions.length){var i=t.citation_sort.opt.sort_directions[0].slice();t.citation_sort.opt.sort_directions=[i].concat(t.citation_sort.opt.sort_directions)}t.citation.srt=new f.Registry.Comparifier(t,"citation_sort")}e.push(this)}},f.Node["#comment"]={build:function(){}},f.Node.date={build:function(t,e){var i,r,s,n,a,o,l,u;(this.tokentype===f.START||this.tokentype===f.SINGLETON)&&(t.dateput.string(t,t.dateput.queue),t.tmp.date_token=f.Util.cloneToken(this),t.tmp.date_token.strings.prefix="",t.tmp.date_token.strings.suffix="",t.dateput.openLevel(this),t.build.date_parts=[],t.build.date_variables=this.variables,t.build.extension||f.Util.substituteStart.call(this,t,e),i=t.build.extension?f.dateMacroAsSortKey:function(t,e,i){var p;if(t.tmp.element_rendered_ok=!1,t.tmp.donesies=[],t.tmp.dateparts=[],p=[],this.variables.length&&!(t.tmp.just_looking&&"accessed"===this.variables[0])){for(void 0===(r=e[this.variables[0]])&&(r={"date-parts":[[0]]},t.opt.development_extensions.locator_date_and_revision&&i&&"locator-date"===this.variables[0]&&i["locator-date"]&&(r=i["locator-date"])),t.tmp.date_object=r,s=this.dateparts.length,n=0;n<s;n+=1)a=this.dateparts[n],void 0!==t.tmp.date_object[a+"_end"]?p.push(a):"month"===a&&void 0!==t.tmp.date_object.season_end&&p.push(a);for(n=0,o=[],s=(l=["year","month","day"]).length;n<s;n+=1)p.indexOf(l[n])>-1&&o.push(l[n]);for(n=0,p=o.slice(),u=2,s=p.length;n<s;n+=1)if(a=p[n],t.tmp.date_object[a]!==t.tmp.date_object[a+"_end"]){u=n;break}t.tmp.date_collapse_at=p.slice(u)}else t.tmp.date_object=!1},this.execs.push(i),i=function(t,e){if(e[this.variables[0]]&&(t.output.startTag("date",this),"issued"===this.variables[0]&&("legal_case"===e.type||"legislation"===e.type)&&-1===t.opt.disable_duplicate_year_suppression.indexOf(e.country)&&!t.tmp.extension&&""+e["collection-number"]==""+t.tmp.date_object.year&&1===this.dateparts.length&&"year"===this.dateparts[0])){for(var i in t.tmp.date_object)if(t.tmp.date_object.hasOwnProperty(i)&&"year"===i.slice(0,4)){t.tmp.issued_date={};var r=t.output.current.mystack.slice(-2)[0].blobs;t.tmp.issued_date.list=r,t.tmp.issued_date.pos=r.length-1}}},this.execs.push(i)),t.build.extension||this.tokentype!==f.END&&this.tokentype!==f.SINGLETON||(i=function(t,e){e[this.variables[0]]&&t.output.endTag()},this.execs.push(i)),e.push(this),this.tokentype!==f.END&&this.tokentype!==f.SINGLETON||t.build.extension||f.Util.substituteEnd.call(this,t,e)}},f.Node["date-part"]={build:function(t,e){this.strings.form||(this.strings.form="long"),t.build.date_parts.push(this.strings.name);var i,r,s,n,a,o,l,u,p,c,h,m,d,g,b,y,v,_,k,w=t.build.date_variables[0];function x(e,i,r){if(!r)return r;if(r=""+f.Util.Dates[this.strings.name][e](t,r,i,this.default_locale),"month"===this.strings.name){if(t.tmp.strip_periods)r=r.replace(/\./g,"");else for(var s=0,n=this.decorations.length;s<n;s+=1)if("@strip-periods"===this.decorations[s][0]&&"true"===this.decorations[s][1]){r=r.replace(/\./g,"");break}}return r}this.execs.push(function(t,e){if(t.tmp.date_object){t.tmp.probably_rendered_something=!0;var E="";if(s=!0,n="",a="",t.tmp.donesies.push(this.strings.name),t.tmp.date_object.literal&&"year"===this.strings.name&&(E=t.tmp.date_object.literal,t.output.append(t.tmp.date_object.literal,this)),t.tmp.date_object&&(n=t.tmp.date_object[this.strings.name],a=t.tmp.date_object[this.strings.name+"_end"]),"year"!==this.strings.name||0!==n||t.tmp.suppress_decorations||(n=!1),o=!t.tmp.suppress_decorations,l=t.tmp.have_collapsed,u="year-suffix"===t[t.tmp.area].opt.collapse||"year-suffix-ranged"===t[t.tmp.area].opt.collapse,p=t.opt["disambiguate-add-year-suffix"],o&&p&&u&&(t.tmp.years_used.push(n),t.tmp.last_years_used.length>=t.tmp.years_used.length&&l&&t.tmp.last_years_used[t.tmp.years_used.length-1]===n&&(n=!1)),void 0!==n){c=!1,h=!1,"year"===this.strings.name&&(500>parseInt(n,10)&&parseInt(n,10)>0&&(h=t.getTerm("ad")),0>parseInt(n,10)&&(c=t.getTerm("bc"),n=-1*parseInt(n,10)),a&&(500>parseInt(a,10)&&parseInt(a,10)>0&&t.getTerm("ad"),0>parseInt(a,10)&&(t.getTerm("bc"),a=-1*parseInt(a,10))));for(var T=""+t.tmp.date_object.month;T.length<2;)T="0"+T;T="month-"+T;var O=t.locale[t.opt.lang]["noun-genders"][T];if(this.strings.form){var A=this.strings.form,S=this.strings.form;"day"===this.strings.name&&"ordinal"===A&&t.locale[t.opt.lang].opts["limit-day-ordinals-to-day-1"]&&(1!=n&&(A="numeric"),1!=a&&(S="numeric")),n=x.call(this,A,O,n),a=x.call(this,S,O,a)}if(t.output.openLevel("empty"),t.tmp.date_collapse_at.length){for(i=0,m=!0,r=t.tmp.date_collapse_at.length;i<r;i+=1)if(_=t.tmp.date_collapse_at[i],-1===t.tmp.donesies.indexOf(_)){m=!1;break}if(m){if(""+a!="0"){if(0===t.dateput.queue.length&&(s=!0),t.opt["year-range-format"]&&"expanded"!==t.opt["year-range-format"]&&!t.tmp.date_object.day&&!t.tmp.date_object.month&&!t.tmp.date_object.season&&"year"===this.strings.name&&n&&a){a=t.fun.year_mangler(n+"-"+a,!0);var I=t.getTerm("year-range-delimiter");a=a.slice(a.indexOf(I)+1)}E=a,t.dateput.append(a,this),s&&(k=t.dateput.current.value().blobs[0])&&(k.strings.prefix="")}E=n,t.output.append(n,this),(k=(d=t.output.current.value()).blobs[d.blobs.length-1])&&(k.strings.suffix=""),this.strings["range-delimiter"]?t.output.append(this.strings["range-delimiter"]):t.output.append(t.getTerm("year-range-delimiter"),"empty"),t.dateput.closeLevel(),g=t.dateput.current.value(),d.blobs=d.blobs.concat(g),t.dateput.string(t,t.dateput.queue),t.dateput.openLevel(t.tmp.date_token),t.tmp.date_collapse_at=[]}else E=n,t.output.append(n,this),t.tmp.date_collapse_at.indexOf(this.strings.name)>-1&&""+a!="0"&&(0===t.dateput.queue.length&&(s=!0),t.dateput.openLevel("empty"),E=a,t.dateput.append(a,this),s&&(k=t.dateput.current.value().blobs[0])&&(k.strings.prefix=""),c&&(E=c,t.dateput.append(c)),h&&(E=h,t.dateput.append(h)),t.dateput.closeLevel())}else E=n,t.output.append(n,this);c&&(E=c,t.output.append(c)),h&&(E=h,t.output.append(h)),t.output.closeLevel()}else"month"===this.strings.name&&t.tmp.date_object.season&&((n=""+t.tmp.date_object.season)&&n.match(/^[1-4]$/)?(t.tmp.group_context.tip.variable_success=!0,E="winter",t.output.append(t.getTerm("season-0"+n),this)):n&&(E=n,t.output.append(n,this)));t.tmp.value=[],e[w]&&(n||t.tmp.have_collapsed)&&!t.opt.has_year_suffix&&"year"===this.strings.name&&!t.tmp.just_looking&&t.registry.registry[e.id]&&!1!==t.registry.registry[e.id].disambig.year_suffix&&!t.tmp.has_done_year_suffix&&(t.tmp.has_done_year_suffix=!0,E="x",y=parseInt(t.registry.registry[e.id].disambig.year_suffix,10),b=new f.NumericBlob(t,!1,y,this,e.id),this.successor_prefix=t[t.build.area].opt.layout_delimiter,this.splice_prefix=t[t.build.area].opt.layout_delimiter,v=new f.Util.Suffixator(f.SUFFIX_CHARS),b.setFormatter(v),"year-suffix-ranged"===t[t.tmp.area].opt.collapse&&(b.range_prefix=t.getTerm("citation-range-delimiter")),t[t.tmp.area].opt.cite_group_delimiter?b.successor_prefix=t[t.tmp.area].opt.cite_group_delimiter:t[t.tmp.area].opt["year-suffix-delimiter"]?b.successor_prefix=t[t.tmp.area].opt["year-suffix-delimiter"]:b.successor_prefix=t[t.tmp.area].opt.layout_delimiter,b.UGLY_DELIMITER_SUPPRESS_HACK=!0,t.output.append(b,"literal")),E&&!t.tmp.group_context.tip.condition&&(t.tmp.just_did_number=E.match(/[0-9]$/),t.output.current.tip.strings.suffix&&(t.tmp.just_did_number=!1))}}),e.push(this)}},f.Node["else-if"]={build:function(t,e){f.Conditions.TopNode.call(this,t,e),e.push(this)},configure:function(t,e){f.Conditions.Configure.call(this,t,e)}},f.Node.else={build:function(t,e){e.push(this)},configure:function(t,e){this.tokentype===f.START&&(t.configure.fail[t.configure.fail.length-1]=e)}},f.Node["et-al"]={build:function(t,e){("citation"===t.build.area||"bibliography"===t.build.area)&&this.execs.push(function(t){t.tmp.etal_node=this,"string"==typeof this.strings.term&&(t.tmp.etal_term=this.strings.term)}),e.push(this)}},f.Node.group={build:function(t,e,i){var r,s;if(this.realGroup=i,this.tokentype===f.START&&(f.Util.substituteStart.call(this,t,e),t.build.substitute_level.value()&&t.build.substitute_level.replace(t.build.substitute_level.value()+1),this.juris||e.push(this),r=function(t){if(t.output.startTag("group",this),this.strings.label_form_override&&!t.tmp.group_context.tip.label_form&&(t.tmp.group_context.tip.label_form=this.strings.label_form_override),this.strings.label_capitalize_if_first_override&&!t.tmp.group_context.tip.label_capitalize_if_first&&(t.tmp.group_context.tip.label_capitalize_if_first=this.strings.label_capitalize_if_first_override),this.realGroup){t.tmp.group_context.tip.condition&&f.UPDATE_GROUP_CONTEXT_CONDITION(t,this.strings.prefix,null,this);var e=!1,i=!1;t.tmp.group_context.mystack.length&&(t.output.current.value().parent=t.tmp.group_context.tip.output_tip);var r=t.tmp.group_context.tip.label_form;r||(r=this.strings.label_form_override);var s=t.tmp.group_context.tip.label_capitalize_if_first;s||(s=this.strings.label_capitalize_if_first),t.tmp.group_context.tip.condition?(e=t.tmp.group_context.tip.condition,i=t.tmp.group_context.tip.force_suppress):this.strings.reject?e={test:this.strings.reject,not:!0}:this.strings.require&&(e={test:this.strings.require,not:!1});var n={old_term_predecessor:t.tmp.term_predecessor,term_intended:!1,variable_attempt:!1,variable_success:!1,variable_success_parent:t.tmp.group_context.tip.variable_success,output_tip:t.output.current.tip,label_form:r,label_static:t.tmp.group_context.tip.label_static,label_capitalize_if_first:s,parallel_delimiter_override:this.strings.set_parallel_delimiter_override,parallel_delimiter_override_on_suppress:this.strings.set_parallel_delimiter_override_on_suppress,condition:e,force_suppress:i,done_vars:t.tmp.group_context.tip.done_vars.slice()};if(this.non_parallel){var a=t.tmp.group_context.tip.non_parallel;a||(a={}),Object.assign(a,this.non_parallel),n.non_parallel=a}if(this.parallel_first){var o=t.tmp.group_context.tip.parallel_first;o||(o={}),Object.assign(o,this.parallel_first),n.parallel_first=o}if(this.parallel_last){var l=t.tmp.group_context.tip.parallel_last;l||(l={}),Object.assign(l,this.parallel_last),n.parallel_last=l}if(t.tmp.abbrev_trimmer&&t.tmp.abbrev_trimmer.LAST_TO_FIRST&&n.parallel_last)for(var u in n.parallel_first||(n.parallel_first={}),t.tmp.abbrev_trimmer.LAST_TO_FIRST)n.parallel_last[u]&&(n.parallel_first[u]=!0,delete n.parallel_last[u]);if(t.tmp.group_context.push(n),t.tmp.abbrev_trimmer&&this.parallel_last_to_first)for(var u in t.tmp.abbrev_trimmer.LAST_TO_FIRST||(t.tmp.abbrev_trimmer.LAST_TO_FIRST={}),this.parallel_last_to_first)t.tmp.abbrev_trimmer.LAST_TO_FIRST[u]=!0}},(s=[]).push(r),this.execs=s.concat(this.execs),this.strings["has-publisher-and-publisher-place"]&&(t.build["publisher-special"]=!0,this.strings["subgroup-delimiter"]&&(r=function(t,e){if(e.publisher&&e["publisher-place"]){var i=e.publisher.split(/;\s*/),r=e["publisher-place"].split(/;\s*/);i.length>1&&i.length===r.length&&(t.publisherOutput=new f.PublisherOutput(t,this),t.publisherOutput["publisher-list"]=i,t.publisherOutput["publisher-place-list"]=r)}},this.execs.push(r))),this.juris)){var n,a=new f.Token("choose",f.START);f.Node.choose.build.call(a,t,e);var o=new f.Token("if",f.START);n=this.juris,r=function(e,i){return f.INIT_JURISDICTION_MACROS(t,e,i,n)},o.tests||(o.tests=[]),o.tests.push(r),o.test=t.fun.match.any(o,t,o.tests),e.push(o);var l=new f.Token("text",f.SINGLETON);r=function(t,e,i){var r=e;i&&i["best-jurisdiction"]&&"juris-locator"===this.juris&&(r=i);var s=0;if(t.juris[r["best-jurisdiction"]][this.juris])for(;s<t.juris[r["best-jurisdiction"]][this.juris].length;)s=f.tokenExec.call(t,t.juris[r["best-jurisdiction"]][this.juris][s],e,i)},l.juris=this.juris,l.execs.push(r),e.push(l);var u=new f.Token("if",f.END);f.Node.if.build.call(u,t,e);var p=new f.Token("else",f.START);f.Node.else.build.call(p,t,e)}if(this.tokentype===f.END&&(t.build["publisher-special"]&&(t.build["publisher-special"]=!1,r=function(t){t.publisherOutput&&(t.publisherOutput.render(),t.publisherOutput=!1)},this.execs.push(r)),r=function(t,e,i){if(!t.tmp.group_context.tip.condition&&t.output.current.tip.strings.suffix&&(t.tmp.just_did_number=!1),t.output.endTag(),this.realGroup){var r=t.tmp.group_context.pop();if(r.parallel_delimiter_override&&(t.tmp.group_context.tip.parallel_delimiter_override=r.parallel_delimiter_override,!t.tmp.just_looking&&t.registry.registry[e.id].master&&(t.registry.registry[e.id].parallel_delimiter_override=r.parallel_delimiter_override)),r.parallel_delimiter_override_on_suppress&&(t.tmp.group_context.tip.parallel_delimiter_override_on_suppress=r.parallel_delimiter_override_on_suppress),"bibliography_sort"===t.tmp.area){var s=r.done_vars.indexOf("citation-number");this.strings.sort_direction&&s>-1&&1==t.tmp.group_context.length()&&(this.strings.sort_direction===f.DESCENDING?t.bibliography_sort.opt.citation_number_sort_direction=f.DESCENDING:t.bibliography_sort.opt.citation_number_sort_direction=f.ASCENDING,r.done_vars=r.done_vars.slice(0,s).concat(r.done_vars.slice(s+1)))}if(r.condition&&(r.force_suppress=f.EVALUATE_GROUP_CONDITION(t,r)),t.tmp.group_context.tip.condition&&(t.tmp.group_context.tip.force_suppress=r.force_suppress),!r.force_suppress&&(r.variable_success||r.term_intended&&!r.variable_attempt)){this.isJurisLocatorLabel||(t.tmp.group_context.tip.variable_success=!0);var n=t.output.current.value().blobs;if(t.output.current.value().blobs.length,!t.tmp.just_looking&&(r.non_parallel||r.parallel_last||r.parallel_first||r.parallel_delimiter_override||r.parallel_delimiter_override_on_suppress)){var a=t.parallel.checkRepeats(r);if(a&&n&&n.pop(),t.tmp.cite_index>0&&(a||!r.parallel_first&&!r.parallel_last&&!r.non_parallel)){var o=t.tmp.suppress_repeats[t.tmp.cite_index-1];a&&r.parallel_delimiter_override_on_suppress&&(o.SIBLING||o.ORPHAN)?t.output.queue.slice(-1)[0].parallel_delimiter=r.parallel_delimiter_override_on_suppress:r.parallel_delimiter_override&&o.SIBLING&&(t.output.queue.slice(-1)[0].parallel_delimiter=r.parallel_delimiter_override)}}}else{if(t.tmp.term_predecessor=r.old_term_predecessor,t.tmp.group_context.tip.variable_attempt=r.variable_attempt,r.force_suppress&&!t.tmp.group_context.tip.condition&&(t.tmp.group_context.tip.variable_attempt=!0,t.tmp.group_context.tip.variable_success=r.variable_success_parent),r.force_suppress)for(var l=0,u=r.done_vars.length;l<u;l++)for(var p=r.done_vars[l],c=0,h=t.tmp.done_vars.length;c<h;c++)t.tmp.done_vars[c]===p&&(t.tmp.done_vars=t.tmp.done_vars.slice(0,c).concat(t.tmp.done_vars.slice(c+1)));t.output.current.value().blobs&&t.output.current.value().blobs.pop()}}},this.execs.push(r),this.juris)){var c=new f.Token("else",f.END);f.Node.else.build.call(c,t,e);var h=new f.Token("choose",f.END);f.Node.choose.build.call(h,t,e)}this.tokentype===f.END&&(this.juris||e.push(this),t.build.substitute_level.value()&&t.build.substitute_level.replace(t.build.substitute_level.value()-1),f.Util.substituteEnd.call(this,t,e))}},f.Node.if={build:function(t,e){f.Conditions.TopNode.call(this,t,e),e.push(this)},configure:function(t,e){f.Conditions.Configure.call(this,t,e)}},f.Node.conditions={build:function(t){this.tokentype===f.START&&t.tmp.conditions.addMatch(this.match),this.tokentype===f.END&&t.tmp.conditions.matchCombine()}},f.Node.condition={build:function(t){if(this.tokentype===f.SINGLETON){var e=t.fun.match[this.match](this,t,this.tests);t.tmp.conditions.addTest(e)}}},f.Conditions={},f.Conditions.TopNode=function(t){var e;(this.tokentype===f.START||this.tokentype===f.SINGLETON)&&(this.locale&&(t.opt.lang=this.locale),this.tests&&this.tests.length?this.test=t.fun.match[this.match](this,t,this.tests):t.tmp.conditions=new f.Conditions.Engine(t,this),0===t.build.substitute_level.value()&&(e=function(t){t.tmp.condition_counter++},this.execs.push(e))),(this.tokentype===f.END||this.tokentype===f.SINGLETON)&&(0===t.build.substitute_level.value()&&(e=function(t){t.tmp.condition_counter--,t.tmp.condition_lang_counter_arr.length>0&&t.tmp.condition_lang_counter_arr.slice(-1)[0]===t.tmp.condition_counter&&(t.opt.lang=t.tmp.condition_lang_val_arr.pop(),t.tmp.condition_lang_counter_arr.pop()),this.locale_default&&(t.output.current.value().old_locale=this.locale_default,t.output.closeLevel("empty"),t.opt.lang=this.locale_default)},this.execs.push(e)),e=function(t){return this[t.tmp.jump.value()]},this.execs.push(e),this.locale_default&&(t.opt.lang=this.locale_default))},f.Conditions.Configure=function(t,e){this.tokentype===f.START?(this.fail=t.configure.fail.slice(-1)[0],this.succeed=this.next,t.configure.fail[t.configure.fail.length-1]=e):this.tokentype===f.SINGLETON?(this.fail=this.next,this.succeed=t.configure.succeed.slice(-1)[0],t.configure.fail[t.configure.fail.length-1]=e):(this.succeed=t.configure.succeed.slice(-1)[0],this.fail=this.next)},f.Conditions.Engine=function(t,e){this.token=e,this.state=t},f.Conditions.Engine.prototype.addTest=function(t){this.token.tests||(this.token.tests=[]),this.token.tests.push(t)},f.Conditions.Engine.prototype.addMatch=function(t){this.token.match=t},f.Conditions.Engine.prototype.matchCombine=function(){this.token.test=this.state.fun.match[this.token.match](this.token,this.state,this.token.tests)},f.Node.info={build:function(t){this.tokentype===f.START?t.build.skip="info":t.build.skip=!1}},f.Node.institution={build:function(t,e){[f.SINGLETON,f.START].indexOf(this.tokentype)>-1&&this.execs.push(function(t){"string"==typeof this.strings.delimiter?t.tmp.institution_delimiter=this.strings.delimiter:t.tmp.institution_delimiter=t.tmp.name_delimiter,"text"===t.inheritOpt(this,"and")?this.and_term=t.getTerm("and","long",0):"symbol"===t.inheritOpt(this,"and")?t.opt.development_extensions.expect_and_symbol_form?this.and_term=t.getTerm("and","symbol",0):this.and_term="&":"none"===t.inheritOpt(this,"and")&&(this.and_term=t.tmp.institution_delimiter),void 0===this.and_term&&t.tmp.and_term&&(this.and_term=t.tmp.and_term),f.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof t.tmp.institution_delimiter&&(this.and_prefix_multiple=t.tmp.institution_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===t.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=t.tmp.institution_delimiter:"never"===t.inheritOpt(this,"delimiter-precedes-last")&&this.and_prefix_multiple&&(this.and_prefix_multiple=" "),this.and={},void 0!==this.and_term?(t.output.append(this.and_term,"empty",!0),this.and.single=t.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,t.output.append(this.and_term,"empty",!0),this.and.multiple=t.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):"undefined"!==this.strings.delimiter&&(this.and.single=new f.Blob(t.tmp.institution_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new f.Blob(t.tmp.institution_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),t.nameOutput.institution=this}),e.push(this)},configure:function(t){[f.SINGLETON,f.START].indexOf(this.tokentype)>-1&&(t.build.has_institution=!0)}},f.Node["institution-part"]={build:function(t,e){var i;"long"===this.strings.name?i=this.strings["if-short"]?function(t){t.nameOutput.institutionpart["long-with-short"]=this}:function(t){t.nameOutput.institutionpart.long=this}:"short"===this.strings.name&&(i=function(t){t.nameOutput.institutionpart.short=this}),this.execs.push(i),e.push(this)}},f.Node.key={build:function(t,e){e=t[t.build.root+"_sort"].tokens;var i,r=new f.Token("key",f.START);t.tmp.root=t.build.root,r.strings["et-al-min"]=t.inheritOpt(this,"et-al-min"),r.strings["et-al-use-first"]=t.inheritOpt(this,"et-al-use-first"),r.strings["et-al-use-last"]=t.inheritOpt(this,"et-al-use-last"),i=function(t){t.tmp.done_vars=[]},r.execs.push(i),i=function(t){t.output.openLevel("empty")},r.execs.push(i);var s=[];if(this.strings.sort_direction===f.DESCENDING?(s.push(1),s.push(-1)):(s.push(-1),s.push(1)),t[t.build.area].opt.sort_directions.push(s),f.DATE_VARIABLES.indexOf(this.variables[0])>-1&&(t.build.date_key=!0),i=function(t){t.tmp.sort_key_flag=!0,t.inheritOpt(this,"et-al-min")&&(t.tmp["et-al-min"]=t.inheritOpt(this,"et-al-min")),t.inheritOpt(this,"et-al-use-first")&&(t.tmp["et-al-use-first"]=t.inheritOpt(this,"et-al-use-first")),"boolean"==typeof t.inheritOpt(this,"et-al-use-last")&&(t.tmp["et-al-use-last"]=t.inheritOpt(this,"et-al-use-last"))},r.execs.push(i),e.push(r),this.variables.length){var n=this.variables[0];if(f.NAME_VARIABLES.indexOf(n)>-1){var a=new f.Token("names",f.START);a.tokentype=f.START,a.variables=this.variables,f.Node.names.build.call(a,t,e);var o=new f.Token("name",f.SINGLETON);o.tokentype=f.SINGLETON,o.strings["name-as-sort-order"]="all",o.strings["sort-separator"]=" ",o.strings["et-al-use-last"]=t.inheritOpt(this,"et-al-use-last"),o.strings["et-al-min"]=t.inheritOpt(this,"et-al-min"),o.strings["et-al-use-first"]=t.inheritOpt(this,"et-al-use-first"),f.Node.name.build.call(o,t,e);var l=new f.Token("institution",f.SINGLETON);l.tokentype=f.SINGLETON,f.Node.institution.build.call(l,t,e);var u=new f.Token("names",f.END);u.tokentype=f.END,f.Node.names.build.call(u,t,e)}else{var p=new f.Token("text",f.SINGLETON);p.strings.sort_direction=this.strings.sort_direction,p.dateparts=this.dateparts,f.NUMERIC_VARIABLES.indexOf(n)>-1?i="citation-number"===n?function(t,e){if("bibliography_sort"===t.tmp.area&&(this.strings.sort_direction===f.DESCENDING?t.bibliography_sort.opt.citation_number_sort_direction=f.DESCENDING:t.bibliography_sort.opt.citation_number_sort_direction=f.ASCENDING),"citation_sort"===t.tmp.area&&t.bibliography_sort.tmp.citation_number_map)var i=t.bibliography_sort.tmp.citation_number_map[t.registry.registry[e.id].seq];else var i=t.registry.registry[e.id].seq;i&&(i=f.Util.padding(""+i)),t.output.append(i,this)}:function(t,e){var i=!1;(i=e[n])&&(i=f.Util.padding(i)),t.output.append(i,this)}:"citation-label"===n?i=function(t,e){var i=t.getCitationLabel(e);t.output.append(i,this)}:f.DATE_VARIABLES.indexOf(n)>-1?(i=f.dateAsSortKey,p.variables=this.variables):i="title"===n?t.transform.getOutputFunction(this.variables,"title",!1,!1,!0):"court-class"===n?function(t,e,i){f.INIT_JURISDICTION_MACROS(t,e,i,"juris-main");var r=f.GET_COURT_CLASS(t,e,!0);t.output.append(r,"empty")}:function(t,e){var i=e[n];t.output.append(i,"empty")},p.execs.push(i),e.push(p)}}else{var c=new f.Token("text",f.SINGLETON);c.strings.sort_direction=this.strings.sort_direction,c.postponed_macro=this.postponed_macro,f.expandMacro.call(t,c,e)}var h=new f.Token("key",f.END);i=function(t){var e=t.output.string(t,t.output.queue);t.sys.normalizeUnicode&&(e=t.sys.normalizeUnicode(e)),""===(e=e?e.split(" ").join(t.opt.sort_sep)+t.opt.sort_sep:"")&&(e=void 0),"string"!=typeof e&&(e=void 0),t[t[t.tmp.area].root+"_sort"].keys.push(e),t.tmp.value=[]},h.execs.push(i),t.build.date_key&&("citation"===t.build.area&&"_sort"===t.build.extension&&(t[t.build.area].opt.sort_directions.push([-1,1]),i=function(t,e){var i=t.registry.registry[e.id].disambig.year_suffix;i||(i=0);var r=f.Util.padding(""+i);t[t.tmp.area].keys.push(r)},h.execs.push(i)),t.build.date_key=!1),i=function(t){t.tmp["et-al-min"]=void 0,t.tmp["et-al-use-first"]=void 0,t.tmp["et-al-use-last"]=void 0,t.tmp.sort_key_flag=!1},h.execs.push(i),e.push(h)}},f.Node.label={build:function(t,e){if(this.strings.term)this.execs.push(function(t,e,i){var r=f.evaluateLabel(this,t,e,i);i&&"locator"===this.strings.term&&(i.section_form_override=this.strings.form),r&&(t.tmp.group_context.tip.term_intended=!0),f.UPDATE_GROUP_CONTEXT_CONDITION(t,r,null,this),-1===r.indexOf("%s")&&(this.strings.capitalize_if_first&&!t.tmp.term_predecessor&&("in-text"!==t.opt.class||"citation"!==t.tmp.area)&&(r=f.Output.Formatters["capitalize-first"](t,r)),t.output.append(r,this))});else{this.strings.form||(this.strings.form="long");for(var i=t.build.names_variables[t.build.names_variables.length-1],r=t.build.name_label[t.build.name_label.length-1],s=0,n=i.length;s<n;s+=1)r[i[s]]||(r[i[s]]={});if(t.build.name_flag)for(var s=0,n=i.length;s<n;s+=1)r[i[s]].after=this;else for(var s=0,n=i.length;s<n;s+=1)r[i[s]].before=this}e.push(this)}},f.Node.layout={build:function(t,e){function i(){"bibliography"===t.build.area&&(n=new f.Token("text",f.SINGLETON),r=function(t){if(!t.tmp.parallel_and_not_last){var e=t.tmp.cite_affixes[t.tmp.area][t.tmp.last_cite_locale]?t.tmp.cite_affixes[t.tmp.area][t.tmp.last_cite_locale].suffix:t.bibliography.opt.layout_suffix,i=t.output.current.value();t.opt.using_display?i.blobs[i.blobs.length-1].strings.suffix=e:i.strings.suffix=e}t.bibliography.opt["second-field-align"]&&t.output.endTag("bib_other")},n.execs.push(r),e.push(n))}if(this.tokentype===f.START&&(this.locale_raw?t.build.current_default_locale=this.locale_raw:t.build.current_default_locale=t.opt["default-locale"],r=function(t,e,i){if(t.opt.development_extensions.apply_citation_wrapper&&t.sys.wrapCitationEntry&&!t.tmp.just_looking&&e.system_id&&"citation"===t.tmp.area){var r=new f.Token("group",f.START);r.decorations=[["@cite","entry"]],t.output.startTag("cite_entry",r),t.output.current.value().item_id=e.system_id,i&&(t.output.current.value().locator_txt=i.locator_txt,t.output.current.value().suffix_txt=i.suffix_txt)}},this.execs.push(r)),this.tokentype!==f.START||t.tmp.cite_affixes[t.build.area]||(r=function(t,e,i){if(t.tmp.done_vars=[],i&&i["author-only"]&&t.tmp.done_vars.push("locator"),t.opt.suppressedJurisdictions[e.country]&&e.country&&-1===["treaty","patent"].indexOf(e.type)&&t.tmp.done_vars.push("country"),!t.tmp.just_looking&&t.registry.registry[e.id]&&t.registry.registry[e.id].parallel&&t.tmp.done_vars.push("first-reference-note-number"),!t.tmp.just_looking&&t.tmp.abbrev_trimmer&&e.jurisdiction)for(var r in t.tmp.abbrev_trimmer.QUASHES[e.jurisdiction])t.tmp.done_vars.push(r);t.tmp.rendered_name=!1},this.execs.push(r),r=function(t){t.tmp.sort_key_flag=!1},this.execs.push(r),r=function(t){t.tmp.nameset_counter=0},this.execs.push(r),r=function(t,e){var i=new f.Token;t.output.openLevel(i)},this.execs.push(r),e.push(this),"citation"===t.build.area&&(s=new f.Token("text",f.SINGLETON),r=function(t,e,i){if(i&&i.prefix){var r=f.checkPrefixSpaceAppend(t,i.prefix);t.tmp.just_looking||(r=t.output.checkNestedBrace.update(r));var s=f.checkIgnorePredecessor(t,r);t.output.append(r,this,!1,s)}},s.execs.push(r),e.push(s))),this.locale_raw&&((o=new f.Token("dummy",f.START)).locale=this.locale_raw,o.strings.delimiter=this.strings.delimiter,o.strings.suffix=this.strings.suffix,t.tmp.cite_affixes[t.build.area]||(t.tmp.cite_affixes[t.build.area]={})),this.tokentype===f.START&&(t.build.layout_flag=!0,!this.locale_raw&&(t[t.tmp.area].opt.topdecor=[this.decorations],t[t.tmp.area+"_sort"].opt.topdecor=[this.decorations],t[t.build.area].opt.layout_prefix=this.strings.prefix,t[t.build.area].opt.layout_suffix=this.strings.suffix,t[t.build.area].opt.layout_delimiter=this.strings.delimiter,t[t.build.area].opt.layout_decorations=this.decorations,t.tmp.cite_affixes[t.build.area]&&(a=new f.Token("else",f.START),f.Node.else.build.call(a,t,e))),this.locale_raw)){if(t.build.layout_locale_flag)o.name="else-if",f.Attributes["@locale-internal"].call(o,t,this.locale_raw),f.Node["else-if"].build.call(o,t,e);else{var r,s,n,a,o,l=new f.Token("choose",f.START);f.Node.choose.build.call(l,t,e),o.name="if",f.Attributes["@locale-internal"].call(o,t,this.locale_raw),f.Node.if.build.call(o,t,e)}t.tmp.cite_affixes[t.build.area][o.locale]={},t.tmp.cite_affixes[t.build.area][o.locale].delimiter=this.strings.delimiter,t.tmp.cite_affixes[t.build.area][o.locale].suffix=this.strings.suffix}this.tokentype===f.END&&(this.locale_raw&&(i(),t.build.layout_locale_flag?(o.name="else-if",o.tokentype=f.END,f.Attributes["@locale-internal"].call(o,t,this.locale_raw),f.Node["else-if"].build.call(o,t,e)):(o.name="if",o.tokentype=f.END,f.Attributes["@locale-internal"].call(o,t,this.locale_raw),f.Node.if.build.call(o,t,e),t.build.layout_locale_flag=!0)),this.locale_raw||(i(),t.tmp.cite_affixes[t.build.area]&&t.build.layout_locale_flag&&(a=new f.Token("else",f.END),f.Node.else.build.call(a,t,e),a=new f.Token("choose",f.END),f.Node.choose.build.call(a,t,e)),t.build_layout_locale_flag=!0,"citation"===t.build.area&&(n=new f.Token("text",f.SINGLETON),r=function(t,e,i){if(i&&i.suffix){var r=f.checkSuffixSpacePrepend(t,i.suffix);t.tmp.just_looking||(r=t.output.checkNestedBrace.update(r)),t.output.append(r,this)}},n.execs.push(r),e.push(n)),r=function(t){t.output.closeLevel()},this.execs.push(r),r=function(t,e){t.opt.development_extensions.apply_citation_wrapper&&t.sys.wrapCitationEntry&&!t.tmp.just_looking&&e.system_id&&"citation"===t.tmp.area&&t.output.endTag()},this.execs.push(r),e.push(this),t.build.layout_flag=!1,t.build.layout_locale_flag=!1))}},f.Node.macro={build:function(){}},f.Node.alternative={build:function(t,e){if(this.tokentype===f.START){var i=new f.Token("choose",f.START);f.Node.choose.build.call(i,t,e);var r=new f.Token("if",f.START);f.Attributes["@alternative-node-internal"].call(r,t),f.Node.if.build.call(r,t,e);var s=function(t,e){if(t.tmp.oldItem=e,t.tmp.oldLang=t.opt.lang,t.tmp.abort_alternative=!0,e["language-name"]&&e["language-name-original"]){var i=JSON.parse(JSON.stringify(e));i.language=i["language-name"];var r=f.localeResolve(i.language,t.opt["default-locale"][0]);if(t.opt.multi_layout)for(var s in t.opt.multi_layout){var n=t.opt.multi_layout[s],a=!1;for(var o in n){var l=n[o];if(r.best===l.best||r.base===l.base||r.bare===l.bare){a=n[0].best;break}}a||(a=t.opt["default-locale"][0]),t.opt.lang=a}for(var u in i)if(-1===["id","type","language","multi"].indexOf(u)&&"alt-"!==u.slice(0,4))if(i.multi&&i.multi._keys[u]){var p=!0;for(var c in i.multi._keys[u])if(r.bare===c.replace(/^([a-zA-Z]+).*/,"$1")){p=!1;break}p&&delete i[u]}else delete i[u];for(var u in i)"alt-"===u.slice(0,4)?(i[u.slice(4)]=i[u],t.tmp.abort_alternative=!1):i.multi&&i.multi._keys&&!i["alt-"+u]&&i.multi._keys[u]&&(i.multi._keys[u][r.best]?(i[u]=i.multi._keys[u][r.best],t.tmp.abort_alternative=!1):i.multi._keys[u][r.base]?(i[u]=i.multi._keys[u][r.base],t.tmp.abort_alternative=!1):i.multi._keys[u][r.bare]&&(i[u]=i.multi._keys[u][r.bare],t.tmp.abort_alternative=!1))}t.output.openLevel(this),t.registry.refhash[e.id]=i,t.nameOutput=new f.NameOutput(t,i)};this.execs.push(s),e.push(this);var i=new f.Token("choose",f.START);f.Node.choose.build.call(i,t,e);var r=new f.Token("if",f.START);f.Attributes["@alternative-node-internal"].call(r,t);var s=function(t){t.tmp.abort_alternative=!0};r.execs.push(s),f.Node.if.build.call(r,t,e)}else if(this.tokentype===f.END){var r=new f.Token("if",f.END);f.Node.if.build.call(r,t,e);var i=new f.Token("choose",f.END);f.Node.choose.build.call(i,t,e);var s=function(t,e){t.output.closeLevel(),t.registry.refhash[e.id]=t.tmp.oldItem,t.opt.lang=t.tmp.oldLang,t.nameOutput=new f.NameOutput(t,t.tmp.oldItem),t.tmp.abort_alternative=!1};this.execs.push(s),e.push(this);var r=new f.Token("if",f.END);f.Node.if.build.call(r,t,e);var i=new f.Token("choose",f.END);f.Node.choose.build.call(i,t,e)}}},f.Node["alternative-text"]={build:function(t,e){this.tokentype===f.SINGLETON&&this.execs.push(function(t,e){var e=t.refetchItem(e.id);f.getCite.call(t,e)}),e.push(this)}},f.NameOutput=function(t,e,i){this.debug=!1,this.state=t,this.debug&&this.state.sys.print("(1)"),this.Item=e,this.item=i,this.nameset_base=0,this.etal_spec={},this._first_creator_variable=!1,this._please_chop=!1},f.NameOutput.prototype.init=function(t){this.requireMatch=t.requireMatch,this.state.tmp.term_predecessor&&(this.state.tmp.subsequent_author_substitute_ok=!1),this.nameset_offset&&(this.nameset_base=this.nameset_base+this.nameset_offset),this.nameset_offset=0,this.names=t,this.variables=t.variables,this.state.tmp.value=[],this.state.tmp.rendered_name=[],this.state.tmp.label_blob=!1,this.state.tmp.etal_node=!1,this.state.tmp.etal_term=!1;for(var e=0,i=this.variables.length;e<i;e+=1)this.Item[this.variables[e]]&&this.Item[this.variables[e]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[e]]));if(this["et-al"]=void 0,this.with=void 0,this.name=void 0,this.institutionpart={},this.state.tmp.group_context.tip.variable_attempt=!0,this.labelVariable=this.variables[0],this.state.tmp.value.length&&this.checkCommonAuthor(this.requireMatch)){for(var e in this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0),this.variables){var r=this.state.tmp.done_vars.indexOf(this.variables[e]);r>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,r).concat(this.state.tmp.done_vars.slice(e+1)))}this.state.tmp.common_term_match_fail=!0,this.variables=[]}},f.NameOutput.prototype.reinit=function(t,e){if(this.requireMatch=t.requireMatch,this.labelVariable=e,this.state.tmp.can_substitute.value()){this.nameset_offset=0,this.variables=t.variables;var i=this.state.tmp.value.slice();this.state.tmp.value=[];for(var r=0,s=this.variables.length;r<s;r+=1)this.Item[this.variables[r]]&&this.Item[this.variables[r]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[r]]));this.state.tmp.value.length&&this.state.tmp.can_substitute.replace(!1,f.LITERAL),this.state.tmp.value=i}if(this.checkCommonAuthor(this.requireMatch)){for(var r in this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0),this.variables){var n=this.state.tmp.done_vars.indexOf(this.variables[r]);n>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,n).concat(this.state.tmp.done_vars.slice(r+1)))}this.variables=[]}},f.NameOutput.prototype.outputNames=function(){var t,e,i=this.variables;if(this.institution.and&&(this.institution.and.single.blobs&&this.institution.and.single.blobs.length||(this.institution.and.single.blobs=this.name.and.single.blobs),this.institution.and.multiple.blobs&&this.institution.and.multiple.blobs.length||(this.institution.and.multiple.blobs=this.name.and.multiple.blobs)),this.variable_offset={},this.family)for(t=0,this.family_decor=f.Util.cloneToken(this.family),this.family_decor.strings.prefix="",this.family_decor.strings.suffix="",e=this.family.execs.length;t<e;t+=1)this.family.execs[t].call(this.family_decor,this.state,this.Item);else this.family_decor=!1;if(this.given)for(t=0,this.given_decor=f.Util.cloneToken(this.given),this.given_decor.strings.prefix="",this.given_decor.strings.suffix="",e=this.given.execs.length;t<e;t+=1)this.given.execs[t].call(this.given_decor,this.state,this.Item);else this.given_decor=!1;if(this.debug&&this.state.sys.print("(2)"),this.getEtAlConfig(),this.debug&&this.state.sys.print("(3)"),this.divideAndTransliterateNames(),this.debug&&this.state.sys.print("(4)"),this.truncatePersonalNameLists(),this.debug&&this.state.sys.print("(5)"),this.debug&&this.state.sys.print("(6)"),this.disambigNames(),this.constrainNames(),this.debug&&this.state.sys.print("(7)"),"count"===this.name.strings.form){(this.state.tmp.extension||0!=this.names_count)&&(this.state.output.append(this.names_count,"empty"),this.state.tmp.group_context.tip.variable_success=!0);return}this.debug&&this.state.sys.print("(8)"),this.setEtAlParameters(),this.debug&&this.state.sys.print("(9)"),this.setCommonTerm(this.requireMatch),this.debug&&this.state.sys.print("(10)"),this.renderAllNames(),this.debug&&this.state.sys.print("(11)");var r=[];for(t=0,e=i.length;t<e;t+=1){var s=i[t],n=[],a=!1,o=null;if(this.state.opt.development_extensions.spoof_institutional_affiliations){this.debug&&this.state.sys.print("(11a)");for(var l=0,u=this.institutions[s].length;l<u;l+=1)n.push(this.joinPersonsAndInstitutions([this.persons[s][l],this.institutions[s][l]]));if(this.debug&&this.state.sys.print("(11b)"),this.institutions[s].length){var p=this.nameset_base+this.variable_offset[s];this.freeters[s].length&&(p+=1),a=this.joinInstitutionSets(n,p)}this.debug&&this.state.sys.print("(11c)");var o=this.joinFreetersAndInstitutionSets([this.freeters[s],a]);this.debug&&this.state.sys.print("(11d)")}else o=this._join([this.freeters[s]],"");if(o&&(this.state.tmp.extension||(o=this._applyLabels(o,s)),r.push(o)),this.debug&&this.state.sys.print("(11e)"),this.common_term)break}for(this.debug&&this.state.sys.print("(12)"),this.state.output.openLevel("empty"),this.state.output.current.value().strings.delimiter=this.state.inheritOpt(this.names,"delimiter","names-delimiter"),this.debug&&this.state.sys.print("(13)"),t=0,e=r.length;t<e;t+=1)this.state.output.append(r[t],"literal",!0);!this.state.tmp.just_looking&&r.length>0&&(this.state.tmp.probably_rendered_something=!0),this.debug&&this.state.sys.print("(14)"),this.state.output.closeLevel("empty"),this.debug&&this.state.sys.print("(15)");var c=this.state.output.pop();this.state.tmp.name_node.top=c,this.debug&&this.state.sys.print("(16)");var h=f.Util.cloneToken(this.names);if(this.state.tmp.group_context.tip.condition&&f.UPDATE_GROUP_CONTEXT_CONDITION(this.state,this.names.strings.prefix,null,this.names),this.state.output.append(c,h),this.state.tmp.term_predecessor_name&&(this.state.tmp.term_predecessor=!0),this.debug&&this.state.sys.print("(17)"),this.debug&&this.state.sys.print("(18)"),"authority"!==i[0]){var m=[],d=this.Item[i[0]];if(d)for(var t=0,e=d.length;t<e;t+=1){var g=f.Util.Names.getRawName(d[t]);g&&m.push(g)}(m=m.join(", "))&&(this.state.tmp.name_node.string=m)}if(this.state.tmp.name_node.string&&!this.state.tmp.first_name_string&&(this.state.tmp.first_name_string=this.state.tmp.name_node.string),"classic"===this.Item.type&&this.state.tmp.first_name_string){var b=[];b.push(this.state.tmp.first_name_string),this.Item.title&&b.push(this.Item.title),(b=b.join(", "))&&this.state.sys.getAbbreviation&&(this.state.sys.normalizeAbbrevsKey&&(b=this.state.sys.normalizeAbbrevsKey("classic",b)),this.state.transform.loadAbbreviation("default","classic",b,this.Item.language),this.state.transform.abbrevs.default.classic[b]&&(this.state.tmp.done_vars.push("title"),this.state.output.append(this.state.transform.abbrevs.default.classic[b],"empty",!0),c=this.state.output.pop(),this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.top.blobs.push(c)))}this._collapseAuthor(),this.variables=[],this.state.tmp.authority_stop_last=0,this.debug&&this.state.sys.print("(19)")},f.NameOutput.prototype._applyLabels=function(t,e){if(!this.label||!this.label[this.labelVariable])return t;var i,r=0,s=this.freeters_count[e]+this.institutions_count[e];if(s>1)r=1;else{for(var n=0,a=this.persons[e].length;n<a;n+=1)s+=this.persons_count[e][n];s>1&&(r=1)}return this.label[this.labelVariable].before?("number"==typeof this.label[this.labelVariable].before.strings.plural&&(r=this.label[this.labelVariable].before.strings.plural),i=this._buildLabel(e,r,"before",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(i,this.label[this.labelVariable].before,!0),this.state.output.append(t,"literal",!0),this.state.output.closeLevel("empty"),t=this.state.output.pop()):this.label[this.labelVariable].after&&("number"==typeof this.label[this.labelVariable].after.strings.plural&&(r=this.label[this.labelVariable].after.strings.plural),i=this._buildLabel(e,r,"after",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(t,"literal",!0),this.state.output.append(i,this.label[this.labelVariable].after,!0),this.state.tmp.label_blob=this.state.output.pop(),this.state.output.append(this.state.tmp.label_blob,"literal",!0),this.state.output.closeLevel("empty"),t=this.state.output.pop()),t},f.NameOutput.prototype._buildLabel=function(t,e,i,r){this.common_term&&(t=this.common_term);var s=!1,n=this.label[r][i];return n&&(s=f.castLabel(this.state,n,t,e,f.TOLERANT)),s},f.NameOutput.prototype._collapseAuthor=function(){var t,e,i;0!==this.state.tmp.name_node.top.blobs.length&&(0===this.nameset_base&&this.Item[this.variables[0]]&&!this._first_creator_variable&&(this._first_creator_variable=this.variables[0]),(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter.length)&&(this.state.tmp.authorstring_request?(e="",t=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,i=this.state.tmp.offset_characters,t&&(e=this.state.output.string(this.state,t,!1)),this.state.tmp.offset_characters=i,this.state.registry.authorstrings[this.Item.id]=e):!this.state.tmp.just_looking&&!this.state.tmp.suppress_decorations&&(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter)&&(e="",t=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,i=this.state.tmp.offset_characters,t&&(e=this.state.output.string(this.state,t,!1)),e===this.state.tmp.last_primary_names_string?((this.item["suppress-author"]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length)&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=i),this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!0)):(this.state.tmp.last_primary_names_string=e,this.variables.indexOf(this._first_creator_variable)>-1&&this.item&&this.item["suppress-author"]&&"legal_case"!==this.Item.type&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=i,this.state.tmp.term_predecessor=!1),this.state.tmp.have_collapsed=!1,this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!1)))))},f.NameOutput.prototype.isPerson=function(t){return!t.literal&&(!!t.given||!t.family||!t.isInstitution)},f.NameOutput.prototype.truncatePersonalNameLists=function(){var t,e,i,r,s,n;for(t in this.freeters_count={},this.persons_count={},this.institutions_count={},this.freeters)this.freeters.hasOwnProperty(t)&&(this.freeters_count[t]=this.freeters[t].length,this.freeters[t]=this._truncateNameList(this.freeters,t));for(t in this.persons)if(this.persons.hasOwnProperty(t))for(this.institutions_count[t]=this.institutions[t].length,this._truncateNameList(this.institutions,t),this.persons[t]=this.persons[t].slice(0,this.institutions[t].length),this.persons_count[t]=[],r=0,s=this.persons[t].length;r<s;r+=1)this.persons_count[t][r]=this.persons[t][r].length,this.persons[t][r]=this._truncateNameList(this.persons,t,r);if((n=!!this.state.opt.development_extensions.etal_min_etal_usefirst_hack&&1===this.etal_min&&1===this.etal_use_first&&!this.state.tmp.extension&&!this.state.tmp.just_looking&&t)||this._please_chop)for(e=0,i=this.variables.length;e<i;e+=1){t=this.variables[e],this.freeters[t].length&&(this._please_chop===t?(this.freeters[t]=this.freeters[t].slice(1),this.freeters_count[t]+=-1,this._please_chop=!1):n&&!this._please_chop&&(this.freeters[t]=this.freeters[t].slice(0,1),this.freeters_count[t]=1,this.institutions[t]=[],this.persons[t]=[],this._please_chop=n));for(var r=0,s=this.persons[t].length;r<s;r++)if(this.persons[t][r].length){if(this._please_chop===t){this.persons[t][r]=this.persons[t][r].slice(1),this.persons_count[t][r]+=-1,this._please_chop=!1;break}else if(n&&!this._please_chop){this.freeters[t]=this.persons[t][r].slice(0,1),this.freeters_count[t]=1,this.institutions[t]=[],this.persons[t]=[],this._please_chop=n;break}}this.institutions[t].length&&(this._please_chop===t?(this.institutions[t]=this.institutions[t].slice(1),this.institutions_count[t]+=-1,this._please_chop=!1):n&&!this._please_chop&&(this.institutions[t]=this.institutions[t].slice(0,1),this.institutions_count[t]=1,this._please_chop=n))}for(e=0,i=this.variables.length;e<i;e+=1){this.institutions[t].length&&(this.nameset_offset+=1);for(var r=0,s=this.persons[t].length;r<s;r++)this.persons[t][r].length&&(this.nameset_offset+=1)}},f.NameOutput.prototype._truncateNameList=function(t,e,i){var r;if(r=void 0===i?t[e]:t[e][i],this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names&&r.length>50&&r.length>this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names+2){var s=this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names;r=r.slice(0,s+1).concat(r.slice(-1))}return r},f.NameOutput.prototype.divideAndTransliterateNames=function(){var t,e,i,r,s=this.Item,n=this.variables;for(t=0,this.varnames=n.slice(),this.freeters={},this.persons={},this.institutions={},e=n.length;t<e;t+=1){var a=n[t];this.variable_offset[a]=this.nameset_offset;var o=this._normalizeVariableValue(s,a);if(this.name.strings["suppress-min"]&&o.length>=this.name.strings["suppress-min"]&&(o=[]),this.name.strings["suppress-max"]&&o.length<=this.name.strings["suppress-max"]&&(o=[]),this._getFreeters(a,o),this._getPersonsAndInstitutions(a,o),this.state.opt.development_extensions.spoof_institutional_affiliations){if(0===this.name.strings["suppress-min"])for(i=0,this.freeters[a]=[],r=this.persons[a].length;i<r;i+=1)this.persons[a][i]=[];else if(0===this.institution.strings["suppress-min"]){for(i=0,this.institutions[a]=[],this.freeters[a]=this.freeters[a].concat(this.persons[a]),r=this.persons[a].length;i<r;i+=1)for(var l=0,u=this.persons[a][i].length;l<u;l+=1)this.freeters[a].push(this.persons[a][i][l]);this.persons[a]=[]}}}},f.NameOutput.prototype._normalizeVariableValue=function(t,e){var i;return"string"==typeof t[e]||"number"==typeof t[e]?(f.debug('name variable "'+e+'" is string or number, not array. Attempting to fix.'),i=[{literal:t[e]+""}]):t[e]?("number"!=typeof t[e].length&&(f.debug('name variable "'+e+'" is object, not array. Attempting to fix.'),t[e]=[t[e]]),i=t[e].slice()):i=[],i},f.NameOutput.prototype._getFreeters=function(t,e){if(this.freeters[t]=[],this.state.opt.development_extensions.spoof_institutional_affiliations)for(var i=e.length-1;i>-1;i--)if(this.isPerson(e[i])){var r=this._checkNickname(e.pop());r&&this.freeters[t].push(r)}else break;else for(var i=e.length-1;i>-1;i--){var r=e.pop();if(this.isPerson(r))var r=this._checkNickname(r);this.freeters[t].push(r)}this.freeters[t].reverse(),this.freeters[t].length&&(this.nameset_offset+=1)},f.NameOutput.prototype._getPersonsAndInstitutions=function(t,e){if(this.persons[t]=[],this.institutions[t]=[],this.state.opt.development_extensions.spoof_institutional_affiliations){for(var i=[],r=!1,s=!0,n=e.length-1;n>-1;n+=-1)if(this.isPerson(e[n])){var a=this._checkNickname(e[n]);a&&i.push(a)}else r=!0,this.institutions[t].push(e[n]),s||(i.reverse(),this.persons[t].push(i),i=[]),s=!1;r&&(i.reverse(),this.persons[t].push(i),this.persons[t].reverse(),this.institutions[t].reverse())}},f.NameOutput.prototype._clearValues=function(t){for(var e=t.length-1;e>-1;e+=-1)t.pop()},f.NameOutput.prototype._checkNickname=function(t){if(["interview","personal_communication"].indexOf(this.Item.type)>-1){var e="";if((e=f.Util.Names.getRawName(t))&&this.state.sys.getAbbreviation&&!(this.item&&this.item["suppress-author"])){var i=e;this.state.sys.normalizeAbbrevsKey&&(i=this.state.sys.normalizeAbbrevsKey("author",e)),this.state.transform.loadAbbreviation("default","nickname",i,this.Item.language);var r=this.state.transform.abbrevs.default.nickname[i];r&&(t="!here>>>"!==r&&{family:r,given:""})}}return t},f.NameOutput.prototype._purgeEmptyBlobs=function(t){for(var e=t.length-1;e>-1;e+=-1)t[e]&&0!==t[e].length&&t[e].blobs.length||(t=t.slice(0,e).concat(t.slice(e+1)));return t},f.NameOutput.prototype.joinPersons=function(t,e,i,r){return t=this._purgeEmptyBlobs(t),r||(r="name"),void 0===i?1===this.etal_spec[e].freeters?this._joinEtAl(t):2===this.etal_spec[e].freeters?this._joinEllipsis(t):this.state.tmp.sort_key_flag?this._join(t,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):this._joinAnd(t):1===this.etal_spec[e].persons[i]?this._joinEtAl(t):2===this.etal_spec[e].persons[i]?this._joinEllipsis(t):this.state.tmp.sort_key_flag?this._join(t,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):this._joinAnd(t)},f.NameOutput.prototype.joinInstitutionSets=function(t,e){return t=this._purgeEmptyBlobs(t),1===this.etal_spec[e].institutions?this._joinEtAl(t,"institution"):2===this.etal_spec[e].institutions?this._joinEllipsis(t,"institution"):this._joinAnd(t)},f.NameOutput.prototype.joinPersonsAndInstitutions=function(t){t=this._purgeEmptyBlobs(t);var e=this._join(t,this.state.tmp.name_delimiter);return e.isInstitution=!0,e},f.NameOutput.prototype.joinFreetersAndInstitutionSets=function(t){return t=this._purgeEmptyBlobs(t),this._join(t,"[never here]",this.with.single,this.with.multiple)},f.NameOutput.prototype._getAfterInvertedName=function(t,e,i){if(i&&t.length>1&&"after-inverted-name"===this.state.inheritOpt(this.name,"delimiter-precedes-last")){var r=t[t.length-2];r.blobs.length>0&&r.blobs[0].isInverted&&(i.strings.prefix=e)}return i},f.NameOutput.prototype._getAndJoin=function(t,e){var i=!1;if(t.length>1){var r="single";t.length>2&&(r="multiple"),i=JSON.parse(JSON.stringify(i=t[t.length-1].isInstitution?this.institution.and[r]:this.name.and[r])),i=this._getAfterInvertedName(t,e,i)}return i},f.NameOutput.prototype._joinEtAl=function(t){var e=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),i=this._join(t,e);return this.state.output.openLevel(this._getToken("name")),this.state.output.current.value().strings.delimiter="",this.state.output.append(i,"literal",!0),t.length>1?this.state.output.append(this["et-al"].multiple,"literal",!0):1===t.length&&this.state.output.append(this["et-al"].single,"literal",!0),this.state.output.closeLevel(),this.state.output.pop()},f.NameOutput.prototype._joinEllipsis=function(t){var e=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),i=!1;if(t.length>1){var r="single";t.length>2&&(r="multiple"),i=JSON.parse(JSON.stringify(this.name.ellipsis[r])),i=this._getAfterInvertedName(t,e,i)}return this._join(t,e,i)},f.NameOutput.prototype._joinAnd=function(t){var e=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),i=this._getAndJoin(t,e);return this._join(t,e,i)},f.NameOutput.prototype._join=function(t,e,i){var r,s;if(!t||!(t=this._purgeEmptyBlobs(t)).length)return!1;if(t.length>1)if(2===t.length)i?t=[t[0],i,t[1]]:t[0].strings.suffix+=e;else{for(var n=+!!i,a=t.pop(),r=0,s=t.length-n;r<s;r++)t[r].strings.suffix+=e;t.push(i),t.push(a)}for(this.state.output.openLevel(),r=0,s=t.length;r<s;r+=1)this.state.output.append(t[r],!1,!0);return this.state.output.closeLevel(),this.state.output.pop()},f.NameOutput.prototype._getToken=function(t){var e=this[t];return"institution"===t?new f.Token:e},f.NameOutput.prototype.checkCommonAuthor=function(t){if(!t)return!1;var e=!1;if(2===this.variables.length){var i=this.variables.slice();i.sort(),e=i.join("")}if(!e)return!1;var r=!1;if(this.state.locale[this.state.opt.lang].terms[e]&&(r=!0),!r)return this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1]),!1;var s=this.Item[this.variables[0]],n=this.Item[this.variables[1]],a=this._compareNamesets(s,n);return!0===a&&(this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1])),!a},f.NameOutput.prototype.setCommonTerm=function(){var t=this.variables.slice();if(t.sort(),this.common_term=t.join(""),this.common_term){var e=!1;if(this.label&&this.label[this.variables[0]]&&(this.label[this.variables[0]].before?e=this.state.getTerm(this.common_term,this.label[this.variables[0]].before.strings.form,0):this.label[this.variables[0]].after&&(e=this.state.getTerm(this.common_term,this.label[this.variables[0]].after.strings.form,0))),!this.state.locale[this.state.opt.lang].terms[this.common_term]||!e||this.variables.length<2){this.common_term=!1;return}for(var i=0,r=this.variables.length-1;i<r;i+=1){var s=this.variables[i],n=this.variables[i+1];if((this.freeters[s].length||this.freeters[n].length)&&(this.etal_spec[s].freeters!==this.etal_spec[n].freeters||!this._compareNamesets(this.freeters[s],this.freeters[n]))||this.persons[s].length!==this.persons[n].length){this.common_term=!1;return}for(var a=0,o=this.persons[s].length;a<o;a+=1)if(this.etal_spec[s].persons[a]!==this.etal_spec[n].persons[a]||!this._compareNamesets(this.persons[s][a],this.persons[n][a])){this.common_term=!1;return}}}},f.NameOutput.prototype._compareNamesets=function(t,e){if(!t||!e||t.length!==e.length)return!1;for(var i=0,r=e.length;i<r;i+=1)for(var s=0,n=f.NAME_PARTS.length;s<n;s+=1){var a=f.NAME_PARTS[s];if(!t[i]||t[i][a]!=e[i][a])return!1}return!0},f.NameOutput.prototype.constrainNames=function(){this.names_count=0;for(var t,e=0,i=this.variables.length;e<i;e+=1){var r=this.variables[e];t=this.nameset_base+e,this.freeters[r].length&&(this.state.tmp.names_max.push(this.freeters[r].length,"literal"),this._imposeNameConstraints(this.freeters,this.freeters_count,r,t),this.names_count+=this.freeters[r].length),this.institutions[r].length&&(this.state.tmp.names_max.push(this.institutions[r].length,"literal"),this._imposeNameConstraints(this.institutions,this.institutions_count,r,t),this.persons[r]=this.persons[r].slice(0,this.institutions[r].length),this.names_count+=this.institutions[r].length);for(var s=0,n=this.persons[r].length;s<n;s+=1)this.persons[r][s].length&&(this.state.tmp.names_max.push(this.persons[r][s].length,"literal"),this._imposeNameConstraints(this.persons[r],this.persons_count[r],s,t),this.names_count+=this.persons[r][s].length)}},f.NameOutput.prototype._imposeNameConstraints=function(t,e,i,r){var s=t[i],n=this.state.tmp["et-al-min"];this.state.tmp.suppress_decorations?this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[r]?n=this.state.tmp.disambig_request.names[r]:e[i]>=this.etal_min&&(n=this.etal_use_first):(this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[r]>this.etal_use_first?n=e[i]<this.etal_min?e[i]:this.state.tmp.disambig_request.names[r]:e[i]>=this.etal_min&&(n=this.etal_use_first),this.etal_use_last&&n>this.etal_min-2&&(n=this.etal_min-2));var a=this.etal_min>=this.etal_use_first,o=e[i]>n;n>e[i]&&(n=s.length),a&&o&&(this.etal_use_last?t[i]=s.slice(0,n).concat(s.slice(-1)):t[i]=s.slice(0,n)),this.state.tmp.disambig_settings.names[r]=t[i].length,this.state.disambiguate.padBase(this.state.tmp.disambig_settings)},f.NameOutput.prototype.disambigNames=function(){for(var t,e=0,i=this.variables.length;e<i;e+=1){var r=this.variables[e];if(t=this.nameset_base+e,this.freeters[r].length&&this._runDisambigNames(this.freeters[r],t),this.institutions[r].length){void 0===this.state.tmp.disambig_settings.givens[t]&&(this.state.tmp.disambig_settings.givens[t]=[]);for(var s=0,n=this.institutions[r].length;s<n;s+=1)void 0===this.state.tmp.disambig_settings.givens[t][s]&&this.state.tmp.disambig_settings.givens[t].push(2)}for(var s=0,n=this.persons[r].length;s<n;s+=1)this.persons[r][s].length&&this._runDisambigNames(this.persons[r][s],t)}},f.NameOutput.prototype._runDisambigNames=function(t,e){var i,r,s,n,a,o;for(n=0,a=t.length;n<a;n+=1)if(t[n].given||t[n].family){if(r=this.state.inheritOpt(this.name,"initialize-with"),this.state.registry.namereg.addname(""+this.Item.id,t[n],n),void 0===this.state.tmp.disambig_settings.givens[e])for(var l=0,u=e+1;l<u;l+=1)this.state.tmp.disambig_settings.givens[l]||(this.state.tmp.disambig_settings.givens[l]=[]);if(void 0===this.state.tmp.disambig_settings.givens[e][n]&&(i=this.state.inheritOpt(this.name,"form","name-form","long"),s=this.state.registry.namereg.evalname(""+this.Item.id,t[n],n,0,i,r),this.state.tmp.disambig_settings.givens[e].push(s)),i=this.state.inheritOpt(this.name,"form","name-form","long"),o=this.state.registry.namereg.evalname(""+this.Item.id,t[n],n,0,i,r),this.state.tmp.disambig_request){var p=this.state.tmp.disambig_settings.givens[e][n];1===p&&"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&(void 0===this.state.inheritOpt(this.name,"initialize-with")||void 0===t[n].given)&&(p=2),s=p,this.state.opt["disambiguate-add-givenname"]&&t[n].given&&(s=this.state.registry.namereg.evalname(""+this.Item.id,t[n],n,s,this.state.inheritOpt(this.name,"form","name-form","long"),this.state.inheritOpt(this.name,"initialize-with")))}else s=o;!this.state.tmp.just_looking&&this.item&&this.item.position===f.POSITION_FIRST&&o>s&&(s=o),this.state.tmp.sort_key_flag||(this.state.tmp.disambig_settings.givens[e][n]=s,"string"==typeof r&&(void 0===this.name.strings.initialize||!0===this.name.strings.initialize)&&(this.state.tmp.disambig_settings.use_initials=!0))}},f.NameOutput.prototype.getEtAlConfig=function(){var t=this.item;this["et-al"]={},this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].single=this.state.output.pop(),this["et-al"].single.strings.suffix=this.etal_suffix,this["et-al"].single.strings.prefix=this.etal_prefix_single,this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].multiple=this.state.output.pop(),this["et-al"].multiple.strings.suffix=this.etal_suffix,this["et-al"].multiple.strings.prefix=this.etal_prefix_multiple,void 0===t&&(t={}),t.position?(this.state.inheritOpt(this.name,"et-al-subsequent-min")?this.etal_min=this.state.inheritOpt(this.name,"et-al-subsequent-min"):this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.inheritOpt(this.name,"et-al-subsequent-use-first")?this.etal_use_first=this.state.inheritOpt(this.name,"et-al-subsequent-use-first"):this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first")):(this.state.tmp["et-al-min"]?this.etal_min=this.state.tmp["et-al-min"]:this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.tmp["et-al-use-first"]?this.etal_use_first=this.state.tmp["et-al-use-first"]:this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first"),"boolean"==typeof this.state.tmp["et-al-use-last"]?this.etal_use_last=this.state.tmp["et-al-use-last"]:this.etal_use_last=this.state.inheritOpt(this.name,"et-al-use-last")),this.state.tmp["et-al-min"]||(this.state.tmp["et-al-min"]=this.etal_min)},f.NameOutput.prototype.setEtAlParameters=function(){var t,e,i,r;for(t=0,e=this.variables.length;t<e;t+=1){var s=this.variables[t];for(void 0===this.etal_spec[s]&&(this.etal_spec[s]={freeters:0,institutions:0,persons:[]}),this.etal_spec[this.nameset_base+t]=this.etal_spec[s],this.freeters[s].length&&this._setEtAlParameter("freeters",s),i=0,r=this.persons[s].length;i<r;i+=1)void 0===this.etal_spec[s][i]&&(this.etal_spec[s].persons[i]=0),this._setEtAlParameter("persons",s,i);this.institutions[s].length&&this._setEtAlParameter("institutions",s)}},f.NameOutput.prototype._setEtAlParameter=function(t,e,i){var r,s;"persons"===t?(r=this.persons[e][i],s=this.persons_count[e][i]):(r=this[t][e],s=this[t+"_count"][e]),r.length<s&&!this.state.tmp.sort_key_flag?this.etal_use_last?"persons"===t?this.etal_spec[e].persons[i]=2:this.etal_spec[e][t]=2:"persons"===t?this.etal_spec[e].persons[i]=1:this.etal_spec[e][t]=1:"persons"===t?this.etal_spec[e].persons[i]=0:this.etal_spec[e][t]=0},f.NameOutput.prototype.renderAllNames=function(){for(var t,e=0,i=this.variables.length;e<i;e+=1){var r=this.variables[e];(this.freeters[r].length||this.institutions[r].length)&&!this.state.tmp.group_context.tip.condition&&(this.state.tmp.just_did_number=!1),t=this.nameset_base+e,this.freeters[r].length&&(this.freeters[r]=this._renderNames(r,this.freeters[r],t));for(var s=0,n=this.institutions[r].length;s<n;s+=1)this.persons[r][s]=this._renderNames(r,this.persons[r][s],t,s)}this.renderInstitutionNames()},f.NameOutput.prototype.renderInstitutionNames=function(){for(var t=0,e=this.variables.length;t<e;t+=1)for(var i=this.variables[t],r=0,s=this.institutions[i].length;r<s;r+=1){var n,r,s,a,o=this.institutions[i][r];a=this.state.tmp.extension?["sort"]:o.isInstitution||o.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons;var l={primary:"locale-orig",secondary:!1,tertiary:!1};if(a)for(var u=["primary","secondary","tertiary"],p=0,c=u.length;p<c&&!(a.length-1<p);p+=1)a[p]&&(l[u[p]]="locale-"+a[p]);else l.primary="locale-translat";"bibliography"===this.state.tmp.area||"citation"===this.state.tmp.area&&"note"===this.state.opt.xclass&&this.item&&!this.item.position||(l.secondary=!1,l.tertiary=!1),this.setRenderedName(o);var n=this._renderInstitutionName(i,o,l,r);this.institutions[i][r]=n}},f.NameOutput.prototype._renderInstitutionName=function(t,e,i,r){var s,n,a,o,l,u,p=this.getName(e,i.primary,!0),c=p.name,h=p.usedOrig;if(c&&(c=this.fixupInstitution(c,t,r)),s=!1,i.secondary){var s=(p=this.getName(e,i.secondary,!1,h)).name;h=p.usedOrig,s&&(s=this.fixupInstitution(s,t,r))}n=!1,i.tertiary&&(n=(p=this.getName(e,i.tertiary,!1,h)).name)&&(n=this.fixupInstitution(n,t,r));var f={pri:!1,sec:!1,ter:!1},m={pri:!1,sec:!1,ter:!1};switch(c&&(f.pri=c.long,m.pri=c.short.length?c.short:c.long),s&&(f.sec=s.long,m.sec=s.short.length?s.short:s.long),n&&(f.ter=n.long,m.ter=n.short.length?n.short:n.long),this.institution.strings["institution-parts"]){case"short":c.short.length?(o=this._getShortStyle(),l=[this._composeOneInstitutionPart([m.pri,m.sec,m.ter],i,o,t)]):(a=this._getLongStyle(c,t,r),l=[this._composeOneInstitutionPart([f.pri,f.sec,f.ter],i,a,t)]);break;case"short-long":a=this._getLongStyle(c,t,r),o=this._getShortStyle(),l=[u=this._renderOneInstitutionPart(c.short,o),this._composeOneInstitutionPart([f.pri,f.sec,f.ter],i,a,t)];break;case"long-short":a=this._getLongStyle(c,t,r),o=this._getShortStyle(),u=this._renderOneInstitutionPart(c.short,o),l=[this._composeOneInstitutionPart([f.pri,f.sec,f.ter],i,a,t),u];break;default:a=this._getLongStyle(c,t,r),l=[this._composeOneInstitutionPart([f.pri,f.sec,f.ter],i,a,t)]}var d=this._join(l," ");return d&&(d.isInstitution=!0),this.state.tmp.name_node.children.push(d),d},f.NameOutput.prototype._composeOneInstitutionPart=function(t,e,i){var r,s,n,a,o=!1,l=!1,u=!1;if(t[0]){if(s=f.Util.cloneToken(i),this.state.opt.citeAffixes[e.primary]&&"<i>"===this.state.opt.citeAffixes.institutions[e.primary].prefix){for(var p=!1,c=0,h=s.decorations.length;c<h;c+=1)"@font-style"===i.decorations[c][0]&&"italic"===s.decorations[c][1]&&(p=!0);p||s.decorations.push(["@font-style","italic"])}o=this._renderOneInstitutionPart(t[0],s)}if(t[1]&&(l=this._renderOneInstitutionPart(t[1],i)),t[2]&&(u=this._renderOneInstitutionPart(t[2],i)),l||u){this.state.output.openLevel("empty"),this.state.output.append(o),n=f.Util.cloneToken(i),e.secondary&&(n.strings.prefix=this.state.opt.citeAffixes.institutions[e.secondary].prefix,n.strings.suffix=this.state.opt.citeAffixes.institutions[e.secondary].suffix,n.strings.prefix||(n.strings.prefix=" "));var m=new f.Token;m.decorations.push(["@font-style","normal"]),m.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(m),this.state.output.append(l,n),this.state.output.closeLevel(),a=f.Util.cloneToken(i),e.tertiary&&(a.strings.prefix=this.state.opt.citeAffixes.institutions[e.tertiary].prefix,a.strings.suffix=this.state.opt.citeAffixes.institutions[e.tertiary].suffix,a.strings.prefix||(a.strings.prefix=" "));var d=new f.Token;d.decorations.push(["@font-style","normal"]),d.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(d),this.state.output.append(u,a),this.state.output.closeLevel(),this.state.output.closeLevel(),r=this.state.output.pop()}else r=o;return r},f.NameOutput.prototype._renderOneInstitutionPart=function(t,e){for(var i=0,r=t.length;i<r;i+=1)if(t[i]){var s=t[i];if(this.state.tmp.strip_periods)s=s.replace(/\./g,"");else for(var n=0,a=e.decorations.length;n<a;n+=1)if("@strip-periods"===e.decorations[n][0]&&"true"===e.decorations[n][1]){s=s.replace(/\./g,"");break}this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,f.LITERAL),"!here>>>"===s?t[i]=!1:(this.state.output.append(s,e,!0),t[i]=this.state.output.pop())}return void 0===this.institution.strings["part-separator"]&&(this.institution.strings["part-separator"]=this.state.tmp.name_delimiter),this._join(t,this.institution.strings["part-separator"])},f.NameOutput.prototype._renderNames=function(t,e,i,r){var s=!1;if(e.length){for(var n=[],a=0,o=e.length;a<o;a+=1){var s,l,u=e[a];l=this.state.tmp.extension?["sort"]:u.isInstitution||u.literal?this.state.opt["cite-lang-prefs"].institutions:this.state.opt["cite-lang-prefs"].persons;var p={primary:"locale-orig",secondary:!1,tertiary:!1};if(l)for(var c=["primary","secondary","tertiary"],h=0,m=c.length;h<m&&!(l.length-1<h);h+=1)p[c[h]]="locale-"+l[h];else p.primary="locale-translat";if((this.state.tmp.sort_key_flag||"bibliography"!==this.state.tmp.area&&!("citation"===this.state.tmp.area&&"note"===this.state.opt.xclass&&this.item&&!this.item.position))&&(p.secondary=!1,p.tertiary=!1),this.setRenderedName(u),u.literal||u.isInstitution)n.push(this._renderInstitutionName(t,u,p,r));else{var d=this._renderPersonalName(t,u,p,i,a,r),g=f.Util.cloneToken(this.name);this.state.output.append(d,g,!0),n.push(this.state.output.pop())}}s=this.joinPersons(n,i,r)}return s},f.NameOutput.prototype._renderPersonalName=function(t,e,i,r,s,n){var a,o=this.getName(e,i.primary,!0),l=this._renderOnePersonalName(o.name,r,s,n),u=!1;i.secondary&&(o=this.getName(e,i.secondary,!1,o.usedOrig)).name&&(u=this._renderOnePersonalName(o.name,r,s,n));var p=!1;if(i.tertiary&&(o=this.getName(e,i.tertiary,!1,o.usedOrig)).name&&(p=this._renderOnePersonalName(o.name,r,s,n)),u||p){this.state.output.openLevel("empty"),this.state.output.append(l);var c=new f.Token;i.secondary&&(c.strings.prefix=this.state.opt.citeAffixes.persons[i.secondary].prefix,c.strings.suffix=this.state.opt.citeAffixes.persons[i.secondary].suffix,c.strings.prefix||(c.strings.prefix=" ")),this.state.output.append(u,c);var h=new f.Token;i.tertiary&&(h.strings.prefix=this.state.opt.citeAffixes.persons[i.tertiary].prefix,h.strings.suffix=this.state.opt.citeAffixes.persons[i.tertiary].suffix,h.strings.prefix||(h.strings.prefix=" ")),this.state.output.append(p,h),this.state.output.closeLevel(),a=this.state.output.pop()}else a=l;return a},f.NameOutput.prototype._isRomanesque=function(t){var e,i=2;return t.family.replace(/\"/g,"").match(f.ROMANESQUE_REGEXP)||(i=0),!i&&t.given&&t.given.match(f.STARTSWITH_ROMANESQUE_REGEXP)&&(i=1),2==i&&(t.multi&&t.multi.main?e=t.multi.main.slice(0,2):this.Item.language&&(e=this.Item.language.slice(0,2)),["ja","zh"].indexOf(e)>-1&&(i=1)),i},f.NameOutput.prototype._renderOnePersonalName=function(t,e,i,r){var s=this._droppingParticle(t,e,r),n=this._familyName(t),a=this._nonDroppingParticle(t),o=this._givenName(t,e,i),l=o.blob,u=this._nameSuffix(t);!1===l&&(s=!1,u=!1);var p=this.state.inheritOpt(this.name,"sort-separator");p||(p=""),m=t["comma-suffix"]?", ":" ";var c=this._isRomanesque(t),h=function t(e){return!!e&&("string"!=typeof e.blobs?t(e.blobs[e.blobs.length-1]):!!(["’","'","-"," "].indexOf(e.blobs.slice(-1))>-1)||!1)}(a);if(d=["fr","ru","cs"].indexOf(this.state.opt["default-locale"][0].slice(0,2))>-1?" ":" ",0===c)g=this._join([a,n,l],"");else if(1===c||t["static-ordering"])b=this._join([a,n],d),g=this._join([b,l]," ");else if(t["reverse-ordering"])b=this._join([a,n],d),g=this._join([l,b]," ");else if(this.state.tmp.sort_key_flag)"never"===this.state.opt["demote-non-dropping-particle"]?(b=this._join([a,n],d),b=this._join([b,s]," "),b=this._join([b,l],this.state.opt.sort_sep)):(v=this._join([l,s,a]," "),b=this._join([n,v],this.state.opt.sort_sep)),g=this._join([b,u]," ");else if("all"===this.state.inheritOpt(this.name,"name-as-sort-order")||"first"===this.state.inheritOpt(this.name,"name-as-sort-order")&&0===i&&(0===r||void 0===r))["Lord","Lady"].indexOf(t.given)>-1&&(p=", "),["always","display-and-sort"].indexOf(this.state.opt["demote-non-dropping-particle"])>-1?(v=this._join([l,s],t["comma-dropping-particle"]+" "),(v=this._join([v,a]," "))&&this.given&&(v.strings.prefix=this.given.strings.prefix,v.strings.suffix=this.given.strings.suffix),n&&this.family&&(n.strings.prefix=this.family.strings.prefix,n.strings.suffix=this.family.strings.suffix),b=this._join([n,v],p)):((y=h?this._join([a,n],""):this._join([a,n],d))&&this.family&&(y.strings.prefix=this.family.strings.prefix,y.strings.suffix=this.family.strings.suffix),(v=this._join([l,s],t["comma-dropping-particle"]+" "))&&this.given&&(v.strings.prefix=this.given.strings.prefix,v.strings.suffix=this.given.strings.suffix),b=this._join([y,v],p)),(g=this._join([b,u],p)).isInverted=!0;else{if(t["dropping-particle"]&&t.family&&!t["non-dropping-particle"]){var m,d,g,b,y,v,_,k=t["dropping-particle"];["'","ʼ","’","-"].indexOf(k.slice(-1))>-1&&"de"!==k.slice(0,-1)&&(n=this._join([s,n],""),s=!1)}h?(v=this._join([a,n],""),v=this._join([s,v],d)):v=this._join([s,a,n],d),(v=this._join([v,u],m))&&this.family&&(v.strings.prefix=this.family.strings.prefix,v.strings.suffix=this.family.strings.suffix),l&&this.given&&(l.strings.prefix=this.given.strings.prefix,l.strings.suffix=this.given.strings.suffix),v.strings.prefix&&(t["comma-dropping-particle"]=""),_=this.state.inheritOpt(this.name,"initialize-with")&&this.state.inheritOpt(this.name,"initialize-with").match(/[\u00a0\ufeff]/)&&1===o.initializationLevel?d:" ",g=this._join([l,v],t["comma-dropping-particle"]+_)}return this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,f.LITERAL),this.state.tmp.term_predecessor=!0,this.state.tmp.name_node.children.push(g),g},f.NameOutput.prototype._normalizeNameInput=function(t){var e={literal:t.literal,family:t.family,isInstitution:t.isInstitution,given:t.given,suffix:t.suffix,"comma-suffix":t["comma-suffix"],"non-dropping-particle":t["non-dropping-particle"],"dropping-particle":t["dropping-particle"],"static-ordering":t["static-ordering"],"static-particles":t["static-particles"],"reverse-ordering":t["reverse-ordering"],"full-form-always":t["full-form-always"],"parse-names":t["parse-names"],"comma-dropping-particle":"",block_initialize:t.block_initialize,multi:t.multi};return this._parseName(e),e},f.NameOutput.prototype._stripPeriods=function(t,e){var i=this[t+"_decor"];if(e){if(this.state.tmp.strip_periods)e=e.replace(/\./g,"");else if(i){for(var r=0,s=i.decorations.length;r<s;r+=1)if("@strip-periods"===i.decorations[r][0]&&"true"===i.decorations[r][1]){e=e.replace(/\./g,"");break}}}return e},f.NameOutput.prototype._nonDroppingParticle=function(t){var e=t["non-dropping-particle"];e&&this.state.tmp.sort_key_flag&&(e=e.replace(/[\'\u2019]/,""));var i=this._stripPeriods("family",e);return!!this.state.output.append(i,this.family_decor,!0)&&this.state.output.pop()},f.NameOutput.prototype._droppingParticle=function(t,e,i){var r=t["dropping-particle"];r&&this.state.tmp.sort_key_flag&&(r=r.replace(/[\'\u2019]/,""));var s=this._stripPeriods("given",r);if(t["dropping-particle"]&&t["dropping-particle"].match(/^et.?al[^a-z]$/))this.state.inheritOpt(this.name,"et-al-use-last")?void 0===i?this.etal_spec[e].freeters=2:this.etal_spec[e].persons=2:void 0===i?this.etal_spec[e].freeters=1:this.etal_spec[e].persons=1,t["comma-dropping-particle"]="";else if(this.state.output.append(s,this.given_decor,!0))return this.state.output.pop();return!1},f.NameOutput.prototype._familyName=function(t){var e=this._stripPeriods("family",t.family);return!!this.state.output.append(e,this.family_decor,!0)&&this.state.output.pop()},f.NameOutput.prototype._givenName=function(t,e,i){var r,s,n="long"!==this.state.inheritOpt(this.name,"form","name-form","long"),a=!1!==this.state.inheritOpt(this.name,"initialize"),o="string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&!t.block_initialize;if(t["full-form-always"])s=2;else{r=n?0:o?1:2;var l=this.state.tmp.disambig_settings.givens[e][i];s=l>r?l:r}var u=this.state.citation.opt["givenname-disambiguation-rule"];if(u&&"-with-initials"===u.slice(-14)&&(o=!0),t.family&&1===s)if(o){var p=this.state.inheritOpt(this.name,"initialize-with",!1,"");t.given=f.Util.Names.initializeWith(this.state,t.given,p,!a)}else t.given=f.Util.Names.unInitialize(this.state,t.given);else{if(0===s)return{blob:!1};2===s&&(t.given=f.Util.Names.unInitialize(this.state,t.given))}var c=this._stripPeriods("given",t.given);return this.state.output.append(c,this.given_decor,!0)?{blob:this.state.output.pop(),initializationLevel:s}:{blob:!1}},f.NameOutput.prototype._nameSuffix=function(t){var e,i=t.suffix;i&&"string"==typeof this.state.inheritOpt(this.name,"initialize-with")&&(i=f.Util.Names.initializeWith(this.state,i,this.state.inheritOpt(this.name,"initialize-with"),!0));var r="";return(i=this._stripPeriods("family",i))&&"."===i.slice(-1)&&(i=i.slice(0,-1),r="."),!!this.state.output.append(i,"empty",!0)&&((e=this.state.output.pop()).strings.suffix=r+e.strings.suffix,e)},f.NameOutput.prototype._getLongStyle=function(t){var e;return(e=t.short.length&&this.institutionpart["long-with-short"]?this.institutionpart["long-with-short"]:this.institutionpart.long)||(e=new f.Token),e},f.NameOutput.prototype._getShortStyle=function(){return this.institutionpart.short?this.institutionpart.short:new f.Token},f.NameOutput.prototype._parseName=function(t){var e;if(!t["parse-names"]&&void 0!==t["parse-names"])return t;t.family&&!t.given&&t.isInstitution&&(t.literal=t.family,t.family=void 0,t.isInstitution=void 0),t.family&&'"'===t.family.slice(0,1)&&'"'===t.family.slice(-1)||!t["parse-names"]&&void 0!==t["parse-names"]?(t.family=t.family.slice(1,-1),e=!0,t["parse-names"]=0):e=!1,this.state.opt.development_extensions.parse_names&&!t["non-dropping-particle"]&&t.family&&!e&&t.given&&!t["static-particles"]&&f.parseParticles(t,!0)},f.NameOutput.prototype.getName=function(t,e,i,r){if(r&&"locale-orig"===e)return{name:!1,usedOrig:r};t.family||(t.family=""),t.given||(t.given="");var s,n={};n["static-ordering"]=this.getStaticOrder(t);var a=!0;if("locale-orig"!==e&&(a=!1,t.multi)){for(var o=this.state.opt[e],l=0,u=o.length;l<u;l+=1)if(s=o[l],t.multi._key[s]){a=!0;var p=t.isInstitution;(t=t.multi._key[s]).isInstitution=p,(n=this.getNameParams(s)).transliterated=!0;break}}return(!a&&(s=!1,t.multi&&t.multi.main?s=t.multi.main:this.Item.language&&(s=this.Item.language),s&&(n=this.getNameParams(s))),i||a)?(t.family||(t.family=""),t.given||(t.given=""),t.literal&&(delete t.family,delete t.given),!(t={family:t.family,given:t.given,"non-dropping-particle":t["non-dropping-particle"],"dropping-particle":t["dropping-particle"],suffix:t.suffix,"static-ordering":n["static-ordering"],"static-particles":t["static-particles"],"reverse-ordering":n["reverse-ordering"],"full-form-always":n["full-form-always"],"parse-names":t["parse-names"],"comma-suffix":t["comma-suffix"],"comma-dropping-particle":t["comma-dropping-particle"],transliterated:n.transliterated,block_initialize:n["block-initialize"],literal:t.literal,isInstitution:t.isInstitution,multi:t.multi}).literal&&!t.given&&t.family&&t.isInstitution&&(t.literal=t.family),t.literal&&(delete t.family,delete t.given),{name:t=this._normalizeNameInput(t),usedOrig:r||!a}):{name:!1,usedOrig:r}},f.NameOutput.prototype.getNameParams=function(t){var e={},i=f.localeResolve(this.Item.language,this.state.opt["default-locale"][0]),r=this.state.locale[i.best]?i.best:this.state.opt["default-locale"][0],s=this.state.locale[r].opts["name-as-sort-order"],n=this.state.locale[r].opts["name-as-reverse-order"],a=this.state.locale[r].opts["name-never-short"],o=t.split("-")[0];return s&&s[o]&&(e["static-ordering"]=!0,e["reverse-ordering"]=!1),n&&n[o]&&(e["reverse-ordering"]=!0,e["static-ordering"]=!1),a&&a[o]&&(e["full-form-always"]=!0),e["static-ordering"]&&(e["block-initialize"]=!0),e},f.NameOutput.prototype.setRenderedName=function(t){if("bibliography"===this.state.tmp.area){for(var e="",i=0,r=f.NAME_PARTS.length;i<r;i+=1)t[f.NAME_PARTS[i]]&&(e+=t[f.NAME_PARTS[i]]);this.state.tmp.rendered_name.push(e)}},f.NameOutput.prototype.fixupInstitution=function(t,e,i){!t.literal&&t.family&&(t.literal=t.family,delete t.family);var r=t.literal,s=r,n={long:r.split(/\s*\|\s*/),short:s.split(/\s*\|\s*/)};if(this.state.sys.getAbbreviation){if("short"===this.institution.strings.form){let t=this.Item.jurisdiction;t=this.state.transform.loadAbbreviation(t,"institution-entire",r,this.Item.language),this.state.transform.abbrevs[t]["institution-entire"][r]?r=this.state.transform.abbrevs[t]["institution-entire"][r]:(t=this.Item.jurisdiction,t=this.state.transform.loadAbbreviation(t,"institution-part",r,this.Item.language),this.state.transform.abbrevs[t]["institution-part"][r]&&(r=this.state.transform.abbrevs[t]["institution-part"][r])),r=this._quashChecks(t,r)}if(["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1){let t=this.Item.jurisdiction;t=this.state.transform.loadAbbreviation(t,"institution-part",s,this.Item.language),this.state.transform.abbrevs[t]["institution-part"][s]&&(s=this.state.transform.abbrevs[t]["institution-part"][s]),s=this._quashChecks(t,s),["short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1&&s===r&&(s="")}if(n.long=r.split(/\s*\|\s*/),n.short=s.split(/\s*\|\s*/),["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1)for(var a=n.short.length-1;a>-1;a--){let t=this.Item.jurisdiction;var o=n.short[a];if(t=this.state.transform.loadAbbreviation(t,"institution-part",o,this.Item.language),this.state.transform.abbrevs[t]["institution-part"][o]&&(n.short[a]=this.state.transform.abbrevs[t]["institution-part"][o]),n.short[a].indexOf("|")>-1){let t=n.short,e=t[a].split(/\s*\|\s*/);n.short=t.slice(0,a).concat(e).concat(t.slice(a+1))}}if(this.state.opt.development_extensions.legacy_institution_name_ordering&&n.short.reverse(),n.short=this._trimInstitution(n.short),this.institution.strings["reverse-order"]&&n.short.reverse(),!this.state.tmp.just_looking&&this.Item.jurisdiction){let t=this.Item.jurisdiction;var l=this.state.tmp.abbrev_trimmer;if(l&&l[t]&&l[t][e])for(var u=0,p=n.short.length;u<p;u++){var c=n.short[u];n.short[u]=c.replace(l[t][e],"").trim()}}}return this.state.opt.development_extensions.legacy_institution_name_ordering&&n.long.reverse(),n.long=this._trimInstitution(n.long),this.institution.strings["reverse-order"]&&n.long.reverse(),n},f.NameOutput.prototype.getStaticOrder=function(t,e){var i=!1;return!e&&t["static-ordering"]||0===this._isRomanesque(t)||(!t.multi||!t.multi.main)&&this.Item.language&&["vi","hu"].indexOf(this.Item.language)>-1||t.multi&&t.multi.main&&["vi","hu"].indexOf(t.multi.main.slice(0,2))>-1?i=!0:this.state.opt["auto-vietnamese-names"]&&f.VIETNAMESE_NAMES.exec(t.family+" "+t.given)&&f.VIETNAMESE_SPECIALS.exec(t.family+t.given)&&(i=!0),i},f.NameOutput.prototype._quashChecks=function(t,e){var e=this.state.transform.quashCheck(t,e),i=e.split(/>>[0-9]{4}>>/),r=e.match(/>>([0-9]{4})>>/);e=i.pop();var s=this.Item["original-date"]?this.Item["original-date"]:this.Item.issued;if(s&&(s=!isNaN(s=parseInt(s.year,10))&&s),s){if(i.length>0)for(var n=r.length-1;n>0&&!(s>=parseInt(r[n],10));n--)e=i.pop();e=e.replace(/\s*\|\s*/g,"|")}return e},f.NameOutput.prototype._trimInstitution=function(t){var e=!1,i=!1,r=!1,s=!1,n=t.slice();if(this.institution){if(void 0!==this.institution.strings["use-first"]&&(e=this.institution.strings["use-first"]),void 0!==this.institution.strings["use-last"]&&(r=this.institution.strings["use-last"]),void 0!==this.institution.strings["stop-first"]&&(s=this.institution.strings["stop-first"]),void 0!==this.institution.strings["stop-last"]&&(i=this.institution.strings["stop-last"]),e&&(i&&(n=n.slice(0,-1*i)),n=n.slice(0,e)),r){var a=t.slice();e?s=e:n=[],s&&(a=a.slice(s)),a=a.slice(-1*r),n=n.concat(a)}t=n}return t},f.PublisherOutput=function(t,e){this.state=t,this.group_tok=e,this.varlist=[]},f.PublisherOutput.prototype.render=function(){this.clearVars(),this.composeAndBlob(),this.composeElements(),this.composePublishers(),this.joinPublishers()},f.PublisherOutput.prototype.composeAndBlob=function(){this.and_blob={};var t=!1;"text"===this.group_tok.strings.and?t=this.state.getTerm("and"):"symbol"===this.group_tok.strings.and&&(t="&");var e=new f.Token;e.strings.suffix=" ",e.strings.prefix=" ",this.state.output.append(t,e,!0);var i=this.state.output.pop();e.strings.prefix=this.group_tok.strings["subgroup-delimiter"],this.state.output.append(t,e,!0);var r=this.state.output.pop();this.and_blob.single=!1,this.and_blob.multiple=!1,t&&("always"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?this.and_blob.single=r:"never"===this.group_tok.strings["subgroup-delimiter-precedes-last"]?(this.and_blob.single=i,this.and_blob.multiple=i):(this.and_blob.single=i,this.and_blob.multiple=r))},f.PublisherOutput.prototype.composeElements=function(){for(var t=0;t<2;t+=1)for(var e=["publisher","publisher-place"][t],i=0,r=this["publisher-list"].length;i<r;i+=1){var s=this[e+"-list"][i],n=this[e+"-token"];this.state.output.append(s,n,!0),this[e+"-list"][i]=this.state.output.pop()}},f.PublisherOutput.prototype.composePublishers=function(){for(var t,e=0,i=this["publisher-list"].length;e<i;e+=1)t=[this[this.varlist[0]+"-list"][e],this[this.varlist[1]+"-list"][e]],this["publisher-list"][e]=this._join(t,this.group_tok.strings.delimiter)},f.PublisherOutput.prototype.joinPublishers=function(){var t=this["publisher-list"],e=this._join(t,this.group_tok.strings["subgroup-delimiter"],this.and_blob.single,this.and_blob.multiple,this.group_tok);this.state.output.append(e,"literal")},f.PublisherOutput.prototype._join=f.NameOutput.prototype._join,f.PublisherOutput.prototype._getToken=f.NameOutput.prototype._getToken,f.PublisherOutput.prototype.clearVars=function(){this.state.tmp["publisher-list"]=!1,this.state.tmp["publisher-place-list"]=!1,this.state.tmp["publisher-group-token"]=!1,this.state.tmp["publisher-token"]=!1,this.state.tmp["publisher-place-token"]=!1},f.evaluateLabel=function(t,e,i,r){"locator"===t.strings.term?(r&&r.label&&(s="sub verbo"===r.label?"sub-verbo":r.label),s||(s="page")):s=t.strings.term;var s,n=t.strings.plural;if("number"!=typeof n){var a=r&&"locator"===t.strings.term?r:i;a[t.strings.term]&&(e.processNumber(!1,a,t.strings.term,i.type),n=e.tmp.shadow_numbers[t.strings.term].plural,e.tmp.shadow_numbers[t.strings.term].labelForm||e.tmp.shadow_numbers[t.strings.term].labelDecorations||(t.strings.form?e.tmp.shadow_numbers[t.strings.term].labelForm=t.strings.form:e.tmp.group_context.tip.label_form&&(e.tmp.shadow_numbers[t.strings.term].labelForm=e.tmp.group_context.tip.label_form),e.tmp.shadow_numbers[t.strings.term].labelCapitalizeIfFirst=t.strings.capitalize_if_first,e.tmp.shadow_numbers[t.strings.term].labelDecorations=t.decorations.slice()),["locator","number","page"].indexOf(t.strings.term)>-1&&e.tmp.shadow_numbers[t.strings.term].label&&(s=e.tmp.shadow_numbers[t.strings.term].label),t.decorations&&e.opt.development_extensions.csl_reverse_lookup_support&&(t.decorations.reverse(),t.decorations.push(["@showid","true",t.cslid]),t.decorations.reverse()))}return f.castLabel(e,t,s,n,f.TOLERANT)},f.castLabel=function(t,e,i,r,s){var n=e.strings.form,a=e.strings.capitalize_if_first;t.tmp.group_context.tip.label_form&&("static"===n?t.tmp.group_context.tip.label_static=!0:n=t.tmp.group_context.tip.label_form),t.tmp.group_context.tip.label_capitalize_if_first&&(a=t.tmp.group_context.tip.label_capitalize_if_first);var o=t.getTerm(i,n,r,!1,s,e.default_locale);if(a&&(o=f.Output.Formatters["capitalize-first"](t,o)),t.tmp.strip_periods)o=o.replace(/\./g,"");else for(var l=0,u=e.decorations.length;l<u;l+=1)if("@strip-periods"===e.decorations[l][0]&&"true"===e.decorations[l][1]){o=o.replace(/\./g,"");break}return o},f.Node.name={build:function(t,e){var i;[f.SINGLETON,f.START].indexOf(this.tokentype)>-1&&(void 0===t.tmp.root?(i=void 0,t.tmp.root="citation"):i=t.tmp.root,t.inheritOpt(this,"et-al-subsequent-min")&&t.inheritOpt(this,"et-al-subsequent-min")!==t.inheritOpt(this,"et-al-min")&&(t.opt.update_mode=f.POSITION),t.inheritOpt(this,"et-al-subsequent-use-first")&&t.inheritOpt(this,"et-al-subsequent-use-first")!==t.inheritOpt(this,"et-al-use-first")&&(t.opt.update_mode=f.POSITION),t.tmp.root=i,t.build.name_flag=!0,this.execs.push(function(t){t.tmp.etal_term="et-al",t.tmp.name_delimiter=t.inheritOpt(this,"delimiter","name-delimiter",", "),t.tmp["delimiter-precedes-et-al"]=t.inheritOpt(this,"delimiter-precedes-et-al"),"text"===t.inheritOpt(this,"and")?this.and_term=t.getTerm("and","long",0):"symbol"===t.inheritOpt(this,"and")&&(t.opt.development_extensions.expect_and_symbol_form?this.and_term=t.getTerm("and","symbol",0):this.and_term="&"),t.tmp.and_term=this.and_term,f.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ","string"==typeof t.tmp.name_delimiter&&(this.and_prefix_multiple=t.tmp.name_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),"always"===t.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_single=t.tmp.name_delimiter:"never"===t.inheritOpt(this,"delimiter-precedes-last")?this.and_prefix_multiple&&(this.and_prefix_multiple=" "):"after-inverted-name"===t.inheritOpt(this,"delimiter-precedes-last")&&(this.and_prefix_single&&(this.and_prefix_single=t.tmp.name_delimiter),this.and_prefix_multiple&&(this.and_prefix_multiple=" ")),this.and={},t.inheritOpt(this,"and")?(t.output.append(this.and_term,"empty",!0),this.and.single=t.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,t.output.append(this.and_term,"empty",!0),this.and.multiple=t.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):t.tmp.name_delimiter&&(this.and.single=new f.Blob(t.tmp.name_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new f.Blob(t.tmp.name_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),this.ellipsis={},t.inheritOpt(this,"et-al-use-last")&&(this.ellipsis_term="…",this.ellipsis_prefix_single=" ",this.ellipsis_prefix_multiple=t.inheritOpt(this,"delimiter","name-delimiter",", "),this.ellipsis_suffix=" ",this.ellipsis.single=new f.Blob(this.ellipsis_term),this.ellipsis.single.strings.prefix=this.ellipsis_prefix_single,this.ellipsis.single.strings.suffix=this.ellipsis_suffix,this.ellipsis.multiple=new f.Blob(this.ellipsis_term),this.ellipsis.multiple.strings.prefix=this.ellipsis_prefix_multiple,this.ellipsis.multiple.strings.suffix=this.ellipsis_suffix),void 0===t.tmp["et-al-min"]&&(t.tmp["et-al-min"]=t.inheritOpt(this,"et-al-min")),void 0===t.tmp["et-al-use-first"]&&(t.tmp["et-al-use-first"]=t.inheritOpt(this,"et-al-use-first")),void 0===t.tmp["et-al-use-last"]&&(t.tmp["et-al-use-last"]=t.inheritOpt(this,"et-al-use-last")),t.nameOutput.name=this})),e.push(this)}},f.Node["name-part"]={build:function(t){t.build[this.strings.name]=this}},f.Node.names={build:function(t,e){var i;if((this.tokentype===f.START||this.tokentype===f.SINGLETON)&&(f.Util.substituteStart.call(this,t,e),t.build.substitute_level.push(1)),this.tokentype===f.SINGLETON){for(var r in t.build.names_variables[t.build.names_variables.length-1].concat(this.variables),this.variables){var s=this.variables[r],n=t.build.name_label[t.build.name_label.length-1];Object.keys(n).length&&(n[s]=n[Object.keys(n)[0]])}i=function(t){t.nameOutput.reinit(this,this.variables_real[0])},this.execs.push(i)}if(this.tokentype===f.START&&(t.build.names_flag=!0,t.build.name_flag=!1,t.build.names_level+=1,t.build.names_variables.push(this.variables),t.build.name_label.push({}),i=function(t){t.tmp.can_substitute.push(!0),t.tmp.name_node={},t.tmp.name_node.children=[],t.nameOutput.init(this)},this.execs.push(i)),this.tokentype===f.END){for(var r=0;r<3;r+=1){var a=["family","given","et-al"][r];this[a]=t.build[a],1===t.build.names_level&&(t.build[a]=void 0)}this.label=t.build.name_label[t.build.name_label.length-1],t.build.names_level+=-1,t.build.names_variables.pop(),t.build.name_label.pop(),i=function(t){t.tmp.etal_node?this.etal_style=t.tmp.etal_node:this.etal_style="empty",this.etal_term=t.getTerm(t.tmp.etal_term,"long",0),this.etal_prefix_single=" ",this.etal_prefix_multiple=t.tmp.name_delimiter,"always"===t.tmp["delimiter-precedes-et-al"]?this.etal_prefix_single=t.tmp.name_delimiter:"never"===t.tmp["delimiter-precedes-et-al"]?this.etal_prefix_multiple=" ":"after-inverted-name"===t.tmp["delimiter-precedes-et-al"]&&(this.etal_prefix_single=t.tmp.name_delimiter,this.etal_prefix_multiple=" "),this.etal_suffix="",f.STARTSWITH_ROMANESQUE_REGEXP.test(this.etal_term)||(" "===this.etal_prefix_single&&(this.etal_prefix_single="")," "===this.etal_prefix_multiple&&(this.etal_prefix_multiple="")," "===this.etal_suffix&&(this.etal_suffix=""));for(var e=0;e<3;e+=1){var i=["family","given"][e];t.nameOutput[i]=this[i]}t.nameOutput.with=this.with;var r="with",s="",n="";f.STARTSWITH_ROMANESQUE_REGEXP.test(r)&&(s=" ",n=" ");var a={};a.single=new f.Blob(r),a.single.strings.suffix=n,a.multiple=new f.Blob(r),a.multiple.strings.suffix=n,"always"===t.inheritOpt(t.nameOutput.name,"delimiter-precedes-last")?(a.single.strings.prefix=t.inheritOpt(this,"delimiter","names-delimiter"),a.multiple.strings.prefix=t.inheritOpt(this,"delimiter","names-delimiter")):"contextual"===t.inheritOpt(t.nameOutput.name,"delimiter-precedes-last")?(a.single.strings.prefix=s,a.multiple.strings.prefix=t.inheritOpt(this,"delimiter","names-delimiter")):("after-inverted-name"===t.inheritOpt(t.nameOutput.name,"delimiter-precedes-last")?a.single.strings.prefix=t.inheritOpt(this,"delimiter","names-delimiter"):a.single.strings.prefix=s,a.multiple.strings.prefix=s),t.nameOutput.with=a,t.nameOutput.label=this.label,t.nameOutput.etal_style=this.etal_style,t.nameOutput.etal_term=this.etal_term,t.nameOutput.etal_prefix_single=this.etal_prefix_single,t.nameOutput.etal_prefix_multiple=this.etal_prefix_multiple,t.nameOutput.etal_suffix=this.etal_suffix,t.nameOutput.outputNames(),t.tmp["et-al-use-first"]=void 0,t.tmp["et-al-min"]=void 0,t.tmp["et-al-use-last"]=void 0},this.execs.push(i),i=function(t){t.tmp.can_substitute.pop()||t.tmp.can_substitute.replace(!1,f.LITERAL),1===t.tmp.can_substitute.mystack.length&&(t.tmp.can_block_substitute=!1)},this.execs.push(i),t.build.name_flag=!1}e.push(this),(this.tokentype===f.END||this.tokentype===f.SINGLETON)&&(t.build.substitute_level.pop(),f.Util.substituteEnd.call(this,t,e))}},f.Node.number={build:function(t,e){f.Util.substituteStart.call(this,t,e),"roman"===this.strings.form?this.formatter=t.fun.romanizer:"ordinal"===this.strings.form?this.formatter=t.fun.ordinalizer:"long-ordinal"===this.strings.form&&(this.formatter=t.fun.long_ordinalizer),void 0===this.successor_prefix&&(this.successor_prefix=t[t.build.area].opt.layout_delimiter),void 0===this.splice_prefix&&(this.splice_prefix=t[t.build.area].opt.layout_delimiter),this.execs.push(function(t,e,i){if(0!==this.variables.length){if(r=this.variables[0],void 0===i)var r,i={};if(["locator","locator-extra"].indexOf(r)>-1){if(t.tmp.just_looking||!i[r])return}else if(!e[r])return;if("collection-number"===r&&"legal_case"===e.type&&(t.tmp.renders_collection_number=!0),t.tmp.group_context.tip.force_suppress)return!1;if(["locator","locator-extra"].indexOf(r)>-1?t.processNumber.call(t,this,i,r,e.type):(!t.tmp.group_context.tip.condition&&e[r]&&(t.tmp.just_did_number=(""+e[r]).match(/[0-9]$/)),t.processNumber.call(t,this,e,r,e.type)),this.substring){var s=e[r].slice(this.substring);t.output.append(s,this)}else f.Util.outputNumericField(t,r,e.id);["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!t.tmp.just_looking&&(t.tmp.done_vars.push(this.variables_real[0]),t.tmp.group_context.tip.done_vars.push(this.variables_real[0]))}}),e.push(this),f.Util.substituteEnd.call(this,t,e)}},f.Node.sort={build:function(t,e){if(e=t[t.build.root+"_sort"].tokens,this.tokentype===f.START){"citation"===t.build.area&&(t.opt.sort_citations=!0),t.build.area=t.build.root+"_sort",t.build.extension="_sort";var i=function(t,e){if(t.opt.has_layout_locale){for(var i,r=f.localeResolve(e.language,t.opt["default-locale"][0]),s=t[t.tmp.area.slice(0,-5)].opt.sort_locales,n=0,a=s.length;n<a&&((i=s[n][r.bare])||(i=s[n][r.best]),!i);n+=1);i||(i=t.opt["default-locale"][0]),t.tmp.lang_sort_hold=t.opt.lang,t.opt.lang=i}};this.execs.push(i)}if(this.tokentype===f.END){t.build.area=t.build.root,t.build.extension="";var i=function(t){t.opt.has_layout_locale&&(t.opt.lang=t.tmp.lang_sort_hold,delete t.tmp.lang_sort_hold)};this.execs.push(i)}e.push(this)}},f.Node.substitute={build:function(t,e){var i;if(this.tokentype===f.START){var r=new f.Token("choose",f.START);f.Node.choose.build.call(r,t,e);var s=new f.Token("if",f.SINGLETON);s.tests=[i=function(){return!!t.tmp.value.length&&!t.tmp.common_term_match_fail}],s.test=t.fun.match.any(s,t,s.tests),e.push(s),i=function(t){t.tmp.can_block_substitute=!0,t.tmp.value.length&&!t.tmp.common_term_match_fail&&t.tmp.can_substitute.replace(!1,f.LITERAL),t.tmp.common_term_match_fail=!1},this.execs.push(i),e.push(this)}if(this.tokentype===f.END){e.push(this);var n=new f.Token("choose",f.END);f.Node.choose.build.call(n,t,e)}}},f.Node.text={build:function(t,e){var i,r,s,n,a,o,l,u,p,c,h;if(this.postponed_macro){var m=f.Util.cloneToken(this);m.name="group",m.tokentype=f.START,f.Node.group.build.call(m,t,e),f.expandMacro.call(t,this,e);var d=f.Util.cloneToken(this);d.name="group",d.tokentype=f.END,"juris-locator-label"===this.postponed_macro&&(d.isJurisLocatorLabel=!0),f.Node.group.build.call(d,t,e)}else{if(f.Util.substituteStart.call(this,t,e),this.variables_real||(this.variables_real=[]),this.variables||(this.variables=[]),r="long",s=0,this.strings.form&&(r=this.strings.form),this.strings.plural&&(s=this.strings.plural),"citation-number"===this.variables_real[0]||"year-suffix"===this.variables_real[0]||"citation-label"===this.variables_real[0])"citation-number"===this.variables_real[0]?("citation"===t.build.root&&(t.opt.update_mode=f.NUMERIC),"bibliography"===t.build.root&&(t.opt.bib_mode=f.NUMERIC),"citation-number"===t[t.tmp.area].opt.collapse&&(this.range_prefix=t.getTerm("citation-range-delimiter")),this.successor_prefix=t[t.build.area].opt.layout_delimiter,this.splice_prefix=t[t.build.area].opt.layout_delimiter,i=function(t,e,i){if(n=""+e.id,!t.tmp.just_looking){if("_sort"===t.tmp.area.slice(-5)&&"citation-number"===this.variables[0]){if("bibliography_sort"===t.tmp.area&&t.tmp.group_context.tip.done_vars.push("citation-number"),"citation_sort"===t.tmp.area&&t.bibliography_sort.tmp.citation_number_map)var r=t.bibliography_sort.tmp.citation_number_map[t.registry.registry[e.id].seq];else var r=t.registry.registry[e.id].seq;r&&(r=f.Util.padding(""+r)),t.output.append(r,this);return}i&&i["author-only"]&&t.tmp.element_trace.replace("suppress-me"),r="bibliography_sort"!==t.tmp.area&&t.bibliography_sort.tmp.citation_number_map&&t.bibliography_sort.opt.citation_number_sort_direction===f.DESCENDING?t.bibliography_sort.tmp.citation_number_map[t.registry.registry[n].seq]:t.registry.registry[n].seq,t.opt.citation_number_slug?t.output.append(t.opt.citation_number_slug,this):(o=new f.NumericBlob(t,!1,r,this,e.id),t.tmp.in_cite_predecessor&&(o.suppress_splice_prefix=!0),t.output.append(o,"literal"))}},this.execs.push(i)):"year-suffix"===this.variables_real[0]?(t.opt.has_year_suffix=!0,"year-suffix-ranged"===t[t.tmp.area].opt.collapse&&(this.range_prefix=t.getTerm("citation-range-delimiter")),this.successor_prefix=t[t.build.area].opt.layout_delimiter,t[t.tmp.area].opt["year-suffix-delimiter"]&&(this.successor_prefix=t[t.build.area].opt["year-suffix-delimiter"]),i=function(t,e){if(t.registry.registry[e.id]&&!1!==t.registry.registry[e.id].disambig.year_suffix&&!t.tmp.just_looking){a=parseInt(t.registry.registry[e.id].disambig.year_suffix,10),t[t.tmp.area].opt.cite_group_delimiter&&(this.successor_prefix=t[t.tmp.area].opt.cite_group_delimiter),o=new f.NumericBlob(t,!1,a,this,e.id),l=new f.Util.Suffixator(f.SUFFIX_CHARS),o.setFormatter(l),t.output.append(o,"literal"),u=!1;for(var i=0,r=t.tmp.group_context.mystack.length;i<r;i++){var s=t.tmp.group_context.mystack[i];if(!s.variable_success&&(s.variable_attempt||!s.variable_attempt&&!s.term_intended)){u=!0;break}}p=t[t.tmp.area].opt["year-suffix-delimiter"],u&&p&&!t.tmp.sort_key_flag&&(t.tmp.splice_delimiter=t[t.tmp.area].opt["year-suffix-delimiter"])}},this.execs.push(i)):"citation-label"===this.variables_real[0]&&("bibliography"===t.build.root&&(t.opt.bib_mode=f.TRIGRAPH),t.opt.has_year_suffix=!0,i=function(t,e){(c=e["citation-label"])||(c=t.getCitationLabel(e)),t.tmp.just_looking||(h="",t.registry.registry[e.id]&&!1!==t.registry.registry[e.id].disambig.year_suffix&&(a=parseInt(t.registry.registry[e.id].disambig.year_suffix,10),h=t.fun.suffixator.format(a)),c+=h),t.output.append(c,this)},this.execs.push(i));else if(this.strings.term)i=function(t,e){var i,n=t.opt.gender[e.type],a=this.strings.term;if(""!==(a=t.getTerm(a,r,s,n,f.TOLERANT,this.default_locale))&&(t.tmp.group_context.tip.term_intended=!0),f.UPDATE_GROUP_CONTEXT_CONDITION(t,a,null,this),i=t.tmp.term_predecessor||"in-text"===t.opt.class&&"citation"===t.tmp.area?a:f.Output.Formatters["capitalize-first"](t,a),t.tmp.strip_periods)i=i.replace(/\./g,"");else for(var o=0,l=this.decorations.length;o<l;o+=1)if("@strip-periods"===this.decorations[o][0]&&"true"===this.decorations[o][1]){i=i.replace(/\./g,"");break}t.output.append(i,this),t.tmp.can_block_substitute&&t.tmp.can_substitute.replace(!1,f.LITERAL)},this.execs.push(i),t.build.term=!1,t.build.form=!1,t.build.plural=!1;else if(this.variables_real.length){if(i=function(t,e){"locator"!==this.variables_real[0]&&(t.tmp.have_collapsed=!1),!t.tmp.group_context.tip.condition&&e[this.variables[0]]&&(t.tmp.just_did_number=!1);var i=e[this.variables[0]];i&&!t.tmp.group_context.tip.condition&&((""+i).slice(-1).match(/[0-9]/)?t.tmp.just_did_number=!0:t.tmp.just_did_number=!1)},this.execs.push(i),f.MULTI_FIELDS.indexOf(this.variables_real[0])>-1||this.variables_real[0].indexOf("-main")>-1||this.variables_real[0].indexOf("-sub")>-1||["language-name","language-name-original"].indexOf(this.variables_real[0])>-1){var g=this.variables[0],b=!1,y=!1,v=!1;"short"===r?"-short"!==this.variables_real[0].slice(-6)&&(y=this.variables_real[0]+"-short"):g=!1,t.build.extension?v=!0:(v=!0,b=!0),i=t.transform.getOutputFunction(this.variables,g,b,y,v)}else i=f.CITE_FIELDS.indexOf(this.variables_real[0])>-1?function(t,e,i){i&&i[this.variables[0]]&&(t.processNumber(this,i,this.variables[0],e.type),f.Util.outputNumericField(t,this.variables[0],e.id),["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!t.tmp.just_looking&&t.tmp.done_vars.push(this.variables_real[0]))}:["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume"].indexOf(this.variables_real[0])>-1?function(t,e){t.processNumber(this,e,this.variables[0],e.type),f.Util.outputNumericField(t,this.variables[0],e.id)}:["URL","DOI"].indexOf(this.variables_real[0])>-1?function(t,e){var i;if(this.variables[0]&&(i=t.getVariable(e,this.variables[0],r)))if("URL"===this.variables[0]&&"short"===r&&(i=i.replace(/(.*\.[^\/]+)\/.*/,"$1")).match(/\/\/www\./)&&(i=i.replace(/https?:\/\//,"")),t.opt.development_extensions.wrap_url_and_doi)if(this.decorations.length&&this.decorations[0][0]==="@"+this.variables[0])t.output.append(i,this,!1,!1,!0);else{var s=f.Util.cloneToken(this),n=new f.Blob(null,null,"url-wrapper");if(n.decorations.push(["@DOI","true"]),"DOI"===this.variables_real[0]){this.strings.prefix&&this.strings.prefix.match(/^.*https:\/\/doi\.org\/$/)&&(a=(i=i.replace(/^https?:\/\/doi\.org\//,"")).match(/^https?:\/\//)?"":"https://doi.org/",s.strings.prefix=this.strings.prefix.slice(0,s.strings.prefix.length-16));var a,o=new f.Blob(a),l=new f.Blob(i);n.push(o),n.push(l),t.output.append(n,s,!1,!1,!0)}else{var l=new f.Blob(i);n.push(l),t.output.append(n,s,!1,!1,!0)}}else{if(this.decorations.length)for(var u=this.decorations.length-1;u>-1;u--)this.decorations[u][0]==="@"+this.variables[0]&&(this.decorations=this.decorations.slice(0,u).concat(this.decorations.slice(u+1)));t.output.append(i,this,!1,!1,!0)}}:"section"===this.variables_real[0]?function(t,e){var i;(i=t.getVariable(e,this.variables[0],r))&&t.output.append(i,this)}:"hereinafter"===this.variables_real[0]?function(t,e){var i=t.transform.abbrevs.default.hereinafter[e.id];i&&(t.output.append(i,this),t.tmp.group_context.tip.variable_success=!0)}:function(t,e){var i;this.variables[0]&&(i=t.getVariable(e,this.variables[0],r))&&(i=(i=""+i).split("\\").join(""),t.output.append(i,this))};this.execs.push(i)}else this.strings.value&&(i=function(t){t.tmp.group_context.tip.term_intended=!0,f.UPDATE_GROUP_CONTEXT_CONDITION(t,this.strings.value,!0,this),t.output.append(this.strings.value,this),t.tmp.can_block_substitute&&t.tmp.can_substitute.replace(!1,f.LITERAL)},this.execs.push(i));e.push(this),f.Util.substituteEnd.call(this,t,e)}}},f.Node.intext={build:function(t,e){this.tokentype===f.START&&(t.build.area="intext",t.build.root="intext",t.build.extension="",this.execs.push(function(t,e){t.tmp.area="intext",t.tmp.root="intext",t.tmp.extension=""})),this.tokentype===f.END&&(t.intext_sort={opt:{sort_directions:t.citation_sort.opt.sort_directions}},t.intext.srt=t.citation.srt),e.push(this)}},f.Attributes={},f.Attributes["@disambiguate"]=function(t,e){if(this.tests||(this.tests=[]),"true"===e){t.opt.has_disambiguate=!0;var i=function(e){if("bibliography"===t.tmp.area){if(t.tmp.disambiguate_count<t.registry.registry[e.id].disambig.disambiguate)return t.tmp.disambiguate_count+=1,!0}else if(t.tmp.disambiguate_maxMax+=1,t.tmp.disambig_settings.disambiguate&&t.tmp.disambiguate_count<t.tmp.disambig_settings.disambiguate)return t.tmp.disambiguate_count+=1,!0;return!1};this.tests.push(i)}else if("check-ambiguity-and-backreference"===e){var i=function(e){return!!t.registry.registry[e.id].disambig.disambiguate&&!!(t.registry.registry[e.id]["citation-count"]>1)};this.tests.push(i)}},f.Attributes["@is-numeric"]=function(t,e){this.tests||(this.tests=[]);for(var i=e.split(/\s+/),r=function(e){return function(i,r){var s=i;if(r&&["locator","locator-extra"].indexOf(e)>-1&&(s=r),!s[e])return!1;if(f.NUMERIC_VARIABLES.indexOf(e)>-1){if(t.tmp.shadow_numbers[e]||t.processNumber(!1,s,e,i.type),t.tmp.shadow_numbers[e].numeric)return!0}else if(["title","version"].indexOf(e)>-1&&s[e].slice(-1)===""+parseInt(s[e].slice(-1),10))return!0;return!1}},s=0;s<i.length;s+=1)this.tests.push(r(i[s]))},f.Attributes["@is-uncertain-date"]=function(t,e){this.tests||(this.tests=[]);for(var i=e.split(/\s+/),r=function(t){return function(e){return!!e[t]&&!!e[t].circa}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))},f.Attributes["@locator"]=function(t,e){this.tests||(this.tests=[]);var i=e.replace("sub verbo","sub-verbo");i=i.split(/\s+/);for(var r=function(e){return function(i,r){var s;return t.processNumber(!1,r,"locator"),!!(s=t.tmp.shadow_numbers.locator.label)&&e===s}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))},f.Attributes["@position"]=function(t,e){this.tests||(this.tests=[]),t.opt.update_mode=f.POSITION;for(var i,r=e.split(/\s+/),s=function(t,e){return!!e&&!!(f.POSITION_MAP[e.position]>=f.POSITION_MAP[f.POSITION_SUBSEQUENT])&&!!e["near-note"]},n=function(t,e){return!!e&&f.POSITION_MAP[e.position]==f.POSITION_MAP[f.POSITION_SUBSEQUENT]&&!e["near-note"]},a=function(e){return function(i,r){if("bibliography"===t.tmp.area)return!1;if(r&&void 0===r.position&&(r.position=0),r&&"number"==typeof r.position){if(0===r.position&&0===e)return!0;else if(e>0&&f.POSITION_MAP[r.position]>=f.POSITION_MAP[e])return!0}else if(0===e)return!0;return!1}},o=0,l=r.length;o<l;o+=1){var i=r[o];"first"===i?i=f.POSITION_FIRST:"container-subsequent"===i?i=f.POSITION_CONTAINER_SUBSEQUENT:"subsequent"===i?i=f.POSITION_SUBSEQUENT:"ibid"===i?i=f.POSITION_IBID:"ibid-with-locator"===i&&(i=f.POSITION_IBID_WITH_LOCATOR),"near-note"===i?this.tests.push(s):"far-note"===i?this.tests.push(n):this.tests.push(a(i))}},f.Attributes["@type"]=function(t,e){this.tests||(this.tests=[]);for(var i=e.split(/\s+/),r=function(t){return function(e){return e.type===t}},s=[],n=0,a=i.length;n<a;n+=1)s.push(r(i[n]));this.tests.push(t.fun.match.any(this,t,s))},f.Attributes["@variable"]=function(t,e){if(this.tests||(this.tests=[]),this.variables=e.split(/\s+/),this.variables_real=this.variables.slice(),"label"===this.name&&this.variables[0])this.strings.term=this.variables[0];else if(["names","date","text","number"].indexOf(this.name)>-1)i=function(t,e,i){for(var r=this.variables.length-1;r>-1;r+=-1)this.variables.pop();for(var r=0,s=this.variables_real.length;r<s;r++)-1===t.tmp.done_vars.indexOf(this.variables_real[r])&&this.variables.push(this.variables_real[r]),t.tmp.can_block_substitute&&t.tmp.done_vars.push(this.variables_real[r])},this.execs.push(i),i=function(t,e,i){for(var r=!1,s=0,n=this.variables.length;s<n;s++){var a=this.variables[s];if(["authority","committee"].indexOf(a)>-1&&"string"==typeof e[a]&&"names"===this.name){var o=!0,l=e[a].split(/\s*;\s*/),u={};if(e.multi&&e.multi._keys[a]){for(var p in e.multi._keys[a])if(u[p]=e.multi._keys[a][p].split(/\s*;\s*/),u[p].length!==l.length){o=!1;break}}o||(l=[e[a]],u=e.multi._keys[a]);for(var c=0,h=l.length;c<h;c++){var m={literal:l[c],multi:{_key:{}}};for(var p in u){var d={literal:u[p][c]};m.multi._key[p]=d}l[c]=m}e[a]=l}if("short"!==this.strings.form||e[a]||("title"===a?a="title-short":"container-title"===a&&(a="container-title-short")),"year-suffix"===a){r=!0;break}if(f.DATE_VARIABLES.indexOf(a)>-1){if(t.opt.development_extensions.locator_date_and_revision&&"locator-date"===a){r=!0;break}if(e[a]){for(var g in e[a])if((-1!==this.dateparts.indexOf(g)||"literal"===g)&&e[a][g]){r=!0;break}if(r)break}}else if("locator"===a){i&&i.locator&&(r=!0);break}else if("locator-extra"===a){i&&i["locator-extra"]&&(r=!0);break}else if(["citation-number","citation-label"].indexOf(a)>-1){r=!0;break}else if("first-reference-note-number"===a){i&&i["first-reference-note-number"]&&(r=!0);break}else if("first-container-reference-note-number"===a){i&&i["first-container-reference-note-number"]&&(r=!0);break}else if("hereinafter"===a){t.transform.abbrevs.default.hereinafter[e.id]&&t.sys.getAbbreviation&&e.id&&(r=!0);break}else if("object"==typeof e[a])break;else if("string"==typeof e[a]&&e[a]){r=!0;break}else if("number"==typeof e[a]){r=!0;break}if(r)break}if(r){for(var s=0,n=this.variables_real.length;s<n;s++){var a=this.variables_real[s];("citation-number"!==a||"bibliography"!==t.tmp.area)&&(t.tmp.cite_renders_content=!0),t.tmp.group_context.tip.variable_success=!0,t.tmp.can_substitute.value()&&"bibliography"===t.tmp.area&&"string"==typeof e[a]&&(t.tmp.name_node.top=t.output.current.value(),t.tmp.rendered_name.push(e[a]))}t.tmp.can_substitute.replace(!1,f.LITERAL)}else t.tmp.group_context.tip.variable_attempt=!0},this.execs.push(i);else if(["if","else-if","condition"].indexOf(this.name)>-1)for(var i,r=function(e){return function(i,r){var s=i;if(r&&["locator","locator-extra","first-reference-note-number","first-container-reference-note-number","locator-date"].indexOf(e)>-1&&(s=r),"hereinafter"===e&&t.sys.getAbbreviation&&s.id){if(t.transform.abbrevs.default.hereinafter[s.id])return!0}else if(s[e]){if("number"==typeof s[e]||"string"==typeof s[e])return!0;else if("object"==typeof s[e]){for(var n in s[e])if(s[e][n])return!0}}return!1}},s=0,n=this.variables.length;s<n;s+=1)this.tests.push(r(this.variables[s]))},f.Attributes["@page"]=function(t,e){this.tests||(this.tests=[]);var i=e.replace("sub verbo","sub-verbo");i=i.split(/\s+/);for(var r=function(e){return function(i){var r;return t.processNumber(!1,i,"page",i.type),r=t.tmp.shadow_numbers.page.label?"sub verbo"===t.tmp.shadow_numbers.page.label?"sub-verbo":t.tmp.shadow_numbers.page.label:"page",t.tmp.shadow_numbers.page.values.length>0&&t.tmp.shadow_numbers.page.values[0].gotosleepability&&(t.tmp.shadow_numbers.page.values[0].labelVisibility=!1),e===r}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))},f.Attributes["@number"]=function(t,e){this.tests||(this.tests=[]);for(var i=e.split(/\s+/),r=function(e){return function(i){var r;return t.processNumber(!1,i,"number",i.type),e===(t.tmp.shadow_numbers.number.label?t.tmp.shadow_numbers.number.label:"number")}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))},f.Attributes["@jurisdiction"]=function(t,e){this.tests||(this.tests=[]);var i=e.split(/\s+/);this.tests.push(function(t){if(!t.jurisdiction)return!1;for(var e=t.jurisdiction,r=0,s=i.length;r<s;r++)if(e===i[r])return!0;return!1})},f.Attributes["@country"]=function(t,e){this.tests||(this.tests=[]);var i=e.split(/\s+/);this.tests.push(function(t){if(!t.country)return!1;for(var e=t.country,r=0,s=i.length;r<s;r++)if(e===i[r])return!0;return!1})},f.Attributes["@context"]=function(t,e){this.tests||(this.tests=[]),this.tests.push(function(){return["bibliography","citation"].indexOf(e)>-1?t.tmp.area.slice(0,e.length)===e:"alternative"===e?!!t.tmp.abort_alternative:void 0})},f.Attributes["@has-year-only"]=function(t,e){this.tests||(this.tests=[]);for(var i=e.split(/\s+/),r=function(t){return function(e){var i=e[t];return!!i&&!i.month&&!i.season}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))},f.Attributes["@has-to-month-or-season"]=function(t,e){this.tests||(this.tests=[]);for(var i=e.split(/\s+/),r=function(t){return function(e){var i=e[t];return!!i&&(!!i.month||!!i.season)&&!i.day}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))},f.Attributes["@has-day"]=function(t,e){this.tests||(this.tests=[]);for(var i=e.split(/\s+/),r=function(t){return function(e){var i=e[t];return!!i&&!!i.day}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))},f.Attributes["@is-plural"]=function(t,e){this.tests||(this.tests=[]),this.tests.push(function(i){var r=i[e];if(r&&r.length){for(var s=0,n=0,a=!1,o=0,l=r.length;o<l;o+=1)t.opt.development_extensions.spoof_institutional_affiliations&&(r[o].literal||r[o].isInstitution&&r[o].family&&!r[o].given)?(n+=1,a=!1):(s+=1,a=!0);if(s>1)return!0;if(n>1)return!0;if(n&&a)return!0}return!1})},f.Attributes["@is-multiple"]=function(t,e){this.tests||(this.tests=[]),this.tests.push(function(t){return(""+t[e]).split(/(?:,\s|\s(?:tot\sen\smet|līdz|oraz|and|bis|έως|και|och|až|do|en|et|in|ir|ja|og|sa|to|un|und|és|și|i|u|y|à|e|a|и|-|–)\s|—|\&)/).length>1})},f.Attributes["@locale"]=function(t,e){this.tests||(this.tests=[]);var i,r,s,n,a,o=t.opt["default-locale"][0];if("layout"===this.name){if(this.locale_raw=e,this.tokentype===f.START){t.opt.multi_layout||(t.opt.multi_layout=[]);var l=[],u=e.split(/\s+/),p={},c=f.localeResolve(u[0],o);l.push(c),c.generic?p[c.generic]=c.best:p[c.best]=c.best;for(var n=1,a=u.length;n<a;n+=1){var h=f.localeResolve(u[n],o);l.push(h),h.generic?p[h.generic]=c.best:p[h.best]=c.best}t[t.build.area].opt.sort_locales.push(p),t.opt.multi_layout.push(l)}t.opt.has_layout_locale=!0}else{s=e.split(/\s+/);var m=[];for(n=0,a=s.length;n<a;n+=1)r=s[n],i=f.localeResolve(r,o),2===s[n].length&&m.push(i.bare),t.localeConfigure(i,!0),s[n]=i;var d=s.slice();this.tests.push(function(e){var i,r=!1,s=!1;for(n=0,i=e.language?e.language:o,s=f.localeResolve(i,o),a=d.length;n<a;n+=1)if(s.best===d[n].best){t.tmp.condition_lang_counter_arr.push(t.tmp.condition_counter),t.tmp.condition_lang_val_arr.push(t.opt.lang),t.opt.lang=d[0].best,r=!0;break}return!r&&m.indexOf(s.bare)>-1&&(t.tmp.condition_lang_counter_arr.push(t.tmp.condition_counter),t.tmp.condition_lang_val_arr.push(t.opt.lang),t.opt.lang=d[0].best,r=!0),r})}},f.Attributes["@alternative-node-internal"]=function(t){this.tests||(this.tests=[]),this.tests.push(function(){return!t.tmp.abort_alternative})},f.Attributes["@locale-internal"]=function(t,e){var i,r,s,n,a,o;for(this.tests||(this.tests=[]),s=e.split(/\s+/),this.locale_bares=[],n=0,a=s.length;n<a;n+=1)r=s[n],i=f.localeResolve(r,t.opt["default-locale"][0]),2===s[n].length&&this.locale_bares.push(i.bare),t.localeConfigure(i),s[n]=i;this.locale_default=t.opt["default-locale"][0],this.locale=s[0].best,this.locale_list=s.slice(),this.tests.push((o=this,function(e){var i=!1,s=!1;if(e.language&&(r=e.language,(s=f.localeResolve(r,t.opt["default-locale"][0])).best===t.opt["default-locale"][0]&&(s=!1)),s){for(n=0,a=o.locale_list.length;n<a;n+=1)if(s.best===o.locale_list[n].best){t.opt.lang=o.locale,t.tmp.last_cite_locale=o.locale,t.output.openLevel("empty"),t.output.current.value().new_locale=o.locale,i=!0;break}!i&&o.locale_bares.indexOf(s.bare)>-1&&(t.opt.lang=o.locale,t.tmp.last_cite_locale=o.locale,t.output.openLevel("empty"),t.output.current.value().new_locale=o.locale,i=!0)}return i}))},f.Attributes["@court-class"]=function(t,e){this.tests||(this.tests=[]);for(var i=e.split(/\s+/),r=function(e){return function(i){return f.GET_COURT_CLASS(t,i)===e}},s=0,n=i.length;s<n;s++)this.tests.push(r(i[s]))},f.Attributes["@container-multiple"]=function(t,e){var i;this.tests||(this.tests=[]),this.tests.push((i="true"===e,function(e){if(t.tmp.container_item_count[e.container_id]&&t.tmp.container_item_count[e.container_id]>1)return i;return!i}))},f.Attributes["@container-subsequent"]=function(t,e){var i;this.tests||(this.tests=[]),this.tests.push((i="true"===e,function(e){return t.tmp.container_item_pos[e.container_id]>1?i:!i}))},f.Attributes["@has-subunit"]=function(t,e){this.tests||(this.tests=[]),this.tests.push(function(t){var i=0;for(var r in t[e]){var s=t[e][r];if(!s.given){var n=(s.literal?s.literal:s.family).split("|").length;(0===i||n<i)&&(i=n)}}return i>1})},f.Attributes["@cite-form"]=function(t,e){this.tests||(this.tests=[]),this.tests.push(function(t){return t["cite-form"]===e})},f.Attributes["@disable-duplicate-year-suppression"]=function(t,e){t.opt.disable_duplicate_year_suppression=e.split(/\s+/)},f.Attributes["@consolidate-containers"]=function(t,e){f.Attributes["@track-containers"](t,e);var i=e.split(/\s+/);t.bibliography.opt.consolidate_containers=i},f.Attributes["@track-containers"]=function(t,e){var i=e.split(/\s+/);t.bibliography.opt.track_container_items||(t.bibliography.opt.track_container_items=[]),t.bibliography.opt.consolidate_containers||(t.bibliography.opt.consolidate_containers=[]),t.bibliography.opt.track_container_items=t.bibliography.opt.track_container_items.concat(i)},f.Attributes["@parallel-first"]=function(t,e){t.opt.parallel.enable=!0;var i=e.split(/\s+/);for(var r in t.opt.track_repeat||(t.opt.track_repeat={}),this.parallel_first={},i){var s=i[r];this.parallel_first[s]=!0,t.opt.track_repeat[s]=!0}},f.Attributes["@parallel-last"]=function(t,e){t.opt.parallel.enable=!0;var i=e.split(/\s+/);for(var r in t.opt.track_repeat||(t.opt.track_repeat={}),this.parallel_last={},i){var s=i[r];this.parallel_last[s]=!0,t.opt.track_repeat[s]=!0}},f.Attributes["@parallel-last-to-first"]=function(t,e){t.opt.parallel.enable=!0;var i=e.split(/\s+/);this.parallel_last_to_first={};for(var r=0,s=i.length;r<s;r++)this.parallel_last_to_first[i[r]]=!0},f.Attributes["@parallel-delimiter-override"]=function(t,e){t.opt.parallel.enable=!0,this.strings.set_parallel_delimiter_override=e},f.Attributes["@parallel-delimiter-override-on-suppress"]=function(t,e){t.opt.parallel.enable=!0,this.strings.set_parallel_delimiter_override_on_suppress=e},f.Attributes["@no-repeat"]=function(t,e){t.opt.parallel.enable=!0;var i=e.split(/\s+/);for(var r in t.opt.track_repeat||(t.opt.track_repeat={}),this.non_parallel={},i){var s=i[r];this.non_parallel[s]=!0,t.opt.track_repeat[s]=!0}},f.Attributes["@require"]=function(t,e){t.opt.use_context_condition=!0,this.strings.require=e},f.Attributes["@reject"]=function(t,e){t.opt.use_context_condition=!0,this.strings.reject=e},f.Attributes["@require-comma-on-symbol"]=function(t,e){t.opt.require_comma_on_symbol=e},f.Attributes["@gender"]=function(t,e){this.gender=e},f.Attributes["@cslid"]=function(t,e){this.cslid=parseInt(e,10)},f.Attributes["@capitalize-if-first"]=function(t,e){this.strings.capitalize_if_first_override=e},f.Attributes["@label-capitalize-if-first"]=function(t,e){this.strings.label_capitalize_if_first_override=e},f.Attributes["@label-form"]=function(t,e){this.strings.label_form_override=e},f.Attributes["@part-separator"]=function(t,e){this.strings["part-separator"]=e},f.Attributes["@leading-noise-words"]=function(t,e){this["leading-noise-words"]=e},f.Attributes["@name-never-short"]=function(t,e){this["name-never-short"]=e},f.Attributes["@class"]=function(t,e){t.opt.class=e},f.Attributes["@version"]=function(t,e){t.opt.version=e},f.Attributes["@value"]=function(t,e){this.strings.value=e},f.Attributes["@name"]=function(t,e){this.strings.name=e},f.Attributes["@form"]=function(t,e){this.strings.form=e},f.Attributes["@date-parts"]=function(t,e){this.strings["date-parts"]=e},f.Attributes["@range-delimiter"]=function(t,e){this.strings["range-delimiter"]=e},f.Attributes["@macro"]=function(t,e){this.postponed_macro=e},f.Attributes["@term"]=function(t,e){"sub verbo"===e?this.strings.term="sub-verbo":this.strings.term=e},f.Attributes["@xmlns"]=function(){},f.Attributes["@lang"]=function(t,e){e&&(t.build.lang=e)},f.Attributes["@lingo"]=function(){},f.Attributes["@macro-has-date"]=function(){this["macro-has-date"]=!0},f.Attributes["@suffix"]=function(t,e){this.strings.suffix=e},f.Attributes["@prefix"]=function(t,e){this.strings.prefix=e},f.Attributes["@delimiter"]=function(t,e){this.strings.delimiter=e},f.Attributes["@match"]=function(t,e){this.match=e},f.Attributes["@names-min"]=function(t,e){var i=parseInt(e,10);t[t.build.area].opt.max_number_of_names<i&&(t[t.build.area].opt.max_number_of_names=i),this.strings["et-al-min"]=i},f.Attributes["@names-use-first"]=function(t,e){this.strings["et-al-use-first"]=parseInt(e,10)},f.Attributes["@names-use-last"]=function(t,e){"true"===e?this.strings["et-al-use-last"]=!0:this.strings["et-al-use-last"]=!1},f.Attributes["@sort"]=function(t,e){"descending"===e&&(this.strings.sort_direction=f.DESCENDING)},f.Attributes["@plural"]=function(t,e){"always"===e||"true"===e?this.strings.plural=1:"never"===e||"false"===e?this.strings.plural=0:"contextual"===e&&(this.strings.plural=!1)},f.Attributes["@has-publisher-and-publisher-place"]=function(){this.strings["has-publisher-and-publisher-place"]=!0},f.Attributes["@publisher-delimiter-precedes-last"]=function(t,e){this.strings["publisher-delimiter-precedes-last"]=e},f.Attributes["@publisher-delimiter"]=function(t,e){this.strings["publisher-delimiter"]=e},f.Attributes["@publisher-and"]=function(t,e){this.strings["publisher-and"]=e},f.Attributes["@givenname-disambiguation-rule"]=function(t,e){f.GIVENNAME_DISAMBIGUATION_RULES.indexOf(e)>-1&&(t.citation.opt["givenname-disambiguation-rule"]=e)},f.Attributes["@collapse"]=function(t,e){e&&(t[this.name].opt.collapse=e)},f.Attributes["@cite-group-delimiter"]=function(t,e){e&&(t[t.tmp.area].opt.cite_group_delimiter=e)},f.Attributes["@names-delimiter"]=function(t,e){t.setOpt(this,"names-delimiter",e)},f.Attributes["@name-form"]=function(t,e){t.setOpt(this,"name-form",e)},f.Attributes["@subgroup-delimiter"]=function(t,e){this.strings["subgroup-delimiter"]=e},f.Attributes["@subgroup-delimiter-precedes-last"]=function(t,e){this.strings["subgroup-delimiter-precedes-last"]=e},f.Attributes["@name-delimiter"]=function(t,e){t.setOpt(this,"name-delimiter",e)},f.Attributes["@et-al-min"]=function(t,e){var i=parseInt(e,10);t[t.build.area].opt.max_number_of_names<i&&(t[t.build.area].opt.max_number_of_names=i),t.setOpt(this,"et-al-min",i)},f.Attributes["@et-al-use-first"]=function(t,e){t.setOpt(this,"et-al-use-first",parseInt(e,10))},f.Attributes["@et-al-use-last"]=function(t,e){"true"===e?t.setOpt(this,"et-al-use-last",!0):t.setOpt(this,"et-al-use-last",!1)},f.Attributes["@et-al-subsequent-min"]=function(t,e){var i=parseInt(e,10);t[t.build.area].opt.max_number_of_names<i&&(t[t.build.area].opt.max_number_of_names=i),t.setOpt(this,"et-al-subsequent-min",i)},f.Attributes["@et-al-subsequent-use-first"]=function(t,e){t.setOpt(this,"et-al-subsequent-use-first",parseInt(e,10))},f.Attributes["@suppress-min"]=function(t,e){this.strings["suppress-min"]=parseInt(e,10)},f.Attributes["@suppress-max"]=function(t,e){this.strings["suppress-max"]=parseInt(e,10)},f.Attributes["@and"]=function(t,e){t.setOpt(this,"and",e)},f.Attributes["@delimiter-precedes-last"]=function(t,e){t.setOpt(this,"delimiter-precedes-last",e)},f.Attributes["@delimiter-precedes-et-al"]=function(t,e){t.setOpt(this,"delimiter-precedes-et-al",e)},f.Attributes["@initialize-with"]=function(t,e){t.setOpt(this,"initialize-with",e)},f.Attributes["@initialize"]=function(t,e){"false"===e&&t.setOpt(this,"initialize",!1)},f.Attributes["@name-as-reverse-order"]=function(t,e){this["name-as-reverse-order"]=e},f.Attributes["@name-as-sort-order"]=function(t,e){"style-options"===this.name?this["name-as-sort-order"]=e:t.setOpt(this,"name-as-sort-order",e)},f.Attributes["@sort-separator"]=function(t,e){t.setOpt(this,"sort-separator",e)},f.Attributes["@require-match"]=function(t,e){"true"===e&&(this.requireMatch=!0)},f.Attributes["@exclude-types"]=function(t,e){t.bibliography.opt.exclude_types=e.split(/\s+/)},f.Attributes["@exclude-with-fields"]=function(t,e){t.bibliography.opt.exclude_with_fields=e.split(/\s+/)},f.Attributes["@year-suffix-delimiter"]=function(t,e){t[this.name].opt["year-suffix-delimiter"]=e},f.Attributes["@after-collapse-delimiter"]=function(t,e){t[this.name].opt["after-collapse-delimiter"]=e},f.Attributes["@subsequent-author-substitute"]=function(t,e){t[this.name].opt["subsequent-author-substitute"]=e},f.Attributes["@subsequent-author-substitute-rule"]=function(t,e){t[this.name].opt["subsequent-author-substitute-rule"]=e},f.Attributes["@disambiguate-add-names"]=function(t,e){"true"===e&&(t.opt["disambiguate-add-names"]=!0)},f.Attributes["@disambiguate-add-givenname"]=function(t,e){"true"===e&&(t.opt["disambiguate-add-givenname"]=!0)},f.Attributes["@disambiguate-add-year-suffix"]=function(t,e){"true"===e&&"numeric"!==t.opt.xclass&&(t.opt["disambiguate-add-year-suffix"]=!0)},f.Attributes["@second-field-align"]=function(t,e){("flush"===e||"margin"===e)&&(t[this.name].opt["second-field-align"]=e)},f.Attributes["@hanging-indent"]=function(t,e){"true"===e&&(t.opt.development_extensions.hanging_indent_legacy_number?t[this.name].opt.hangingindent=2:t[this.name].opt.hangingindent=!0)},f.Attributes["@line-spacing"]=function(t,e){e&&e.match(/^[.0-9]+$/)&&(t[this.name].opt["line-spacing"]=parseFloat(e,10))},f.Attributes["@entry-spacing"]=function(t,e){e&&e.match(/^[.0-9]+$/)&&(t[this.name].opt["entry-spacing"]=parseFloat(e,10))},f.Attributes["@near-note-distance"]=function(t,e){t[this.name].opt["near-note-distance"]=parseInt(e,10)},f.Attributes["@substring"]=function(t,e){this.substring=parseInt(e,10)},f.Attributes["@text-case"]=function(t,e){this.execs.push(function(t,i){"normal"===e?this.text_case_normal=!0:(this.strings["text-case"]=e,"title"===e&&i.jurisdiction&&(this.strings["text-case"]="passthrough"))})},f.Attributes["@page-range-format"]=function(t,e){t.opt["page-range-format"]=e},f.Attributes["@year-range-format"]=function(t,e){t.opt["year-range-format"]=e},f.Attributes["@default-locale"]=function(t,e){if("style"===this.name){var i,r,s,n,a=e.match(/-x-(sort|translit|translat)-/g);if(a)for(s=0,r=a.length;s<r;s+=1)a[s]=a[s].replace(/^-x-/,"").replace(/-$/,"");for(s=1,n=[(i=e.split(/-x-(?:sort|translit|translat)-/))[0]],r=i.length;s<r;s+=1)n.push(a[s-1]),n.push(i[s]);for(s=1,r=(i=n.slice()).length;s<r;s+=2)t.opt["locale-"+i[s]].push(i[s+1].replace(/^\s*/g,"").replace(/\s*$/g,""));i.length?t.opt["default-locale"]=i.slice(0,1):t.opt["default-locale"]=["en"]}else"true"===e&&(this.default_locale=!0)},f.Attributes["@default-locale-sort"]=function(t,e){t.opt["default-locale-sort"]=e},f.Attributes["@demote-non-dropping-particle"]=function(t,e){t.opt["demote-non-dropping-particle"]=e},f.Attributes["@initialize-with-hyphen"]=function(t,e){"false"===e&&(t.opt["initialize-with-hyphen"]=!1)},f.Attributes["@institution-parts"]=function(t,e){this.strings["institution-parts"]=e},f.Attributes["@if-short"]=function(t,e){"true"===e&&(this.strings["if-short"]=!0)},f.Attributes["@substitute-use-first"]=function(t,e){this.strings["substitute-use-first"]=parseInt(e,10)},f.Attributes["@use-first"]=function(t,e){this.strings["use-first"]=parseInt(e,10)},f.Attributes["@use-last"]=function(t,e){this.strings["use-last"]=parseInt(e,10)},f.Attributes["@stop-first"]=function(t,e){this.strings["stop-first"]=parseInt(e,10)},f.Attributes["@stop-last"]=function(t,e){this.strings["stop-last"]=-1*parseInt(e,10)},f.Attributes["@reverse-order"]=function(t,e){"true"===e&&(this.strings["reverse-order"]=!0)},f.Attributes["@display"]=function(t,e){2===t.bibliography.tokens.length&&(t.opt.using_display=!0),this.strings.cls=e},f.Stack=function(t,e){this.mystack=[],(e||t)&&this.mystack.push(t),this.tip=this.mystack[0]},f.Stack.prototype.push=function(t,e){e||t?this.mystack.push(t):this.mystack.push(""),this.tip=this.mystack[this.mystack.length-1]},f.Stack.prototype.clear=function(){this.mystack=[],this.tip={}},f.Stack.prototype.replace=function(t,e){0===this.mystack.length&&f.error("Internal CSL processor error: attempt to replace nonexistent stack item with "+t),e||t?this.mystack[this.mystack.length-1]=t:this.mystack[this.mystack.length-1]="",this.tip=this.mystack[this.mystack.length-1]},f.Stack.prototype.pop=function(){var t=this.mystack.pop();return this.mystack.length?this.tip=this.mystack[this.mystack.length-1]:this.tip={},t},f.Stack.prototype.value=function(){return this.mystack.slice(-1)[0]},f.Stack.prototype.length=function(){return this.mystack.length},f.Parallel=function(t){this.state=t},f.Parallel.prototype.StartCitation=function(t,e){if(this.state.tmp.suppress_repeats=[],!(t.length<2)){for(var i=0,r=!1,s=[],n=0,a=t.length-1;n<a;n++){var o=t[n][0],l=t[n+1][0],u=!1,p={};if(t[n][0].seeAlso&&t[n][0].seeAlso.length>0&&!r){u=!0;var c=(r=[t[n][0].id].concat(t[n][0].seeAlso)).slice(),h=t.slice(n);h[0][1].parallel="first";for(var f=0,m=h.length;f<m;f++){var d=h[f][0].id,g=c.indexOf(d);if(i=!1,-1===g?i=n+f-1:n+f===t.length-1&&(i=n+f),i){s.push([n,i]);break}c=c.slice(0,g).concat(c.slice(g+1))}}for(var b in n>0&&u&&(this.state.tmp.suppress_repeats[n-1].START=!0,u=!1),this.state.opt.track_repeat)if(o[b]&&l[b])if("string"==typeof l[b]||"number"==typeof l[b]){if("title"===b&&o["title-short"]&&l["title-short"])var y=o["title-short"],v=l["title-short"];else var y=o[b],v=l[b];y==v?p[b]=!0:p[b]=!1}else if(void 0===o[b].length){p[b]=!1;var _=o[b].year,k=l[b].year;_&&k&&_==k&&(p[b]=!0)}else{var y=JSON.stringify(o[b]),v=JSON.stringify(l[b]);y===v?p[b]=!0:p[b]=!1}else p[b]=!1;r||(p.ORPHAN=!0),i===n&&(p.END=!0,r=!1),this.state.tmp.suppress_repeats.push(p)}for(var f=0,m=s.length;f<m;f++){var w=t[s[f][0]][0].id;this.state.registry.registry[w].master=!0,this.state.registry.registry[w].siblings=[];for(var x=s[f][0],E=s[f][1],T=x;T<E;T++){this.state.tmp.suppress_repeats[T].SIBLING=!0;var O=t[T+1][0].id;t[T+1][1].parallel="other",this.state.registry.registry[w].siblings.push(O)}}}},f.Parallel.prototype.checkRepeats=function(t){var e=this.state.tmp.cite_index;if(this.state.tmp.suppress_repeats){if(t.parallel_first&&Object.keys(t.parallel_first).length>0){var i=[{}].concat(this.state.tmp.suppress_repeats),r=!0;for(var s in t.parallel_first)(!i[e][s]||i[e].START)&&(r=!1);return r}if(t.parallel_last&&Object.keys(t.parallel_last).length>0){var i=this.state.tmp.suppress_repeats.concat([{}]),r=Object.keys(t.parallel_last).length>0;for(var s in t.parallel_last)(!i[e][s]||i[e].END)&&(r=!1);return r}if(t.non_parallel&&Object.keys(t.non_parallel).length>0){var i=[{}].concat(this.state.tmp.suppress_repeats),r=!0;for(var s in t.non_parallel)i[e][s]||(r=!1);return r}}return!1},f.Util={},f.Util.Match=function(){this.any=function(t,e,i){return function(t,e){for(var r=0,s=i.length;r<s;r+=1)if(i[r](t,e))return!0;return!1}},this.none=function(t,e,i){return function(t,e){for(var r=0,s=i.length;r<s;r+=1)if(i[r](t,e))return!1;return!0}},this.all=function(t,e,i){return function(t,e){for(var r=0,s=i.length;r<s;r+=1)if(!i[r](t,e))return!1;return!0}},this[void 0]=this.all,this.nand=function(t,e,i){return function(t,e){for(var r=0,s=i.length;r<s;r+=1)if(!i[r](t,e))return!0;return!1}}},f.Transform=function(t){function e(e,i,r){var s="";return t.sys.getHumanForm&&("country"===e?s=(s=t.sys.getHumanForm(i.toLowerCase(),!1,!0)).split("|")[0]:"jurisdiction"===e&&(s=t.sys.getHumanForm(i.toLowerCase(),!1,!0),s=r?"":s.split("|").slice(1).join(", "))),s}function i(t,i,r,s,n,a,o){var l,u="",p=f.FIELD_CATEGORY_REMAP[a];if(!p)return n;var c=n;t.sys.normalizeAbbrevsKey&&(c=t.sys.normalizeAbbrevsKey(a,n));var h=!1;if("jurisdiction"===a&&c&&(h=-1===c.indexOf(":")),["jurisdiction","country"].indexOf(a)>-1&&n===n.toLowerCase()&&(c=n.toUpperCase()),t.sys.getAbbreviation){l=["jurisdiction","country","language-name","language-name-original"].indexOf(a)>-1?"default":r.jurisdiction?r.jurisdiction:"default";var m=t.transform.loadAbbreviation(l,p,c,r.language);if(t.transform.abbrevs[m][p]&&c){var d=t.transform.abbrevs[m][p][c];u="short"===i.strings.form&&d?h?"":d:e(a,c,h)}}return!u&&(!t.opt.development_extensions.require_explicit_legal_case_title_short||"legal_case"!==r.type)&&s&&r[s]&&o&&(u=r[s]),u||t.sys.getAbbreviation||!t.sys.getHumanForm||(u=e(a,c,h)),u||h||t.sys.getHumanForm&&"jurisdiction"===a||(u=n),t.opt.development_extensions.force_title_abbrev_fallback&&"title"===a&&u===n&&r["title-short"]&&(u=r["title-short"]),u}function r(e,i){var r,s=t.opt["default-locale"][0].slice(0,2);if(r=t.opt.development_extensions.strict_text_case_locales?RegExp("^([a-zA-Z]{2})(?:$|-.*| .*)"):RegExp("^([a-zA-Z]{2})(?:$|-.*|.*)"),e.language){var n=(""+e.language).match(r);s=n?n[1]:"tlh"}return e.multi&&e.multi&&e.multi.main&&e.multi.main[i]&&(s=e.multi.main[i]),(!t.opt.development_extensions.strict_text_case_locales||t.opt.development_extensions.normalize_lang_keys_to_lowercase)&&(s=s.toLowerCase()),s}function s(e,i,s,n,a,o){var l=!1;if(!e[i])return{name:"",usedOrig:a,token:f.Util.cloneToken(this)};var u=!1;f.VARIABLES_WITH_SHORT_FORM.indexOf(i)>-1&&o&&(i+="-short",u=!0);var p=!1,c=null,h=[];"-short"===i.slice(-6)?(h.push(i),h.push(i.slice(0,-6))):h.push(i);for(var m=0,d=h.length;m<d;m++){var g=!1,i=h[m];w={name:"",usedOrig:a,locale:r(e,i)},x=t.opt[s]?t.opt[s].slice():[];var b=!1;if("locale-orig"===s?(a||(w.name=e[i],w.usedOrig=!1),b=!0,l=!0):n&&(void 0===x||0===x.length)&&(w.name=e[i],w.usedOrig=!0,b=!0,l=!0),!b){for(var y=0,v=x.length;y<v;y+=1){if(k=(_=x[y]).split(/[\-_]/)[0],_&&e.multi&&e.multi._keys[i]&&e.multi._keys[i][_]){w.name=e.multi._keys[i][_],w.locale=_,b=!0,g=!0,l=!1;break}if(k&&e.multi&&e.multi._keys[i]&&e.multi._keys[i][k]){w.name=e.multi._keys[i][k],w.locale=k,b=!0,g=!0,l=!1;break}}!w.name&&n&&(w={name:e[i],usedOrig:!0,locale:r(e,i)},l=!0)}if(w.token=f.Util.cloneToken(this),0===m?(g&&(w.found_variant_ok=!0),c=w,u||void 0!==x&&0!==x.length||(p=!0),g&&(p=!0)):u||g||!c?g&&(w.found_variant_ok=!0):(w=c,i=h[0]),["title","container-title"].indexOf(i)>-1&&!a&&(!w.token.strings["text-case"]||"sentence"===w.token.strings["text-case"]||"normal"===w.token.strings["text-case"])){t.opt.lang;var _,k,w,x,E=!l&&w.locale,T=i.slice(0,-5),O="sentence"===w.token.strings["text-case"];w.name=f.titlecaseSentenceOrNormal(t,e,T,E,O),delete w.token.strings["text-case"]}if(p)break}return w}function n(e,i){var r=i.match(/^(?:#[0-9]+)*(?:!((?:[-_a-z]+(?:(?:.*)))(?:,(?:[-_a-z]+(?:(?:.*))))*))*>>>/);if(r&&(i=i.slice(r[0].length),r[1]))for(var s=r[1].split(","),n=0,a=s.length;n<a;n+=1){var o=s[n].match(/^([-_a-z]+)(?:\:(.*))*$/),l=o[1],u=t.tmp.abbrev_trimmer;o[2]?u&&e&&(u[e]||(u[e]={}),u[e][l]=o[2]):-1===t.tmp.done_vars.indexOf(l)&&(u&&e&&(u.QUASHES[e]||(u.QUASHES[e]={}),u.QUASHES[e][l]=!0),t.tmp.done_vars.push(l))}return i}this.abbrevs={},this.abbrevs.default=new t.sys.AbbreviationSegments,this.getTextSubField=s,this.loadAbbreviation=function(e,i,r,s){e||(e="default");var n=e.split(":")[0],a=f.getAbbrevsDomain(t,n,s);return(a&&(e+="@"+a),r)?t.sys.getAbbreviation&&((e=t.sys.getAbbreviation(t.opt.styleID,t.transform.abbrevs,e,i,r))||(e="default",a&&(e+="@"+a))):(t.transform.abbrevs[e]||(t.transform.abbrevs[e]=new t.sys.AbbreviationSegments),t.transform.abbrevs[e][i]||(t.transform.abbrevs[e][i]={})),e},this.quashCheck=n,this.getOutputFunction=function(e,r,a,o){var l,u=f.LangPrefsMap[e[0]];return l=!!u&&t.opt["cite-lang-prefs"][u],function(a,p,c){if(!e[0]||!p[e[0]]&&!p[o]||!a.tmp.just_looking&&c&&c["suppress-author"]&&!a.tmp.probably_rendered_something&&a.tmp.can_substitute.length()>1)return null;var h,m,d,g,b,y,v,_,k,w,x,E={primary:!1,secondary:!1,tertiary:!1};if("_sort"===a.tmp.area.slice(-5))E.primary="locale-sort";else if(l&&1===l.length&&"locale-orig"===l[0])E.primary="locale-orig",l=!1;else if(l&&!a.tmp.multi_layout)for(var T=["primary","secondary","tertiary"],O=0,A=T.length;O<A&&!(l.length-1<O);O+=1)l[O]&&(E[T[O]]="locale-"+l[O]);else E.primary="locale-orig";if("title-short"!==e[0]&&("bibliography"===a.tmp.area||"citation"===a.tmp.area&&"note"===a.opt.xclass&&c&&!c.position)||(E.secondary=!1,E.tertiary=!1),a.tmp.multi_layout&&(E.secondary=!1,E.tertiary=!1),a.tmp["publisher-list"])return"publisher"===e[0]?a.tmp["publisher-token"]=this:"publisher-place"===e[0]&&(a.tmp["publisher-place-token"]=this),null;var S=a.tmp.lang_array.slice(),I=s.call(this,p,e[0],E.primary,!0,null,r);m=I.name,d=I.locale;var _=I.token,j=I.usedOrig;if(r&&!I.found_variant_ok&&(m=i(a,_,p,o,m,r,!0))&&((h=m.match(/^#([0-9]+).*>>>/))&&h[1]&&(p["cite-form"]=h[1]),a.tmp.just_looking||(m=n(p.jurisdiction,m))),function(e,r,s,n){var a=e.variables[0];if(t.publisherOutput&&s)if(-1===["publisher","publisher-place"].indexOf(a));else{t.publisherOutput[a+"-token"]=e,t.publisherOutput.varlist.push(a);var o=s.split(/;\s*/);o.length===t.publisherOutput[a+"-list"].length&&(t.publisherOutput[a+"-list"]=o);for(var l=0,u=o.length;l<u;l+=1)o[l]=i(t,e,r,!1,o[l],n,!0);return t.tmp[a+"-token"]=e,!0}return!1}(this,p,m,r))return a.tmp.lang_array=S,null;if(g=!1,y=!1,E.secondary&&(g=(I=s.call(this,p,e[0],E.secondary,!1,I.usedOrig,null,r)).name,b=I.locale,k=I.token,r&&!I.found_variant_ok&&g&&(g=i(a,k,p,!1,g,r,!0))),E.tertiary&&(y=(I=s.call(this,p,e[0],E.tertiary,!1,I.usedOrig,null,r)).name,v=I.locale,w=I.token,r&&!I.found_variant_ok&&y&&(y=i(a,w,p,!1,y,r,!0))),"locale-translit"===E.primary&&(x=a.opt.citeAffixes[u][E.primary].prefix),"<i>"===x&&"title"===e[0]&&!j){for(var C=!1,O=0,A=_.decorations.length;O<A;O+=1)"@font-style"===_.decorations[O][0]&&"italic"===_.decorations[O][1]&&(C=!0);C||_.decorations.push(["@font-style","italic"])}if("en"!==d&&"title"===_.strings["text-case"]&&(_.strings["text-case"]="passthrough"),"title"===e[0]&&(m=f.demoteNoiseWords(a,m,this["leading-noise-words"])),g||y){if(a.output.openLevel("empty"),_.strings.suffix=_.strings.suffix.replace(/[ .,]+$/,""),d&&(a.tmp.lang_array=[d].concat(S)),f.UPDATE_GROUP_CONTEXT_CONDITION(a,null,null,_,_.strings.prefix+m),a.output.append(m,_),a.tmp.probably_rendered_something=!0,m===g&&(g=!1),g){k.strings.prefix=a.opt.citeAffixes[u][E.secondary].prefix,k.strings.suffix=a.opt.citeAffixes[u][E.secondary].suffix,k.strings.prefix||(k.strings.prefix=" ");for(var O=k.decorations.length-1;O>-1;O+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(k.decorations[O].join("/"))>-1&&(k.decorations=k.decorations.slice(0,O).concat(k.decorations.slice(O+1)));"en"!==b&&"title"===k.strings["text-case"]&&(k.strings["text-case"]="passthrough"),b&&(a.tmp.lang_array=[b].concat(S));var N=new f.Token;N.decorations.push(["@font-style","normal"]),N.decorations.push(["@font-weight","normal"]),a.output.openLevel(N),a.output.append(g,k),a.output.closeLevel(),a.output.current.value(),a.output.current.value().blobs.length}if(m===y&&(y=!1),y){w.strings.prefix=a.opt.citeAffixes[u][E.tertiary].prefix,w.strings.suffix=a.opt.citeAffixes[u][E.tertiary].suffix,w.strings.prefix||(w.strings.prefix=" ");for(var O=w.decorations.length-1;O>-1;O+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(w.decorations[O].join("/"))>-1&&(w.decorations=w.decorations.slice(0,O).concat(w.decorations.slice(O+1)));"en"!==v&&"title"===w.strings["text-case"]&&(w.strings["text-case"]="passthrough"),v&&(a.tmp.lang_array=[v].concat(S));var P=new f.Token;P.decorations.push(["@font-style","normal"]),P.decorations.push(["@font-weight","normal"]),a.output.openLevel(P),a.output.append(y,w),a.output.closeLevel(),a.output.current.value(),a.output.current.value().blobs.length}a.output.closeLevel()}else d&&(a.tmp.lang_array=[d].concat(S)),f.UPDATE_GROUP_CONTEXT_CONDITION(a,null,null,_,_.strings.prefix+m),a.output.append(m,_),a.tmp.probably_rendered_something=!0;return a.tmp.lang_array=S,a.tmp.can_block_substitute&&a.tmp.name_node.children.push(a.output.current.value()),null}}},f.Token=function(t,e,i){this.name=t,this.strings={},this.strings.delimiter=void 0,this.strings.prefix="",this.strings.suffix="",this.decorations=[],this.variables=[],this.execs=[],this.tokentype=e},f.Util.cloneToken=function(t){var e,i,r,s;if("string"==typeof t)return t;for(var i in e=new f.Token(t.name,t.tokentype),t.strings)t.strings.hasOwnProperty(i)&&(e.strings[i]=t.strings[i]);if(t.decorations)for(r=0,e.decorations=[],s=t.decorations.length;r<s;r+=1)e.decorations.push(t.decorations[r].slice());return t.variables&&(e.variables=t.variables.slice()),t.execs&&(e.execs=t.execs.slice(),t.tests&&(e.tests=t.tests.slice())),e},f.AmbigConfig=function(){this.maxvals=[],this.minval=1,this.names=[],this.givens=[],this.year_suffix=!1,this.disambiguate=0},f.Blob=function(t,e,i){var r,s,n;if(this.levelname=i,e){for(var n in this.strings={prefix:"",suffix:""},e.strings)e.strings.hasOwnProperty(n)&&(this.strings[n]=e.strings[n]);for(s=0,this.decorations=[],r=void 0===e.decorations?0:e.decorations.length;s<r;s+=1)this.decorations.push(e.decorations[s].slice())}else this.strings={},this.strings.prefix="",this.strings.suffix="",this.strings.delimiter="",this.decorations=[];"string"==typeof t?this.blobs=t:t?this.blobs=[t]:this.blobs=[],this.alldecor=[this.decorations]},f.Blob.prototype.push=function(t){"string"==typeof this.blobs?f.error("Attempt to push blob onto string object"):!1!==t&&(t.alldecor=t.alldecor.concat(this.alldecor),this.blobs.push(t))},f.NumericBlob=function(t,e,i,r,s){if(this.id=s,this.alldecor=[],this.num=i,this.particle=e,this.blobs=i.toString(),this.status=f.START,this.strings={},r){if(r.strings["text-case"]){var n=r.strings["text-case"];this.particle=f.Output.Formatters[n](t,this.particle),this.blobs=f.Output.Formatters[n](t,this.blobs)}this.gender=r.gender,this.decorations=r.decorations,this.strings.prefix=r.strings.prefix,this.strings.suffix=r.strings.suffix,this.strings["text-case"]=r.strings["text-case"],this.successor_prefix=r.successor_prefix,this.range_prefix=r.range_prefix,this.splice_prefix=r.splice_prefix,this.formatter=r.formatter,this.formatter||(this.formatter=new f.Output.DefaultFormatter),this.formatter&&(this.type=this.formatter.format(1))}else this.decorations=[],this.strings.prefix="",this.strings.suffix="",this.successor_prefix="",this.range_prefix="",this.splice_prefix="",this.formatter=new f.Output.DefaultFormatter},f.NumericBlob.prototype.setFormatter=function(t){this.formatter=t,this.type=this.formatter.format(1)},f.Output.DefaultFormatter=function(){},f.Output.DefaultFormatter.prototype.format=function(t){return t.toString()},f.NumericBlob.prototype.checkNext=function(t,e){e?(this.status=f.START,"object"==typeof t&&(t.num===this.num+1?t.status=f.SUCCESSOR:t.status=f.SEEN)):t&&t.num&&this.type===t.type&&t.num===this.num+1?this.status===f.START||this.status===f.SEEN?t.status=f.SUCCESSOR:(this.status===f.SUCCESSOR||this.status===f.SUCCESSOR_OF_SUCCESSOR)&&(this.range_prefix?(t.status=f.SUCCESSOR_OF_SUCCESSOR,this.status=f.SUPPRESS):t.status=f.SUCCESSOR):(this.status===f.SUCCESSOR_OF_SUCCESSOR&&(this.status=f.END),"object"==typeof t&&(t.status=f.SEEN))},f.NumericBlob.prototype.checkLast=function(t){return(this.status===f.SEEN||t.num!==this.num-1&&this.status===f.SUCCESSOR)&&(this.status=f.SUCCESSOR,!0)},f.Util.fixDateNode=function(t,e,i){var r,s,n,a,o,l,u,p,c,h,f,m,d,g=this.cslXml.getAttributeValue(i,"lingo"),b=this.cslXml.getAttributeValue(i,"default-locale");if(this.build.date_key=!0,r=this.cslXml.getAttributeValue(i,"form"),g=b?this.opt["default-locale"][0]:this.cslXml.getAttributeValue(i,"lingo"),!this.getDate(r,b))return t;var y=this.cslXml.getAttributeValue(i,"date-parts");for(var v in s=this.cslXml.getAttributeValue(i,"variable"),p=this.cslXml.getAttributeValue(i,"prefix"),c=this.cslXml.getAttributeValue(i,"suffix"),m=this.cslXml.getAttributeValue(i,"display"),d=this.cslXml.getAttributeValue(i,"cslid"),n=this.cslXml.nodeCopy(this.getDate(r,b)),this.cslXml.setAttribute(n,"lingo",this.opt.lang),this.cslXml.setAttribute(n,"form",r),this.cslXml.setAttribute(n,"date-parts",y),this.cslXml.setAttribute(n,"cslid",d),this.cslXml.setAttribute(n,"variable",s),this.cslXml.setAttribute(n,"default-locale",b),p&&this.cslXml.setAttribute(n,"prefix",p),c&&this.cslXml.setAttribute(n,"suffix",c),m&&this.cslXml.setAttribute(n,"display",m),h=this.cslXml.children(n))a=h[v],"date-part"===this.cslXml.nodename(a)&&(o=this.cslXml.getAttributeValue(a,"name"),b&&this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(n,"date-part",o,"@default-locale","true"));for(var v in h=this.cslXml.children(i))if(a=h[v],"date-part"===this.cslXml.nodename(a))for(l in o=this.cslXml.getAttributeValue(a,"name"),f=this.cslXml.attributes(a))"@name"!==l&&(g&&g!==this.opt.lang&&["@suffix","@prefix","@form"].indexOf(l)>-1||(u=f[l],this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(n,"date-part",o,l,u)));if("year"===this.cslXml.getAttributeValue(i,"date-parts"))this.cslXml.deleteNodeByNameAttribute(n,"month"),this.cslXml.deleteNodeByNameAttribute(n,"day");else if("year-month"===this.cslXml.getAttributeValue(i,"date-parts"))this.cslXml.deleteNodeByNameAttribute(n,"day");else if("month-day"===this.cslXml.getAttributeValue(i,"date-parts")){for(var _=this.cslXml.children(n),k=1,w=this.cslXml.numberofnodes(_);k<w;k++)if("year"===this.cslXml.getAttributeValue(_[k],"name")){this.cslXml.setAttribute(_[k-1],"suffix","");break}this.cslXml.deleteNodeByNameAttribute(n,"year")}return this.cslXml.insertChildNodeAfter(t,i,e,n)},f.dateMacroAsSortKey=function(t,e){f.dateAsSortKey.call(this,t,e,!0)},f.dateAsSortKey=function(t,e,i){var r,s,n,a,o,l,u,p,c=this.variables[0],h="empty";if(i&&t.tmp.extension&&(h="macro-with-date"),void 0===(r=e[c])&&(r={"date-parts":[[0]]}),void 0===this.dateparts&&(this.dateparts=["year","month","day"]),r.raw?r=t.fun.dateparser.parseDateToArray(r.raw):r["date-parts"]&&(r=t.dateParseArray(r)),void 0===r&&(r={}),r.year)for(u=0,p=f.DATE_PARTS_INTERNAL.length;u<p;u+=1)if(s=f.DATE_PARTS_INTERNAL[u],n=0,"_end"===(a=s).slice(-4)&&(a=a.slice(0,-4)),r[s]&&this.dateparts.indexOf(a)>-1&&(n=r[s]),"year"===s.slice(0,4)){o=f.Util.Dates[a].numeric(t,n);var l="1";"-"===o[0]&&(l="0",o=9999-parseInt(o=o.slice(1),10)),t.output.append(f.Util.Dates[s.slice(0,4)].numeric(t,l+o),h)}else(n=f.Util.Dates[a]["numeric-leading-zeros"](t,n))||(n="00"),t.output.append(n,h)},f.Engine.prototype.dateParseArray=function(t){var e,i,r,s;for(i in e={},t)if("date-parts"===i){(r=t["date-parts"]).length>1&&r[0].length!==r[1].length&&f.error("CSL data error: element mismatch in date range input."),s=["","_end"];for(var n=0,a=r.length;n<a;n+=1)for(var o=0,l=f.DATE_PARTS.length;o<l;o+=1)isNaN(parseInt(r[n][o],10))?e[f.DATE_PARTS[o]+s[n]]=void 0:e[f.DATE_PARTS[o]+s[n]]=parseInt(r[n][o],10)}else t.hasOwnProperty(i)&&("literal"===i&&"object"==typeof t.literal&&"string"==typeof t.literal.part?(f.debug("Warning: fixing up weird literal date value"),e.literal=t.literal.part):e[i]=t[i]);return e},f.Util.Names={},f.Util.Names.compareNamesets=f.NameOutput.prototype._compareNamesets,f.Util.Names.unInitialize=function(t,e){var i,r,s,n,a;if(!e)return"";for(i=0,s=e.split(/(?:\-|\s+)/),n=e.match(/(\-|\s+)/g),a="",r=s.length;i<r;i+=1)a+=s[i],i<r-1&&(a+=n[i]);return a},f.Util.Names.initializeWith=function(t,e,i,r){if(!e)return"";if(i||(i=""),["Lord","Lady"].indexOf(e)>-1||!e.replace(/^(?:<[^>]+>)*/,"").match(f.STARTSWITH_ROMANESQUE_REGEXP)&&!i.match("%s"))return e;!1===t.opt["initialize-with-hyphen"]&&(e=e.replace(/\-/g," ")),e=(e=e.replace(/\s*\-\s*/g,"-").replace(/\s+/g," ")).replace(/-([a-z])/g,"–$1");for(var s,n,a,s=e.length-2;s>-1;s+=-1)"."===e.slice(s,s+1)&&" "!==e.slice(s+1,s+2)&&(e=e.slice(0,s)+". "+e.slice(s+1));var o=f.Output.Formatters.nameDoppel.split(e),l=[];if(l=[o.strings[0]],0===o.tags.length){var u=l[0].match(/[^\.]+$/);u&&1===u[0].length&&u[0]!==u[0].toLowerCase()&&(l[0]+=".")}for(s=1,n=o.strings.length;s<n;s+=1)l.push(o.tags[s-1]),l.push(o.strings[s]);return(r?this.doNormalize(t,l,i):this.doInitialize(t,l,i)).replace(/\u2013([a-z])/g,"-$1")},f.Util.Names.notag=function(t){return t.replace(/^(?:<[^>]+>)*/,"")},f.Util.Names.mergetag=function(t,e,i){var r=e.match(/(?:-*<[^>]+>-*)/g);return r&&(e=r.join(""),(r=i.match(/^(.*[^\s])*(\s+)$/))?(r[1]=r[1]?r[1]:"",i=r[1]+e+r[2]):i+=e),i},f.Util.Names.tagonly=function(t,e){var i=e.match(/(?:<[^>]+>)+/);return i?i.join(""):e},f.Util.Names.doNormalize=function(t,e,i){i=i||"";var r,s,n=[];for(r=0,s=e.length;r<s;r+=1)this.notag(e[r]).length>1&&"."===this.notag(e[r]).slice(-1)?(e[r]=e[r].replace(/^(.*)\.(.*)$/,"$1$2"),n.push(!0)):1===e[r].length&&e[r].toUpperCase()===e[r]?n.push(!0):n.push(!1);for(r=0,s=e.length;r<s;r+=2)n[r]&&(r<e.length-2&&(e[r+1]=this.tagonly(t,e[r+1]),n[r+2]||(e[r+1]=this.tagonly(t,e[r+1])+" "),e[r+2].length>1?e[r+1]=i.replace(/\ufeff$/,"")+e[r+1]:e[r+1]=this.mergetag(t,e[r+1],i)),r===e.length-1&&(e[r]=e[r]+i));return e.join("").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},f.Util.Names.doInitialize=function(t,e,i){for(r=0,s=e.length;r<s;r+=2)if(u=e[r])if(!(n=u.match(f.NAME_INITIAL_REGEXP))&&!u.match(f.STARTSWITH_ROMANESQUE_REGEXP)&&u.length>1&&i.match("%s")&&(n=u.match(/(.)(.*)/)),n&&n[2]&&n[3]&&(n[1]=n[1]+n[2],n[2]=""),n&&n[1].slice(0,1)===n[1].slice(0,1).toUpperCase()){var r,s,n,a,o,l,u,p="";if(n[2]){var c="";for(a=0,o=(l=n[2].split("")).length;a<o;a+=1){var h=l[a];if(h===h.toUpperCase())c+=h;else break}c.length<n[2].length&&(p=f.toLocaleLowerCase.call(t,c))}e[r]=n[1]+p,r<s-1?i.match("%s")?e[r]=i.replace("%s",e[r]):e[r+1].indexOf("-")>-1?e[r+1]=this.mergetag(t,e[r+1].replace("-",""),i)+"-":e[r+1]=this.mergetag(t,e[r+1],i):i.match("%s")?e[r]=i.replace("%s",e[r]):e.push(i)}else!u.match(f.ROMANESQUE_REGEXP)||n&&n[3]||(e[r]=" "+u);var m=e.join("");return m.replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")},f.Util.Names.getRawName=function(t){var e=[];return t.literal?e.push(t.literal):(t.given&&e.push(t.given),t.family&&e.push(t.family)),e.join(" ")},f.Util.Dates={},f.Util.Dates.year={},f.Util.Dates.year.long=function(t,e){return e||(e="boolean"==typeof e?"":0),e.toString()},f.Util.Dates.year.imperial=function(t,e,i){var r,s,n="";e||(e="boolean"==typeof e?"":0),i=i?"_end":"";var a=t.tmp.date_object["month"+i];for(a=a?""+a:"1";a.length<2;)a="0"+a;var o=t.tmp.date_object["day"+i];for(o=o?""+o:"1";o.length<2;)o="0"+o;var l=parseInt(e+a+o,10);if(l>=0x11d0c4c&&l<0x123c25a?(r="明治",s=1867):l>=0x123c25a&&l<0x125e729?(r="大正",s=1911):l>=0x125e729&&l<0x12f7fbc?(r="昭和",s=1925):l>=0x12f7fbc&&(r="平成",s=1988),r&&s){var u=r;t.sys.normalizeAbbrevsKey&&(u=t.sys.normalizeAbbrevsKey("number",r)),t.transform.abbrevs.default.number[u]||t.transform.loadAbbreviation("default","number",u,null),t.transform.abbrevs.default.number[u]&&(r=t.transform.abbrevs.default.number[u]),n=r+(e-s)}return n},f.Util.Dates.year.short=function(t,e){if((e=e.toString())&&4===e.length)return e.substr(2)},f.Util.Dates.year.numeric=function(t,e){var i,r=(e=""+e).match(/([0-9]*)$/);for(r?(i=e.slice(0,-1*r[1].length),e=r[1]):(i=e,e="");e.length<4;)e="0"+e;return i+e},f.Util.Dates.normalizeMonth=function(t,e){var i;if(t||(t=0),(t=""+t).match(/^[0-9]+$/)||(t=0),t=parseInt(t,10),e){var r={stub:"month-",num:t};if(r.num<1||r.num>24)r.num=0;else{for(;r.num>16;)r.num=r.num-4;r.num>12&&(r.stub="season-",r.num=r.num-12)}i=r}else(t<1||t>12)&&(t=0),i=t;return i},f.Util.Dates.month={},f.Util.Dates.month.numeric=function(t,e){var e=f.Util.Dates.normalizeMonth(e);return e||(e=""),e},f.Util.Dates.month["numeric-leading-zeros"]=function(t,e){var e=f.Util.Dates.normalizeMonth(e);if(e)for(e=""+e;e.length<2;)e="0"+e;else e="";return e},f.Util.Dates.month.long=function(t,e,i,r){var s=f.Util.Dates.normalizeMonth(e,!0),e=s.num;if(e){for(e=""+e;e.length<2;)e="0"+e;e=t.getTerm(s.stub+e,"long",0,0,!1,r)}else e="";return e},f.Util.Dates.month.short=function(t,e,i,r){var s=f.Util.Dates.normalizeMonth(e,!0),e=s.num;if(e){for(e=""+e;e.length<2;)e="0"+e;e=t.getTerm(s.stub+e,"short",0,0,!1,r)}else e="";return e},f.Util.Dates.day={},f.Util.Dates.day.numeric=function(t,e){return e.toString()},f.Util.Dates.day.long=f.Util.Dates.day.numeric,f.Util.Dates.day["numeric-leading-zeros"]=function(t,e){for(e||(e=0),e=e.toString();e.length<2;)e="0"+e;return e.toString()},f.Util.Dates.day.ordinal=function(t,e,i){return t.fun.ordinalizer.format(e,i)},f.Util.Sort={},f.Util.Sort.strip_prepositions=function(t){var e;return"string"==typeof t&&(e=t.match(/^(([aA]|[aA][nN]|[tT][hH][eE])\s+)/)),e&&(t=t.substr(e[1].length)),t},f.Util.substituteStart=function(t,e){var i,r,s,n,a;s=function(t,e,i){for(var r=0,s=this.decorations.length;r<s;r+=1)if("@strip-periods"===this.decorations[r][0]&&"true"===this.decorations[r][1]){t.tmp.strip_periods+=1;break}},this.execs.push(s),this.decorations&&t.opt.development_extensions.csl_reverse_lookup_support&&(this.decorations.reverse(),this.decorations.push(["@showid","true",this.cslid]),this.decorations.reverse()),("text"===this.name&&!this.postponed_macro||["number","date","names"].indexOf(this.name)>-1)&&this.execs.push(function(t,e,i){"author"===t.tmp.element_trace.value()||"names"===this.name?(!t.tmp.just_looking&&i&&i["author-only"]&&"intext"!==t.tmp.area&&t.tmp.probably_rendered_something&&t.tmp.element_trace.push("suppress-me"),!t.tmp.just_looking&&i&&i["suppress-author"]&&!t.tmp.probably_rendered_something&&t.tmp.element_trace.push("suppress-me")):"date"===this.name?!t.tmp.just_looking&&i&&i["author-only"]&&"intext"!==t.tmp.area&&t.tmp.probably_rendered_something&&t.tmp.element_trace.push("suppress-me"):!t.tmp.just_looking&&i&&i["author-only"]&&"intext"!==t.tmp.area?!t.tmp.probably_rendered_something&&t.tmp.can_block_substitute||t.tmp.element_trace.push("suppress-me"):i&&i["suppress-author"]&&t.tmp.element_trace.push("do-not-suppress-me")}),i=this.strings.cls,this.strings.cls=!1,0===t.build.render_nesting_level&&("bibliography"===t.build.area&&t.bibliography.opt["second-field-align"]?((r=new f.Token("group",f.START)).decorations=[["@display","left-margin"]],s=function(t,e){t.tmp.render_seen||(r.strings.first_blob=e.id,t.output.startTag("bib_first",r))},r.execs.push(s),e.push(r)):f.DISPLAY_CLASSES.indexOf(i)>-1&&((r=new f.Token("group",f.START)).decorations=[["@display",i]],s=function(t,e){r.strings.first_blob=e.id,t.output.startTag("bib_first",r)},r.execs.push(s),e.push(r)),t.build.cls=i),t.build.render_nesting_level+=1,1===t.build.substitute_level.value()&&(n=new f.Token("choose",f.START),f.Node.choose.build.call(n,t,e),a=new f.Token("if",f.START),s=function(){return!!t.tmp.can_substitute.value()},a.tests||(a.tests=[]),a.tests.push(s),a.test=t.fun.match.any(this,t,a.tests),e.push(a)),t.sys.variableWrapper&&this.variables_real&&this.variables_real.length&&(s=function(t,e,i){if(!t.tmp.just_looking&&!t.tmp.suppress_decorations){var r=new f.Token("text",f.START);r.decorations=[["@showid","true"]],t.output.startTag("variable_entry",r);var s=null;i&&(s=i.position),s||(s=0);var n=0;i&&i.noteIndex&&(n=i.noteIndex);var a=0;i&&i["first-reference-note-number"]&&(a=i["first-reference-note-number"]);var o=0;i&&i["first-container-reference-note-number"]&&(o=i["first-container-reference-note-number"]);var l=0;i&&i["citation-number"]&&(l=i["citation-number"]);var u=0;i&&i.index&&(u=i.index);var p={itemData:e,variableNames:this.variables,context:t.tmp.area,xclass:t.opt.xclass,position:["first","container-subsequent","subsequent","ibid","ibid-with-locator"][s],"note-number":n,"first-reference-note-number":a,"first-container-reference-note-number":o,"citation-number":l,index:u,mode:t.opt.mode};t.output.current.value().params=p}},this.execs.push(s))},f.Util.substituteEnd=function(t,e){var i,r,s,n,a,o;if(t.sys.variableWrapper&&(this.hasVariable||this.variables_real&&this.variables_real.length)&&(i=function(t){t.tmp.just_looking||t.tmp.suppress_decorations||t.output.endTag("variable_entry")},this.execs.push(i)),i=function(t){for(var e=0,i=this.decorations.length;e<i;e+=1)if("@strip-periods"===this.decorations[e][0]&&"true"===this.decorations[e][1]){t.tmp.strip_periods+=-1;break}},this.execs.push(i),t.build.render_nesting_level+=-1,0===t.build.render_nesting_level&&(t.build.cls?(i=function(t){t.output.endTag("bib_first")},this.execs.push(i),t.build.cls=!1):"bibliography"===t.build.area&&t.bibliography.opt["second-field-align"]&&(r=new f.Token("group",f.END),i=function(t){t.tmp.render_seen||t.output.endTag("bib_first")},r.execs.push(i),e.push(r),(s=new f.Token("group",f.START)).decorations=[["@display","right-inline"]],i=function(t){t.tmp.render_seen||(t.tmp.render_seen=!0,t.output.startTag("bib_other",s))},s.execs.push(i),e.push(s))),1===t.build.substitute_level.value()&&(n=new f.Token("if",f.END),e.push(n),a=new f.Token("choose",f.END),f.Node.choose.build.call(a,t,e)),"names"===this.name||"text"===this.name&&"title"!==this.variables_real){new f.Token("text",f.SINGLETON);var l=this.name;i=function(t,e){if("bibliography"===t.tmp.area&&"string"==typeof t.bibliography.opt["subsequent-author-substitute"]&&(!this.variables_real||e[this.variables_real])&&(!this.variables_real||"names"!==l)){var i,r,s=t.bibliography.opt["subsequent-author-substitute-rule"];if(!t.tmp.suppress_decorations&&t.tmp.subsequent_author_substitute_ok&&t.tmp.rendered_name){if("partial-each"===s||"partial-first"===s){var n=!0,a=[];for(i=0,r=t.tmp.name_node.children.length;i<r;i+=1){var u=t.tmp.rendered_name[i];n&&t.tmp.last_rendered_name&&t.tmp.last_rendered_name.length>i-1&&u&&!u.localeCompare(t.tmp.last_rendered_name[i])?(o=new f.Blob(t[t.tmp.area].opt["subsequent-author-substitute"]),t.tmp.name_node.children[i].blobs=[o],"partial-first"===s&&(n=!1)):n=!1,a.push(u)}t.tmp.last_rendered_name=a}else if("complete-each"===s){var a=t.tmp.rendered_name.join(",");if(a){if(t.tmp.last_rendered_name&&!a.localeCompare(t.tmp.last_rendered_name))for(i=0,r=t.tmp.name_node.children.length;i<r;i+=1)o=new f.Blob(t[t.tmp.area].opt["subsequent-author-substitute"]),t.tmp.name_node.children[i].blobs=[o];t.tmp.last_rendered_name=a}}else{var a=t.tmp.rendered_name.join(",");a&&(t.tmp.last_rendered_name&&!a.localeCompare(t.tmp.last_rendered_name)&&(o=new f.Blob(t[t.tmp.area].opt["subsequent-author-substitute"]),t.tmp.label_blob?t.tmp.name_node.top.blobs=[o,t.tmp.label_blob]:t.tmp.name_node.top.blobs.length?t.tmp.name_node.top.blobs[0].blobs=[o]:t.tmp.name_node.top.blobs=[o],t.tmp.substituted_variable=l),t.tmp.last_rendered_name=a)}t.tmp.subsequent_author_substitute_ok=!1}}},this.execs.push(i)}("text"===this.name&&!this.postponed_macro||["number","date","names"].indexOf(this.name)>-1)&&(i=function(t,e){t.tmp.element_trace.mystack.length>1&&t.tmp.element_trace.pop()},this.execs.push(i))},f.Util.padding=function(t){var e=t.match(/\s*(-{0,1}[0-9]+)/);if(e)for((t=parseInt(e[1],10))<0&&(t=1e20+t),t=""+t;t.length<20;)t="0"+t;return t},f.Util.LongOrdinalizer=function(){},f.Util.LongOrdinalizer.prototype.init=function(t){this.state=t},f.Util.LongOrdinalizer.prototype.format=function(t,e){t<10&&(t="0"+t);var i=f.Engine.getField(f.LOOSE,this.state.locale[this.state.opt.lang].terms,"long-ordinal-"+t,"long",0,e);return i||(i=this.state.fun.ordinalizer.format(t,e)),this.state.tmp.cite_renders_content=!0,i},f.Util.Ordinalizer=function(t){this.state=t,this.suffixes={}},f.Util.Ordinalizer.prototype.init=function(){if(!this.suffixes[this.state.opt.lang]){this.suffixes[this.state.opt.lang]={};for(var t=0;t<3;t+=1){var e=[void 0,"masculine","feminine"][t];this.suffixes[this.state.opt.lang][e]=[];for(var i=1;i<5;i+=1){var r=this.state.getTerm("ordinal-0"+i,"long",!1,e);if(void 0===r){delete this.suffixes[this.state.opt.lang][e];break}this.suffixes[this.state.opt.lang][e].push(r)}}}},f.Util.Ordinalizer.prototype.format=function(t,e){s=""+(t=parseInt(t,10));var i="",r=[];if(e&&r.push(e),r.push("neuter"),this.state.locale[this.state.opt.lang].ord["1.0.1"]){i=this.state.getTerm("ordinal",!1,0,e);for(var s,n,a=0,o=r.length;a<o;a+=1){n=r[a];var l=this.state.locale[this.state.opt.lang].ord["1.0.1"];if(l["whole-number"][s]&&l["whole-number"][s][n]?i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["whole-number"][s][n],!1,0,e):l["last-two-digits"][s.slice(s.length-2)]&&l["last-two-digits"][s.slice(s.length-2)][n]?i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-two-digits"][s.slice(s.length-2)][n],!1,0,e):l["last-digit"][s.slice(s.length-1)]&&l["last-digit"][s.slice(s.length-1)][n]&&(i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-digit"][s.slice(s.length-1)][n],!1,0,e)),i)break}}else e||(e=void 0),this.state.fun.ordinalizer.init(),i=t/10%10==1||t>10&&t<20?this.suffixes[this.state.opt.lang][e][3]:t%10==1&&t%100!=11?this.suffixes[this.state.opt.lang][e][0]:t%10==2&&t%100!=12?this.suffixes[this.state.opt.lang][e][1]:t%10==3&&t%100!=13?this.suffixes[this.state.opt.lang][e][2]:this.suffixes[this.state.opt.lang][e][3];return s+i},f.Util.Romanizer=function(){},f.Util.Romanizer.prototype.format=function(t){var e,i,r,s,n;if(e="",t<6e3)for((s=t.toString().split("")).reverse(),i=0,r=0,n=s.length,i=0;i<n;i+=1)r=parseInt(s[i],10),e=f.ROMAN_NUMERALS[i][r]+e;return e},f.Util.Suffixator=function(t){t||(t=f.SUFFIX_CHARS),this.slist=t.split(",")},f.Util.Suffixator.prototype.format=function(t){t+=1;var e,i="";do{e=t%26==0?26:t%26;var i=this.slist[e-1]+i;t=(t-e)/26}while(0!==t)return i},f.Engine.prototype.processNumber=function(t,e,i){var r,s=this,n=i;i="page-first"===i?"page":i;var a=",\\s+and\\s+|\\s+and\\s+";"en"!==this.opt.lang.slice(0,2)&&(a+="|,\\s+"+this.getTerm("and")+"\\s+|\\s+"+this.getTerm("and")+"\\s+");var o="\\s*&\\s*",l=RegExp("^"+o+"$"),u=RegExp("("+o+"|"+a+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)","g"),p=RegExp("(?:"+o+"|"+a+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)"),c=this.getTerm("and"),h=this.getTerm("and","symbol");function m(t,e,r,s,a){s=s||"";var o={};if(e||f.STATUTE_SUBDIV_STRINGS_REVERSE[i]||(e="var:"+i),e){var l=e.match(/(\s*)([^\s]+)(\s*)/);"page"===n&&0===a&&-1===["p.","pp."].indexOf(l[2])?(o.gotosleepability=!0,o.labelVisibility=!0):o.labelVisibility=!1,o.label=l[2],o.origLabel=t,o.labelSuffix=l[3]?l[3]:"",o.plural=0}var l=r.match(/^([0-9]*[a-zA-Z]+0*)?([0-9]+(?:[a-zA-Z]*|[-,a-zA-Z]+))$/);return l?(o.particle=l[1]?l[1]:"",o.value=l[2]):(o.particle="",o.value=r),o.joiningSuffix=s.replace(/\s*-\s*/,"-"),o}function d(t,e,i){var r=t[i.pos],s=t[e].value,n="\\-"===r.joiningSuffix;s.particle&&s.particle!==r.particle&&(i.collapsible=!1);var a=s.match(/^[0-9]+([-,:a-zA-Z]*)$/),o=r.value.match(/^(?:[0-9]+|[ixv]+)([-,:a-zA-Z]*|\-[\-0-9]+)$/);if((!s||!a||!o||n)&&(i.collapsible=!1,s&&o||(i.numeric=!1),n&&i.count--),(a&&a[1]||o&&o[1])&&(i.collapsible=!1),void 0===t[e].collapsible){for(var l=e,u=e+i.count;l<u;l++)isNaN(parseInt(t[l].value))&&!t[l].value.match(/^[ivxlcmIVXLCM]+$/)?t[l].collapsible=!1:t[l].collapsible=!0;i.collapsible=t[e].collapsible}for(var p=i.collapsible,l=i.pos,u=i.pos+i.count;l<u;l++)i.count>1&&p&&(t[l].plural=1),t[l].numeric=i.numeric,t[l].collapsible=i.collapsible}function g(t,e,r){"var:"!==r.label.slice(0,4)&&(0===r.pos?(["locator","number","locator-extra","page"].indexOf(i)>-1&&void 0===s.getTerm(f.STATUTE_SUBDIV_STRINGS[r.label])&&(t[r.pos].labelVisibility=!0),-1===["locator","number","locator-extra","page"].indexOf(i)&&f.STATUTE_SUBDIV_STRINGS[r.label]!==i&&(t[0].labelVisibility=!0)):t[r.pos].labelVisibility=!0)}function b(t){return t.replace("\\-","-")}function y(e){var i=f.Util.cloneToken(t),r=new f.Token;s.tmp.just_looking||(r.decorations=i.decorations,i.decorations=[],r.strings.prefix=i.strings.prefix,i.strings.prefix="",r.strings.suffix=i.strings.suffix,i.strings.suffix="");var n=e.length?e[0].label:null;if(e.length){for(var a=0,o=e.length;a<o;a++){var l=e[a],u=f.Util.cloneToken(i);u.gender=t.gender,n===l.label&&(u.formatter=t.formatter),l.numeric&&(u.successor_prefix=l.successor_prefix),u.strings.suffix=u.strings.suffix+b(l.joiningSuffix),l.styling=u}s.tmp.just_looking||'"'!==e[0].value.slice(0,1)||'"'!==e[e.length-1].value.slice(-1)||(e[0].value=e[0].value.slice(1),e[e.length-1].value=e[e.length-1].value.slice(0,-1),r.decorations.push(["@quotes",!0]))}return r}function v(t,e){return"page"===t||["locator","locator-extra"].indexOf(t)>-1&&(["p."].indexOf(e.label)>-1||["p."].indexOf(e.origLabel)>-1)}function _(t,e,i,r){var n,a,o=v(t,e);return a=!0,["locator","locator-extra","page"].indexOf(t)>-1&&(n=e.origLabel?e.origLabel:e.label,a=!!s.getTerm(f.STATUTE_SUBDIV_STRINGS[n])),a&&"-"===i&&r&&((o||["locator","locator-extra","issue","volume","edition","number"].indexOf(t)>-1)&&((i=s.getTerm("page-range-delimiter"))||(i="–")),"collection-number"===t&&((i=s.getTerm("year-range-delimiter"))||(i="–"))),i}function k(t,e,r){if(!(e<1)&&2===r.count&&t[e-1].particle===t[e].particle){if("-"!==t[e-1].joiningSuffix){r.count=1;return}if(!s.opt["page-range-format"]&&parseInt(t[e-1].value,10)>parseInt(t[e].value,10)){t[e-1].joiningSuffix=_(i,t[e],t[e-1].joiningSuffix,!0);return}var n,a=t[e];!v(i,a)||isNaN(parseInt(t[e-1].value))||isNaN(parseInt(t[e].value))?((""+t[e-1].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(""+t[e].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(t[e-1].joiningSuffix=s.getTerm("page-range-delimiter")),n=t[e-1].value+b(t[e-1].joiningSuffix)+t[e].value):(n=t[e-1].particle+t[e-1].value+" - "+t[e].particle+t[e].value,n=s.fun.page_mangler(n));var o=n.match(/^((?:[0-9]*[a-zA-Z]+0*))?([0-9]+[a-z]*)(\s*[^0-9]+\s*)([-,a-zA-Z]?0*)([0-9]+[a-z]*)$/);if(o){var l=o[3];l=_(i,a,l,t[e].numeric),t[e-1].particle=o[1],t[e-1].value=o[2],t[e-1].joiningSuffix=l,t[e].particle=o[4],t[e].value=o[5]}r.count=0}}function w(e){if(t&&-1!==["page","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume","locator","locator-extra"].indexOf(i)){for(var r={count:0,label:null,lastHadRangeDelimiter:!1},s=0,n=e.length;s<n;s++){var a=e[s];if(a.collapsible)r.label===a.label&&"-"===a.joiningSuffix?r.count=1:r.label===a.label&&"-"!==a.joiningSuffix?(r.count++,2===r.count&&k(e,s,r)):r.label!==a.label?(r.label=a.label,r.count=1):(r.count=1,r.label=a.label);else{r.count=0,r.label=null;var o=a.numeric;a.joiningSuffix=_(i,a,a.joiningSuffix,o)}}2===r.count&&k(e,e.length-1,r)}}if(c===h&&(h="&"),t&&this.tmp.shadow_numbers[n]&&this.tmp.shadow_numbers[n].values.length){var x=this.tmp.shadow_numbers[n].values;w(x),this.tmp.shadow_numbers[n].masterStyling=y(x);return}if(this.tmp.shadow_numbers[n]||(this.tmp.shadow_numbers[n]={values:[]}),e){var E=f.LangPrefsMap[i];if(E){var T=this.opt["cite-lang-prefs"][E][0];r=(r=this.transform.getTextSubField(e,n,"locale-"+T,!0)).name}else r=e[n];if(r&&"number"===n&&"legal_case"===e.type&&(r=r.replace(/[\\]*-/g,"\\-")),r&&this.sys.getAbbreviation){if(this.sys.normalizeAbbrevsKey)var O=this.sys.normalizeAbbrevsKey(n,r);else var O=r;var A=this.transform.loadAbbreviation(e.jurisdiction,"number",O,e.language);this.transform.abbrevs[A].number&&(this.transform.abbrevs[A].number[O]?r=this.transform.abbrevs[A].number[O]:void 0!==this.transform.abbrevs[A].number[O]&&delete this.transform.abbrevs[A].number[O])}if(void 0!==r&&("string"==typeof r||"number"==typeof r)){"number"==typeof r&&(r=""+r);var S=f.STATUTE_SUBDIV_STRINGS_REVERSE[i];if(0===this.tmp.shadow_numbers[n].values.length){for(var I,j,C,x=function(t,r){if(t=function(t){var r=(t=t.trim()).match(/^([^ ]+)/);if(r&&!f.STATUTE_SUBDIV_STRINGS[r[1]]){var s=null;(s=["locator","locator-extra","page"].indexOf(i)>-1?e.label?f.STATUTE_SUBDIV_STRINGS_REVERSE[e.label]:"p.":f.STATUTE_SUBDIV_STRINGS_REVERSE[i])&&(t=s+" "+t)}return t}(t,r=r||""),"page"===i&&t.indexOf("–")>-1&&(t=t.replace(/\u2013/g,"-")),t.indexOf("\\-")>-1){v=new RegExp(u.source.replace("\\-","")),_=new RegExp(p.source.replace("\\-",""));for(var n=t.split("\\-"),a=0,o=n.length;a<o;a++)n[a]=n[a].replace(/\-/g,"–");k=(k=n.join("\\-")).replace(/\\/g,"")}else v=u,_=p,k=t;var c=[],d=k.match(v);if(d){for(var n=k.split(_),a=0,o=d.length;a<o;a++)d[a].match(l)&&(n[a].match(/[a-zA-Z]$/)&&n[a].match(/^[a-zA-Z]/)?d[a]=h:d[a]=" "+h+" ");for(var a in n)if((""+n[a]).replace(/^[a-z]\.\s+/,"").match(/[^\s0-9ivxlcmIVXLCM]/))break;for(var a=0,o=n.length-1;a<o;a++)c.push(n[a]),c.push(d[a]);c.push(n[n.length-1]),c=function(t){for(var e=t.length-2;e>-1;e-=2)"-"===t[e]&&t[e-1].match(/^(?:(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\.  *)*[0-9]+[,a-zA-Z]+$/)&&t[e+1].match(/^[,a-zA-Z]+$/)&&(t[e-1]=t.slice(e-1,e+2).join(""),t=t.slice(0,e).concat(t.slice(e+2)));return t}(c)}else var c=[k];for(var g=[],b=r,y="",a=0,o=c.length;a<o;a+=2){var v,_,k,w,d=c[a].match(/((?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/g);if(d){for(var w,n=c[a].split(/(?:(?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/),x=n.length-1;x>0;x--)!n[x-1]||n[x].match(/^[0-9]+([-;,:a-zA-Z]*)$/)&&n[x-1].match(/^[0-9]+([-;,:a-zA-Z]*)$/)||(n[x-1]=n[x-1]+d[x-1]+n[x],n=n.slice(0,x).concat(n.slice(x+1)),d=d.slice(0,x-1).concat(d.slice(x)));if(d.length>0){var E=d[0].trim();f.STATUTE_SUBDIV_STRINGS[E]&&void 0!==s.getTerm(f.STATUTE_SUBDIV_STRINGS[E])&&(-1!==["locator","number","locator-extra","page"].indexOf(i)||f.STATUTE_SUBDIV_STRINGS[E]===i)?y=E:0===a&&(d=d.slice(1),n[0]=n[0]+" "+E+" "+n[1],n=n.slice(0,1).concat(n.slice(2)))}for(var x=0,T=n.length;x<T;x++)(n[x]||x===n.length-1)&&(w=y===(b=d[x-1]?d[x-1]:b).trim()?"":y,k=n[x]?n[x].trim():"",x===n.length-1?g.push(m(w,b,k,c[a+1],a)):g.push(m(w,b,k,null,a)))}else w=y===b.trim()?"":y,g.push(m(w,b,c[a],c[a+1]))}return g}(r,S),N=x,P=0,D=N.length-1;P<D;P++)!N[P].joiningSuffix&&N[P+1].label&&(N[P].joiningSuffix=" ");for(var R of(!function(t){if(0!==t.length){for(var r=0,s=1,a=1,o=t.length;a<o;a++){var l=t[a-1],u=t[a];if(l.label===u.label&&l.particle==l.particle)s++;else{var p=JSON.parse(JSON.stringify(t[r]));p.pos=r,p.count=s,p.numeric=!0,d(t,r,p),l.label!==u.label&&g(t,r,p),r=a,s=1}}var p=JSON.parse(JSON.stringify(t[r]));p.pos=r,p.count=s,p.numeric=!0,d(t,r,p),g(t,r,p),t.length&&t[0].numeric&&"number-of-"===i.slice(0,10)&&parseInt(e[n],10)>1&&(t[0].plural=1)}}(x),x))R.numeric||(R.plural=0);this.tmp.shadow_numbers[n].values=x,t&&(w(x),this.tmp.shadow_numbers[n].masterStyling=y(x)),I=this.tmp.shadow_numbers,j=x,C=I[n],j.length&&(C.numeric=j[0].numeric,C.collapsible=j[0].collapsible,C.plural=j[0].plural,C.label=f.STATUTE_SUBDIV_STRINGS[j[0].label],"number"===i&&"issue"===C.label&&s.getTerm("number")&&(C.label="number"))}var L=this.tmp.shadow_numbers[n];"number"===i&&1===L.values.length&&L.values[0].value.indexOf("|")>-1&&(L.values[0].value=L.values[0].value.replace(/\|/g,", "),L.values[0].numeric=!0,L.values[0].plural=1,L.values[0].collapsible=!1,L.numeric=!0,L.plural=1,L.collapsible=!1),1===L.values.length&&L.values[0].value.match(/^[0-9]+(?:\/[0-9]+)+$/)&&(L.values[0].numeric=!0,L.values[0].plural=0,L.values[0].collapsible=!1,L.numeric=!0,L.plural=0,L.collapsible=!1),"page"===i&&L.values.length>0&&L.values[0].gotosleepability&&(L.labelForm="short")}}},f.Util.outputNumericField=function(t,e,i){t.output.openLevel(t.tmp.shadow_numbers[e].masterStyling);var r=t.tmp.shadow_numbers[e].masterStyling,s=t.tmp.shadow_numbers[e].values,n=s.length?s[0].label:null,a=t.tmp.shadow_numbers[e].labelForm,o=t.tmp.group_context.tip.label_static;m=a||"short";for(var l=t.tmp.shadow_numbers[e].labelCapitalizeIfFirst,u=t.tmp.shadow_numbers[e].labelDecorations,p=null,c=0,h=s.length;c<h;c++){var m,d,g,b=s[c],y="";b.label&&(d="var:"===b.label.slice(0,4)?b.label.slice(4):f.STATUTE_SUBDIV_STRINGS[b.label])&&(b.label===n?(o&&-1===(y=t.getTerm(d,"static",b.plural)).indexOf("%s")&&(y=""),y||(y=t.getTerm(d,a,b.plural))):(o&&-1===(y=t.getTerm(d,"static",b.plural)).indexOf("%s")&&(y=""),y||(y=t.getTerm(d,m,b.plural))),l&&(y=f.Output.Formatters["capitalize-first"](t,y)));var v=-1;y&&(v=y.indexOf("%s"));var _=f.Util.cloneToken(b.styling);if(_.formatter=b.styling.formatter,_.type=b.styling.type,_.num=b.styling.num,_.gender=b.styling.gender,v>0&&v<y.length-2)_.strings.prefix+=y.slice(0,v),_.strings.suffix=y.slice(v+2)+_.strings.suffix;else if(b.labelVisibility)if(y||(y=b.label,d=b.label),v>0){var k=new f.Token;k.decorations=u,t.output.append(y.slice(0,v),k)}else(v===y.length-2||-1===v)&&t.output.append(y+b.labelSuffix,"empty");if(f.UPDATE_GROUP_CONTEXT_CONDITION(t,r.strings.prefix,null,r,`${b.particle}${b.value}`),b.collapsible?(void 0===(g=b.value.match(/^[1-9][0-9]*$/)&&Number.isSafeInteger(parseInt(b.value,10))?new f.NumericBlob(t,b.particle,parseInt(b.value,10),_,i):new f.NumericBlob(t,b.particle,b.value,_,i)).gender&&(g.gender=t.locale[t.opt.lang]["noun-genders"][e]),t.output.append(g,"literal")):t.output.append(b.particle+b.value,_),0===v&&v<y.length-2&&(null===p&&(p=d),d!==p||c===s.length-1)){var w=new f.Token;w.decorations=u,t.output.append(y.slice(v+2),w)}p=d,t.tmp.term_predecessor=!0}t.output.closeLevel()},f.Util.PageRangeMangler={},f.Util.PageRangeMangler.getFunction=function(t,e){var i,r,s,n,a,o,l,u,p,c,h,f,m,d,g,b,y,v,_=t.getTerm(e+"-range-delimiter");i=/([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)\s*(?:\u2013|-)\s*([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)/,n=function(i){for(r=1,s=i.length;r<s;r+=2)"object"==typeof i[r]&&(i[r]=i[r].join(""));var n=i.join("");return n.replace(/([^\\])\-/g,"$1"+t.getTerm(e+"-range-delimiter"))},a=function(t){var e,i,n,a="\\s+\\-\\s+",o=RegExp("([^\\\\])[-"+("-"===_?"":_)+"\\u2013]","g");t=t.replace(o,"$1 - ").replace(/\s+-\s+/g," - ");var l=RegExp("((?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*"+a+"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*)","g"),u=RegExp("(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*"+a+"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*");if(e=t.match(l),0===(i=t.split(u)).length)n=e;else for(r=1,n=[i[0]],s=i.length;r<s;r+=1)n.push(e[r-1].replace(/\s*\-\s*/g,"-")),n.push(i[r]);return n},o=function(t){for(r=1,s=(h=a(t=""+t)).length;r<s;r+=2)(f=h[r].match(i))&&(!f[3]||f[1]===f[3])&&(f[4].length<f[2].length&&(f[4]=f[2].slice(0,f[2].length-f[4].length)+f[4]),parseInt(f[2],10)<parseInt(f[4],10)&&(f[3]=_+(f[1]?f[1]:""),h[r]=f.slice(1))),"string"==typeof h[r]&&(h[r]=h[r].replace(/\-/g,_));return h},l=function(t,e,i){s=t.length;for(var r=1,a=t.length;r<a;r+=2)"object"==typeof t[r]&&(t[r][3]=u(t[r][1],t[r][3],e,i),t[r][2].slice(1)===t[r][0]&&(t[r][2]=_));return n(t)},u=function(t,e,i,r){if(i||(i=0),m=(""+t).split(""),(g=(d=(""+e).split("")).slice()).reverse(),m.length===d.length)for(var s=0,n=m.length;s<n;s+=1)if(m[s]===d[s]&&g.length>i)g.pop();else{if(i&&r&&3===g.length){var a=m.slice(0,s);a.reverse(),g=g.concat(a)}break}return g.reverse(),g.join("")},p=function(t){for(r=1,s=t.length;r<s;r+=2)"object"==typeof t[r]&&(b=parseInt((f=t[r])[1],10),y=parseInt(f[3],10),b>100&&b%100&&parseInt(b/100,10)===parseInt(y/100,10)?f[3]=""+y%100:b>=1e4&&(f[3]=""+y%1e3)),f[2].slice(1)===f[0]&&(f[2]=_);return n(t)},c=function(t){for(r=1,s=t.length;r<s;r+=2){if("object"==typeof t[r]&&(b=parseInt((f=t[r])[1],10),d=""+(y=parseInt(f[3],10)),b>100&&b%100))for(var e=2;e<d.length;e++){var i=Math.pow(10,e);if(Math.floor(b/i)===Math.floor(y/i)){f[3]=""+y%i;break}}f[2].slice(1)===f[0]&&(f[2]=_)}return n(t)};var k=function(t,e,i,r){return e(o(t=""+t),i,r)};return t.opt[e+"-range-format"]?"expanded"===t.opt[e+"-range-format"]?v=function(t){return k(t,n)}:"minimal"===t.opt[e+"-range-format"]?v=function(t){return k(t,l)}:"minimal-two"===t.opt[e+"-range-format"]?v=function(t,e){return k(t,l,2,e)}:"chicago"===t.opt[e+"-range-format"]?v=function(t){return k(t,p)}:"chicago-15"===t.opt[e+"-range-format"]?v=function(t){return k(t,p)}:"chicago-16"===t.opt[e+"-range-format"]&&(v=function(t){return k(t,c)}):v=function(t){return k(t,n)},v},f.Util.FlipFlopper=function(t){var e=[],i={'<span class="nocase">':{type:"nocase",opener:'<span class="nocase">',closer:"</span>",attr:null,outer:null,flipflop:null},'<span class="nodecor">':{type:"nodecor",opener:'<span class="nodecor">',closer:"</span>",attr:"@class",outer:"nodecor",flipflop:{nodecor:"nodecor"}},'<span style="font-variant:small-caps;">':{type:"tag",opener:'<span style="font-variant:small-caps;">',closer:"</span>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<sc>":{type:"tag",opener:"<sc>",closer:"</sc>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<i>":{type:"tag",opener:"<i>",closer:"</i>",attr:"@font-style",outer:"italic",flipflop:{italic:"normal",normal:"italic"}},"<b>":{type:"tag",opener:"<b>",closer:"</b>",attr:"@font-weight",outer:"bold",flipflop:{bold:"normal",normal:"bold"}},"<sup>":{type:"tag",opener:"<sup>",closer:"</sup>",attr:"@vertical-align",outer:"sup",flipflop:{sub:"sup",sup:"sup"}},"<sub>":{type:"tag",opener:"<sub>",closer:"</sub>",attr:"@vertical-align",outer:"sub",flipflop:{sup:"sub",sub:"sub"}},' "':{type:"quote",opener:' "',closer:'"',attr:"@quotes",outer:"true",flipflop:{true:"inner",inner:"true",false:"true"}}," '":{type:"quote",opener:" '",closer:"'",attr:"@quotes",outer:"inner",flipflop:{true:"inner",inner:"true",false:"true"}}};i['("']=i[' "'],i["('"]=i[" '"];var r=t.getTerm("open-quote"),s=t.getTerm("close-quote"),n=t.getTerm("open-inner-quote"),a=t.getTerm("close-inner-quote");r&&s&&-1===[' "'," '",'"',"'"].indexOf(r)&&(i[r]=JSON.parse(JSON.stringify(i[' "'])),i[r].opener=r,i[r].closer=s),n&&a&&-1===[' "'," '",'"',"'"].indexOf(n)&&(i[n]=JSON.parse(JSON.stringify(i[" '"])),i[n].opener=n,i[n].closer=a);var o=function(){for(var t={},e=Object.keys(i),r=0,s=e.length;r<s;r++){var n=e[r];t[n]=function(t){for(var e=[],r=Object.keys(i),s=0,n=r.length;s<n;s++){var a=r[s];"quote"===i[t].type&&i[t]||e.push(a)}var o=i[t];return o.opener=RegExp("^(?:"+e.map(function(t){return t.replace("(","\\(")}).join("|")+")"),o}(n)}return t}(),l=function(){var t=[],e=[],i={};for(var r in o)t.push(r),i[o[r].closer]=!0;for(var s=Object.keys(i),n=0,a=s.length;n<a;n++){var l=s[n];e.push(l)}var u=t.concat(e).map(function(t){return t.replace("(","\\(")}).join("|");return{matchAll:RegExp("((?:"+u+"))","g"),splitAll:RegExp("(?:"+u+")","g"),open:RegExp("(^(?:"+t.map(function(t){return t.replace("(","\\(")}).join("|")+")$)"),close:RegExp("(^(?:"+e.join("|")+")$)")}}(),u=function(e){var r=[];this.set=function(s){for(var n=i[s].attr,a=null,o=r.length-1;o>-1;o--){var l=r[o];if(l[0]===n){a=l;break}}if(!a){var u=[t[t.tmp.area].opt.layout_decorations].concat(e.alldecor);t:for(var o=u.length-1;o>-1;o--){var p=u[o];if(p)for(var c=p.length-1;c>-1;c--){var l=p[c];if(l[0]===n){a=l;break t}}}}a=a?[n,i[s].flipflop[a[1]]]:[n,i[s].outer],r.push(a)},this.pair=function(){return r[r.length-1]},this.pop=function(){r.pop()}};this.processTags=function(r){var s=r.blobs,n=!1;" "!==s.slice(0,1)||s.match(/^\s+[\'\"]/)||(n=!0);var a=RegExp("("+f.ROMANESQUE_REGEXP.source+")’("+f.ROMANESQUE_REGEXP.source+")","g"),s=" "+s.replace(a,"$1'$2"),p=function(t){var e=[],r=(t=(t=t.replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?\"[^>]*(>)/g,'$1 $2$3;"$4')).replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3")).match(l.matchAll);if(!r)return{tags:[],strings:[t],forcedSpaces:[]};for(var s=t.split(l.splitAll),n=0,a=r.length-1;n<a;n++)i[r[n]]&&(""===s[n+1]&&['"',"'"].indexOf(r[n+1])>-1?(r[n+1]=" "+r[n+1],e.push(!0)):e.push(!1));return{tags:r,strings:s,forcedSpaces:e}}(s);if(0!==p.tags.length){for(var c=!1,h=0,m=p.tags.length;h<m;h++){var d,g=p.tags[h],s=p.strings[h+1],b=function(t,e){if("'"===t){if(e&&e.match(/^[^\,\.\?\:\;\ ]/))return"’"}else if(" '"===t&&e&&e.match(/^[\ ]/))return" ’";return!1}(g,s);if(b)p.strings[h+1]=b+p.strings[h+1],p.tags[h]="";else{for(;;)if(d=function(t,i){if(t.match(l.open)){var r;return!(r=e[e.length-1])||t.match(r.opener)?(e.push({type:o[t].type,opener:o[t].opener,closer:o[t].closer,pos:i}),!1):(e.pop(),e.push({type:o[t].type,opener:o[t].opener,closer:o[t].closer,pos:i}),{fixtag:r.pos})}var s=e[e.length-1];return s&&t===s.closer?(e.pop(),"nocase"===s.type&&{nocase:{open:s.pos,close:i}}):s?{fixtag:s.pos}:{fixtag:i}}(g,h))if(Object.keys(d).indexOf("fixtag")>-1){if(g.match(l.close)&&"'"===g)p.strings[h+1]="’"+p.strings[h+1],p.tags[h]="";else{var y=p.tags[d.fixtag];p.forcedSpaces[d.fixtag-1]&&(y=y.slice(1)),p.strings[d.fixtag+1]=y+p.strings[d.fixtag+1],p.tags[d.fixtag]=""}if(e.length>0)if("'"!==g)e.pop();else break;else break}else if(d.nocase){p.tags[d.nocase.open]="",p.tags[d.nocase.close]="";break}else break;else break;d&&(d.fixtag||0===d.fixtag)&&(p.strings[h+1]=p.tags[h]+p.strings[h+1],p.tags[h]="")}}for(var h=e.length-1;h>-1;h--){var v=e[h].pos,g=p.tags[v];" '"===g||"'"===g?p.strings[v+1]=" ’"+p.strings[v+1]:p.strings[v+1]=p.tags[v]+p.strings[v+1],p.tags[v]="",e.pop()}for(var h=p.tags.length-1;h>-1;h--)p.tags[h]||(p.tags=p.tags.slice(0,h).concat(p.tags.slice(h+1)),p.strings[h]=p.strings[h]+p.strings[h+1],p.strings=p.strings.slice(0,h+1).concat(p.strings.slice(h+2)));for(var h=0,m=p.tags.length;h<m;h++){var _,g=p.tags[h],k=p.forcedSpaces[h-1];[' "'," '",'("',"('"].indexOf(g)>-1&&(c||(i[_=g].outer="true",i[({" '":' "',' "':" '",'("':"('","('":'("'})[_]].outer="inner",c=!0),k||(p.strings[h]+=g.slice(0,1)))}!function(e,i,r){var s=!0,n=new u(e);e.blobs=[];var a=new function(e){this.stack=[e],this.latest=e,this.addStyling=function(e,i){if(s&&(" "===e.slice(0,1)&&(e=e.slice(1))," "===e.slice(0,1)&&(e=e.slice(1)),s=!1),this.latest=this.stack[this.stack.length-1],i){if("string"==typeof this.latest.blobs){var r=new f.Blob;r.blobs=this.latest.blobs,r.alldecor=this.latest.alldecor.slice(),this.latest.blobs=[r]}var n=new f.Token,a=new f.Blob(null,n);if(a.alldecor=this.latest.alldecor.slice(),"@class"===i[0]&&"nodecor"===i[1]){for(var o=[],l={},u=[t[t.tmp.area].opt.layout_decorations].concat(a.alldecor),p=u.length-1;p>-1;p--){var c=u[p];if(c)for(var h=c.length-1;h>-1;h--){var m=c[h];["@font-weight","@font-style","@font-variant"].indexOf(m[0])>-1&&!l[m[0]]&&("normal"!==i[1]&&(a.decorations.push([m[0],"normal"]),o.push([m[0],"normal"])),l[m[0]]=!0)}}a.alldecor.push(o)}else a.decorations.push(i),a.alldecor.push([i]);if(this.latest.blobs.push(a),this.stack.push(a),this.latest=a,e){var n=new f.Token,a=new f.Blob(null,n);a.blobs=e,a.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(a)}}else if(e){var r=new f.Blob;r.blobs=e,r.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(r)}},this.popStyling=function(){this.stack.pop()}}(e);if(i.strings.length){var o=i.strings[0];r&&(o=" "+o),a.addStyling(o)}for(var p=0,c=i.tags.length;p<c;p++){var h=i.tags[p],o=i.strings[p+1];h.match(l.open)?(n.set(h),a.addStyling(o,n.pair())):(n.pop(),a.popStyling(),a.addStyling(o))}}(r,p,n)}}},f.Output.Formatters=function(){var t=new f.Doppeler('(?:‘|’|“|”| "| \'|"|\'|[-–—/.,;?!:]|\\[|\\]|\\(|\\)|<span style="font-variant: small-caps;">|<span class="no(?:case|decor)">|</span>|</?(?:i|sc|b|sub|sup)>)',function(t){return t.replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3").replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?(\")[^>]*(>)/g,"$1 $2 $3;$4$5")}),e=new f.Doppeler('(?:[-\\s]*<\\/*(?:spans+class="no(?:case|decor)"|i|sc|b|sub|sup)>[-\\s]*|[-\\s]+)'),i=new f.Doppeler("(?:[    -​ 　]+)"),r={'<span style="font-variant: small-caps;">':"</span>",'<span class="nocase">':"</span>",'<span class="nodecor">':"</span>","<sc>":"</sc>","<sub>":"</sub>","<sup>":"</sup>"};function s(t){var e=t.match(/(^\s*)((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(.*)/);return e&&!(e[2].match(/^[\u0370-\u03FF]$/)&&!e[3])?e[1]+f.toLocaleUpperCase.call(this,e[2])+e[3]:t}function n(e,n){if(!n)return"";e.doppel=t.split(n);var a={' "':{opener:" '",closer:'"'}," '":{opener:' "',closer:"'"},"‘":{opener:"‘",closer:"’"},"“":{opener:"“",closer:"”"}};e.doppel.strings.length&&e.doppel.strings[0].trim()&&(e.doppel.strings[0]=e.capitaliseWords(e.doppel.strings[0],0,e.doppel.tags[0]));for(var o=0,l=e.doppel.tags.length;o<l;o++){var u=e.doppel.tags[o],p=e.doppel.strings[o+1];if(null!==e.tagState&&(r[u]?e.tagState.push(r[u]):e.tagState.length&&u===e.tagState[e.tagState.length-1]&&e.tagState.pop()),null!==e.afterPunct&&u.match(/[\!\?\:]$/)&&(e.afterPunct=!0),0===e.tagState.length?e.doppel.strings[o+1]=e.capitaliseWords(p,o+1,e.doppel,e.doppel.tags[o+1]):e.doppel.strings[o+1].trim()&&(e.lastWordPos=null),null!==e.quoteState){var c=function(t,i){var r=t.match(/(^(?:\u2018|\u2019|\u201C|\u201D|\"|\')|(?: \"| \')$)/);if(r)return function(t,i){if(["“","‘",' "'," '"].indexOf(t)>-1){if(0===e.quoteState.length||t===e.quoteState[e.quoteState.length-1].opener)return e.quoteState.push({opener:a[t].opener,closer:a[t].closer,pos:i}),!1;var r=e.quoteState[e.quoteState.length-1].pos;return e.quoteState.pop(),e.quoteState.push({opener:a[t].opener,closer:a[t].closer,positions:i}),r}return e.quoteState.length>0&&t===e.quoteState[e.quoteState.length-1].closer?void e.quoteState.pop():i}(r[1],i)}(u,o);if(c||0===c){var h=e.doppel.origStrings[c+1].slice(0,1);e.doppel.strings[c+1]=h+e.doppel.strings[c+1].slice(1),e.lastWordPos=null}}e.isFirst&&p.trim()&&(e.isFirst=!1),e.afterPunct&&p.trim()&&(e.afterPunct=!1)}if(e.quoteState)for(var o=0,l=e.quoteState.length;o<l;o++){var c=e.quoteState[o].pos;if(void 0!==c){var h=e.doppel.origStrings[c+1].slice(0,1);e.doppel.strings[c+1]=h+e.doppel.strings[c+1].slice(1)}}if(e.lastWordPos){var m=i.split(e.doppel.strings[e.lastWordPos.strings]),d=m.strings[e.lastWordPos.words];d.length>1&&f.toLocaleLowerCase.call(this,d).match(e.skipWordsRex)&&(d=s.call(this,d),m.strings[e.lastWordPos.words]=d),e.doppel.strings[e.lastWordPos.strings]=i.join(m)}return t.join(e.doppel)}return{nameDoppel:e,passthrough:function(t,e){return e},lowercase:function(t,e){return n.call(t,{quoteState:null,capitaliseWords:function(e){for(var i=e.split(" "),r=0,s=i.length;r<s;r++){var n=i[r];n&&(i[r]=f.toLocaleLowerCase.call(t,n))}return i.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},e)},uppercase:function(t,e){return n.call(t,{quoteState:null,capitaliseWords:function(e){for(var i=e.split(" "),r=0,s=i.length;r<s;r++){var n=i[r];n&&(i[r]=f.toLocaleUpperCase.call(t,n))}return i.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},e)},sentence:function(t,e){var i={quoteState:[],capitaliseWords:function(e){for(var r=e.split(" "),n=0,a=r.length;n<a;n++){var o=r[n];o&&(i.isFirst?(r[n]=s.call(t,o),i.isFirst=!1):r[n]=f.toLocaleLowerCase.call(t,o))}return r.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return n.call(t,i,e)},title:function(t,e){var r={quoteState:[],capitaliseWords:function(e,n,a){if(e.trim()){for(var o=i.split(e),l=o.strings,u=0,p=l.length;u<p;u++){var c=l[u];if(!c)continue;let e=f.toLocaleLowerCase.call(t,c),i=!1;c.length>1&&!e.match(r.skipWordsRex)||u===l.length-1&&"-"===a||r.isFirst?i=!0:r.afterPunct&&(i=!0),i&&c===e&&(l[u]=s.call(t,c)),r.afterPunct=!1,r.isFirst=!1,r.lastWordPos={strings:n,words:u}}e=i.join(o)}return e},skipWordsRex:t.locale[t.opt.lang].opts["skip-words-regexp"],tagState:[],afterPunct:!1,isFirst:!0};return n.call(t,r,e)},"capitalize-first":function(t,e){var r={quoteState:[],capitaliseWords:function(e){for(var n=i.split(e),a=n.strings,o=0,l=a.length;o<l;o++){var u=a[o];if(u&&r.isFirst){u===f.toLocaleLowerCase.call(t,u)&&(a[o]=s.call(t,u)),r.isFirst=!1;break}}return i.join(n)},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return n.call(t,r,e)},"capitalize-all":function(t,e){return n.call(t,{quoteState:[],capitaliseWords:function(e){for(var r=i.split(e),n=r.strings,a=0,o=n.length;a<o;a++){var l=n[a];l&&l===f.toLocaleLowerCase.call(t,l)&&(n[a]=s.call(t,l))}return i.join(r)},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null},e)}}}(),f.Output.Formats=function(){},f.Output.Formats.prototype.html={text_escape:function(t){return t||(t=""),t.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\s\s/g,"  ").replace(f.SUPERSCRIPTS_REGEXP,function(t){return"<sup>"+f.SUPERSCRIPTS[t]+"</sup>"})},bibstart:'<div class="csl-bib-body">\n',bibend:"</div>","@font-style/italic":"<i>%%STRING%%</i>","@font-style/oblique":"<em>%%STRING%%</em>","@font-style/normal":'<span style="font-style:normal;">%%STRING%%</span>',"@font-variant/small-caps":'<span style="font-variant:small-caps;">%%STRING%%</span>',"@passthrough/true":f.Output.Formatters.passthrough,"@font-variant/normal":'<span style="font-variant:normal;">%%STRING%%</span>',"@font-weight/bold":"<b>%%STRING%%</b>","@font-weight/normal":'<span style="font-weight:normal;">%%STRING%%</span>',"@font-weight/light":!1,"@text-decoration/none":'<span style="text-decoration:none;">%%STRING%%</span>',"@text-decoration/underline":'<span style="text-decoration:underline;">%%STRING%%</span>',"@vertical-align/sup":"<sup>%%STRING%%</sup>","@vertical-align/sub":"<sub>%%STRING%%</sub>","@vertical-align/baseline":'<span style="baseline">%%STRING%%</span>',"@strip-periods/true":f.Output.Formatters.passthrough,"@strip-periods/false":f.Output.Formatters.passthrough,"@quotes/true":function(t,e){return void 0===e?t.getTerm("open-quote"):t.getTerm("open-quote")+e+t.getTerm("close-quote")},"@quotes/inner":function(t,e){return void 0===e?"’":t.getTerm("open-inner-quote")+e+t.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(t,e){return t.sys.wrapCitationEntry(e,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(t,e){var i="";return t.sys.embedBibliographyEntry&&(i=t.sys.embedBibliographyEntry(this.item_id)+"\n"),'  <div class="csl-entry">'+e+"</div>\n"+i},"@display/block":function(t,e){return'\n\n    <div class="csl-block">'+e+"</div>\n"},"@display/left-margin":function(t,e){return'\n    <div class="csl-left-margin">'+e+"</div>"},"@display/right-inline":function(t,e){return'<div class="csl-right-inline">'+e+"</div>\n  "},"@display/indent":function(t,e){return'<div class="csl-indent">'+e+"</div>\n  "},"@showid/true":function(t,e,i){if(t.tmp.just_looking||t.tmp.suppress_decorations)return e;if(i)return'<span class="'+t.opt.nodenames[i]+'" cslid="'+i+'">'+e+"</span>";if(!this.params||"string"!=typeof e)return e;var r="";if(e){var s=e.match(f.VARIABLE_WRAPPER_PREPUNCT_REX);r=s[1],e=s[2]}var n="";return e&&f.SWAPPING_PUNCTUATION.indexOf(e.slice(-1))>-1&&(n=e.slice(-1),e=e.slice(0,-1)),t.sys.variableWrapper(this.params,r,e,n)},"@URL/true":function(t,e){return'<a href="'+e+'">'+e+"</a>"},"@DOI/true":function(t,e){var i=e;return e.match(/^https?:\/\//)||(i="https://doi.org/"+e),'<a href="'+i+'">'+e+"</a>"}},f.Output.Formats.prototype.text={text_escape:function(t){return t||(t=""),t},bibstart:"",bibend:"","@font-style/italic":!1,"@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":f.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":!1,"@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":f.Output.Formatters.passthrough,"@strip-periods/false":f.Output.Formatters.passthrough,"@quotes/true":function(t,e){return void 0===e?t.getTerm("open-quote"):t.getTerm("open-quote")+e+t.getTerm("close-quote")},"@quotes/inner":function(t,e){return void 0===e?"’":t.getTerm("open-inner-quote")+e+t.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(t,e){return t.sys.wrapCitationEntry(e,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(t,e){return e+"\n"},"@display/block":function(t,e){return"\n"+e},"@display/left-margin":function(t,e){return e+" "},"@display/right-inline":function(t,e){return e},"@display/indent":function(t,e){return"\n    "+e},"@showid/true":function(t,e){return e},"@URL/true":function(t,e){return e},"@DOI/true":function(t,e){return e}},f.Output.Formats.prototype.rtf={text_escape:function(t){return t||(t=""),t.replace(/([\\{}])/g,"\\$1").replace(f.SUPERSCRIPTS_REGEXP,function(t){return"\\super "+f.SUPERSCRIPTS[t]+"\\nosupersub{}"}).replace(/[\u007F-\uFFFF]/g,function(t){return"\\uc0\\u"+t.charCodeAt(0).toString()+"{}"}).split("	").join("\\tab{}")},"@passthrough/true":f.Output.Formatters.passthrough,"@font-style/italic":"{\\i{}%%STRING%%}","@font-style/normal":"{\\i0{}%%STRING%%}","@font-style/oblique":"{\\i{}%%STRING%%}","@font-variant/small-caps":"{\\scaps %%STRING%%}","@font-variant/normal":"{\\scaps0{}%%STRING%%}","@font-weight/bold":"{\\b{}%%STRING%%}","@font-weight/normal":"{\\b0{}%%STRING%%}","@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"{\\ul{}%%STRING%%}","@vertical-align/baseline":!1,"@vertical-align/sup":"\\super %%STRING%%\\nosupersub{}","@vertical-align/sub":"\\sub %%STRING%%\\nosupersub{}","@strip-periods/true":f.Output.Formatters.passthrough,"@strip-periods/false":f.Output.Formatters.passthrough,"@quotes/true":function(t,e){return void 0===e?f.Output.Formats.rtf.text_escape(t.getTerm("open-quote")):f.Output.Formats.rtf.text_escape(t.getTerm("open-quote"))+e+f.Output.Formats.rtf.text_escape(t.getTerm("close-quote"))},"@quotes/inner":function(t,e){return void 0===e?f.Output.Formats.rtf.text_escape("’"):f.Output.Formats.rtf.text_escape(t.getTerm("open-inner-quote"))+e+f.Output.Formats.rtf.text_escape(t.getTerm("close-inner-quote"))},"@quotes/false":!1,bibstart:"{\\rtf ",bibend:"}","@display/block":"\\line{}%%STRING%%\\line\r\n","@cite/entry":function(t,e){return t.sys.wrapCitationEntry(e,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(t,e){return e},"@display/left-margin":function(t,e){return e+"\\tab "},"@display/right-inline":function(t,e){return e+"\r\n"},"@display/indent":function(t,e){return"\n\\tab "+e+"\\line\r\n"},"@showid/true":function(t,e){if(t.tmp.just_looking||t.tmp.suppress_decorations)return e;var i="";if(e){var r=e.match(f.VARIABLE_WRAPPER_PREPUNCT_REX);i=r[1],e=r[2]}var s="";return e&&f.SWAPPING_PUNCTUATION.indexOf(e.slice(-1))>-1&&(s=e.slice(-1),e=e.slice(0,-1)),t.sys.variableWrapper(this.params,i,e,s)},"@URL/true":function(t,e){return e},"@DOI/true":function(t,e){return e}},f.Output.Formats.prototype.asciidoc={text_escape:function(t){return t||(t=""),t.replace("*","pass:[*]","g").replace("_","pass:[_]","g").replace("#","pass:[#]","g").replace("^","pass:[^]","g").replace("~","pass:[~]","g").replace("[[","pass:[[[]","g").replace("  ","&#160; ","g").replace(f.SUPERSCRIPTS_REGEXP,function(t){return"^"+f.SUPERSCRIPTS[t]+"^"})},bibstart:"",bibend:"","@passthrough/true":f.Output.Formatters.passthrough,"@font-style/italic":"__%%STRING%%__","@font-style/oblique":"__%%STRING%%__","@font-style/normal":!1,"@font-variant/small-caps":"[small-caps]#%%STRING%%#","@font-variant/normal":!1,"@font-weight/bold":"**%%STRING%%**","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"[underline]##%%STRING%%##","@vertical-align/sup":"^^%%STRING%%^^","@vertical-align/sub":"~~%%STRING%%~~","@vertical-align/baseline":!1,"@strip-periods/true":f.Output.Formatters.passthrough,"@strip-periods/false":f.Output.Formatters.passthrough,"@quotes/true":function(t,e){return void 0===e?"``":"``"+e+"''"},"@quotes/inner":function(t,e){return void 0===e?"`":"`"+e+"'"},"@quotes/false":!1,"@cite/entry":function(t,e){return t.sys.wrapCitationEntry(e,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(t,e){return e+"\n"},"@display/block":function(t,e){return e},"@display/left-margin":function(t,e){return e},"@display/right-inline":function(t,e){return" "+e},"@display/indent":function(t,e){return" "+e},"@showid/true":function(t,e){if(t.tmp.just_looking||t.tmp.suppress_decorations||!this.params||"string"!=typeof e)return e;var i="";if(e){var r=e.match(f.VARIABLE_WRAPPER_PREPUNCT_REX);i=r[1],e=r[2]}var s="";return e&&f.SWAPPING_PUNCTUATION.indexOf(e.slice(-1))>-1&&(s=e.slice(-1),e=e.slice(0,-1)),t.sys.variableWrapper(this.params,i,e,s)},"@URL/true":function(t,e){return e},"@DOI/true":function(t,e){var i=e;return e.match(/^https?:\/\//)||(i="https://doi.org/"+e),i+"["+e+"]"}},f.Output.Formats.prototype.fo={text_escape:function(t){return t||(t=""),t.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace("  ","&#160; ","g").replace(f.SUPERSCRIPTS_REGEXP,function(t){return'<fo:inline vertical-align="super">'+f.SUPERSCRIPTS[t]+"</fo:inline>"})},bibstart:"",bibend:"","@passthrough/true":f.Output.Formatters.passthrough,"@font-style/italic":'<fo:inline font-style="italic">%%STRING%%</fo:inline>',"@font-style/oblique":'<fo:inline font-style="oblique">%%STRING%%</fo:inline>',"@font-style/normal":'<fo:inline font-style="normal">%%STRING%%</fo:inline>',"@font-variant/small-caps":'<fo:inline font-variant="small-caps">%%STRING%%</fo:inline>',"@font-variant/normal":'<fo:inline font-variant="normal">%%STRING%%</fo:inline>',"@font-weight/bold":'<fo:inline font-weight="bold">%%STRING%%</fo:inline>',"@font-weight/normal":'<fo:inline font-weight="normal">%%STRING%%</fo:inline>',"@font-weight/light":'<fo:inline font-weight="lighter">%%STRING%%</fo:inline>',"@text-decoration/none":'<fo:inline text-decoration="none">%%STRING%%</fo:inline>',"@text-decoration/underline":'<fo:inline text-decoration="underline">%%STRING%%</fo:inline>',"@vertical-align/sup":'<fo:inline vertical-align="super">%%STRING%%</fo:inline>',"@vertical-align/sub":'<fo:inline vertical-align="sub">%%STRING%%</fo:inline>',"@vertical-align/baseline":'<fo:inline vertical-align="baseline">%%STRING%%</fo:inline>',"@strip-periods/true":f.Output.Formatters.passthrough,"@strip-periods/false":f.Output.Formatters.passthrough,"@quotes/true":function(t,e){return void 0===e?t.getTerm("open-quote"):t.getTerm("open-quote")+e+t.getTerm("close-quote")},"@quotes/inner":function(t,e){return void 0===e?"’":t.getTerm("open-inner-quote")+e+t.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(t,e){return t.sys.wrapCitationEntry(e,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(t,e){var i="";if(t.bibliography&&t.bibliography.opt&&t.bibliography.opt.hangingindent){var r=t.bibliography.opt.hangingindent;i=' start-indent="'+r+'em" text-indent="-'+r+'em"'}var s="";return t.sys.embedBibliographyEntry&&(s=t.sys.embedBibliographyEntry(this.item_id)+"\n"),'<fo:block id="'+this.system_id+'"'+i+">"+e+"</fo:block>\n"+s},"@display/block":function(t,e){return"\n  <fo:block>"+e+"</fo:block>\n"},"@display/left-margin":function(t,e){return'\n  <fo:table table-layout="fixed" width="100%">\n    <fo:table-column column-number="1" column-width="$$$__COLUMN_WIDTH_1__$$$"/>\n    <fo:table-column column-number="2" column-width="proportional-column-width(1)"/>\n    <fo:table-body>\n      <fo:table-row>\n        <fo:table-cell>\n          <fo:block>'+e+"</fo:block>\n        </fo:table-cell>\n        "},"@display/right-inline":function(t,e){return"<fo:table-cell>\n          <fo:block>"+e+"</fo:block>\n        </fo:table-cell>\n      </fo:table-row>\n    </fo:table-body>\n  </fo:table>\n"},"@display/indent":function(t,e){return'<fo:block margin-left="2em">'+e+"</fo:block>\n"},"@showid/true":function(t,e){if(t.tmp.just_looking||t.tmp.suppress_decorations||!this.params||"string"!=typeof e)return e;var i="";if(e){var r=e.match(f.VARIABLE_WRAPPER_PREPUNCT_REX);i=r[1],e=r[2]}var s="";return e&&f.SWAPPING_PUNCTUATION.indexOf(e.slice(-1))>-1&&(s=e.slice(-1),e=e.slice(0,-1)),t.sys.variableWrapper(this.params,i,e,s)},"@URL/true":function(t,e){return"<fo:basic-link external-destination=\"url('"+e+"')\">"+e+"</fo:basic-link>"},"@DOI/true":function(t,e){var i=e;return e.match(/^https?:\/\//)||(i="https://doi.org/"+e),"<fo:basic-link external-destination=\"url('"+i+"')\">"+e+"</fo:basic-link>"}},f.Output.Formats.prototype.latex={text_escape:function(t){return t||(t=""),t},bibstart:"\\begin{thebibliography}{4}",bibend:"\\end{thebibliography}","@font-style/italic":"{\\em %%STRING%%}","@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":f.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":"{\\bf %%STRING%%}","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":f.Output.Formatters.passthrough,"@strip-periods/false":f.Output.Formatters.passthrough,"@quotes/true":function(t,e){return void 0===e?t.getTerm("open-quote"):t.getTerm("open-quote")+e+t.getTerm("close-quote")},"@quotes/inner":function(t,e){return void 0===e?"’":t.getTerm("open-inner-quote")+e+t.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(t,e){return t.sys.wrapCitationEntry(e,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(t,e){return"\\bibitem{"+t.sys.embedBibliographyEntry(this.item_id)+"}\n"},"@display/block":function(t,e){return"\n"+e},"@display/left-margin":function(t,e){return e},"@display/right-inline":function(t,e){return e},"@display/indent":function(t,e){return"\n    "+e},"@showid/true":function(t,e,i){return e},"@URL/true":function(t,e){return e},"@DOI/true":function(t,e){return e}},f.Output.Formats=new f.Output.Formats,f.Registry=function(t){this.debug=!1,this.state=t,this.registry={},this.reflist=[],this.refhash={},this.namereg=new f.Registry.NameReg(t),this.citationreg=new f.Registry.CitationReg(t),this.authorstrings={},this.masterMap={},this.mylist=[],this.myhash={},this.deletes=[],this.inserts=[],this.uncited={},this.refreshes={},this.akeys={},this.oldseq={},this.return_data={},this.ambigcites={},this.ambigresets={},this.sorter=new f.Registry.Comparifier(t,"bibliography_sort"),this.getSortedIds=function(){for(var t=[],e=0,i=this.reflist.length;e<i;e+=1)t.push(""+this.reflist[e].id);return t},this.getSortedRegistryItems=function(){for(var t=[],e=0,i=this.reflist.length;e<i;e+=1)t.push(this.reflist[e]);return t}},f.Registry.prototype.init=function(t,e){var i,r;if(this.oldseq={},e){this.uncited={};for(var i=0,r=t.length;i<r;i+=1)this.myhash[t[i]]||this.mylist.push(""+t[i]),this.uncited[t[i]]=!0,this.myhash[t[i]]=!0}else{for(var s in this.uncited)t.push(s);var n={};for(i=t.length-1;i>-1;i+=-1)n[t[i]]?t=t.slice(0,i).concat(t.slice(i+1)):n[t[i]]=!0;this.mylist=t,this.myhash=n}this.refreshes={},this.touched={},this.ambigsTouched={},this.ambigresets={}},f.Registry.prototype.dopurge=function(t){for(var e=this.mylist.length-1;e>-1;e+=-1)!this.citationreg.citationsByItemId||this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[this.mylist[e]]||t[this.mylist[e]]||(delete this.myhash[this.mylist[e]],delete this.uncited[this.mylist[e]],this.mylist=this.mylist.slice(0,e).concat(this.mylist.slice(e+1)));this.dodeletes(this.myhash)},f.Registry.prototype.dodeletes=function(t){var e,i,r,s,n,a,o,l;if("string"==typeof t){var e=t;(t={})[e]=!0}for(var e in this.registry)if(!t[e]){if(this.uncited[e])continue;for(a in this.namereg.delitems(e))this.refreshes[a]=!0;for(i=this.registry[e].ambig,(o=this.ambigcites[i].indexOf(e))>-1&&(n=this.ambigcites[i].slice(),this.ambigcites[i]=n.slice(0,o).concat(n.slice(o+1,n.length)),this.ambigresets[i]=this.ambigcites[i].length),s=this.ambigcites[i].length,r=0;r<s;r+=1)l=""+this.ambigcites[i][r],this.refreshes[l]=!0;if(this.registry[e].siblings){if(1==this.registry[e].siblings.length){var u=this.registry[e].siblings[0];this.registry[u].siblings&&(this.registry[u].siblings.pop(),this.registry[u].master=!0)}else if(this.registry[e].siblings.length>1){var p=[e];if(this.registry[e].master){var c=this.registry[e].siblings[0];this.registry[c].master=!0,p.push(c)}for(var h=[],f=this.registry[e].siblings.length-1;f>-1;f+=-1){var m=this.registry[e].siblings.pop();-1===p.indexOf(m)&&h.push(m)}for(var f=h.length-1;f>-1;f+=-1)this.registry[e].siblings.push(h[f])}}for(var d=this.reflist.length-1;d>-1;d--)this.reflist[d].id===e&&(this.reflist=this.reflist.slice(0,d).concat(this.reflist.slice(d+1)));delete this.registry[e],delete this.refhash[e],this.return_data.bibchange=!0}},f.Registry.prototype.doinserts=function(t){var e,i,r,s,n,a,o;"string"==typeof t&&(t=[t]);for(var a=0,o=t.length;a<o;a+=1)e=t[a],this.registry[e]||(i=this.state.retrieveItem(e),r=f.getAmbiguousCite.call(this.state,i),this.ambigsTouched[r]=!0,i.legislation_id||(this.akeys[r]=!0),s={id:""+e,seq:0,offset:0,sortkeys:!1,ambig:!1,rendered:!1,disambig:!1,ref:i,newItem:!0},this.registry[e]=s,this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[e]&&(this.registry[e]["first-reference-note-number"]=this.citationreg.citationsByItemId[e][0].properties.noteIndex),n=f.getAmbigConfig.call(this.state),this.registerAmbigToken(r,e,n),this.touched[e]=!0,this.return_data.bibchange=!0)},f.Registry.prototype.rebuildlist=function(t){var e,i,r,s;if(t)for(i=0,this.reflist=[],e=this.mylist.length;i<e;i+=1)r=this.mylist[i],s=this.registry[r],this.reflist.push(s),this.oldseq[r]=this.registry[r].seq,this.registry[r].seq=i+1;else for(i=0,this.reflist_inserts=[],e=this.mylist.length;i<e;i+=1)r=this.mylist[i],(s=this.registry[r]).newItem&&this.reflist_inserts.push(s),this.oldseq[r]=this.registry[r].seq,this.registry[r].seq=i+1},f.Registry.prototype.dorefreshes=function(){var t,e,i,r,s;for(var t in this.refreshes)if(e=this.registry[t]){e.sortkeys=void 0,i=this.state.refetchItem(t);var r=e.ambig;for(var n in void 0===r&&(this.state.tmp.disambig_settings=!1,r=f.getAmbiguousCite.call(this.state,i),s=f.getAmbigConfig.call(this.state),this.registerAmbigToken(r,t,s)),this.ambigresets)if(1===this.ambigresets[n]){var a=this.ambigcites[r][0],i=this.state.refetchItem(a);this.registry[a].disambig=new f.AmbigConfig,this.state.tmp.disambig_settings=!1;var r=f.getAmbiguousCite.call(this.state,i),s=f.getAmbigConfig.call(this.state);this.registerAmbigToken(r,a,s)}this.state.tmp.taintedItemIDs[t]=!0,this.ambigsTouched[r]=!0,i.legislation_id||(this.akeys[r]=!0),this.touched[t]=!0}},f.Registry.prototype.setdisambigs=function(){for(var t in this.ambigsTouched)this.state.disambiguate.run(t);this.ambigsTouched={},this.akeys={}},f.Registry.prototype.renumber=function(){var t,e,i;for(this.state.bibliography_sort.opt.citation_number_sort_direction===f.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map={}),t=this.reflist.length,e=0;e<t;e+=1)(i=this.reflist[e]).seq=e+1,this.state.bibliography_sort.opt.citation_number_sort_direction===f.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map[i.seq]=this.reflist.length-i.seq+1),this.state.opt.update_mode===f.NUMERIC&&i.seq!=this.oldseq[i.id]&&(this.state.tmp.taintedItemIDs[i.id]=!0),i.seq!=this.oldseq[i.id]&&(this.return_data.bibchange=!0)},f.Registry.prototype.setsortkeys=function(){for(var t,e=0,i=this.mylist.length;e<i;e+=1){var t=this.mylist[e];(this.touched[t]||this.state.tmp.taintedItemIDs[t]||!this.registry[t].sortkeys)&&(this.registry[t].sortkeys=f.getSortKeys.call(this.state,this.state.retrieveItem(t),"bibliography_sort"))}},f.Registry.prototype._insertItem=function(t,e){return e.splice(this._locationOf(t,e)+1,0,t),e},f.Registry.prototype._locationOf=function(t,e,i,r){if(0===e.length)return -1;var s=(i=i||0)+(r=r||e.length)>>1,n=this.sorter.compareKeys(t,e[s]);if(r-i<=1)return -1==n?s-1:s;switch(n){case -1:return this._locationOf(t,e,i,s);case 0:return s;case 1:return this._locationOf(t,e,s,r)}},f.Registry.prototype.sorttokens=function(t){var e,i,r,s;if(!t){for(s=0,this.reflist_inserts=[],e=this.mylist.length;s<e;s+=1)i=this.mylist[s],(r=this.registry[i]).newItem&&this.reflist_inserts.push(r);for(var n in this.state.tmp.taintedItemIDs)if(this.registry[n]&&!this.registry[n].newItem)for(var a=this.reflist.length-1;a>-1;a--)this.reflist[a].id===n&&(this.reflist_inserts.push(this.reflist[a]),this.reflist=this.reflist.slice(0,a).concat(this.reflist.slice(a+1)));for(var a=0,o=this.reflist_inserts.length;a<o;a++){var r=this.reflist_inserts[a];delete r.newItem,this.reflist=this._insertItem(r,this.reflist)}for(s=0;s<e;s+=1)i=this.mylist[s],r=this.registry[i],this.registry[i].seq=s+1}},f.Registry.Comparifier=function(t,e){var i,r,s,n,a=f.getSortCompare.call(t,t.opt["default-locale-sort"]);i=t[e].opt.sort_directions,this.compareKeys=function(t,e){for(s=0,r=t.sortkeys?t.sortkeys.length:0;s<r;s+=1){var n=0;if(0<(n=t.sortkeys[s]===e.sortkeys[s]?0:void 0===t.sortkeys[s]?i[s][1]:void 0===e.sortkeys[s]?i[s][0]:a(t.sortkeys[s],e.sortkeys[s])))return i[s][1];if(0>n)return i[s][0]}return t.seq>e.seq?1:t.seq<e.seq?-1:0},n=this.compareKeys,this.compareCompositeKeys=function(t,e){return n(t[1],e[1])}},f.Registry.prototype.compareRegistryTokens=function(t,e){return t.seq>e.seq?1:t.seq<e.seq?-1:0},f.Registry.prototype.registerAmbigToken=function(t,e,i){if(this.registry[e]||f.debug("Warning: unregistered item: itemID=("+e+"), akey=("+t+")"),this.registry[e]&&this.registry[e].disambig&&this.registry[e].disambig.names){for(var r=0,s=i.names.length;r<s;r+=1)if(i.names[r]!==this.registry[e].disambig.names[r])this.state.tmp.taintedItemIDs[e]=!0;else if(i.givens[r])for(var n=0,a=i.givens[r].length;n<a;n+=1)i.givens[r][n]!==this.registry[e].disambig.givens[r][n]&&(this.state.tmp.taintedItemIDs[e]=!0)}this.ambigcites[t]||(this.ambigcites[t]=[]),-1===this.ambigcites[t].indexOf(""+e)&&this.ambigcites[t].push(""+e),this.registry[e].ambig=t,this.registry[e].disambig=f.cloneAmbigConfig(i)},f.getSortKeys=function(t,e){var i,r,s,n,a,o;for(i=this.tmp.area,r=this.tmp.root,s=this.tmp.extension,n=f.Util.Sort.strip_prepositions,this.tmp.area=e,this.tmp.root=e.indexOf("_")>-1?e.slice(0,-5):e,this.tmp.extension="_sort",this.tmp.disambig_override=!0,this.tmp.disambig_request=!1,this.tmp.suppress_decorations=!0,f.getCite.call(this,t),this.tmp.suppress_decorations=!1,this.tmp.disambig_override=!1,a=this[e].keys.length,o=0;o<a;o+=1)this[e].keys[o]=n(this[e].keys[o]);return this.tmp.area=i,this.tmp.root=r,this.tmp.extension=s,this[e].keys},f.Registry.NameReg=function(t){var e,i,r,s,n,a,o,l,u;this.state=t,this.namereg={},this.nameind={},this.nameindpkeys={},this.itemkeyreg={},o=function(t){return t||(t=""),t.replace(/\./g," ").replace(/\s+/g," ").replace(/\s+$/,"")},l=function(t,s,n){e=o(n.family),"never"===t.opt["demote-non-dropping-particle"]&&n["non-dropping-particle"]&&n.family&&(e=`${e} ${n["non-dropping-particle"]}`);var a=(r=o(n.given)).match(/[,\!]* ([^,]+)$/);a&&a[1]===a[1].toLowerCase()&&(r=r.replace(/[,\!]* [^,]+$/,"")),i=f.Util.Names.initializeWith(t,r,"%s"),"by-cite"===t.citation.opt["givenname-disambiguation-rule"]&&(e=""+s+e)},this.addname=function(s,n,a){var o,u;if(n=t.nameOutput.getName(n,"locale-translit",!0).name,!t.citation.opt["givenname-disambiguation-rule"]||"primary-"!==t.citation.opt["givenname-disambiguation-rule"].slice(0,8)||0===a){if(l(this.state,""+s,n),e&&(void 0===this.namereg[e]?(this.namereg[e]={},this.namereg[e].count=0,this.namereg[e].ikey={},this.namereg[e].items=[s]):-1===this.namereg[e].items.indexOf(s)&&this.namereg[e].items.push(s)),e&&i)if(void 0===this.namereg[e].ikey[i]){if(this.namereg[e].ikey[i]={},this.namereg[e].ikey[i].count=0,this.namereg[e].ikey[i].skey={},this.namereg[e].ikey[i].items=[s],this.namereg[e].count+=1,2===this.namereg[e].count)for(var o=0,u=this.namereg[e].items.length;o<u;o+=1)t.tmp.taintedItemIDs[this.namereg[e].items[o]]=!0}else -1===this.namereg[e].ikey[i].items.indexOf(s)&&this.namereg[e].ikey[i].items.push(s);if(e&&i&&r)if(void 0===this.namereg[e].ikey[i].skey[r]){if(this.namereg[e].ikey[i].skey[r]={},this.namereg[e].ikey[i].skey[r].items=[s],this.namereg[e].ikey[i].count+=1,2===this.namereg[e].ikey[i].count)for(var o=0,u=this.namereg[e].ikey[i].items.length;o<u;o+=1)t.tmp.taintedItemIDs[this.namereg[e].ikey[i].items[o]]=!0}else -1===this.namereg[e].ikey[i].skey[r].items.indexOf(s)&&this.namereg[e].ikey[i].skey[r].items.push(s);void 0===this.nameind[s]&&(this.nameind[s]={},this.nameindpkeys[s]={}),e&&(this.nameind[s][e+"::"+i+"::"+r]=!0,this.nameindpkeys[s][e]=this.namereg[e])}},this.delitems=function(s){var n,o,l,p,c;for(("string"==typeof s||"number"==typeof s)&&(s=[""+s]),o=s.length,n=0;n<o;n+=1)if(p=""+s[n],this.nameind[p]){for(c in this.nameind[p])if(this.nameind[p].hasOwnProperty(c)){var h=c.split("::");if(e=h[0],i=h[1],r=h[2],void 0===this.namereg[e])continue;if(a=this.namereg[e].items,r&&this.namereg[e].ikey[i]&&this.namereg[e].ikey[i].skey[r]&&((l=(u=this.namereg[e].ikey[i].skey[r].items).indexOf(""+p))>-1&&(this.namereg[e].ikey[i].skey[r].items=u.slice(0,l).concat(u.slice([l+1]))),0===this.namereg[e].ikey[i].skey[r].items.length)&&(delete this.namereg[e].ikey[i].skey[r],this.namereg[e].ikey[i].count+=-1,this.namereg[e].ikey[i].count<2))for(var f=0,m=this.namereg[e].ikey[i].items.length;f<m;f+=1)t.tmp.taintedItemIDs[this.namereg[e].ikey[i].items[f]]=!0;if(i&&this.namereg[e].ikey[i]&&((l=this.namereg[e].ikey[i].items.indexOf(""+p))>-1&&(a=this.namereg[e].ikey[i].items.slice(),this.namereg[e].ikey[i].items=a.slice(0,l).concat(a.slice([l+1]))),0===this.namereg[e].ikey[i].items.length)&&(delete this.namereg[e].ikey[i],this.namereg[e].count+=-1,this.namereg[e].count<2))for(var f=0,m=this.namereg[e].items.length;f<m;f+=1)t.tmp.taintedItemIDs[this.namereg[e].items[f]]=!0;e&&((l=this.namereg[e].items.indexOf(""+p))>-1&&(a=this.namereg[e].items.slice(),this.namereg[e].items=a.slice(0,l).concat(a.slice([l+1],a.length))),this.namereg[e].items.length<2&&delete this.namereg[e]),delete this.nameind[p][c]}delete this.nameind[p],delete this.nameindpkeys[p]}return{}},this.evalname=function(r,a,o,u,p,c){if("bibliography"===t.tmp.area.slice(0,12)&&!p)if("string"==typeof c)return 1;else return 2;a=t.nameOutput.getName(a,"locale-translit",!0).name,l(this.state,""+r,a),h=2,s=t.opt["disambiguate-add-givenname"];var h,f=n=t.citation.opt["givenname-disambiguation-rule"];return("by-cite"===n&&(n="all-names"),"short"===p?h=0:"string"==typeof c&&(h=1),void 0===this.namereg[e]||void 0===this.namereg[e].ikey[i])?h:"by-cite"===f&&h<=u?u:!s||"string"==typeof n&&"primary-name"===n.slice(0,12)&&o>0||(n&&"all-names"!==n&&"primary-name"!==n?("all-names-with-initials"===n||"primary-name-with-initials"===n)&&(h=+(this.namereg[e].count>1)):(this.namereg[e].count>1&&(h=1),(this.namereg[e].ikey&&this.namereg[e].ikey[i].count>1||this.namereg[e].count>1&&"string"!=typeof c)&&(h=2)),t.registry.registry[r])?h:"short"==p?0:"string"==typeof c?1:void 0}},f.Registry.CitationReg=function(){this.citationById={},this.citationByIndex=[]},f.Disambiguation=function(t){this.state=t,this.sys=this.state.sys,this.registry=t.registry.registry,this.ambigcites=t.registry.ambigcites,this.configModes(),this.debug=!1},f.Disambiguation.prototype.run=function(t){this.modes.length&&(this.debug&&this.state.sys.print("[A] === RUN ==="),this.akey=t,this.initVars(t)&&this.runDisambig())},f.Disambiguation.prototype.runDisambig=function(){var t;for(this.debug&&this.state.sys.print("[C] === runDisambig() ==="),this.initGivens=!0;this.lists.length;){for(this.gnameset=0,this.gname=0,this.clashes=[1,0];this.lists[0][1].length;)this.listpos=0,this.base||(this.base=this.lists[0][0]),t=this.incrementDisambig(),this.scanItems(this.lists[0]),this.evalScan(t);this.lists=this.lists.slice(1)}},f.Disambiguation.prototype.scanItems=function(t){this.debug&&this.state.sys.print("[2] === scanItems() ==="),this.Item=t[1][0],this.ItemCite=f.getAmbiguousCite.call(this.state,this.Item,this.base,!0),this.scanlist=t[1],this.partners=[],this.partners.push(this.Item),this.nonpartners=[];for(var e,i,r,s=0,e=1,i=t[1].length;e<i;e+=1){r=t[1][e];var n=f.getAmbiguousCite.call(this.state,r,this.base,!0);this.debug&&e>1&&this.state.sys.print("  -----------"),this.ItemCite===n?(this.debug&&(this.state.sys.print("  [CLASH]--> "+this.Item.id+": "+this.ItemCite),this.state.sys.print("             "+r.id+": "+n)),s+=1,this.partners.push(r)):(this.debug&&(this.state.sys.print("  [clear]--> "+this.Item.id+": "+this.ItemCite),this.state.sys.print("             "+r.id+": "+n)),this.nonpartners.push(r))}this.clashes[0]=this.clashes[1],this.clashes[1]=s},f.Disambiguation.prototype.evalScan=function(t){this[this.modes[this.modeindex]](t),t&&(this.modeindex<this.modes.length-1?this.modeindex+=1:this.lists[this.listpos+1]=[this.base,[]])},f.Disambiguation.prototype.disNames=function(t){var e,i;if(this.debug&&this.state.sys.print("[3] == disNames() =="),0===this.clashes[1]&&1===this.nonpartners.length)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [a]: lone partner, one nonpartner"),this.state.sys.print("  registering "+this.partners[0].id+" and "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,[]];else if(0===this.clashes[1])this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [b]: lone partner, unknown number of remaining nonpartners"),this.state.sys.print("  registering "+this.partners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.nonpartners.length&&(this.initGivens=!0);else if(1===this.nonpartners.length)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [c]: lone nonpartner, unknown number of partners remaining"),this.state.sys.print("  registering "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.partners];else if(this.clashes[1]<this.clashes[0])this.captureStepToBase(),this.debug&&this.state.sys.print("  ** RESOLUTION [d]: better result, but no entries safe to register"),this.lists[this.listpos]=[this.betterbase,this.partners],this.lists.push([this.betterbase,this.nonpartners]);else if(this.debug&&this.state.sys.print("  ** RESOLUTION [e]: no improvement, and clashes remain"),t&&(this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.lists.push([this.betterbase,this.partners]),this.modeindex===this.modes.length-1)){this.debug&&this.state.sys.print("     (registering clashing entries because we've run out of options)");for(var e=0,i=this.partners.length;e<i;e+=1)this.state.registry.registerAmbigToken(this.akey,""+this.partners[e].id,this.betterbase);this.lists[this.listpos]=[this.betterbase,[]]}},f.Disambiguation.prototype.disExtraText=function(){this.debug&&this.state.sys.print("[3] === disExtraText ==");var t=!1;if(0===this.clashes[1]&&this.nonpartners.length<2&&(t=!0),t||this.base.disambiguate&&this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax){if(t||this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax)if(t||this.modeindex===this.modes.length-1){for(var e=this.lists[this.listpos][0],i=0,r=this.lists[this.listpos][1].length;i<r;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][i].id,e);this.lists[this.listpos]=[this.betterbase,[]]}else{this.modeindex=this.modes.length-1;var e=this.lists[this.listpos][0];e.disambiguate=!0;for(var i=0,r=this.lists[this.listpos][1].length;i<r;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][i].id,e)}}else if(this.modeindex=0,this.base.disambiguate=this.state.tmp.disambiguate_count,this.betterbase.disambiguate=this.state.tmp.disambiguate_count,this.base.disambiguate)this.disNames();else{this.initGivens=!0,this.base.disambiguate=1;for(var i=0,r=this.lists[this.listpos][1].length;i<r;i+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id]=!0}},f.Disambiguation.prototype.disYears=function(){this.debug&&this.state.sys.print("[3] === disYears ==");var t,e,i,r=[],s=this.lists[this.listpos][0];if(this.clashes[1])for(var n=0,a=this.state.registry.mylist.length;n<a;n+=1)for(var o=this.state.registry.mylist[n],l=0,u=this.lists[this.listpos][1].length;l<u;l+=1){var i=this.lists[this.listpos][1][l];if(i.id==o){r.push(this.registry[i.id]);break}}r.sort(this.state.registry.sorter.compareKeys);for(var t=0,e=r.length;t<e;t+=1){s.year_suffix=""+t;var p=this.state.registry.registry[r[t].id].disambig;this.state.registry.registerAmbigToken(this.akey,""+r[t].id,s),f.ambigConfigDiff(p,s)&&(this.state.tmp.taintedItemIDs[r[t].id]=!0)}this.lists[this.listpos]=[this.betterbase,[]]},f.Disambiguation.prototype.incrementDisambig=function(){if(this.debug&&this.state.sys.print("\n[1] === incrementDisambig() ==="),this.initGivens)return this.initGivens=!1,!1;var t=!1,e=!0;if("disNames"===this.modes[this.modeindex]){e=!1,"number"!=typeof this.givensMax&&(e=!0);var i=!1;"number"!=typeof this.namesMax&&(i=!0),"number"==typeof this.givensMax&&(this.base.givens.length&&this.base.givens[this.gnameset][this.gname]<this.givensMax?this.base.givens[this.gnameset][this.gname]+=1:e=!0),"number"==typeof this.namesMax&&e&&(this.state.opt["disambiguate-add-names"]?(i=!1,this.gname<this.namesMax?(this.base.names[this.gnameset]+=1,this.gname+=1):i=!0):i=!0),"number"==typeof this.namesetsMax&&i&&this.gnameset<this.namesetsMax&&(this.gnameset+=1,this.base.names[this.gnameset]=1,this.gname=0),this.debug&&(this.state.sys.print("    ------------------"),this.state.sys.print("    incremented values"),this.state.sys.print("    ------------------"),this.state.sys.print("    | gnameset: "+this.gnameset),this.state.sys.print("    | gname: "+this.gname),this.state.sys.print("    | names value: "+this.base.names[this.gnameset]),this.base.givens.length?this.state.sys.print("    | givens value: "+this.base.givens[this.gnameset][this.gname]):this.state.sys.print("    | givens value: nil"),this.state.sys.print("    | namesetsMax: "+this.namesetsMax),this.state.sys.print("    | namesMax: "+this.namesMax),this.state.sys.print("    | givensMax: "+this.givensMax)),("number"!=typeof this.namesetsMax||-1===this.namesetsMax||this.gnameset===this.namesetsMax)&&(!this.state.opt["disambiguate-add-names"]||"number"!=typeof this.namesMax||this.gname===this.namesMax)&&("number"!=typeof this.givensMax||void 0===this.base.givens[this.gnameset]||void 0===this.base.givens[this.gnameset][this.gname]||this.base.givens[this.gnameset][this.gname]===this.givensMax)&&(t=!0,this.debug&&this.state.sys.print("    MAXED"))}else"disExtraText"===this.modes[this.modeindex]&&(this.base.disambiguate+=1,this.betterbase.disambiguate+=1);return t},f.Disambiguation.prototype.initVars=function(t){if(this.debug&&this.state.sys.print("[B] === initVars() ==="),this.lists=[],this.base=!1,this.betterbase=!1,this.akey=t,this.maxNamesByItemId={},i=[],!(e=this.ambigcites[t])||!e.length)return!1;var e,i,r,s,n,a=this.state.refetchItem(""+e[0]);if(this.getCiteData(a),this.base=f.getAmbigConfig.call(this.state),e&&e.length>1){i.push([this.maxNamesByItemId[a.id],a]);for(var s=1,n=e.length;s<n;s+=1)a=this.state.refetchItem(""+e[s]),this.getCiteData(a,this.base),i.push([this.maxNamesByItemId[a.id],a]);i.sort(function(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:t[1].id>e[1].id?1:t[1].id<e[1].id?-1:0}),r=[];for(var s=0,n=i.length;s<n;s+=1)r.push(i[s][1]);this.lists.push([this.base,r]),this.Item=this.lists[0][1][0]}else this.Item=this.state.refetchItem(""+e[0]);return this.modeindex=0,this.state.citation.opt["disambiguate-add-names"],this.namesMax=this.maxNamesByItemId[this.Item.id][0],this.padBase(this.base),this.padBase(this.betterbase),this.base.year_suffix=!1,this.base.disambiguate=!1,this.betterbase.year_suffix=!1,this.betterbase.disambiguate=!1,"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.state.opt["disambiguate-add-givenname"]&&(this.givensMax=2),!0},f.Disambiguation.prototype.padBase=function(t){for(var e=0,i=t.names.length;e<i;e+=1){t.givens[e]||(t.givens[e]=[]);for(var r=0,s=t.names[e];r<s;r+=1)t.givens[e][r]||(t.givens[e][r]=0)}},f.Disambiguation.prototype.configModes=function(){var t,e;this.modes=[],t=this.state.opt["disambiguate-add-givenname"],e=this.state.citation.opt["givenname-disambiguation-rule"],(this.state.opt["disambiguate-add-names"]||t&&"by-cite"===e)&&this.modes.push("disNames"),this.state.opt.development_extensions.prioritize_disambiguate_condition?(this.state.opt.has_disambiguate&&this.modes.push("disExtraText"),this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears")):(this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears"),this.state.opt.has_disambiguate&&this.modes.push("disExtraText"))},f.Disambiguation.prototype.getCiteData=function(t,e){if(!this.maxNamesByItemId[t.id]){f.getAmbiguousCite.call(this.state,t,e),e=f.getAmbigConfig.call(this.state),this.maxNamesByItemId[t.id]=f.getMaxVals.call(this.state),this.state.registry.registry[t.id].disambig.givens=this.state.tmp.disambig_settings.givens.slice();for(var i=0,r=this.state.registry.registry[t.id].disambig.givens.length;i<r;i+=1)this.state.registry.registry[t.id].disambig.givens[i]=this.state.tmp.disambig_settings.givens[i].slice();this.namesetsMax=this.state.registry.registry[t.id].disambig.names.length-1,this.base||(this.base=e,this.betterbase=f.cloneAmbigConfig(e)),e.names.length<this.base.names.length&&(this.base=e);for(var i=0,r=e.names.length;i<r;i+=1)e.names[i]>this.base.names[i]&&(this.base.givens[i]=e.givens[i].slice(),this.base.names[i]=e.names[i],this.betterbase.names=this.base.names.slice(),this.betterbase.givens=this.base.givens.slice(),this.padBase(this.base),this.padBase(this.betterbase));this.betterbase.givens=this.base.givens.slice();for(var s=0,n=this.base.givens.length;s<n;s+=1)this.betterbase.givens[s]=this.base.givens[s].slice()}},f.Disambiguation.prototype.captureStepToBase=function(){"by-cite"===this.state.citation.opt["givenname-disambiguation-rule"]&&this.base.givens&&this.base.givens.length&&void 0!==this.base.givens[this.gnameset][this.gname]&&(this.betterbase.givens.length<this.base.givens.length&&(this.betterbase.givens=JSON.parse(JSON.stringify(this.base.givens))),this.betterbase.givens[this.gnameset][this.gname]=this.base.givens[this.gnameset][this.gname]),this.betterbase.names[this.gnameset]=this.base.names[this.gnameset]},f.Engine.prototype.getJurisdictionList=function(t){for(var e=[],i=t.split(":"),r=i.length;r>0;r--){var s=i.slice(0,r).join(":");if(e.push(s),this.opt.jurisdiction_fallbacks[s]){var n=this.opt.jurisdiction_fallbacks[s];e.push(n)}}return -1===e.indexOf("us")&&e.push("us"),e},f.Engine.prototype.loadStyleModule=function(t,e,i){var r=null;this.juris[t]={};var s=f.setupXml(e);s.addMissingNameNodes(s.dataObj),s.addInstitutionNodes(s.dataObj),s.insertPublisherAndPlace(s.dataObj),s.flagDateMacros(s.dataObj);for(var n=s.getNodesByName(s.dataObj,"law-module"),a=0,o=n.length;a<o;a++){var l=s.getAttributeValue(n[a],"types");if(l){this.juris[t].types={},l=l.split(/\s+/);for(var u=0,p=l.length;u<p;u++)this.juris[t].types[l[u]]=!0}!i&&(r=s.getAttributeValue(n[a],"fallback"))&&"us"!==t&&(this.opt.jurisdiction_fallbacks[t]=r)}var c=this.opt.lang?this.opt.lang:this.opt["default-locale"][0];f.SET_COURT_CLASSES(this,c,s,s.dataObj),this.juris[t].types||(this.juris[t].types=f.MODULE_TYPES);for(var n=s.getNodesByName(s.dataObj,"macro"),a=0,o=n.length;a<o;a++){var h=s.getAttributeValue(n[a],"name");if(!f.MODULE_MACROS[h]){f.debug('CSL: skipping non-modular macro name "'+h+'" in module context');continue}this.juris[t][h]=[],this.buildTokenLists(n[a],this.juris[t][h]),this.configureTokenList(this.juris[t][h])}return r},f.Engine.prototype.retrieveAllStyleModules=function(t){var e={},i=this.locale[this.opt.lang].opts["jurisdiction-preference"];i=[""].concat(i=i||[]);for(var r=i.length-1;r>-1;r--)for(var s=i[r],n=0,a=t.length;n<a;n++){var o=t[n];if(!this.opt.jurisdictions_seen[o]){var l=this.sys.retrieveStyleModule(o,s);(l||s)&&!l||(this.opt.jurisdictions_seen[o]=!0),l&&(e[o]=l)}}return e},f.ParticleList=[["'s",n=[[null,[0,1]]]],["'s-",n],["'t",n],["a",n],["aan 't",a=[[null,[0,2]]]],["aan de",a],["aan den",a],["aan der",a],["aan het",a],["aan t",a],["aan",n],["ad-",l=[[null,[0,1]],[[0,1],null]]],["adh-",l],["af",l],["al",l],["al-",l],["am de",a],["am",n],["an-",l],["ar-",l],["as-",l],["ash-",l],["at-",l],["ath-",l],["auf dem",c=[[[0,2],null],[null,[0,2]]]],["auf den",c],["auf der",c],["auf ter",a],["auf",p=[[[0,1],null],[null,[0,1]]]],["aus 'm",c],["aus dem",c],["aus den",c],["aus der",c],["aus m",c],["aus",p],["aus'm",c],["az-",l],["aš-",l],["aḍ-",l],["aḏ-",l],["aṣ-",l],["aṭ-",l],["aṯ-",l],["aẓ-",l],["ben",n],["bij 't",a],["bij de",a],["bij den",a],["bij het",a],["bij t",a],["bij",n],["bin",n],["boven d",a],["boven d'",a],["d",n],["d'",l],["da",l],["dal",n],["dal'",n],["dall'",n],["dalla",n],["das",l],["de die le",o=[[null,[0,3]]]],["de die",a],["de l",a],["de l'",a],["de la",h=[[null,[0,2]],[[0,1],[1,2]]]],["de las",h],["de le",a],["de li",u=[[null,[0,2]],[[0,2],null]]],["de van der",o],["de",l],["de'",l],["deca",n],["degli",l],["dei",l],["del",l],["dela",s=[[[0,1],null]]],["dell'",l],["della",l],["delle",l],["dello",l],["den",l],["der",l],["des",l],["di",l],["die le",a],["do",n],["don",n],["dos",l],["du",l],["ed-",l],["edh-",l],["el",l],["el-",l],["en-",l],["er-",l],["es-",l],["esh-",l],["et-",l],["eth-",l],["ez-",l],["eš-",l],["eḍ-",l],["eḏ-",l],["eṣ-",l],["eṭ-",l],["eṯ-",l],["eẓ-",l],["het",n],["i",n],["il",s],["im",n],["in 't",a],["in de",a],["in den",a],["in der",u],["in het",a],["in t",a],["in",n],["l",n],["l'",n],["la",n],["las",n],["le",n],["les",l],["lo",l],["los",n],["lou",n],["of",n],["onder 't",a],["onder de",a],["onder den",a],["onder het",a],["onder t",a],["onder",n],["op 't",a],["op de",u],["op den",a],["op der",a],["op gen",a],["op het",a],["op t",a],["op ten",a],["op",n],["over 't",a],["over de",a],["over den",a],["over het",a],["over t",a],["over",n],["s",n],["s'",n],["sen",s],["t",n],["te",n],["ten",n],["ter",n],["tho",n],["thoe",n],["thor",n],["to",n],["toe",n],["tot",n],["uijt 't",a],["uijt de",a],["uijt den",a],["uijt te de",o],["uijt ten",a],["uijt",n],["uit 't",a],["uit de",a],["uit den",a],["uit het",a],["uit t",a],["uit te de",o],["uit ten",a],["uit",n],["unter",n],["v",n],["v.",n],["v.d.",n],["van 't",a],["van de l",o],["van de l'",o],["van de",a],["van de",a],["van den",a],["van der",a],["van gen",a],["van het",a],["van la",a],["van t",a],["van ter",a],["van van de",o],["van",l],["vander",n],["vd",n],["ver",n],["vom und zum",[[[0,3],null]]],["vom",l],["von 't",a],["von dem",c],["von den",c],["von der",c],["von t",a],["von und zu",[[[0,3],null],[null,[0,3]]]],["von zu",c],["von",p],["voor 't",a],["voor de",a],["voor den",a],["voor in 't",o],["voor in t",o],["voor",n],["vor der",c],["vor",p],["z",s],["ze",s],["zu",p],["zum",l],["zur",l]],f.parseParticles=function(){function t(t,e,i){var r,s,n=t;t=i?t.toLowerCase():t;var a=[];e?(t=t.split("").reverse().join(""),r=f.PARTICLE_GIVEN_REGEXP):r=f.PARTICLE_FAMILY_REGEXP;for(var o=t.match(r);o;){var l=e?o[1].split("").reverse().join(""):o[1],u=!!o&&l,u=!!u&&l.replace(/^[-\'\u02bb\u2019\s]*(.).*$/,"$1");if(!(s=!!u&&u.toUpperCase()!==u))break;e?(a.push(n.slice(-1*l.length)),n=n.slice(0,-1*l.length)):(a.push(n.slice(0,l.length)),n=n.slice(l.length)),o=(t=o[2]).match(r)}if(e){t=t.split("").reverse().join(""),a.reverse();for(var p=1,c=a.length;p<c;p++)" "==a[p].slice(0,1)&&(a[p-1]+=" ");for(var p=0,c=a.length;p<c;p++)" "==a[p].slice(0,1)&&(a[p]=a[p].slice(1));t=n.slice(0,t.length)}else t=n.slice(-1*t.length);return[s,t,a]}return function(e){var i,r,s=t(e.family),n=s[1],a=s[2];e.family=n;var o=(r=(i=a.join("")).slice(-1),i=i.trim()," "===r&&["'","’"].indexOf(i.slice(-1))>-1&&(i+=" "),i);o&&(e["non-dropping-particle"]=o);if(!e.suffix&&e.given){var l=e.given.match(/(\s*,!*\s*)/);if(l){var u=e.given.indexOf(l[1]),p=e.given.slice(u+l[1].length),c=e.given.slice(u,u+l[1].length).replace(/\s*/g,"");"et al"!==p.replace(/\./g,"")||e["dropping-particle"]?(2===c.length&&(e["comma-suffix"]=!0),e.suffix=p):(e["dropping-particle"]=p,e["comma-dropping-particle"]=","),e.given=e.given.slice(0,u)}}var s=t(e.given,!0),h=s[1],f=s[2];e.given=h;var m=f.join("").trim();m&&(e["dropping-particle"]=m)}}(),e.exports=f},25726,(t,e,i)=>{"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],r=!0,s=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){s=!0,n=t}finally{try{r||null==o.return||o.return()}finally{if(s)throw n}}return i}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.parse=i.types=i.scope=void 0;let s=t=>t.replace(/$|( )|(?!^)(?=[A-Z])/g,"\\.?$1"),n=t=>`(?:${t.join("|")})\\b`,a=(t,e)=>RegExp(`(?:^| )(${t}$)`,e),o=n(["mr","mrs","ms","miss","dr","herr","monsieur","hr","frau","a v m","admiraal","admiral","air cdre","air commodore","air marshal","air vice marshal","alderman","alhaji","ambassador","baron","barones","brig","brig gen","brig general","brigadier","brigadier general","brother","canon","capt","captain","cardinal","cdr","chief","cik","cmdr","coach","col","col dr","colonel","commandant","commander","commissioner","commodore","comte","comtessa","congressman","conseiller","consul","conte","contessa","corporal","councillor","count","countess","crown prince","crown princess","dame","datin","dato","datuk","datuk seri","deacon","deaconess","dean","dhr","dipl ing","doctor","dott","dott sa","dr","dr ing","dra","drs","embajador","embajadora","en","encik","eng","eur ing","exma sra","exmo sr","f o","father","first lieutient","first officer","flt lieut","flying officer","fr","frau","fraulein","fru","gen","generaal","general","governor","graaf","gravin","group captain","grp capt","h e dr","h h","h m","h r h","hajah","haji","hajim","her highness","her majesty","herr","high chief","his highness","his holiness","his majesty","hon","hr","hra","ing","ir","jonkheer","judge","justice","khun ying","kolonel","lady","lcda","lic","lieut","lieut cdr","lieut col","lieut gen","lord","m","m l","m r","madame","mademoiselle","maj gen","major","master","mevrouw","miss","mlle","mme","monsieur","monsignor","mr","mrs","ms","mstr","nti","pastor","president","prince","princess","princesse","prinses","prof","prof dr","prof sir","professor","puan","puan sri","rabbi","rear admiral","rev","rev canon","rev dr","rev mother","reverend","rva","senator","sergeant","sheikh","sheikha","sig","sig na","sig ra","sir","sister","sqn ldr","sr","sr d","sra","srta","sultan","tan sri","tan sri dato","tengku","teuku","than puying","the hon dr","the hon justice","the hon miss","the hon mr","the hon mrs","the hon ms","the hon sir","the very rev","toh puan","tun","vice admiral","viscount","viscountess","wg cdr"].map(s)),l=n(["I","II","III","IV","V","Senior","Junior","Jr","Sr","PhD","Ph\\.D","APR","RPh","PE","MD","MA","DMD","CME","BVM","CFRE","CLU","CPA","CSC","CSJ","DC","DD","DDS","DO","DVM","EdD","Esq","JD","LLD","OD","OSB","PC","Ret","RGS","RN","RNC","SHCJ","SJ","SNJM","SSMO","USA","USAF","USAFR","USAR","USCG","USMC","USMCR","USN","USNR"].map(s)),u=n(["Vere","Von","Van","De","Del","Della","Di","Da","Pietro","Vanden","Du","St.","St","La","Lo","Ter","O","O'","Mac","Fitz"]),p=RegExp(`^((?:${o} )*)(.*)$`,"i"),c=a(`(?:${l}, )*(?:${l})`,"i"),h=a(`${/(?:[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2160-\u216F\u2183\u24B6-\u24CF\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD81B[\uDE40-\uDE5F]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89])/.source}.*`),f=a(`(?:${/(?:[a-z\xAA\xB5\xBA\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02B8\u02C0\u02C1\u02E0-\u02E4\u0345\u0371\u0373\u0377\u037A-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1DBF\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u2071\u207F\u2090-\u209C\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2170-\u217F\u2184\u24D0-\u24E9\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7D\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B-\uA69D\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7F8-\uA7FA\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD81B[\uDE60-\uDE7F]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD83A[\uDD22-\uDD43])/.source}.*|${u}.*|\\S*)`);i.default=i.parse=function(t=""){"string"!=typeof t&&(t+="");let e="",i="",s="";if(/[^.], /.test(t)){let r=t.split(", ");s=r.shift();let n=RegExp(l).exec(r.join(", "));e=r.splice(n&&0!==n.index?0:-1,1)[0],i=r.join(", ")}else{let r=t.split(c,2),n=r.shift().split(f,2);e=n[0],s=n[1],i=r.pop()}let n=r(e.match(p),3),a=n[1],o=n[2],u=i,m=r(s.split(h,2).reverse(),2),d=m[0],g=m[1];if(!o&&d)return d.includes(" ")?{literal:d}:{family:d};if(!d)return{literal:t};{let t={"dropping-particle":a,given:o,suffix:u,"non-dropping-particle":g,family:d};return Object.keys(t).forEach(e=>{t[e]||delete t[e]}),t}},i.scope="@name",i.types="@name"},74344,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;let r=["dropping-particle","given"],s=["suffix"],n=["non-dropping-particle","family"];i.default=function(t,e=!1){let i=e=>e.map(e=>t[e]||"").filter(Boolean).join(" ");if(t.literal)return t.literal;if(!e)return`${i([...r,...s,...n])}`;{let t=i(s)?`, ${i(s)}`:"",e=i(r)?`, ${i(r)}`:"";return i(n)+t+e}}},65136,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"parse",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(i,"format",{enumerable:!0,get:function(){return s.default}});var r=n(t.r(25726)),s=n(t.r(74344));function n(t){return t&&t.__esModule?t:{default:t}}},34582,(t,e,i)=>{"use strict";i.byteLength=function(t){var e=u(t),i=e[0],r=e[1];return(i+r)*3/4-r},i.toByteArray=function(t){var e,i,r=u(t),a=r[0],o=r[1],l=new n((a+o)*3/4-o),p=0,c=o>0?a-4:a;for(i=0;i<c;i+=4)e=s[t.charCodeAt(i)]<<18|s[t.charCodeAt(i+1)]<<12|s[t.charCodeAt(i+2)]<<6|s[t.charCodeAt(i+3)],l[p++]=e>>16&255,l[p++]=e>>8&255,l[p++]=255&e;return 2===o&&(e=s[t.charCodeAt(i)]<<2|s[t.charCodeAt(i+1)]>>4,l[p++]=255&e),1===o&&(e=s[t.charCodeAt(i)]<<10|s[t.charCodeAt(i+1)]<<4|s[t.charCodeAt(i+2)]>>2,l[p++]=e>>8&255,l[p++]=255&e),l},i.fromByteArray=function(t){for(var e,i=t.length,s=i%3,n=[],a=0,o=i-s;a<o;a+=16383)n.push(function(t,e,i){for(var s,n=[],a=e;a<i;a+=3)s=(t[a]<<16&0xff0000)+(t[a+1]<<8&65280)+(255&t[a+2]),n.push(r[s>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return n.join("")}(t,a,a+16383>o?o:a+16383));return 1===s?n.push(r[(e=t[i-1])>>2]+r[e<<4&63]+"=="):2===s&&n.push(r[(e=(t[i-2]<<8)+t[i-1])>>10]+r[e>>4&63]+r[e<<2&63]+"="),n.join("")};for(var r=[],s=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=a.length;o<l;++o)r[o]=a[o],s[a.charCodeAt(o)]=o;function u(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");-1===i&&(i=e);var r=i===e?0:4-i%4;return[i,r]}s[45]=62,s[95]=63},38492,(t,e,i)=>{i.read=function(t,e,i,r,s){var n,a,o=8*s-r-1,l=(1<<o)-1,u=l>>1,p=-7,c=i?s-1:0,h=i?-1:1,f=t[e+c];for(c+=h,n=f&(1<<-p)-1,f>>=-p,p+=o;p>0;n=256*n+t[e+c],c+=h,p-=8);for(a=n&(1<<-p)-1,n>>=-p,p+=r;p>0;a=256*a+t[e+c],c+=h,p-=8);if(0===n)n=1-u;else{if(n===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),n-=u}return(f?-1:1)*a*Math.pow(2,n-r)},i.write=function(t,e,i,r,s,n){var a,o,l,u=8*n-s-1,p=(1<<u)-1,c=p>>1,h=5960464477539062e-23*(23===s),f=r?0:n-1,m=r?1:-1,d=+(e<0||0===e&&1/e<0);for(isNaN(e=Math.abs(e))||e===1/0?(o=+!!isNaN(e),a=p):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+c>=1?e+=h/l:e+=h*Math.pow(2,1-c),e*l>=2&&(a++,l/=2),a+c>=p?(o=0,a=p):a+c>=1?(o=(e*l-1)*Math.pow(2,s),a+=c):(o=e*Math.pow(2,c-1)*Math.pow(2,s),a=0));s>=8;t[i+f]=255&o,f+=m,o/=256,s-=8);for(a=a<<s|o,u+=s;u>0;t[i+f]=255&a,f+=m,a/=256,u-=8);t[i+f-m]|=128*d}},43943,(t,e,i)=>{"use strict";var r=t.r(34582),s=t.r(38492),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(t){if(t>0x7fffffff)throw RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,o.prototype),e}function o(t,e,i){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return p(t)}return l(t,e,i)}function l(t,e,i){if("string"==typeof t){var r=t,s=e;if(("string"!=typeof s||""===s)&&(s="utf8"),!o.isEncoding(s))throw TypeError("Unknown encoding: "+s);var n=0|m(r,s),l=a(n),u=l.write(r,s);return u!==n&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(t)){var p=t;if(I(p,Uint8Array)){var d=new Uint8Array(p);return h(d.buffer,d.byteOffset,d.byteLength)}return c(p)}if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(I(t,ArrayBuffer)||t&&I(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(I(t,SharedArrayBuffer)||t&&I(t.buffer,SharedArrayBuffer)))return h(t,e,i);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');var g=t.valueOf&&t.valueOf();if(null!=g&&g!==t)return o.from(g,e,i);var b=function(t){if(o.isBuffer(t)){var e=0|f(t.length),i=a(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||function(t){return t!=t}(t.length)?a(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}(t);if(b)return b;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function p(t){return u(t),a(t<0?0:0|f(t))}function c(t){for(var e=t.length<0?0:0|f(t.length),i=a(e),r=0;r<e;r+=1)i[r]=255&t[r];return i}function h(t,e,i){var r;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),o.prototype),r}function f(t){if(t>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function m(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||I(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;for(var s=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return O(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return A(t).length;default:if(s)return r?-1:O(t).length;e=(""+e).toLowerCase(),s=!0}}function d(t,e,i){var s,n,a,o=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,i){var r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);for(var s="",n=e;n<i;++n)s+=j[t[n]];return s}(this,e,i);case"utf8":case"utf-8":return v(this,e,i);case"ascii":return function(t,e,i){var r="";i=Math.min(t.length,i);for(var s=e;s<i;++s)r+=String.fromCharCode(127&t[s]);return r}(this,e,i);case"latin1":case"binary":return function(t,e,i){var r="";i=Math.min(t.length,i);for(var s=e;s<i;++s)r+=String.fromCharCode(t[s]);return r}(this,e,i);case"base64":return s=this,n=e,a=i,0===n&&a===s.length?r.fromByteArray(s):r.fromByteArray(s.slice(n,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,i){for(var r=t.slice(e,i),s="",n=0;n<r.length-1;n+=2)s+=String.fromCharCode(r[n]+256*r[n+1]);return s}(this,e,i);default:if(o)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function g(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function b(t,e,i,r,s){var n;if(0===t.length)return -1;if("string"==typeof i?(r=i,i=0):i>0x7fffffff?i=0x7fffffff:i<-0x80000000&&(i=-0x80000000),(n=i*=1)!=n&&(i=s?0:t.length-1),i<0&&(i=t.length+i),i>=t.length)if(s)return -1;else i=t.length-1;else if(i<0)if(!s)return -1;else i=0;if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:y(t,e,i,r,s);if("number"==typeof e){if(e&=255,"function"==typeof Uint8Array.prototype.indexOf)if(s)return Uint8Array.prototype.indexOf.call(t,e,i);else return Uint8Array.prototype.lastIndexOf.call(t,e,i);return y(t,[e],i,r,s)}throw TypeError("val must be string, number or Buffer")}function y(t,e,i,r,s){var n,a=1,o=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return -1;a=2,o/=2,l/=2,i/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(s){var p=-1;for(n=i;n<o;n++)if(u(t,n)===u(e,-1===p?0:n-p)){if(-1===p&&(p=n),n-p+1===l)return p*a}else -1!==p&&(n-=n-p),p=-1}else for(i+l>o&&(i=o-l),n=i;n>=0;n--){for(var c=!0,h=0;h<l;h++)if(u(t,n+h)!==u(e,h)){c=!1;break}if(c)return n}return -1}function v(t,e,i){i=Math.min(t.length,i);for(var r=[],s=e;s<i;){var n,a,o,l,u=t[s],p=null,c=u>239?4:u>223?3:u>191?2:1;if(s+c<=i)switch(c){case 1:u<128&&(p=u);break;case 2:(192&(n=t[s+1]))==128&&(l=(31&u)<<6|63&n)>127&&(p=l);break;case 3:n=t[s+1],a=t[s+2],(192&n)==128&&(192&a)==128&&(l=(15&u)<<12|(63&n)<<6|63&a)>2047&&(l<55296||l>57343)&&(p=l);break;case 4:n=t[s+1],a=t[s+2],o=t[s+3],(192&n)==128&&(192&a)==128&&(192&o)==128&&(l=(15&u)<<18|(63&n)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(p=l)}null===p?(p=65533,c=1):p>65535&&(p-=65536,r.push(p>>>10&1023|55296),p=56320|1023&p),r.push(p),s+=c}var h=r,f=h.length;if(f<=4096)return String.fromCharCode.apply(String,h);for(var m="",d=0;d<f;)m+=String.fromCharCode.apply(String,h.slice(d,d+=4096));return m}function _(t,e,i){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>i)throw RangeError("Trying to access beyond buffer length")}function k(t,e,i,r,s,n){if(!o.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<n)throw RangeError('"value" argument is out of bounds');if(i+r>t.length)throw RangeError("Index out of range")}function w(t,e,i,r,s,n){if(i+r>t.length||i<0)throw RangeError("Index out of range")}function x(t,e,i,r,n){return e*=1,i>>>=0,n||w(t,e,i,4,34028234663852886e22,-34028234663852886e22),s.write(t,e,i,r,23,4),i+4}function E(t,e,i,r,n){return e*=1,i>>>=0,n||w(t,e,i,8,17976931348623157e292,-17976931348623157e292),s.write(t,e,i,r,52,8),i+8}i.Buffer=o,i.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},i.INSPECT_MAX_BYTES=50,i.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,i){return l(t,e,i)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(t,e,i){return(u(t),t<=0)?a(t):void 0!==e?"string"==typeof i?a(t).fill(e,i):a(t).fill(e):a(t)},o.allocUnsafe=function(t){return p(t)},o.allocUnsafeSlow=function(t){return p(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==o.prototype},o.compare=function(t,e){if(I(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),I(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var i=t.length,r=e.length,s=0,n=Math.min(i,r);s<n;++s)if(t[s]!==e[s]){i=t[s],r=e[s];break}return i<r?-1:+(r<i)},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);if(void 0===e)for(i=0,e=0;i<t.length;++i)e+=t[i].length;var i,r=o.allocUnsafe(e),s=0;for(i=0;i<t.length;++i){var n=t[i];if(I(n,Uint8Array))s+n.length>r.length?o.from(n).copy(r,s):Uint8Array.prototype.set.call(r,n,s);else if(o.isBuffer(n))n.copy(r,s);else throw TypeError('"list" argument must be an Array of Buffers');s+=n.length}return r},o.byteLength=m,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0==arguments.length?v(this,0,t):d.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(t,e,i,r,s){if(I(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===s&&(s=this.length),e<0||i>t.length||r<0||s>this.length)throw RangeError("out of range index");if(r>=s&&e>=i)return 0;if(r>=s)return -1;if(e>=i)return 1;if(e>>>=0,i>>>=0,r>>>=0,s>>>=0,this===t)return 0;for(var n=s-r,a=i-e,l=Math.min(n,a),u=this.slice(r,s),p=t.slice(e,i),c=0;c<l;++c)if(u[c]!==p[c]){n=u[c],a=p[c];break}return n<a?-1:+(a<n)},o.prototype.includes=function(t,e,i){return -1!==this.indexOf(t,e,i)},o.prototype.indexOf=function(t,e,i){return b(this,t,e,i,!0)},o.prototype.lastIndexOf=function(t,e,i){return b(this,t,e,i,!1)},o.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s,n,a,o,l,u,p,c,h=this.length-e;if((void 0===i||i>h)&&(i=h),t.length>0&&(i<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var f=!1;;)switch(r){case"hex":return function(t,e,i,r){i=Number(i)||0;var s=t.length-i;r?(r=Number(r))>s&&(r=s):r=s;var n=e.length;r>n/2&&(r=n/2);for(var a=0;a<r;++a){var o,l=parseInt(e.substr(2*a,2),16);if((o=l)!=o)break;t[i+a]=l}return a}(this,t,e,i);case"utf8":case"utf-8":return s=e,n=i,S(O(t,this.length-s),this,s,n);case"ascii":case"latin1":case"binary":return a=e,o=i,S(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(t),this,a,o);case"base64":return l=e,u=i,S(A(t),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p=e,c=i,S(function(t,e){for(var i,r,s=[],n=0;n<t.length&&!((e-=2)<0);++n)r=(i=t.charCodeAt(n))>>8,s.push(i%256),s.push(r);return s}(t,this.length-p),this,p,c);default:if(f)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||_(t,e,this.length);for(var r=this[t],s=1,n=0;++n<e&&(s*=256);)r+=this[t+n]*s;return r},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||_(t,e,this.length);for(var r=this[t+--e],s=1;e>0&&(s*=256);)r+=this[t+--e]*s;return r},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||_(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||_(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||_(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||_(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+0x1000000*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||_(t,4,this.length),0x1000000*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||_(t,e,this.length);for(var r=this[t],s=1,n=0;++n<e&&(s*=256);)r+=this[t+n]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||_(t,e,this.length);for(var r=e,s=1,n=this[t+--r];r>0&&(s*=256);)n+=this[t+--r]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*e)),n},o.prototype.readInt8=function(t,e){return(t>>>=0,e||_(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||_(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?0xffff0000|i:i},o.prototype.readInt16BE=function(t,e){t>>>=0,e||_(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?0xffff0000|i:i},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||_(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||_(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||_(t,4,this.length),s.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||_(t,4,this.length),s.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||_(t,8,this.length),s.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||_(t,8,this.length),s.read(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,i,r){if(t*=1,e>>>=0,i>>>=0,!r){var s=Math.pow(2,8*i)-1;k(this,t,e,i,s,0)}var n=1,a=0;for(this[e]=255&t;++a<i&&(n*=256);)this[e+a]=t/n&255;return e+i},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,i,r){if(t*=1,e>>>=0,i>>>=0,!r){var s=Math.pow(2,8*i)-1;k(this,t,e,i,s,0)}var n=i-1,a=1;for(this[e+n]=255&t;--n>=0&&(a*=256);)this[e+n]=t/a&255;return e+i},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,i){return t*=1,e>>>=0,i||k(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,i){return t*=1,e>>>=0,i||k(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,i){return t*=1,e>>>=0,i||k(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,i){return t*=1,e>>>=0,i||k(this,t,e,4,0xffffffff,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,i){return t*=1,e>>>=0,i||k(this,t,e,4,0xffffffff,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,i,r){if(t*=1,e>>>=0,!r){var s=Math.pow(2,8*i-1);k(this,t,e,i,s-1,-s)}var n=0,a=1,o=0;for(this[e]=255&t;++n<i&&(a*=256);)t<0&&0===o&&0!==this[e+n-1]&&(o=1),this[e+n]=(t/a|0)-o&255;return e+i},o.prototype.writeIntBE=function(t,e,i,r){if(t*=1,e>>>=0,!r){var s=Math.pow(2,8*i-1);k(this,t,e,i,s-1,-s)}var n=i-1,a=1,o=0;for(this[e+n]=255&t;--n>=0&&(a*=256);)t<0&&0===o&&0!==this[e+n+1]&&(o=1),this[e+n]=(t/a|0)-o&255;return e+i},o.prototype.writeInt8=function(t,e,i){return t*=1,e>>>=0,i||k(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,i){return t*=1,e>>>=0,i||k(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,i){return t*=1,e>>>=0,i||k(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,i){return t*=1,e>>>=0,i||k(this,t,e,4,0x7fffffff,-0x80000000),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,i){return t*=1,e>>>=0,i||k(this,t,e,4,0x7fffffff,-0x80000000),t<0&&(t=0xffffffff+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,i){return x(this,t,e,!0,i)},o.prototype.writeFloatBE=function(t,e,i){return x(this,t,e,!1,i)},o.prototype.writeDoubleLE=function(t,e,i){return E(this,t,e,!0,i)},o.prototype.writeDoubleBE=function(t,e,i){return E(this,t,e,!1,i)},o.prototype.copy=function(t,e,i,r){if(!o.isBuffer(t))throw TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);var s=r-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),s},o.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===t.length){var s,n=t.charCodeAt(0);("utf8"===r&&n<128||"latin1"===r)&&(t=n)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw RangeError("Out of range index");if(i<=e)return this;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(s=e;s<i;++s)this[s]=t;else{var a=o.isBuffer(t)?t:o.from(t,r),l=a.length;if(0===l)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<i-e;++s)this[s+e]=a[s%l]}return this};var T=/[^+/0-9A-Za-z-_]/g;function O(t,e){e=e||1/0;for(var i,r=t.length,s=null,n=[],a=0;a<r;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!s){if(i>56319||a+1===r){(e-=3)>-1&&n.push(239,191,189);continue}s=i;continue}if(i<56320){(e-=3)>-1&&n.push(239,191,189),s=i;continue}i=(s-55296<<10|i-56320)+65536}else s&&(e-=3)>-1&&n.push(239,191,189);if(s=null,i<128){if((e-=1)<0)break;n.push(i)}else if(i<2048){if((e-=2)<0)break;n.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;n.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((e-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return n}function A(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(T,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function S(t,e,i,r){for(var s=0;s<r&&!(s+i>=e.length)&&!(s>=t.length);++s)e[s+i]=t[s];return s}function I(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}var j=function(){for(var t="0123456789abcdef",e=Array(256),i=0;i<16;++i)for(var r=16*i,s=0;s<16;++s)e[r+s]=t[i]+t[s];return e}()},63969,(t,e,i)=>{let{Buffer:r}=t.f({buffer:{id:()=>43943,module:()=>t.r(43943)},"buffer/":{id:()=>43943,module:()=>t.r(43943)}})("buffer/");function s(...t){let e=new s.Request(...t),i=new XMLHttpRequest;i.withCredentials="include"===e.credentials,i.timeout=e[n].timeout,i.open(e.method,e.url,!1);let a=!1;try{i.responseType="arraybuffer"}catch(t){i.overrideMimeType("text/plain; charset=x-user-defined"),a=!0}for(let t of e.headers)i.setRequestHeader(...t);i.send(e.body||null);let o=i.getAllResponseHeaders();o=o&&o.split("\r\n").filter(Boolean).map(t=>t.split(": ",2));let l=i.response;if(a){let t=r.alloc(l.length);for(let e=0;e<l.length;e++)t[e]=255&l.charCodeAt(e);l=t}let u=new s.Response(l,{headers:o,status:i.status,statusText:i.statusText});return u[n].url=i.responseURL,u[n].redirected=i.responseURL!==e.url,u}let n=Symbol("SyncFetch Internals"),a=["mode","cache","redirect","referrer","integrity"],o={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};class l{constructor(t,e={}){for(const t of a)if(t in e)throw TypeError(`option ${t} not supported`);if("same-origin"===e.credentials)throw TypeError("option credentials with value 'same-origin' not supported");if(this[n]={method:e.method||"GET",headers:new s.Headers(e.headers),body:e.body?r.from(e.body):null,credentials:e.credentials||"omit",timeout:e.timeout||0},"string"==typeof t)this[n].url=t;else if(t instanceof l)this[n].url=t.url,e.method||(this[n].method=t.method),e.headers||(this[n].headers=t.headers),e.body||(this[n].body=t[n].body),e.credentials||(this[n].credentials=t.credentials);else throw TypeError("Request input should be a URL string or a Request object")}get cache(){return"default"}get credentials(){return this[n].credentials}get destination(){return""}get headers(){return this[n].headers}get integrity(){return""}get method(){return this[n].method}get mode(){return"cors"}get priority(){return"auto"}get redirect(){return"follow"}get referrer(){return"about:client"}get referrerPolicy(){return""}get url(){return this[n].url}clone(){return c(this),new l(this.url,this[n])}}class u{constructor(t,e={}){this[n]={body:t?r.from(t):null,bodyUsed:!1,headers:new s.Headers(e.headers),status:e.status,statusText:e.statusText}}get headers(){return this[n].headers}get ok(){let t=this[n].status;return t>=200&&t<300}get redirected(){return this[n].redirected}get status(){return this[n].status}get statusText(){return this[n].statusText}get url(){return this[n].url}clone(){return this.redirect(this[n].url,this[n].status)}redirect(t,e){c(this);let i=new u(this[n].body,{headers:this[n].headers,status:e||this[n].status,statusText:o[e]||this[n].statusText});return i[n].url=t||this[n].url,i[n].redirected=this[n].redirected,i}}class p{constructor(t){this[n]={body:r.from(t),bodyUsed:!1}}get bodyUsed(){return this[n].bodyUsed}static mixin(t){for(let e of Object.getOwnPropertyNames(p.prototype)){if("constructor"===e)continue;let i=Object.getOwnPropertyDescriptor(p.prototype,e);Object.defineProperty(t,e,{...i,enumerable:!0})}}arrayBuffer(){let t=h(this);return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}blob(){let t=this.headers&&this.headers.get("content-type");return new Blob([h(this)],t&&{type:t})}text(){return h(this).toString()}json(){try{return JSON.parse(h(this).toString())}catch(t){throw TypeError(`invalid json response body at ${this.url} reason: ${t.message}`,"invalid-json")}}buffer(){return h(this).clone()}}function c(t){if(t.bodyUsed)throw TypeError(`body used already for: ${t.url}`)}function h(t){return c(t),t[n].bodyUsed=!0,t[n].body||r.alloc(0)}p.mixin(l.prototype),p.mixin(u.prototype);class f{constructor(t){if(t instanceof s.Headers)this[n]={...t[n]};else if(this[n]={},Array.isArray(t))for(const[e,i]of t)this.append(e,i);else if("object"==typeof t)for(const e in t)this.set(e,t[e])}append(t,e){t=t.toLowerCase(),this[n][t]||(this[n][t]=[]),this[n][t].push(e)}delete(t){delete this[n][t.toLowerCase()]}set(t,e){this[n][t.toLowerCase()]=[e]}entries(){let t=[];for(let e in this[n])for(let i of this[n][e])t.push([e,i]);return t}get(t){return(t=t.toLowerCase())in this[n]?this[n][t].join(", "):null}keys(){return Object.keys(this[n])}has(t){return t.toLowerCase()in this[n]}values(){let t=[];for(let e in this[n])for(let i of this[n][e])t.push(i);return t}*[Symbol.iterator](){for(let t in this[n])for(let e of this[n][t])yield[t,e]}}s.Headers=f,s.Request=l,s.Response=u,e.exports=s},87105,(t,e,i)=>{!function(r){"use strict";function s(t){var e,s=t&&t.Promise||r.Promise,n=t&&t.XMLHttpRequest||r.XMLHttpRequest;return e=Object.create(r,{fetch:{value:void 0,writable:!0}}),function(t){var i=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==i&&i,r={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};if(r.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return s.reject(TypeError("Already read"));t.bodyUsed=!0}function f(t){return new s(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function m(t){var e=new FileReader,i=f(e);return e.readAsArrayBuffer(t),i}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){if(this.bodyUsed=this.bodyUsed,this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(r.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else{var e;r.arrayBuffer&&r.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||o(t))?this._bodyArrayBuffer=d(t):this._bodyText=t=Object.prototype.toString.call(t)}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return s.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return s.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return s.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){if(!this._bodyArrayBuffer)return this.blob().then(m);var t=h(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?s.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):s.resolve(this._bodyArrayBuffer))}),this.text=function(){var t,e,i,r=h(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,i=f(e=new FileReader),e.readAsText(t),i;if(this._bodyArrayBuffer)return s.resolve(function(t){for(var e=new Uint8Array(t),i=Array(e.length),r=0;r<e.length;r++)i[r]=String.fromCharCode(e[r]);return i.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return s.resolve(this._bodyText);throw Error("could not read FormData body as text")},r.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=l(t),e=u(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},c.prototype.delete=function(t){delete this.map[l(t)]},c.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},c.prototype.set=function(t,e){this.map[l(t)]=u(e)},c.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},c.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),p(t)},c.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),p(t)},c.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),p(t)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(t,e){if(!(this instanceof y))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,r,s=(e=e||{}).body;if(t instanceof y){if(t.bodyUsed)throw TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,s||null==t._bodyInit||(s=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new c(e.headers)),this.method=(r=(i=e.method||this.method||"GET").toUpperCase(),b.indexOf(r)>-1?r:i),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),("GET"===this.method||"HEAD"===this.method)&&("no-store"===e.cache||"no-cache"===e.cache)){var n=/([?&])_=[^&]*/;n.test(this.url)?this.url=this.url.replace(n,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function v(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),s=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(s))}}),e}function _(t,e){if(!(this instanceof _))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},g.call(y.prototype),g.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var k=[301,302,303,307,308];_.redirect=function(t,e){if(-1===k.indexOf(e))throw RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})},t.DOMException=i.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(e,a){return new s(function(s,o){var l=new y(e,a);if(l.signal&&l.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var p=new n;function h(){p.abort()}p.onload=function(){var t,e,i={status:p.status,statusText:p.statusText,headers:(t=p.getAllResponseHeaders()||"",e=new c,t.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t}).forEach(function(t){var i=t.split(":"),r=i.shift().trim();if(r){var s=i.join(":").trim();e.append(r,s)}}),e)};i.url="responseURL"in p?p.responseURL:i.headers.get("X-Request-URL");var r="response"in p?p.response:p.responseText;setTimeout(function(){s(new _(r,i))},0)},p.onerror=function(){setTimeout(function(){o(TypeError("Network request failed"))},0)},p.ontimeout=function(){setTimeout(function(){o(TypeError("Network request failed"))},0)},p.onabort=function(){setTimeout(function(){o(new t.DOMException("Aborted","AbortError"))},0)},p.open(l.method,function(t){try{return""===t&&i.location.href?i.location.href:t}catch(e){return t}}(l.url),!0),"include"===l.credentials?p.withCredentials=!0:"omit"===l.credentials&&(p.withCredentials=!1),"responseType"in p&&(r.blob?p.responseType="blob":r.arrayBuffer&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(p.responseType="arraybuffer")),!a||"object"!=typeof a.headers||a.headers instanceof c?l.headers.forEach(function(t,e){p.setRequestHeader(e,t)}):Object.getOwnPropertyNames(a.headers).forEach(function(t){p.setRequestHeader(t,u(a.headers[t]))}),l.signal&&(l.signal.addEventListener("abort",h),p.onreadystatechange=function(){4===p.readyState&&l.signal.removeEventListener("abort",h)}),p.send(void 0===l._bodyInit?null:l._bodyInit)})}w.polyfill=!0,i.fetch||(i.fetch=w,i.Headers=c,i.Request=y,i.Response=_),t.Headers=c,t.Request=y,t.Response=_,t.fetch=w,Object.defineProperty(t,"__esModule",{value:!0})}(i),{fetch:e.fetch,Headers:e.Headers,Request:e.Request,Response:e.Response,DOMException:e.DOMException}}if("function"==typeof define&&define.amd)t.r,void 0!==s&&t.v(s);else e.exports=s}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:t.g)},70391,6914,84363,12781,54540,t=>{"use strict";function e(){return this.log.length}function i(t=1){if(t<=0||t>this.currentVersion())return null;{let[e,i]=this.log[t-1],r=new this.constructor(JSON.parse(e),JSON.parse(i));return r.log=this.log.slice(0,t),r}}function r(t=1){return this.retrieveVersion(this.currentVersion()-t)}function s(){return this.retrieveVersion(this.currentVersion())}function n(){return this.log.push([JSON.stringify(this.data),JSON.stringify(this._options)]),this}t.s(["currentVersion",()=>e,"retrieveLastVersion",()=>s,"retrieveVersion",()=>i,"save",()=>n,"undo",()=>r],80472);var a=t.i(80472);let o=["real","string"],l=["json","html","string","rtf"],u=["csl","bibtex","bibtxt","citation-*","ris","ndjson"],p=["string","function"];function c(t){if("object"!=typeof t)throw TypeError("Options not an object!");let{format:e,type:i,style:r,lang:s,append:n,prepend:a}=t;if(e&&!o.includes(e))throw TypeError(`Option format ("${e}") should be one of: ${o}`);if(i&&!l.includes(i))throw TypeError(`Option type ("${i}") should be one of: ${l}`);if(!r||u.includes(r)||/^citation/.test(r)){if(s&&"string"!=typeof s)throw TypeError(`Option lang should be a string, but is a ${typeof s}`);else if(a&&!p.includes(typeof a))throw TypeError(`Option prepend should be a string or a function, but is a ${typeof a}`);else if(n&&!p.includes(typeof n))throw TypeError(`Option append should be a string or a function, but is a ${typeof n}`)}else throw TypeError(`Option style ("${r}") should be one of: ${u}`);if(/^citation/.test(r)&&"json"===i)throw Error(`Combination type/style of json/citation-* is not valid: ${i}/${r}`);return!0}function h(t){if("object"!=typeof t)throw TypeError("Options should be an object");if(t.output)c(t.output);else if(t.maxChainLength&&"number"!=typeof t.maxChainLength)throw TypeError("Option maxChainLength should be a number");else if(t.forceType&&"string"!=typeof t.forceType)throw TypeError("Option forceType should be a string");else if(null!=t.generateGraph&&"boolean"!=typeof t.generateGraph)throw TypeError("Option generateGraph should be a boolean");else if(null!=t.strict&&"boolean"!=typeof t.strict)throw TypeError("Option strict should be a boolean");else if(null!=t.target&&"string"!=typeof t.target)throw TypeError("Option target should be a boolean");return!0}t.s(["validateOptions",()=>h,"validateOutputOptions",()=>c],76620);let f={format:"real",type:"json",style:"csl",lang:"en-US"};function m(t,e){return c(t),e&&this.save(),Object.assign(this._options,t),this}t.s(["defaultOptions",()=>f,"options",()=>m],85003);var d=t.i(85003);function g(t){switch(t){case void 0:return"Undefined";case null:return"Null";default:return t.constructor.name}}function b(t){switch(typeof t){case"string":return"String";case"object":if(Array.isArray(t))return"Array";if("Object"===g(t))return"SimpleObject";if("Null"!==g(t))return"ComplexObject";default:return"Primitive"}}t.s(["dataTypeOf",()=>b,"typeOf",()=>g],13411);var y=t.i(13411);function v(t,e){if(t._graph){let i=e.findIndex(({type:t})=>"@else/list+object"===t);-1!==i&&e.splice(i+1,0,...t._graph.slice(0,-1))}return t._graph=e,t}function _(t){return delete t._graph,t}t.s(["applyGraph",()=>v,"removeGraph",()=>_],29477);var k=t.i(29477),w=t.i(47167);let x={_output(t,e,i){this._log.push(e,i),this._levels.indexOf(t)<this._levels.indexOf(this.level)||this._console.log(e,...i)},_console:null,_log:[],_levels:["http","debug","unmapped","info","warn","error","silent"],level:"silent"};for(let t of x._levels)x[t]=(e,...i)=>x._output(t,e,i);"function"==typeof console.Console?x._console=new console.Console(w.default.stderr):x._console=console,t.s(["default",0,x],6914);let E={},T={},O={};function A(t,e){switch(e){case"Array":if(0===t.length||t.every(t=>"@csl/object"===S(t)))return"@csl/list+object";return"@else/list+object";case"SimpleObject":case"ComplexObject":return"@csl/object";default:return"@invalid"}}function S(t){let e=b(t);return"Array"===e&&0===t.length?A(t,e):function t(e=[],i){for(let r of e)if(E[r].predicate(i))return t(E[r].extensions,i)||r}(T[e],t)||A(t,e)}function I(t,{dataType:e,predicate:i,extends:r}){let s=[];t in O&&(s=O[t],delete O[t],x.debug("[core]",`Subclasses "${s}" finally registered to parent type "${t}"`));let n={predicate:i,extensions:s};if(E[t]=n,r){let e=E[r];e?e.extensions.push(t):(O[r]||(O[r]=[]),O[r].push(t),x.debug("[core]",`Subclass "${t}" is waiting on parent type "${r}"`))}else(T[e]||(T[e]=[])).push(t)}function j(t){return Object.prototype.hasOwnProperty.call(E,t)}function C(t){delete E[t],[...Object.keys(T).map(t=>T[t]),...Object.keys(E).map(t=>E[t].extensions).filter(t=>t.length>0)].forEach(e=>{let i=e.indexOf(t);i>-1&&e.splice(i,1)})}function N(){return Object.keys(E)}function P(){let t=e=>({name:e,children:E[e].extensions.map(t)});return{name:"Type tree",children:Object.keys(T).map(e=>({name:e,children:T[e].map(t)}))}}let D=/^(?:@(.+?))(?:\/(?:(.+?)\+)?(?:(.+)))?$/;t.s(["addTypeParser",()=>I,"hasTypeParser",()=>j,"listTypeParser",()=>N,"removeTypeParser",()=>C,"treeTypeParser",()=>P,"type",()=>S,"typeMatcher",0,D],18241);class R{constructor(t){!function(t,e,i){var r;(e="symbol"==typeof(r=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?r:r+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"validDataTypes",["String","Array","SimpleObject","ComplexObject","Primitive"]),this.data=t}validateDataType(){let t=this.data.dataType;if(t&&!this.validDataTypes.includes(t))throw RangeError(`dataType was ${t}; expected one of ${this.validDataTypes}`)}validateParseType(){let t=this.data.predicate;if(t&&!(t instanceof RegExp||"function"==typeof t))throw TypeError(`predicate was ${typeof t}; expected RegExp or function`)}validateTokenList(){let t=this.data.tokenList;if(t&&"object"!=typeof t)throw TypeError(`tokenList was ${typeof t}; expected object or RegExp`)}validatePropertyConstraint(){let t=this.data.propertyConstraint;if(t&&"object"!=typeof t)throw TypeError(`propertyConstraint was ${typeof t}; expected array or object`)}validateElementConstraint(){let t=this.data.elementConstraint;if(t&&"string"!=typeof t)throw TypeError(`elementConstraint was ${typeof t}; expected string`)}validateExtends(){let t=this.data.extends;if(t&&"string"!=typeof t)throw TypeError(`extends was ${typeof t}; expected string`)}validate(){if(null===this.data||"object"!=typeof this.data)throw TypeError(`typeParser was ${typeof this.data}; expected object`);this.validateDataType(),this.validateParseType(),this.validateTokenList(),this.validatePropertyConstraint(),this.validateElementConstraint(),this.validateExtends()}parseTokenList(){let t=this.data.tokenList;if(!t)return[];t instanceof RegExp&&(t={token:t});let{token:e,split:i=/\s+/,trim:r=!0,every:s=!0}=t,n=s?"every":"some";return[t=>(r?t.trim():t).split(i)[n](t=>e.test(t))]}parsePropertyConstraint(){return[].concat(this.data.propertyConstraint||[]).map(({props:t,match:e,value:i})=>{switch(t=[].concat(t),e){case"any":case"some":return e=>t.some(t=>t in e&&(!i||i(e[t])));case"none":return e=>!t.some(t=>t in e&&(!i||i(e[t])));default:return e=>t.every(t=>t in e&&(!i||i(e[t])))}})}parseElementConstraint(){let t=this.data.elementConstraint;return t?[e=>e.every(e=>S(e)===t)]:[]}parsePredicate(){return this.data.predicate instanceof RegExp?[this.data.predicate.test.bind(this.data.predicate)]:this.data.predicate?[this.data.predicate]:[]}getCombinedPredicate(){let t=[...this.parsePredicate(),...this.parseTokenList(),...this.parsePropertyConstraint(),...this.parseElementConstraint()];return 0===t.length?()=>!0:1===t.length?t[0]:e=>t.every(t=>t(e))}getDataType(){return this.data.dataType?this.data.dataType:this.data.predicate instanceof RegExp?"String":this.data.tokenList?"String":this.data.elementConstraint?"Array":"Primitive"}get dataType(){return this.getDataType()}get predicate(){return this.getCombinedPredicate()}get extends(){return this.data.extends}}class L{constructor(t,{async:e}={}){this.parser=t,this.async=e}validate(){let t=this.parser;if("function"!=typeof t)throw TypeError(`parser was ${typeof t}; expected function`)}}class B{constructor(t,e={}){this.format=t,e.parseType&&(this.typeParser=new R(e.parseType)),e.parse&&(this.dataParser=new L(e.parse,{async:!1})),e.parseAsync&&(this.asyncDataParser=new L(e.parseAsync,{async:!0}))}validateFormat(){let t=this.format;if(!D.test(t))throw TypeError(`format name was "${t}"; didn't match expected pattern`)}validate(){this.validateFormat(),this.typeParser&&this.typeParser.validate(),this.dataParser&&this.dataParser.validate(),this.asyncDataParser&&this.asyncDataParser.validate()}}t.s(["DataParser",()=>L,"FormatParser",()=>B,"TypeParser",()=>R],20715);var F=t.i(20715),M=t.i(65136);function U(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function q(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?U(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}let $={article:!0,"article-journal":!0,"article-magazine":!0,"article-newspaper":!0,bill:!0,book:!0,broadcast:!0,chapter:!0,classic:!0,collection:!0,dataset:!0,document:!0,entry:!0,"entry-dictionary":!0,"entry-encyclopedia":!0,event:!0,figure:!0,graphic:!0,hearing:!0,interview:!0,legal_case:!0,legislation:!0,manuscript:!0,map:!0,motion_picture:!0,musical_score:!0,pamphlet:!0,"paper-conference":!0,patent:!0,performance:!0,periodical:!0,personal_communication:!0,post:!0,"post-weblog":!0,regulation:!0,report:!0,review:!0,"review-book":!0,software:!0,song:!0,speech:!0,standard:!0,thesis:!0,treaty:!0,webpage:!0,"journal-article":"article-journal","book-chapter":"chapter","posted-content":"manuscript","proceedings-article":"paper-conference",dissertation:"thesis"},z={author:2,chair:2,"collection-editor":2,compiler:2,composer:2,"container-author":2,contributor:2,curator:2,director:2,editor:2,"editorial-director":2,"executive-producer":2,guest:2,host:2,interviewer:2,illustrator:2,narrator:2,organizer:2,"original-author":2,performer:2,producer:2,"reviewed-author":2,recipient:2,"script-writer":2,"series-creator":2,translator:2,accessed:3,"available-date":3,container:3,"event-date":3,issued:3,"original-date":3,submitted:3,type:4,categories:"object",custom:"object",id:["string","number"],language:"string",journalAbbreviation:"string",shortTitle:"string",abstract:"string",annote:"string",archive:"string",archive_collection:"string",archive_location:"string","archive-place":"string",authority:"string","call-number":"string","chapter-number":"string","citation-number":"string","citation-key":"string","citation-label":"string","collection-number":"string","collection-title":"string","container-title":"string","container-title-short":"string",dimensions:"string",division:"string",DOI:"string",edition:["string","number"],event:"string","event-title":"string","event-place":"string","first-reference-note-number":"string",genre:"string",ISBN:"string",ISSN:"string",issue:["string","number"],jurisdiction:"string",keyword:"string",locator:"string",medium:"string",note:"string",number:["string","number"],"number-of-pages":"string","number-of-volumes":["string","number"],"original-publisher":"string","original-publisher-place":"string","original-title":"string",page:"string","page-first":"string","part-number":["string","number"],"part-title":"string",PMCID:"string",PMID:"string",printing:"string",publisher:"string","publisher-place":"string",references:"string","reviewed-title":"string","reviewed-genre":"string",scale:"string",section:"string",source:"string",status:"string",supplement:["string","number"],title:"string","title-short":"string",URL:"string",version:"string",volume:["string","number"],"volume-title":"string","volume-title-short":"string","year-suffix":"string"};function G(t,e){if("object"==typeof t&&null!==t&&(t.literal||t.given||t.family))return(t.ORCID||t.orcid||t._ORCID)&&(t=q({_orcid:t.ORCID||t.orcid||t._ORCID},t),delete t.ORCID,delete t.orcid,delete t._ORCID),t;if(e&&"string"==typeof t)return(0,M.parse)(t)}function X(t,e){return t.every(t=>"number"==typeof t)?t:!e||t.some(t=>isNaN(parseInt(t)))?void 0:t.map(t=>parseInt(t))}function V(t,e=!0){return t.map(function(t){let i={};for(let r in t){let s=function t(e,i,r){let s=[].concat(z[e]);switch(z[e]){case 1:return G(i,r);case 2:if(i instanceof Array){let t=i.map(t=>G(t,r)).filter(Boolean);return t.length?t:void 0}return;case 3:let n="date-parts";if("object"!=typeof i||null===i)return;if(i[n]instanceof Array&&i[n].every(t=>t instanceof Array)){let t=i[n].map(t=>X(t,r)).filter(Boolean);return t.length?q(q({},i),{},{"date-parts":t}):void 0}if(i instanceof Array&&i.every(t=>t[n]instanceof Array)){let t=i.map(t=>X(t[n],r)).filter(Boolean);return t.length?{"date-parts":t}:void 0}if(i[n]instanceof Array){let t=X(i[n],r);return t&&{"date-parts":[t]}}if("literal"in i||"raw"in i)return i;return;case 4:return function e(i,r){if(!0===$[i=t("language",i,r)])return i;if(r){if(i in $)return $[i];else if("string"==typeof i&&i.toLowerCase()!==i)return e(i.toLowerCase(),r)}}(i,r)}if(r){if("string"==typeof i&&s.includes("number")&&!s.includes("string")&&!isNaN(+i))return parseFloat(i);else if("number"==typeof i&&s.includes("string")&&!s.includes("number"))return i.toString();else if(Array.isArray(i)&&i.length)return t(e,i[0],r)}if(s.includes(typeof i))return i}(r,t[r],e);void 0!==s&&(i[r]=s)}return i})}t.s(["clean",()=>V],78311);var W=t.i(78311);let J={},H={},K={"@csl/object":t=>[t],"@csl/list+object":t=>t,"@else/list+object":t=>t.map(t=>{let e=S(t);return Q(t,e)}).flat(),"@invalid":()=>{throw Error("This format is not supported or recognized")}},Y={"@else/list+object":t=>Promise.all(t.map(t=>{let e=S(t);return Z(t,e)})).then(t=>t.flat())};function Q(t,e){if("function"==typeof J[e])return J[e](t);if("function"==typeof K[e])return K[e](t);throw TypeError(`No synchronous parser found for ${e}`)}async function Z(t,e){if("function"==typeof H[e])return H[e](t);if("function"==typeof Y[e])return Y[e](t);if(te(e,!1))return Q(t,e);throw TypeError(`No parser found for ${e}`)}function tt(t,{parser:e,async:i}){i?H[t]=e:J[t]=e}function te(t,e){return e?H[t]||Y[t]:J[t]||K[t]}function ti(t,e){delete(e?H:J)[t]}function tr(t){return Object.keys(t?H:J)}t.s(["addDataParser",()=>tt,"data",()=>Q,"dataAsync",()=>Z,"hasDataParser",()=>te,"listDataParser",()=>tr,"removeDataParser",()=>ti],48853);let ts={};function tn(t,e){let i=new B(t,e);i.validate();let r=ts[t]||(ts[t]={});i.typeParser&&(I(t,i.typeParser),r.type=!0),i.dataParser&&(tt(t,i.dataParser),r.data=!0),i.asyncDataParser&&(tt(t,i.asyncDataParser),r.asyncData=!0),e.outputs&&(r.outputs=e.outputs)}function ta(t){return ts[t]}function to(t){let e=ts[t];e&&(e.type&&C(t),e.data&&ti(t),e.asyncData&&ti(t,!0),delete ts[t])}function tl(t){return t in ts}function tu(){return Object.keys(ts)}function tp(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function tc(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tp(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tp(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function th(t){return Array.isArray(t)?t.map(th):("event"in(t=tc({},t))&&(t["event-title"]=t.event,delete t.event),"book"===t.type&&"version"in t&&(t.type="software"),t)}function tf(t){return Array.isArray(t)?t.map(tf):("event-title"in(t=tc({},t))&&(t.event=t["event-title"],delete t["event-title"]),"software"===t.type&&(t.type="book"),t)}function tm(t,e=new Set){let i;if("object"!=typeof t||null===t||t.constructor!==Object&&t.constructor!==Array)return t;if(e.has(t))throw TypeError("Recursively copying circular structure");if(e.add(t),t.constructor===Array)i=t.map(t=>tm(t,e));else{let r={};for(let i in t)r[i]=tm(t[i],e);i=r}return e.delete(t),i}t.s(["add",()=>tn,"get",()=>ta,"has",()=>tl,"list",()=>tu,"remove",()=>to],10268);var td=t.i(63969),tg=t.i(87105),tb=t.i(11029);let ty="undefined"!=typeof location&&"undefined"!=typeof navigator,{fetch:tv,Headers:t_}="function"==typeof fetch&&ty?{fetch,Headers}:(0,tg.default)(),tk=`Citation.js/${tb.default.version}`;function tw(t){let e={};for(let[i,r]of t instanceof t_||t instanceof td.default.Headers?Array.from(t):Object.entries(t))e[i.toLowerCase()]=r.toString();return e}function tx(t={}){let e={headers:{accept:"*/*"},method:"GET",checkContentType:t.checkContentType};if(tk&&!ty&&(e.headers["user-agent"]=tk),t.body){e.method="POST";let i="string"!=typeof t.body;e.body=i?JSON.stringify(t.body):t.body,e.headers["content-type"]=i?"application/json":"text/plain"}return t.headers&&Object.assign(e.headers,tw(t.headers)),e}function tE(t,e){let i,{status:r,headers:s}=t;if(r>=400?i=Error(`Server responded with status code ${r}`):!0===e.checkContentType&&!function(t,e){if(!t.accept||"*/*"===t.accept||!e["content-type"])return!0;let[i,r]=e["content-type"].split(";")[0].trim().split("/");return t.accept.split(",").map(t=>t.split(";")[0].trim().split("/")).some(([t,e])=>(t===i||"*"===t)&&(e===r||"*"===e))}(e.headers,tw(s))&&(i=Error(`Server responded with content-type ${s.get("content-type")}`)),i)throw i.status=r,i.headers=s,i.body=t.body,i;return t}function tT(t,e){let i=tx(e);return x.http("[core]",i.method,t,i),tE((0,td.default)(t,i),i).text()}async function tO(t,e){let i=tx(e);return x.http("[core]",i.method,t,i),tv(t,i).then(t=>tE(t,i)).then(t=>t.text())}function tA(t){tk=t}void 0!==w.default&&w.default&&w.default.release&&"node"===w.default.release.name&&w.default.version&&(tk+=` Node.js/${w.default.version}`);let tS=function(t,e){let i;for(;void 0===i||t.includes(i);)i=`${e}${Math.random().toString().slice(2)}`;return i};class tI{constructor(t){this.stack=t,this.index=0,this.current=this.stack[this.index]}static getPatternText(t){return`"${t instanceof RegExp?t.source:t}"`}static getMatchCallback(t){if(Array.isArray(t)){let e=t.map(tI.getMatchCallback);return t=>e.some(e=>e(t))}return t instanceof Function?t:t instanceof RegExp?e=>t.test(e):e=>t===e}tokensLeft(){return this.stack.length-this.index}matches(t){return tI.getMatchCallback(t)(this.current,this.index,this.stack)}matchesSequence(t){let e=this.stack.slice(this.index,this.index+t.length).join("");return"string"==typeof t?e===t:t.every((t,i)=>tI.getMatchCallback(t)(e[i]))}consumeToken(t=/^[\s\S]$/,{inverse:e=!1,spaced:i=!0}={}){i&&this.consumeWhitespace();let r=this.current;if(tI.getMatchCallback(t)(r,this.index,this.stack))this.current=this.stack[++this.index];else throw SyntaxError(`Unexpected token at index ${this.index}: Expected ${tI.getPatternText(t)}, got "${r}"`);return i&&this.consumeWhitespace(),r}consumeWhitespace(t=/^\s$/,{optional:e=!0}={}){return this.consume(t,{min:+!e})}consumeN(t){if(this.tokensLeft()<t)throw SyntaxError("Not enough tokens left");let e=this.index;for(;t--;)this.current=this.stack[++this.index];return this.stack.slice(e,this.index).join("")}consumeSequence(t){if(this.matchesSequence(t))return this.consumeN(t.length);throw SyntaxError(`Expected "${t}", got "${this.consumeN(t.length)}"`)}consume(t=/^[\s\S]$/,{min:e=0,max:i=1/0,inverse:r=!1,tokenMap:s,tokenFilter:n}={}){let a=this.index,o=tI.getMatchCallback(t);for(;o(this.current,this.index,this.stack)!==r;)this.current=this.stack[++this.index];let l=this.stack.slice(a,this.index);if(l.length<e)throw SyntaxError(`Not enough ${tI.getPatternText(t)}`);if(l.length>i)throw SyntaxError(`Too many ${tI.getPatternText(t)}`);return s&&(l=l.map(s)),n&&(l=l.filter(n)),l.join("")}}let tj=class{constructor(t={}){this.data=t}set(t,e){return this.data[t]=e,this}add(...t){return this.set(...t)}delete(t){return delete this.data[t],this}remove(...t){return this.delete(...t)}get(t){return this.data[t]}has(t){return Object.prototype.hasOwnProperty.call(this.data,t)}list(){return Object.keys(this.data)}};class tC{constructor(t,e){this.rules=t,this.defaultState=e,this.mainRule=Object.keys(t)[0],this.log=[]}parse(t,e){return this.lexer=t,this.token=this.lexer.next(),this.state=tm(this.defaultState),this.log=[],this.consumeRule(e||this.mainRule)}matchEndOfFile(){return!this.token}matchToken(t){return this.token&&t===this.token.type}consumeToken(t,e){let i=this.token;if(!t||i&&i.type===t)return this.token=this.lexer.next(),i;{if(e)return;let r=i?`"${i.type}"`:"EOF",s=SyntaxError(this.lexer.formatError(i,`expected "${t}", got ${r}`));throw s.message+=` (${this.log.join("->")})`,s}}consumeRule(t){this.log.push(t);let e=this.rules[t].call(this);return this.log.pop(),e}}function tN(t,e){return e=e===tP.CONVERT_TO_SOURCE,t=t.map(t=>(function(t,e){let i,r,s,n;if("string"==typeof t)i=r=t;else if(!t)return null;else if(i=e?t.target:t.source,r=e?t.source:t.target,t.convert&&(s=e?t.convert.toSource:t.convert.toTarget),t.when){var a;null!=(n=e?t.when.target:t.when.source)&&(a=n,n=function(t){return"boolean"==typeof a?a:Object.keys(a).every(e=>{let i=a[e];return!0===i?e in t:!1===i?!(e in t):"function"==typeof i?i(t[e]):Array.isArray(i)?i.includes(t[e]):t[e]===i})})}return{inputProp:i=[].concat(i).filter(Boolean),outputProp:r=[].concat(r).filter(Boolean),convert:s,condition:n}})(t,e)).filter(Boolean),function(e){let i={};for(let{inputProp:r,outputProp:s,convert:n,condition:a}of t){if(0===s.length)continue;if(a&&!a(e))continue;if(0!==r.length&&r.every(t=>!(t in e)))continue;let t=r.map(t=>e[t]);if(n)try{let i=n.apply(e,t);t=1===s.length?[i]:i}catch(t){throw Error(`Failed to convert ${r} to ${s}`,{cause:t})}s.forEach((e,r)=>{let s=t[r];void 0!==s&&(i[e]=s)})}return i}}class tP{constructor(t){this.convertToSource=tN(t,tP.CONVERT_TO_SOURCE),this.convertToTarget=tN(t,tP.CONVERT_TO_TARGET)}}tP.CONVERT_TO_SOURCE=Symbol("convert to source"),tP.CONVERT_TO_TARGET=Symbol("convert to target"),t.s([],63628);class tD{constructor(t,e={}){this.options=Object.assign({generateGraph:!0,forceType:S(t),maxChainLength:10,strict:!0,target:"@csl/list+object"},e),this.type=this.options.forceType,this.data="object"==typeof t?tm(t):t,this.graph=[{type:this.type,data:t}],this.iteration=0}iterate(){if(0!==this.iteration){let t=ts[this.type];t&&t.outputs?this.type=t.outputs:this.type=S(this.data),this.graph.push({type:this.type})}return!this.error&&this.type!==this.options.target&&(this.iteration>=this.options.maxChainLength?(this.error=RangeError(`Max. number of parsing iterations reached (${this.graph.reduce((t,e)=>{let i=t[t.length-1];return i&&i.type===e.type?i.count=i.count+1||2:t.push(e),t},[]).map(t=>(t.count>1?t.count+"x ":"")+t.type).join(" -> ")})`),!1):(this.iteration++,!0))}end(){if(this.error){if(x.error("[core]",this.error.message),!1===this.options.strict)return[];throw this.error}return"@csl/list+object"===this.options.target?th(this.data).map(this.options.generateGraph?t=>v(t,this.graph):_):this.data}}let tR=(...t)=>{let e=new tD(...t);for(;e.iterate();)try{e.data=Q(e.data,e.type)}catch(t){e.error=t}return e.end()},tL=t=>{let e=S(t);return Q(e.match(/array|object/)?tm(t):t,e)},tB=async(...t)=>{let e=new tD(...t);for(;e.iterate();)e.data=await Z(e.data,e.type).catch(t=>{e.error=t});return e.end()},tF=async t=>{let e=S(t);return Z(e.match(/array|object/)?tm(t):t,e)};t.s(["chain",0,tR,"chainAsync",0,tB,"chainLink",0,tL,"chainLinkAsync",0,tF],48210);let tM=Object.assign({},y,k,F,W);function tU(t,e={},i=!1){return(!0===e||!0===i)&&this.save(),this.data.push(...tR(t,e)),this.data.filter(t=>!Object.prototype.hasOwnProperty.call(t,"id")).forEach(t=>{t.id=tS(this.getIds(),"temp_id_")}),this}async function tq(t,e={},i=!1){return(!0===e||!0===i)&&this.save(),this.data.push(...await tB(t,e)),this.data.filter(t=>!Object.prototype.hasOwnProperty.call(t,"id")).forEach(t=>{t.id=tS(this.getIds(),"temp_id_")}),this}function t$(t,e={},i=!1){return(!0===e||!0===i)&&this.save(),this.data=[],"boolean"!=typeof e?this.add(t,e):this.add(t)}async function tz(t,e={},i=!1){return(!0===e||!0===i)&&this.save(),this.data=[],"boolean"!=typeof e?this.addAsync(t,e):this.addAsync(t)}function tG(t){return t&&this.save(),this.data=[],this._options={},this}t.s(["util",0,tM],72949),t.s(["add",()=>tU,"addAsync",()=>tq,"reset",()=>tG,"set",()=>t$,"setAsync",()=>tz],19757);var tX=t.i(19757);function tV(t){if("citation-label"in t)return t["citation-label"];let e="";return t.author&&(e+=t.author[0].family||t.author[0].literal),t.issued&&t.issued["date-parts"]&&t.issued["date-parts"][0]&&(e+=t.issued["date-parts"][0][0]),t["year-suffix"]?e+=t["year-suffix"]:t.title&&(e+=t.title.replace(/<\/?.*?>/g,"").match(/^(?:(?:the|a|an)\s+)?(\S+)/i)[1]),e}function tW(t,e,i="label"===e){let r=i?tV(t):t[e];switch(e){case"author":case"editor":return r.map(t=>t.literal||t.family||(0,M.format)(t));case"accessed":case"issued":return r["date-parts"][0];case"page":return r.split("-").map(t=>parseInt(t));case"edition":case"issue":case"volume":return isNaN(r=parseInt(r))?-1/0:r;default:return r||-1/0}}function tJ(t=[],e){return e&&this.save(),this.data.sort("function"==typeof t?t:function(...t){return(e,i)=>{let r=t.slice(),s=0;for(;!s&&r.length;)s=function(t,e,i,r=/^!/.test(i)){let s=tW(t,i=i.replace(/^!/,"")),n=tW(e,i);return(r?-1:1)*(s>n?1:s<n?-1:0)}(e,i,r.shift());return s}}(...t,"label")),this}t.s(["sort",()=>tJ],51374);var tH=t.i(51374);let tK=new tj;function tY(t,e){if("string"!=typeof t)throw TypeError(`Invalid output format name, expected string, got ${typeof t}`);if("function"!=typeof e)throw TypeError(`Invalid formatter, expected function, got ${typeof e}`);tK.set(t,e)}function tQ(t){tK.remove(t)}function tZ(t){return tK.has(t)}function t0(){return tK.list()}function t1(t,e,...i){if(!tK.has(t))throw Error(`Output format "${t}" unavailable`);return tK.get(t)(e,...i)}function t2(){return this.data.map(t=>t.id)}function t3(t,...e){return t1(t,V(this.data),...e)}function t4(t={}){let e;c(t);let i=Object.assign({},this.defaultOptions,this._options.output,t),{type:r,style:s}=i,[n,a]=s.split("-"),o="citation"===n?"bibliography":"csl"===n?"data":n,l="string"===r?"text":"json"===r?"object":r;switch(o){case"bibliography":{let{lang:t,append:r,prepend:s}=i;e={template:a,lang:t,format:l,append:r,prepend:s};break}case"data":case"bibtex":case"bibtxt":case"ndjson":case"ris":e={type:l};break;default:throw Error(`Invalid style "${o}"`)}let u=this.format(o,Object.assign(e,t._newOptions)),{format:p}=i;if("real"===p&&"html"===l&&"undefined"!=typeof document&&"function"==typeof document.createElement){let t=document.createElement("div");return t.innerHTML=u,t.firstChild}return"string"===p&&"object"==typeof u?JSON.stringify(u):u}t.s(["add",()=>tY,"format",()=>t1,"has",()=>tZ,"list",()=>t0,"register",0,tK,"remove",()=>tQ],8274),t.s(["format",()=>t3,"get",()=>t4,"getIds",()=>t2],45531);var t6=t.i(45531);t.s([],88978),t.i(88978),t.i(76620),t.s(["async",0,function(t,e,i){"function"!=typeof e||i||(i=e,e=void 0);let r=new this().setAsync(t,e);return"function"==typeof i?void r.then(i):r},"validateOptions",()=>h,"validateOutputOptions",()=>c],91125);var t5=t.i(91125);function t7(t,e={}){return this instanceof t7?(this._options=e,this.log=[],this.data=[],this.set(t,e),this.options(e),this):new t7(t,e)}Object.assign(t7.prototype,a,d,tX,tH,t6),t7.prototype[Symbol.iterator]=function*(){yield*this.data},Object.assign(t7,t5),t.s(["default",0,t7],84363),t.i(72949),t.i(10268),t.i(48210),t.i(18241),t.i(48853),t.s(["add",()=>tn,"addDataParser",()=>tt,"addTypeParser",()=>I,"chain",0,tR,"chainAsync",0,tB,"chainLink",0,tL,"chainLinkAsync",0,tF,"data",()=>Q,"dataAsync",()=>Z,"get",()=>ta,"has",()=>tl,"hasDataParser",()=>te,"hasTypeParser",()=>j,"list",()=>tu,"listDataParser",()=>tr,"listTypeParser",()=>N,"remove",()=>to,"removeDataParser",()=>ti,"removeTypeParser",()=>C,"treeTypeParser",()=>P,"type",()=>S,"typeMatcher",0,D,"util",0,tM],78052);var t9=t.i(78052),t8=t.i(8274);let et=new tj({html:{bibliographyContainer:['<div class="csl-bib-body">',"</div>"],entry:['<div class="csl-entry">',"</div>"],list:['<ul style="list-style-type:none">',"</ul>"],listItem:["<li>","</li>"]},text:{bibliographyContainer:["","\n"],entry:["","\n"],list:["\n",""],listItem:["	","\n"]}});function ee(t,e){if("string"!=typeof t)throw TypeError(`Invalid dict name, expected string, got ${typeof t}`);if("object"!=typeof e)throw TypeError(`Invalid dict, expected object, got ${typeof e}`);for(let t in e){let i=e[t];if(!Array.isArray(i)||i.some(t=>"string"!=typeof t))throw TypeError(`Invalid dict entry "${t}", expected array of strings`)}et.set(t,e)}function ei(t){et.remove(t)}function er(t){return et.has(t)}function es(){return et.list()}function en(t){if(!et.has(t))throw Error(`Dict "${t}" unavailable`);return et.get(t)}t.s(["add",()=>ee,"get",()=>en,"has",()=>er,"htmlDict",0,{wr_start:'<div class="csl-bib-body">',wr_end:"</div>",en_start:'<div class="csl-entry">',en_end:"</div>",ul_start:'<ul style="list-style-type:none">',ul_end:"</ul>",li_start:"<li>",li_end:"</li>"},"list",()=>es,"register",0,et,"remove",()=>ei,"textDict",0,{wr_start:"",wr_end:"\n",en_start:"",en_end:"\n",ul_start:"\n",ul_end:"",li_start:"	",li_end:"\n"}],56952);var ea=t.i(56952);let eo={};function el(t,e){eo[t]=e}function eu(t){return eo[t]}function ep(t){return Object.prototype.hasOwnProperty.call(eo,t)}function ec(t){delete eo[t]}function eh(){return Object.keys(eo)}t.s(["add",()=>el,"get",()=>eu,"has",()=>ep,"list",()=>eh,"remove",()=>ec],18873);var ef=t.i(18873);let em={input:t9,output:t8,dict:ea,config:ef},ed={};function eg(t,e={}){let i=ed[t]={};for(let r in e){if("config"===r){i.config={[t]:e.config},em.config.add(t,e.config);continue}let s=i[r]={},n=e[r];for(let t in n){let e=n[t];s[t]=!0,em[r].add(t,e)}}}function eb(t){let e=ed[t];for(let t in e){let i=e[t];for(let e in i)em[t].remove(e)}delete ed[t]}function ey(t){return t in ed}function ev(){return Object.keys(ed)}function e_(){return[]}t.s(["add",()=>eg,"has",()=>ey,"list",()=>ev,"remove",()=>eb],36963),t.i(36963),t.s(["add",()=>eg,"config",0,ef,"dict",0,ea,"has",()=>ey,"input",0,t9,"list",()=>ev,"output",0,t8,"remove",()=>eb],12781),t.i(12781),t.i(63628),t.s(["Grammar",()=>tC,"Register",0,tj,"TokenStack",0,tI,"Translator",()=>tP,"deepCopy",0,tm,"downgradeCsl",()=>tf,"fetchFile",()=>tT,"fetchFileAsync",()=>tO,"fetchId",0,tS,"setUserAgent",()=>tA,"upgradeCsl",()=>th],54540),t.i(54540),t.s(["parse",()=>e_],95579),t.i(95579);let ek=[[/((?:\[|:|,)\s*)'((?:\\'|[^'])*?[^\\])?'(?=\s*(?:\]|}|,))/g,'$1"$2"'],[/((?:(?:"|]|}|\/[gmiuys]|\.|(?:\d|\.|-)*\d)\s*,|{)\s*)(?:"([^":\n]+?)"|'([^":\n]+?)'|([^":\n]+?))(\s*):/g,'$1"$2$3$4"$5:']];function ew(t){if("string"!=typeof t)return JSON.parse(t);try{return JSON.parse(t)}catch(e){return x.debug("[plugin-common]","Invalid JSON, switching to experimental parser"),ek.forEach(([e,i])=>{t=t.replace(e,i)}),JSON.parse(t)}}function ex(t){return t.val()||t.text()||t.html()}function eE(t){return t.value||t.textContent}t.s(["default",()=>ew,"parse",()=>ew],92060),t.i(92060),t.s(["parse",()=>ex],75178),t.i(75178),t.s(["parse",()=>eE],59730),t.i(59730);function eT(t,e,i){return t+(e<i.length-1?",":"")}function eO(t,e){let i,r=Array.isArray(t);return i=(i=r?t.map(t=>eA(t,e)):Object.keys(t).filter(e=>JSON.stringify(t[e])).map(i=>`"${i}": ${eA(t[i],e)}`)).map(eT).map(t=>e.listItem.join(t)),i=e.list.join(i.join("")),r?`[${i}]`:`{${i}}`}function eA(t,e){return"object"!=typeof t||null===t?JSON.stringify(t):0===t.length?"[]":0===Object.keys(t).length?"{}":eO(t,e)}eg("@else",{input:{"@empty/text":{parse:e_,parseType:{dataType:"String",predicate:t=>""===t}},"@empty/whitespace+text":{parse:e_,parseType:{dataType:"String",predicate:/^\s+$/}},"@empty":{parse:e_,parseType:{dataType:"Primitive",predicate:t=>null==t}},"@else/json":{parse:ew,parseType:{dataType:"String",predicate:/^\s*(\{[\S\s]*\}|\[[\S\s]*\])\s*$/}},"@else/url":{parseType:{dataType:"String",predicate:/^https?:\/\/(([\w-]+\.)*[\w-]+)(:\d+)?(\/[^?/]*)*(\?[^#]*)?(#.*)?$/i}},"@else/jquery":{parse:ex,parseType:{dataType:"ComplexObject",predicate:t=>"undefined"!=typeof jQuery&&t instanceof jQuery}},"@else/html":{parse:eE,parseType:{dataType:"ComplexObject",predicate:t=>"undefined"!=typeof HTMLElement&&t instanceof HTMLElement}}},output:Object.assign({},{data(t,{type:e,format:i=e||"text",version:r="1.0.2"}={}){if(r<"1.0.2"&&(t=tf(t)),"object"===i)return tm(t);{var s,n;let e;return"text"===i?JSON.stringify(t,null,2):(x.warn("[core]","This feature (JSON output with special formatting) is unstable. See https://github.com/larsgw/citation.js/issues/144"),s=t,n=ea.get(i),e=(e=(e=s.map(t=>eO(t,n))).map(eT).map(t=>n.entry.join(t))).join(""),n.bibliographyContainer.join(`[${e}]`))}},ndjson:(t,{version:e="1.0.2"}={})=>(e<"1.0.2"&&(t=tf(t)),t.map(t=>JSON.stringify(t)).join("\n"))},{label:t=>t.reduce((t,e)=>(t[e.id]=tV(e),t),{})})});let eS=tb.default.version;t.s(["version",0,eS],70391)},74254,t=>{"use strict";var e=t.i(70391),i=t.i(84363),r=t.i(12781),s=t.i(54540),n=t.i(6914);t.s(["Cite",()=>i.default,"logger",()=>n.default,"plugins",0,r,"util",0,s,"version",()=>e.version])},21028,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.templates=i.default=void 0;var r,s=t.r(74254),n=(r=t.r(71608))&&r.__esModule?r:{default:r};let a=i.templates=new s.util.Register(n.default);i.default=t=>a.has(t)?a.get(t):a.get("apa")},20369,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.locales=i.default=void 0;var r,s=t.r(74254),n=(r=t.r(19569))&&r.__esModule?r:{default:r};let a=i.locales=new s.util.Register(n.default);i.default=t=>a.has(t)?a.get(t):a.get("en-US")},36485,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.fetchEngine=i.default=void 0;var r,s=(r=t.r(72278))&&r.__esModule?r:{default:r},n=t.r(21028),a=t.r(20369);let o=Symbol.for("proxied"),l=function(t){let e=function(e,i){if(e.sys.wrapBibliographyEntry){let[t,r]=e.sys.wrapBibliographyEntry(this.system_id);i=[t,i,r].join("")}return t.call(this,e,i)};return e[o]=!0,e};for(let t in s.default.Output.Formats){let e=s.default.Output.Formats[t]["@bibliography/entry"];e&&!e[o]&&(s.default.Output.Formats[t]["@bibliography/entry"]=l(e))}function u(t){if(a.locales.has(t))return a.locales.get(t);let e=t.replace("-","_");return a.locales.has(e)?a.locales.get(e):{}}let p={},c=function(t,e,i,r,n){let a,o=`${t}|${e}`;return p[o]instanceof s.default.Engine?((a=p[o]).sys.retrieveItem=r,a.sys.wrapBibliographyEntry=void 0,a.updateItems([])):a=p[o]=new s.default.Engine({retrieveLocale:n,retrieveItem:r},i,e,!0),a};i.fetchEngine=c,i.default=function(t,e,i,r){if(!s.default.Output.Formats[r]||!s.default.Output.Formats[r]["@bibliography/entry"])throw TypeError(`Cannot find format '${r}'`);let o=t.reduce((t,e)=>(t[e.id]=e,t),{}),l=n.templates.get(n.templates.has(e)?e:"apa"),p=c(e,i=a.locales.has(i)?i:void 0,l,function(t){if(Object.prototype.hasOwnProperty.call(o,t))return o[t];throw Error(`Cannot find entry with id '${t}'`)},u);return p.setOutputFormat(r),p.opt.development_extensions.wrap_url_and_doi=!1,p}},47836,(t,e,i)=>{"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i,r,s=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=s){var n=[],a=!0,o=!1;try{for(s=s.call(t);!(a=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){o=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(o)throw r}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=Array(e);i<e;i++)r[i]=t[i];return r}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;let n={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},a=/ (?:to|[-/]) | ?(?:--|[–—]) ?/,o=/^(\d{4}-\d{2}-\d{2})\/(\d{4}-\d{2}-\d{2})$/;function l(t){return n[t.toLowerCase().slice(0,3)]}let u=function(t){let e=/^(\d{4}|[-+]\d{6,})-(\d{2})(?:-(\d{2}))?/;if("string"!=typeof t||!e.test(t))return null;let i=r(t.match(e),4),s=i[1],n=i[2],a=i[3];return+n?+a?[s,n,a]:[s,n]:[s]},p=function(t){let e=/^(?:[a-z]{3},\s*)?(\d{1,2}) ([a-z]{3}) (\d{4,})/i;if("string"!=typeof t||!e.test(t))return null;let i=r(t.match(e),4),s=i[1],n=i[2],a=i[3];return(n=l(n))?[a,n,s]:null};function c(t){let e,i=(e=new Date(t),("number"!=typeof t||isNaN(e.valueOf())?null:[e.getFullYear(),e.getMonth()+1,e.getDate()])||u(t)||p(t)||function(t){let e=/^(\d{1,2})\/(\d{1,2})\/(\d{2}(?:\d{2})?)/;if("string"!=typeof t||!e.test(t))return null;let i=r(t.match(e),4),s=i[1],n=i[2],a=i[3];return new Date(a,s,n).getMonth()===parseInt(s)?[a,s,n]:null}(t)||function(t){let e,i,s,n=/^(\d{1,2})[ .\-/](\d{1,2}|[a-z]{3,10})[ .\-/](-?\d+)/i,a=/^(-?\d+)[ .\-/](\d{1,2}|[a-z]{3,10})[ .\-/](\d{1,2})/i;if("string"!=typeof t)return null;if(n.test(t)){var o=r(t.match(n),4);s=o[1],i=o[2],e=o[3]}else{if(!a.test(t))return null;var u=r(t.match(a),4);e=u[1],i=u[2],s=u[3]}if(l(i))i=l(i);else if(isNaN(i))return null;return[e,i,s]}(t)||function(t){let e=/^([a-z]{3,10}|-?\d+)[^\w-]+([a-z]{3,10}|-?\d+)$/i;if(!("string"==typeof t&&e.test(t)))return null;{let i,r=t.match(e).slice(1,3);if(l(r[1]))i=l(r.pop());else if(l(r[0]))i=l(r.shift());else{if(r.some(isNaN)||r.every(t=>0>+t))return null;i=0>+r[0]||+r[0]>+r[1]&&+r[1]>0?r.pop():r.shift()}return[r.pop(),i]}}(t)||function(t){if("string"!=typeof t)return null;let e=t.match(/^(\d+) ?(a\.?d\.?|b\.?c\.?)$/i);if(e){let t=r(e.slice(1),2);return[t[0]*("a"===t[1].toLowerCase()[0]?1:-1)]}return/^-?\d+$/.test(t)?[t]:null}(t));return i&&i.map(t=>parseInt(t))}i.default=function(t,e){let i=[],r="string"==typeof t&&(o.test(t)?t.match(o).slice(1,3):t.split(a));e?i.push(t,e):r&&2===r.length?i.push(...r):i.push(t);let s=i.map(c);return s.filter(Boolean).length===i.length?{"date-parts":s}:{raw:e?i.join("/"):t}}},3089,(t,e,i)=>{"use strict";function r(t,e,i){if(t.length>=e)return t;for(;t.length<e;)t=i+t;return t.slice(-e)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(t,e="-"){if(!t["date-parts"])return t.raw;let i=t["date-parts"][0].map(t=>t.toString());switch(i.length){case 3:i[2]=r(i[2],2,"0");case 2:i[1]=r(i[1],2,"0");case 1:i[0]=r(i[0],4,"0")}return i.join(e)}},64745,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"format",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(i,"parse",{enumerable:!0,get:function(){return r.default}});var r=n(t.r(47836)),s=n(t.r(3089));function n(t){return t&&t.__esModule?t:{default:t}}},15167,t=>{"use strict";var e=t.i(12781);t.s(["plugins",0,e])},27576,t=>{"use strict";var e=t.i(64745),i=t.i(65136);function r(t){let{firstname:e,lastname:r,firstName:s=e,lastName:n=r}=t;return s&&n?{given:s,family:n}:t.name?(0,i.parse)(t.name):void 0}let s=["PMID","PMCID","DOI","ISBN"],n=["ISSN"];function a(t,e){let i={};for(let r in t){let s=r.toUpperCase();e.includes(s)&&(i[s]=t[r])}if(t.identifier)for(let{id:r,type:s=""}of t.identifier)s=s.toUpperCase(),e.includes(s)&&(i[s]=r);return i}let o={article:"article",book:"book",booklet:"book",proceedings:"book",mastersthesis:"thesis",inbook:"chapter",incollection:"chapter",conference:"paper-conference",inproceedings:"paper-conference",manual:"report",misc:"document",online:"website",patent:"patent",phdthesis:"thesis",techreport:"report",unpublished:"manuscript"};function l(t){let i={type:o[t.type]||"document",title:t.title};if(t.author&&(i.author=t.author.map(r).filter(Boolean)),t.editor&&(i.editor=t.editor.map(r).filter(Boolean)),t.reviewer&&(t.author&&(i["reviewed-author"]=i.author),i.author=t.reviewer.map(r).filter(Boolean)),Array.isArray(t.keywords)?i.keyword=t.keywords.join():t.keywords&&(i.keyword=t.keywords),t.publisher&&(i.publisher=t.publisher.name||t.publisher),t.date&&t.date.published?i.issued=(0,e.parse)(t.date.published):t.year&&(i.issued={"date-parts":[[+t.year]]}),t.date&&t.date.submitted&&(i.submitted=(0,e.parse)(t.date.submitted)),t.journal){let e=t.journal;e.name&&(i["container-title"]=e.name),e.volume&&(i.volume=e.volume),e.issue&&(i.issue=e.issue),Object.assign(i,a(e,n)),e.firstpage&&(i["page-first"]=e.firstpage),e.pages?i.page=e.pages.replace("--","-"):e.firstpage&&e.lastpage&&(i.page=e.firstpage+"-"+e.lastpage)}return t.link&&"object"==typeof t.link[0]&&(i.URL=t.link[0].url),Object.assign(i,a(t,s)),t.cid?i.id=t.cid:i.DOI&&(i.id=i.DOI),i}let u=function(t){return Object.assign(l(t),{type:"article-journal"})},p=function(t){return l(t)};t.s(["quickscrapeRecord",()=>u,"record",()=>p],12427);var c=t.i(12427);t.i(70391);var h=t.i(15167);let f=["fulltext_html","fulltext_xml","fulltext_pdf"],m=["name","lastname","lastName","firstname","firstName"],d="@bibjson",g={json:c},b={"@bibjson/quickscrape+record+object":{parse:u,parseType:{propertyConstraint:{props:"link",value:t=>f.some(e=>t.find(({type:t})=>t===e))},extends:"@bibjson/record+object"}},"@bibjson/record+object":{parse:p,parseType:{dataType:"SimpleObject",propertyConstraint:[{props:"title"},{props:["author","editor"],match:"some",value:t=>Array.isArray(t)&&t[0]&&m.some(e=>e in t[0])}]}},"@bibjson/collection+object":{parse:t=>t.records,parseType:{dataType:"SimpleObject",propertyConstraint:[{props:"metadata",value:t=>"collection"in t},{props:"records",value:t=>Array.isArray(t)}]}}};h.plugins.add(d,{input:b}),t.s(["formats",()=>b,"parsers",()=>g,"ref",()=>d],27576)},45726,(t,e,i)=>{!function(i,r){if("function"==typeof define&&define.amd){let e;void 0!==(e=r())&&t.v(e)}else e.exports?e.exports=r():i.moo=r()}(t.e,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,i="boolean"==typeof RegExp().sticky;function r(t){return t&&"[object RegExp]"===e.call(t)}function s(t){return t&&"object"==typeof t&&!r(t)&&!Array.isArray(t)}function n(t){return t.length?"(?:"+t.map(function(t){return"(?:"+t+")"}).join("|")+")":"(?!)"}function a(t){if("string"==typeof t)return"(?:"+t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+")";if(r(t)){if(t.ignoreCase)throw Error("RegExp /i flag not allowed");if(t.global)throw Error("RegExp /g flag is implied");if(t.sticky)throw Error("RegExp /y flag is implied");if(t.multiline)throw Error("RegExp /m flag is implied");return t.source}throw Error("Not a pattern: "+t)}function o(t,e){return t.length>e?t:Array(e-t.length+1).join(" ")+t}function l(e,i){if(s(i)||(i={match:i}),i.include)throw Error("Matching rules cannot also include states");var n={defaultType:e,lineBreaks:!!i.error||!!i.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var a in i)t.call(i,a)&&(n[a]=i[a]);if("string"==typeof n.type&&e!==n.type)throw Error("Type transform cannot be a string (type '"+n.type+"' for token '"+e+"')");var o=n.match;return n.match=Array.isArray(o)?o:o?[o]:[],n.match.sort(function(t,e){return r(t)&&r(e)?0:r(e)?-1:r(t)?1:e.length-t.length}),n}function u(t){return Array.isArray(t)?function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i];if(r.include){for(var s=[].concat(r.include),n=0;n<s.length;n++)e.push({include:s[n]});continue}if(!r.type)throw Error("Rule has no type: "+JSON.stringify(r));e.push(l(r.type,r))}return e}(t):function(t){for(var e=Object.getOwnPropertyNames(t),i=[],r=0;r<e.length;r++){var n=e[r],a=[].concat(t[n]);if("include"===n){for(var o=0;o<a.length;o++)i.push({include:a[o]});continue}var u=[];a.forEach(function(t){s(t)?(u.length&&i.push(l(n,u)),i.push(l(n,t)),u=[]):u.push(t)}),u.length&&i.push(l(n,u))}return i}(t)}var p=l("error",{lineBreaks:!0,shouldThrow:!0});function c(t,e){for(var s=null,o=Object.create(null),l=!0,u=null,c=[],h=[],f=0;f<t.length;f++)t[f].fallback&&(l=!1);for(var f=0;f<t.length;f++){var m=t[f];if(m.include)throw Error("Inheritance is not allowed in stateless lexers");if(m.error||m.fallback){if(s)if(!m.fallback==!s.fallback)throw Error("Multiple "+(m.fallback?"fallback":"error")+" rules not allowed (for token '"+m.defaultType+"')");else throw Error("fallback and error are mutually exclusive (for token '"+m.defaultType+"')");s=m}var d=m.match.slice();if(l)for(;d.length&&"string"==typeof d[0]&&1===d[0].length;)o[d.shift().charCodeAt(0)]=m;if(m.pop||m.push||m.next){if(!e)throw Error("State-switching options are not allowed in stateless lexers (for token '"+m.defaultType+"')");if(m.fallback)throw Error("State-switching options are not allowed on fallback tokens (for token '"+m.defaultType+"')")}if(0!==d.length){l=!1,c.push(m);for(var g=0;g<d.length;g++){var b=d[g];if(r(b)){if(null===u)u=b.unicode;else if(u!==b.unicode&&!1===m.fallback)throw Error("If one rule is /u then all must be")}}var y=n(d.map(a)),v=new RegExp(y);if(v.test(""))throw Error("RegExp matches empty string: "+v);if(RegExp("|"+y).exec("").length-1>0)throw Error("RegExp has capture groups: "+v+"\nUse (?: … ) instead");if(!m.lineBreaks&&v.test("\n"))throw Error("Rule should declare lineBreaks: "+v);h.push("("+y+")")}}var _=s&&s.fallback,k=i&&!_?"ym":"gm";return!0===u&&(k+="u"),{regexp:new RegExp(n(h)+(i||_?"":"|"),k),groups:c,fast:o,error:s||p}}function h(t,e,i){var r=t&&(t.push||t.next);if(r&&!i[r])throw Error("Missing state '"+r+"' (in token '"+t.defaultType+"' of state '"+e+"')");if(t&&t.pop&&1!=+t.pop)throw Error("pop must be 1 (in token '"+t.defaultType+"' of state '"+e+"')")}var f=function(t,e){this.startState=e,this.states=t,this.buffer="",this.stack=[],this.reset()};f.prototype.reset=function(t,e){return this.buffer=t||"",this.index=0,this.line=e?e.line:1,this.col=e?e.col:1,this.queuedToken=e?e.queuedToken:null,this.queuedText=e?e.queuedText:"",this.queuedThrow=e?e.queuedThrow:null,this.setState(e?e.state:this.startState),this.stack=e&&e.stack?e.stack.slice():[],this},f.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},f.prototype.setState=function(t){if(t&&this.state!==t){this.state=t;var e=this.states[t];this.groups=e.groups,this.error=e.error,this.re=e.regexp,this.fast=e.fast}},f.prototype.popState=function(){this.setState(this.stack.pop())},f.prototype.pushState=function(t){this.stack.push(this.state),this.setState(t)};var m=i?function(t,e){return t.exec(e)}:function(t,e){var i=t.exec(e);return 0===i[0].length?null:i};function d(){return this.value}if(f.prototype._getGroup=function(t){for(var e=this.groups.length,i=0;i<e;i++)if(void 0!==t[i+1])return this.groups[i];throw Error("Cannot find token type for matched text")},f.prototype.next=function(){var t=this.index;if(this.queuedGroup){var e=this._token(this.queuedGroup,this.queuedText,t);return this.queuedGroup=null,this.queuedText="",e}var i=this.buffer;if(t!==i.length){var r=this.fast[i.charCodeAt(t)];if(r)return this._token(r,i.charAt(t),t);var s=this.re;s.lastIndex=t;var n=m(s,i),a=this.error;if(null==n)return this._token(a,i.slice(t,i.length),t);var r=this._getGroup(n),o=n[0];return a.fallback&&n.index!==t?(this.queuedGroup=r,this.queuedText=o,this._token(a,i.slice(t,n.index),t)):this._token(r,o,t)}},f.prototype._token=function(t,e,i){var r=0;if(t.lineBreaks){var s=/\n/g,n=1;if("\n"===e)r=1;else for(;s.exec(e);)r++,n=s.lastIndex}var a={type:"function"==typeof t.type&&t.type(e)||t.defaultType,value:"function"==typeof t.value?t.value(e):e,text:e,toString:d,offset:i,lineBreaks:r,line:this.line,col:this.col},o=e.length;if(this.index+=o,this.line+=r,0!==r?this.col=o-n+1:this.col+=o,t.shouldThrow)throw Error(this.formatError(a,"invalid syntax"));return t.pop?this.popState():t.push?this.pushState(t.push):t.next&&this.setState(t.next),a},"undefined"!=typeof Symbol&&Symbol.iterator){var g=function(t){this.lexer=t};g.prototype.next=function(){var t=this.lexer.next();return{value:t,done:!t}},g.prototype[Symbol.iterator]=function(){return this},f.prototype[Symbol.iterator]=function(){return new g(this)}}return f.prototype.formatError=function(t,e){if(null==t)var i=this.buffer.slice(this.index),t={text:i,offset:this.index,lineBreaks:+(-1!==i.indexOf("\n")),line:this.line,col:this.col};var r=Math.max(t.line-2,1),s=String(t.line+2).length,n=(function(t,e){for(var i=t.length,r=0;;){var s=t.lastIndexOf("\n",i-1);if(-1===s)break;if(r++,i=s,r===e||0===i)break}var n=r<e?0:i+1;return t.substring(n).split("\n")})(this.buffer,this.line-t.line+2+1).slice(0,5),a=[];a.push(e+" at line "+t.line+" col "+t.col+":"),a.push("");for(var l=0;l<n.length;l++){var u=n[l],p=r+l;a.push(o(String(p),s)+"  "+u),p===t.line&&a.push(o("",s+t.col+1)+"^")}return a.join("\n")},f.prototype.clone=function(){return new f(this.states,this.state)},f.prototype.has=function(t){return!0},{compile:function(t){return new f({start:c(u(t))},"start")},states:function(t,e){var i=t.$all?u(t.$all):[];delete t.$all;var r=Object.getOwnPropertyNames(t);e||(e=r[0]);for(var s=Object.create(null),n=0;n<r.length;n++){var a=r[n];s[a]=u(t[a]).concat(i)}for(var n=0;n<r.length;n++)for(var a=r[n],o=s[a],l=Object.create(null),p=0;p<o.length;p++){var m=o[p];if(m.include){var d=[p,1];if(m.include!==a&&!l[m.include]){l[m.include]=!0;var g=s[m.include];if(!g)throw Error("Cannot include nonexistent state '"+m.include+"' (in state '"+a+"')");for(var b=0;b<g.length;b++){var y=g[b];-1===o.indexOf(y)&&d.push(y)}}o.splice.apply(o,d),p--}}for(var v=Object.create(null),n=0;n<r.length;n++){var a=r[n];v[a]=c(s[a],!0)}for(var n=0;n<r.length;n++){for(var _=r[n],k=v[_],w=k.groups,p=0;p<w.length;p++)h(w[p],_,v);for(var x=Object.getOwnPropertyNames(k.fast),p=0;p<x.length;p++)h(k.fast[x[p]],_,v)}return new f(v,e)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function(t){for(var e="undefined"!=typeof Map,i=e?new Map:Object.create(null),r=Object.getOwnPropertyNames(t),s=0;s<r.length;s++){var n=r[s],a=t[n];(Array.isArray(a)?a:[a]).forEach(function(t){if("string"!=typeof t)throw Error("keyword must be string (in keyword '"+n+"')");e?i.set(t,n):i[t]=n})}return function(t){return e?i.get(t):i[t]}}}})},32255,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.sentenceCaseLanguages=i.required=i.mathScripts=i.mathScriptFormatting=i.mathCommands=i.ligatures=i.ligaturePattern=i.formattingEnvs=i.formattingCommands=i.formatting=i.fieldTypes=i.diacritics=i.defaultStrings=i.commands=i.argumentCommands=void 0;var r=a(t.r(618)),s=a(t.r(77229)),n=a(t.r(79130));function a(t){return t&&t.__esModule?t:{default:t}}i.required=r.default,i.fieldTypes=s.default,i.diacritics=n.default.diacritics,i.commands=n.default.commands,i.mathCommands=n.default.mathCommands,i.defaultStrings={jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12",acmcs:"ACM Computing Surveys",acta:"Acta Informatica",cacm:"Communications of the ACM",ibmjrd:"IBM Journal of Research and Development",ibmsj:"IBM Systems Journal",ieeese:"IEEE Transactions on Software Engineering",ieeetc:"IEEE Transactions on Computers",ieeetcad:"IEEE Transactions on Computer-Aided Design of Integrated Circuits",ipl:"Information Processing Letters",jacm:"Journal of the ACM",jcss:"Journal of Computer and System Sciences",scp:"Science of Computer Programming",sicomp:"SIAM Journal on Computing",tocs:"ACM Transactions on Computer Systems",tods:"ACM Transactions on Database Systems",tog:"ACM Transactions on Graphics",toms:"ACM Transactions on Mathematical Software",toois:"ACM Transactions on Office Information Systems",toplas:"ACM Transactions on Programming Languages and Systems",tcs:"Theoretical Computer Science"},i.formattingEnvs={it:"italics",itshape:"italics",sl:"italics",slshape:"italics",em:"italics",bf:"bold",bfseries:"bold",sc:"smallcaps",scshape:"smallcaps",rm:void 0,sf:void 0,tt:void 0},i.formattingCommands={textit:"italics",textsl:"italics",emph:"italics",mkbibitalic:"italics",mkbibemph:"italics",textbf:"bold",strong:"bold",mkbibbold:"bold",textsc:"smallcaps",textsuperscript:"superscript",textsubscript:"subscript",enquote:"quotes",mkbibquote:"quotes",textmd:void 0,textrm:void 0,textsf:void 0,texttt:void 0,textup:void 0},i.formatting={italics:["<i>","</i>"],bold:["<b>","</b>"],superscript:["<sup>","</sup>"],subscript:["<sub>","</sub>"],smallcaps:['<span style="font-variant:small-caps;">',"</span>"],nocase:['<span class="nocase">',"</span>"],quotes:["“","”"]},i.argumentCommands={ElsevierGlyph:t=>String.fromCharCode(parseInt(t,16)),href:(t,e)=>t,url:t=>t},i.ligaturePattern=/---?|''|``|~/g,i.ligatures={"--":"–","---":"—","``":"“","''":"”","~":" "},i.mathScriptFormatting={"^":"superscript",sp:"superscript",_:"subscript",sb:"subscript",mathrm:void 0},i.mathScripts={"^":{0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","+":"⁺","-":"⁻","=":"⁼","(":"⁽",")":"⁾",i:"ⁱ",n:"ⁿ"},_:{0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉","+":"₊","-":"₋","=":"₌","(":"₍",")":"₎",a:"ₐ",e:"ₑ",o:"ₒ",x:"ₓ",ə:"ₔ",h:"ₕ",k:"ₖ",l:"ₗ",m:"ₘ",n:"ₙ",s:"ₚ",p:"ₛ",t:"ₜ"}},i.sentenceCaseLanguages=["american","british","canadian","english","australian","newzealand","usenglish","ukenglish","en","eng","en-au","en-bz","en-ca","en-cb","en-gb","en-ie","en-jm","en-nz","en-ph","en-tt","en-us","en-za","en-zw","anglais"]},11392,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=a(t.r(69299)),s=a(t.r(9449));function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(n=function(t){return t?i:e})(t)}function a(t){return t&&t.__esModule?t:{default:t}}i.default={constants:function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=n(void 0);if(i&&i.has(t))return i.get(t);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&({}).hasOwnProperty.call(t,a)){var o=s?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=t[a]}return r.default=t,i&&i.set(t,r),r}(t.r(32255)),types:{biblatex:r.default,bibtex:s.default},parse:{biblatex:!0,strict:!1,sentenceCase:"never"},format:{useIdAsLabel:!1,checkLabel:!0,asciiOnly:!0},biber:{annotationMarker:"+an",namedAnnotationMarker:":"}}},45209,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.bibtexGrammar=void 0,i.parse=function(t){return m.parse(h.reset(t))};var r=t.r(74254),s=o(t.r(45726)),n=o(t.r(11392)),a=t.r(32255);function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}let p=/[a-zA-Z_][a-zA-Z0-9_:+-]*/,c={comment:/%.*/,whitespace:{match:/\s+/,lineBreaks:!0}},h=s.default.states({main:{junk:{match:/@[cC][oO][mM][mM][eE][nN][tT].+|[^@]+/,lineBreaks:!0},at:{match:"@",push:"entry"}},entry:u(u({},c),{},{otherEntryType:{match:/[sS][tT][rR][iI][nN][gG]|[pP][rR][eE][aA][mM][bB][lL][eE]/,next:"otherEntryContents"},dataEntryType:{match:p,next:"dataEntryContents"}}),otherEntryContents:u(u({},c),{},{lbrace:{match:/[{(]/,next:"fields"}}),dataEntryContents:u(u({},c),{},{lbrace:{match:/[{(]/,next:"dataEntryContents"},label:/[^,\s]+/,comma:{match:",",next:"fields"}}),fields:u(u({},c),{},{identifier:p,number:/-?\d+/,hash:"#",equals:"=",comma:",",quote:{match:'"',push:"quotedLiteral"},lbrace:{match:"{",push:"bracedLiteral"},rbrace:{match:/[})]/,pop:!0}}),quotedLiteral:{lbrace:{match:"{",push:"bracedLiteral"},quote:{match:'"',pop:!0},text:{match:/(?:\\[\\{]|[^{"])+/,lineBreaks:!0}},bracedLiteral:{lbrace:{match:"{",push:"bracedLiteral"},rbrace:{match:"}",pop:!0},text:{match:/(?:\\[\\{}]|[^{}])+/,lineBreaks:!0}}}),f={"(":")","{":"}"},m=i.bibtexGrammar=new r.util.Grammar({Main(){let t=[];for(;;){for(;this.matchToken("junk");)this.consumeToken("junk");if(this.matchEndOfFile())break;t.push(this.consumeRule("Entry"))}return t.filter(Boolean)},_(){let t;for(;t!==this.token;)t=this.token,this.consumeToken("whitespace",!0),this.consumeToken("comment",!0)},Entry(){let t;this.consumeToken("at"),this.consumeRule("_");let e=(this.matchToken("otherEntryType")?this.consumeToken("otherEntryType"):this.consumeToken("dataEntryType")).value.toLowerCase();this.consumeRule("_");let i=this.consumeToken("lbrace").value;if(this.consumeRule("_"),"string"===e){let[t,e]=this.consumeRule("Field");this.state.strings[t]=e}else if("preamble"===e)this.consumeRule("Expression");else{let i=this.consumeToken("label").value;this.consumeRule("_"),this.consumeToken("comma"),this.consumeRule("_"),t=u({type:e,label:i},this.consumeRule("EntryBody"))}this.consumeRule("_");let s=this.consumeToken("rbrace").value;return s!==f[i]&&r.logger.warn("[plugin-bibtex]",`entry started with "${i}", but ends with "${s}"`),t},EntryBody(){let t={properties:{}};for(;this.matchToken("identifier");){let e,[i,r]=this.consumeRule("Field"),s="default";if(i.endsWith(n.default.biber.annotationMarker)?e=i.slice(0,-n.default.biber.annotationMarker.length):i.includes(n.default.biber.annotationMarker+n.default.biber.namedAnnotationMarker)&&([e,s]=i.split(n.default.biber.annotationMarker+n.default.biber.namedAnnotationMarker)),e?(t.annotations||(t.annotations={}),t.annotations[e]||(t.annotations[e]={}),t.annotations[e][s]=r):t.properties[i]=r,this.consumeRule("_"),this.consumeToken("comma",!0))this.consumeRule("_");else break}return t},Field(){let t=this.consumeToken("identifier").value.toLowerCase();return this.consumeRule("_"),this.consumeToken("equals"),this.consumeRule("_"),[t,this.consumeRule("Expression")]},Expression(){let t=this.consumeRule("ExpressionPart");for(this.consumeRule("_");this.matchToken("hash");)this.consumeToken("hash"),this.consumeRule("_"),t+=this.consumeRule("ExpressionPart").toString(),this.consumeRule("_");return t},ExpressionPart(){return this.matchToken("identifier")?this.state.strings[this.consumeToken("identifier").value.toLowerCase()]||"":this.matchToken("number")?parseInt(this.consumeToken("number")):this.matchToken("quote")?this.consumeRule("QuoteString"):this.consumeRule("BracketString")},QuoteString(){let t="";for(this.consumeToken("quote");!this.matchToken("quote");)t+=this.consumeRule("Text");return this.consumeToken("quote"),t},BracketString(){let t="";for(this.consumeToken("lbrace");!this.matchToken("rbrace");)t+=this.consumeRule("Text");return this.consumeToken("rbrace"),t},Text(){return this.matchToken("lbrace")?`{${this.consumeRule("BracketString")}}`:this.consumeToken("text").value}},{strings:a.defaultStrings})},80943,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.textEntry=i.text=i.parse=void 0;let r=/\n\s*(?=\[)/g,s=/^\[(.+?)\]\s*(?:\n([\s\S]+))?$/,n=/((?=.)\s)*\n\s*/g,a=/:(.*)/,o=t=>{let[,e,i]=t.match(s)||[];if(!e||!i)return{};{let t={type:"book",label:e,properties:{}};return i.trim().split(n).filter(t=>t).forEach(e=>{let[i,r]=e.split(a);r&&(i=i.trim(),r=r.trim(),"type"===i?t.type=r:t.properties[i]=r)}),t}};i.textEntry=o,i.text=i.parse=t=>t.trim().split(r).map(o)},51191,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TYPE_KEYS=i.TYPE=i.STANDARD_NUMBERS_PATTERN=i.MONTHS=i.LABEL=i.Converters=void 0,i.formatLabel=b,i.parseDate=d,i.parseMonth=g;var r,s=t.r(74254),n=(r=t.r(11392))&&r.__esModule?r:{default:r};let a=new Set(["the","a","an"]),o=/(?:<\/?.*?>|[\u0020-\u002F\u003A-\u0040\u005B-\u005E\u0060\u007B-\u007F])+/g,l=/[^\u0020-\u007F]+/g;function u(t){return null===t?"null":void 0===t?"undefined":n.default.format.checkLabel?t.toString().replace(o,""):t.toString()}function p(t){return t?t.normalize("NFKD").replace(l,"").split(o).find(t=>t.length&&!a.has(t.toLowerCase())):""}let c=new s.util.Translator([{source:"given",target:"given"},{source:"family",target:"family"},{source:"suffix",target:"suffix"},{source:"prefix",target:"non-dropping-particle"},{source:"family",target:"literal",when:{source:!1,target:{family:!1,given:!1}}}]),h=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];i.TYPE="BibTeX type",i.LABEL="BibTeX label";let f=i.MONTHS={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};i.TYPE_KEYS={bathesis:"Bachelor's thesis",mathesis:"Master's thesis",phdthesis:"PhD thesis",candthesis:"Candidate thesis",techreport:"technical report",resreport:"research report",software:"computer software",datacd:"data cd",audiocd:"audio cd",patent:"patent",patentde:"German patent",patenteu:"European patent",patentfr:"French patent",patentuk:"British patent",patentus:"U.S. patent",patreq:"patent request",patreqde:"German patent request",patreqeu:"European patent request",patreqfr:"French patent request",patrequk:"British patent request",patrequs:"U.S. patent request"};let m=i.STANDARD_NUMBERS_PATTERN=/(^(?:ISAN )?(?:[0-9a-f]{4}-){4}[0-9a-z](?:-(?:[0-9a-f]{4}-){2}[0-9a-z])?$)|(^(?:979-?0-?|M-?)(?:\d{9}|(?=[\d-]{11}$)\d+-\d+-\d)$)|(^ISRN .{1,36}$)|(^(?:ISWC )?T-?\d{9}-?\d$)/i;function d(t){let e=t.split("T")[0].replace(/[?~%]$/,"").split("-"),i=+e[0].replace(/^Y(?=-?\d{4}\d+)/,"").replace(/X/g,"0"),r=+e[1],s=+e[2];return!r||r>20?[i]:s?[i,r,s]:[i,r]}function g(t){let e,i;if(null==t)return[];if(+t)return[parseInt(t,10)];if((t=t.trim().toLowerCase())in f)return[f[t]];let r=t.split(/\s+/);return r[0]in f?(e=f[r[0]],i=parseInt(r[1])):r[1]in f&&(e=f[r[1]],i=parseInt(r[0])),i?[e,i]:e?[e]:[]}function b(t,e,i,r){let s="";return t&&t[0]&&(s+=p(t[0].family||t[0].literal)),e&&e["date-parts"]&&e["date-parts"][0]&&(s+=e["date-parts"][0][0]),i?s+=i:r&&(s+=p(r)),s}i.Converters={PICK:{toTarget:(...t)=>t.find(Boolean),toSource:t=>[t]},DATE:{toTarget(t){let e=t.split("/").map(t=>t&&".."!==t?d(t):void 0);return isNaN(e[0][0])?{literal:t}:{"date-parts":e}},toSource(t){if("date-parts"in t)return t["date-parts"].map(t=>t.map(t=>t.toString().padStart(2,"0")).join("-")).join("/")}},YEAR_MONTH:{toTarget:(t,e,i)=>isNaN(+t)?{literal:t}:isNaN(+i)||isNaN(+e)?{"date-parts":[[+t,...g(e)]]}:{"date-parts":[[+t,+e,+i]]},toSource(t){if(!("date-parts"in t))return[];{let[e,i,r]=t["date-parts"][0];return[e.toString(),i?r?`${h[i-1]} ${r}`:i:void 0]}}},EPRINT:{toTarget(t,e){if("pubmed"===e)return t},toSource:t=>[t,"pubmed"]},EVENT_TITLE:{toTarget:(t,e)=>(e&&(t+=" ("+e+")"),t),toSource:t=>t.match(/^(.+)(?: \((.+)\))?$/).slice(1,3)},HOW_PUBLISHED:{toTarget(t){if(t.startsWith("http"))return t}},KEYWORDS:{toTarget:t=>t.join(","),toSource:t=>t.split(",")},LABEL:{toTarget:t=>[t,t],toSource:(t,e,i,r,s,a)=>!e||n.default.format.checkLabel&&e.match(o)?n.default.format.useIdAsLabel?u(t):b(i,r,s,a)||u(t):e},NAMES:{toTarget:t=>t.map(c.convertToTarget),toSource:t=>t.map(c.convertToSource)},NAMES_ORCID:{toTarget:(t,e)=>t.map((t,i)=>{var r;let s=c.convertToTarget(t);return"string"==typeof(null==e||null==(r=e.item)?void 0:r[i])&&(s._orcid=e.item[i]),s}),toSource(t){let e=[],i=[];for(let r=0;r<t.length;r++)e.push(c.convertToSource(t[r])),t[r]._orcid&&(i[r]=t[r]._orcid);return[e,i.length?{item:i}:void 0]}},PAGES:{toTarget:t=>t.replace(/[–—]/,"-"),toSource:t=>t.replace("-","--")},STANDARD_NUMBERS:{toTarget:(...t)=>t.find(Boolean),toSource(t){let e=t.toString().match(m);return e?e.slice(1,5):[]}},STATUS:{toSource(t){if(/^(inpreparation|submitted|forthcoming|inpress|prepublished)$/i.test(t))return t}},TITLE:{toTarget:(t,e,i)=>(e&&(t+=": "+e),t),toSource:t=>[t]}}},51682,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,s=t.r(74254),n=t.r(64745),a=(r=t.r(69299))&&r.__esModule?r:{default:r},o=t.r(51191);let l=[{source:"note",target:"accessed",when:{source:!1,target:{note:!1,addendum:!1}},convert:{toSource:t=>`[Online; accessed ${(0,n.format)(t)}]`}},{source:"numpages",target:"number-of-pages",when:{source:{pagetotal:!1},target:!1}},{source:"pmid",target:"PMID",when:{source:{eprinttype:t=>"pmid"!==t,archiveprefix:t=>"pmid"!==t},target:!1}},{source:"pmcid",target:"PMCID",when:{target:!1}},{source:"s2id",target:"custom",convert:{toTarget:t=>({S2ID:t}),toSource:({S2ID:t})=>t}}],u=[{source:"annote",target:"annote",when:{source:{annotation:!1},target:!1}},{source:"address",target:"publisher-place",convert:o.Converters.PICK,when:{source:{location:!1},target:!1}},{source:["eprint","archiveprefix"],target:"PMID",convert:o.Converters.EPRINT,when:{source:{eprinttype:!1},target:!1}},{source:"journal",target:"container-title",when:{source:{maintitle:!1,booktitle:!1,journaltitle:!1},target:!1}},{source:"school",target:"publisher",convert:o.Converters.PICK,when:{source:{institution:!1,organization:!1,publisher:!1},target:!1}}];i.default=new s.util.Translator([...u,...l,{source:"abstract",target:"abstract"},{source:"urldate",target:"accessed",convert:o.Converters.DATE},{source:"annotation",target:"annote"},{source:["author","author+an:orcid"],target:"author",convert:o.Converters.NAMES_ORCID},{source:"library",target:"call-number"},{source:"chapter",target:"chapter-number"},{source:"bookauthor",target:"container-author",convert:o.Converters.NAMES},{source:["maintitle","mainsubtitle","maintitleaddon"],target:"container-title",when:{source:!0,target:{"number-of-volumes":!0}},convert:o.Converters.TITLE},{source:["booktitle","booksubtitle","booktitleaddon"],target:"container-title",when:{source:{maintitle:!1},target:{"number-of-volumes":!1,type:t=>!t||!t.startsWith("article")}},convert:o.Converters.TITLE},{source:["journaltitle","journalsubtitle","journaltitleaddon"],target:"container-title",when:{source:{[o.TYPE]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}},convert:o.Converters.TITLE},{source:"shortjournal",target:"container-title-short",when:{source:{[o.TYPE]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}}},{source:"shortjournal",target:"journalAbbreviation",when:{source:!1,target:{"container-title-short":!1}}},{source:"number",target:"collection-number",when:{source:{[o.TYPE]:["book","mvbook","inbook","bookinbook","suppbook","collection","mvcollection","incollection","suppcollection","manual","suppperiodical","proceedings","mvproceedings","refererence"]},target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","post","post-weblog","personal_communication","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"series",target:"collection-title"},{source:"shortseries",target:"collection-title-short"},{source:"doi",target:"DOI"},{source:"edition",target:"edition"},{source:"editor",target:"editor",convert:o.Converters.NAMES},{source:[o.TYPE,"entrysubtype","type"],target:["type","genre"],convert:{toTarget:(t,e,i)=>(i||("mastersthesis"===t&&(i="mathesis"),"phdthesis"===t&&(i="phdthesis"),"techreport"===t&&(i="techreport")),[a.default.source[t]||"document",i||e]),toSource(t,e){let i=a.default.target[t]||"misc";return e in o.TYPE_KEYS?[i,void 0,e]:[i,e]}}},{source:o.TYPE,when:{target:{type:!1}},convert:{toSource:()=>"misc"}},{source:"eventdate",target:"event-date",convert:o.Converters.DATE},{source:"venue",target:"event-place"},{source:["eventtitle","eventtitleaddon"],target:"event-title",convert:o.Converters.EVENT_TITLE},{source:["eventtitle","eventtitleaddon"],target:"event",convert:o.Converters.EVENT_TITLE,when:{source:!1,target:{"event-title":!1}}},{source:o.LABEL,target:["id","citation-key","author","issued","year-suffix","title"],convert:o.Converters.LABEL},{source:"isbn",target:"ISBN"},{source:"issn",target:"ISSN"},{source:"issue",target:"issue",when:{source:{number:!1,[o.TYPE]:["article","periodical"]},target:{issue:t=>"string"==typeof t&&!t.match(/\d+/),type:["article","article-journal","article-newspaper","article-magazine","periodical"]}}},{source:"number",target:"issue",when:{source:{[o.TYPE]:["article","periodical","inproceedings"]},target:{issue:t=>t&&("number"==typeof t||t.match(/\d+/)),type:["article","article-journal","article-newspaper","article-magazine","paper-conference","periodical"]}}},{source:"date",target:"issued",convert:o.Converters.DATE},{source:["year","month","day"],target:"issued",convert:o.Converters.YEAR_MONTH,when:{source:{date:!1},target:!1}},{source:"location",target:"jurisdiction",when:{source:{type:"patent"},target:{type:"patent"}}},{source:"keywords",target:"keyword",convert:o.Converters.KEYWORDS},{source:"language",target:"language",convert:o.Converters.PICK},{source:"langid",target:"language",when:{source:{language:!1},target:!1}},{source:"note",target:"note"},{source:"addendum",target:"note",when:{source:{note:!1},target:!1}},{source:"eid",target:"number",when:{target:{type:["article-journal"]}}},{source:["isan","ismn","isrn","iswc"],target:"number",convert:o.Converters.STANDARD_NUMBERS,when:{source:{[o.TYPE]:t=>"patent"!==t},target:{type:t=>"patent"!==t}}},{source:"number",target:"number",when:{source:{[o.TYPE]:["patent","report","techreport","legislation"]},target:{type:["patent","report","legislation"]}}},{source:"origdate",target:"original-date",convert:o.Converters.DATE},{source:"origlocation",target:"original-publisher-place",convert:o.Converters.PICK},{source:"origpublisher",target:"original-publisher",convert:o.Converters.PICK},{source:"origtitle",target:"original-title"},{source:"pages",target:"page",when:{source:{bookpagination:[void 0,"page"]}},convert:o.Converters.PAGES},{source:"pagetotal",target:"number-of-pages"},{source:"part",target:"part-number"},{source:["eprint","eprinttype"],target:"PMID",convert:o.Converters.EPRINT},{source:"location",target:"publisher-place",convert:o.Converters.PICK},{source:"publisher",target:"publisher",convert:o.Converters.PICK,when:{source:!0,target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","patent","performance","periodical","personal_communication","post","post-weblog","regulation","review","review-book","software","song","speech","standard","treaty"]}}},{source:"organization",target:"publisher",convert:o.Converters.PICK,when:{source:{publisher:!1},target:{type:["paper-conference","webpage"]}}},{source:"institution",target:"publisher",convert:o.Converters.PICK,when:{source:{publisher:!1,organization:!1},target:{type:["report","thesis"]}}},{source:"howpublished",target:"publisher",convert:o.Converters.PICK,when:{source:{howpublished:t=>t&&!t.startsWith("http"),publisher:!1,organization:!1,institution:!1},target:{type:"manuscript"}}},{source:["pages","bookpagination"],target:"section",when:{source:{bookpagination:"section"},target:{page:!1}},convert:{toTarget:t=>t,toSource:t=>[t,"section"]}},{source:"pubstate",target:"status",convert:o.Converters.STATUS},{source:"shorttitle",target:"title-short"},{source:"shorttitle",target:"shortTitle",when:{source:!1,target:{"title-short":!1}}},{source:["title","subtitle","titleaddon"],target:"title",convert:o.Converters.TITLE},{source:"translator",target:"translator",convert:o.Converters.NAMES},{source:"url",target:"URL"},{source:"howpublished",target:"URL",convert:o.Converters.HOW_PUBLISHED,when:{source:{url:!1},target:!1}},{source:"version",target:"version"},{source:"volume",target:"volume"},{source:"volumes",target:"number-of-volumes"},{source:["issuetitle","issuesubtitle","issuetitleaddon"],target:"volume-title",convert:o.Converters.TITLE}])},42861,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r,s=t.r(74254),n=t.r(64745),a=(r=t.r(9449))&&r.__esModule?r:{default:r},o=t.r(51191);i.default=new s.util.Translator([{source:"note",target:"accessed",when:{source:!1,target:{note:!1}},convert:{toSource:t=>`[Online; accessed ${(0,n.format)(t)}]`}},{source:"annote",target:"annote"},{source:"address",target:"publisher-place",convert:o.Converters.PICK},{source:"author",target:"author",convert:o.Converters.NAMES},{source:"chapter",target:"chapter-number"},{source:"number",target:"collection-number",when:{source:{[o.TYPE]:["book","mvbook","inbook","collection","mvcollection","incollection","suppcollection","manual","suppperiodical","proceedings","mvproceedings","refererence"]},target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","post","post-weblog","personal_communication","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"series",target:"collection-title"},{source:"booktitle",target:"container-title",when:{target:{type:["chapter","paper-conference"]}}},{source:"journal",target:"container-title",when:{source:{[o.TYPE]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}}},{source:"doi",target:"DOI"},{source:"edition",target:"edition"},{source:"editor",target:"editor",convert:o.Converters.NAMES},{source:o.LABEL,target:["id","citation-key","author","issued","year-suffix","title"],convert:o.Converters.LABEL},{source:"isbn",target:"ISBN"},{source:"issn",target:"ISSN"},{source:"number",target:"issue",when:{source:{[o.TYPE]:["article","periodical","inproceedings"]},target:{issue:t=>"number"==typeof t||"string"==typeof t&&t.match(/\d+/),type:["article","article-journal","article-newspaper","article-magazine","paper-conference","periodical"]}}},{source:["year","month","day"],target:"issued",convert:o.Converters.YEAR_MONTH},{source:"note",target:"note"},{source:"number",target:"number",when:{source:{[o.TYPE]:["patent","report","techreport"]},target:{type:["patent","report"]}}},{source:"eid",target:"number",when:{source:{number:!1},target:{type:["article-journal"]}}},{source:"pages",target:"page",convert:o.Converters.PAGES},{source:"publisher",target:"publisher",convert:o.Converters.PICK,when:{target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","map","motion_picture","musical_score","pamphlet","patent","performance","periodical","personal_communication","post","post-weblog","regulation","review","review-book","software","song","speech","standard","treaty","webpage"]}}},{source:"organization",target:"publisher",convert:o.Converters.PICK,when:{source:{publisher:!1},target:{type:"paper-conference"}}},{source:"institution",target:"publisher",convert:o.Converters.PICK,when:{source:{publisher:!1,organization:!1},target:{type:"report"}}},{source:"school",target:"publisher",convert:o.Converters.PICK,when:{source:{institution:!1,organization:!1,publisher:!1},target:{type:"thesis"}}},{source:"howpublished",target:"publisher",convert:o.Converters.PICK,when:{source:{howpublished:t=>t&&!t.startsWith("http"),publisher:!1,organization:!1,institution:!1,school:!1},target:{type:"manuscript"}}},{source:"title",target:"title"},{source:[o.TYPE,"type"],target:["type","genre"],convert:{toTarget(t,e){let i=a.default.source[t]||"document";return e?[i,e]:"mastersthesis"===t?[i,"Master's thesis"]:"phdthesis"===t?[i,"PhD thesis"]:[i]},toSource(t,e){let i=a.default.target[t]||"misc";return/^(master'?s|diploma) thesis$/i.test(e)?["mastersthesis"]:/^(phd|doctoral) thesis$/i.test(e)?["phdthesis"]:[i,e]}}},{source:o.TYPE,when:{target:{type:!1}},convert:{toSource:()=>"misc"}},{source:"url",target:"URL"},{source:"howpublished",target:"URL",convert:o.Converters.HOW_PUBLISHED,when:{target:{publisher:!1}}},{source:"volume",target:"volume"}])},98644,(t,e,i)=>{"use strict";function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}Object.defineProperty(i,"__esModule",{value:!0}),i.crossref=function t(e,i,s){if(i.crossref in s){let a=s[i.crossref];if(a.properties===i)return i;let o=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},t(a.type,a.properties,s));if(delete o.ids,delete o.crossref,delete o.xref,delete o.entryset,delete o.entrysubtype,delete o.execute,delete o.label,delete o.options,delete o.presort,delete o.related,delete o.relatedoptions,delete o.relatedstring,delete o.relatedtype,delete o.shortand,delete o.shortandintro,delete o.sortkey,("mvbook"===a.type||"book"===a.type)&&n.has(e)&&(o.bookauthor=o.author),a.type in l){let[t,i]=l[a.type];i.has(e)&&(o[t+"title"]=o.title,o[t+"subtitle"]=o.subtitle,"journal"!==t&&(o[t+"titleaddon"]=o.titleaddon),delete o.title,delete o.subtitle,delete o.titleaddon,delete o.shorttitle,delete o.sorttitle,delete o.indextitle,delete o.indexsorttitle)}return Object.assign(o,i)}return i};let s=new Set(["book","inbook","bookinbook","suppbook"]),n=new Set(["inbook","bookinbook","suppbook"]),a=new Set(["collection","reference","incollection","inreference","suppcollection"]),o=new Set(["incollection","inreference","suppcollection"]),l={mvbook:["main",s],mvcollection:["main",a],mvreference:["main",a],mvproceedings:["main",new Set(["proceedings","inproceedings"])],book:["book",n],collection:["book",o],reference:["book",o],proceedings:["book",new Set(["inproceedings"])],periodical:["journal",new Set(["article","suppperiodical"])]}},51895,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.format=function(t){return c(t,s.default)},i.formatBibtex=function(t){return c(t,n.default)},i.parse=function(t){return p(t,s.default)},i.parseBibtex=function(t){return p(t,n.default)};var r=t.r(51191),s=o(t.r(51682)),n=o(t.r(42861)),a=t.r(98644);function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function u(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function p(t,e){let i={};for(let e of t)i[e.label]=e;return t.map(({type:t,label:s,properties:n})=>e.convertToTarget(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=u(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({[r.TYPE]:t,[r.LABEL]:s},(0,a.crossref)(t,n,i))))}function c(t,e){return t.map(t=>{let i=e.convertToSource(t),{[r.TYPE]:s,[r.LABEL]:n}=i;return{type:s,label:n,properties:function(t,e){if(null==t)return{};var i,r,s=function(t,e){if(null==t)return{};var i={};for(var r in t)if(({}).hasOwnProperty.call(t,r)){if(e.includes(r))continue;i[r]=t[r]}return i}(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)i=n[r],e.includes(i)||({}).propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}(i,[r.TYPE,r.LABEL].map(u))}})}},35980,(t,e,i)=>{"use strict";function r(t){if(0===t.length)return;let e="";for(;t.length>1;){let{value:i,hyphenated:r}=t.shift();e+=i+(r?"-":" ")}let i=e+t[0].value;return i[0]&&i}function s(t,e=!0){let i=[],n=[];if(e)for(;t.length>1&&!1!==t[0].upperCase;){for(i.push(...n),n.length=0;t.length>1&&!1!==t[0].upperCase&&!t[0].hyphenated;)i.push(t.shift());for(;t.length>0&&!1!==t[0].upperCase&&t[0].hyphenated;)n.push(t.shift())}let a=[],o=[];for(;t.length>1;){for(a.push(...o),o.length=0;t.length>1&&!1===t[0].upperCase;)a.push(t.shift());for(;t.length>0&&!1!==t[0].upperCase;)o.push(t.shift())}return n.length&&o.unshift(...n),t.length&&o.push(t[0]),[r(i),r(a),r(o)]}Object.defineProperty(i,"__esModule",{value:!0}),i.formatNameParts=r,i.getStringCase=function(t){let e=t.toUpperCase(),i=t.toLowerCase();for(let r=0;r<t.length;r++)if(e[r]!==i[r])return e[r]===t[r];return null},i.orderNameParts=s,i.orderNamePieces=function(t){if(t[0][0].label){let e={};for(let[{value:i,label:r}]of t)e[r]=i;return e}let e={},[i,n,a]=s(t[0],1===t.length);return a&&(e.family=a),n&&(e.prefix=n),3===t.length?(e.given=r(t[2]),e.suffix=r(t[1])):2===t.length?e.given=r(t[1]):i&&(e.given=i),e}},98237,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parse=function(t,e,i=[]){let r=a.fieldTypes[e]||[];return d.parse(f.reset(t,{state:function(t){if("name"===t[1])return"namesLiteral";switch(t[0]){case"list":return"listLiteral";case"separated":return"separatedLiteral";default:return"stringLiteral"}}(r),line:0,col:0}),function(t,e){if("name"===t[1])return"list"===t[0]?"StringNames":"Name";if("title"===t[1]){let t=n.default.parse.sentenceCase;return"always"===t||"english"===t&&(Array.isArray(e)?e.every(g):g(e))?"StringTitleCase":"String"}switch("field"===t[0]?t[1]:t[0]){case"list":return"StringList";case"separated":return"StringSeparated";case"verbatim":return"StringVerbatim";case"uri":return"StringUri";default:return"String"}}(r,i))},i.parseAnnotation=function(t){return d.parse(f.reset(t,{state:"annotation",line:0,col:0}),"Annotations")},i.valueGrammar=void 0;var r=t.r(74254),s=u(t.r(45726)),n=u(t.r(11392)),a=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=l(void 0);if(i&&i.has(t))return i.get(t);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&({}).hasOwnProperty.call(t,n)){var a=s?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,i&&i.set(t,r),r}(t.r(32255)),o=t.r(35980);function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(l=function(t){return t?i:e})(t)}function u(t){return t&&t.__esModule?t:{default:t}}function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}let h={commandBegin:{match:"\\begin",push:"environment"},command:{match:/\\(?:[a-zA-Z]+|.) */,value:t=>t.slice(1).trim()},lbrace:{match:"{",push:"bracedLiteral"},mathShift:{match:"$",push:"mathLiteral"},whitespace:{match:/[\s]+|~/,lineBreaks:!0,value:t=>"~"===t?" ":" "}},f=s.default.states({stringLiteral:c(c({},h),{},{text:/[^{$}\s~\\]+/}),namesLiteral:c(c({and:/\s+[aA][nN][dD]\s+/,comma:",",hyphen:"-",equals:"="},h),{},{text:/[^{$}\s~\\,=-]+/}),listLiteral:c(c({and:/\s+and\s+/},h),{},{text:/[^{$}\s~\\]+/}),separatedLiteral:c(c({comma:","},h),{},{text:/[^{$}\s~\\,]+/}),annotation:c(c({},h),{},{colon:":",equals:"=",comma:",",semicolon:";",quote:'"',itemCount:/\d+/,text:/[^{$}\s~\\":;,=]+/}),bracedLiteral:c(c({},h),{},{rbrace:{match:"}",pop:!0},text:/[^{$}\s~\\]+/}),mathLiteral:c(c({},h),{},{mathShift:{match:"$",pop:!0},script:/[\^_]/,text:/[^{$}\s~\\^_]+/}),environment:c(c({commandEnd:{match:"\\end",pop:!0}},h),{},{text:/[^{$}\s~\\]+/})});function m(t,e){return e in a.formatting?t&&a.formatting[e].join(t):t}let d=i.valueGrammar=new r.util.Grammar({String(){var t;let e="";for(;!this.matchEndOfFile();)e+=this.consumeRule("Text");return(t=e)[0],t},StringNames(){let t=[];for(;;){if(this.consumeToken("whitespace",!0),t.push(this.consumeRule("Name")),this.consumeToken("whitespace",!0),this.matchEndOfFile())return t;this.consumeToken("and")}},Name(){let t=[];for(;;){if(t.push(this.consumeRule("NamePiece")),this.matchEndOfFile()||this.matchToken("and"))return(0,o.orderNamePieces)(t);this.consumeToken("comma"),this.consumeToken("whitespace",!0)}},NamePiece(){let t=[];for(;;){let e=this.consumeRule("NameToken");if(e.label)return e.label=(0,o.formatNameParts)([...t,{value:e.label}]),[e];if(t.push(e),this.matchEndOfFile()||this.matchToken("and")||this.matchToken("comma"))return t;for(;this.matchToken("hyphen")||this.matchToken("whitespace");)this.consumeToken()}},NameToken(){let t=null,e="";for(;;)if(null===t&&this.matchToken("text")){let i=this.consumeToken().value;e+=i,t=(0,o.getStringCase)(i)}else if(this.matchEndOfFile()||this.matchToken("and")||this.matchToken("comma")||this.matchToken("whitespace"))return{value:e,upperCase:t};else if(this.matchToken("hyphen"))return{value:e,upperCase:t,hyphenated:!0};else if(this.matchToken("equals")){this.consumeToken("equals");let t=this.consumeRule("NamePiece");return t[0].label&&(e+="="+t[0].label),{value:(0,o.formatNameParts)(t),label:e}}else e+=this.consumeRule("Text")},StringList(){let t=[];for(;!this.matchEndOfFile();){var e;let i="";for(;!this.matchEndOfFile()&&!this.matchToken("and");)i+=this.consumeRule("Text");t.push(((e=i)[0],e)),this.consumeToken("and",!0)}return 1===t.length?t[0]:t},StringSeparated(){let t=[];for(;!this.matchEndOfFile();){let e="";for(;!this.matchEndOfFile()&&!this.matchToken("comma");)e+=this.consumeRule("Text");t.push(e.trim()),this.consumeToken("comma",!0),this.consumeToken("whitespace",!0)}return t},StringVerbatim(){var t;let e="";for(;!this.matchEndOfFile();)e+=this.consumeToken().text;return(t=e)[0],t},StringUri(){let t=this.consumeRule("StringVerbatim");try{if(decodeURI(t)===t)return encodeURI(t);return t}catch(e){return encodeURI(t)}},StringTitleCase(){var t;this.state.sentenceCase=!0;let e="";for(;!this.matchEndOfFile();)e+=this.consumeRule("Text");return(t=e)[0],t},Annotations(){let t={};for(;;){let{scope:e,item:i,part:r,value:s}=this.consumeRule("Annotation");if("part"===e?(t.part||(t.part=[]),t.part[i]||(t.part[i]={}),t.part[i][r]=s):"item"===e?(t.item||(t.item=[]),t.item[i]=s):t.field=s,this.matchEndOfFile())break;this.consumeToken("semicolon"),this.consumeRule("_")}return t},Annotation(){var t,e,i;let r={};if(this.matchToken("itemCount")?(r.item=parseInt(this.consumeToken("itemCount"))-1,this.matchToken("colon")?(this.consumeToken("colon"),r.part=this.consumeToken("text"),r.scope="part"):r.scope="item"):r.scope="field",this.consumeToken("equals"),this.consumeRule("_"),this.matchToken("quote")){this.consumeToken("quote");let e="";for(;!this.matchToken("quote");)this.matchToken("itemCount")||this.matchToken("colon")||this.matchToken("comma")||this.matchToken("semicolon")||this.matchToken("equals")?(e+=this.token.value,this.token=this.lexer.next()):e+=this.consumeRule("Text");this.consumeToken("quote"),(t=e)[0],r.value=t,this.consumeRule("_")}else{r.value=[];let t="";for(;;)if(t+=this.consumeRule("Text"),this.matchToken("comma"))this.consumeToken("comma"),this.consumeRule("_"),r.value.push(((e=t)[0],e)),t="";else if(this.matchEndOfFile()||this.matchToken("semicolon")){r.value.push(((i=t)[0],i));break}}return r},BracketString(){var t;let e="";this.consumeToken("lbrace");let i=this.state.sentenceCase;for(this.state.sentenceCase=i&&this.matchToken("command"),(t=this.state).partlyLowercase&&(t.partlyLowercase=this.state.sentenceCase);!this.matchToken("rbrace");)e+=this.consumeRule("Text");let r=i&&!this.state.sentenceCase&&this.state.partlyLowercase;return this.state.sentenceCase=i,this.consumeToken("rbrace"),r?m(e,"nocase"):e},MathString(){let t="";for(this.consumeToken("mathShift");!this.matchToken("mathShift");){if(this.matchToken("script")){let e=this.consumeToken("script").value,i=this.consumeRule("Text").split("");if(i.every(t=>t in a.mathScripts[e]))t+=i.map(t=>a.mathScripts[e][t]).join("");else{let r=a.mathScriptFormatting[e];t+=a.formatting[r].join(i.join(""))}continue}if(this.matchToken("command")){let e=this.token.value;if(e in a.mathScriptFormatting){this.consumeToken("command"),t+=m(this.consumeRule("BracketString"),a.mathScriptFormatting[e]);continue}}t+=this.consumeRule("Text")}return this.consumeToken("mathShift"),t},Text(){if(this.matchToken("lbrace"))return this.consumeRule("BracketString");if(this.matchToken("mathShift"))return this.consumeRule("MathString");if(this.matchToken("whitespace"))return this.consumeToken("whitespace").value;if(this.matchToken("commandBegin"))return this.consumeRule("EnclosedEnv");if(this.matchToken("command"))return this.consumeRule("Command");let t=this.consumeToken("text").value.replace(a.ligaturePattern,t=>a.ligatures[t]),e=this.state.afterPunctuation;if(this.state.afterPunctuation=/[?!.:]$/.test(t),!this.state.sentenceCase){var i;return(i=this.state).partlyLowercase||(i.partlyLowercase=t===t.toLowerCase()&&t!==t.toUpperCase()),t}let[r,...s]=t,n=s.join(""),o=n.toLowerCase();return n!==o?t:e?r+o:t.toLowerCase()},Command(){let t=this.consumeToken("command"),e=t.value;if(e in a.formattingEnvs)return m(this.consumeRule("Env"),a.formattingEnvs[e]);if(e in a.formattingCommands)return m(this.consumeRule("BracketString"),a.formattingCommands[e]);if(e in a.commands)return a.commands[e];if(e in a.mathCommands)return a.mathCommands[e];if(e in a.diacritics&&!this.matchEndOfFile()){let t=this.consumeRule("Text");return(t[0]+a.diacritics[e]).normalize("NFC")+t.slice(1)}else if(e in a.argumentCommands){let t=a.argumentCommands[e],i=[],r=t.length;for(;r-- >0;)this.consumeToken("whitespace",!0),i.push(this.consumeRule("BracketString"));return t(...i)}else if(/^[&%$#_{}]$/.test(e))return t.text.slice(1);else return t.text},Env(){let t="";for(;!this.matchEndOfFile()&&!this.matchToken("rbrace");)t+=this.consumeRule("Text");return t},EnclosedEnv(){this.consumeToken("commandBegin");let t=this.consumeRule("BracketString"),e="";for(;!this.matchToken("commandEnd");)e+=this.consumeRule("Text");let i=this.consumeToken("commandEnd"),r=this.consumeRule("BracketString");if(t!==r)throw SyntaxError(this.lexer.formatError(i,`environment started with "${t}", ended with "${r}"`));return m(e,a.formattingEnvs[t])},_(){for(;this.matchToken("whitespace");)this.consumeToken("whitespace")}},{sentenceCase:!1,partlyLowercase:!1,afterPunctuation:!0});function g(t){return a.sentenceCaseLanguages.includes(t.toLowerCase())}},21957,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parse=function(t){return s.default.parse.strict&&p(t,o.required.biblatex),(0,n.parse)(t.map(c))},i.parseBibtex=function(t){return s.default.parse.strict&&p(t,o.required.bibtex),(0,n.parseBibtex)(t.map(c))};var r,s=(r=t.r(11392))&&r.__esModule?r:{default:r},n=t.r(51895),a=t.r(98237),o=t.r(32255);function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function p(t,e){let i=[];for(let{type:r,label:s,properties:n}of t)if(r in e){let t=[];for(let i of e[r])Array.isArray(i)&&!i.some(t=>t in n)?t.push(i.join("/")):"string"!=typeof i||i in n||t.push(i);t.length&&i.push([s,`missing fields: ${t.join(", ")}`])}else i.push([s,`invalid type: "${r}"`]);if(i.length)throw RangeError(["Invalid entries:"].concat(i.map(([t,e])=>`  - ${t} has ${e}`)).join("\n"))}function c(t){let e={};for(let i in"language"in t.properties&&(e.language=(0,a.parse)(t.properties.language,"language")),t.properties){let r=t.properties[i];""!==r&&(e[i]=(0,a.parse)(r+"",i,e.language))}for(let i in t.annotations)for(let r in t.annotations[i])e[i+"+an:"+r]=(0,a.parseAnnotation)(t.annotations[i][r]);return u(u({},t),{},{properties:e})}},90625,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ref=i.formats=void 0;var r=t.r(45209),s=t.r(80943),n=t.r(21957);i.ref="@bibtex",i.formats={"@biblatex/text":{parse:r.parse,parseType:{dataType:"String",predicate:/@\s{0,5}[A-Za-z]{1,13}\s{0,5}\{\s{0,5}[^@{}"=,\\\s]{0,100}\s{0,5},[\s\S]*\}/}},"@biblatex/entry+object":{parse:t=>(0,n.parse)([t]),parseType:{dataType:"SimpleObject",propertyConstraint:{props:["type","label","properties"]}}},"@biblatex/entries+list":{parse:n.parse,parseType:{elementConstraint:"@biblatex/entry+object"}},"@bibtex/text":{parse:r.parse,outputs:"@bibtex/entries+list"},"@bibtex/entry+object":{parse:t=>(0,n.parseBibtex)([t])},"@bibtex/entries+list":{parse:n.parseBibtex},"@bibtxt/text":{parse:s.parse,parseType:{dataType:"String",predicate:/^\s*(\[(?!\s*[{[]).*?\]\s*(\n\s*[^[]((?!:)\S)+\s*:\s*.+?\s*)*\s*)+$/}}}},76639,t=>{"use strict";var e=t.i(54540);t.s(["util",0,e])},9587,t=>{"use strict";t.i(70391);var e=t.i(15167);function i(t){return(Array.isArray(t)?t:t.trim().split(/(?:\s+)/g)).map(t=>`https://doi.org/${t}`)}t.s(["default",()=>i,"parse",()=>i],49617);var r=t.i(49617),s=t.i(76639);let n={"journal-article":"article-journal","book-chapter":"chapter","posted-content":"manuscript","proceedings-article":"paper-conference",dissertation:"thesis"};function a(t,e){return"posted-content"===t&&"preprint"===e.subtype?"article":"posted-content"===t&&"other"===e.subtype&&"31795"===e.member?"post-weblog":n[t]||t}function o(t){let e={type:a(t.type,t)};return["submitted","issued","event-date","original-date","container","accessed"].forEach(e=>{let i=t[e];i&&i["date-parts"]&&"number"==typeof i["date-parts"][0]&&(i["date-parts"]=[i["date-parts"]])}),"dissertation"!==t.type||t.genre||(e.genre="Doctoral dissertation"),"posted-content"===t.type&&("preprint"===t.subtype||"31795"===t.member)&&Array.isArray(t.institution)&&t.institution[0]&&t.institution[0].name&&(e["container-title"]=t.institution[0].name),Object.assign({},t,e)}t.s(["default",()=>a,"parse",()=>a],68016),t.s(["default",()=>o,"parse",()=>o],86701);let l={checkContentType:!0,headers:{Accept:"application/vnd.citationstyles.csl+json"}};function u(t){return"[]"===t?{}:o(JSON.parse(t))}function p(t){return Promise.all([].concat(t).map(t=>s.util.fetchFileAsync(t,l).then(u)))}function c(t){return[].concat(t).map(t=>s.util.fetchFile(t,l)).map(u)}t.s(["parse",()=>c,"parseAsync",()=>p],87150);var h=t.i(87150),f=t.i(86701),m=t.i(68016);let d="@doi",g={id:r,api:h,json:f,type:m},b={"@doi/api":{parse:c,parseAsync:p,parseType:{dataType:"String",predicate:/^\s*(https?:\/\/(?:dx\.)?doi\.org\/(10.\d{4,9}\/[-._;()/:A-Z0-9[\]<>]+))\s*$/i,extends:"@else/url"}},"@doi/short-url":{parse:function(t){return t.replace(/^(\s*)/,"$1https://")},parseType:{dataType:"String",predicate:/^\s*((?:dx\.)?doi\.org\/(10.\d{4,9}\/[-._;()/:A-Z0-9[\]<>]+))\s*$/i}},"@doi/id":{parse:i,parseType:{dataType:"String",predicate:/^\s*(10.\d{4,9}\/[-._;()/:A-Z0-9[\]<>]+)\s*$/i}},"@doi/list+text":{parse:i,parseType:{dataType:"String",tokenList:/^10.\d{4,9}\/[-._;()/:A-Z0-9[\]<>]+$/i}},"@doi/list+object":{parse:i,parseType:{dataType:"Array",elementConstraint:"@doi/id"}},"@doi/type":{parse:a}};e.plugins.add(d,{input:b}),t.s(["formats",()=>b,"parsers",()=>g,"ref",()=>d],9587)},60475,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parse=function(){return[]}},80357,(t,e,i)=>{"use strict";var r=t.i(47167);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;let s={_output(t,e,i){this._log.push(e,i),this._levels.indexOf(t)<this._levels.indexOf(this.level)||this._console.log(e,...i)},_console:null,_log:[],_levels:["http","debug","unmapped","info","warn","error","silent"],level:"silent"};for(let t of s._levels)s[t]=(e,...i)=>s._output(t,e,i);"function"==typeof console.Console?s._console=new console.Console(r.default.stderr):s._console=console,i.default=s},99648,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.parse=function(t){if("string"!=typeof t)return JSON.parse(t);try{return JSON.parse(t)}catch(e){return s.default.debug("[plugin-common]","Invalid JSON, switching to experimental parser"),n.forEach(([e,i])=>{t=t.replace(e,i)}),JSON.parse(t)}};var r,s=(r=t.r(80357))&&r.__esModule?r:{default:r};let n=[[/((?:\[|:|,)\s*)'((?:\\'|[^'])*?[^\\])?'(?=\s*(?:\]|}|,))/g,'$1"$2"'],[/((?:(?:"|]|}|\/[gmiuys]|\.|(?:\d|\.|-)*\d)\s*,|{)\s*)(?:"([^":\n]+?)"|'([^":\n]+?)'|([^":\n]+?))(\s*):/g,'$1"$2$3$4"$5:']]},51297,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parse=function(t){return t.val()||t.text()||t.html()}},88170,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parse=function(t){return t.value||t.textContent}},83435,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ref=i.parsers=i.formats=void 0;var r=l(t.r(60475)),s=l(t.r(99648)),n=l(t.r(51297)),a=l(t.r(88170));function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(o=function(t){return t?i:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=o(e);if(i&&i.has(t))return i.get(t);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&({}).hasOwnProperty.call(t,n)){var a=s?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,i&&i.set(t,r),r}i.ref="@else",i.parsers={empty:r,json:s,jquery:n,html:a},i.formats={"@empty/text":{parse:r.parse,parseType:{dataType:"String",predicate:t=>""===t}},"@empty/whitespace+text":{parse:r.parse,parseType:{dataType:"String",predicate:/^\s+$/}},"@empty":{parse:r.parse,parseType:{dataType:"Primitive",predicate:t=>null==t}},"@else/json":{parse:s.parse,parseType:{dataType:"String",predicate:/^\s*(\{[\S\s]*\}|\[[\S\s]*\])\s*$/}},"@else/url":{parseType:{dataType:"String",predicate:/^https?:\/\/(([\w-]+\.)*[\w-]+)(:\d+)?(\/[^?/]*)*(\?[^#]*)?(#.*)?$/i}},"@else/jquery":{parse:n.parse,parseType:{dataType:"ComplexObject",predicate:t=>"undefined"!=typeof jQuery&&t instanceof jQuery}},"@else/html":{parse:a.parse,parseType:{dataType:"ComplexObject",predicate:t=>"undefined"!=typeof HTMLElement&&t instanceof HTMLElement}}}},20450,(t,e,i)=>{"use strict";function r(t){return e=>"string"==typeof e&&new RegExp(t.source,t.flags).test(e)}Object.defineProperty(i,"__esModule",{value:!0});let s=r(/^[1-9][0-9]*$/),n=r(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)$/),a=r(/^E[1-9][0-9]*$/),o=r(/^Q[1-9][0-9]*$/),l=r(/^P[1-9][0-9]*$/),u=r(/^L[1-9][0-9]*$/),p=r(/^L[1-9][0-9]*-F[1-9][0-9]*$/),c=r(/^L[1-9][0-9]*-S[1-9][0-9]*$/),h=r(/^M[1-9][0-9]*$/),f=r(/^((Q|P|L|M)[1-9][0-9]*|L[1-9][0-9]*-(F|S)[1-9][0-9]*)\$[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),m=r(/^[0-9a-f]{40}$/),d=r(/^\d+$/),g=r(/^(Q|P|L|M)[1-9][0-9]*$/);function b(t){return"string"==typeof t&&(t.startsWith("Item:")?o(t.substring(5)):t.startsWith("Lexeme:")?u(t.substring(7)):t.startsWith("Property:")?l(t.substring(9)):o(t))}var y=Object.freeze({__proto__:null,getEntityIdFromGuid:function(t){let e=t.split(/[$-]/);if(6===e.length)return e[0].toUpperCase();if(7===e.length)return e.slice(0,2).join("-").toUpperCase();throw Error(`invalid guid: ${t}`)},getImageUrl:function(t,e){let i=`https://commons.wikimedia.org/wiki/Special:FilePath/${t}`;return"number"==typeof e&&(i+=`?width=${e}`),i},getNumericId:function(t){if(!g(t))throw Error(`invalid entity id: ${t}`);return t.replace(/^(Q|P|L|M)/,"")},isEntityId:n,isEntityPageTitle:b,isEntitySchemaId:a,isFormId:p,isGuid:f,isHash:m,isItemId:o,isLexemeId:u,isMediaInfoId:h,isNonNestedEntityId:g,isNumericId:s,isPropertyClaimsId:function(t){if("string"!=typeof t)return!1;let[e,i]=t.split("#");return n(e)&&l(i)},isPropertyId:l,isRevisionId:d,isSenseId:c});function v(t){return"string"==typeof t?[t]:Array.isArray(t)?[...t]:[]}function _(t){return!!t&&"object"==typeof t&&!Array.isArray(t)}let k=t=>encodeURIComponent(t).replace(/[!'()*]/g,x);function w(t){return Array.from(new Set(t))}let x=t=>"%"+t.charCodeAt(0).toString(16);function E(t){if(1!==t.length||!_(t[0]))throw Error(`Since wikibase-sdk v9.0.0, this function expects arguments to be passed in an object
    See https://github.com/maxlath/wikibase-sdk/blob/main/CHANGELOG.md`)}function T(t,e){return"string"==typeof e&&t.includes(e)}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function A(t){return Object.entries(t)}function S(t){"object"==typeof t&&(t=t.time);let e=t[0],[i,r]=t.slice(1).split("T");return i=i.replace(/-00/g,"-01"),I(e,`${i}T${r}`)}let I=(t,e)=>{let i=e.split("-")[0];return"-"===t||i.length>4?j(t,e,i):new Date(e)},j=(t,e,i)=>new Date(4===i.length?`${t}00${e}`:5===i.length?`${t}0${e}`:t+e),C=t=>S(t).getTime(),N=t=>{try{return S(t).toISOString()}catch(s){let{sign:e,yearMonthDay:i,withinDay:r}=D(t);return`${e}${i}T${r}`}},P=t=>{try{return(t=>{if("object"==typeof t){let{time:e,precision:i}=t;t=9===i?e.replace("-01-01T","-00-00T"):10===i?e.replace("-01T","-00T"):e}return t.split("T")[0].replace(/^\+/,"").replace(/^(-?)0+/,"$1").replace(/-00$/,"").replace(/-00$/,"")})(t)}catch(r){let{sign:e,yearMonthDay:i}=D(t);return`${e}${i}`}};function D(t){let e=(t="string"==typeof t?t:t.time)[0],[i,r]=t.slice(1).split("T");if(!e||!i||!r)throw Error("TimeInput is invalid: "+JSON.stringify(t));return{sign:e,yearMonthDay:i=i.replace(/-00/g,"-01"),withinDay:r}}var R=Object.freeze({__proto__:null,wikibaseTimeToDateObject:S,wikibaseTimeToEpochTime:C,wikibaseTimeToISOString:N,wikibaseTimeToSimpleDay:P});function L(t){return t.value}function B(t,e){let i,{entityPrefix:r}=e,{value:s}=t;if(s.id)i=s.id;else{let t=F[s["entity-type"]];i=`${t}${s["numeric-id"]}`}return"string"==typeof r?`${r}:${i}`:i}let F={item:"Q","entity-schema":"E",lexeme:"L",property:"P",form:"F",sense:"S"},M={iso:N,epoch:C,"simple-day":P,none:t=>"string"==typeof t?t:t.time},U={commonsMedia:L,"external-id":L,"entity-schema":B,"geo-shape":L,"globe-coordinate":function(t,e){return e.keepRichValues?t.value:[t.value.latitude,t.value.longitude]},math:L,monolingualtext:function(t,e){return e.keepRichValues?t.value:t.value.text},"musical-notation":L,quantity:function(t,e){let{value:i}=t,r=parseFloat(i.amount);if(!e.keepRichValues)return r;{let t={amount:parseFloat(i.amount),unit:i.unit.replace(/^https?:\/\/.*\/entity\//,"")};return null!=i.upperBound&&(t.upperBound=parseFloat(i.upperBound)),null!=i.lowerBound&&(t.lowerBound=parseFloat(i.lowerBound)),t}},string:L,"tabular-data":L,time:function(t,e){let i;if(i="function"==typeof e.timeConverter?e.timeConverter(t.value):(function(t="iso"){let e=M[t];if(!e)throw Error(`invalid converter key: ${JSON.stringify(t).substring(0,100)}`);return e})(e.timeConverter)(t.value),!e.keepRichValues)return i;{let{timezone:e,before:r,after:s,precision:n,calendarmodel:a}=t.value;return{time:i,timezone:e,before:r,after:s,precision:n,calendarmodel:a}}},url:L,"wikibase-form":B,"wikibase-item":B,"wikibase-lexeme":B,"wikibase-property":B,"wikibase-sense":B},q={"musical notation":U["musical-notation"],globecoordinate:U["globe-coordinate"]};function $(t){let e={};for(let i of t){let{rank:t}=i;e[t]=e[t]||[],e[t].push(i)}return e.preferred||e.normal||[]}function z(t){return t.filter(t=>"deprecated"!==t.rank)}var G=Object.freeze({__proto__:null,nonDeprecatedPropertyClaims:z,truthyClaims:function(t){let e={};for(let[i,r]of A(t))e[i]=$(r);return e},truthyPropertyClaims:$});function X(t,e={}){let i,{keepTypes:r,keepSnaktypes:s,keepHashes:n}=te(e),{datatype:a,datavalue:o,snaktype:l,hash:u}=t;if(o)i=function(t,e,i){let r;if(!(r=t?U[t]||q[t]:U[e.type]))throw Error(`${t} claim parser isn't implemented. Please report to https://github.com/maxlath/wikibase-sdk/issues`);return r(e,i)}(a,o,e);else if("somevalue"===l)i=e.somevalueValue;else if("novalue"===l)i=e.novalueValue;else throw Error("no datavalue or special snaktype found");if(!r&&!s&&!n)return i;{let t={value:i};return r&&(t.type=a),s&&(t.snaktype=l),n&&(t.hash=u),t}}function V(t,e={}){let{keepQualifiers:i,keepReferences:r,keepIds:s,keepTypes:n,keepSnaktypes:a,keepRanks:o}=te(e),{mainsnak:l,rank:u}=t,p=X(l,e);if(!(i||r||s||n||a||o))return p;let c={value:p};return c=_(p)&&"value"in p?p:{value:p},o&&(c.rank=u),i&&(c.qualifiers=Y(t.qualifiers,e)),r&&(t.references=t.references||[],c.references=Q(t.references,e)),s&&(c.id=t.id),c}function W(t,e={}){let{propertyPrefix:i}=e,r={};for(let[s,n]of A(t))i&&(s=i+":"+s),r[s]=J(n,e);return r}function J(t,e={}){if(null==t||0===t.length)return[];let{keepNonTruthy:i,keepNonDeprecated:r}=te(e),{minTimePrecision:s}=e;r?t=z(t):i||(t=$(t));let n=[];for(let i of t)if(!ti(i.mainsnak,s)){let t=V(i,e);void 0!==t&&n.push(t)}return n[0]&&"object"!=typeof n[0]?w(n):n}function H(t={},e={}){let{propertyPrefix:i}=e,r={};for(let[s,n]of A(t))i&&(s=i+":"+s),r[s]=K(n,e);return r}function K(t,e={}){if(null==t||0===t.length)return[];let{minTimePrecision:i}=e,r=[];for(let s of t)if(!ti(s,i)){let t=X(s,e);void 0!==t&&r.push(t)}return r[0]&&"object"!=typeof r[0]?w(r):r}function Y(t,e={}){return H(t,e)}function Q(t,e={}){return t.map(t=>Z(t,e))}function Z(t,e={}){let i=H(t.snaks,e);return e.keepHashes?{snaks:i,hash:t.hash}:i}let tt=["keepQualifiers","keepReferences","keepIds","keepHashes","keepTypes","keepSnaktypes","keepRanks","keepRichValues"],te=(t={})=>{if(t.keepAll)for(let e of tt)null==t[e]&&(t[e]=!0);return t};function ti(t,e){if(null==e||"time"!==t.datatype||"value"!==t.snaktype)return!1;let{value:i}=t.datavalue;return i.precision<e}function tr(t){let e={};for(let[i,r]of A(t))e[i]=null!=r?r.value:null;return e}function ts(t){return tr(t)}function tn(t){return tr(t)}function ta(t){let e={};for(let[i,r]of A(t))e[i]=null!=r?r.map(t=>t.value):[];return e}function to(t){return tr(t)}function tl(t){return tr(t)}function tu(t){return tr(t)}let tp=(t,e={})=>{let{id:i,representations:r,grammaticalFeatures:s,claims:n}=t;if(!p(i))throw Error("invalid form object");return{id:i,representations:tl(r),grammaticalFeatures:s,claims:W(n,e)}},tc=(t,e={})=>t.map(t=>tp(t,e)),th=(t,e={})=>{let{id:i,glosses:r,claims:s}=t;if(!c(i))throw Error("invalid sense object");return{id:i,glosses:tu(r),claims:W(s,e)}};function tf(t,e={}){return t.map(t=>th(t,e))}let tm={commonswiki:"commons",foundationwiki:"foundation",mediawikiwiki:"mediawiki",metawiki:"meta",outreachwiki:"outreach",sourceswiki:"sources",specieswiki:"species",wikidatawiki:"wikidata",wikifunctionswiki:"wikifunctions",wikimaniawiki:"wikimania"},td=["aawiki","aawikibooks","aawiktionary","abwiki","abwiktionary","acewiki","adywiki","afwiki","afwikibooks","afwikiquote","afwiktionary","akwiki","akwikibooks","akwiktionary","alswiki","alswikibooks","alswikiquote","alswiktionary","altwiki","amiwiki","amwiki","amwikiquote","amwiktionary","angwiki","angwikibooks","angwikiquote","angwikisource","angwiktionary","anpwiki","anwiki","anwiktionary","arcwiki","arwiki","arwikibooks","arwikinews","arwikiquote","arwikisource","arwikiversity","arwiktionary","arywiki","arzwiki","astwiki","astwikibooks","astwikiquote","astwiktionary","aswiki","aswikibooks","aswikiquote","aswikisource","aswiktionary","atjwiki","avkwiki","avwiki","avwiktionary","awawiki","aywiki","aywikibooks","aywiktionary","azbwiki","azwiki","azwikibooks","azwikiquote","azwikisource","azwiktionary","banwiki","banwikisource","barwiki","bat_smgwiki","bawiki","bawikibooks","bbcwiki","bclwiki","bclwikiquote","bclwiktionary","bdrwiki","be_x_oldwiki","bewiki","bewikibooks","bewikiquote","bewikisource","bewiktionary","bewwiki","bgwiki","bgwikibooks","bgwikinews","bgwikiquote","bgwikisource","bgwiktionary","bhwiki","bhwiktionary","biwiki","biwikibooks","biwiktionary","bjnwiki","bjnwikiquote","bjnwiktionary","blkwiki","blkwiktionary","bmwiki","bmwikibooks","bmwikiquote","bmwiktionary","bnwiki","bnwikibooks","bnwikiquote","bnwikisource","bnwikivoyage","bnwiktionary","bowiki","bowikibooks","bowiktionary","bpywiki","brwiki","brwikiquote","brwikisource","brwiktionary","bswiki","bswikibooks","bswikinews","bswikiquote","bswikisource","bswiktionary","btmwiki","btmwiktionary","bugwiki","bxrwiki","cawiki","cawikibooks","cawikinews","cawikiquote","cawikisource","cawiktionary","cbk_zamwiki","cdowiki","cebwiki","cewiki","chowiki","chrwiki","chrwiktionary","chwiki","chwikibooks","chwiktionary","chywiki","ckbwiki","ckbwiktionary","commonswiki","cowiki","cowikibooks","cowikiquote","cowiktionary","crhwiki","crwiki","crwikiquote","crwiktionary","csbwiki","csbwiktionary","cswiki","cswikibooks","cswikinews","cswikiquote","cswikisource","cswikiversity","cswikivoyage","cswiktionary","cuwiki","cvwiki","cvwikibooks","cywiki","cywikibooks","cywikiquote","cywikisource","cywiktionary","dagwiki","dawiki","dawikibooks","dawikiquote","dawikisource","dawiktionary","dewiki","dewikibooks","dewikinews","dewikiquote","dewikisource","dewikiversity","dewikivoyage","dewiktionary","dgawiki","dinwiki","diqwiki","diqwiktionary","dsbwiki","dtpwiki","dtywiki","dvwiki","dvwiktionary","dzwiki","dzwiktionary","eewiki","elwiki","elwikibooks","elwikinews","elwikiquote","elwikisource","elwikiversity","elwikivoyage","elwiktionary","emlwiki","enwiki","enwikibooks","enwikinews","enwikiquote","enwikisource","enwikiversity","enwikivoyage","enwiktionary","eowiki","eowikibooks","eowikinews","eowikiquote","eowikisource","eowikivoyage","eowiktionary","eswiki","eswikibooks","eswikinews","eswikiquote","eswikisource","eswikiversity","eswikivoyage","eswiktionary","etwiki","etwikibooks","etwikiquote","etwikisource","etwiktionary","euwiki","euwikibooks","euwikiquote","euwikisource","euwiktionary","extwiki","fatwiki","fawiki","fawikibooks","fawikinews","fawikiquote","fawikisource","fawikivoyage","fawiktionary","ffwiki","fiu_vrowiki","fiwiki","fiwikibooks","fiwikinews","fiwikiquote","fiwikisource","fiwikiversity","fiwikivoyage","fiwiktionary","fjwiki","fjwiktionary","fonwiki","foundationwiki","fowiki","fowikisource","fowiktionary","frpwiki","frrwiki","frwiki","frwikibooks","frwikinews","frwikiquote","frwikisource","frwikiversity","frwikivoyage","frwiktionary","furwiki","fywiki","fywikibooks","fywiktionary","gagwiki","ganwiki","gawiki","gawikibooks","gawikiquote","gawiktionary","gcrwiki","gdwiki","gdwiktionary","glkwiki","glwiki","glwikibooks","glwikiquote","glwikisource","glwiktionary","gnwiki","gnwikibooks","gnwiktionary","gomwiki","gomwiktionary","gorwiki","gorwikiquote","gorwiktionary","gotwiki","gotwikibooks","gpewiki","gucwiki","gurwiki","guwiki","guwikibooks","guwikiquote","guwikisource","guwiktionary","guwwiki","guwwikinews","guwwikiquote","guwwiktionary","gvwiki","gvwiktionary","hakwiki","hawiki","hawiktionary","hawwiki","hewiki","hewikibooks","hewikinews","hewikiquote","hewikisource","hewikivoyage","hewiktionary","hifwiki","hifwiktionary","hiwiki","hiwikibooks","hiwikiquote","hiwikisource","hiwikiversity","hiwikivoyage","hiwiktionary","howiki","hrwiki","hrwikibooks","hrwikiquote","hrwikisource","hrwiktionary","hsbwiki","hsbwiktionary","htwiki","htwikisource","huwiki","huwikibooks","huwikinews","huwikiquote","huwikisource","huwiktionary","hywiki","hywikibooks","hywikiquote","hywikisource","hywiktionary","hywwiki","hzwiki","iawiki","iawikibooks","iawiktionary","idwiki","idwikibooks","idwikiquote","idwikisource","idwiktionary","iewiki","iewikibooks","iewiktionary","iglwiki","igwiki","igwikiquote","igwiktionary","iiwiki","ikwiki","ikwiktionary","ilowiki","inhwiki","iowiki","iowiktionary","iswiki","iswikibooks","iswikiquote","iswikisource","iswiktionary","itwiki","itwikibooks","itwikinews","itwikiquote","itwikisource","itwikiversity","itwikivoyage","itwiktionary","iuwiki","iuwiktionary","jamwiki","jawiki","jawikibooks","jawikinews","jawikiquote","jawikisource","jawikiversity","jawikivoyage","jawiktionary","jbowiki","jbowiktionary","jvwiki","jvwikisource","jvwiktionary","kaawiki","kaawiktionary","kabwiki","kawiki","kawikibooks","kawikiquote","kawikisource","kawiktionary","kbdwiki","kbdwiktionary","kbpwiki","kcgwiki","kcgwiktionary","kgewiki","kgwiki","kiwiki","kjwiki","kkwiki","kkwikibooks","kkwikiquote","kkwiktionary","klwiki","klwiktionary","kmwiki","kmwikibooks","kmwiktionary","knwiki","knwikibooks","knwikiquote","knwikisource","knwiktionary","koiwiki","kowiki","kowikibooks","kowikinews","kowikiquote","kowikisource","kowikiversity","kowiktionary","krcwiki","krwiki","krwikiquote","kshwiki","kswiki","kswikibooks","kswikiquote","kswiktionary","kuswiki","kuwiki","kuwikibooks","kuwikiquote","kuwiktionary","kvwiki","kwwiki","kwwikiquote","kwwiktionary","kywiki","kywikibooks","kywikiquote","kywiktionary","ladwiki","lawiki","lawikibooks","lawikiquote","lawikisource","lawiktionary","lbewiki","lbwiki","lbwikibooks","lbwikiquote","lbwiktionary","lezwiki","lfnwiki","lgwiki","lijwiki","lijwikisource","liwiki","liwikibooks","liwikinews","liwikiquote","liwikisource","liwiktionary","lldwiki","lmowiki","lmowiktionary","lnwiki","lnwikibooks","lnwiktionary","lowiki","lowiktionary","lrcwiki","ltgwiki","ltwiki","ltwikibooks","ltwikiquote","ltwikisource","ltwiktionary","lvwiki","lvwikibooks","lvwiktionary","madwiki","madwiktionary","maiwiki","map_bmswiki","mdfwiki","mediawikiwiki","metawiki","mgwiki","mgwikibooks","mgwiktionary","mhrwiki","mhwiki","mhwiktionary","minwiki","minwiktionary","miwiki","miwikibooks","miwiktionary","mkwiki","mkwikibooks","mkwikisource","mkwiktionary","mlwiki","mlwikibooks","mlwikiquote","mlwikisource","mlwiktionary","mniwiki","mniwiktionary","mnwiki","mnwikibooks","mnwiktionary","mnwwiki","mnwwiktionary","moswiki","mowiki","mowiktionary","mrjwiki","mrwiki","mrwikibooks","mrwikiquote","mrwikisource","mrwiktionary","mswiki","mswikibooks","mswikisource","mswiktionary","mtwiki","mtwiktionary","muswiki","mwlwiki","myvwiki","mywiki","mywikibooks","mywikisource","mywiktionary","mznwiki","nahwiki","nahwikibooks","nahwiktionary","napwiki","napwikisource","nawiki","nawikibooks","nawikiquote","nawiktionary","nds_nlwiki","ndswiki","ndswikibooks","ndswikiquote","ndswiktionary","newiki","newikibooks","newiktionary","newwiki","ngwiki","niawiki","niawiktionary","nlwiki","nlwikibooks","nlwikinews","nlwikiquote","nlwikisource","nlwikivoyage","nlwiktionary","nnwiki","nnwikiquote","nnwiktionary","novwiki","nowiki","nowikibooks","nowikinews","nowikiquote","nowikisource","nowiktionary","nqowiki","nrmwiki","nsowiki","nvwiki","nywiki","ocwiki","ocwikibooks","ocwiktionary","olowiki","omwiki","omwiktionary","orwiki","orwikisource","orwiktionary","oswiki","outreachwiki","pagwiki","pamwiki","papwiki","pawiki","pawikibooks","pawikisource","pawiktionary","pcdwiki","pcmwiki","pdcwiki","pflwiki","pihwiki","piwiki","piwiktionary","plwiki","plwikibooks","plwikinews","plwikiquote","plwikisource","plwikivoyage","plwiktionary","pmswiki","pmswikisource","pnbwiki","pnbwiktionary","pntwiki","pswiki","pswikibooks","pswikivoyage","pswiktionary","ptwiki","ptwikibooks","ptwikinews","ptwikiquote","ptwikisource","ptwikiversity","ptwikivoyage","ptwiktionary","pwnwiki","quwiki","quwikibooks","quwikiquote","quwiktionary","rmwiki","rmwikibooks","rmwiktionary","rmywiki","rnwiki","rnwiktionary","roa_rupwiki","roa_rupwiktionary","roa_tarawiki","rowiki","rowikibooks","rowikinews","rowikiquote","rowikisource","rowikivoyage","rowiktionary","ruewiki","ruwiki","ruwikibooks","ruwikinews","ruwikiquote","ruwikisource","ruwikiversity","ruwikivoyage","ruwiktionary","rwwiki","rwwiktionary","sahwiki","sahwikiquote","sahwikisource","satwiki","sawiki","sawikibooks","sawikiquote","sawikisource","sawiktionary","scnwiki","scnwiktionary","scowiki","scwiki","scwiktionary","sdwiki","sdwikinews","sdwiktionary","sewiki","sewikibooks","sgwiki","sgwiktionary","shiwiki","shnwiki","shnwikibooks","shnwikinews","shnwikivoyage","shnwiktionary","shwiki","shwiktionary","shywiktionary","simplewiki","simplewikibooks","simplewikiquote","simplewiktionary","siwiki","siwikibooks","siwiktionary","skrwiki","skrwiktionary","skwiki","skwikibooks","skwikiquote","skwikisource","skwiktionary","slwiki","slwikibooks","slwikiquote","slwikisource","slwikiversity","slwiktionary","smnwiki","smwiki","smwiktionary","snwiki","snwiktionary","sourceswiki","sowiki","sowiktionary","specieswiki","sqwiki","sqwikibooks","sqwikinews","sqwikiquote","sqwiktionary","srnwiki","srwiki","srwikibooks","srwikinews","srwikiquote","srwikisource","srwiktionary","sswiki","sswiktionary","stqwiki","stwiki","stwiktionary","suwiki","suwikibooks","suwikiquote","suwikisource","suwiktionary","svwiki","svwikibooks","svwikinews","svwikiquote","svwikisource","svwikiversity","svwikivoyage","svwiktionary","swwiki","swwikibooks","swwiktionary","szlwiki","szywiki","tawiki","tawikibooks","tawikinews","tawikiquote","tawikisource","tawiktionary","taywiki","tcywiki","tetwiki","tewiki","tewikibooks","tewikiquote","tewikisource","tewiktionary","tgwiki","tgwikibooks","tgwiktionary","thwiki","thwikibooks","thwikinews","thwikiquote","thwikisource","thwiktionary","tiwiki","tiwiktionary","tkwiki","tkwikibooks","tkwikiquote","tkwiktionary","tlwiki","tlwikibooks","tlwikiquote","tlwiktionary","tlywiki","tnwiki","tnwiktionary","towiki","towiktionary","tpiwiki","tpiwiktionary","trvwiki","trwiki","trwikibooks","trwikinews","trwikiquote","trwikisource","trwikivoyage","trwiktionary","tswiki","tswiktionary","ttwiki","ttwikibooks","ttwikiquote","ttwiktionary","tumwiki","twwiki","twwiktionary","tyvwiki","tywiki","udmwiki","ugwiki","ugwikibooks","ugwikiquote","ugwiktionary","ukwiki","ukwikibooks","ukwikinews","ukwikiquote","ukwikisource","ukwikivoyage","ukwiktionary","urwiki","urwikibooks","urwikiquote","urwiktionary","uzwiki","uzwikibooks","uzwikiquote","uzwiktionary","vecwiki","vecwikisource","vecwiktionary","vepwiki","vewiki","viwiki","viwikibooks","viwikiquote","viwikisource","viwikivoyage","viwiktionary","vlswiki","vowiki","vowikibooks","vowikiquote","vowiktionary","warwiki","wawiki","wawikibooks","wawikisource","wawiktionary","wikidatawiki","wikifunctionswiki","wikimaniawiki","wowiki","wowikiquote","wowiktionary","wuuwiki","xalwiki","xhwiki","xhwikibooks","xhwiktionary","xmfwiki","yiwiki","yiwikisource","yiwiktionary","yowiki","yowikibooks","yowiktionary","yuewiktionary","zawiki","zawikibooks","zawikiquote","zawiktionary","zeawiki","zghwiki","zh_classicalwiki","zh_min_nanwiki","zh_min_nanwikibooks","zh_min_nanwikiquote","zh_min_nanwikisource","zh_min_nanwiktionary","zh_yuewiki","zhwiki","zhwikibooks","zhwikinews","zhwikiquote","zhwikisource","zhwikiversity","zhwikivoyage","zhwiktionary","zuwiki","zuwikibooks","zuwiktionary"];function tg({site:t,title:e}){if(E(arguments),!t)throw Error("missing a site");if(!e)throw Error("missing a title");if(O(ty,t))return ty[t](e);let i=t.replace(/wiki$/,"");if(O(ty,i))return ty[i](e);let{lang:r,project:s}=tk(t);return e=k(e.replace(/\s/g,"_")),`https://${r}.${s}.org/wiki/${e}`}let tb=t=>e=>`https://${t}.wikimedia.org/wiki/${e}`,ty={commons:tb("commons"),foundation:tb("foundation"),mediawiki:t=>`https://www.mediawiki.org/wiki/${t}`,meta:tb("meta"),outreach:tb("outreach"),sources:t=>`https://wikisource.org/wiki/${t}`,species:tb("species"),wikidata:t=>{let e=tv[t[0]],i=e?`${e}:${t}`:t;return i=i.replace("-","#"),`https://www.wikidata.org/wiki/${i}`},wikifunctions:tb("wikifunctions"),wikimania:tb("wikimania")},tv={E:"EntitySchema",L:"Lexeme",P:"Property"},t_=/^https?:\/\/([\w-]{2,10})\.(\w+)\.org\/\w+\/(.*)/;function tk(t){if(t.startsWith("http")){let e=t.match(t_);if(!e)throw Error(`invalid sitelink url: ${t}`);let[i,r,s]=e.slice(1);if(s=decodeURIComponent(s),"commons"===i)return{lang:"en",project:"commons",key:"commons",title:s,url:t};if(!T(tE,r))throw Error(`project is unknown: ${r}`);if("www"===i)return{lang:"en",project:r,key:r,title:s,url:t};let n=i.replace(/-/g,"_"),a=`${n}${r}`.replace("wikipedia","wiki");return{lang:i,project:r,key:a,title:s,url:t}}{if(O(tm,t))return{lang:"en",project:tm[t],key:t};if(!T(td,t))throw Error(`site not found: ${t}. Updating wikibase-sdk to a more recent version might fix the issue.`);let[e,i,r]=t.split("wik");if(null!=r)throw Error(`invalid sitelink key: ${t}`);e=e.replace(/_/g,"-");let s=tx[i];if(!s)throw Error(`sitelink project not found: ${s}`);return{lang:e,project:s,key:t}}}let tw=t=>T(td,t),tx={i:"wikipedia",isource:"wikisource",iquote:"wikiquote",tionary:"wiktionary",ibooks:"wikibooks",iversity:"wikiversity",ivoyage:"wikivoyage",inews:"wikinews"},tE=[...Object.values(tx),...Object.values(tm)];var tT=Object.freeze({__proto__:null,getSitelinkData:tk,getSitelinkUrl:tg,isSite:tw,isSitelinkKey:tw});function tO(t,e={}){let{addUrl:i,keepBadges:r,keepAll:s}=e;return r=r||s,Object.keys(t).reduce(tA({sitelinks:t,addUrl:i,keepBadges:r}),{})}let tA=({sitelinks:t,addUrl:e,keepBadges:i})=>(r,s)=>{if(null==t[s])return r[s]=t[s],r;let{title:n,badges:a}=t[s];return e||i?(r[s]={title:n},e&&(r[s].url=tg({site:s,title:n})),i&&(r[s].badges=a)):r[s]=n,r},tS={labels:ts,descriptions:tn,aliases:ta,claims:W,statements:W,sitelinks:tO,lemmas:to,forms:tc,senses:tf},tI=(t,e={})=>{let{type:i}=t;if(!i)throw Error("missing entity type");let r={id:t.id,type:i,modified:t.modified};return"item"===i?(tj(t,r,"labels"),tj(t,r,"descriptions"),tj(t,r,"aliases"),tj(t,r,"claims",e),tj(t,r,"sitelinks",e)):"property"===i?(r.datatype=t.datatype,tj(t,r,"labels"),tj(t,r,"descriptions"),tj(t,r,"aliases"),tj(t,r,"claims",e)):"lexeme"===i?(tj(t,r,"lemmas"),r.lexicalCategory=t.lexicalCategory,r.language=t.language,tj(t,r,"claims",e),tj(t,r,"forms",e),tj(t,r,"senses",e)):"mediainfo"===i&&(tj(t,r,"labels"),tj(t,r,"descriptions"),tj(t,r,"statements",e)),r},tj=(t,e,i,r)=>{null!=t[i]&&(e[i]=tS[i](t[i],r))},tC=(t,e={})=>{t.entities&&(t=t.entities);let{entityPrefix:i}=e,r={};for(let[s,n]of Object.entries(t))r[i?`${i}:${s}`:s]=tI(n,e);return r};var tN=Object.freeze({__proto__:null,entities:function(t){let{entities:e}=t=t.body||t;return tC(e)},pagesTitles:function(t){return(t=t.body||t).query.search.map(t=>t.title)}});function tP(t){if(!t||"bnode"===t.type)return null;let{value:e}=t;if("uri"===t.type){var i,r;let t;return(i=e).match(/http.*\/entity\/statement\//)?(t=(r=i.replace(/^https?:\/\/.*\/entity\/statement\//,"")).split("-"))[0]+"$"+t.slice(1).join("-"):i.replace(/^https?:\/\/.*\/entity\//,"").replace(/^https?:\/\/.*\/prop\/direct\//,"")}let s=(t.datatype||"").replace("http://www.w3.org/2001/XMLSchema#","");return"decimal"===s||"integer"===s||"float"===s||"double"===s?parseFloat(e):"boolean"===s?"true"===e:e}var tD=Object.freeze({__proto__:null,aliases:ta,claim:V,claims:W,descriptions:tn,entities:tC,entity:tI,form:tp,forms:tc,glosses:tu,labels:ts,lemmas:to,propertyClaims:J,propertyQualifiers:function(t,e={}){return K(t,e)},qualifier:function(t,e={}){return X(t,e)},qualifiers:Y,reference:Z,references:Q,representations:tl,sense:th,senses:tf,sitelinks:tO,snak:X,sparqlResults:function(t){var e;let i,r,s,n;"string"==typeof t&&(t=JSON.parse(t));let{vars:a}=t.head,o=t.results.bindings,{richVars:l,associatedVars:u,standaloneVars:p}=(i=(i=(e=a).filter(t=>{let i=RegExp(`^${t}[A-Z]\\w+`);return e.some(t=>i.test(t))})).filter(t=>!i.some(e=>t!==e&&t.startsWith(e))),r=RegExp(`^(${i.join("|")})[A-Z]`),s=e.filter(t=>r.test(t)),n=e.filter(t=>!i.includes(t)&&!r.test(t)),{richVars:i,associatedVars:s,standaloneVars:n});return o.map(t=>(function(t,e,i,r){let s={};for(let i of t){let t={},n=tP(r[i]);for(let s of(null!=n&&(t.value=n),e))s.startsWith(i)&&function(t,e,i,r){let s=i.split(e)[1];s="altLabel"===(s=s[0].toLowerCase()+s.slice(1))?"aliases":s;let n=t[i];null!=n&&(r[s]=n.value)}(r,i,s,t);Object.keys(t).length>0&&(s[i]=t)}for(let t of i){let e=tP(r[t]);null!=e&&(s[t]=e)}return s})(l,u,p,t))}});let tR=/^\d+[|\d]*$/;function tL(t,e){return function(i){if(!e(i))throw Error(`invalid ${t}: ${i} (type: ${function(t){let e=typeof t;if("object"===e){if(null===t)return"null";if(t instanceof Array)return"array";if(t instanceof Promise)return"promise"}return"number"===e&&Number.isNaN(t)?"NaN":e}(i)})`)}}let tB=tL("entity id",n),tF=tL("property id",l),tM=tL("entity page title",b),tU=tL("revision id",d);function tq(t){return function({ids:e,languages:i,props:r,format:s="json",redirects:n}){if(E(arguments),!(e&&e.length>0))throw Error("no id provided");(e=v(e)).forEach(t=>tB(t)),e.length>50&&console.warn(`getEntities accepts 50 ids max to match Wikidata API limitations:
      this request won't get all the desired entities.
      You can use getManyEntities instead to generate several request urls
      to work around this limitation`);let a={action:"wbgetentities",ids:e.join("|"),format:s};return!1===n&&(a.redirects="no"),i&&(a.languages=(i=v(i)).join("|")),r&&r.length>0&&(a.props=v(r).join("|")),t(a)}}function t$(t){return T(td,t)?t:t.replace(/-/g,"_")+"wiki"}function tz(t){return function(e){let i=k(e);return`${t}?format=json&query=${i}`}}let tG=t=>(o(t)?t=`wd:${t}`:"string"==typeof t&&(t=`'${t}'`),t),tX=(t,e,i)=>`?subject ${t} ${e} .
    ${i}`,tV=(t,e,i)=>`?subject ${t} ?value .
    FILTER (lcase(?value) = ${e.toLowerCase()})
    ${i}`,tW=t=>"wdt:"+t,tJ=t=>"number"==typeof t&&t<tH?t:Math.trunc(new Date(t).getTime()/1e3),tH=new Date("2000-01-01").getTime(),tK=["item","property","lexeme","form","sense","entity-schema"],tY="undefined"!=typeof location&&"undefined"!=typeof document,tQ=`Tip: if you just want to access functions that don't need an instance or a sparqlEndpoint,
those are also exposed directly on the module object. Exemple:
import { isItemId, simplify } from 'wikibase-sdk'`,tZ=Object.assign(Object.assign(Object.assign(Object.assign({simplify:tD,parse:tN},y),tT),G),R),t0=(t,e)=>{if(!("string"==typeof e&&e.startsWith("http")))throw Error(`invalid ${t}: ${e}`)},t1=t=>e=>()=>{throw Error(`${e} requires ${t} to be set at initialization`)},t2=t1("a sparqlEndpoint"),t3=t1("an instance"),t4=function(t){let e,i,r,s;if(!_(t))throw Error("invalid config");let{instance:n,sparqlEndpoint:a}=t,{wgScriptPath:o="w"}=t;if(o=o.replace(/^\//,""),!(n||a))throw Error(`one of instance or sparqlEndpoint should be set at initialization.
${tQ}`);if(n){var l,u;let t;t0("instance",n),i=n.replace(/\/$/,"").replace(`/${o}/api.php`,"");let s=(l=r=`${i}/${o}/api.php`,t=>(tY&&(t=Object.assign(Object.assign({},t),{origin:"*"})),l+"?"+new URLSearchParams(Object.entries(t).filter(([,t])=>null!=t).map(([t,e])=>[t,String(e)])).toString()));e={searchEntities:function({search:t,language:e="en",uselang:i,limit:r="20",continue:n="0",format:a="json",type:o="item"}){if(E(arguments),i=i||e,!(t&&t.length>0))throw Error("search can't be empty");if(!T(tK,o))throw Error(`invalid type: ${o}`);return s({action:"wbsearchentities",search:t,language:e,limit:r,continue:n,format:a,uselang:i,type:o})},cirrusSearchPages:function(t){let e;for(let[e,i]of(E(arguments),Object.entries(t)))if(e.startsWith("sr")){let r=e.replace(/^sr/,"");if(null!=t[r])throw Error(`${r} and ${e} are the same`);t[r]=i}let{search:i,haswbstatement:r,format:n="json",limit:a,offset:o,profile:l,sort:u}=t,{namespace:p,prop:c}=t;if(!(i||r))throw Error('missing "search" or "haswbstatement" parameter');let h="";if(i&&(h+=i),r)for(let t of r instanceof Array?r:[r])"-"===t[0]?h+=` -haswbstatement:${t.slice(1)}`:h+=` haswbstatement:${t}`;if(null!=a&&("number"!=typeof a||a<1))throw Error(`invalid limit: ${a}`);if(null!=o&&("number"!=typeof o||o<0))throw Error(`invalid offset: ${o}`);if(p instanceof Array?p=p.join("|"):"number"==typeof p&&(p=p.toString()),p&&!tR.test(p))throw Error(`invalid namespace: ${p}`);if(null!=l&&"string"!=typeof l)throw Error(`invalid profile: ${l} (${typeof l}, expected string)`);if(null!=u&&"string"!=typeof u)throw Error(`invalid sort: ${u} (${typeof u}, expected string)`);if(null!=c){if(c instanceof Array&&(c=c.join("|")),"string"!=typeof c)throw Error(`invalid prop: ${c} (${typeof c}, expected string)`);e=c.toString()}return s({action:"query",list:"search",srsearch:h.trim(),format:n,srnamespace:p,srlimit:a,sroffset:o,srqiprofile:l,srsort:u,srprop:e})},getEntities:tq(s),getManyEntities:(t=tq(s),function({ids:e,languages:i,props:r,format:s,redirects:n}){if(E(arguments),!(e instanceof Array))throw Error("getManyEntities expects an array of ids");return(function(t){let e=[];for(;t.length>0;){let i=t.slice(0,50);t=t.slice(50),e.push(i)}return e})(e).map(e=>t({ids:e,languages:i,props:r,format:s,redirects:n}))}),getRevisions:function({ids:t,format:e,limit:i,start:r,end:n,prop:a,user:o,excludeuser:l,tag:u}){E(arguments),(t=v(t)).forEach(t=>tM(t));let p=1===t.length,c={action:"query",prop:"revisions"};return c.titles=t.join("|"),c.format=e||"json",p&&(c.rvlimit=i||"max"),p&&r&&(c.rvstart=tJ(r)),p&&n&&(c.rvend=tJ(n)),a?c.rvprop=v(a).join("|"):c.rvprop="ids|flags|timestamp|user|userid|size|slotsize|sha1|slotsha1|contentmodel|comment|parsedcomment|content|tags|roles|oresscores",c.rvslots="*",o&&(c.rvuser=o),l&&(c.rvexcludeuser=l),u&&(c.rvtag=u),s(c)},getEntityRevision:(u=o,function({id:t,revision:e}){return E(arguments),tB(t),tU(e),`${n}/${u}/index.php?title=Special:EntityData/${t}.json&revision=${e}`}),getEntitiesFromSitelinks:function({titles:t,sites:e,languages:i,props:r,format:n="json",redirects:a}){if(E(arguments),!(t&&t.length>0))throw Error("no titles provided");e&&e.length>0||(e=["enwiki"]),t=v(t),e=v(e).map(t$),r=v(r);let o={action:"wbgetentities",titles:t.join("|"),sites:e.join("|"),format:n};return 1===e.length&&1===t.length&&(o.normalize=!0),i&&(o.languages=(i=v(i)).join("|")),r.length>0&&(o.props=r.join("|")),!1===a&&(o.redirects="no"),s(o)}}}else e={searchEntities:t3("searchEntities"),cirrusSearchPages:t3("cirrusSearchPages"),getEntities:t3("getEntities"),getManyEntities:t3("getManyEntities"),getRevisions:t3("getRevisions"),getEntityRevision:t3("getEntityRevision"),getEntitiesFromSitelinks:t3("getEntitiesFromSitelinks")};if(a){let t;t0("sparqlEndpoint",a),s={sparqlQuery:tz(a),getReverseClaims:(t=tz(a),function(e){let i,r,s,n,{properties:a}=e,{values:o,limit:l,caseInsensitive:u,keepProperties:p}=e;(a=v(a)).forEach(t=>tF(t));let c=(i=o,r=u?tV:tX,s=a,n=p?"":"FILTER NOT EXISTS { ?subject rdf:type wikibase:Property . } ",(s=s.map(tW).join("|"),i instanceof Array)?"{ "+i.map(tG).map(t=>r(s,t,n)).join("} UNION {")+" }":r(s,tG(i),n)),h=`SELECT DISTINCT ?subject WHERE { ${c} }`;return l&&(h+=` LIMIT ${l}`),t(h)})}}else s={sparqlQuery:t2("sparqlQuery"),getReverseClaims:t2("getReverseClaims")};return Object.assign(Object.assign(Object.assign({instance:{root:i,apiEndpoint:r}},tZ),e),s)}({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"});i.default=t4,i.wdk=t4},10384,t=>{"use strict";var e=t.i(6914);t.s(["logger",()=>e.default])},41766,t=>{"use strict";t.i(70391);var e=t.i(15167),i=t.i(20450),r=t.i(39676);function s(t,e){let s=Array.isArray(t)?t:[t];for(let t of s)if(!/^Q[1-9][0-9]*$/.test(t))throw Error(`Entity "${t}" not found`);let n=i.default.getManyEntities({ids:s,languages:e||r.default.langs});return Array.isArray(n)?n:[n]}t.s(["default",()=>s,"parse",()=>s],78456);var n=t.i(78456),a=t.i(10384);let{fetchFile:o,fetchFileAsync:l}=t.i(76639).util;function u(t){return[].concat(t).map(o)}function p(t){return Promise.all([].concat(t).map(l))}function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}t.s(["parse",()=>u,"parseAsync",()=>p],15406);let f={keepQualifiers:!0,timeConverter:"simple-day"},m={P17:null},d={P740:m,P159:m},g={P50:null,P57:null,P58:null,P86:null,P98:null,P110:null,P162:null,P170:null,P175:null,P178:null,P371:null,P488:null,P655:null,P664:null,P1431:null,P1640:null,P1817:null,P2438:null,P5030:null,P921:{P50:null},P407:null,P364:null,P123:d,P629:{P50:null,P123:d},P437:null,P186:null,P179:{P98:null},P1433:{P4745:{P276:m}},P361:{P50:null}};function b(t,e){let i=[];if(!e)return i;for(let s in t._needed=Object.assign(t._needed||{},e),t.claims)if(s in e){for(let e of t.claims[s])if(e.value){var r;i.push(null!=(r=e.value.id)?r:e.value)}}return i}function y(t,e){if(!e){let e=[];for(let i in t)for(let r of b(t[i],g))e.includes(r)||e.push(r);return e}let i=[];for(let r of e){let e=t[r];if(e._needed){for(let r in e.claims)if(r in e._needed)for(let s of e.claims[r])s.value&&s.value.id||(s.value=t[s.value],i.push(...b(s.value,e._needed[r])));delete e._needed}}return i}function v(t){for(let e in t)if(""===t[e].missing)throw Error(`Entity "${e}" not found`);let e=i.default.simplify.entities(t,f);for(let r in t){let s=t[r].claims;s.P348&&(e[r].claims["P348:all"]=i.default.simplify.propertyClaims(s.P348,h(h({},f),{},{keepNonTruthy:!0,keepRank:!0})).filter(t=>"deprecated"!==t.rank))}return e}function _(t,e){return{needed:y(e),incomplete:Object.keys(t)}}function k(t,e){return s(t.filter((i,r)=>!(i in e)&&t.indexOf(i)===r))}function w(t,e){let{entities:i}=JSON.parse(t);Object.assign(e,v(i))}function x(t,e){return{needed:y(e,t.incomplete),incomplete:t.needed}}function E(t,e){return Object.keys(t).map(t=>e[t])}async function T(t){let e=v(t),i=_(t,e);for(;i.needed.length;){let t=k(i.needed,e);await Promise.all(t.map(async t=>w(await p(t),e))),i=x(i,e)}return e}async function O(t){let e=await T(t);return E(t,e)}var A=t.i(65136),S=t.i(64745),I=t.i(89627);function j(t){let e=function({value:t,qualifiers:e}){return Array.isArray(e.P1932)&&"string"==typeof e.P1932[0]?e.P1932[0]:"object"==typeof t&&null!==t?R(t):"string"==typeof t?t:null}(t);if(null===e)return{literal:null};let{value:i,qualifiers:r}=t,s="object"!=typeof i||i&&i.claims.P31&&i.claims.P31.some(t=>"Q5"===t.value)?(0,A.parse)(e):{literal:e},n=r.P1545?parseInt(r.P1545[0]):null;return null!==n&&(s._ordinal=n),s}function C(t){let e={version:t.value};return t.qualifiers.P577&&(e.issued=(0,S.parse)(t.qualifiers.P577[0])),t.qualifiers.P356&&(e.DOI=t.qualifiers.P356[0]),t.qualifiers.P6138&&(e.SWHID=t.qualifiers.P6138[0]),e}let N={"review-book":10,review:9,"entry-dictionary":5,"entry-encyclopedia":5,map:5,dataset:4,legislation:1,"article-magazine":0,bill:0,chapter:0,classic:0,collection:0,entry:0,figure:0,graphic:0,hearing:0,interview:0,legal_case:0,manuscript:0,motion_picture:0,musical_score:0,pamphlet:0,"paper-conference":0,patent:0,personal_communication:0,"post-weblog":0,report:0,song:0,speech:0,standard:0,thesis:0,treaty:0,broadcast:-1,"article-newspaper":-1,"article-journal":-1,periodical:-2,regulation:-2,post:-5,webpage:-6,software:-7,article:-9,book:-10,performance:-11,event:-12,document:-100};function P(t,e,i){switch(t){case"type":return D(e);case"author":case"chair":case"curator":case"container-author":case"collection-editor":case"composer":case"director":case"editor":case"executive-producer":case"guest":case"host":case"illustrator":case"narrator":case"organizer":case"original-author":case"performer":case"producer":case"recipient":case"reviewed-author":case"script-writer":case"translator":return e.map(j).sort((t,e)=>t._ordinal-e._ordinal);case"issued":case"original-date":return(0,S.parse)(e);case"event-date":return{"date-parts":e.map(t=>(0,S.parse)(t.value)).filter(t=>t&&t["date-parts"]).map(t=>t["date-parts"][0])};case"keyword":return e.map(({value:t})=>R(t)).filter(t=>"string"==typeof t&&""!==t).join(",");case"container-title":case"collection-title":case"event-title":case"medium":case"publisher":case"original-publisher":return e.claims.P1476?e.claims.P1476[0].value:R(e);case"event-place":case"jurisdiction":case"original-publisher-place":case"publisher-place":let r;return r=R(e),e.claims.P17?r+", "+function(t){if(t.claims.P1813){let e=t.claims.P1813.filter(({qualifiers:{P31:t}})=>!t||"Q28840786"!==t[0]);if(e.length)return e[0].value}return R(t)}(e.claims.P17[0].value):r;case"chapter-number":case"collection-number":return parseInt(e[0]);case"number-of-volumes":return e.length;case"versions":return e.map(C);default:return e}}function D(t){let e=(Array.isArray(t)?t:[t]).map(t=>I.default[t.value]).filter(Boolean);return e.length?(e.sort((t,e)=>N[e]-N[t]),e[0]):(a.logger.unmapped("[plugin-wikidata]","publication type",t),"document")}function R(t){if(!t)return;let e=r.default.langs.find(e=>t.labels[e]);return t.labels[e]}t.s(["TYPE_PRIORITIES",0,N,"default",()=>P,"getLabel",()=>R,"parse",()=>P,"parseProp",()=>P,"parseType",()=>D],89998);var L=t.i(9759),B=t.i(30052),F=t.i(31295);function M(t,e,i){let r=t.split(".");return i.delete(r[0]),function t(e,{claims:i}){let[r,s]=e[0].split("#");if(i[r]&&i[r].length){if(1===e.length)return s?i[r][0].qualifiers[s]?i[r][0].qualifiers[s].map(t=>({value:t})):void 0:i[r];return t(e.slice(1),i[r][0].value)}}(r,e)}function U(t,e,i){if("object"!=typeof t){let r=M(t,e,i);return r&&r[0].value}let r=[].concat(...t.props.map(t=>M(t,e,i)).filter(Boolean));return"all"===t.values?r[0]&&r:r[0]&&r[0].value}function q(t){let e={id:t.id,custom:{QID:t.id},source:"Wikidata"},i=new Set(Object.keys(t.claims));for(let r in L.default){let s=U(L.default[r],t,i);if(s){let i=P(r,s,t);i&&(e[r]=i)}}for(let r in B.default){let s=U(B.default[r],t,i);if(s){let i=P(r,s,t);i&&(e.custom[r]=i)}}for(let t of i)t in F.default||a.logger.unmapped("[plugin-wikidata]","property",t);return e.title||(e.title=R(t)),"review"===e.type.slice(0,6)?delete e.keyword:(delete e["reviewed-title"],delete e["reviewed-author"]),e.recipient&&(e.type="personal_communication"),e["event-title"]&&(e.type="paper-conference"),"number"==typeof e["part-number"]?delete e["part-title"]:"string"==typeof e["part-title"]&&delete e["part-number"],"chapter"!==e.type&&e["chapter-number"]&&delete e["chapter-number"],e["original-author"]&&!e.author&&(e.author=e["original-author"]),e}async function $({entities:t}){return(await O(t)).map(q)}function z({entities:t}){let e;return(e=function(t){let e=v(t),i=_(t,e);for(;i.needed.length;)k(i.needed,e).map(t=>w(u(t),e)),i=x(i,e);return e}(t),E(t,e)).map(q)}t.s(["default",()=>z,"parse",()=>z,"parseAsync",()=>$,"parseEntities",()=>z,"parseEntitiesAsync",()=>$,"parseEntity",()=>q],37985);var G=t.i(37985),X=t.i(89998);function V(t){return t.match(/\/(Q\d+)(?:[#?/]|\s*$)/)[1]}t.s(["parse",()=>V],15916);var W=t.i(15916),J=t.i(15406);let H="@wikidata",K={id:n,entity:G,prop:X,url:W,api:J},Y={"@wikidata/id":{parse:s,parseType:{dataType:"String",predicate:/^Q\d+$/}},"@wikidata/list+text":{parse:t=>t.trim().split(/(?:[\s,]\s*)/g),parseType:{dataType:"String",predicate:/^\s*((?:Q\d+(?:[\s,]\s*))*Q\d+)\s*$/}},"@wikidata/api":{parse:u,parseAsync:p,parseType:{dataType:"String",predicate:/^(https?:\/\/(?:www\.)?wikidata.org\/w\/api\.php(?:\?.*)?)$/,extends:"@else/url"}},"@wikidata/array+api":{parse:u,parseAsync:p,parseType:{dataType:"Array",elementConstraint:"@wikidata/api"}},"@wikidata/url":{parse:V,parseType:{dataType:"String",predicate:/\/(Q\d+)(?:[#?/]|\s*$)/,extends:"@else/url"}},"@wikidata/list+object":{parse:s,parseType:{dataType:"Array",elementConstraint:"@wikidata/id"}},"@wikidata/object":{parse:z,parseAsync:$,parseType:{dataType:"SimpleObject",propertyConstraint:{props:"entities"}}},"@wikidata/array+object":{parse:t=>t.reduce((t,{success:e,entities:i})=>(t.success&=e,Object.assign(t.entities,i),t)),parseType:{dataType:"Array",elementConstraint:"@wikidata/object"},outputs:"@wikidata/object"},"@wikidata/prop":{parse:P},"@wikidata/type":{parse:D}};e.plugins.add(H,{input:Y,config:r.default}),t.s(["formats",()=>Y,"parsers",()=>K,"ref",()=>H],41766)},19587,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.format=function(t,e){let i;if(!(t in n.fieldTypes))return d(e,"verbatim");let[r,s]=n.fieldTypes[t];if(!(r in c))return d(e,s);return i=c[r],e.map(t=>{let e=d(t,s);return e.includes(i)?`{${e}}`:e}).join(i)},i.formatAnnotation=function(t){let e=[];if(t.field&&e.push("="+g(t.field)),t.item)for(let[i,r]of Object.entries(t.item)){if(!r)continue;let t=parseInt(i)+1;e.push(t+"="+g(r))}if(t.part)for(let[i,r]of Object.entries(t.part)){if(!r)continue;let t=parseInt(i)+1;for(let i in r)r[i]&&e.push(t+":"+i+"="+g(r[i]))}return e.join("; ")};var r,s=(r=t.r(11392))&&r.__esModule?r:{default:r},n=t.r(32255);let a={};for(let t in n.commands)a[n.commands[t]]=t;for(let t in n.diacritics)a[n.diacritics[t]]=t;for(let t in n.ligatures)a[n.ligatures[t]]=t;let o={};for(let t in n.mathCommands)o[n.mathCommands[t]]=t;let l=/[^a-zA-Z0-9\s!"'()*+,\-./:;=?@[\]\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]/g,u=/.[\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]+/g,p=/[\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]/g,c={separated:",",list:" and "},h={i:"\\textit{",b:"\\textbf{",sc:"\\textsc{",sup:"\\textsuperscript{",sub:"\\textsubscript{",'span style="font-variant:small-caps;"':"\\textsc{",'span class="nocase"':"{"};function f(t){return s.default.format.asciiOnly?t.normalize("NFKD").replace(l,t=>{var e;return(e=t)in a?a[e]in n.ligatures?a[e]:`\\${a[e]}{}`:e in o?`$\\${o[e]}$`:/^[&%$#_{}]$/.test(e)?`\\${e}`:""}).replace(u,t=>Array.from(t).reduce((t,e)=>`{\\${a[e]} ${t}}`)).replace(p,""):t}function m(t){let e=[],i=t.split(/<(\/?(?:i|b|sc|sup|sub|span)|span .*?)>/g);return(i=i.map((t,i)=>i%2==0?f(t):t in h?(e.push("/"+t.split(" ")[0]),h[t]):t===e[e.length-1]?(e.pop(),"}"):"")).join("")}function d(t,e){switch(e){case"title":return m(t).split(/(:\s*)/).map((t,e)=>e%2?t:t.replace(/([^\\])\b([a-z]*[A-Z].*?)\b/g,"$1{$2}")).join("");case"literal":return m(t.toString());case"name":if(t.family&&!t.prefix&&!t.given&!t.suffix)return t.family.includes(c.list)?t.family:`{${t.family}}`;let i=[""];return t.prefix&&t.family&&(i[0]+=t.prefix+" "),t.family&&(i[0]+=t.family),t.suffix?(i.push(t.suffix),i.push(t.given||"")):i.push(t.given),f(i.join(", ").trim());case"verbatim":case"uri":return t.toString();default:return f(t.toString())}}function g(t){return Array.isArray(t)?t.map(t=>f(t).replace(/([;,"])/g,"{$1}")).join(", "):'"'+f(t).replace(/(["])/g,"{$1}")+'"'}},11327,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.format=function(t){return(0,r.format)(t).map(n)},i.formatBibtex=function(t){return(0,r.formatBibtex)(t).map(n)};var r=t.r(51895),s=t.r(19587);function n({type:t,label:e,properties:i}){let r={type:t,label:e,properties:{}};for(let t in i){let e=i[t],[n,a]=t.split("+an:");a?(r.annotations||(r.annotations={}),r.annotations[n]||(r.annotations[n]={}),r.annotations[n][a]=(0,s.formatAnnotation)(e)):r.properties[t]=(0,s.format)(t,e)}return r}},74415,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.format=function(t,e){let i=t.map(t=>(function(t,e){let i=[];for(let r in t.properties)if(i.push(n(r,t.properties[r],e)),t.annotations&&t.annotations[r])for(let a in t.annotations[r]){let o=r+s.default.biber.annotationMarker;"default"!==a&&(o+=s.default.biber.namedAnnotationMarker+a),i.push(n(o,t.annotations[r][a],e))}return e.entry.join(`@${t.type}{${t.label},${e.list.join(i.join(""))}}`)})(t,e)).join("");return e.bibliographyContainer.join(i)};var r,s=(r=t.r(11392))&&r.__esModule?r:{default:r};function n(t,e,i){return i.listItem.join(`${t} = {${e}},`)}},51957,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.format=function(t,e){let i=t.map(t=>(function({type:t,label:e,properties:i},r){let s=Object.entries(i).concat([["type",t]]).map(([t,e])=>r.listItem.join(`${t}: ${e}`));return r.entry.join(`[${e}]${r.list.join(s.join(""))}`)})(t,e)).join("\n");return e.bibliographyContainer.join(i)}},33870,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=t.r(74254),s=t.r(11327),n=t.r(74415),a=t.r(51957);let o=function(t,e){return function(i,s={}){let{type:n,format:a=n||"text"}=s;if(i=t(i),"object"===a)return i;if(r.plugins.dict.has(a))return e(i,r.plugins.dict.get(a),s);throw RangeError(`Output dictionary "${a}" not available`)}};i.default={bibtex:o(s.formatBibtex,n.format),biblatex:o(s.format,n.format),bibtxt:o(s.formatBibtex,a.format)}},63658,(t,e,i)=>{"use strict";function r(t){switch(t){case void 0:return"Undefined";case null:return"Null";default:return t.constructor.name}}Object.defineProperty(i,"__esModule",{value:!0}),i.dataTypeOf=function(t){switch(typeof t){case"string":return"String";case"object":if(Array.isArray(t))return"Array";if("Object"===r(t))return"SimpleObject";if("Null"!==r(t))return"ComplexObject";default:return"Primitive"}},i.typeOf=r},41207,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.applyGraph=function(t,e){if(t._graph){let i=e.findIndex(({type:t})=>"@else/list+object"===t);-1!==i&&e.splice(i+1,0,...t._graph.slice(0,-1))}return t._graph=e,t},i.removeGraph=function(t){return delete t._graph,t}},5731,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.addTypeParser=function(t,{dataType:e,predicate:i,extends:r}){let n=[];t in l&&(n=l[t],delete l[t],s.default.debug("[core]",`Subclasses "${n}" finally registered to parent type "${t}"`));let u={predicate:i,extensions:n};if(a[t]=u,r){let e=a[r];e?e.extensions.push(t):(l[r]||(l[r]=[]),l[r].push(t),s.default.debug("[core]",`Subclass "${t}" is waiting on parent type "${r}"`))}else(o[e]||(o[e]=[])).push(t)},i.hasTypeParser=function(t){return Object.prototype.hasOwnProperty.call(a,t)},i.listTypeParser=function(){return Object.keys(a)},i.removeTypeParser=function(t){delete a[t],[...Object.keys(o).map(t=>o[t]),...Object.keys(a).map(t=>a[t].extensions).filter(t=>t.length>0)].forEach(e=>{let i=e.indexOf(t);i>-1&&e.splice(i,1)})},i.treeTypeParser=function(){let t=e=>({name:e,children:a[e].extensions.map(t)});return{name:"Type tree",children:Object.keys(o).map(e=>({name:e,children:o[e].map(t)}))}},i.type=p,i.typeMatcher=void 0;var r,s=(r=t.r(80357))&&r.__esModule?r:{default:r},n=t.r(63658);let a={},o={},l={};function u(t,e){switch(e){case"Array":if(0===t.length||t.every(t=>"@csl/object"===p(t)))return"@csl/list+object";return"@else/list+object";case"SimpleObject":case"ComplexObject":return"@csl/object";default:return"@invalid"}}function p(t){let e=(0,n.dataTypeOf)(t);return"Array"===e&&0===t.length?u(t,e):function t(e=[],i){for(let r of e)if(a[r].predicate(i))return t(a[r].extensions,i)||r}(o[e],t)||u(t,e)}i.typeMatcher=/^(?:@(.+?))(?:\/(?:(.+?)\+)?(?:(.+)))?$/},72814,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TypeParser=i.FormatParser=i.DataParser=void 0;var r=t.r(5731);class s{constructor(t){!function(t,e,i){var r;(e="symbol"==typeof(r=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?r:r+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"validDataTypes",["String","Array","SimpleObject","ComplexObject","Primitive"]),this.data=t}validateDataType(){let t=this.data.dataType;if(t&&!this.validDataTypes.includes(t))throw RangeError(`dataType was ${t}; expected one of ${this.validDataTypes}`)}validateParseType(){let t=this.data.predicate;if(t&&!(t instanceof RegExp||"function"==typeof t))throw TypeError(`predicate was ${typeof t}; expected RegExp or function`)}validateTokenList(){let t=this.data.tokenList;if(t&&"object"!=typeof t)throw TypeError(`tokenList was ${typeof t}; expected object or RegExp`)}validatePropertyConstraint(){let t=this.data.propertyConstraint;if(t&&"object"!=typeof t)throw TypeError(`propertyConstraint was ${typeof t}; expected array or object`)}validateElementConstraint(){let t=this.data.elementConstraint;if(t&&"string"!=typeof t)throw TypeError(`elementConstraint was ${typeof t}; expected string`)}validateExtends(){let t=this.data.extends;if(t&&"string"!=typeof t)throw TypeError(`extends was ${typeof t}; expected string`)}validate(){if(null===this.data||"object"!=typeof this.data)throw TypeError(`typeParser was ${typeof this.data}; expected object`);this.validateDataType(),this.validateParseType(),this.validateTokenList(),this.validatePropertyConstraint(),this.validateElementConstraint(),this.validateExtends()}parseTokenList(){let t=this.data.tokenList;if(!t)return[];t instanceof RegExp&&(t={token:t});let{token:e,split:i=/\s+/,trim:r=!0,every:s=!0}=t,n=s?"every":"some";return[t=>(r?t.trim():t).split(i)[n](t=>e.test(t))]}parsePropertyConstraint(){return[].concat(this.data.propertyConstraint||[]).map(({props:t,match:e,value:i})=>{switch(t=[].concat(t),e){case"any":case"some":return e=>t.some(t=>t in e&&(!i||i(e[t])));case"none":return e=>!t.some(t=>t in e&&(!i||i(e[t])));default:return e=>t.every(t=>t in e&&(!i||i(e[t])))}})}parseElementConstraint(){let t=this.data.elementConstraint;return t?[e=>e.every(e=>(0,r.type)(e)===t)]:[]}parsePredicate(){return this.data.predicate instanceof RegExp?[this.data.predicate.test.bind(this.data.predicate)]:this.data.predicate?[this.data.predicate]:[]}getCombinedPredicate(){let t=[...this.parsePredicate(),...this.parseTokenList(),...this.parsePropertyConstraint(),...this.parseElementConstraint()];return 0===t.length?()=>!0:1===t.length?t[0]:e=>t.every(t=>t(e))}getDataType(){return this.data.dataType?this.data.dataType:this.data.predicate instanceof RegExp?"String":this.data.tokenList?"String":this.data.elementConstraint?"Array":"Primitive"}get dataType(){return this.getDataType()}get predicate(){return this.getCombinedPredicate()}get extends(){return this.data.extends}}i.TypeParser=s;class n{constructor(t,{async:e}={}){this.parser=t,this.async=e}validate(){let t=this.parser;if("function"!=typeof t)throw TypeError(`parser was ${typeof t}; expected function`)}}i.DataParser=n,i.FormatParser=class{constructor(t,e={}){this.format=t,e.parseType&&(this.typeParser=new s(e.parseType)),e.parse&&(this.dataParser=new n(e.parse,{async:!1})),e.parseAsync&&(this.asyncDataParser=new n(e.parseAsync,{async:!0}))}validateFormat(){let t=this.format;if(!r.typeMatcher.test(t))throw TypeError(`format name was "${t}"; didn't match expected pattern`)}validate(){this.validateFormat(),this.typeParser&&this.typeParser.validate(),this.dataParser&&this.dataParser.validate(),this.asyncDataParser&&this.asyncDataParser.validate()}}},19938,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.clean=function(t,e=!0){return t.map(function(t){let i={};for(let r in t){let s=function t(e,i,r){let s=[].concat(o[e]);switch(o[e]){case 1:return l(i,r);case 2:if(i instanceof Array){let t=i.map(t=>l(t,r)).filter(Boolean);return t.length?t:void 0}return;case 3:let p="date-parts";if("object"!=typeof i||null===i)return;if(i[p]instanceof Array&&i[p].every(t=>t instanceof Array)){let t=i[p].map(t=>u(t,r)).filter(Boolean);return t.length?n(n({},i),{},{"date-parts":t}):void 0}if(i instanceof Array&&i.every(t=>t[p]instanceof Array)){let t=i.map(t=>u(t[p],r)).filter(Boolean);return t.length?{"date-parts":t}:void 0}if(i[p]instanceof Array){let t=u(i[p],r);return t&&{"date-parts":[t]}}if("literal"in i||"raw"in i)return i;return;case 4:return function e(i,r){if(!0===a[i=t("language",i,r)])return i;if(r){if(i in a)return a[i];else if("string"==typeof i&&i.toLowerCase()!==i)return e(i.toLowerCase(),r)}}(i,r)}if(r){if("string"==typeof i&&s.includes("number")&&!s.includes("string")&&!isNaN(+i))return parseFloat(i);else if("number"==typeof i&&s.includes("string")&&!s.includes("number"))return i.toString();else if(Array.isArray(i)&&i.length)return t(e,i[0],r)}if(s.includes(typeof i))return i}(r,t[r],e);void 0!==s&&(i[r]=s)}return i})};var r=t.r(65136);function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}let a={article:!0,"article-journal":!0,"article-magazine":!0,"article-newspaper":!0,bill:!0,book:!0,broadcast:!0,chapter:!0,classic:!0,collection:!0,dataset:!0,document:!0,entry:!0,"entry-dictionary":!0,"entry-encyclopedia":!0,event:!0,figure:!0,graphic:!0,hearing:!0,interview:!0,legal_case:!0,legislation:!0,manuscript:!0,map:!0,motion_picture:!0,musical_score:!0,pamphlet:!0,"paper-conference":!0,patent:!0,performance:!0,periodical:!0,personal_communication:!0,post:!0,"post-weblog":!0,regulation:!0,report:!0,review:!0,"review-book":!0,software:!0,song:!0,speech:!0,standard:!0,thesis:!0,treaty:!0,webpage:!0,"journal-article":"article-journal","book-chapter":"chapter","posted-content":"manuscript","proceedings-article":"paper-conference",dissertation:"thesis"},o={author:2,chair:2,"collection-editor":2,compiler:2,composer:2,"container-author":2,contributor:2,curator:2,director:2,editor:2,"editorial-director":2,"executive-producer":2,guest:2,host:2,interviewer:2,illustrator:2,narrator:2,organizer:2,"original-author":2,performer:2,producer:2,"reviewed-author":2,recipient:2,"script-writer":2,"series-creator":2,translator:2,accessed:3,"available-date":3,container:3,"event-date":3,issued:3,"original-date":3,submitted:3,type:4,categories:"object",custom:"object",id:["string","number"],language:"string",journalAbbreviation:"string",shortTitle:"string",abstract:"string",annote:"string",archive:"string",archive_collection:"string",archive_location:"string","archive-place":"string",authority:"string","call-number":"string","chapter-number":"string","citation-number":"string","citation-key":"string","citation-label":"string","collection-number":"string","collection-title":"string","container-title":"string","container-title-short":"string",dimensions:"string",division:"string",DOI:"string",edition:["string","number"],event:"string","event-title":"string","event-place":"string","first-reference-note-number":"string",genre:"string",ISBN:"string",ISSN:"string",issue:["string","number"],jurisdiction:"string",keyword:"string",locator:"string",medium:"string",note:"string",number:["string","number"],"number-of-pages":"string","number-of-volumes":["string","number"],"original-publisher":"string","original-publisher-place":"string","original-title":"string",page:"string","page-first":"string","part-number":["string","number"],"part-title":"string",PMCID:"string",PMID:"string",printing:"string",publisher:"string","publisher-place":"string",references:"string","reviewed-title":"string","reviewed-genre":"string",scale:"string",section:"string",source:"string",status:"string",supplement:["string","number"],title:"string","title-short":"string",URL:"string",version:"string",volume:["string","number"],"volume-title":"string","volume-title-short":"string","year-suffix":"string"};function l(t,e){if("object"==typeof t&&null!==t&&(t.literal||t.given||t.family))return(t.ORCID||t.orcid||t._ORCID)&&(t=n({_orcid:t.ORCID||t.orcid||t._ORCID},t),delete t.ORCID,delete t.orcid,delete t._ORCID),t;if(e&&"string"==typeof t)return(0,r.parse)(t)}function u(t,e){return t.every(t=>"number"==typeof t)?t:!e||t.some(t=>isNaN(parseInt(t)))?void 0:t.map(t=>parseInt(t))}},10702,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.addDataParser=function(t,{parser:e,async:i}){i?n[t]=e:s[t]=e},i.data=l,i.dataAsync=u,i.hasDataParser=p,i.listDataParser=function(t){return Object.keys(t?n:s)},i.removeDataParser=function(t,e){delete(e?n:s)[t]};var r=t.r(5731);let s={},n={},a={"@csl/object":t=>[t],"@csl/list+object":t=>t,"@else/list+object":t=>t.map(t=>{let e=(0,r.type)(t);return l(t,e)}).flat(),"@invalid":()=>{throw Error("This format is not supported or recognized")}},o={"@else/list+object":t=>Promise.all(t.map(t=>{let e=(0,r.type)(t);return u(t,e)})).then(t=>t.flat())};function l(t,e){if("function"==typeof s[e])return s[e](t);if("function"==typeof a[e])return a[e](t);throw TypeError(`No synchronous parser found for ${e}`)}async function u(t,e){if("function"==typeof n[e])return n[e](t);if("function"==typeof o[e])return o[e](t);if(p(e,!1))return l(t,e);throw TypeError(`No parser found for ${e}`)}function p(t,e){return e?n[t]||o[t]:s[t]||a[t]}},66549,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.add=function(t,e){let i=new r.FormatParser(t,e);i.validate();let o=a[t]||(a[t]={});i.typeParser&&((0,s.addTypeParser)(t,i.typeParser),o.type=!0),i.dataParser&&((0,n.addDataParser)(t,i.dataParser),o.data=!0),i.asyncDataParser&&((0,n.addDataParser)(t,i.asyncDataParser),o.asyncData=!0),e.outputs&&(o.outputs=e.outputs)},i.get=function(t){return a[t]},i.has=function(t){return t in a},i.list=function(){return Object.keys(a)},i.remove=function(t){let e=a[t];e&&(e.type&&(0,s.removeTypeParser)(t),e.data&&(0,n.removeDataParser)(t),e.asyncData&&(0,n.removeDataParser)(t,!0),delete a[t])};var r=t.r(72814),s=t.r(5731),n=t.r(10702);let a={}},11769,(t,e,i)=>{"use strict";function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}Object.defineProperty(i,"__esModule",{value:!0}),i.downgradeCsl=function t(e){return Array.isArray(e)?e.map(t):("event-title"in(e=s({},e))&&(e.event=e["event-title"],delete e["event-title"]),"software"===e.type&&(e.type="book"),e)},i.upgradeCsl=function t(e){return Array.isArray(e)?e.map(t):("event"in(e=s({},e))&&(e["event-title"]=e.event,delete e.event),"book"===e.type&&"version"in e&&(e.type="software"),e)}},41633,(t,e,i)=>{"use strict";function r(t,e=new Set){let i;if("object"!=typeof t||null===t||t.constructor!==Object&&t.constructor!==Array)return t;if(e.has(t))throw TypeError("Recursively copying circular structure");if(e.add(t),t.constructor===Array)i=t.map(t=>r(t,e));else{let s={};for(let i in t)s[i]=r(t[i],e);i=s}return e.delete(t),i}Object.defineProperty(i,"__esModule",{value:!0}),i.deepCopy=r,i.default=void 0,i.default=r},71361,(t,e,i)=>{"use strict";var r=t.i(47167);Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.fetchFile=g,i.fetchFileAsync=b,i.setUserAgent=function(t){h=t};var s=l(t.r(63969)),n=l(t.r(87105)),a=l(t.r(80357)),o=l(t.r(11029));function l(t){return t&&t.__esModule?t:{default:t}}let u="undefined"!=typeof location&&"undefined"!=typeof navigator,{fetch:p,Headers:c}="function"==typeof fetch&&u?{fetch,Headers}:(0,n.default)(),h=`Citation.js/${o.default.version}`;function f(t){let e={};for(let[i,r]of t instanceof c||t instanceof s.default.Headers?Array.from(t):Object.entries(t))e[i.toLowerCase()]=r.toString();return e}function m(t={}){let e={headers:{accept:"*/*"},method:"GET",checkContentType:t.checkContentType};if(h&&!u&&(e.headers["user-agent"]=h),t.body){e.method="POST";let i="string"!=typeof t.body;e.body=i?JSON.stringify(t.body):t.body,e.headers["content-type"]=i?"application/json":"text/plain"}return t.headers&&Object.assign(e.headers,f(t.headers)),e}function d(t,e){let i,{status:r,headers:s}=t;if(r>=400?i=Error(`Server responded with status code ${r}`):!0===e.checkContentType&&!function(t,e){if(!t.accept||"*/*"===t.accept||!e["content-type"])return!0;let[i,r]=e["content-type"].split(";")[0].trim().split("/");return t.accept.split(",").map(t=>t.split(";")[0].trim().split("/")).some(([t,e])=>(t===i||"*"===t)&&(e===r||"*"===e))}(e.headers,f(s))&&(i=Error(`Server responded with content-type ${s.get("content-type")}`)),i)throw i.status=r,i.headers=s,i.body=t.body,i;return t}function g(t,e){let i=m(e);return a.default.http("[core]",i.method,t,i),d((0,s.default)(t,i),i).text()}async function b(t,e){let i=m(e);return a.default.http("[core]",i.method,t,i),p(t,i).then(t=>d(t,i)).then(t=>t.text())}void 0!==r.default&&r.default&&r.default.release&&"node"===r.default.release.name&&r.default.version&&(h+=` Node.js/${r.default.version}`),i.default=g},33403,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=function(t,e){let i;for(;void 0===i||t.includes(i);)i=`${e}${Math.random().toString().slice(2)}`;return i}},48875,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;class r{constructor(t){this.stack=t,this.index=0,this.current=this.stack[this.index]}static getPatternText(t){return`"${t instanceof RegExp?t.source:t}"`}static getMatchCallback(t){if(Array.isArray(t)){let e=t.map(r.getMatchCallback);return t=>e.some(e=>e(t))}return t instanceof Function?t:t instanceof RegExp?e=>t.test(e):e=>t===e}tokensLeft(){return this.stack.length-this.index}matches(t){return r.getMatchCallback(t)(this.current,this.index,this.stack)}matchesSequence(t){let e=this.stack.slice(this.index,this.index+t.length).join("");return"string"==typeof t?e===t:t.every((t,i)=>r.getMatchCallback(t)(e[i]))}consumeToken(t=/^[\s\S]$/,{inverse:e=!1,spaced:i=!0}={}){i&&this.consumeWhitespace();let s=this.current;if(r.getMatchCallback(t)(s,this.index,this.stack))this.current=this.stack[++this.index];else throw SyntaxError(`Unexpected token at index ${this.index}: Expected ${r.getPatternText(t)}, got "${s}"`);return i&&this.consumeWhitespace(),s}consumeWhitespace(t=/^\s$/,{optional:e=!0}={}){return this.consume(t,{min:+!e})}consumeN(t){if(this.tokensLeft()<t)throw SyntaxError("Not enough tokens left");let e=this.index;for(;t--;)this.current=this.stack[++this.index];return this.stack.slice(e,this.index).join("")}consumeSequence(t){if(this.matchesSequence(t))return this.consumeN(t.length);throw SyntaxError(`Expected "${t}", got "${this.consumeN(t.length)}"`)}consume(t=/^[\s\S]$/,{min:e=0,max:i=1/0,inverse:s=!1,tokenMap:n,tokenFilter:a}={}){let o=this.index,l=r.getMatchCallback(t);for(;l(this.current,this.index,this.stack)!==s;)this.current=this.stack[++this.index];let u=this.stack.slice(o,this.index);if(u.length<e)throw SyntaxError(`Not enough ${r.getPatternText(t)}`);if(u.length>i)throw SyntaxError(`Too many ${r.getPatternText(t)}`);return n&&(u=u.map(n)),a&&(u=u.filter(a)),u.join("")}}i.default=r},96216,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.default=class{constructor(t={}){this.data=t}set(t,e){return this.data[t]=e,this}add(...t){return this.set(...t)}delete(t){return delete this.data[t],this}remove(...t){return this.delete(...t)}get(t){return this.data[t]}has(t){return Object.prototype.hasOwnProperty.call(this.data,t)}list(){return Object.keys(this.data)}}},87357,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Grammar=void 0;var r=t.r(41633);i.Grammar=class{constructor(t,e){this.rules=t,this.defaultState=e,this.mainRule=Object.keys(t)[0],this.log=[]}parse(t,e){return this.lexer=t,this.token=this.lexer.next(),this.state=(0,r.deepCopy)(this.defaultState),this.log=[],this.consumeRule(e||this.mainRule)}matchEndOfFile(){return!this.token}matchToken(t){return this.token&&t===this.token.type}consumeToken(t,e){let i=this.token;if(!t||i&&i.type===t)return this.token=this.lexer.next(),i;{if(e)return;let r=i?`"${i.type}"`:"EOF",s=SyntaxError(this.lexer.formatError(i,`expected "${t}", got ${r}`));throw s.message+=` (${this.log.join("->")})`,s}}consumeRule(t){this.log.push(t);let e=this.rules[t].call(this);return this.log.pop(),e}}},89350,(t,e,i)=>{"use strict";function r(t,e){return e=e===s.CONVERT_TO_SOURCE,t=t.map(t=>(function(t,e){let i,r,s,n;if("string"==typeof t)i=r=t;else if(!t)return null;else if(i=e?t.target:t.source,r=e?t.source:t.target,t.convert&&(s=e?t.convert.toSource:t.convert.toTarget),t.when){var a;null!=(n=e?t.when.target:t.when.source)&&(a=n,n=function(t){return"boolean"==typeof a?a:Object.keys(a).every(e=>{let i=a[e];return!0===i?e in t:!1===i?!(e in t):"function"==typeof i?i(t[e]):Array.isArray(i)?i.includes(t[e]):t[e]===i})})}return{inputProp:i=[].concat(i).filter(Boolean),outputProp:r=[].concat(r).filter(Boolean),convert:s,condition:n}})(t,e)).filter(Boolean),function(e){let i={};for(let{inputProp:r,outputProp:s,convert:n,condition:a}of t){if(0===s.length)continue;if(a&&!a(e))continue;if(0!==r.length&&r.every(t=>!(t in e)))continue;let t=r.map(t=>e[t]);if(n)try{let i=n.apply(e,t);t=1===s.length?[i]:i}catch(t){throw Error(`Failed to convert ${r} to ${s}`,{cause:t})}s.forEach((e,r)=>{let s=t[r];void 0!==s&&(i[e]=s)})}return i}}Object.defineProperty(i,"__esModule",{value:!0}),i.Translator=void 0;class s{constructor(t){this.convertToSource=r(t,s.CONVERT_TO_SOURCE),this.convertToTarget=r(t,s.CONVERT_TO_TARGET)}}i.Translator=s,s.CONVERT_TO_SOURCE=Symbol("convert to source"),s.CONVERT_TO_TARGET=Symbol("convert to target")},13990,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"Grammar",{enumerable:!0,get:function(){return u.Grammar}}),Object.defineProperty(i,"Register",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(i,"TokenStack",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(i,"Translator",{enumerable:!0,get:function(){return p.Translator}}),Object.defineProperty(i,"deepCopy",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(i,"downgradeCsl",{enumerable:!0,get:function(){return r.downgradeCsl}}),Object.defineProperty(i,"fetchFile",{enumerable:!0,get:function(){return n.fetchFile}}),Object.defineProperty(i,"fetchFileAsync",{enumerable:!0,get:function(){return n.fetchFileAsync}}),Object.defineProperty(i,"fetchId",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(i,"setUserAgent",{enumerable:!0,get:function(){return n.setUserAgent}}),Object.defineProperty(i,"upgradeCsl",{enumerable:!0,get:function(){return r.upgradeCsl}});var r=t.r(11769),s=c(t.r(41633)),n=t.r(71361),a=c(t.r(33403)),o=c(t.r(48875)),l=c(t.r(96216)),u=t.r(87357),p=t.r(89350);function c(t){return t&&t.__esModule?t:{default:t}}},71880,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.chainLinkAsync=i.chainLink=i.chainAsync=i.chain=void 0;var r,s=t.r(13990),n=(r=t.r(80357))&&r.__esModule?r:{default:r},a=t.r(66549),o=t.r(5731),l=t.r(10702),u=t.r(41207);class p{constructor(t,e={}){this.options=Object.assign({generateGraph:!0,forceType:(0,o.type)(t),maxChainLength:10,strict:!0,target:"@csl/list+object"},e),this.type=this.options.forceType,this.data="object"==typeof t?(0,s.deepCopy)(t):t,this.graph=[{type:this.type,data:t}],this.iteration=0}iterate(){if(0!==this.iteration){let t=(0,a.get)(this.type);t&&t.outputs?this.type=t.outputs:this.type=(0,o.type)(this.data),this.graph.push({type:this.type})}return!this.error&&this.type!==this.options.target&&(this.iteration>=this.options.maxChainLength?(this.error=RangeError(`Max. number of parsing iterations reached (${this.graph.reduce((t,e)=>{let i=t[t.length-1];return i&&i.type===e.type?i.count=i.count+1||2:t.push(e),t},[]).map(t=>(t.count>1?t.count+"x ":"")+t.type).join(" -> ")})`),!1):(this.iteration++,!0))}end(){if(this.error){if(n.default.error("[core]",this.error.message),!1===this.options.strict)return[];throw this.error}return"@csl/list+object"===this.options.target?(0,s.upgradeCsl)(this.data).map(this.options.generateGraph?t=>(0,u.applyGraph)(t,this.graph):u.removeGraph):this.data}}i.chain=(...t)=>{let e=new p(...t);for(;e.iterate();)try{e.data=(0,l.data)(e.data,e.type)}catch(t){e.error=t}return e.end()},i.chainLink=t=>{let e=(0,o.type)(t),i=e.match(/array|object/)?(0,s.deepCopy)(t):t;return(0,l.data)(i,e)},i.chainAsync=async(...t)=>{let e=new p(...t);for(;e.iterate();)e.data=await (0,l.dataAsync)(e.data,e.type).catch(t=>{e.error=t});return e.end()},i.chainLinkAsync=async t=>{let e=(0,o.type)(t),i=e.match(/array|object/)?(0,s.deepCopy)(t):t;return(0,l.dataAsync)(i,e)}},54206,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r={util:!0};i.util=void 0;var s=f(t.r(63658)),n=f(t.r(41207)),a=f(t.r(72814)),o=f(t.r(19938)),l=t.r(66549);Object.keys(l).forEach(function(t){"default"===t||"__esModule"===t||Object.prototype.hasOwnProperty.call(r,t)||t in i&&i[t]===l[t]||Object.defineProperty(i,t,{enumerable:!0,get:function(){return l[t]}})});var u=t.r(71880);Object.keys(u).forEach(function(t){"default"===t||"__esModule"===t||Object.prototype.hasOwnProperty.call(r,t)||t in i&&i[t]===u[t]||Object.defineProperty(i,t,{enumerable:!0,get:function(){return u[t]}})});var p=t.r(5731);Object.keys(p).forEach(function(t){"default"===t||"__esModule"===t||Object.prototype.hasOwnProperty.call(r,t)||t in i&&i[t]===p[t]||Object.defineProperty(i,t,{enumerable:!0,get:function(){return p[t]}})});var c=t.r(10702);function h(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(h=function(t){return t?i:e})(t)}function f(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=h(e);if(i&&i.has(t))return i.get(t);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&({}).hasOwnProperty.call(t,n)){var a=s?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,i&&i.set(t,r),r}Object.keys(c).forEach(function(t){"default"===t||"__esModule"===t||Object.prototype.hasOwnProperty.call(r,t)||t in i&&i[t]===c[t]||Object.defineProperty(i,t,{enumerable:!0,get:function(){return c[t]}})}),i.util=Object.assign({},s,n,a,o)},92226,(t,e,i)=>{"use strict";var r;Object.defineProperty(i,"__esModule",{value:!0}),i.add=function(t,e){if("string"!=typeof t)throw TypeError(`Invalid output format name, expected string, got ${typeof t}`);if("function"!=typeof e)throw TypeError(`Invalid formatter, expected function, got ${typeof e}`);s.set(t,e)},i.format=function(t,e,...i){if(!s.has(t))throw Error(`Output format "${t}" unavailable`);return s.get(t)(e,...i)},i.has=function(t){return s.has(t)},i.list=function(){return s.list()},i.register=void 0,i.remove=function(t){s.remove(t)};let s=i.register=new((r=t.r(96216))&&r.__esModule?r:{default:r}).default},13008,(t,e,i)=>{"use strict";var r;Object.defineProperty(i,"__esModule",{value:!0}),i.add=function(t,e){if("string"!=typeof t)throw TypeError(`Invalid dict name, expected string, got ${typeof t}`);if("object"!=typeof e)throw TypeError(`Invalid dict, expected object, got ${typeof e}`);for(let t in e){let i=e[t];if(!Array.isArray(i)||i.some(t=>"string"!=typeof t))throw TypeError(`Invalid dict entry "${t}", expected array of strings`)}s.set(t,e)},i.get=function(t){if(!s.has(t))throw Error(`Dict "${t}" unavailable`);return s.get(t)},i.has=function(t){return s.has(t)},i.htmlDict=void 0,i.list=function(){return s.list()},i.register=void 0,i.remove=function(t){s.remove(t)},i.textDict=void 0;let s=i.register=new((r=t.r(96216))&&r.__esModule?r:{default:r}).default({html:{bibliographyContainer:['<div class="csl-bib-body">',"</div>"],entry:['<div class="csl-entry">',"</div>"],list:['<ul style="list-style-type:none">',"</ul>"],listItem:["<li>","</li>"]},text:{bibliographyContainer:["","\n"],entry:["","\n"],list:["\n",""],listItem:["	","\n"]}});i.htmlDict={wr_start:'<div class="csl-bib-body">',wr_end:"</div>",en_start:'<div class="csl-entry">',en_end:"</div>",ul_start:'<ul style="list-style-type:none">',ul_end:"</ul>",li_start:"<li>",li_end:"</li>"},i.textDict={wr_start:"",wr_end:"\n",en_start:"",en_end:"\n",ul_start:"\n",ul_end:"",li_start:"	",li_end:"\n"}},77e3,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.add=function(t,e){r[t]=e},i.get=function(t){return r[t]},i.has=function(t){return Object.prototype.hasOwnProperty.call(r,t)},i.list=function(){return Object.keys(r)},i.remove=function(t){delete r[t]};let r={}},49041,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.add=function(t,e={}){let i=p[t]={};for(let r in e){if("config"===r){i.config={[t]:e.config},u.config.add(t,e.config);continue}let s=i[r]={},n=e[r];for(let t in n){let e=n[t];s[t]=!0,u[r].add(t,e)}}},i.dict=i.config=void 0,i.has=function(t){return t in p},i.input=void 0,i.list=function(){return Object.keys(p)},i.output=void 0,i.remove=function(t){let e=p[t];for(let t in e){let i=e[t];for(let e in i)u[t].remove(e)}delete p[t]};var r=l(t.r(54206));i.input=r;var s=l(t.r(92226));i.output=s;var n=l(t.r(13008));i.dict=n;var a=l(t.r(77e3));function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(o=function(t){return t?i:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=o(e);if(i&&i.has(t))return i.get(t);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&({}).hasOwnProperty.call(t,n)){var a=s?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,i&&i.set(t,r),r}i.config=a;let u={input:r,output:s,dict:n,config:a},p={}},91149,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.getJsonWrapper=function(t){return h(t,s.dict.get("html"))};var r,s=l(t.r(49041)),n=l(t.r(13990)),a=(r=t.r(80357))&&r.__esModule?r:{default:r};function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(o=function(t){return t?i:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=o(e);if(i&&i.has(t))return i.get(t);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if("default"!==n&&({}).hasOwnProperty.call(t,n)){var a=s?Object.getOwnPropertyDescriptor(t,n):null;a&&(a.get||a.set)?Object.defineProperty(r,n,a):r[n]=t[n]}return r.default=t,i&&i.set(t,r),r}function u(t,e,i){return t+(e<i.length-1?",":"")}function p(t,e){let i,r=Array.isArray(t);return i=(i=r?t.map(t=>c(t,e)):Object.keys(t).filter(e=>JSON.stringify(t[e])).map(i=>`"${i}": ${c(t[i],e)}`)).map(u).map(t=>e.listItem.join(t)),i=e.list.join(i.join("")),r?`[${i}]`:`{${i}}`}function c(t,e){return"object"!=typeof t||null===t?JSON.stringify(t):0===t.length?"[]":0===Object.keys(t).length?"{}":p(t,e)}function h(t,e){let i=t.map(t=>p(t,e));return i=(i=i.map(u).map(t=>e.entry.join(t))).join(""),e.bibliographyContainer.join(`[${i}]`)}i.default={data:(t,{type:e,format:i=e||"text",version:r="1.0.2"}={})=>(r<"1.0.2"&&(t=n.downgradeCsl(t)),"object"===i)?n.deepCopy(t):"text"===i?JSON.stringify(t,null,2):(a.default.warn("[core]","This feature (JSON output with special formatting) is unstable. See https://github.com/larsgw/citation.js/issues/144"),h(t,s.dict.get(i))),ndjson:(t,{version:e="1.0.2"}={})=>(e<"1.0.2"&&(t=n.downgradeCsl(t)),t.map(t=>JSON.stringify(t)).join("\n"))}},34498,(t,e,i)=>{"use strict";function r(t){if("citation-label"in t)return t["citation-label"];let e="";return t.author&&(e+=t.author[0].family||t.author[0].literal),t.issued&&t.issued["date-parts"]&&t.issued["date-parts"][0]&&(e+=t.issued["date-parts"][0][0]),t["year-suffix"]?e+=t["year-suffix"]:t.title&&(e+=t.title.replace(/<\/?.*?>/g,"").match(/^(?:(?:the|a|an)\s+)?(\S+)/i)[1]),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,i.getLabel=r,i.default={label:t=>t.reduce((t,e)=>(t[e.id]=r(e),t),{})}},88384,(t,e,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=n(t.r(91149)),s=n(t.r(34498));function n(t){return t&&t.__esModule?t:{default:t}}i.default=Object.assign({},r.default,s.default)},97930,t=>{"use strict";t.i(70391);var e=t.i(15167),i=t.i(76639),r=t.i(10384),s=t.i(45726),n=t.i(96461),a=t.i(38344),o=t.i(47130),l=t.i(95831),u=t.i(22875);let p=o.default,c=l.default,h=u.default.diacritics,f=u.default.commands,m=u.default.mathCommands,d={jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12",acmcs:"ACM Computing Surveys",acta:"Acta Informatica",cacm:"Communications of the ACM",ibmjrd:"IBM Journal of Research and Development",ibmsj:"IBM Systems Journal",ieeese:"IEEE Transactions on Software Engineering",ieeetc:"IEEE Transactions on Computers",ieeetcad:"IEEE Transactions on Computer-Aided Design of Integrated Circuits",ipl:"Information Processing Letters",jacm:"Journal of the ACM",jcss:"Journal of Computer and System Sciences",scp:"Science of Computer Programming",sicomp:"SIAM Journal on Computing",tocs:"ACM Transactions on Computer Systems",tods:"ACM Transactions on Database Systems",tog:"ACM Transactions on Graphics",toms:"ACM Transactions on Mathematical Software",toois:"ACM Transactions on Office Information Systems",toplas:"ACM Transactions on Programming Languages and Systems",tcs:"Theoretical Computer Science"},g={it:"italics",itshape:"italics",sl:"italics",slshape:"italics",em:"italics",bf:"bold",bfseries:"bold",sc:"smallcaps",scshape:"smallcaps",rm:void 0,sf:void 0,tt:void 0},b={textit:"italics",textsl:"italics",emph:"italics",mkbibitalic:"italics",mkbibemph:"italics",textbf:"bold",strong:"bold",mkbibbold:"bold",textsc:"smallcaps",textsuperscript:"superscript",textsubscript:"subscript",enquote:"quotes",mkbibquote:"quotes",textmd:void 0,textrm:void 0,textsf:void 0,texttt:void 0,textup:void 0},y={italics:["<i>","</i>"],bold:["<b>","</b>"],superscript:["<sup>","</sup>"],subscript:["<sub>","</sub>"],smallcaps:['<span style="font-variant:small-caps;">',"</span>"],nocase:['<span class="nocase">',"</span>"],quotes:["“","”"]},v={ElsevierGlyph:t=>String.fromCharCode(parseInt(t,16)),href:(t,e)=>t,url:t=>t},_=/---?|''|``|~/g,k={"--":"–","---":"—","``":"“","''":"”","~":" "},w={"^":"superscript",sp:"superscript",_:"subscript",sb:"subscript",mathrm:void 0},x={"^":{0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹","+":"⁺","-":"⁻","=":"⁼","(":"⁽",")":"⁾",i:"ⁱ",n:"ⁿ"},_:{0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉","+":"₊","-":"₋","=":"₌","(":"₍",")":"₎",a:"ₐ",e:"ₑ",o:"ₒ",x:"ₓ",ə:"ₔ",h:"ₕ",k:"ₖ",l:"ₗ",m:"ₘ",n:"ₙ",s:"ₚ",p:"ₛ",t:"ₜ"}},E=["american","british","canadian","english","australian","newzealand","usenglish","ukenglish","en","eng","en-au","en-bz","en-ca","en-cb","en-gb","en-ie","en-jm","en-nz","en-ph","en-tt","en-us","en-za","en-zw","anglais"];t.s(["argumentCommands",0,v,"commands",0,f,"defaultStrings",0,d,"diacritics",0,h,"fieldTypes",0,c,"formatting",0,y,"formattingCommands",0,b,"formattingEnvs",0,g,"ligaturePattern",0,_,"ligatures",0,k,"mathCommands",0,m,"mathScriptFormatting",0,w,"mathScripts",0,x,"required",0,p,"sentenceCaseLanguages",0,E],77261);let T={constants:t.i(77261),types:{biblatex:n.default,bibtex:a.default},parse:{biblatex:!0,strict:!1,sentenceCase:"never"},format:{useIdAsLabel:!1,checkLabel:!0,asciiOnly:!0},biber:{annotationMarker:"+an",namedAnnotationMarker:":"}};function O(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function A(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?O(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}let S=/[a-zA-Z_][a-zA-Z0-9_:+-]*/,I={comment:/%.*/,whitespace:{match:/\s+/,lineBreaks:!0}},j=s.default.states({main:{junk:{match:/@[cC][oO][mM][mM][eE][nN][tT].+|[^@]+/,lineBreaks:!0},at:{match:"@",push:"entry"}},entry:A(A({},I),{},{otherEntryType:{match:/[sS][tT][rR][iI][nN][gG]|[pP][rR][eE][aA][mM][bB][lL][eE]/,next:"otherEntryContents"},dataEntryType:{match:S,next:"dataEntryContents"}}),otherEntryContents:A(A({},I),{},{lbrace:{match:/[{(]/,next:"fields"}}),dataEntryContents:A(A({},I),{},{lbrace:{match:/[{(]/,next:"dataEntryContents"},label:/[^,\s]+/,comma:{match:",",next:"fields"}}),fields:A(A({},I),{},{identifier:S,number:/-?\d+/,hash:"#",equals:"=",comma:",",quote:{match:'"',push:"quotedLiteral"},lbrace:{match:"{",push:"bracedLiteral"},rbrace:{match:/[})]/,pop:!0}}),quotedLiteral:{lbrace:{match:"{",push:"bracedLiteral"},quote:{match:'"',pop:!0},text:{match:/(?:\\[\\{]|[^{"])+/,lineBreaks:!0}},bracedLiteral:{lbrace:{match:"{",push:"bracedLiteral"},rbrace:{match:"}",pop:!0},text:{match:/(?:\\[\\{}]|[^{}])+/,lineBreaks:!0}}}),C={"(":")","{":"}"},N=new i.util.Grammar({Main(){let t=[];for(;;){for(;this.matchToken("junk");)this.consumeToken("junk");if(this.matchEndOfFile())break;t.push(this.consumeRule("Entry"))}return t.filter(Boolean)},_(){let t;for(;t!==this.token;)t=this.token,this.consumeToken("whitespace",!0),this.consumeToken("comment",!0)},Entry(){let t;this.consumeToken("at"),this.consumeRule("_");let e=(this.matchToken("otherEntryType")?this.consumeToken("otherEntryType"):this.consumeToken("dataEntryType")).value.toLowerCase();this.consumeRule("_");let i=this.consumeToken("lbrace").value;if(this.consumeRule("_"),"string"===e){let[t,e]=this.consumeRule("Field");this.state.strings[t]=e}else if("preamble"===e)this.consumeRule("Expression");else{let i=this.consumeToken("label").value;this.consumeRule("_"),this.consumeToken("comma"),this.consumeRule("_"),t=A({type:e,label:i},this.consumeRule("EntryBody"))}this.consumeRule("_");let s=this.consumeToken("rbrace").value;return s!==C[i]&&r.logger.warn("[plugin-bibtex]",`entry started with "${i}", but ends with "${s}"`),t},EntryBody(){let t={properties:{}};for(;this.matchToken("identifier");){let e,[i,r]=this.consumeRule("Field"),s="default";if(i.endsWith(T.biber.annotationMarker)?e=i.slice(0,-T.biber.annotationMarker.length):i.includes(T.biber.annotationMarker+T.biber.namedAnnotationMarker)&&([e,s]=i.split(T.biber.annotationMarker+T.biber.namedAnnotationMarker)),e?(t.annotations||(t.annotations={}),t.annotations[e]||(t.annotations[e]={}),t.annotations[e][s]=r):t.properties[i]=r,this.consumeRule("_"),this.consumeToken("comma",!0))this.consumeRule("_");else break}return t},Field(){let t=this.consumeToken("identifier").value.toLowerCase();return this.consumeRule("_"),this.consumeToken("equals"),this.consumeRule("_"),[t,this.consumeRule("Expression")]},Expression(){let t=this.consumeRule("ExpressionPart");for(this.consumeRule("_");this.matchToken("hash");)this.consumeToken("hash"),this.consumeRule("_"),t+=this.consumeRule("ExpressionPart").toString(),this.consumeRule("_");return t},ExpressionPart(){return this.matchToken("identifier")?this.state.strings[this.consumeToken("identifier").value.toLowerCase()]||"":this.matchToken("number")?parseInt(this.consumeToken("number")):this.matchToken("quote")?this.consumeRule("QuoteString"):this.consumeRule("BracketString")},QuoteString(){let t="";for(this.consumeToken("quote");!this.matchToken("quote");)t+=this.consumeRule("Text");return this.consumeToken("quote"),t},BracketString(){let t="";for(this.consumeToken("lbrace");!this.matchToken("rbrace");)t+=this.consumeRule("Text");return this.consumeToken("rbrace"),t},Text(){return this.matchToken("lbrace")?`{${this.consumeRule("BracketString")}}`:this.consumeToken("text").value}},{strings:d});function P(t){return N.parse(j.reset(t))}let D=/\n\s*(?=\[)/g,R=/^\[(.+?)\]\s*(?:\n([\s\S]+))?$/,L=/((?=.)\s)*\n\s*/g,B=/:(.*)/,F=t=>{let[,e,i]=t.match(R)||[];if(!e||!i)return{};{let t={type:"book",label:e,properties:{}};return i.trim().split(L).filter(t=>t).forEach(e=>{let[i,r]=e.split(B);r&&(i=i.trim(),r=r.trim(),"type"===i?t.type=r:t.properties[i]=r)}),t}},M=new Set(["the","a","an"]),U=/(?:<\/?.*?>|[\u0020-\u002F\u003A-\u0040\u005B-\u005E\u0060\u007B-\u007F])+/g,q=/[^\u0020-\u007F]+/g;function $(t){return null===t?"null":void 0===t?"undefined":T.format.checkLabel?t.toString().replace(U,""):t.toString()}function z(t){return t?t.normalize("NFKD").replace(q,"").split(U).find(t=>t.length&&!M.has(t.toLowerCase())):""}let G=new i.util.Translator([{source:"given",target:"given"},{source:"family",target:"family"},{source:"suffix",target:"suffix"},{source:"prefix",target:"non-dropping-particle"},{source:"family",target:"literal",when:{source:!1,target:{family:!1,given:!1}}}]),X=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],V="BibTeX type",W="BibTeX label",J={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},H={bathesis:"Bachelor's thesis",mathesis:"Master's thesis",phdthesis:"PhD thesis",candthesis:"Candidate thesis",techreport:"technical report",resreport:"research report",software:"computer software",datacd:"data cd",audiocd:"audio cd",patent:"patent",patentde:"German patent",patenteu:"European patent",patentfr:"French patent",patentuk:"British patent",patentus:"U.S. patent",patreq:"patent request",patreqde:"German patent request",patreqeu:"European patent request",patreqfr:"French patent request",patrequk:"British patent request",patrequs:"U.S. patent request"},K=/(^(?:ISAN )?(?:[0-9a-f]{4}-){4}[0-9a-z](?:-(?:[0-9a-f]{4}-){2}[0-9a-z])?$)|(^(?:979-?0-?|M-?)(?:\d{9}|(?=[\d-]{11}$)\d+-\d+-\d)$)|(^ISRN .{1,36}$)|(^(?:ISWC )?T-?\d{9}-?\d$)/i,Y={PICK:{toTarget:(...t)=>t.find(Boolean),toSource:t=>[t]},DATE:{toTarget(t){let e=t.split("/").map(t=>{let e,i,r,s;return t&&".."!==t?(i=+(e=t.split("T")[0].replace(/[?~%]$/,"").split("-"))[0].replace(/^Y(?=-?\d{4}\d+)/,"").replace(/X/g,"0"),r=+e[1],s=+e[2],!r||r>20?[i]:s?[i,r,s]:[i,r]):void 0});return isNaN(e[0][0])?{literal:t}:{"date-parts":e}},toSource(t){if("date-parts"in t)return t["date-parts"].map(t=>t.map(t=>t.toString().padStart(2,"0")).join("-")).join("/")}},YEAR_MONTH:{toTarget:(t,e,i)=>isNaN(+t)?{literal:t}:isNaN(+i)||isNaN(+e)?{"date-parts":[[+t,...function(t){let e,i;if(null==t)return[];if(+t)return[parseInt(t,10)];if((t=t.trim().toLowerCase())in J)return[J[t]];let r=t.split(/\s+/);return r[0]in J?(e=J[r[0]],i=parseInt(r[1])):r[1]in J&&(e=J[r[1]],i=parseInt(r[0])),i?[e,i]:e?[e]:[]}(e)]]}:{"date-parts":[[+t,+e,+i]]},toSource(t){if(!("date-parts"in t))return[];{let[e,i,r]=t["date-parts"][0];return[e.toString(),i?r?`${X[i-1]} ${r}`:i:void 0]}}},EPRINT:{toTarget(t,e){if("pubmed"===e)return t},toSource:t=>[t,"pubmed"]},EVENT_TITLE:{toTarget:(t,e)=>(e&&(t+=" ("+e+")"),t),toSource:t=>t.match(/^(.+)(?: \((.+)\))?$/).slice(1,3)},HOW_PUBLISHED:{toTarget(t){if(t.startsWith("http"))return t}},KEYWORDS:{toTarget:t=>t.join(","),toSource:t=>t.split(",")},LABEL:{toTarget:t=>[t,t],toSource(t,e,i,r,s,n){let a;if(e&&(!T.format.checkLabel||!e.match(U)))return e;if(T.format.useIdAsLabel)return $(t);return a="",i&&i[0]&&(a+=z(i[0].family||i[0].literal)),r&&r["date-parts"]&&r["date-parts"][0]&&(a+=r["date-parts"][0][0]),s?a+=s:n&&(a+=z(n)),a||$(t)}},NAMES:{toTarget:t=>t.map(G.convertToTarget),toSource:t=>t.map(G.convertToSource)},NAMES_ORCID:{toTarget:(t,e)=>t.map((t,i)=>{var r;let s=G.convertToTarget(t);return"string"==typeof(null==e||null==(r=e.item)?void 0:r[i])&&(s._orcid=e.item[i]),s}),toSource(t){let e=[],i=[];for(let r=0;r<t.length;r++)e.push(G.convertToSource(t[r])),t[r]._orcid&&(i[r]=t[r]._orcid);return[e,i.length?{item:i}:void 0]}},PAGES:{toTarget:t=>t.replace(/[–—]/,"-"),toSource:t=>t.replace("-","--")},STANDARD_NUMBERS:{toTarget:(...t)=>t.find(Boolean),toSource(t){let e=t.toString().match(K);return e?e.slice(1,5):[]}},STATUS:{toSource(t){if(/^(inpreparation|submitted|forthcoming|inpress|prepublished)$/i.test(t))return t}},TITLE:{toTarget:(t,e,i)=>(e&&(t+=": "+e),t),toSource:t=>[t]}};var Q=t.i(64745);let Z=[{source:"note",target:"accessed",when:{source:!1,target:{note:!1,addendum:!1}},convert:{toSource:t=>`[Online; accessed ${(0,Q.format)(t)}]`}},{source:"numpages",target:"number-of-pages",when:{source:{pagetotal:!1},target:!1}},{source:"pmid",target:"PMID",when:{source:{eprinttype:t=>"pmid"!==t,archiveprefix:t=>"pmid"!==t},target:!1}},{source:"pmcid",target:"PMCID",when:{target:!1}},{source:"s2id",target:"custom",convert:{toTarget:t=>({S2ID:t}),toSource:({S2ID:t})=>t}}],tt=[{source:"annote",target:"annote",when:{source:{annotation:!1},target:!1}},{source:"address",target:"publisher-place",convert:Y.PICK,when:{source:{location:!1},target:!1}},{source:["eprint","archiveprefix"],target:"PMID",convert:Y.EPRINT,when:{source:{eprinttype:!1},target:!1}},{source:"journal",target:"container-title",when:{source:{maintitle:!1,booktitle:!1,journaltitle:!1},target:!1}},{source:"school",target:"publisher",convert:Y.PICK,when:{source:{institution:!1,organization:!1,publisher:!1},target:!1}}],te=new i.util.Translator([...tt,...Z,{source:"abstract",target:"abstract"},{source:"urldate",target:"accessed",convert:Y.DATE},{source:"annotation",target:"annote"},{source:["author","author+an:orcid"],target:"author",convert:Y.NAMES_ORCID},{source:"library",target:"call-number"},{source:"chapter",target:"chapter-number"},{source:"bookauthor",target:"container-author",convert:Y.NAMES},{source:["maintitle","mainsubtitle","maintitleaddon"],target:"container-title",when:{source:!0,target:{"number-of-volumes":!0}},convert:Y.TITLE},{source:["booktitle","booksubtitle","booktitleaddon"],target:"container-title",when:{source:{maintitle:!1},target:{"number-of-volumes":!1,type:t=>!t||!t.startsWith("article")}},convert:Y.TITLE},{source:["journaltitle","journalsubtitle","journaltitleaddon"],target:"container-title",when:{source:{[V]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}},convert:Y.TITLE},{source:"shortjournal",target:"container-title-short",when:{source:{[V]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}}},{source:"shortjournal",target:"journalAbbreviation",when:{source:!1,target:{"container-title-short":!1}}},{source:"number",target:"collection-number",when:{source:{[V]:["book","mvbook","inbook","bookinbook","suppbook","collection","mvcollection","incollection","suppcollection","manual","suppperiodical","proceedings","mvproceedings","refererence"]},target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","post","post-weblog","personal_communication","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"series",target:"collection-title"},{source:"shortseries",target:"collection-title-short"},{source:"doi",target:"DOI"},{source:"edition",target:"edition"},{source:"editor",target:"editor",convert:Y.NAMES},{source:[V,"entrysubtype","type"],target:["type","genre"],convert:{toTarget:(t,e,i)=>(i||("mastersthesis"===t&&(i="mathesis"),"phdthesis"===t&&(i="phdthesis"),"techreport"===t&&(i="techreport")),[n.default.source[t]||"document",i||e]),toSource(t,e){let i=n.default.target[t]||"misc";return e in H?[i,void 0,e]:[i,e]}}},{source:V,when:{target:{type:!1}},convert:{toSource:()=>"misc"}},{source:"eventdate",target:"event-date",convert:Y.DATE},{source:"venue",target:"event-place"},{source:["eventtitle","eventtitleaddon"],target:"event-title",convert:Y.EVENT_TITLE},{source:["eventtitle","eventtitleaddon"],target:"event",convert:Y.EVENT_TITLE,when:{source:!1,target:{"event-title":!1}}},{source:W,target:["id","citation-key","author","issued","year-suffix","title"],convert:Y.LABEL},{source:"isbn",target:"ISBN"},{source:"issn",target:"ISSN"},{source:"issue",target:"issue",when:{source:{number:!1,[V]:["article","periodical"]},target:{issue:t=>"string"==typeof t&&!t.match(/\d+/),type:["article","article-journal","article-newspaper","article-magazine","periodical"]}}},{source:"number",target:"issue",when:{source:{[V]:["article","periodical","inproceedings"]},target:{issue:t=>t&&("number"==typeof t||t.match(/\d+/)),type:["article","article-journal","article-newspaper","article-magazine","paper-conference","periodical"]}}},{source:"date",target:"issued",convert:Y.DATE},{source:["year","month","day"],target:"issued",convert:Y.YEAR_MONTH,when:{source:{date:!1},target:!1}},{source:"location",target:"jurisdiction",when:{source:{type:"patent"},target:{type:"patent"}}},{source:"keywords",target:"keyword",convert:Y.KEYWORDS},{source:"language",target:"language",convert:Y.PICK},{source:"langid",target:"language",when:{source:{language:!1},target:!1}},{source:"note",target:"note"},{source:"addendum",target:"note",when:{source:{note:!1},target:!1}},{source:"eid",target:"number",when:{target:{type:["article-journal"]}}},{source:["isan","ismn","isrn","iswc"],target:"number",convert:Y.STANDARD_NUMBERS,when:{source:{[V]:t=>"patent"!==t},target:{type:t=>"patent"!==t}}},{source:"number",target:"number",when:{source:{[V]:["patent","report","techreport","legislation"]},target:{type:["patent","report","legislation"]}}},{source:"origdate",target:"original-date",convert:Y.DATE},{source:"origlocation",target:"original-publisher-place",convert:Y.PICK},{source:"origpublisher",target:"original-publisher",convert:Y.PICK},{source:"origtitle",target:"original-title"},{source:"pages",target:"page",when:{source:{bookpagination:[void 0,"page"]}},convert:Y.PAGES},{source:"pagetotal",target:"number-of-pages"},{source:"part",target:"part-number"},{source:["eprint","eprinttype"],target:"PMID",convert:Y.EPRINT},{source:"location",target:"publisher-place",convert:Y.PICK},{source:"publisher",target:"publisher",convert:Y.PICK,when:{source:!0,target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","patent","performance","periodical","personal_communication","post","post-weblog","regulation","review","review-book","software","song","speech","standard","treaty"]}}},{source:"organization",target:"publisher",convert:Y.PICK,when:{source:{publisher:!1},target:{type:["paper-conference","webpage"]}}},{source:"institution",target:"publisher",convert:Y.PICK,when:{source:{publisher:!1,organization:!1},target:{type:["report","thesis"]}}},{source:"howpublished",target:"publisher",convert:Y.PICK,when:{source:{howpublished:t=>t&&!t.startsWith("http"),publisher:!1,organization:!1,institution:!1},target:{type:"manuscript"}}},{source:["pages","bookpagination"],target:"section",when:{source:{bookpagination:"section"},target:{page:!1}},convert:{toTarget:t=>t,toSource:t=>[t,"section"]}},{source:"pubstate",target:"status",convert:Y.STATUS},{source:"shorttitle",target:"title-short"},{source:"shorttitle",target:"shortTitle",when:{source:!1,target:{"title-short":!1}}},{source:["title","subtitle","titleaddon"],target:"title",convert:Y.TITLE},{source:"translator",target:"translator",convert:Y.NAMES},{source:"url",target:"URL"},{source:"howpublished",target:"URL",convert:Y.HOW_PUBLISHED,when:{source:{url:!1},target:!1}},{source:"version",target:"version"},{source:"volume",target:"volume"},{source:"volumes",target:"number-of-volumes"},{source:["issuetitle","issuesubtitle","issuetitleaddon"],target:"volume-title",convert:Y.TITLE}]),ti=new i.util.Translator([{source:"note",target:"accessed",when:{source:!1,target:{note:!1}},convert:{toSource:t=>`[Online; accessed ${(0,Q.format)(t)}]`}},{source:"annote",target:"annote"},{source:"address",target:"publisher-place",convert:Y.PICK},{source:"author",target:"author",convert:Y.NAMES},{source:"chapter",target:"chapter-number"},{source:"number",target:"collection-number",when:{source:{[V]:["book","mvbook","inbook","collection","mvcollection","incollection","suppcollection","manual","suppperiodical","proceedings","mvproceedings","refererence"]},target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","post","post-weblog","personal_communication","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"series",target:"collection-title"},{source:"booktitle",target:"container-title",when:{target:{type:["chapter","paper-conference"]}}},{source:"journal",target:"container-title",when:{source:{[V]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}}},{source:"doi",target:"DOI"},{source:"edition",target:"edition"},{source:"editor",target:"editor",convert:Y.NAMES},{source:W,target:["id","citation-key","author","issued","year-suffix","title"],convert:Y.LABEL},{source:"isbn",target:"ISBN"},{source:"issn",target:"ISSN"},{source:"number",target:"issue",when:{source:{[V]:["article","periodical","inproceedings"]},target:{issue:t=>"number"==typeof t||"string"==typeof t&&t.match(/\d+/),type:["article","article-journal","article-newspaper","article-magazine","paper-conference","periodical"]}}},{source:["year","month","day"],target:"issued",convert:Y.YEAR_MONTH},{source:"note",target:"note"},{source:"number",target:"number",when:{source:{[V]:["patent","report","techreport"]},target:{type:["patent","report"]}}},{source:"eid",target:"number",when:{source:{number:!1},target:{type:["article-journal"]}}},{source:"pages",target:"page",convert:Y.PAGES},{source:"publisher",target:"publisher",convert:Y.PICK,when:{target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","map","motion_picture","musical_score","pamphlet","patent","performance","periodical","personal_communication","post","post-weblog","regulation","review","review-book","software","song","speech","standard","treaty","webpage"]}}},{source:"organization",target:"publisher",convert:Y.PICK,when:{source:{publisher:!1},target:{type:"paper-conference"}}},{source:"institution",target:"publisher",convert:Y.PICK,when:{source:{publisher:!1,organization:!1},target:{type:"report"}}},{source:"school",target:"publisher",convert:Y.PICK,when:{source:{institution:!1,organization:!1,publisher:!1},target:{type:"thesis"}}},{source:"howpublished",target:"publisher",convert:Y.PICK,when:{source:{howpublished:t=>t&&!t.startsWith("http"),publisher:!1,organization:!1,institution:!1,school:!1},target:{type:"manuscript"}}},{source:"title",target:"title"},{source:[V,"type"],target:["type","genre"],convert:{toTarget(t,e){let i=a.default.source[t]||"document";return e?[i,e]:"mastersthesis"===t?[i,"Master's thesis"]:"phdthesis"===t?[i,"PhD thesis"]:[i]},toSource(t,e){let i=a.default.target[t]||"misc";return/^(master'?s|diploma) thesis$/i.test(e)?["mastersthesis"]:/^(phd|doctoral) thesis$/i.test(e)?["phdthesis"]:[i,e]}}},{source:V,when:{target:{type:!1}},convert:{toSource:()=>"misc"}},{source:"url",target:"URL"},{source:"howpublished",target:"URL",convert:Y.HOW_PUBLISHED,when:{target:{publisher:!1}}},{source:"volume",target:"volume"}]);function tr(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}let ts=new Set(["book","inbook","bookinbook","suppbook"]),tn=new Set(["inbook","bookinbook","suppbook"]),ta=new Set(["collection","reference","incollection","inreference","suppcollection"]),to=new Set(["incollection","inreference","suppcollection"]),tl={mvbook:["main",ts],mvcollection:["main",ta],mvreference:["main",ta],mvproceedings:["main",new Set(["proceedings","inproceedings"])],book:["book",tn],collection:["book",to],reference:["book",to],proceedings:["book",new Set(["inproceedings"])],periodical:["journal",new Set(["article","suppperiodical"])]};function tu(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function tp(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function tc(t,e){let i={};for(let e of t)i[e.label]=e;return t.map(({type:t,label:r,properties:s})=>e.convertToTarget(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tu(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=tp(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tu(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({[V]:t,[W]:r},function t(e,i,r){if(i.crossref in r){let s=r[i.crossref];if(s.properties===i)return i;let n=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tr(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tr(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}({},t(s.type,s.properties,r));if(delete n.ids,delete n.crossref,delete n.xref,delete n.entryset,delete n.entrysubtype,delete n.execute,delete n.label,delete n.options,delete n.presort,delete n.related,delete n.relatedoptions,delete n.relatedstring,delete n.relatedtype,delete n.shortand,delete n.shortandintro,delete n.sortkey,("mvbook"===s.type||"book"===s.type)&&tn.has(e)&&(n.bookauthor=n.author),s.type in tl){let[t,i]=tl[s.type];i.has(e)&&(n[t+"title"]=n.title,n[t+"subtitle"]=n.subtitle,"journal"!==t&&(n[t+"titleaddon"]=n.titleaddon),delete n.title,delete n.subtitle,delete n.titleaddon,delete n.shorttitle,delete n.sorttitle,delete n.indextitle,delete n.indexsorttitle)}return Object.assign(n,i)}return i}(t,s,i))))}function th(t,e){return t.map(t=>{let i=e.convertToSource(t),{[V]:r,[W]:s}=i;return{type:r,label:s,properties:function(t,e){if(null==t)return{};var i,r,s=function(t,e){if(null==t)return{};var i={};for(var r in t)if(({}).hasOwnProperty.call(t,r)){if(e.includes(r))continue;i[r]=t[r]}return i}(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)i=n[r],e.includes(i)||({}).propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}(i,[V,W].map(tp))}})}function tf(t){if(0===t.length)return;let e="";for(;t.length>1;){let{value:i,hyphenated:r}=t.shift();e+=i+(r?"-":" ")}let i=e+t[0].value;return i[0]&&i}function tm(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function td(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tm(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tm(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}let tg={commandBegin:{match:"\\begin",push:"environment"},command:{match:/\\(?:[a-zA-Z]+|.) */,value:t=>t.slice(1).trim()},lbrace:{match:"{",push:"bracedLiteral"},mathShift:{match:"$",push:"mathLiteral"},whitespace:{match:/[\s]+|~/,lineBreaks:!0,value:t=>"~"===t?" ":" "}},tb=s.default.states({stringLiteral:td(td({},tg),{},{text:/[^{$}\s~\\]+/}),namesLiteral:td(td({and:/\s+[aA][nN][dD]\s+/,comma:",",hyphen:"-",equals:"="},tg),{},{text:/[^{$}\s~\\,=-]+/}),listLiteral:td(td({and:/\s+and\s+/},tg),{},{text:/[^{$}\s~\\]+/}),separatedLiteral:td(td({comma:","},tg),{},{text:/[^{$}\s~\\,]+/}),annotation:td(td({},tg),{},{colon:":",equals:"=",comma:",",semicolon:";",quote:'"',itemCount:/\d+/,text:/[^{$}\s~\\":;,=]+/}),bracedLiteral:td(td({},tg),{},{rbrace:{match:"}",pop:!0},text:/[^{$}\s~\\]+/}),mathLiteral:td(td({},tg),{},{mathShift:{match:"$",pop:!0},script:/[\^_]/,text:/[^{$}\s~\\^_]+/}),environment:td(td({commandEnd:{match:"\\end",pop:!0}},tg),{},{text:/[^{$}\s~\\]+/})});function ty(t,e){return e in y?t&&y[e].join(t):t}let tv=new i.util.Grammar({String(){var t;let e="";for(;!this.matchEndOfFile();)e+=this.consumeRule("Text");return(t=e)[0],t},StringNames(){let t=[];for(;;){if(this.consumeToken("whitespace",!0),t.push(this.consumeRule("Name")),this.consumeToken("whitespace",!0),this.matchEndOfFile())return t;this.consumeToken("and")}},Name(){let t=[];for(;;){if(t.push(this.consumeRule("NamePiece")),this.matchEndOfFile()||this.matchToken("and"))return function(t){if(t[0][0].label){let e={};for(let[{value:i,label:r}]of t)e[r]=i;return e}let e={},[i,r,s]=function(t,e=!0){let i=[],r=[];if(e)for(;t.length>1&&!1!==t[0].upperCase;){for(i.push(...r),r.length=0;t.length>1&&!1!==t[0].upperCase&&!t[0].hyphenated;)i.push(t.shift());for(;t.length>0&&!1!==t[0].upperCase&&t[0].hyphenated;)r.push(t.shift())}let s=[],n=[];for(;t.length>1;){for(s.push(...n),n.length=0;t.length>1&&!1===t[0].upperCase;)s.push(t.shift());for(;t.length>0&&!1!==t[0].upperCase;)n.push(t.shift())}return r.length&&n.unshift(...r),t.length&&n.push(t[0]),[tf(i),tf(s),tf(n)]}(t[0],1===t.length);return s&&(e.family=s),r&&(e.prefix=r),3===t.length?(e.given=tf(t[2]),e.suffix=tf(t[1])):2===t.length?e.given=tf(t[1]):i&&(e.given=i),e}(t);this.consumeToken("comma"),this.consumeToken("whitespace",!0)}},NamePiece(){let t=[];for(;;){let e=this.consumeRule("NameToken");if(e.label)return e.label=tf([...t,{value:e.label}]),[e];if(t.push(e),this.matchEndOfFile()||this.matchToken("and")||this.matchToken("comma"))return t;for(;this.matchToken("hyphen")||this.matchToken("whitespace");)this.consumeToken()}},NameToken(){let t=null,e="";for(;;)if(null===t&&this.matchToken("text")){let i=this.consumeToken().value;e+=i,t=function(t){let e=t.toUpperCase(),i=t.toLowerCase();for(let r=0;r<t.length;r++)if(e[r]!==i[r])return e[r]===t[r];return null}(i)}else if(this.matchEndOfFile()||this.matchToken("and")||this.matchToken("comma")||this.matchToken("whitespace"))return{value:e,upperCase:t};else if(this.matchToken("hyphen"))return{value:e,upperCase:t,hyphenated:!0};else if(this.matchToken("equals")){this.consumeToken("equals");let t=this.consumeRule("NamePiece");return t[0].label&&(e+="="+t[0].label),{value:tf(t),label:e}}else e+=this.consumeRule("Text")},StringList(){let t=[];for(;!this.matchEndOfFile();){var e;let i="";for(;!this.matchEndOfFile()&&!this.matchToken("and");)i+=this.consumeRule("Text");t.push(((e=i)[0],e)),this.consumeToken("and",!0)}return 1===t.length?t[0]:t},StringSeparated(){let t=[];for(;!this.matchEndOfFile();){let e="";for(;!this.matchEndOfFile()&&!this.matchToken("comma");)e+=this.consumeRule("Text");t.push(e.trim()),this.consumeToken("comma",!0),this.consumeToken("whitespace",!0)}return t},StringVerbatim(){var t;let e="";for(;!this.matchEndOfFile();)e+=this.consumeToken().text;return(t=e)[0],t},StringUri(){let t=this.consumeRule("StringVerbatim");try{if(decodeURI(t)===t)return encodeURI(t);return t}catch(e){return encodeURI(t)}},StringTitleCase(){var t;this.state.sentenceCase=!0;let e="";for(;!this.matchEndOfFile();)e+=this.consumeRule("Text");return(t=e)[0],t},Annotations(){let t={};for(;;){let{scope:e,item:i,part:r,value:s}=this.consumeRule("Annotation");if("part"===e?(t.part||(t.part=[]),t.part[i]||(t.part[i]={}),t.part[i][r]=s):"item"===e?(t.item||(t.item=[]),t.item[i]=s):t.field=s,this.matchEndOfFile())break;this.consumeToken("semicolon"),this.consumeRule("_")}return t},Annotation(){var t,e,i;let r={};if(this.matchToken("itemCount")?(r.item=parseInt(this.consumeToken("itemCount"))-1,this.matchToken("colon")?(this.consumeToken("colon"),r.part=this.consumeToken("text"),r.scope="part"):r.scope="item"):r.scope="field",this.consumeToken("equals"),this.consumeRule("_"),this.matchToken("quote")){this.consumeToken("quote");let e="";for(;!this.matchToken("quote");)this.matchToken("itemCount")||this.matchToken("colon")||this.matchToken("comma")||this.matchToken("semicolon")||this.matchToken("equals")?(e+=this.token.value,this.token=this.lexer.next()):e+=this.consumeRule("Text");this.consumeToken("quote"),(t=e)[0],r.value=t,this.consumeRule("_")}else{r.value=[];let t="";for(;;)if(t+=this.consumeRule("Text"),this.matchToken("comma"))this.consumeToken("comma"),this.consumeRule("_"),r.value.push(((e=t)[0],e)),t="";else if(this.matchEndOfFile()||this.matchToken("semicolon")){r.value.push(((i=t)[0],i));break}}return r},BracketString(){var t;let e="";this.consumeToken("lbrace");let i=this.state.sentenceCase;for(this.state.sentenceCase=i&&this.matchToken("command"),(t=this.state).partlyLowercase&&(t.partlyLowercase=this.state.sentenceCase);!this.matchToken("rbrace");)e+=this.consumeRule("Text");let r=i&&!this.state.sentenceCase&&this.state.partlyLowercase;return this.state.sentenceCase=i,this.consumeToken("rbrace"),r?ty(e,"nocase"):e},MathString(){let t="";for(this.consumeToken("mathShift");!this.matchToken("mathShift");){if(this.matchToken("script")){let e=this.consumeToken("script").value,i=this.consumeRule("Text").split("");i.every(t=>t in x[e])?t+=i.map(t=>x[e][t]).join(""):t+=y[w[e]].join(i.join(""));continue}if(this.matchToken("command")){let e=this.token.value;if(e in w){this.consumeToken("command"),t+=ty(this.consumeRule("BracketString"),w[e]);continue}}t+=this.consumeRule("Text")}return this.consumeToken("mathShift"),t},Text(){if(this.matchToken("lbrace"))return this.consumeRule("BracketString");if(this.matchToken("mathShift"))return this.consumeRule("MathString");if(this.matchToken("whitespace"))return this.consumeToken("whitespace").value;if(this.matchToken("commandBegin"))return this.consumeRule("EnclosedEnv");if(this.matchToken("command"))return this.consumeRule("Command");let t=this.consumeToken("text").value.replace(_,t=>k[t]),e=this.state.afterPunctuation;if(this.state.afterPunctuation=/[?!.:]$/.test(t),!this.state.sentenceCase){var i;return(i=this.state).partlyLowercase||(i.partlyLowercase=t===t.toLowerCase()&&t!==t.toUpperCase()),t}let[r,...s]=t,n=s.join(""),a=n.toLowerCase();return n!==a?t:e?r+a:t.toLowerCase()},Command(){let t=this.consumeToken("command"),e=t.value;if(e in g)return ty(this.consumeRule("Env"),g[e]);if(e in b)return ty(this.consumeRule("BracketString"),b[e]);if(e in f)return f[e];if(e in m)return m[e];if(e in h&&!this.matchEndOfFile()){let t=this.consumeRule("Text");return(t[0]+h[e]).normalize("NFC")+t.slice(1)}else if(e in v){let t=v[e],i=[],r=t.length;for(;r-- >0;)this.consumeToken("whitespace",!0),i.push(this.consumeRule("BracketString"));return t(...i)}else if(/^[&%$#_{}]$/.test(e))return t.text.slice(1);else return t.text},Env(){let t="";for(;!this.matchEndOfFile()&&!this.matchToken("rbrace");)t+=this.consumeRule("Text");return t},EnclosedEnv(){this.consumeToken("commandBegin");let t=this.consumeRule("BracketString"),e="";for(;!this.matchToken("commandEnd");)e+=this.consumeRule("Text");let i=this.consumeToken("commandEnd"),r=this.consumeRule("BracketString");if(t!==r)throw SyntaxError(this.lexer.formatError(i,`environment started with "${t}", ended with "${r}"`));return ty(e,g[t])},_(){for(;this.matchToken("whitespace");)this.consumeToken("whitespace")}},{sentenceCase:!1,partlyLowercase:!1,afterPunctuation:!0});function t_(t){return E.includes(t.toLowerCase())}function tk(t,e,i=[]){let r=c[e]||[];return tv.parse(tb.reset(t,{state:function(t){if("name"===t[1])return"namesLiteral";switch(t[0]){case"list":return"listLiteral";case"separated":return"separatedLiteral";default:return"stringLiteral"}}(r),line:0,col:0}),function(t,e){if("name"===t[1])return"list"===t[0]?"StringNames":"Name";if("title"===t[1]){let t=T.parse.sentenceCase;return"always"===t||"english"===t&&(Array.isArray(e)?e.every(t_):t_(e))?"StringTitleCase":"String"}switch("field"===t[0]?t[1]:t[0]){case"list":return"StringList";case"separated":return"StringSeparated";case"verbatim":return"StringVerbatim";case"uri":return"StringUri";default:return"String"}}(r,i))}function tw(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function tx(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?tw(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tw(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function tE(t,e){let i=[];for(let{type:r,label:s,properties:n}of t)if(r in e){let t=[];for(let i of e[r])Array.isArray(i)&&!i.some(t=>t in n)?t.push(i.join("/")):"string"!=typeof i||i in n||t.push(i);t.length&&i.push([s,`missing fields: ${t.join(", ")}`])}else i.push([s,`invalid type: "${r}"`]);if(i.length)throw RangeError(["Invalid entries:"].concat(i.map(([t,e])=>`  - ${t} has ${e}`)).join("\n"))}function tT(t){let e={};for(let i in"language"in t.properties&&(e.language=tk(t.properties.language,"language")),t.properties){let r=t.properties[i];""!==r&&(e[i]=tk(r+"",i,e.language))}for(let r in t.annotations)for(let s in t.annotations[r]){var i;e[r+"+an:"+s]=(i=t.annotations[r][s],tv.parse(tb.reset(i,{state:"annotation",line:0,col:0}),"Annotations"))}return tx(tx({},t),{},{properties:e})}function tO(t){return T.parse.strict&&tE(t,p.biblatex),tc(t.map(tT),te)}function tA(t){return T.parse.strict&&tE(t,p.bibtex),tc(t.map(tT),ti)}let tS={};for(let t in f)tS[f[t]]=t;for(let t in h)tS[h[t]]=t;for(let t in k)tS[k[t]]=t;let tI={};for(let t in m)tI[m[t]]=t;let tj=/[^a-zA-Z0-9\s!"'()*+,\-./:;=?@[\]\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]/g,tC=/.[\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]+/g,tN=/[\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]/g,tP={separated:",",list:" and "},tD={i:"\\textit{",b:"\\textbf{",sc:"\\textsc{",sup:"\\textsuperscript{",sub:"\\textsubscript{",'span style="font-variant:small-caps;"':"\\textsc{",'span class="nocase"':"{"};function tR(t){return T.format.asciiOnly?t.normalize("NFKD").replace(tj,t=>{var e;return(e=t)in tS?tS[e]in k?tS[e]:`\\${tS[e]}{}`:e in tI?`$\\${tI[e]}$`:/^[&%$#_{}]$/.test(e)?`\\${e}`:""}).replace(tC,t=>Array.from(t).reduce((t,e)=>`{\\${tS[e]} ${t}}`)).replace(tN,""):t}function tL(t){let e=[],i=t.split(/<(\/?(?:i|b|sc|sup|sub|span)|span .*?)>/g);return(i=i.map((t,i)=>i%2==0?tR(t):t in tD?(e.push("/"+t.split(" ")[0]),tD[t]):t===e[e.length-1]?(e.pop(),"}"):"")).join("")}function tB(t,e){switch(e){case"title":return tL(t).split(/(:\s*)/).map((t,e)=>e%2?t:t.replace(/([^\\])\b([a-z]*[A-Z].*?)\b/g,"$1{$2}")).join("");case"literal":return tL(t.toString());case"name":if(t.family&&!t.prefix&&!t.given&!t.suffix)return t.family.includes(tP.list)?t.family:`{${t.family}}`;let i=[""];return t.prefix&&t.family&&(i[0]+=t.prefix+" "),t.family&&(i[0]+=t.family),t.suffix?(i.push(t.suffix),i.push(t.given||"")):i.push(t.given),tR(i.join(", ").trim());case"verbatim":case"uri":return t.toString();default:return tR(t.toString())}}function tF(t){return Array.isArray(t)?t.map(t=>tR(t).replace(/([;,"])/g,"{$1}")).join(", "):'"'+tR(t).replace(/(["])/g,"{$1}")+'"'}function tM({type:t,label:e,properties:i}){let r={type:t,label:e,properties:{}};for(let t in i){let e=i[t],[s,n]=t.split("+an:");n?(r.annotations||(r.annotations={}),r.annotations[s]||(r.annotations[s]={}),r.annotations[s][n]=function(t){let e=[];if(t.field&&e.push("="+tF(t.field)),t.item)for(let[i,r]of Object.entries(t.item)){if(!r)continue;let t=parseInt(i)+1;e.push(t+"="+tF(r))}if(t.part)for(let[i,r]of Object.entries(t.part)){if(!r)continue;let t=parseInt(i)+1;for(let i in r)r[i]&&e.push(t+":"+i+"="+tF(r[i]))}return e.join("; ")}(e)):r.properties[t]=function(t,e){let i;if(!(t in c))return tB(e,"verbatim");let[r,s]=c[t];if(!(r in tP))return tB(e,s);return i=tP[r],e.map(t=>{let e=tB(t,s);return e.includes(i)?`{${e}}`:e}).join(i)}(t,e)}return r}function tU(t){return th(t,ti).map(tM)}function tq(t,e,i){return i.listItem.join(`${t} = {${e}},`)}function t$(t,e){let i=t.map(t=>(function(t,e){let i=[];for(let r in t.properties)if(i.push(tq(r,t.properties[r],e)),t.annotations&&t.annotations[r])for(let s in t.annotations[r]){let n=r+T.biber.annotationMarker;"default"!==s&&(n+=T.biber.namedAnnotationMarker+s),i.push(tq(n,t.annotations[r][s],e))}return e.entry.join(`@${t.type}{${t.label},${e.list.join(i.join(""))}}`)})(t,e)).join("");return e.bibliographyContainer.join(i)}let tz=function(t,i){return function(r,s={}){let{type:n,format:a=n||"text"}=s;if(r=t(r),"object"===a)return r;if(e.plugins.dict.has(a))return i(r,e.plugins.dict.get(a),s);throw RangeError(`Output dictionary "${a}" not available`)}},tG={bibtex:tz(tU,t$),biblatex:tz(function(t){return th(t,te).map(tM)},t$),bibtxt:tz(tU,function(t,e){let i=t.map(t=>(function({type:t,label:e,properties:i},r){let s=Object.entries(i).concat([["type",t]]).map(([t,e])=>r.listItem.join(`${t}: ${e}`));return r.entry.join(`[${e}]${r.list.join(s.join(""))}`)})(t,e)).join("\n");return e.bibliographyContainer.join(i)})};e.plugins.add("@bibtex",{input:{"@biblatex/text":{parse:P,parseType:{dataType:"String",predicate:/@\s{0,5}[A-Za-z]{1,13}\s{0,5}\{\s{0,5}[^@{}"=,\\\s]{0,100}\s{0,5},[\s\S]*\}/}},"@biblatex/entry+object":{parse:t=>tO([t]),parseType:{dataType:"SimpleObject",propertyConstraint:{props:["type","label","properties"]}}},"@biblatex/entries+list":{parse:tO,parseType:{elementConstraint:"@biblatex/entry+object"}},"@bibtex/text":{parse:P,outputs:"@bibtex/entries+list"},"@bibtex/entry+object":{parse:t=>tA([t])},"@bibtex/entries+list":{parse:tA},"@bibtxt/text":{parse:t=>t.trim().split(D).map(F),parseType:{dataType:"String",predicate:/^\s*(\[(?!\s*[{[]).*?\]\s*(\n\s*[^[]((?!:)\S)+\s*:\s*.+?\s*)*\s*)+$/}}},output:tG,config:T}),t.s([],97930)},44613,t=>{"use strict";t.i(70391);var e=t.i(15167),i=t.i(76639),r=t.i(55181);let s=new i.util.Register(r.default);var n=t.i(95756);let a=new i.util.Register(n.default);var o=t.i(72278);let l=Symbol.for("proxied"),u=function(t){let e=function(e,i){if(e.sys.wrapBibliographyEntry){let[t,r]=e.sys.wrapBibliographyEntry(this.system_id);i=[t,i,r].join("")}return t.call(this,e,i)};return e[l]=!0,e};for(let t in o.default.Output.Formats){let e=o.default.Output.Formats[t]["@bibliography/entry"];e&&!e[l]&&(o.default.Output.Formats[t]["@bibliography/entry"]=u(e))}function p(t){if(s.has(t))return s.get(t);let e=t.replace("-","_");return s.has(e)?s.get(e):{}}let c={},h=function(t,e,i,r,s){let n,a=`${t}|${e}`;return c[a]instanceof o.default.Engine?((n=c[a]).sys.retrieveItem=r,n.sys.wrapBibliographyEntry=void 0,n.updateItems([])):n=c[a]=new o.default.Engine({retrieveLocale:s,retrieveItem:r},i,e,!0),n},f=function(t,e,i,r){if(!o.default.Output.Formats[r]||!o.default.Output.Formats[r]["@bibliography/entry"])throw TypeError(`Cannot find format '${r}'`);let n=t.reduce((t,e)=>(t[e.id]=e,t),{}),l=a.get(a.has(e)?e:"apa"),u=h(e,i=s.has(i)?i:void 0,l,function(t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];throw Error(`Cannot find entry with id '${t}'`)},p);return u.setOutputFormat(r),u.opt.development_extensions.wrap_url_and_doi=!1,u},m=(t,e)=>"function"==typeof e?e(t):e||"";function d(t){return"object"==typeof t?t:{id:t}}function g(t){return t.citationItems?t:{citationItems:[].concat(t).map(d),properties:{noteIndex:0}}}function b(t){return t?t.map(g):[]}e.plugins.add("@csl",{output:{bibliography:function(t,e={}){let{template:r="apa",lang:s,format:n="text",nosort:a=!1}=e,o=e.entry?[].concat(e.entry):t.map(({id:t})=>t),l=f(t=i.util.downgradeCsl(t),r,s,n),u=l.updateItems(o,a);if(e.append||e.prepend){let i=t.reduce((t,e)=>(t[e.id]=e,t),{});l.sys.wrapBibliographyEntry=function(t){let r=i[t];return[m(r,e.prepend),m(r,e.append)]}}e.hyperlinks&&(l.opt.development_extensions.wrap_url_and_doi=!0);let[{bibstart:p,bibend:c},h]=l.makeBibliography(),d=h.map((t,e)=>{var i;return i=u[e],t.replace(/^\s*<[a-z]+/i,`$& data-csl-entry-id="${i}"`)});return e.asEntryArray?d.map((t,e)=>[u[e],t]):p+d.join("")+c},citation:function(t,e={}){let{template:r="apa",lang:s,format:n="text"}=e,a=t.map(({id:t})=>t),o=e.entry?e.entry:a,l=f(t=i.util.downgradeCsl(t),r,s,n),u=b(e.citationsPre),p=g(o),c=b(e.citationsPost);return l.rebuildProcessorState([...u,p,...c],n,[])[u.length][2]}},config:{engine:f,locales:s,templates:a}}),t.s([],44613)},23399,t=>{"use strict";t.i(70391);var e=t.i(15167),i=t.i(30656),r=t.i(76639),s=t.i(65774),n=t.i(52774),a=t.i(64745);let o=/^\d{4}-\d{3}[0-9Xx]$/,l=/10(?:\.[0-9]{4,})?\/[^\s]*[^\s.,]/,u={ANY:{toTarget:(...t)=>t.find(Boolean),toSource:t=>[t]},PAGE:{keepAll:!0,toTarget:(t,e)=>[t,e].filter(Boolean).join("-"),toSource:t=>t.replace(/[-–—]/g,"-")},ISBN:{toTarget:t=>o.test(t)?[t]:[void 0,t],toSource:(...t)=>t.find(Boolean)},DATE:{toTarget:t=>t&&(0,a.parse)(t.split("/").slice(0,3).filter(Boolean).join("/")),toSource(t){if(!t["date-parts"]||!t["date-parts"][0])return;let e=[,,,,].fill("");return t["date-parts"][0].forEach((t,i)=>{e[i]=t}),t.season&&(e[3]=t.season),e.join("/")}},YEAR:{toTarget:t=>isNaN(+t)?{raw:t}:{"date-parts":[[+t]]},toSource(t){var e;return null==(e=t["date-parts"])||null==(e=e[0])||null==(e=e[0])?void 0:e.toString()}},DATE_YEAR:{keepAll:!0,toTarget:(...t)=>u.DATE.toTarget(u.ANY.toTarget(...t)),toSource:t=>[u.DATE.toSource(t),u.YEAR.toSource(t)]},NAME:{toTarget:t=>t&&[].concat(t).map(t=>{let e=t.split(/, ?/),[i,r,s]=e;switch(e.length){case 3:return{family:i,given:r,suffix:s};case 2:return{family:i,given:r};case 1:if(-1===i.indexOf(" "))return{family:i};default:return{literal:t}}}),toSource:t=>t.map(({family:t,given:e,suffix:i,literal:r})=>{let s=[t,e,i].filter(Boolean);return s.length?s.join(", "):r})},KEYWORD:{toTarget:t=>(t=[].concat(t)).join(","),toSource:t=>t.split(",")},ID:{toSource:t=>t.toString().slice(0,20)},TYPE:{toTarget:t=>s.default.RIS[t],toSource:t=>s.default.CSL[t]},DOI:{toTarget(t){let e=t.match(l);return e?e[0]:void 0},toSource(t){let e=t.match(l);return e?e[0]:void 0}}},p=[{source:"TY",target:"type"},{source:"ID",target:"id"},{source:["T1","TI","CT"],target:"title"},{source:"BT",target:"title",when:{source:{type:["BOOK","UNPB"],T1:!1,TI:!1,CT:!1},target:!1}},{source:"T2",target:"container-title",when:{target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","paper-conference","patent","personal_communication","post","post-weblog","report","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"BT",target:"container-title",when:{source:{type:["ABST","ADVS","ART","BILL","CASE","CHAP","COMP","CONF","CTLG","DATA","ELEC","GEN","HEAR","ICOMM","INPR","JFULL","JOUR","MAP","MGZN","MPCT","MUSIC","NEWS","PAMP","PAT","PCOMM","RPRT","SER","SLIDE","SOUND","STAT","THES","UNBILL","VIDEO"],T2:!1},target:!1}},{source:"T3",target:"collection-title"},{source:["A1","AU"],target:"author"},{source:["A2","ED"],target:"editor"},{source:"A3",target:"collection-editor"},{source:["Y1","PY"],target:"issued"},{source:"Y2",target:"event-date",convert:u.DATE,when:{source:{type:["CONF","CPAPER"]},target:{type:["paper-conference"]}}},{source:"Y2",target:"submitted",convert:u.DATE,when:{source:{type:["PAT"]},target:{type:"patent"}}},{source:["AB","N1"],target:"note"},{source:"N2",target:"abstract"},{source:"KW",target:"keyword"},{source:["JF","JO"],target:"container-title",convert:u.ANY,when:{target:{type:["article","article-journal","article-magazine","article-newspaper"]}}},{source:["JA","J1","J2"],target:"container-title-short"},{source:"VL",target:"volume"},{source:["IS","CP"],target:"issue"},{source:"SP",target:"page-first"},{source:["SP","EP"],target:"page",convert:u.PAGE,when:{source:{SP:!0,EP:!0}}},{source:"CY",target:"publisher-place"},{source:"PB",target:"publisher"},{source:"SN",target:["ISSN","ISBN"]},{source:"AV",target:"archive_location"},{source:"UR",target:"URL"}];var c=t.i(27363);let h=n.default.concat(c.default),f={new:n.default,old:p,mixed:h};var m=t.i(68408);function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach(function(e){var r,s,n;r=t,s=e,n=i[e],(s=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(s))in r?Object.defineProperty(r,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}let b=/^[A-Z][A-Z0-9] {2}-( |$)/,y=/ {2}-(?: |$)/,v=new Map;function _(t){if(!v.has(t)){for(let e of t){if("issued"===e.target&&!Array.isArray(e.source)){e.convert=u.YEAR;continue}if(e.target in m.default&&(e.convert=u[m.default[e.target]]),(!e.convert||!0!==e.convert.keepAll)&&Array.isArray(e.source))if(e.convert){let{toSource:t,toTarget:i}=e.convert;e.convert={toTarget:(...t)=>i(u.ANY.toTarget(...t)),toSource:(...e)=>u.ANY.toSource(t(...e))}}else e.convert=u.ANY}v.set(t,new r.util.Translator(t))}return v.get(t)}let k=["A1","AV","BT","CP","ED","EP","ID","J1","JA","JF","JO","L2","L3","N2","T1","U1","U2","U3","U4","U5","U6","Y1"],w=["A4","AD","AN","C1","C2","C3","C4","C5","C6","C7","C8","CA","CN","DA","DB","DO","DP","ET","LA","LB","NV","OP","PY","RI","RN","SE","ST","SV","TA","TT"];e.plugins.add("@ris",{input:{"@ris/file":{parse:function(t){let e,i,r=[];for(let n of t.split(/\r?\n/)){if(n=n.trim(),!b.test(n)){e&&i&&(e[i]+=" "+n);continue}let[t,a]=n.split(y);if(""===a.trim()){i=void 0;continue}switch(t){case"ER":e=void 0,i=void 0;break;case"TY":var s;e={},r.push(e),a="JOURN"===(s=(s=a).toUpperCase())?"JOUR":s;default:Array.isArray(e[t])?e[t].push(a):e[t]=e[t]?[e[t],a]:a,i=t}}return r},parseType:{dataType:"String",predicate:/^TY {2}- /m}},"@ris/record":{parse:function(t){return _(f.mixed).convertToTarget(t)},parseType:{dataType:"SimpleObject",propertyConstraint:{props:["TY"]}}},"@ris/new+record":{parse:function(t){return _(f.new).convertToTarget(t)},parseType:{extends:"@ris/record",propertyConstraint:[{props:w,match:"some"},{props:k,match:"none"}]}},"@ris/old+record":{parse:function(t){return _(f.old).convertToTarget(t)},parseType:{extends:"@ris/record",propertyConstraint:[{props:k,match:"some"},{props:w,match:"none"}]}}},config:i.default,output:{ris:function(t,{type:e,format:r=e||"text",spec:s}={}){let n=_(f[s||i.default.outputSpec]).convertToSource,a=t.map(t=>n(t.type?t:g(g({},t),{},{type:"document"})));return"object"===r?a:a.map(t=>{let e=[];for(let i in t)"TY"!==i&&e.push(...[].concat(t[i]).map(t=>`${i}  - ${t.toString().replace(/(.{70})/g,"$1\n")}`));return e.unshift(`TY  - ${t.TY}`),e.push("ER  - "),e.join("\n")}).join("\n")}}}),t.s([],23399)},31037,(t,e,i)=>{let r,s,n,a,o,l,u,p,c,h,f=t.r(74254);t.r(27576),t.r(97930),t.r(44613),t.r(9587),t.r(23399),t.r(41766);let m=t.r(72278),d=t.r(65136),g=t.r(64745),b={getAttributedEntry:(t,e,i)=>t.replace(/^\s*<[a-z]+/i,`$& data-${e}="${i}"`),getPrefixedEntry:(t,e)=>b.getAttributedEntry(t,"csl-entry-id",e),getWrappedEntry(t,e,i){let r=(t,e)=>"function"==typeof e?e(t):null==e?e:"";if(null==i.prepend&&null==i.append)return t;let s=r(e,i.prepend),n=r(e,i.append),a="",o="",l=t.match(/^([^>]+>)([\s\S]+)(<[^<]+)$/i);return l&&(a=l[1],t=l[2],o=l[3]),a+s+t+n+o}};function y(t,e){if(!(this instanceof y))return new y(t,e);let i=new f.Cite(t,e);this._options=i._options,this.log=i.log,this.data=i.data}y.prototype=Object.create(f.Cite.prototype),y.async=f.Cite.async,y.validateOptions=f.Cite.validateOptions,y.validateOutputOptions=f.Cite.validateOutputOptions,y.input=f.plugins.input.chain,y.inputAsync=f.plugins.input.chainAsync,y.util=Object.assign({attr:b},f.util),y.version={cite:f.version,citeproc:m.PROCESSOR_VERSION};let v=f.plugins.config.get("@csl");y.CSL={engine:t.r(36485).fetchEngine,item:t=>e=>t.find(t=>t.id===e),locale:t=>v.styles.get(v.styles.has(t)?t:"en-US"),style:t=>v.templates.get(v.templates.has(t)?t:"apa"),register:{addTemplate:v.templates.add.bind(v.templates),getTemplate:v.templates.get.bind(v.templates),hasTemplate:v.templates.has.bind(v.templates),addLocale:v.locales.add.bind(v.locales),getLocale:v.locales.get.bind(v.locales),hasLocale:v.locales.has.bind(v.locales)}},y.plugins=function t(e){let i={};for(let r in e)i[r]="object"==typeof e[r]?t(e[r]):e[r];return i}(f.plugins),delete y.plugins.input.util.clean,y.parse=Object.assign({input:{chain:f.plugins.input.chain,chainAsync:f.plugins.input.chainAsync,chainLink:f.plugins.input.chainLink,chainLinkAsync:f.plugins.input.chainLinkAsync,data:f.plugins.input.data,dataAsync:f.plugins.input.dataAsync,type:f.plugins.input.type,async:{chain:f.plugins.input.chainAsync,chainLink:f.plugins.input.chainLinkAsync,data:f.plugins.input.dataAsync}},name:d.parse,date:g.parse,csl:f.plugins.input.util.clean,bibjson:t.r(27576).parsers.json.record,bibtex:(r=t.r(90625).formats,s=t.r(21957),n=t.r(9449).target,{json:t=>t.parse([].concat(t)),prop(t,e){let i=s.parse([{type:"book",properties:{[t]:e}}])[0],r=Object.keys(i).find(([t])=>"type"!==t);return[r,i[r]]},text:t=>r["@biblatex/text"].parse(t),type:t=>n[t]||"book"}),bibtxt:{text:(a=t.r(80943)).parse,textEntry:a.textEntry},doi:{api:(o=t.r(9587)).parsers.api.parse,id:o.parsers.id.parse,async:{api:o.parsers.api.parseAsync}},json:t.r(83435).parsers.json.parse,wikidata:{json:(l=t.r(41766)).parsers.entity.parse,list:l.parsers.id.parse,prop:l.parsers.prop.parse,type:l.parsers.prop.parseType,async:{json:l.parsers.entity.parseAsync,prop(...t){return Promise.resolve(l.parsers.prop.parse.apply(this,t))}}}},y.plugins.input),y.get=Object.assign({dict:y.plugins.dict,name:d.format,date:g.format,bibtex:(u=t.r(33870).default,p=t.r(11327),c=t.r(51191).Converters,h=t.r(9449).target,{json:t=>p.formatBibtex([t])[0],label:({id:t,"citation-label":e,author:i,issued:r,"year-suffix":s,title:n})=>c.LABEL.toSource(t,e,i,r,s,n),text:(t,e)=>u.bibtex(t,{format:e?"html":"text"}),type:t=>h[t]||"misc"}),bibtxt:t.r(51957).format,json:t.r(88384).default.data,label:t.r(88384).default.label},y.plugins.output),e.exports=y}]);