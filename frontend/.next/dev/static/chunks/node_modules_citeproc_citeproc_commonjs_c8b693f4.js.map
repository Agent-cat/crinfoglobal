{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/vishnu/Documents/projects/crinfoglobal/frontend/node_modules/citeproc/citeproc_commonjs.js"],"sourcesContent":["/*\nCopyright (c) 2009-2019 Frank Bennett\n\n\tThis program is free software: you can redistribute it and/or\n\tmodify it under EITHER\n\n      * the terms of the Common Public Attribution License (CPAL) as\n\t    published by the Open Source Initiative, either version 1 of\n\t    the CPAL, or (at your option) any later version; OR\n\n      * the terms of the GNU Affero General Public License (AGPL)\n        as published by the Free Software Foundation, either version\n        3 of the AGPL, or (at your option) any later version.\n\n\tThis program is distributed in the hope that it will be useful,\n\tbut WITHOUT ANY WARRANTY; without even the implied warranty of\n\tMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n\tAffero General Public License for more details.\n\n\tYou should have received copies of the Common Public Attribution\n    License and of the GNU Affero General Public License along with\n    this program.  If not, see <https://opensource.org/licenses/> or\n    <http://www.gnu.org/licenses/> respectively.\n*/\n/*global CSL: true */\n\n/**\n * A Javascript implementation of the CSL citation formatting language.\n *\n * <p>A configured instance of the process is built in two stages,\n * using {@link CSL.Core.Build} and {@link CSL.Core.Configure}.\n * The former sets up hash-accessible locale data and imports the CSL format file\n * to be applied to the citations,\n * transforming it into a one-dimensional token list, and\n * registering functions and parameters on each token as appropriate.\n * The latter sets jump-point information\n * on tokens that constitute potential branch\n * points, in a single back-to-front scan of the token list.\n * This\n * yields a token list that can be executed front-to-back by\n * body methods available on the\n * {@link CSL.Engine} class.</p>\n *\n * <p>This top-level {@link CSL} object itself carries\n * constants that are needed during processing.</p>\n * @namespace A CSL citation formatter.\n */\n\n// IE6 does not implement Array.indexOf().\n// IE7 neither, according to rumour.\n\n\n// Potential skip words:\n// under; along; out; between; among; outside; inside; amid; amidst; against; toward; towards.\n// See https://forums.zotero.org/discussion/30484/?Focus=159613#Comment_159613\n\n'use strict';\n\n\nvar CSL = {\n\n    PROCESSOR_VERSION: \"1.4.61\",\n\n    error: function(str) { // default error function\n        if (\"undefined\" === typeof Error) {\n            throw new Error(\"citeproc-js error: \" + str);\n        } else {\n            throw \"citeproc-js error: \" + str;\n        }\n    },\n    debug: function(str) { // default debug function\n        if (\"undefined\" === typeof console) {\n            dump(\"CSL: \" + str + \"\\n\");\n        } else {\n            console.log(\"citeproc-js warning: \" + str);\n        }\n    },\n\n    toLocaleUpperCase(str) {\n        var arr = this.tmp.lang_array;\n        try {\n            str = str.toLocaleUpperCase(arr);\n        } catch (e) {\n            str = str.toUpperCase();\n        }\n        return str;\n    },\n\n    toLocaleLowerCase(str) {\n        var arr = this.tmp.lang_array;\n        try {\n            str = str.toLocaleLowerCase(arr);\n        } catch (e) {\n            str = str.toLowerCase();\n        }\n        return str;\n    },\n\n    LOCATOR_LABELS_REGEXP: new RegExp(\"^((vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\\\\.)\\\\s+(.*)\"),\n\n    STATUTE_SUBDIV_PLAIN_REGEX: /(?:(?:^| )(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\\. *)/,\n    STATUTE_SUBDIV_PLAIN_REGEX_FRONT: /(?:^\\s*[.,;]*\\s*(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\\. *)/,\n \n    STATUTE_SUBDIV_STRINGS: {\n        \"vrs.\": \"verse\",\n\t\t\"sv.\": \"sub-verbo\",\n        \"subpara.\": \"subparagraph\",\n        \"op.\": \"opus\",\n        \"subch.\": \"subchapter\",\n        \"add.\": \"addendum\",\n        \"amend.\": \"amendment\",\n        \"annot.\": \"annotation\",\n        \"app.\": \"appendix\",\n        \"art.\": \"article\",\n        \"bibliog.\": \"bibliography\",\n        \"bk.\": \"book\",\n        \"ch.\": \"chapter\",\n        \"cl.\": \"clause\",\n        \"col.\": \"column\",\n        \"cmt.\": \"comment\",\n        \"dec.\": \"decision\",\n        \"dept.\": \"department\",\n        \"ex.\": \"example\",\n        \"fig.\": \"figure\",\n        \"fld.\": \"field\",\n        \"fol.\": \"folio\",\n        \"n.\": \"note\",\n        \"hypo.\": \"hypothetical\",\n        \"illus.\": \"illustration\",\n        \"intro.\": \"introduction\",\n        \"l.\": \"line\",\n        \"no.\": \"issue\",\n        \"p.\": \"page\",\n        \"pp.\": \"page\",\n        \"para.\": \"paragraph\",\n        \"pt.\": \"part\",\n        \"pmbl.\": \"preamble\",\n        \"princ.\": \"principle\",\n        \"pub.\": \"publication\",\n        \"r.\": \"rule\",\n        \"rn.\": \"randnummer\",\n        \"sched.\": \"schedule\",\n        \"sec.\": \"section\",\n        \"ser.\": \"series,\",\n        \"subdiv.\": \"subdivision\",\n        \"subsec.\": \"subsection\",\n        \"supp.\": \"supplement\",\n        \"tbl.\": \"table\",\n        \"tit.\": \"title\",\n        \"vol.\": \"volume\"\n    },\n    STATUTE_SUBDIV_STRINGS_REVERSE: {\n        \"verse\": \"vrs.\",\n\t\t\"sub-verbo\": \"sv.\",\n        \"sub verbo\": \"sv.\",\n        \"subparagraph\": \"subpara.\",\n        \"opus\": \"op.\",\n        \"subchapter\": \"subch.\",\n        \"addendum\": \"add.\",\n        \"amendment\": \"amend.\",\n        \"annotation\": \"annot.\",\n        \"appendix\": \"app.\",\n        \"article\": \"art.\",\n        \"bibliography\": \"bibliog.\",\n        \"book\": \"bk.\",\n        \"chapter\": \"ch.\",\n        \"clause\": \"cl.\",\n        \"column\": \"col.\",\n        \"comment\": \"cmt.\",\n        \"decision\": \"dec.\",\n        \"department\": \"dept.\",\n        \"example\": \"ex.\",\n        \"figure\": \"fig.\",\n        \"field\": \"fld.\",\n        \"folio\": \"fol.\",\n        \"note\": \"n.\",\n        \"hypothetical\": \"hypo.\",\n        \"illustration\": \"illus.\",\n        \"introduction\": \"intro.\",\n        \"line\": \"l.\",\n        \"issue\": \"no.\",\n        \"page\": \"p.\",\n        \"paragraph\": \"para.\",\n        \"part\": \"pt.\",\n        \"preamble\": \"pmbl.\",\n        \"principle\": \"princ.\",\n        \"publication\": \"pub.\",\n        \"rule\": \"r.\",\n        \"randnummer\": \"rn.\",\n        \"schedule\": \"sched.\",\n        \"section\": \"sec.\",\n        \"series,\": \"ser.\",\n        \"subdivision\": \"subdiv.\",\n        \"subsection\": \"subsec.\",\n        \"supplement\": \"supp.\",\n        \"table\": \"tbl.\",\n        \"title\": \"tit.\",\n        \"volume\": \"vol.\"\n    },\n\n    LOCATOR_LABELS_MAP: {\n        \"vrs\": \"verse\",\n\t\t\"sv\": \"sub-verbo\",\n        \"subpara\": \"subparagraph\",\n        \"op\": \"opus\",\n        \"subch\": \"subchapter\",\n        \"add\": \"addendum\",\n        \"amend\": \"amendment\",\n        \"annot\": \"annotation\",\n        \"app\": \"appendix\",\n        \"art\": \"article\",\n        \"bibliog\": \"bibliography\",\n        \"bk\": \"book\",\n        \"ch\": \"chapter\",\n        \"cl\": \"clause\",\n        \"col\": \"column\",\n        \"cmt\": \"comment\",\n        \"dec\": \"decision\",\n        \"dept\": \"department\",\n        \"ex\": \"example\",\n        \"fig\": \"figure\",\n        \"fld\": \"field\",\n        \"fol\": \"folio\",\n        \"n\": \"note\",\n        \"hypo\": \"hypothetical\",\n        \"illus\": \"illustration\",\n        \"intro\": \"introduction\",\n        \"l\": \"line\",\n        \"no\": \"issue\",\n        \"p\": \"page\",\n        \"pp\": \"page\",\n        \"para\": \"paragraph\",\n        \"pt\": \"part\",\n        \"pmbl\": \"preamble\",\n        \"princ\": \"principle\",\n        \"pub\": \"publication\",\n        \"r\": \"rule\",\n        \"rn\": \"randnummer\",\n        \"sched\": \"schedule\",\n        \"sec\": \"section\",\n        \"ser\": \"series,\",\n        \"subdiv\": \"subdivision\",\n        \"subsec\": \"subsection\",\n        \"supp\": \"supplement\",\n        \"tbl\": \"table\",\n        \"tit\": \"title\",\n        \"vol\": \"volume\"\n    },\n    MODULE_MACROS: {\n        \"juris-pretitle\": true,\n        \"juris-title\": true,\n        \"juris-pretitle-short\": true,\n        \"juris-title-short\": true,\n        \"juris-main\": true,\n        \"juris-main-short\": true,\n        \"juris-tail\": true,\n        \"juris-tail-short\": true,\n        \"juris-locator\": true\n    },\n    MODULE_TYPES: {\n        \"legal_case\": true,\n        \"legislation\": true,\n        \"bill\": true,\n        \"hearing\": true,\n        \"gazette\": true,\n        \"report\": true,\n        \"regulation\": true,\n        \"standard\": true,\n        \"patent\": true,\n        \"locator\": true\n    },\n    checkNestedBrace: function(state) {\n        if (state.opt.xclass === \"note\") {\n            this.depth = 0;\n            this.update = function(str) {\n                \n                // Receives affix string, returns with flipped parens.\n                \n                var str = str ? str : \"\";\n                var lst = str.split(/([\\(\\)])/);\n                for (var i=1,ilen=lst.length;i<ilen;i += 2) {\n                    if (lst[i] === \"(\") {\n                        if (1 === (this.depth % 2)) {\n                            lst[i] = \"[\";\n                        }\n                        this.depth += 1;\n                    } else if (lst[i] === \")\") {\n                        if (0 === (this.depth % 2)) {\n                            lst[i] = \"]\";\n                        }\n                        this.depth -= 1;\n                    }\n                }\n                var ret = lst.join(\"\");\n                return ret;\n            };\n        } else {\n            this.update = function(str) {\n                return str;\n            };\n        }\n    },\n\n    MULTI_FIELDS: [\"event\", \"publisher\", \"publisher-place\", \"event-place\", \"title\", \"container-title\", \"collection-title\", \"authority\",\"genre\",\"title-short\",\"medium\",\"country\",\"jurisdiction\",\"archive\",\"archive-place\"],\n\n    LangPrefsMap: {\n        \"title\":\"titles\",\n        \"title-short\":\"titles\",\n        \"event\":\"titles\",\n        \"genre\":\"titles\",\n        \"medium\":\"titles\",\n        \"container-title\":\"journals\",\n        \"collection-title\":\"titles\",\n        \"archive\":\"journals\",\n        \"publisher\":\"publishers\",\n        \"authority\":\"publishers\",\n        \"publisher-place\": \"places\",\n        \"event-place\": \"places\",\n        \"archive-place\": \"places\",\n        \"jurisdiction\": \"places\",\n        \"number\": \"places\",\n        \"edition\":\"places\",\n        \"issue\":\"places\",\n        \"volume\":\"places\"\n    },\n\n    AbbreviationSegments: function () {\n        this[\"container-title\"] = {};\n        this[\"collection-title\"] = {};\n        this[\"institution-entire\"] = {};\n        this[\"institution-part\"] = {};\n        this.nickname = {};\n        this.number = {};\n        this.title = {};\n        this.place = {};\n        this.hereinafter = {};\n        this.classic = {};\n        this[\"container-phrase\"] = {};\n        this[\"title-phrase\"] = {};\n    },\n\n    getAbbrevsDomain: function (state, country, lang) {\n\t\tvar domain = null;\n        if (state.opt.availableAbbrevDomains && country && country !== \"default\") {\n\t        var globalDomainPreference = state.locale[state.opt.lang].opts[\"jurisdiction-preference\"];\n\t\t    var itemDomainPreference = null;\n\t\t    if (state.locale[lang]) {\n\t\t\t    itemDomainPreference = state.locale[lang].opts[\"jurisdiction-preference\"];\n\t\t    }\n\t\t    if (itemDomainPreference) {\n\t\t\t    for (var j=itemDomainPreference.length-1; j > -1; j--) {\n\t\t\t\t    if (state.opt.availableAbbrevDomains[country].indexOf(itemDomainPreference[j]) > -1) {\n\t\t\t\t\t    domain = itemDomainPreference[j];\n\t\t\t\t\t    break;\n\t\t\t\t    }\n\t\t\t    }\n\t\t    }\n\t\t    if (!domain && globalDomainPreference) {\n\t\t\t    for (var j=globalDomainPreference.length-1; j > -1; j--) {\n\t\t\t\t    if (state.opt.availableAbbrevDomains[country].indexOf(globalDomainPreference[j]) > -1) {\n\t\t\t\t\t    domain = globalDomainPreference[j];\n\t\t\t\t\t    break;\n\t\t\t\t    }\n\t\t\t    }\n\t\t    }\n        }\n        return domain;\n    },\n    \n    FIELD_CATEGORY_REMAP: {\n        \"title\": \"title\",\n        \"container-title\": \"container-title\",\n        \"collection-title\": \"collection-title\",\n        \"country\": \"place\",\n        \"number\": \"number\",\n        \"place\": \"place\",\n        \"archive\": \"container-title\",\n        \"title-short\": \"title\",\n        \"genre\": \"title\",\n        \"event\": \"title\",\n        \"medium\": \"title\",\n\t\t\"archive-place\": \"place\",\n\t\t\"publisher-place\": \"place\",\n\t\t\"event-place\": \"place\",\n\t\t\"jurisdiction\": \"place\",\n\t\t\"language-name\": \"place\",\n\t\t\"language-name-original\": \"place\",\n        \"call-number\": \"number\",\n        \"chapter-number\": \"number\",\n        \"collection-number\": \"number\",\n        \"edition\": \"number\",\n        \"page\": \"number\",\n        \"issue\": \"number\",\n        \"locator\": \"number\",\n        \"locator-extra\": \"number\",\n        \"number-of-pages\": \"number\",\n        \"number-of-volumes\": \"number\",\n        \"volume\": \"number\",\n        \"citation-number\": \"number\",\n        \"publisher\": \"institution-part\"\n    },\n    \n    parseLocator: function(item) {\n        if (this.opt.development_extensions.locator_date_and_revision) {\n            // Break out locator elements if necessary\n            if (item.locator) {\n                item.locator = \"\" + item.locator;\n                var idx = item.locator.indexOf(\"|\");\n                if (idx > -1) {\n                    var raw_locator = item.locator;\n                    item.locator = raw_locator.slice(0, idx);\n                    raw_locator = raw_locator.slice(idx + 1);\n                    var m = raw_locator.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}).*/);\n                    if (m) {\n                        item[\"locator-date\"] = this.fun.dateparser.parseDateToObject(m[1]);\n                        raw_locator = raw_locator.slice(m[1].length);\n                    }\n                    item[\"locator-extra\"] = raw_locator.replace(/^\\s+/, \"\").replace(/\\s+$/, \"\");\n                }\n            }\n        }\n        if (item.locator) {\n            item.locator = (\"\" + item.locator).replace(/\\s+$/, '');\n        }\n        return item;\n    },\n\n    normalizeLocaleStr: function(str) {\n        if (!str) {\n            return;\n        }\n        var lst = str.split('-');\n        lst[0] = lst[0].toLowerCase();\n        if (lst[1]) {\n            lst[1] = lst[1].toUpperCase();\n        }\n        return lst.join(\"-\");\n    },\n\n    parseNoteFieldHacks: function(Item, validFieldsForType, allowDateOverride) {\n        if (\"string\" !== typeof Item.note) {\n            return;\n        }\n        var elems = [];\n        var lines = Item.note.split('\\n');\n        // Normalize entries\n        for (var i=0, ilen=lines.length; i<ilen; i++) {\n            var line = lines[i];\n            var elems = [];\n            var m = line.match(CSL.NOTE_FIELDS_REGEXP);\n            if (m) {\n                var splt = line.split(CSL.NOTE_FIELDS_REGEXP);\n                for (var j=0,jlen=(splt.length-1);j<jlen;j++) {\n                    elems.push(splt[j]);\n                    elems.push(m[j]);\n                }\n                elems.push(splt[splt.length-1]);\n                for (var j=1,jlen=elems.length;j<jlen;j += 2) {\n                    // Abort conversions if preceded by unparseable text\n                    if (elems[j-1].trim() && (i>0 || j>1) && !elems[j-1].match(CSL.NOTE_FIELD_REGEXP)) {\n                        break;\n                    } else {\n                        elems[j] = '\\n' + elems[j].slice(2,-1).trim() + '\\n';\n                    }\n                }\n                lines[i] = elems.join('');\n            }\n        }\n        // Resplit\n        lines = lines.join('\\n').split('\\n');\n        var offset = 0;\n        var names = {};\n        for (var i=0,ilen=lines.length;i<ilen;i++) {\n            var line = lines[i];\n            var mm = line.match(CSL.NOTE_FIELD_REGEXP);\n            if (!line.trim()) {\n                continue;\n            } else if (!mm) {\n                if (i === 0) {\n                    continue;\n                } else {\n                    offset = i;\n                    break;\n                }\n            }\n            var key = mm[1];\n            var val = mm[2].replace(/^\\s+/, \"\").replace(/\\s+$/, \"\");\n            if (key === \"type\") {\n                Item.type = val;\n                lines[i] = \"\";\n            } else if (CSL.DATE_VARIABLES.indexOf(key.replace(/^alt-/, \"\")) > -1) {\n                if (!Item[key] || allowDateOverride) {\n                    Item[key] = CSL.DateParser.parseDateToArray(val);\n                    if (!validFieldsForType || (validFieldsForType[key] && this.isDateString(val))) {\n                        lines[i] = \"\";\n                    }\n                }\n            } else if (!Item[key]) {\n                if (CSL.NAME_VARIABLES.indexOf(key.replace(/^alt-/, \"\")) > -1) {\n                    if (!names[key]) {\n                        names[key] = [];\n                    }\n                    var lst = val.split(/\\s*\\|\\|\\s*/);\n                    if (lst.length === 1) {\n                        names[key].push({literal:lst[0]});\n                    } else if (lst.length === 2) {\n                        var name = {family:lst[0],given:lst[1]};\n                        CSL.parseParticles(name);\n                        names[key].push(name);\n                    }\n                } else {\n                    Item[key] = val;\n                }\n                if (!validFieldsForType || validFieldsForType[key]) {\n                    lines[i] = \"\";\n                }\n            }\n        }\n        for (var key in names) {\n            Item[key] = names[key];\n        }\n        // Final cleanup for validCslFields only: eliminate blank lines, add blank line to text\n        if (validFieldsForType) {\n            if (lines[offset].trim()) {\n                lines[offset] = '\\n' + lines[offset];\n            }\n            for (var i=offset-1;i>-1;i--) {\n                if (!lines[i].trim()) {\n                    lines = lines.slice(0, i).concat(lines.slice(i + 1));\n                }\n            }\n        }\n        Item.note = lines.join(\"\\n\").trim();\n    },\n\n    checkPrefixSpaceAppend: function (state, prefix) {\n        if (!prefix) {\n            prefix = \"\";\n        }\n        var sp = \"\";\n        // We need the raw string, without decorations\n        // of any kind. Markup scheme is known, though, so\n        // markup can be safely stripped at string level.\n        //\n        // U+201d = right double quotation mark\n        // U+2019 = right single quotation mark\n        // U+00bb = right double angle bracket (guillemet)\n        // U+202f = non-breaking thin space\n        // U+00a0 = non-breaking space\n        var test_prefix = prefix.replace(/<[^>]+>/g, \"\").replace(/[\"'\\u201d\\u2019\\u00bb\\u202f\\u00a0 ]+$/g,\"\");\n        var test_char = test_prefix.slice(-1);\n        if (test_prefix.match(CSL.ENDSWITH_ROMANESQUE_REGEXP)) {\n            sp = \" \";\n        } else if (CSL.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(test_char) > -1) {\n            sp = \" \";\n        } else if (test_char.match(/[\\)\\],0-9]/)) {\n            sp = \" \";\n        }\n        // Protect against double spaces, which would trigger an extra,\n        // explicit, non-breaking space.\n        var prefix = (prefix + sp).replace(/\\s+/g, \" \");\n        return prefix;\n    },\n\n    checkIgnorePredecessor: function(state, prefix) {\n        var ignorePredecessor = false;\n        var test_prefix = prefix.replace(/<[^>]+>/g, \"\").replace(/[\"'\\u201d\\u2019\\u00bb\\u202f\\u00a0 ]+$/g,\"\");\n        var test_char = test_prefix.slice(-1);\n        if (CSL.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(test_char) > -1 && prefix.trim().indexOf(\" \") > -1) {\n            state.tmp.term_predecessor = false;\n            return true;\n        }\n        return false;\n    },\n\n    checkSuffixSpacePrepend: function(state, suffix) {\n        if (!suffix) {\n            return \"\";\n        }\n        if (suffix.match(CSL.STARTSWITH_ROMANESQUE_REGEXP) || ['[','('].indexOf(suffix.slice(0,1)) > -1) {\n            suffix = \" \" + suffix;\n        }\n        return suffix;\n    },\n    \n    GENDERS: [\"masculine\", \"feminine\"],\n    \n    ERROR_NO_RENDERED_FORM: 1,\n\n    PREVIEW: \"Just for laughs.\",\n    ASSUME_ALL_ITEMS_REGISTERED: 2,\n\n    START: 0,\n    END: 1,\n    SINGLETON: 2,\n\n    SEEN: 6,\n    SUCCESSOR: 3,\n    SUCCESSOR_OF_SUCCESSOR: 4,\n    SUPPRESS: 5,\n\n    SINGULAR: 0,\n    PLURAL: 1,\n\n    LITERAL: true,\n\n    BEFORE: 1,\n    AFTER: 2,\n\n    DESCENDING: 1,\n    ASCENDING: 2,\n\n    PRIMARY: 1,\n    SECONDARY: 2,\n    \n    POSITION_FIRST: 0,\n    POSITION_SUBSEQUENT: 1,\n    POSITION_IBID: 2,\n    POSITION_IBID_WITH_LOCATOR: 3,\n    POSITION_CONTAINER_SUBSEQUENT: 4,\n\n    POSITION_MAP: {\n        \"0\": 0,\n        \"4\": 1,\n        \"1\": 2,\n        \"2\": 3,\n        \"3\": 4\n    },\n    \n    POSITION_TEST_VARS: [\"position\", \"first-reference-note-number\", \"near-note\"],\n\n    AREAS: [\"citation\", \"citation_sort\", \"bibliography\", \"bibliography_sort\", \"intext\"],\n\n    CITE_FIELDS: [\"first-reference-note-number\", \"first-container-reference-note-number\", \"locator\", \"locator-extra\"],\n\n    SWAPPING_PUNCTUATION: [\".\", \"!\", \"?\", \":\", \",\"],\n    TERMINAL_PUNCTUATION: [\":\", \".\", \";\", \"!\", \"?\", \" \"],\n\n    // update modes\n    NONE: 0,\n    NUMERIC: 1,\n    POSITION: 2,\n    TRIGRAPH: 3,\n\n    DATE_PARTS: [\"year\", \"month\", \"day\"],\n    DATE_PARTS_ALL: [\"year\", \"month\", \"day\", \"season\"],\n    DATE_PARTS_INTERNAL: [\"year\", \"month\", \"day\", \"year_end\", \"month_end\", \"day_end\"],\n\n    NAME_PARTS: [\"non-dropping-particle\", \"family\", \"given\", \"dropping-particle\", \"suffix\", \"literal\"],\n\n    DISAMBIGUATE_OPTIONS: [\n        \"disambiguate-add-names\",\n        \"disambiguate-add-givenname\",\n        \"disambiguate-add-year-suffix\"\n    ],\n\n    GIVENNAME_DISAMBIGUATION_RULES: [\n        \"all-names\",\n        \"all-names-with-initials\",\n        \"primary-name\",\n        \"primary-name-with-initials\",\n        \"by-cite\"\n    ],\n\n    NAME_ATTRIBUTES: [\n        \"and\",\n        \"delimiter-precedes-last\",\n        \"delimiter-precedes-et-al\",\n        \"initialize-with\",\n        \"initialize\",\n        \"name-as-sort-order\",\n        \"sort-separator\",\n        \"et-al-min\",\n        \"et-al-use-first\",\n        \"et-al-subsequent-min\",\n        \"et-al-subsequent-use-first\",\n        \"form\",\n        \"prefix\",\n        \"suffix\",\n        \"delimiter\"\n    ],\n\n    LOOSE: 0,\n    STRICT: 1,\n    TOLERANT: 2,\n\n    PREFIX_PUNCTUATION: /[.;:]\\s*$/,\n    SUFFIX_PUNCTUATION: /^\\s*[.;:,\\(\\)]/,\n\n    NUMBER_REGEXP: /(?:^\\d+|\\d+$)/,\n    //\n    // \\u0400-\\u042f are cyrillic and extended cyrillic capitals\n    // this is not fully smart yet.  can't do what this was trying to do\n    // with regexps, actually; we want to identify strings with a leading\n    // capital letter, and any subsequent capital letters.  Have to compare\n    // locale caps version with existing version, character by character.\n    // hard stuff, but if it breaks, that's what to do.\n    // \\u0600-\\u06ff is Arabic/Persian\n    // \\u200c-\\u200e and \\u202a-\\u202e are special spaces and left-right \n    // control characters\n\n\n\n    NAME_INITIAL_REGEXP: /^([A-Z\\u0e01-\\u0e5b\\u00c0-\\u017f\\u0400-\\u042f\\u0590-\\u05d4\\u05d6-\\u05ff\\u0600-\\u06ff\\u0370\\u0372\\u0376\\u0386\\u0388-\\u03ab\\u03e2\\u03e4\\u03e6\\u03e8\\u03ea\\u03ec\\u03ee\\u03f4\\u03f7\\u03fd-\\u03ff])([a-zA-Z\\u0e01-\\u0e5b\\u00c0-\\u017f\\u0400-\\u052f\\u0600-\\u06ff\\u0370-\\u03ff\\u1f00-\\u1fff]*|)(\\.)*/,\n    ROMANESQUE_REGEXP: /[-0-9a-zA-Z\\u0e01-\\u0e5b\\u00c0-\\u017f\\u0370-\\u03ff\\u0400-\\u052f\\u0590-\\u05d4\\u05d6-\\u05ff\\u1f00-\\u1fff\\u0600-\\u06ff\\u200c\\u200d\\u200e\\u0218\\u0219\\u021a\\u021b\\u202a-\\u202e]/,\n    ROMANESQUE_NOT_REGEXP: /[^a-zA-Z\\u0e01-\\u0e5b\\u00c0-\\u017f\\u0370-\\u03ff\\u0400-\\u052f\\u0590-\\u05d4\\u05d6-\\u05ff\\u1f00-\\u1fff\\u0600-\\u06ff\\u200c\\u200d\\u200e\\u0218\\u0219\\u021a\\u021b\\u202a-\\u202e]/g,\n    STARTSWITH_ROMANESQUE_REGEXP: /^[&a-zA-Z\\u0e01-\\u0e5b\\u00c0-\\u017f\\u0370-\\u03ff\\u0400-\\u052f\\u0590-\\u05d4\\u05d6-\\u05ff\\u1f00-\\u1fff\\u0600-\\u06ff\\u200c\\u200d\\u200e\\u0218\\u0219\\u021a\\u021b\\u202a-\\u202e]/,\n    ENDSWITH_ROMANESQUE_REGEXP: /[.;:&a-zA-Z\\u0e01-\\u0e5b\\u00c0-\\u017f\\u0370-\\u03ff\\u0400-\\u052f\\u0590-\\u05d4\\u05d6-\\u05ff\\u1f00-\\u1fff\\u0600-\\u06ff\\u200c\\u200d\\u200e\\u0218\\u0219\\u021a\\u021b\\u202a-\\u202e]$/,\n    ALL_ROMANESQUE_REGEXP: /^[a-zA-Z\\u0e01-\\u0e5b\\u00c0-\\u017f\\u0370-\\u03ff\\u0400-\\u052f\\u0590-\\u05d4\\u05d6-\\u05ff\\u1f00-\\u1fff\\u0600-\\u06ff\\u200c\\u200d\\u200e\\u0218\\u0219\\u021a\\u021b\\u202a-\\u202e]+$/,\n\n    VIETNAMESE_SPECIALS: /[\\u00c0-\\u00c3\\u00c8-\\u00ca\\u00cc\\u00cd\\u00d2-\\u00d5\\u00d9\\u00da\\u00dd\\u00e0-\\u00e3\\u00e8-\\u00ea\\u00ec\\u00ed\\u00f2-\\u00f5\\u00f9\\u00fa\\u00fd\\u0101\\u0103\\u0110\\u0111\\u0128\\u0129\\u0168\\u0169\\u01a0\\u01a1\\u01af\\u01b0\\u1ea0-\\u1ef9]/,\n\n    VIETNAMESE_NAMES: /^(?:(?:[.AaBbCcDdEeGgHhIiKkLlMmNnOoPpQqRrSsTtUuVvXxYy \\u00c0-\\u00c3\\u00c8-\\u00ca\\u00cc\\u00cd\\u00d2-\\u00d5\\u00d9\\u00da\\u00dd\\u00e0-\\u00e3\\u00e8-\\u00ea\\u00ec\\u00ed\\u00f2-\\u00f5\\u00f9\\u00fa\\u00fd\\u0101\\u0103\\u0110\\u0111\\u0128\\u0129\\u0168\\u0169\\u01a0\\u01a1\\u01af\\u01b0\\u1ea0-\\u1ef9]{2,6})(\\s+|$))+$/,\n\n    NOTE_FIELDS_REGEXP: /\\{:(?:[\\-_a-z]+|[A-Z]+):[^\\}]+\\}/g,\n    NOTE_FIELD_REGEXP: /^([\\-_a-z]+|[A-Z]+):\\s*([^\\}]+)$/,\n\n\tPARTICLE_GIVEN_REGEXP: /^([^ ]+(?:\\u02bb |\\u2019 | |\\' ) *)(.+)$/,\n\tPARTICLE_FAMILY_REGEXP: /^([^ ]+(?:\\-|\\u02bb|\\u2019| |\\') *)(.+)$/,\n\n    DISPLAY_CLASSES: [\"block\", \"left-margin\", \"right-inline\", \"indent\"],\n\n    NAME_VARIABLES: [\n        \"author\",\n        \"chair\",\n        \"collection-editor\",\n        \"compiler\",\n        \"composer\",\n        \"container-author\",\n        \"contributor\",\n        \"curator\",\n        \"director\",\n        \"editor\",\n        \"editor-translator\", \n        \"editorial-director\",\n        \"executive-producer\",\n        \"guest\",\n        \"host\",\n        \"illustrator\",\n        \"interviewer\",\n        \"narrator\", \n        \"organizer\",\n        \"original-author\",\n        \"performer\",\n        \"producer\",\n        \"recipient\",\n        \"reviewed-author\",\n        \"script-writer\",\n        \"series-creator\",\n        \"translator\",\n        \"commenter\"\n    ],\n    CREATORS: [\n        \"author\",\n        \"chair\",\n        \"collection-editor\",\n        \"compiler\",\n        \"composer\",\n        \"container-author\",\n        \"contributor\",\n        \"curator\",\n        \"director\",\n        \"editor\",\n        \"editor-translator\", \n        \"editorial-director\",\n        \"executive-producer\",\n        \"guest\",\n        \"host\",\n        \"illustrator\",\n        \"interviewer\",\n        \"narrator\", \n        \"organizer\",\n        \"original-author\",\n        \"performer\",\n        \"producer\",\n        \"recipient\",\n        \"reviewed-author\",\n        \"script-writer\",\n        \"series-creator\",\n        \"translator\",\n        \"commenter\"\n    ],\n    NUMERIC_VARIABLES: [\n        \"call-number\",\n        \"chapter-number\",\n        \"collection-number\",\n        \"division\",\n        \"edition\",\n        \"page\",\n        \"issue\",\n        \"locator\",\n        \"locator-extra\",\n        \"number\",\n        \"number-of-pages\",\n        \"number-of-volumes\",\n        \"part-number\",\n        \"printing-number\",\n        \"section\",\n        \"supplement-number\",\n        \"version\",\n        \"volume\",\n        \"supplement\", // maybe deprecated this? supplement-number should serve this purpose in standard CSL.\n        \"citation-number\"\n    ],\n    //var x = new Array();\n    //x = x.concat([\"title\",\"container-title\",\"issued\",\"page\"]);\n    //x = x.concat([\"locator\",\"collection-number\",\"original-date\"]);\n    //x = x.concat([\"reporting-date\",\"decision-date\",\"filing-date\"]);\n    //x = x.concat([\"revision-date\"]);\n    //NUMERIC_VARIABLES = x.slice();\n    DATE_VARIABLES: [\n        \"locator-date\", \n        \"issued\", \n        \"event-date\", \n        \"accessed\", \n        \"original-date\",\n        \"publication-date\",\n        \"available-date\",\n        \"submitted\",\n        \"alt-issued\",\n        \"alt-event\"\n    ],\n    VARIABLES_WITH_SHORT_FORM: [\n        \"title\",\n        \"container-title\"\n    ],\n    TITLE_FIELD_SPLITS: function(seg) {\n        var keys = [\"title\", \"short\", \"main\", \"sub\", \"subjoin\"];\n        var ret = {};\n        for (var i=0,ilen=keys.length;i<ilen;i++) {\n            ret[keys[i]] = seg + \"title\" + (keys[i] === \"title\" ? \"\" : \"-\" + keys[i]);\n        }\n        return ret;\n    },\n    \n    demoteNoiseWords: function (state, fld, drop_or_demote) {\n        var SKIP_WORDS = state.locale[state.opt.lang].opts[\"leading-noise-words\"];\n        if (fld && drop_or_demote) {\n            fld = fld.split(/\\s+/);\n            fld.reverse();\n            var toEnd = [];\n            for (var j  = fld.length - 1; j > -1; j += -1) {\n                if (SKIP_WORDS.indexOf(fld[j].toLowerCase()) > -1) {\n                    toEnd.push(fld.pop());\n                } else {\n                    break;\n                }\n            }\n            fld.reverse();\n            var start = fld.join(\" \");\n            var end = toEnd.join(\" \");\n            if (\"drop\" === drop_or_demote || !end) {\n                fld = start;\n            } else if (\"demote\" === drop_or_demote) {\n                fld = [start, end].join(\", \");\n            }\n        }\n        return fld;\n    },\n\n    extractTitleAndSubtitle: function (Item, narrowSpaceLocale) {\n        var narrowSpace = narrowSpaceLocale ? \"\\u202f\" : \"\";\n        // XXX In this function, split on split-char, but prefer exact match\n        // XXX of subtitle to a split-char in title if found.\n        var segments = [\"\"];\n        if (this.opt.development_extensions.split_container_title) {\n            segments.push(\"container-\");\n        }\n        for (var i=0,ilen=segments.length;i<ilen;i++) {\n            var seg = segments[i];\n            var title = CSL.TITLE_FIELD_SPLITS(seg);\n            var langs = [false];\n            if (Item.multi) {\n                for (var lang in Item.multi._keys[title.short]) {\n                    langs.push(lang);\n                }\n            }\n            for (var j=0,jlen=langs.length;j<jlen;j++) {\n                var lang = langs[j];\n                var vals = {};\n                if (lang) {\n                    if (Item.multi._keys[title.title]) {\n                        vals[title.title] = Item.multi._keys[title.title][lang];\n                    }\n                    if (Item.multi._keys[title[\"short\"]]) {\n                        vals[title[\"short\"]] = Item.multi._keys[title[\"short\"]][lang];\n                    }\n                } else {\n                    vals[title.title] = Item[title.title];\n                    vals[title[\"short\"]] = Item[title[\"short\"]];\n                }\n                vals[title.main] = vals[title.title];\n                vals[title.sub] = false;\n                var shortTitle = vals[title[\"short\"]];\n                if (vals[title.title]) {\n                    // Rules\n                    // TITLE_SPLIT eliminates split-points of period-space preceded by a capital letter.\n                    // If short title exists and matches exactly to a split-point, use that split-point only.\n                    // Otherwise if there is just one split-point, use that as main/sub split.\n                    // Otherwise use all split-points ... which is handled in titleCaseSentenceOrNormal, not here.\n                    if (shortTitle && shortTitle.toLowerCase() === vals[title.title].toLowerCase()) {\n                        vals[title.main] = vals[title.title];\n                        vals[title.subjoin] = \"\";\n                        vals[title.sub] = \"\";\n                    } else if (shortTitle) {\n                        // check for valid match to shortTitle\n                        var tail = vals[title.title].slice(shortTitle.replace(/[\\?\\!]+$/, \"\").length);\n                        var top = vals[title.title].replace(tail.replace(/^[\\?\\!]+/, \"\"), \"\").trim();\n                        var m = CSL.TITLE_SPLIT_REGEXP.matchfirst.exec(tail);\n                        if (m && top.toLowerCase() === shortTitle.toLowerCase()) {\n                            vals[title.main] = top;\n                            vals[title.subjoin] = m[1].replace(/[\\?\\!]+(\\s*)$/, \"$1\");\n                            vals[title.sub] = tail.replace(CSL.TITLE_SPLIT_REGEXP.matchfirst, \"\");\n                            if (this.opt.development_extensions.force_short_title_casing_alignment) {\n                                vals[title[\"short\"]] = vals[title.main];\n                            }\n                        } else {\n                            var splitTitle = CSL.TITLE_SPLIT(vals[title.title]);\n                            if (splitTitle.length == 3) {\n                                vals[title.main] = splitTitle[0];\n                                vals[title.subjoin] = splitTitle[1];\n                                vals[title.sub] = splitTitle[2];\n                            } else {\n                                vals[title.main] = vals[title.title];\n                                vals[title.subjoin] = \"\";\n                                vals[title.sub] = \"\";\n                            }\n                        }\n                    } else {\n                        var splitTitle = CSL.TITLE_SPLIT(vals[title.title]);\n                        if (splitTitle.length == 3) {\n                            vals[title.main] = splitTitle[0];\n                            vals[title.subjoin] = splitTitle[1];\n                            vals[title.sub] = splitTitle[2];\n                            if (this.opt.development_extensions.implicit_short_title && Item.type !== \"legal_case\") {\n                                if (!Item[title.short] && !vals[title.main].match(/^[\\-\\.[0-9]+$/)) {\n                                    var punct = vals[title.subjoin].trim();\n                                    if ([\"?\", \"!\"].indexOf(punct) === -1) {\n                                        punct = \"\";\n                                    }\n                                    vals[title.short] = vals[title.main] + punct;\n                                }\n                            }\n                        } else {\n                            vals[title.main] = vals[title.title];\n                            vals[title.subjoin] = \"\";\n                            vals[title.sub] = \"\";\n                        }\n                    }\n                    if (vals[title.subjoin]) {\n                        if (vals[title.subjoin].match(/([\\?\\!])/)) {\n                            var m = vals[title.subjoin].match(/(\\s*)$/)\n                            vals[title.main] = vals[title.main] + narrowSpace +vals[title.subjoin].trim();\n                            vals[title.subjoin] = m[1];\n                        }\n                    }\n                }\n                if (vals[title.subjoin]) {\n                    if (vals[title.subjoin].indexOf(\":\") > -1) {\n                        vals[title.subjoin] = narrowSpace + \": \";\n                    }\n                    if (vals[title.subjoin].indexOf(\"-\") > -1 || vals[title.subjoin].indexOf(\"—\") > -1) {\n                        vals[title.subjoin] = \"—\";\n                    }\n                }\n                if (lang) {\n                    for (var key in vals) {\n                        if (!Item.multi._keys[key]) {\n                            Item.multi._keys[key] = {};\n                        }\n                        Item.multi._keys[key][lang] = vals[key];\n                    }\n                } else {\n                    for (var key in vals) {\n                        Item[key] = vals[key];\n                    }\n                }\n            }\n        }\n    },\n\n    titlecaseSentenceOrNormal: function(state, Item, seg, lang, sentenceCase) {\n        // Hold on here.\n        // What is seg here?\n        // It's ... either \"\" or \"container-\". Which is ugly, but works.\n        // But this ALWAYS returns the full title, never short.\n        // So sentence-casing cannot be applied to short.\n        // Goes unnoticed because forced sentence-casing almost never appears in styles.\n        var title = CSL.TITLE_FIELD_SPLITS(seg);\n        var vals = {};\n        if (lang && Item.multi) {\n            if (Item.multi._keys[title.title]) {\n                vals[title.title] = Item.multi._keys[title.title][lang];\n            }\n            if (Item.multi._keys[title.main]) {\n                vals[title.main] = Item.multi._keys[title.main][lang];\n            }\n            if (Item.multi._keys[title.sub]) {\n                vals[title.sub] = Item.multi._keys[title.sub][lang];\n            }\n            if (Item.multi._keys[title.subjoin]) {\n                vals[title.subjoin] = Item.multi._keys[title.subjoin][lang];\n            }\n        } else {\n            vals[title.title] = Item[title.title];\n            vals[title.main] = Item[title.main];\n            vals[title.sub] = Item[title.sub];\n            vals[title.subjoin] = Item[title.subjoin];\n        }\n        if (vals[title.main] && vals[title.sub]) {\n            var mainTitle = vals[title.main];\n            var subJoin = vals[title.subjoin];\n            var subTitle = vals[title.sub];\n            if (sentenceCase) {\n                mainTitle = CSL.Output.Formatters.sentence(state, mainTitle);\n                subTitle = CSL.Output.Formatters.sentence(state, subTitle);\n            } else if (state.opt.development_extensions.uppercase_subtitles) {\n                subTitle = CSL.Output.Formatters[\"capitalize-first\"](state, subTitle);\n            }\n            return [mainTitle, subJoin, subTitle].join(\"\");\n        } else if (vals[title.title]) {\n            if (sentenceCase) {\n                return CSL.Output.Formatters.sentence(state, vals[title.title]);\n            } else if (state.opt.development_extensions.uppercase_subtitles) {\n                // Split and apply everywhere.\n                var splits = CSL.TITLE_SPLIT(vals[title.title]);\n                for (var i=0,ilen=splits.length; i<ilen; i += 2) {\n                    splits[i] = CSL.Output.Formatters[\"capitalize-first\"](state, splits[i]);\n                }\n                for (var i=1, ilen=splits.length-1; i < ilen; i += 2) {\n                    var m = splits[i].match(/([:\\?\\!] )/);\n                    if (m) {\n                        var narrowSpace = state.opt[\"default-locale\"][0].slice(0, 2).toLowerCase() === \"fr\" ? \"\\u202f\" : \"\";\n                        splits[i] = narrowSpace + m[1];\n                    }\n                    if (splits[i].indexOf(\"-\") > -1 || splits[i].indexOf(\"—\") > -1) {\n                        splits[i] = \"—\";\n                    }\n                }\n                vals[title.title] = splits.join(\"\");\n                return vals[title.title];\n            } else {\n                return vals[title.title];\n            }\n        } else {\n            return \"\";\n        }\n    },\n\n    getSafeEscape: function(state) {\n        if ([\"bibliography\", \"citation\"].indexOf(state.tmp.area) > -1) {\n            // Callback to apply thin space hack\n            // Callback to force LTR/RTL on parens and braces\n            // XXX Is this really necessary?\n            var callbacks = [];\n            if (state.opt.development_extensions.thin_non_breaking_space_html_hack && state.opt.mode === \"html\") {\n                callbacks.push(function (txt) {\n                    return txt.replace(/\\u202f/g, '<span style=\"white-space:nowrap\">&thinsp;</span>');\n                });\n            }\n            if (callbacks.length) {\n                return function (txt) {\n                    for (var i = 0, ilen = callbacks.length; i < ilen; i += 1) {\n                        txt = callbacks[i](txt);\n                    }\n                    return CSL.Output.Formats[state.opt.mode].text_escape(txt);\n                };\n            } else {\n                return CSL.Output.Formats[state.opt.mode].text_escape;\n            }\n        } else {\n            return function (txt) { return txt; };\n        }\n    },\n\n    SKIP_WORDS: [\"about\",\"above\",\"across\",\"afore\",\"after\",\"against\",\"al\", \"along\",\"alongside\",\"amid\",\"amidst\",\"among\",\"amongst\",\"anenst\",\"apropos\",\"apud\",\"around\",\"as\",\"aside\",\"astride\",\"at\",\"athwart\",\"atop\",\"barring\",\"before\",\"behind\",\"below\",\"beneath\",\"beside\",\"besides\",\"between\",\"beyond\",\"but\",\"by\",\"circa\",\"despite\",\"down\",\"during\",\"et\", \"except\",\"for\",\"forenenst\",\"from\",\"given\",\"in\",\"inside\",\"into\",\"lest\",\"like\",\"modulo\",\"near\",\"next\",\"notwithstanding\",\"of\",\"off\",\"on\",\"onto\",\"out\",\"over\",\"per\",\"plus\",\"pro\",\"qua\",\"sans\",\"since\",\"than\",\"through\",\" thru\",\"throughout\",\"thruout\",\"till\",\"to\",\"toward\",\"towards\",\"under\",\"underneath\",\"until\",\"unto\",\"up\",\"upon\",\"versus\",\"vs.\",\"v.\",\"vs\",\"v\",\"via\",\"vis-à-vis\",\"with\",\"within\",\"without\",\"according to\",\"ahead of\",\"apart from\",\"as for\",\"as of\",\"as per\",\"as regards\",\"aside from\",\"back to\",\"because of\",\"close to\",\"due to\",\"except for\",\"far from\",\"inside of\",\"instead of\",\"near to\",\"next to\",\"on to\",\"out from\",\"out of\",\"outside of\",\"prior to\",\"pursuant to\",\"rather than\",\"regardless of\",\"such as\",\"that of\",\"up to\",\"where as\",\"or\", \"yet\", \"so\", \"for\", \"and\", \"nor\", \"a\", \"an\", \"the\", \"de\", \"d'\", \"von\", \"van\", \"c\", \"ca\"],\n\n    FORMAT_KEY_SEQUENCE: [\n        \"@strip-periods\",\n        \"@font-style\",\n        \"@font-variant\",\n        \"@font-weight\",\n        \"@text-decoration\",\n        \"@vertical-align\",\n        \"@quotes\"\n    ],\n\n    INSTITUTION_KEYS: [\n        \"font-style\",\n        \"font-variant\",\n        \"font-weight\",\n        \"text-decoration\",\n        \"text-case\"\n    ],\n\n    SUFFIX_CHARS: \"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z\",\n    ROMAN_NUMERALS: [\n        [ \"\", \"i\", \"ii\", \"iii\", \"iv\", \"v\", \"vi\", \"vii\", \"viii\", \"ix\" ],\n        [ \"\", \"x\", \"xx\", \"xxx\", \"xl\", \"l\", \"lx\", \"lxx\", \"lxxx\", \"xc\" ],\n        [ \"\", \"c\", \"cc\", \"ccc\", \"cd\", \"d\", \"dc\", \"dcc\", \"dccc\", \"cm\" ],\n        [ \"\", \"m\", \"mm\", \"mmm\", \"mmmm\", \"mmmmm\"]\n    ],\n\n    LANGS: {\n        \"af-ZA\":\"Afrikaans\",\n        \"ar\":\"Arabic\",\n        \"bg-BG\":\"Bulgarian\",\n        \"ca-AD\":\"Catalan\",\n        \"cs-CZ\":\"Czech\",\n        \"da-DK\":\"Danish\",\n        \"de-AT\":\"Austrian\",\n        \"de-CH\":\"German (CH)\",\n        \"de-DE\":\"German (DE)\",\n        \"el-GR\":\"Greek\",\n        \"en-GB\":\"English (GB)\",\n        \"en-US\":\"English (US)\",\n        \"es-ES\":\"Spanish\",\n        \"et-EE\":\"Estonian\",\n        \"eu\":\"European\",\n        \"fa-IR\":\"Persian\",\n        \"fi-FI\":\"Finnish\",\n        \"fr-CA\":\"French (CA)\",\n        \"fr-FR\":\"French (FR)\",\n        \"he-IL\":\"Hebrew\",\n        \"hr-HR\":\"Croatian\",\n        \"hu-HU\":\"Hungarian\",\n        \"is-IS\":\"Icelandic\",\n        \"it-IT\":\"Italian\",\n        \"ja-JP\":\"Japanese\",\n        \"km-KH\":\"Khmer\",\n        \"ko-KR\":\"Korean\",\n        \"lt-LT\":\"Lithuanian\",\n        \"lv-LV\":\"Latvian\",\n        \"mn-MN\":\"Mongolian\",\n        \"nb-NO\":\"Norwegian (Bokmål)\",\n        \"nl-NL\":\"Dutch\",\n        \"nn-NO\":\"Norwegian (Nynorsk)\",\n        \"pl-PL\":\"Polish\",\n        \"pt-BR\":\"Portuguese (BR)\",\n        \"pt-PT\":\"Portuguese (PT)\",\n        \"ro-RO\":\"Romanian\",\n        \"ru-RU\":\"Russian\",\n        \"sk-SK\":\"Slovak\",\n        \"sl-SI\":\"Slovenian\",\n        \"sr-RS\":\"Serbian\",\n        \"sv-SE\":\"Swedish\",\n        \"th-TH\":\"Thai\",\n        \"tr-TR\":\"Turkish\",\n        \"uk-UA\":\"Ukrainian\",\n        \"vi-VN\":\"Vietnamese\",\n        \"zh-CN\":\"Chinese (CN)\",\n        \"zh-TW\":\"Chinese (TW)\"\n    },\n\n    LANG_BASES: {\n        af: \"af_ZA\",\n        ar: \"ar\",\n        bg: \"bg_BG\",\n        ca: \"ca_AD\",\n        cs: \"cs_CZ\",\n        da: \"da_DK\",\n        de: \"de_DE\",\n        el: \"el_GR\",\n        en: \"en_US\",\n        es: \"es_ES\",\n        et: \"et_EE\",\n        eu: \"eu\",\n        fa: \"fa_IR\",\n        fi: \"fi_FI\",\n        fr: \"fr_FR\",\n        he: \"he_IL\",\n        hr: \"hr-HR\",\n        hu: \"hu_HU\",\n        is: \"is_IS\",\n        it: \"it_IT\",\n        ja: \"ja_JP\",\n        km: \"km_KH\",\n        ko: \"ko_KR\",\n        lt: \"lt_LT\",\n        lv: \"lv-LV\",\n        mn: \"mn_MN\",\n        nb: \"nb_NO\",\n        nl: \"nl_NL\",\n        nn: \"nn-NO\",\n        pl: \"pl_PL\",\n        pt: \"pt_PT\",\n        ro: \"ro_RO\",\n        ru: \"ru_RU\",\n        sk: \"sk_SK\",\n        sl: \"sl_SI\",\n        sr: \"sr_RS\",\n        sv: \"sv_SE\",\n        th: \"th_TH\",\n        tr: \"tr_TR\",\n        uk: \"uk_UA\",\n        vi: \"vi_VN\",\n        zh: \"zh_CN\"\n    },\n\n    SUPERSCRIPTS: {\n        \"\\u00AA\": \"\\u0061\",\n        \"\\u00B2\": \"\\u0032\",\n        \"\\u00B3\": \"\\u0033\",\n        \"\\u00B9\": \"\\u0031\",\n        \"\\u00BA\": \"\\u006F\",\n        \"\\u02B0\": \"\\u0068\",\n        \"\\u02B1\": \"\\u0266\",\n        \"\\u02B2\": \"\\u006A\",\n        \"\\u02B3\": \"\\u0072\",\n        \"\\u02B4\": \"\\u0279\",\n        \"\\u02B5\": \"\\u027B\",\n        \"\\u02B6\": \"\\u0281\",\n        \"\\u02B7\": \"\\u0077\",\n        \"\\u02B8\": \"\\u0079\",\n        \"\\u02E0\": \"\\u0263\",\n        \"\\u02E1\": \"\\u006C\",\n        \"\\u02E2\": \"\\u0073\",\n        \"\\u02E3\": \"\\u0078\",\n        \"\\u02E4\": \"\\u0295\",\n        \"\\u1D2C\": \"\\u0041\",\n        \"\\u1D2D\": \"\\u00C6\",\n        \"\\u1D2E\": \"\\u0042\",\n        \"\\u1D30\": \"\\u0044\",\n        \"\\u1D31\": \"\\u0045\",\n        \"\\u1D32\": \"\\u018E\",\n        \"\\u1D33\": \"\\u0047\",\n        \"\\u1D34\": \"\\u0048\",\n        \"\\u1D35\": \"\\u0049\",\n        \"\\u1D36\": \"\\u004A\",\n        \"\\u1D37\": \"\\u004B\",\n        \"\\u1D38\": \"\\u004C\",\n        \"\\u1D39\": \"\\u004D\",\n        \"\\u1D3A\": \"\\u004E\",\n        \"\\u1D3C\": \"\\u004F\",\n        \"\\u1D3D\": \"\\u0222\",\n        \"\\u1D3E\": \"\\u0050\",\n        \"\\u1D3F\": \"\\u0052\",\n        \"\\u1D40\": \"\\u0054\",\n        \"\\u1D41\": \"\\u0055\",\n        \"\\u1D42\": \"\\u0057\",\n        \"\\u1D43\": \"\\u0061\",\n        \"\\u1D44\": \"\\u0250\",\n        \"\\u1D45\": \"\\u0251\",\n        \"\\u1D46\": \"\\u1D02\",\n        \"\\u1D47\": \"\\u0062\",\n        \"\\u1D48\": \"\\u0064\",\n        \"\\u1D49\": \"\\u0065\",\n        \"\\u1D4A\": \"\\u0259\",\n        \"\\u1D4B\": \"\\u025B\",\n        \"\\u1D4C\": \"\\u025C\",\n        \"\\u1D4D\": \"\\u0067\",\n        \"\\u1D4F\": \"\\u006B\",\n        \"\\u1D50\": \"\\u006D\",\n        \"\\u1D51\": \"\\u014B\",\n        \"\\u1D52\": \"\\u006F\",\n        \"\\u1D53\": \"\\u0254\",\n        \"\\u1D54\": \"\\u1D16\",\n        \"\\u1D55\": \"\\u1D17\",\n        \"\\u1D56\": \"\\u0070\",\n        \"\\u1D57\": \"\\u0074\",\n        \"\\u1D58\": \"\\u0075\",\n        \"\\u1D59\": \"\\u1D1D\",\n        \"\\u1D5A\": \"\\u026F\",\n        \"\\u1D5B\": \"\\u0076\",\n        \"\\u1D5C\": \"\\u1D25\",\n        \"\\u1D5D\": \"\\u03B2\",\n        \"\\u1D5E\": \"\\u03B3\",\n        \"\\u1D5F\": \"\\u03B4\",\n        \"\\u1D60\": \"\\u03C6\",\n        \"\\u1D61\": \"\\u03C7\",\n        \"\\u2070\": \"\\u0030\",\n        \"\\u2071\": \"\\u0069\",\n        \"\\u2074\": \"\\u0034\",\n        \"\\u2075\": \"\\u0035\",\n        \"\\u2076\": \"\\u0036\",\n        \"\\u2077\": \"\\u0037\",\n        \"\\u2078\": \"\\u0038\",\n        \"\\u2079\": \"\\u0039\",\n        \"\\u207A\": \"\\u002B\",\n        \"\\u207B\": \"\\u2212\",\n        \"\\u207C\": \"\\u003D\",\n        \"\\u207D\": \"\\u0028\",\n        \"\\u207E\": \"\\u0029\",\n        \"\\u207F\": \"\\u006E\",\n        \"\\u2120\": \"\\u0053\\u004D\",\n        \"\\u2122\": \"\\u0054\\u004D\",\n        \"\\u3192\": \"\\u4E00\",\n        \"\\u3193\": \"\\u4E8C\",\n        \"\\u3194\": \"\\u4E09\",\n        \"\\u3195\": \"\\u56DB\",\n        \"\\u3196\": \"\\u4E0A\",\n        \"\\u3197\": \"\\u4E2D\",\n        \"\\u3198\": \"\\u4E0B\",\n        \"\\u3199\": \"\\u7532\",\n        \"\\u319A\": \"\\u4E59\",\n        \"\\u319B\": \"\\u4E19\",\n        \"\\u319C\": \"\\u4E01\",\n        \"\\u319D\": \"\\u5929\",\n        \"\\u319E\": \"\\u5730\",\n        \"\\u319F\": \"\\u4EBA\",\n        \"\\u02C0\": \"\\u0294\",\n        \"\\u02C1\": \"\\u0295\",\n        \"\\u06E5\": \"\\u0648\",\n        \"\\u06E6\": \"\\u064A\"\n    },\n    SUPERSCRIPTS_REGEXP: new RegExp(\"[\\u00AA\\u00B2\\u00B3\\u00B9\\u00BA\\u02B0\\u02B1\\u02B2\\u02B3\\u02B4\\u02B5\\u02B6\\u02B7\\u02B8\\u02E0\\u02E1\\u02E2\\u02E3\\u02E4\\u1D2C\\u1D2D\\u1D2E\\u1D30\\u1D31\\u1D32\\u1D33\\u1D34\\u1D35\\u1D36\\u1D37\\u1D38\\u1D39\\u1D3A\\u1D3C\\u1D3D\\u1D3E\\u1D3F\\u1D40\\u1D41\\u1D42\\u1D43\\u1D44\\u1D45\\u1D46\\u1D47\\u1D48\\u1D49\\u1D4A\\u1D4B\\u1D4C\\u1D4D\\u1D4F\\u1D50\\u1D51\\u1D52\\u1D53\\u1D54\\u1D55\\u1D56\\u1D57\\u1D58\\u1D59\\u1D5A\\u1D5B\\u1D5C\\u1D5D\\u1D5E\\u1D5F\\u1D60\\u1D61\\u2070\\u2071\\u2074\\u2075\\u2076\\u2077\\u2078\\u2079\\u207A\\u207B\\u207C\\u207D\\u207E\\u207F\\u2120\\u2122\\u3192\\u3193\\u3194\\u3195\\u3196\\u3197\\u3198\\u3199\\u319A\\u319B\\u319C\\u319D\\u319E\\u319F\\u02C0\\u02C1\\u06E5\\u06E6]\", \"g\"),\n\n    // I think we need to have separate args for prefix and term,\n    // since they have different effects between comma-safe and comma-safe-numbers-only.\n    // Either that, or -- oh, we could just bang the two together for the test where\n    // necessary.\n    \n    UPDATE_GROUP_CONTEXT_CONDITION: function (state, str, valueTerm, token, value) {\n        if (!state.opt.use_context_condition) return;\n        var flags = state.tmp.group_context.tip;\n        if (flags.condition) {\n            if (!flags.condition.termtxt) {\n                flags.condition.termtxt = str;\n                flags.condition.valueTerm = valueTerm;\n            }\n            if (!flags.value_seen && flags.condition.test === \"comma-safe-numbers-only\") {\n                if (value) {\n                    flags.value_seen = true;\n                    if (!value.match(/^[0-9]/)) {\n                        state.tmp.just_did_number = false;\n                    }\n                }\n            }\n        } else {\n            // If not inside a conditional group, raise numeric flag\n            // if and only if the current term string ends in a number.\n            if (token && token.decorations.filter(o => o[0] === \"@vertical-align\").length > 0) {\n                state.tmp.just_did_number = false;\n            } else if (token && token.strings.suffix) {\n                state.tmp.just_did_number = false;\n            } else if (str) {\n                if (str.match(/[0-9]$/)) {\n                    state.tmp.just_did_number = true;\n                } else {\n                    state.tmp.just_did_number = false;\n                }\n            }\n        }\n    },\n\n    EVALUATE_GROUP_CONDITION: function(state, flags) {\n        if (!state.opt.use_context_condition) return;\n        var testres;\n        var numbersOnly = flags.condition.test === \"comma-safe-numbers-only\";\n        if (flags.condition.test === \"empty-label\") {\n            testres = !flags.condition.termtxt;\n        } else if (flags.condition.test === \"empty-label-no-decor\") {\n            testres = !flags.condition.termtxt || flags.condition.termtxt.indexOf(\"%s\") > -1;\n        } else if ([\"comma-safe\", \"comma-safe-numbers-only\"].indexOf(flags.condition.test) > -1) {\n            var locale_term = flags.condition.termtxt;\n            var termStartAlpha = false;\n            if (flags.condition.termtxt) {\n                termStartAlpha = flags.condition.termtxt.slice(0,1).match(CSL.ALL_ROMANESQUE_REGEXP);\n            }\n            var num = state.tmp.just_did_number;\n            if (num) {\n                if (flags.condition.valueTerm) {\n                    testres = numbersOnly ? false : true;\n                } else if (!locale_term) {\n                    testres = true;\n                } else if (termStartAlpha) {\n                    testres = numbersOnly ? false : true;\n                } else if ([\"always\", \"after-number\"].indexOf(state.opt.require_comma_on_symbol) > -1) {\n                    testres = true;\n                } else {\n                    testres = false;\n                }\n            } else {\n                if (flags.condition.valueTerm) {\n                    testres = false;\n                } else if (!locale_term) {\n                    testres = false;\n                } else if (termStartAlpha) {\n                    testres = numbersOnly ? false : true;\n                } else if (state.opt.require_comma_on_symbol === \"always\") {\n                    testres = true;\n                } else {\n                    testres = false;\n                }\n            }\n        }\n        if (testres) {\n            var force_suppress = false;\n        } else {\n            var force_suppress = true;\n        }\n        if (flags.condition.not) {\n            force_suppress = !force_suppress;\n        }\n        return force_suppress;\n    },\n    \n    SYS_OPTIONS: [\n        \"prioritize_disambiguate_condition\",\n        \"csl_reverse_lookup_support\",\n        \"main_title_from_short_title\",\n        \"uppercase_subtitles\",\n        \"force_short_title_casing_alignment\",\n        \"implicit_short_title\",\n        \"split_container_title\"\n    ],\n\n    TITLE_SPLIT_REGEXP: (function() {\n        var splits = [\n            \"\\\\.\\\\s+\",\n            \"\\\\!\\\\s+\",\n            \"\\\\?\\\\s+\",\n            \"\\\\s*::*\\\\s+\",\n            \"\\\\s*—\\\\s*\",\n            \"\\\\s+\\\\-\\\\s+\",\n            \"\\\\s*\\\\-\\\\-\\\\-*\\\\s*\"\n        ]\n        return {\n            match: new RegExp(\"(\" + splits.join(\"|\") + \")\", \"g\"),\n            matchfirst: new RegExp(\"^(\" + splits.join(\"|\") + \")\"),\n            split: new RegExp(\"(?:\" + splits.join(\"|\") + \")\")\n        }\n    })(),\n\n    TITLE_SPLIT: function(str) {\n        if (!str) {\n            return str;\n        }\n        var m = str.match(CSL.TITLE_SPLIT_REGEXP.match);\n        var lst = str.split(CSL.TITLE_SPLIT_REGEXP.split);\n        for (var i=lst.length-2; i>-1; i--) {\n            lst[i] = lst[i].trim();\n            if (lst[i] && lst[i].slice(-1).toLowerCase() !== lst[i].slice(-1)) {\n                // recombine\n                lst[i] = lst[i] + m[i] + lst[i+1];\n                lst = lst.slice(0, i+1).concat(lst.slice(i+2))\n            } else {\n                // merge\n                lst = lst.slice(0, i+1).concat([m[i]]).concat(lst.slice(i+1))\n            }\n        }\n        return lst;\n    },\n    \n    GET_COURT_CLASS: function(state, Item, sortKey){\n        // Get authority as a string\n        var cls = \"\";\n        var authority = null;\n        var country = Item.jurisdiction ? Item.jurisdiction.split(\":\")[0] : null;\n        // inStyle versus in module\n        var classType = \"court_condition_classes\";\n        if (sortKey) {\n            classType = \"court_key_classes\";\n        }\n        if (country && Item.authority) {\n            if (\"string\" === typeof Item.authority) {\n                authority = Item.authority;\n            } else {\n                if (Item.authority[0] && Item.authority[0].literal) {\n                    authority = Item.authority[0].literal;\n                }\n            }\n        }\n        if (authority) {\n            if (this.lang && state.locale[this.lang].opts[classType] && state.locale[this.lang].opts[classType][country] && state.locale[this.lang].opts[classType][country][authority]) {\n                cls = state.locale[this.lang].opts[classType][country][authority];\n            } else if (state.locale[state.opt[\"default-locale\"][0]].opts[classType] && state.locale[state.opt[\"default-locale\"][0]].opts[classType][country] && state.locale[state.opt[\"default-locale\"][0]].opts[classType][country][authority]) {\n                cls = state.locale[state.opt[\"default-locale\"][0]].opts[classType][country][authority]\n            }\n        }\n        return cls;\n    },\n\n    SET_COURT_CLASSES: function(state, lang, myxml, dataObj) {\n        var nodes = myxml.getNodesByName(dataObj, 'court-class');\n        for (var pos = 0, len = myxml.numberofnodes(nodes); pos < len; pos += 1) {\n            var courtclass = nodes[pos];\n            var attributes = myxml.attributes(courtclass);\n            var cls = attributes[\"@name\"];\n            var country = attributes[\"@country\"];\n            var courts = attributes[\"@courts\"];\n            \n            // Okay, this is a hack.\n            // If state.registry IS NOT yet defined, this is an in-style declaration.\n            // If state.registry IS defined, this is an in-module declaration.\n            var classType = \"court_key_classes\";\n            if (state.registry) {\n                classType = \"court_condition_classes\";\n            }\n            \n            if (cls && country && courts) {\n                courts = courts.trim().split(/\\s+/);\n                if (!state.locale[lang].opts[classType]) {\n                    state.locale[lang].opts[classType] = {};\n                }\n                if (!state.locale[lang].opts[classType][country]) {\n                    state.locale[lang].opts[classType][country] = {};\n                }\n                for (var i=0,ilen=courts.length;i<ilen;i++) {\n                    state.locale[lang].opts[classType][country][courts[i]] = cls;\n                }\n            }\n        }\n    },\n\n    INIT_JURISDICTION_MACROS: function (state, Item, item, macroName) {\n        if (Item[\"best-jurisdiction\"]) {\n            return true;\n        }\n        if (!state.sys.retrieveStyleModule || !CSL.MODULE_MACROS[macroName] || !Item.jurisdiction) {\n            return false;\n        }\n        var jurisdictionList = state.getJurisdictionList(Item.jurisdiction);\n        // Set up a list of jurisdictions here, we will reuse it\n        if (!state.opt.jurisdictions_seen[jurisdictionList[0]]) {\n            var res = state.retrieveAllStyleModules(jurisdictionList);\n            // Okay. We have code for each of the novel modules in the\n            // hierarchy. Load them all into the processor.\n            for (var jurisdiction in res) {\n                var fallback = state.loadStyleModule(jurisdiction, res[jurisdiction]);\n                if (fallback) {\n                    if (!res[fallback]) {\n                        Object.assign(res, state.retrieveAllStyleModules([fallback]));\n                        state.loadStyleModule(fallback, res[fallback], true);\n                    }\n                }\n            }\n        }\n        var jurisdictionList = state.getJurisdictionList(Item.jurisdiction);\n        if (state.opt.parallel.enable) {\n            if (!state.parallel) {\n                state.parallel = new CSL.Parallel(state);\n            }\n        }\n        // Identify the best jurisdiction for the item and return true, otherwise return false\n        for (var i=0,ilen=jurisdictionList.length;i<ilen;i++) {\n            var jurisdiction = jurisdictionList[i];\n            if (item) {\n                if (state.juris[jurisdiction] && !item[\"best-jurisdiction\"] && state.juris[jurisdiction].types.locator) {\n                    Item[\"best-jurisdiction\"] = jurisdiction;\n                }\n            }\n            if(state.juris[jurisdiction] && state.juris[jurisdiction].types[Item.type]) {\n                Item[\"best-jurisdiction\"] = jurisdiction;\n                return true;\n            }\n        }\n        return false;\n    }\n};\n\n/**\n * Functions for parsing an XML object converted to JSON.\n */\n\n/*\n  Style and locale JSON should be formatted as follows. Note that\n  an empty literal should be set as an explicit empty strings within\n  children:[]\n  \n  {\n    name:\"term\",\n    children:[\n      \"\"\n    ],\n    attrs:{\n      name:\"author\"\n    }\n  }\n\n  The following script will generate correctly formatted JSON\n  from a CSL style or locale file:\n*/\n\nCSL.XmlJSON = function (dataObj) {\n    this.dataObj = dataObj;\n    this.institution = {\n        name:\"institution\",\n        attrs:{\n            \"institution-parts\":\"long\",\n            \"delimiter\":\", \"\n        },\n        children:[\n            {\n                name:\"institution-part\",\n                attrs:{\n                    name:\"long\"\n                },\n                children:[]\n            }\n        ]\n    };\n};\n\n/**\n * No need for cleaning with native JSON.\n */\nCSL.XmlJSON.prototype.clean = function (json) {\n    return json;\n};\n\n\n/**\n * Methods to call on a node.\n */\nCSL.XmlJSON.prototype.getStyleId = function (myjson, styleName) {\n    var tagName = 'id';\n    if (styleName) {\n        tagName = 'title';\n    }\n    var ret = \"\";\n    var children = myjson.children;\n    for (var i=0,ilen=children.length;i<ilen;i++) {\n        if (children[i].name === 'info') {\n            var grandkids = children[i].children;\n            for (var j=0,jlen=grandkids.length;j<jlen;j++) {\n                if (grandkids[j].name === tagName) {\n                    ret = grandkids[j].children[0];\n                }\n            }\n        }\n    }\n    return ret;\n};\n\nCSL.XmlJSON.prototype.children = function (myjson) {\n    //print(\"children()\");\n    if (myjson && myjson.children.length) {\n        return myjson.children.slice();\n    } else {\n        return false;\n    }\n};\n\nCSL.XmlJSON.prototype.nodename = function (myjson) {\n    //print(\"nodename()\");\n    return myjson ? myjson.name : null;\n};\n\nCSL.XmlJSON.prototype.attributes = function (myjson) {\n    //print(\"attributes()\");\n    var ret = {};\n    for (var attrname in myjson.attrs) {\n        ret[\"@\"+attrname] = myjson.attrs[attrname];\n    }\n    return ret;\n};\n\n\nCSL.XmlJSON.prototype.content = function (myjson) {\n    //print(\"content()\");\n    // xmldom.js and xmle4x.js have \"undefined\" as default\n    var ret = \"\";\n    // This only catches content at first level, but that is good enough\n    // for us.\n    if (!myjson || !myjson.children) {\n        return ret;\n    }\n    for (var i=0, ilen=myjson.children.length; i < ilen; i += 1) {\n        if (\"string\" === typeof myjson.children[i]) {\n            ret += myjson.children[i];\n        }\n    }\n    return ret;\n};\n\n\nCSL.XmlJSON.prototype.namespace = {}\n\nCSL.XmlJSON.prototype.numberofnodes = function (myjson) {\n    //print(\"numberofnodes()\");\n    if (myjson && \"number\" == typeof myjson.length) {\n        return myjson.length;\n    } else {\n        return 0;\n    }\n};\n\n// getAttributeName() removed. Looks like it was not being used.\n\nCSL.XmlJSON.prototype.getAttributeValue = function (myjson,name,namespace) {\n    //print(\"getAttributeValue()\");\n    var ret = \"\";\n    if (namespace) {\n        name = namespace+\":\"+name;\n    }\n    if (myjson) {\n        if (myjson.attrs) {\n            if (myjson.attrs[name]) {\n                ret = myjson.attrs[name];\n            } else {\n                ret = \"\";\n            }\n        }\n    }\n    return ret;\n}\n\nCSL.XmlJSON.prototype.getNodeValue = function (myjson,name) {\n    //print(\"getNodeValue()\");\n    var ret = \"\";\n    if (name){\n        for (var i=0, ilen=myjson.children.length; i < ilen; i += 1) {\n            if (myjson.children[i].name === name) {\n                // This will always be Object() unless empty\n                if (myjson.children[i].children.length) {\n                    ret = myjson.children[i];\n                } else {\n                    ret = \"\";\n                }\n            }\n        }\n    } else if (myjson) {\n        ret = myjson;\n    }\n    // Just being careful here, following the former DOM code. The JSON object we receive \n    // for this should be fully normalized.\n    if (ret && ret.children && ret.children.length == 1 && \"string\" === typeof ret.children[0]) {\n        ret = ret.children[0];\n    }\n    return ret;\n}\n\nCSL.XmlJSON.prototype.setAttributeOnNodeIdentifiedByNameAttribute = function (myjson,nodename,partname,attrname,val) {\n    //print(\"setAttributeOnNodeIdentifiedByNameAttribute()\");\n    var pos, len, xml, nodes, node;\n    if (attrname.slice(0,1) === '@'){\n        attrname = attrname.slice(1);\n    }\n    // In the one place this is used in citeproc-js code, it doesn't need to recurse.\n    for (var i=0,ilen=myjson.children.length; i<ilen; i += 1) {\n        if (myjson.children[i].name === nodename && myjson.children[i].attrs.name === partname) {\n            myjson.children[i].attrs[attrname] = val;\n        }\n    }\n}\n\nCSL.XmlJSON.prototype.deleteNodeByNameAttribute = function (myjson,val) {\n    //print(\"deleteNodeByNameAttribute()\");\n    var i, ilen;\n    for (i = 0, ilen = myjson.children.length; i < ilen; i += 1) {\n        if (!myjson.children[i] || \"string\" === typeof myjson.children[i]) {\n            continue;\n        }\n        if (myjson.children[i].attrs.name == val) {\n            myjson.children = myjson.children.slice(0,i).concat(myjson.children.slice(i+1));\n        }\n    }\n}\n\nCSL.XmlJSON.prototype.deleteAttribute = function (myjson,attrname) {\n    //print(\"deleteAttribute()\");\n    var i, ilen;\n    if (\"undefined\" !== typeof myjson.attrs[attrname]) {\n        myjson.attrs.pop(attrname);\n    }\n}\n\nCSL.XmlJSON.prototype.setAttribute = function (myjson,attr,val) {\n    //print(\"setAttribute()\");\n    myjson.attrs[attr] = val;\n    return false;\n}\n\nCSL.XmlJSON.prototype.nodeCopy = function (myjson,clone) {\n    //print(\"nodeCopy()\");\n    if (!clone) {\n        var clone = {};\n    }\n    if (\"object\" === typeof clone && \"undefined\" === typeof clone.length) {\n        // myjson is an object\n        for (var key in myjson) {\n            if (\"string\" === typeof myjson[key]) {\n                clone[key] = myjson[key];\n            } else if (\"object\" === typeof myjson[key]) {\n                if (\"undefined\" === typeof myjson[key].length) {\n                    clone[key] = this.nodeCopy(myjson[key],{});\n                } else {\n                    clone[key] = this.nodeCopy(myjson[key],[]);\n                }\n            }\n        }\n    } else {\n        // myjson is an array\n        for (var i=0,ilen=myjson.length;i<ilen; i += 1) {\n            if (\"string\" === typeof myjson[i]) {\n                clone[i] = myjson[i];\n            } else {\n                // If it's at the first level of an array, it's an object.\n                clone[i] = this.nodeCopy(myjson[i],{});\n            }\n        }\n    }\n    return clone;\n}\n\nCSL.XmlJSON.prototype.getNodesByName = function (myjson,name,nameattrval,ret) {\n    //print(\"getNodesByName()\");\n    var nodes, node, pos, len;\n    if (!ret) {\n        var ret = [];\n    }\n    if (!myjson || !myjson.children) {\n        return ret;\n    }\n    if (name === myjson.name) {\n        if (nameattrval) {\n            if (nameattrval === myjson.attrs.name) {\n                ret.push(myjson);\n            }\n        } else {\n            ret.push(myjson);\n        }\n    }\n    for (var i=0,ilen=myjson.children.length;i<ilen;i+=1){\n        if (\"object\" !== typeof myjson.children[i]) {\n            continue;\n        }\n        this.getNodesByName(myjson.children[i],name,nameattrval,ret);\n    }\n    return ret;\n}\n\nCSL.XmlJSON.prototype.nodeNameIs = function (myjson,name) {\n    //print(\"nodeNameIs()\");\n    if (typeof myjson === \"undefined\") {\n        return false;\n    }\n    if (name == myjson.name) {\n        return true;\n    }\n    return false;\n}\n\nCSL.XmlJSON.prototype.makeXml = function (myjson) {\n    //print(\"makeXml()\");\n    if (\"string\" === typeof myjson) {\n        if (myjson.slice(0, 1) === \"<\") {\n            myjson = this.jsonStringWalker.walkToObject(myjson);\n        } else {\n            myjson = JSON.parse(myjson);\n        }\n    }\n    return myjson;\n};\n\nCSL.XmlJSON.prototype.insertChildNodeAfter = function (parent,node,pos,datejson) {\n    //print(\"insertChildNodeAfter()\");\n    // Function is misnamed: this replaces the node\n    for (var i=0,ilen=parent.children.length;i<ilen;i+=1) {\n        if (node === parent.children[i]) {\n            parent.children = parent.children.slice(0,i).concat([datejson]).concat(parent.children.slice(i+1));\n            break;\n        }\n    }\n    return parent;\n};\n\n\nCSL.XmlJSON.prototype.insertPublisherAndPlace = function(myjson) {\n    if (myjson.name === \"group\") {\n        var useme = true;\n        var mustHaves = [\"publisher\",\"publisher-place\"];\n        for (var i=0,ilen=myjson.children.length;i<ilen;i+=1) {\n            var haveVarname = mustHaves.indexOf(myjson.children[i].attrs.variable);\n            var isText = myjson.children[i].name === \"text\";\n            if (isText && haveVarname > -1 && !myjson.children[i].attrs.prefix && !myjson.children[i].attrs.suffix) {\n                mustHaves = mustHaves.slice(0,haveVarname).concat(mustHaves.slice(haveVarname+1));\n            } else {\n                useme = false;\n                break;\n            }\n        }\n        if (useme && !mustHaves.length) {\n            myjson.attrs[\"has-publisher-and-publisher-place\"] = true;\n       }\n    }\n    for (var i=0,ilen=myjson.children.length;i<ilen;i+=1) {\n        if (\"object\" === typeof myjson.children[i]) {\n            this.insertPublisherAndPlace(myjson.children[i]);\n        }\n    }    \n}\n/*\nCSL.XmlJSON.prototype.insertPublisherAndPlace = function(myxml) {\n    var group = myxml.getElementsByTagName(\"group\");\n    for (var i = 0, ilen = group.length; i < ilen; i += 1) {\n        var node = group.item(i);\n        var skippers = [];\n        for (var j = 0, jlen = node.childNodes.length; j < jlen; j += 1) {\n            if (node.childNodes.item(j).nodeType !== 1) {\n                skippers.push(j);\n            }\n        }\n        if (node.childNodes.length - skippers.length === 2) {\n            var twovars = [];\n            for (var j = 0, jlen = 2; j < jlen; j += 1) {\n                if (skippers.indexOf(j) > -1) {\n                    continue;\n                }\n                var child = node.childNodes.item(j);                    \n                var subskippers = [];\n                for (var k = 0, klen = child.childNodes.length; k < klen; k += 1) {\n                    if (child.childNodes.item(k).nodeType !== 1) {\n                        subskippers.push(k);\n                    }\n                }\n                if (child.childNodes.length - subskippers.length === 0) {\n                    twovars.push(child.getAttribute('variable'));\n                    if (child.getAttribute('suffix')\n                        || child.getAttribute('prefix')) {\n                        twovars = [];\n                        break;\n                    }\n                }\n            }\n            if (twovars.indexOf(\"publisher\") > -1 && twovars.indexOf(\"publisher-place\") > -1) {\n                node.setAttribute('has-publisher-and-publisher-place', true);\n            }\n        }\n    }\n};\n*/\n\nCSL.XmlJSON.prototype.isChildOfSubstitute = function(parents) {\n    if (parents.length > 0) {\n        var myparents = parents.slice();\n        var parent = myparents.pop();\n        if (parent === \"substitute\") {\n            return true;\n        } else {\n            return this.isChildOfSubstitute(myparents);\n        }\n    }\n    return false;\n};\n\nCSL.XmlJSON.prototype.addMissingNameNodes = function(myjson,parents) {\n    if (!parents) {\n        parents = [];\n    }\n    if (myjson.name === \"names\") {\n        // Trawl through children to decide whether a name node is needed here\n        if (!this.isChildOfSubstitute(parents)) {\n            var addName = true;\n            for (var i=0,ilen=myjson.children.length;i<ilen;i++) {\n                if (myjson.children[i].name === \"name\") {\n                    addName = false;\n                    break;\n                }\n            }\n            if (addName) {\n                myjson.children = [{name:\"name\",attrs:{},children:[]}].concat(myjson.children);\n            }\n        }\n    }\n    parents.push(myjson.name);\n    for (var i=0,ilen=myjson.children.length;i<ilen;i+=1) {\n        if (\"object\" === typeof myjson.children[i]) {\n            this.addMissingNameNodes(myjson.children[i],parents);\n        }\n    }\n    parents.pop();\n}\n\n\nCSL.XmlJSON.prototype.addInstitutionNodes = function(myjson) {\n    //print(\"addInstitutionNodes()\");\n    var names, thenames, institution, theinstitution, name, thename, xml, pos, len;\n    // The idea here is to map relevant attributes from name and nampart=family\n    // to the \"long\" institution-part node, when and only when forcing insert\n    // of the default node.\n    if (myjson.name === \"names\") {\n        // do stuff\n        var attributes = {};\n        var insertPos = -1;\n        for (var i=0,ilen=myjson.children.length;i<ilen;i+=1) {\n            if (myjson.children[i].name == \"name\") {\n                for (var key in myjson.children[i].attrs) {\n                    attributes[key] = myjson.children[i].attrs[key];\n                }\n                attributes.delimiter = myjson.children[i].attrs.delimiter;\n                attributes.and = myjson.children[i].attrs.and;\n                insertPos = i;\n                for (var k=0,klen=myjson.children[i].children.length;k<klen;k+=1) {\n                    if (myjson.children[i].children[k].attrs.name !== 'family') {\n                        continue;\n                    }\n                    for (var key in myjson.children[i].children[k].attrs) {\n                        attributes[key] = myjson.children[i].children[k].attrs[key];\n                    }\n                }\n            }\n            if (myjson.children[i].name == \"institution\") {\n                insertPos = -1;\n                break;\n            }\n        }\n        if (insertPos > -1) {\n            var institution = this.nodeCopy(this.institution);\n            for (var i=0,ilen = CSL.INSTITUTION_KEYS.length;i<ilen;i+=1) {\n                var attrname = CSL.INSTITUTION_KEYS[i];\n                if (\"undefined\" !== typeof attributes[attrname]) {\n                    institution.children[0].attrs[attrname] = attributes[attrname];\n                }\n                if (attributes.delimiter) {\n                    institution.attrs.delimiter = attributes.delimiter;\n                }\n                if (attributes.and) {\n                    institution.attrs.and = attributes.and;\n                }\n            }\n            myjson.children = myjson.children.slice(0,insertPos+1).concat([institution]).concat(myjson.children.slice(insertPos+1));\n        }\n    }\n    for (var i=0,ilen=myjson.children.length;i<ilen;i+=1) {\n        if (\"string\" === typeof myjson.children[i]) {\n            continue;\n        }\n        // Recurse\n        this.addInstitutionNodes(myjson.children[i]);\n    }\n}\nCSL.XmlJSON.prototype.flagDateMacros = function(myjson) {\n    // print(\"flagDateMacros()\");\n    for (var i=0,ilen=myjson.children.length;i<ilen;i+=1) {\n        if (myjson.children[i].name === \"macro\") {\n            if (this.inspectDateMacros(myjson.children[i])) {\n                myjson.children[i].attrs[\"macro-has-date\"] = \"true\";\n            }\n        }\n    }\n}\nCSL.XmlJSON.prototype.inspectDateMacros = function(myjson) {\n    //print(\"inspectDateMacros()\");\n    if (!myjson || !myjson.children) {\n        return false;\n    }\n    if (myjson.name === \"date\") {\n        return true;\n    } else {\n        for (var i=0,ilen=myjson.children.length;i<ilen;i+=1) {\n            if (this.inspectDateMacros(myjson.children[i])) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\n/*\n * Clean serialized XML\n */\nCSL.stripXmlProcessingInstruction = function (xml) {\n    if (!xml) {\n        return xml;\n    }\n    xml = xml.replace(/^<\\?[^?]+\\?>/, \"\");\n    xml = xml.replace(/<!--[^>]+-->/g, \"\");\n    xml = xml.replace(/^\\s+/g, \"\");\n    xml = xml.replace(/\\s+$/g, \"\");\n    return xml;\n};\n\n\n/*\n * String parser for XML inputs\n */\nCSL.parseXml = function(str) {\n\n    var _pos = 0;\n    var _obj = {children:[]};\n    var _stack = [_obj.children];\n\n    function _listifyString(str) {\n        str = str.split(/(?:\\r\\n|\\n|\\r)/).join(\" \").replace(/>[\t ]+</g, \"><\").replace(/<\\!--.*?-->/g, \"\");\n        var lst = str.split(\"><\");\n        var stylePos = null;\n        for (var i=0,ilen=lst.length;i<ilen;i++) {\n            if (i > 0) {\n                lst[i] = \"<\" + lst[i];\n            }\n            if (i < (lst.length-1)) {\n                lst[i] = lst[i] + \">\";\n            }\n            if (\"number\" != typeof stylePos) {\n                if (lst[i].slice(0, 7) === \"<style \" || lst[i].slice(0, 8) == \"<locale \") {\n                    stylePos = i;\n                }\n            }\n        }\n        lst = lst.slice(stylePos);\n        // Combine open/close elements for empty terms,\n        // so that they will be passed through correctly\n        // as empty strings.\n        for (var i=lst.length-2;i>-1;i--) {\n            if (lst[i].slice(1).indexOf(\"<\") === -1) {\n                var stub = lst[i].slice(0, 5);\n                if (lst[i].slice(-2) !== \"/>\") {\n                    if (stub === \"<term\") {\n                        if (lst[i+1].slice(0, 6) === \"</term\") {\n                            lst[i] = lst[i] + lst[i+1];\n                            lst = lst.slice(0, i+1).concat(lst.slice(i+2));\n                        }\n                    } else if ([\"<sing\", \"<mult\"].indexOf(stub) > -1) {\n                        if (lst[i].slice(-2) !== \"/>\" && lst[i+1].slice(0, 1) === \"<\") {\n                            lst[i] = lst[i] + lst[i+1];\n                            lst = lst.slice(0, i+1).concat(lst.slice(i+2));\n                        }\n                    }\n                }\n            }\n        }\n        return lst;\n    }\n\n    function _decodeHtmlEntities(str) {\n        return str\n            .split(\"&amp;\").join(\"&\")\n            .split(\"&quot;\").join(\"\\\"\")\n            .split(\"&gt;\").join(\">\").split(\"&lt;\").join(\"<\")\n            .replace(/&#([0-9]{1,6});/gi, function(match, numStr) {\n                var num = parseInt(numStr, 10); // read num as normal number\n                return String.fromCharCode(num);\n            })\n            .replace(/&#x([a-f0-9]{1,6});/gi, function(match, numStr){\n                var num = parseInt(numStr, 16); // read num as hex\n                return String.fromCharCode(num);\n            });\n    }\n\n    function _getAttributes(elem) {\n        var m = elem.match(/([^\\'\\\"=\t ]+)=(?:\\\"[^\\\"]*\\\"|\\'[^\\']*\\')/g);\n        if (m) {\n            for (var i=0,ilen=m.length;i<ilen;i++) {\n                m[i] = m[i].replace(/=.*/, \"\");\n            }\n        }\n        return m;\n    }\n\n    function _getAttribute(elem, attr) {\n        var rex = RegExp('^.*[\t ]+' + attr + '=(\\\"(?:[^\\\"]*)\\\"|\\'(?:[^\\']*)\\').*$');\n        var m = elem.match(rex);\n        return m ? m[1].slice(1, -1) : null;\n    }\n\n    function _getTagName(elem) {\n        var rex = RegExp(\"^<([^\t />]+)\");\n        var m = elem.match(rex);\n        return m ? m[1] : null;\n    }\n    \n\n    function _castObjectFromOpeningTag(elem) {\n        var obj = {};\n        obj.name = _getTagName(elem);\n        obj.attrs = {};\n        var attributes = _getAttributes(elem);\n        if (attributes) {\n            for (var i=0,ilen=attributes.length;i<ilen;i++) {\n                var attr = {\n                    name: attributes[i],\n                    value: _getAttribute(elem, attributes[i])\n                }\n                obj.attrs[attr.name] = _decodeHtmlEntities(attr.value);\n            }\n        }\n        obj.children = [];\n        return obj;\n    }\n\n    function _extractTextFromCompositeElement(elem) {\n        var m = elem.match(/^.*>([^<]*)<.*$/);\n        return _decodeHtmlEntities(m[1]);\n    }\n\n    function _appendToChildren(obj) {\n        _stack.slice(-1)[0].push(obj);\n    }\n\n    function _extendStackWithNewChildren(obj) {\n        _stack.push(obj.children);\n    }\n\n    function processElement(elem) {\n        var obj;\n        if (elem.slice(1).indexOf('<') > -1) {\n            // withtext\n            var tag = elem.slice(0, elem.indexOf('>')+1);\n            obj = _castObjectFromOpeningTag(tag);\n            obj.children = [_extractTextFromCompositeElement(elem)];\n            _appendToChildren(obj);\n        } else if (elem.slice(-2) === '/>') {\n            // singleton\n            obj = _castObjectFromOpeningTag(elem);\n            // Empty term as singleton\n            if (_getTagName(elem) === 'term') {\n                obj.children.push('');\n            }\n            _appendToChildren(obj);\n        } else if (elem.slice(0, 2) === '</') {\n            // close\n            _stack.pop();\n        } else {\n            // open\n            obj = _castObjectFromOpeningTag(elem);\n            _appendToChildren(obj)\n            _extendStackWithNewChildren(obj);\n        }\n    }\n\n    var lst = _listifyString(str);\n\n    for (var i=0,ilen=lst.length;i<ilen;i++) {\n        var elem = lst[i];\n        processElement(elem);\n    }\n    return _obj.children[0];\n}\n\n/**\n * Functions for parsing an XML object using E4X.\n */\n\nCSL.XmlDOM = function (dataObj) {\n    this.dataObj = dataObj;\n    if (\"undefined\" == typeof DOMParser) {\n        DOMParser = function() {};\n        DOMParser.prototype.parseFromString = function(str, contentType) {\n            if (\"undefined\" != typeof ActiveXObject) {\n                var xmldata = new ActiveXObject('MSXML.DomDocument');\n                xmldata.async = false;\n                xmldata.loadXML(str);\n                return xmldata;\n            } else if (\"undefined\" != typeof XMLHttpRequest) {\n                var xmldata = new XMLHttpRequest;\n                if (!contentType) {\n                    contentType = 'text/xml';\n                }\n                xmldata.open('GET', 'data:' + contentType + ';charset=utf-8,' + encodeURIComponent(str), false);\n                if(xmldata.overrideMimeType) {\n                    xmldata.overrideMimeType(contentType);\n                }\n                xmldata.send(null);\n                return xmldata.responseXML;\n            } else if (\"undefined\" != typeof marknote) {\n                var parser = new marknote.Parser();\n                return parser.parse(str);\n            }\n        };\n        this.hasAttributes = function (node) {\n            var ret;\n            if (node.attributes && node.attributes.length) {\n                ret = true;\n            } else {\n                ret = false;\n            }\n            return ret;\n        };\n    } else {\n        /*\n        this.hasAttributes = function (node) {\n            return node[\"hasAttributes\"]();\n        };\n        */\n        this.hasAttributes = function (node) {\n            var ret;\n            if (node.attributes && node.attributes.length) {\n                ret = true;\n            } else {\n                ret = false;\n            }\n            return ret;\n        };\n    }\n    this.importNode = function (doc, srcElement) {\n        var ret;\n        if (\"undefined\" == typeof doc.importNode) {\n            ret = this._importNode(doc, srcElement, true);\n        } else {\n            ret = doc.importNode(srcElement, true);\n        }\n        return ret;\n    };\n    // In case importNode is not available.\n    // Thx + hat tip to Anthony T. Holdener III\n    // http://www.alistapart.com/articles/crossbrowserscripting\n    // cases 3, 4, 8 = text, cdata, comment\n    this._importNode = function(doc, node, allChildren) {\n        switch (node.nodeType) {\n            // element node\n            case 1:\n                var newNode = doc.createElement(node.nodeName);\n                if (node.attributes && node.attributes.length > 0)\n                    for (var i = 0, il = node.attributes.length; i < il;)\n                        newNode.setAttribute(node.attributes[i].nodeName, node.getAttribute(node.attributes[i++].nodeName));\n                    if (allChildren && node.childNodes && node.childNodes.length > 0)\n                        for (var i = 0, il = node.childNodes.length; i < il;)\n                            newNode.appendChild(this._importNode(doc, node.childNodes[i++], allChildren));\n                return newNode;\n                break;\n            case 3:\n            case 4:\n            case 8:\n                // Drop comments on the floor as well.\n                //return doc.createTextNode(node.nodeValue);\n                //break;\n        }\n    };\n    this.parser = new DOMParser();\n\n    // This seems horribly tormented, but there might be a reason for it.\n    // Perhaps this was the only way I found to get namespacing to work ... ?\n    var str = \"<docco><institution institution-parts=\\\"long\\\" delimiter=\\\", \\\" substitute-use-first=\\\"1\\\" use-last=\\\"1\\\"><institution-part name=\\\"long\\\"/></institution></docco>\";\n    var inst_doc = this.parser.parseFromString(str, \"text/xml\");\n    var inst_node = inst_doc.getElementsByTagName(\"institution\");\n    this.institution = inst_node.item(0);\n    var inst_part_node = inst_doc.getElementsByTagName(\"institution-part\");\n    this.institutionpart = inst_part_node.item(0);\n    this.ns = \"http://purl.org/net/xbiblio/csl\";\n};\n\n/**\n * No need for cleaning with the DOM, I think.  This will probably just be a noop.\n * But first, let's get XML mode switching up and running.\n */\nCSL.XmlDOM.prototype.clean = function (xml) {\n    xml = xml.replace(/<\\?[^?]+\\?>/g, \"\");\n    xml = xml.replace(/<![^>]+>/g, \"\");\n    xml = xml.replace(/^\\s+/, \"\");\n    xml = xml.replace(/\\s+$/, \"\");\n    xml = xml.replace(/^\\n*/, \"\");\n    return xml;\n};\n\n\n/**\n * Methods to call on a node.\n */\nCSL.XmlDOM.prototype.getStyleId = function (myxml, styleName) {\n    var text = \"\";\n    var tagName = \"id\";\n    if (styleName) {\n        tagName = \"title\";\n    }\n    var node = myxml.getElementsByTagName(tagName);\n    if (node && node.length) {\n        node = node.item(0);\n    }\n    if (node) {\n        // W3C conformant browsers\n        text = node.textContent;\n    }\n    if (!text) {\n        // Opera, IE 6 & 7\n        text = node.innerText;\n    }\n    if (!text) {\n        // Safari\n        text = node.innerHTML;\n    }\n    return text;\n};\n\nCSL.XmlDOM.prototype.children = function (myxml) {\n    var children, pos, len, ret;\n    if (myxml) {\n        ret = [];\n        children = myxml.childNodes;\n        for (pos = 0, len = children.length; pos < len; pos += 1) {\n            if (children[pos].nodeName != \"#text\") {\n                ret.push(children[pos]);\n            }\n        }\n        return ret;\n    } else {\n        return [];\n    }\n};\n\nCSL.XmlDOM.prototype.nodename = function (myxml) {\n    var ret = myxml.nodeName;\n    return ret;\n};\n\nCSL.XmlDOM.prototype.attributes = function (myxml) {\n    var ret, attrs, attr, key, xml, pos, len;\n    ret = new Object();\n    if (myxml && this.hasAttributes(myxml)) {\n        attrs = myxml.attributes;\n        for (pos = 0, len=attrs.length; pos < len; pos += 1) {\n            attr = attrs[pos];\n            ret[\"@\" + attr.name] = attr.value;\n        }\n    }\n    return ret;\n};\n\n\nCSL.XmlDOM.prototype.content = function (myxml) {\n    var ret;\n    if (\"undefined\" != typeof myxml.textContent) {\n        ret = myxml.textContent;\n    } else if (\"undefined\" != typeof myxml.innerText) {\n        ret = myxml.innerText;\n    } else {\n        ret = myxml.txt;\n    }\n    return ret;\n};\n\n\nCSL.XmlDOM.prototype.namespace = {\n    \"xml\":\"http://www.w3.org/XML/1998/namespace\"\n}\n\nCSL.XmlDOM.prototype.numberofnodes = function (myxml) {\n    if (myxml) {\n        return myxml.length;\n    } else {\n        return 0;\n    }\n};\n\nCSL.XmlDOM.prototype.getAttributeName = function (attr) {\n    var ret = attr.name;\n    return ret;\n}\n\nCSL.XmlDOM.prototype.getAttributeValue = function (myxml,name,namespace) {\n    var ret = \"\";\n    if (namespace) {\n        name = namespace+\":\"+name;\n    }\n    if (myxml && this.hasAttributes(myxml) && myxml.getAttribute(name)) {\n        ret = myxml.getAttribute(name);\n    }\n    return ret;\n}\n\n//\n// Can't this be, you know ... simplified?\n//\nCSL.XmlDOM.prototype.getNodeValue = function (myxml,name) {\n    var ret = null;\n    if (name){\n        var vals = myxml.getElementsByTagName(name);\n        if (vals.length > 0) {\n            if (\"undefined\" != typeof vals[0].textContent) {\n                ret = vals[0].textContent;\n            } else if (\"undefined\" != typeof vals[0].innerText) {\n                ret = vals[0].innerText;\n            } else {\n                ret = vals[0].text;\n            }\n        }\n    }\n    if (ret === null && myxml && myxml.childNodes && (myxml.childNodes.length == 0 || (myxml.childNodes.length == 1 && myxml.firstChild.nodeName == \"#text\"))) {\n        if (\"undefined\" != typeof myxml.textContent) {\n            ret = myxml.textContent;\n        } else if (\"undefined\" != typeof myxml.innerText) {\n            ret = myxml.innerText;\n        } else {\n            ret = myxml.text;\n        }\n    }\n    if (ret === null) {\n        ret = myxml;\n    }\n    return ret;\n}\n\nCSL.XmlDOM.prototype.setAttributeOnNodeIdentifiedByNameAttribute = function (myxml,nodename,partname,attrname,val) {\n    var pos, len, xml, nodes, node;\n    if (attrname.slice(0,1) === '@'){\n        attrname = attrname.slice(1);\n    }\n    nodes = myxml.getElementsByTagName(nodename);\n    for (pos = 0, len = nodes.length; pos < len; pos += 1) {\n        node = nodes[pos];\n        if (node.getAttribute(\"name\") != partname) {\n            continue;\n        }\n        node.setAttribute(attrname, val);\n    }\n}\n\nCSL.XmlDOM.prototype.deleteNodeByNameAttribute = function (myxml,val) {\n    var pos, len, node, nodes;\n    nodes = myxml.childNodes;\n    for (pos = 0, len = nodes.length; pos < len; pos += 1) {\n        node = nodes[pos];\n        if (!node || node.nodeType == node.TEXT_NODE) {\n            continue;\n        }\n        if (this.hasAttributes(node) && node.getAttribute(\"name\") == val) {\n            myxml.removeChild(nodes[pos]);\n        }\n    }\n}\n\nCSL.XmlDOM.prototype.deleteAttribute = function (myxml,attr) {\n    myxml.removeAttribute(attr);\n}\n\nCSL.XmlDOM.prototype.setAttribute = function (myxml,attr,val) {\n    if (!myxml.ownerDocument) {\n        myxml = myxml.firstChild;\n    }\n    // \"unknown\" to satisfy IE8, which crashes when setAttribute\n    // is checked directly as a property, and report its type as\n    // \"unknown\".\n    // Many thanks to Phil Lord for tracing the cause of the fault.\n    if ([\"function\", \"unknown\"].indexOf(typeof myxml.setAttribute) > -1) {\n        myxml.setAttribute(attr, val);\n    }\n    return false;\n}\n\nCSL.XmlDOM.prototype.nodeCopy = function (myxml) {\n    var cloned_node = myxml.cloneNode(true);\n    return cloned_node;\n}\n\nCSL.XmlDOM.prototype.getNodesByName = function (myxml,name,nameattrval) {\n    var ret, nodes, node, pos, len;\n    ret = [];\n    nodes = myxml.getElementsByTagName(name);\n    for (pos = 0, len = nodes.length; pos < len; pos += 1) {\n        node = nodes.item(pos);\n        if (nameattrval && !(this.hasAttributes(node) && node.getAttribute(\"name\") == nameattrval)) {\n//        if (nameattrval && !(this.attributes && node.attributes.name && node.attributes.name.value == nameattrval)) {\n            continue;\n        }\n        ret.push(node);\n    }\n    return ret;\n}\n\nCSL.XmlDOM.prototype.nodeNameIs = function (myxml,name) {\n    if (name == myxml.nodeName) {\n        return true;\n    }\n    return false;\n}\n\nCSL.XmlDOM.prototype.makeXml = function (myxml) {\n    var ret, topnode;\n    if (!myxml) {\n        myxml = \"<docco><bogus/></docco>\";\n    }\n    myxml = myxml.replace(/\\s*<\\?[^>]*\\?>\\s*\\n*/g, \"\");\n    var nodetree = this.parser.parseFromString(myxml, \"application/xml\");\n    return nodetree.firstChild;\n};\n\nCSL.XmlDOM.prototype.insertChildNodeAfter = function (parent,node,pos,datexml) {\n    var myxml, xml;\n    myxml = this.importNode(node.ownerDocument, datexml);\n    parent.replaceChild(myxml, node);\n     return parent;\n};\n\nCSL.XmlDOM.prototype.insertPublisherAndPlace = function(myxml) {\n    var group = myxml.getElementsByTagName(\"group\");\n    for (var i = 0, ilen = group.length; i < ilen; i += 1) {\n        var node = group.item(i);\n        var skippers = [];\n        for (var j = 0, jlen = node.childNodes.length; j < jlen; j += 1) {\n            if (node.childNodes.item(j).nodeType !== 1) {\n                skippers.push(j);\n            }\n        }\n        if (node.childNodes.length - skippers.length === 2) {\n            var twovars = [];\n            for (var j = 0, jlen = 2; j < jlen; j += 1) {\n                if (skippers.indexOf(j) > -1) {\n                    continue;\n                }\n                var child = node.childNodes.item(j);                    \n                var subskippers = [];\n                for (var k = 0, klen = child.childNodes.length; k < klen; k += 1) {\n                    if (child.childNodes.item(k).nodeType !== 1) {\n                        subskippers.push(k);\n                    }\n                }\n                if (child.childNodes.length - subskippers.length === 0) {\n                    twovars.push(child.getAttribute('variable'));\n                    if (child.getAttribute('suffix')\n                        || child.getAttribute('prefix')) {\n                        twovars = [];\n                        break;\n                    }\n                }\n            }\n            if (twovars.indexOf(\"publisher\") > -1 && twovars.indexOf(\"publisher-place\") > -1) {\n                node.setAttribute('has-publisher-and-publisher-place', true);\n            }\n        }\n    }\n};\n\nCSL.XmlDOM.prototype.isChildOfSubstitute = function(node) {\n    if (node.parentNode) {\n        if (node.parentNode.tagName.toLowerCase() === \"substitute\") {\n            return true;\n        } else {\n            return this.isChildOfSubstitute(node.parentNode);\n        }\n    }\n    return false;\n};\n\nCSL.XmlDOM.prototype.addMissingNameNodes = function(myxml) {\n    var nameslist = myxml.getElementsByTagName(\"names\");\n    for (var i = 0, ilen = nameslist.length; i < ilen; i += 1) {\n        var names = nameslist.item(i);\n        var namelist = names.getElementsByTagName(\"name\");\n        if ((!namelist || namelist.length === 0)\n            && !this.isChildOfSubstitute(names)) {\n            \n            var doc = names.ownerDocument;\n            var name = doc.createElement(\"name\");\n            names.appendChild(name);\n        }\n    }\n};\n\n\nCSL.XmlDOM.prototype.addInstitutionNodes = function(myxml) {\n    var names, thenames, institution, theinstitution, theinstitutionpart, name, thename, xml, pos, len;\n    names = myxml.getElementsByTagName(\"names\");\n    for (pos = 0, len = names.length; pos < len; pos += 1) {\n        thenames = names.item(pos);\n        name = thenames.getElementsByTagName(\"name\");\n        if (name.length == 0) {\n            continue;\n        }\n        institution = thenames.getElementsByTagName(\"institution\");\n        if (institution.length == 0) {\n            theinstitution = this.importNode(myxml.ownerDocument, this.institution);\n            theinstitutionpart = theinstitution.getElementsByTagName(\"institution-part\").item(0);\n            thename = name.item(0);\n            thenames.insertBefore(theinstitution, thename.nextSibling);\n            for (var j = 0, jlen = CSL.INSTITUTION_KEYS.length; j < jlen; j += 1) {\n                var attrname = CSL.INSTITUTION_KEYS[j];\n                var attrval = thename.getAttribute(attrname);\n                if (attrval) {\n                    theinstitutionpart.setAttribute(attrname, attrval);\n                }\n            }\n            var nameparts = thename.getElementsByTagName(\"name-part\");\n            for (var j = 0, jlen = nameparts.length; j < jlen; j += 1) {\n                if ('family' === nameparts[j].getAttribute('name')) {\n                    for (var k = 0, klen = CSL.INSTITUTION_KEYS.length; k < klen; k += 1) {\n                        var attrname = CSL.INSTITUTION_KEYS[k];\n                        var attrval = nameparts[j].getAttribute(attrname);\n                        if (attrval) {\n                            theinstitutionpart.setAttribute(attrname, attrval);\n                        }\n                    }\n                }\n            }\n        }\n    }\n};\n\n\nCSL.XmlDOM.prototype.flagDateMacros = function(myxml) {\n    var pos, len, thenode, thedate;\n    var nodes = myxml.getElementsByTagName(\"macro\");\n    for (pos = 0, len = nodes.length; pos < len; pos += 1) {\n        thenode = nodes.item(pos);\n        thedate = thenode.getElementsByTagName(\"date\");\n        if (thedate.length) {\n            thenode.setAttribute('macro-has-date', 'true');\n        }\n    }\n};\n\n\n/*global CSL: true */\n\nCSL.setupXml = function(xmlObject) {\n    var dataObj = {};\n    var parser = null;\n    if (\"undefined\" !== typeof xmlObject) {\n        if (\"string\" === typeof xmlObject) {\n            xmlObject = xmlObject.replace(\"^\\uFEFF\", \"\")\n                .replace(/^\\s+/, \"\");\n            if (xmlObject.slice(0, 1) === \"<\") {\n                // Assume serialized XML\n                dataObj = CSL.parseXml(xmlObject);\n            } else {\n                // Assume serialized JSON\n                dataObj = JSON.parse(xmlObject);\n            }\n            parser = new CSL.XmlJSON(dataObj);\n        } else if (\"undefined\" !== typeof xmlObject.getAttribute) {\n            // Assume DOM instance\n            parser = new CSL.XmlDOM(xmlObject);\n        } else if (\"undefined\" !== typeof xmlObject.toXMLString) {\n            // Assume E4X object\n            parser = new CSL.XmlE4X(xmlObject);\n        } else {\n            // Assume JS object\n            parser = new CSL.XmlJSON(xmlObject);\n        }\n    } else {\n        CSL.error(\"unable to parse XML input\");\n    }\n    if (!parser) {\n        CSL.error(\"citeproc-js error: unable to parse CSL style or locale object\");\n    }\n    return parser;\n};\n\n/*global CSL: true */\n\nCSL.getSortCompare = function (default_locale) {\n    if (CSL.stringCompare) {\n        return CSL.stringCompare;\n    }\n    var me = this;\n    var strcmp;\n    var strcmp_opts = {\n        sensitivity:\"base\",\n        ignorePunctuation:true,\n        numeric:true\n    };\n    // In order, attempt the following:\n    //   (1) Set locale collation from processor language\n    //   (2) Use localeCompare()\n    if (!default_locale) {\n        default_locale = \"en-US\";\n    }\n    strcmp = function (a, b) {\n        return CSL.toLocaleLowerCase.call(me, a).localeCompare(CSL.toLocaleLowerCase.call(me, b),default_locale,strcmp_opts);\n    };\n    var stripPunct = function (str) {\n        return str.replace(/^[\\[\\]\\'\\\"]*/g, \"\");\n    };\n    var getBracketPreSort = function () {\n        if (!strcmp(\"[x\",\"x\")) {\n            return false;\n        } else {\n            return function (a, b) {\n                return strcmp(stripPunct(a), stripPunct(b));\n            };\n        }\n    };\n    var bracketPreSort = getBracketPreSort();\n    var sortCompare = function (a, b) {\n        if (bracketPreSort) {\n            return bracketPreSort(a, b);\n        } else {\n            return strcmp(a, b);\n        }\n    };\n    return sortCompare;\n};\n\n/*global CSL: true */\n\nCSL.ambigConfigDiff = function(a, b) {\n    var pos, len, ppos, llen;\n    // return of true means the ambig configs differ\n    if (a.names.length !== b.names.length) {\n        //print(\"   (1)\");\n        return 1;\n    } else {\n        for (pos = 0, len = a.names.length; pos < len; pos += 1) {\n            if (a.names[pos] !== b.names[pos]) {\n        //print(\"   (2) \"+a.names[pos]+\" \"+b.names[pos]);\n                return 1;\n            } else {\n                for (ppos = 0, llen = a.givens[pos]; ppos < llen; ppos += 1) {\n                    if (a.givens[pos][ppos] !== b.givens[pos][ppos]) {\n        //print(\"   (3): \"+a.givens[pos][ppos]+\" \"+b.givens[pos][ppos]+\" \"+pos+\"/\"+ppos+\" \"+b.givens[pos]);\n                        return 1;\n                    }\n                }\n            }\n        }\n    }\n    if (a.disambiguate != b.disambiguate) {\n        //print(\"   (4) \"+a.disambiguate+\" \"+b.disambiguate);\n        return 1;\n    }\n    if (a.year_suffix !== b.year_suffix) {\n        //print(\"   (5) \"+a.year_suffix+\" \"+b.year_suffix);\n        return 1;\n    }\n    return 0;\n};\n\nCSL.cloneAmbigConfig = function (config, oldconfig) {\n    var i, ilen, j, jlen, param;\n    var ret = {};\n    ret.names = [];\n    ret.givens = [];\n    ret.year_suffix = false;\n    ret.disambiguate = false;\n    for (i = 0, ilen = config.names.length; i < ilen; i += 1) {\n        param = config.names[i];\n        // Fixes update bug affecting plugins, without impacting\n        // efficiency with update of large numbers of year-suffixed\n        // items.\n        ret.names[i] = param;\n    }\n    for (i  = 0, ilen = config.givens.length; i < ilen; i += 1) {\n        param = [];\n        for (j = 0, jlen = config.givens[i].length; j < jlen; j += 1) {\n            // condition at line 312 of disambiguate.js protects against negative\n            // values of j\n            param.push(config.givens[i][j]);\n        }\n        ret.givens.push(param);\n    }\n    // XXXX Is this necessary at all?\n    if (oldconfig) {\n        ret.year_suffix = oldconfig.year_suffix;\n        ret.disambiguate = oldconfig.disambiguate;\n    } else {\n        ret.year_suffix = config.year_suffix;\n        ret.disambiguate = config.disambiguate;\n    }\n    return ret;\n};\n\n/**\n * Return current base configuration for disambiguation\n */\nCSL.getAmbigConfig = function () {\n    var config, ret;\n    config = this.tmp.disambig_request;\n    if (!config) {\n        config = this.tmp.disambig_settings;\n    }\n    var ret = CSL.cloneAmbigConfig(config);\n    return ret;\n};\n\n/**\n * Return max values for disambiguation\n */\nCSL.getMaxVals = function () {\n    return this.tmp.names_max.mystack.slice();\n};\n\n/**\n * Return min value for disambiguation\n */\nCSL.getMinVal = function () {\n    return this.tmp[\"et-al-min\"];\n};\n\n/*global CSL: true */\n\n/* For node execution pretty-printing (see below) */\n\n/*\nvar INDENT = \"\";\n*/\n\nCSL.tokenExec = function (token, Item, item) {\n    // Called on state object\n    var next, maybenext, exec, debug;\n    debug = false;\n    next = token.next;\n    maybenext = false;\n\n    /* Pretty-print node executions */\n\n    /*\n    if ([\"if\", \"else-if\", \"else\"].indexOf(token.name) === -1) {\n        if (token.tokentype == 1) {\n            INDENT = INDENT.slice(0, -2);\n        }\n    }\n    this.sys.print(INDENT + \"---> Token: \" + token.name + \" (\" + token.tokentype + \") in \" + this.tmp.area + \", \" + this.output.current.mystack.length);\n    if ([\"if\", \"else-if\", \"else\"].indexOf(token.name) === -1) {\n        if (token.tokentype == 0) {\n            INDENT += \"  \";\n        }\n    }\n    */\n\n    var record = function (result) {\n        if (result) {\n            this.tmp.jump.replace(\"succeed\");\n            return token.succeed;\n        } else {\n            this.tmp.jump.replace(\"fail\");\n            return token.fail;\n        }\n    };\n    if (token.test) {\n        next = record.call(this,token.test(Item, item));\n    }\n    for (var i=0,ilen=token.execs.length;i<ilen;i++) {\n        exec = token.execs[i];\n        maybenext = exec.call(token, this, Item, item);\n        if (maybenext) {\n            next = maybenext;\n        }\n    }\n    //SNIP-START\n    if (debug) {\n        CSL.debug(token.name + \" (\" + token.tokentype + \") ---> done\");\n    }\n    //SNIP-END\n    return next;\n};\n\n/**\n * Macro expander.\n * <p>Called on the state object.</p>\n */\nCSL.expandMacro = function (macro_key_token, target) {\n    var mkey, macro_nodes, end_of_macro, func;\n\n    mkey = macro_key_token.postponed_macro;\n\n    var sort_direction = macro_key_token.strings.sort_direction;\n    \n    // Decorations and affixes are in wrapper applied in cs:text\n    macro_key_token = new CSL.Token(\"group\", CSL.START);\n    \n    var hasDate = false;\n    var macroid = false;\n    macro_nodes = this.cslXml.getNodesByName(this.cslXml.dataObj, 'macro', mkey);\n    if (macro_nodes.length) {\n        macroid = this.cslXml.getAttributeValue(macro_nodes[0],'cslid');\n        hasDate = this.cslXml.getAttributeValue(macro_nodes[0], \"macro-has-date\");\n    }\n    if (hasDate) {\n        mkey = mkey + \"@\" + this.build.current_default_locale;\n        func = function (state) {\n            if (state.tmp.extension) {\n                state.tmp[\"doing-macro-with-date\"] = true;\n            }\n        };\n        macro_key_token.execs.push(func);\n    }\n\n    if (this.build.macro_stack.indexOf(mkey) > -1) {\n        CSL.error(\"CSL processor error: call to macro \\\"\" + mkey + \"\\\" would cause an infinite loop\");\n    } else {\n        this.build.macro_stack.push(mkey);\n    }\n\n    macro_key_token.cslid = macroid;\n\n    if (CSL.MODULE_MACROS[mkey]) {\n        macro_key_token.juris = mkey;\n        this.opt.update_mode = CSL.POSITION;\n    }\n    // Macro group is treated as a real node in the style\n    CSL.Node.group.build.call(macro_key_token, this, target, true);\n\n    // Node does not exist in the CSL\n    if (!this.cslXml.getNodeValue(macro_nodes)) {\n        CSL.error(\"CSL style error: undefined macro \\\"\" + mkey + \"\\\"\");\n    }\n\n    // Let's macro\n    var mytarget = CSL.getMacroTarget.call(this, mkey);\n    if (mytarget) {\n        CSL.buildMacro.call(this, mytarget, macro_nodes);\n        CSL.configureMacro.call(this, mytarget);\n    }\n    if (!this.build.extension) {\n        var func = (function(macro_name) {\n            return function (state, Item, item) {\n                var next = 0;\n                while (next < state.macros[macro_name].length) {\n                    next = CSL.tokenExec.call(state, state.macros[macro_name][next], Item, item);\n                }\n            };\n        }(mkey));\n        var text_node = new CSL.Token(\"text\", CSL.SINGLETON);\n        text_node.execs.push(func);\n        target.push(text_node);\n    }\n\n    // Decorations and affixes are in wrapper applied in cs:text\n    end_of_macro = new CSL.Token(\"group\", CSL.END);\n    end_of_macro.strings.sort_direction = sort_direction;\n    \n    if (hasDate) {\n        func = function (state) {\n            if (state.tmp.extension) {\n                state.tmp[\"doing-macro-with-date\"] = false;\n            }\n        };\n        end_of_macro.execs.push(func);\n    }\n    if (macro_key_token.juris) {\n        end_of_macro.juris = mkey;\n     }\n    // Macro group is treated as a real node in the style\n    CSL.Node.group.build.call(end_of_macro, this, target, true);\n\n    this.build.macro_stack.pop();\n};\n\nCSL.getMacroTarget = function (mkey) {\n    var mytarget = false;\n    if (this.build.extension) {\n        mytarget = this[this.build.root + this.build.extension].tokens;\n    } else if (!this.macros[mkey]) {\n        mytarget = [];\n        this.macros[mkey] = mytarget;\n    }\n    return mytarget;\n};\n\nCSL.buildMacro = function (mytarget, macro_nodes) {\n    var builder = CSL.makeBuilder(this, mytarget);\n    var mynode;\n    if (\"undefined\" === typeof macro_nodes.length) {\n        mynode = macro_nodes;\n    } else {\n        mynode = macro_nodes[0];\n    }\n    builder(mynode);\n};\n\nCSL.configureMacro = function (mytarget) {\n    if (!this.build.extension) {\n        this.configureTokenList(mytarget);\n    }\n};\n\n\n/**\n * Convert XML node to token.\n * <p>This is called on an XML node.  After extracting the name and attribute\n * information from the node, it performs three operations.  Attribute information\n * relating to output formatting is stored on the node as an array of tuples,\n * which fixes the sequence of execution of output functions to be invoked\n * in the next phase of processing.  Other attribute information is reduced\n * to functions, and is pushed into an array on the token in no particular\n * order, for later execution.  The element name is used as a key to\n * invoke the relevant <code>build</code> method of the target element.\n * Element methods are defined in {@link CSL.Node}.</p>\n * @param {Object} state  The state object returned by {@link CSL.Engine}.\n * @param {Int} tokentype  A CSL namespace constant (<code>CSL.START</code>,\n * <code>CSL.END</code> or <code>CSL.SINGLETON</code>.\n */\nCSL.XmlToToken = function (state, tokentype, explicitTarget, var_stack) {\n    var name, txt, attrfuncs, attributes, decorations, token, key, target;\n    name = state.cslXml.nodename(this);\n    //CSL.debug(tokentype + \" : \" + name);\n    if (state.build.skip && state.build.skip !== name) {\n        return;\n    }\n    if (!name) {\n        txt = state.cslXml.content(this);\n        if (txt) {\n            state.build.text = txt;\n        }\n        return;\n    }\n    if (!CSL.Node[state.cslXml.nodename(this)]) {\n        CSL.error(\"Undefined node name \\\"\" + name + \"\\\".\");\n    }\n    attrfuncs = [];\n    attributes = state.cslXml.attributes(this);\n    decorations = CSL.setDecorations.call(this, state, attributes);\n    token = new CSL.Token(name, tokentype);\n    if (tokentype !== CSL.END || name === \"if\" || name === \"else-if\" || name === \"layout\") {\n        //\n        // xml: more xml stuff\n        //\n        for (var key in attributes) {\n            if (attributes.hasOwnProperty(key)) {\n                if (tokentype === CSL.END && key !== \"@language\" && key !== \"@locale\") {\n                    continue;\n                }\n                if (attributes.hasOwnProperty(key)) {\n                    if (CSL.Attributes[key]) {\n                        try {\n                            CSL.Attributes[key].call(token, state, \"\" + attributes[key]);\n                        } catch (e) {\n                            CSL.error(key + \" attribute: \" + e);\n                        }\n                    } else {\n                        CSL.debug(\"warning: undefined attribute \\\"\"+key+\"\\\" in style\");\n                    }\n                }\n            }\n        }\n        token.decorations = decorations;\n        if (CSL.DATE_VARIABLES.indexOf(attributes['@variable']) > -1) {\n            var_stack.push(token.variables);\n        }\n    } else if (tokentype === CSL.END && attributes['@variable']) {\n        token.hasVariable = true;\n        if (CSL.DATE_VARIABLES.indexOf(attributes['@variable']) > -1) {\n            token.variables = var_stack.pop();\n        }\n    }\n    //\n    // !!!!!: eliminate diversion of tokens to separate\n    // token list (formerly used for reading in macros\n    // and terms).\n    //\n    if (explicitTarget) {\n        target = explicitTarget;\n    } else {\n        target = state[state.build.area].tokens;\n    }\n    // True flags real nodes in the style\n    CSL.Node[name].build.call(token, state, target, true);\n};\n\n\n\n/*global CSL: true */\n\n\nCSL.DateParser = function () {\n\n    /*\n     * Fixed values\n     */\n\n    // jse imperial years\n    var epochPairs = [\n        [\"\\u660E\\u6CBB\", 1867],\n        [\"\\u5927\\u6B63\", 1911],\n        [\"\\u662D\\u548C\", 1925],\n        [\"\\u5E73\\u6210\", 1988]\n    ];\n\n    // years by jse imperial epoch\n    var epochYearByName = {};\n    for (var i=0,ilen=epochPairs.length; i<ilen; i++) {\n        var key = epochPairs[i][0];\n        var val = epochPairs[i][1];\n        epochYearByName[key] = val;\n    }\n    \n    var epochMatchStrings = [];\n    var epochMap = {};\n    for (var i=0,ilen=epochPairs.length; i<ilen; i++) {\n        var pair = epochPairs[i];\n        var val = pair[0];\n        epochMatchStrings.push(val);\n        epochMap[pair[0]] = pair[1];\n    }\n    var epochMatchString = epochMatchStrings.join(\"|\");\n\n    // regular expression to trap year name and year\n    // (splitter and matcher, to cope with ancient JS implementations)\n    var epochSplitter = new RegExp(\"(?:\" + epochMatchString + \")(?:[0-9]+)\");\n    var epochMatcher = new RegExp(\"(?:\" + epochMatchString + \")(?:[0-9]+)\", \"g\");\n\n    // regular expression for month or day kanji label\n    var kanjiMonthDay = /(\\u6708|\\u5E74)/g;\n\n    // regular expression for year kanji label\n    var kanjiYear = /\\u65E5/g;\n\n    // regular expression for double-width Japanese range marker\n    var kanjiRange = /\\u301c/g;\n\n    // parsing regexps for normalized strings\n    //   raw materials\n    var yearLast = \"(?:[?0-9]{1,2}%%NUMD%%){0,2}[?0-9]{4}(?![0-9])\";\n    var yearFirst = \"[?0-9]{4}(?:%%NUMD%%[?0-9]{1,2}){0,2}(?![0-9])\";\n    var numberVal = \"[?0-9]{1,3}\";\n    var rangeSeparator = \"[%%DATED%%]\";\n    var fuzzyChar = \"[?~]\";\n    var chars = \"[^\\-\\/\\~\\?0-9]+\";\n    var rexString = \"(\" + yearFirst + \"|\" + yearLast + \"|\" + numberVal + \"|\" + rangeSeparator + \"|\" + fuzzyChar + \"|\" + chars + \")\";\n    //   composed regexps\n    var rexDash = new RegExp(rexString.replace(/%%NUMD%%/g, \"-\").replace(/%%DATED%%/g, \"-\"));\n    var rexDashSlash = new RegExp(rexString.replace(/%%NUMD%%/g, \"-\").replace(/%%DATED%%/g, \"\\/\"));\n    var rexSlashDash = new RegExp(rexString.replace(/%%NUMD%%/g, \"\\/\").replace(/%%DATED%%/g, \"-\"));\n\n    /*\n     * Mutable values\n     */\n\n    // months\n    var monthString = \"january february march april may june july august september october november december spring summer fall winter spring summer\";\n    this.monthStrings = monthString.split(\" \");\n\n    /*\n     * Configuration functions\n     */\n\n    this.setOrderDayMonth = function() {\n        // preferred ordering for numeric dates\n        this.monthGuess = 1;\n        this.dayGuess = 0;\n    };\n\n    this.setOrderMonthDay = function() {\n        // preferred ordering for numeric dates\n        this.monthGuess = 0;\n        this.dayGuess = 1;\n    };\n\n    this.resetDateParserMonths = function() {\n        // Function to reset months to default.\n        this.monthSets = [];\n        for (var i=0,ilen=this.monthStrings.length; i<ilen; i++) {\n            this.monthSets.push([this.monthStrings[i]]);\n        }\n        this.monthAbbrevs = [];\n        for (var i=0,ilen=this.monthSets.length; i<ilen; i++) {\n            this.monthAbbrevs.push([]);\n            for (var j=0,jlen=this.monthSets[i].length; j<jlen; j++) {\n                this.monthAbbrevs[i].push(this.monthSets[i][0].slice(0, 3));\n            }\n        }\n        this.monthRexes = [];\n        for (var i=0,ilen=this.monthAbbrevs.length; i<ilen; i++) {\n            this.monthRexes.push(new RegExp(\"(?:\" + this.monthAbbrevs[i].join(\"|\") + \")\"));\n        }\n    };\n\n    this.addDateParserMonths = function(lst) {\n        // Extend list of months with an additional set of month abbreviations,\n        // extending strings as required to resolve ambiguities.\n\n        // Normalize string to list\n        if (\"string\" === typeof lst) {\n            lst = lst.split(/\\s+/);\n        }\n\n        // Check that there are twelve (or sixteen) to add\n        if (lst.length !== 12 && lst.length !== 16) {\n            CSL.debug(\"month [+season] list of \"+lst.length+\", expected 12 or 16. Ignoring.\");\n            return;\n        }\n\n        // Extend as necessary to resolve ambiguities\n        // For each new month string ...\n        for (var i=0,ilen=lst.length; i<ilen; i++) {\n            var abbrevLength = null;\n            var skip = false;\n            var insert = 3;\n            var extendedSets = {};\n            for (var j=0,jlen=this.monthAbbrevs.length; j<jlen; j++) {\n                extendedSets[j] = {};\n                if (j === i) {\n                    // Mark for skipping if same as an existing abbreviation of same month\n                    for (var k=0,klen=this.monthAbbrevs[i].length; k<klen; k++) {\n                        if (this.monthAbbrevs[i][k] === lst[i].slice(0, this.monthAbbrevs[i][k].length)) {\n                            skip = true;\n                            break;\n                        }\n                    }\n                } else {\n                    // Mark for extending if same as existing abbreviation of any expression of another month\n                    for (var k=0,klen=this.monthAbbrevs[j].length; k<klen; k++) {\n                        abbrevLength = this.monthAbbrevs[j][k].length;\n                        if (this.monthAbbrevs[j][k] === lst[i].slice(0, abbrevLength)) {\n                            while (this.monthSets[j][k].slice(0, abbrevLength) === lst[i].slice(0, abbrevLength)) {\n                                // Abort when full length is hit, otherwise extend\n                                if (abbrevLength > lst[i].length || abbrevLength > this.monthSets[j][k].length) {\n                                    CSL.debug(\"unable to disambiguate month string in date parser: \"+lst[i]);\n                                    break;\n                                } else {\n                                    // Mark both new entry and existing abbrev for extension\n                                    abbrevLength += 1;\n                                }\n                            }\n                            insert = abbrevLength;\n                            extendedSets[j][k] = abbrevLength;\n                        }\n                    }\n                }\n                for (var jKey in extendedSets) {\n                    for (var kKey in extendedSets[jKey]) {\n                        abbrevLength = extendedSets[jKey][kKey];\n                        jKey = parseInt(jKey, 10);\n                        kKey = parseInt(kKey, 10);\n                        this.monthAbbrevs[jKey][kKey] = this.monthSets[jKey][kKey].slice(0, abbrevLength);\n                    }\n                }\n            }\n            // Insert here\n            if (!skip) {\n                this.monthSets[i].push(lst[i]);\n                this.monthAbbrevs[i].push(lst[i].slice(0, insert));\n            }\n        }\n\n        // Compose\n        this.monthRexes = [];\n        this.monthRexStrs = [];\n        for (var i=0,ilen=this.monthAbbrevs.length; i<ilen; i++) {\n            this.monthRexes.push(new RegExp(\"^(?:\" + this.monthAbbrevs[i].join(\"|\") + \")\"));\n            this.monthRexStrs.push(\"^(?:\" + this.monthAbbrevs[i].join(\"|\") + \")\");\n        }\n        if (this.monthAbbrevs.length === 18) {\n            for (var i=12,ilen=14; i<ilen; i++) {\n                this.monthRexes[i+4] = new RegExp(\"^(?:\" + this.monthAbbrevs[i].join(\"|\") + \")\");\n                this.monthRexStrs[i+4] = \"^(?:\" + this.monthAbbrevs[i].join(\"|\") + \")\";\n            }\n        }\n    };\n\n    /*\n     * Conversion functions\n     */\n\n    this.convertDateObjectToArray = function (thedate) {\n        // Converts object in place and returns object\n        thedate[\"date-parts\"] = [];\n        thedate[\"date-parts\"].push([]);\n        var slicelen = 0;\n        var part;\n        for (var i=0,ilen=3; i<ilen; i++) {\n            part = [\"year\", \"month\", \"day\"][i];\n            if (!thedate[part]) {\n                break;\n            }\n            slicelen += 1;\n            thedate[\"date-parts\"][0].push(thedate[part]);\n            delete thedate[part];\n        }\n        thedate[\"date-parts\"].push([]);\n        for (var i=0, ilen=slicelen; i<ilen; i++) {\n            part = [\"year_end\", \"month_end\", \"day_end\"][i];\n            if (!thedate[part]) {\n                break;\n            }\n            thedate[\"date-parts\"][1].push(thedate[part]);\n            delete thedate[part];\n        }\n        if (thedate[\"date-parts\"][0].length !== thedate[\"date-parts\"][1].length) {\n            thedate[\"date-parts\"].pop();\n        }\n        return thedate;\n    };\n\n    // XXXX String output is currently unable to represent ranges\n    this.convertDateObjectToString = function(thedate) {\n        // Returns string\n        var ret = [];\n        for (var i = 0, ilen = 3; i < ilen; i += 1) {\n            if (thedate[CSL.DATE_PARTS_ALL[i]]) {\n                ret.push(thedate[CSL.DATE_PARTS_ALL[i]]);\n            } else {\n                break;\n            }\n        }\n        return ret.join(\"-\");\n    };\n\n    /*\n     * Utility function\n     */\n\n    this._parseNumericDate = function (ret, delim, suff, txt) {\n        if (!suff) {\n            suff = \"\";\n        }\n        var lst = txt.split(delim);\n        \n        for (var i=0, ilen=lst.length; i<ilen; i++) {\n            if (lst[i].length === 4) {\n                ret[(\"year\" + suff)] = lst[i].replace(/^0*/, \"\");\n                if (!i) {\n                    lst = lst.slice(1);\n                } else {\n                    lst = lst.slice(0, i);\n                }\n                break;\n            }\n        }\n        for (var i=0,ilen=lst.length; i<ilen; i++) {\n            lst[i] = parseInt(lst[i], 10);\n        }\n        if (lst.length === 1 || (lst.length === 2 && !lst[1])) {\n            var month = lst[0];\n            if (month) {\n                ret[(\"month\" + suff)] = \"\" + lst[0];\n            }\n        } else if (lst.length === 2) {\n            if (lst[this.monthGuess] > 12) {\n                var month = lst[this.dayGuess];\n                var day = lst[this.monthGuess];\n                if (month) {\n                    ret[(\"month\" + suff)] = \"\" + month;\n                    if (day) {\n                        ret[(\"day\" + suff)] = \"\" + day;\n                    }\n                }\n            } else {\n                var month = lst[this.monthGuess];\n                var day = lst[this.dayGuess];\n                if (month) {\n                    ret[(\"month\" + suff)] = \"\" + month;\n                    if (day) {\n                        ret[(\"day\" + suff)] = \"\" + day;\n                    }\n                }\n            }\n        }\n    };\n\n    /*\n     * Parsing functions\n     */\n\n    this.parseDateToObject = function (txt) {\n        //\n        // Normalize the format and the year if it's a Japanese date\n        //\n        var orig = txt;\n        var slashPos = -1;\n        var dashPos = -1;\n        var yearIsNegative = false;\n        var lst;\n        if (txt) {\n            txt = txt.replace(/^(.*[0-9])T[0-9].*/, \"$1\");\n            // If string leads with a minus sign, strip and memo it.\n            if (txt.slice(0, 1) === \"-\") {\n                yearIsNegative = true;\n                txt = txt.slice(1);\n            }\n            \n            // If string is a number of 1 to 3 characters only, treat as year.\n            if (txt.match(/^[0-9]{1,3}$/)) {\n                while (txt.length < 4) {\n                    txt = \"0\" + txt;\n                }\n            }\n            \n            // Normalize to string\n            txt = \"\" + txt;\n            // Remove things that look like times\n            txt = txt.replace(/\\s*[0-9]{2}:[0-9]{2}(?::[0-9]+)/,\"\");\n            var m = txt.match(kanjiMonthDay);\n            if (m) {\n                txt = txt.replace(/\\s+/g, \"\");\n                txt = txt.replace(kanjiYear, \"\");\n                txt = txt.replace(kanjiMonthDay, \"-\");\n                txt = txt.replace(kanjiRange, \"/\");\n                txt = txt.replace(/\\-\\//g, \"/\");\n                txt = txt.replace(/-$/g,\"\");\n\n                // Tortuous workaround for IE6\n                var slst = txt.split(epochSplitter);\n                lst = [];\n                var mm = txt.match(epochMatcher);\n                if (mm) {\n                    var mmx = [];\n                    for (var i=0,ilen=mm.length; i<ilen; i++) {\n                        mmx = mmx.concat(mm[i].match(/([^0-9]+)([0-9]+)/).slice(1));\n                    }\n                    for (var i=0,ilen=slst.length; i<ilen; i++) {\n                        lst.push(slst[i]);\n                        if (i !== (ilen - 1)) {\n                            // pos is undeclared, and multiplying by 2 here is insane.\n                            var mmpos = (i * 2);\n                            lst.push(mmx[mmpos]);\n                            lst.push(mmx[mmpos + 1]);\n                        }\n                    }\n                } else {\n                    lst = slst;\n                }\n                // workaround duly applied, this now works\n                for (var i=1,ilen=lst.length; i<ilen; i+=3) {\n                    lst[i + 1] = epochMap[lst[i]] + parseInt(lst[i + 1], 10);\n                    lst[i] = \"\";\n                }\n                txt = lst.join(\"\");\n                txt = txt.replace(/\\s*-\\s*$/, \"\").replace(/\\s*-\\s*\\//, \"/\");\n                //\n                // normalize date and identify delimiters\n                //\n                txt = txt.replace(/\\.\\s*$/, \"\");\n\n                // not sure what this is meant to do\n                txt = txt.replace(/\\.(?! )/, \"\");\n\n                slashPos = txt.indexOf(\"/\");\n                dashPos = txt.indexOf(\"-\");\n            }\n        }\n        // drop punctuation from a.d., b.c.\n        txt = txt.replace(/([A-Za-z])\\./g, \"$1\");\n\n        var number = \"\";\n        var note = \"\";\n        var thedate = {};\n        var rangeDelim;\n        var dateDelim;\n        if (txt.slice(0, 1) === \"\\\"\" && txt.slice(-1) === \"\\\"\") {\n            thedate.literal = txt.slice(1, -1);\n            return thedate;\n        }\n        if (slashPos > -1 && dashPos > -1) {\n            var slashCount = txt.split(\"/\");\n            if (slashCount.length > 3) {\n                rangeDelim = \"-\";\n                txt = txt.replace(/\\_/g, \"-\");\n                dateDelim = \"/\";\n                lst = txt.split(rexSlashDash);\n            } else {\n                rangeDelim = \"/\";\n                txt = txt.replace(/\\_/g, \"/\");\n                dateDelim = \"-\";\n                lst = txt.split(rexDashSlash);\n            }\n        } else {\n            txt = txt.replace(/\\//g, \"-\");\n            txt = txt.replace(/\\_/g, \"-\");\n            rangeDelim = \"-\";\n            dateDelim = \"-\";\n            lst = txt.split(rexDash);\n        }\n        var ret = [];\n        for (var i=0,ilen=lst.length; i<ilen; i++) {\n            var m = lst[i].match(/^\\s*([\\-\\/]|[^\\-\\/\\~\\?0-9]+|[\\-~?0-9]+)\\s*$/);\n            if (m) {\n                ret.push(m[1]);\n            }\n        }\n        //\n        // Phase 2\n        //\n        var delimPos = ret.indexOf(rangeDelim);\n        var delims = [];\n        var isRange = false;\n        if (delimPos > -1) {\n            delims.push([0, delimPos]);\n            delims.push([(delimPos + 1), ret.length]);\n            isRange = true;\n        } else {\n            delims.push([0, ret.length]);\n        }\n        //\n        // For each side of a range divide ...\n        //\n        var suff = \"\";\n        \n        for (var i=0,ilen=delims.length; i<ilen; i++) {\n            var delim = delims[i];\n            //\n            // Process each element ...\n            //\n            var date = ret.slice(delim[0], delim[1]);\n            outer: \n            for (var j=0,jlen=date.length; j<jlen; j++) {\n                var element = date[j];\n                //\n                // If it's a numeric date, process it.\n                //\n                if (element.indexOf(dateDelim) > -1) {\n                    this._parseNumericDate(thedate, dateDelim, suff, element);\n                    continue;\n                }\n                //\n                // If it's an obvious year, record it.\n                //\n                if (element.match(/[0-9]{4}/)) {\n                    thedate[(\"year\" + suff)] = element.replace(/^0*/, \"\");\n                    continue;\n                }\n                //\n                // If it's a fuzzy marker, record it.\n                //\n                if (element === \"~\" || element === \"?\" || element === \"c\" || element.match(/^cir/)) {\n                    thedate.circa = true;\n                }\n                //\n                // If it's a month, record it.\n                //\n                for (var k=0,klen=this.monthRexes.length; k<klen; k++) {\n                    if (element.toLocaleLowerCase().match(this.monthRexes[k])) {\n                        thedate[(\"month\" + suff)] = \"\" + (parseInt(k, 10) + 1);\n                        continue outer;\n                    }\n                }\n                //\n                // If it's a number, make a note of it\n                //\n                if (element.match(/^[0-9]+$/)) {\n                    number = element;\n                }\n                //\n                // If it's a BC or AD marker, make a year of\n                // any note.  Separate, reverse the sign of the year\n                // if it's BC.\n                //\n                if (element.toLocaleLowerCase().match(/^bc/) && number) {\n                    thedate[(\"year\" + suff)] = \"\" + (number * -1);\n                    number = \"\";\n                    continue;\n                }\n                if (element.toLocaleLowerCase().match(/^ad/) && number) {\n                    thedate[(\"year\" + suff)] = \"\" + number;\n                    number = \"\";\n                    continue;\n                }\n                //\n                // If it's cruft, make a note of it\n                //\n                if (element.toLocaleLowerCase().match(/(?:mic|tri|hil|eas)/) && !thedate[(\"season\" + suff)]) {\n                    note = element;\n                    continue;\n                }\n            }\n            //\n            // If at the end of the string there's still a note\n            // hanging around, make a day of it.\n            //\n            if (number) {\n                thedate[(\"day\" + suff)] = number;\n                number = \"\";\n            }\n            //\n            // If at the end of the string there's cruft lying\n            // around, and the season field is empty, put the\n            // cruft there.\n            //\n            if (note && !thedate[(\"season\" + suff)]) {\n                thedate[(\"season\" + suff)] = note.trim();\n                note = \"\";\n            }\n            suff = \"_end\";\n        }\n        //\n        // update any missing elements on each side of the divide\n        // from the other\n        //\n        if (isRange) {\n            for (var j=0,jlen=CSL.DATE_PARTS_ALL.length; j<jlen; j++) {\n                var item = CSL.DATE_PARTS_ALL[j];\n                if (thedate[item] && !thedate[(item + \"_end\")]) {\n                    thedate[(item + \"_end\")] = thedate[item];\n                } else if (!thedate[item] && thedate[(item + \"_end\")]) {\n                    thedate[item] = thedate[(item + \"_end\")];\n                }\n            }\n        }\n        //\n        // If there's no year, or if there only a year and a day, it's a failure; pass through the literal\n        //\n        if (!thedate.year || (thedate.year && thedate.day && !thedate.month)) {\n            thedate = { \"literal\": orig };\n        }\n        var parts = [\"year\", \"month\", \"day\", \"year_end\", \"month_end\", \"day_end\"];\n        for (var i=0,ilen=parts.length; i<ilen; i++) {\n            var part = parts[i];\n            if (\"string\" === typeof thedate[part] && thedate[part].match(/^[0-9]+$/)) {\n                thedate[part] = parseInt(thedate[part], 10);\n            }\n            \n        }\n        if (yearIsNegative && Object.keys(thedate).indexOf(\"year\") > -1) {\n            thedate.year = (thedate.year * -1);\n        }\n        return thedate;\n    };\n\n    this.parseDateToArray = function(txt) {\n        return this.convertDateObjectToArray(this.parseDateToObject(txt));            \n    };\n\n    this.parseDateToString = function(txt) {\n        return this.convertDateObjectToString(this.parseDateToObject(txt));\n    };\n    \n    this.parse = function(txt) {\n        return this.parseDateToObject(txt);\n    };\n    \n    /*\n\n     * Setup\n     */\n\n    this.setOrderMonthDay();\n    this.resetDateParserMonths();\n};\nCSL.DateParser = new CSL.DateParser();\n\n/*global CSL: true */\n\nCSL.Engine = function (sys, style, lang, forceLang) {\n    var attrs, langspec;\n    this.processor_version = CSL.PROCESSOR_VERSION;\n    this.csl_version = \"1.0\";\n    this.sys = sys;\n    \n    if (typeof Object.assign != 'function') {\n        // Must be writable: true, enumerable: false, configurable: true\n        Object.defineProperty(Object, \"assign\", {\n            value: function assign(target) { // .length of function is 2\n                'use strict';\n                if (target == null) { // TypeError if undefined or null\n                    throw new TypeError('Cannot convert undefined or null to object');\n                }\n\n                var to = Object(target);\n\n                for (var index = 1; index < arguments.length; index++) {\n                    var nextSource = arguments[index];\n\n                    if (nextSource != null) { // Skip over if undefined or null\n                        for (var nextKey in nextSource) {\n                            // Avoid bugs when hasOwnProperty is shadowed\n                            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                                to[nextKey] = nextSource[nextKey];\n                            }\n                        }\n                    }\n                }\n                return to;\n            },\n            writable: true,\n            configurable: true\n        });\n    }\n\n    // XXX This may be excess code. Given the normalization performed on\n    // XXX the output queue before variableWrapper() is run, a single\n    // XXX space should be the most cruft that we ever see before a variable.\n    if (sys.variableWrapper) {\n        CSL.VARIABLE_WRAPPER_PREPUNCT_REX = new RegExp('^([' + [\" \"].concat(CSL.SWAPPING_PUNCTUATION).join(\"\") + ']*)(.*)');\n    }\n    // XXXX This should be restored -- temporarily suspended for testing of JSON style support.\n    if (CSL.retrieveStyleModule) {\n        this.sys.retrieveStyleModule = CSL.retrieveStyleModule;\n    }\n    if (CSL.getAbbreviation) {\n        this.sys.getAbbreviation = CSL.getAbbreviation;\n    }\n    if (this.sys.stringCompare) {\n        CSL.stringCompare = this.sys.stringCompare;\n    }\n    this.sys.AbbreviationSegments = CSL.AbbreviationSegments;\n\n    this.transform = new CSL.Transform(this);\n    // true or false\n    this.setParseNames = function (val) {\n        this.opt['parse-names'] = val;\n    };\n    \n    this.opt = new CSL.Engine.Opt();\n    this.tmp = new CSL.Engine.Tmp();\n    this.build = new CSL.Engine.Build();\n    this.fun = new CSL.Engine.Fun(this);\n\n    this.configure = new CSL.Engine.Configure();\n    // Build citation before citation_sort in order to pick up\n    // state.opt.update_mode, needed it determine whether\n    // a grouped sort should be performed.\n    this.citation_sort = new CSL.Engine.CitationSort();\n    this.bibliography_sort = new CSL.Engine.BibliographySort();\n    this.citation = new CSL.Engine.Citation(this);\n    this.bibliography = new CSL.Engine.Bibliography();\n    this.intext = new CSL.Engine.InText();\n\n    this.output = new CSL.Output.Queue(this);\n\n    //this.render = new CSL.Render(this);\n    //\n    // This latter queue is used for formatting date chunks\n    // before they are folded back into the main queue.\n    //\n    this.dateput = new CSL.Output.Queue(this);\n\n    this.cslXml = CSL.setupXml(style);\n\n    for (var i in CSL.SYS_OPTIONS) {\n        var option = CSL.SYS_OPTIONS[i];\n        if (\"boolean\" === typeof this.sys[option]) {\n            this.opt.development_extensions[option] = this.sys[option];\n        }\n        \n    }\n    if (this.opt.development_extensions.uppercase_subtitles || this.opt.development_extensions.implicit_short_title) {\n        this.opt.development_extensions.main_title_from_short_title = true;\n    }\n    if (this.opt.development_extensions.csl_reverse_lookup_support) {\n        this.build.cslNodeId = 0;\n        this.setCslNodeIds = function(myxml, nodename) {\n            var children = this.cslXml.children(myxml);\n            this.cslXml.setAttribute(myxml, 'cslid', this.build.cslNodeId);\n            this.opt.nodenames.push(nodename);\n            this.build.cslNodeId += 1;\n            for (var i = 0, ilen = this.cslXml.numberofnodes(children); i < ilen; i += 1) {\n                nodename = this.cslXml.nodename(children[i]);\n                if (nodename) {\n                    this.setCslNodeIds(children[i], nodename);\n                }\n            }\n        };\n        this.setCslNodeIds(this.cslXml.dataObj, \"style\");\n    }\n    // Preprocessing ops for the XML input\n    this.cslXml.addMissingNameNodes(this.cslXml.dataObj);\n    this.cslXml.addInstitutionNodes(this.cslXml.dataObj);\n    this.cslXml.insertPublisherAndPlace(this.cslXml.dataObj);\n    this.cslXml.flagDateMacros(this.cslXml.dataObj);\n    attrs = this.cslXml.attributes(this.cslXml.dataObj);\n    if (\"undefined\" === typeof attrs[\"@sort-separator\"]) {\n        this.cslXml.setAttribute(this.cslXml.dataObj, \"sort-separator\", \", \");\n    }\n    // This setting does the right thing and seems not to be side-effects\n    this.opt[\"initialize-with-hyphen\"] = true;\n\n    // Locale resolution\n    //\n    // (1) Get three locale strings \n    //     -- default-locale (stripped)\n    //     -- processor-locale\n    //     -- en_US\n    \n    this.setStyleAttributes();\n\n    this.opt.xclass = this.cslXml.getAttributeValue(this.cslXml.dataObj, \"class\");\n    this.opt[\"class\"] = this.opt.xclass;\n    this.opt.styleID = this.cslXml.getStyleId(this.cslXml.dataObj);\n    this.opt.styleName = this.cslXml.getStyleId(this.cslXml.dataObj, true);\n\n    if (this.opt.version.slice(0,4) === \"1.1m\") {\n        this.opt.development_extensions.consolidate_legal_items = true;\n        this.opt.development_extensions.consolidate_container_items = true;\n        this.opt.development_extensions.main_title_from_short_title = true;\n        this.opt.development_extensions.expect_and_symbol_form = true;\n        this.opt.development_extensions.require_explicit_legal_case_title_short = true;\n        this.opt.development_extensions.force_jurisdiction = true;\n        this.opt.development_extensions.force_title_abbrev_fallback = true;\n    }\n    // We seem to have two language specs flying around:\n    //   this.opt[\"default-locale\"], and this.opt.lang\n    // Keeping them aligned for safety's sake, pending\n    // eventual cleanup.\n    if (lang) {\n        lang = lang.replace(\"_\", \"-\");\n        lang = CSL.normalizeLocaleStr(lang);\n    }\n    if (this.opt[\"default-locale\"][0]) {\n        this.opt[\"default-locale\"][0] = this.opt[\"default-locale\"][0].replace(\"_\", \"-\");\n        this.opt[\"default-locale\"][0] = CSL.normalizeLocaleStr(this.opt[\"default-locale\"][0]);\n    }\n    if (lang && forceLang) {\n        this.opt[\"default-locale\"] = [lang];\n    }\n    if (lang && !forceLang && this.opt[\"default-locale\"][0]) {\n        lang = this.opt[\"default-locale\"][0];\n    }\n    if (this.opt[\"default-locale\"].length === 0) {\n        if (!lang) {\n            lang = \"en-US\";\n        }\n        this.opt[\"default-locale\"].push(\"en-US\");\n    }\n    if (!lang) {\n        lang = this.opt[\"default-locale\"][0];\n    }\n    langspec = CSL.localeResolve(lang);\n    this.opt.lang = langspec.best;\n    this.opt[\"default-locale\"][0] = langspec.best;\n    this.locale = {};\n    if (!this.opt[\"default-locale-sort\"]) {\n        this.opt[\"default-locale-sort\"] = this.opt[\"default-locale\"][0];\n    }\n    // Test processor against JS engine locale mess to find a field separator that works\n    if ('dale|'.localeCompare('daleb', this.opt[\"default-locale-sort\"]) > -1) {\n        this.opt.sort_sep = \"@\";\n    } else {\n        this.opt.sort_sep = \"|\";\n    }\n    this.localeConfigure(langspec);\n\n    // Build skip-word regexp\n    function makeRegExp(lst) {\n        var lst = lst.slice();\n        var ret = new RegExp( \"(?:(?:[?!:]*\\\\s+|-|^)(?:\" + lst.join(\"|\") + \")(?=[!?:]*\\\\s+|-|$))\", \"g\");\n        return ret;\n    }\n    this.locale[this.opt.lang].opts[\"skip-words-regexp\"] = makeRegExp(this.locale[this.opt.lang].opts[\"skip-words\"]);\n\n    this.output.adjust = new CSL.Output.Queue.adjust(this.getOpt('punctuation-in-quote'));\n\n    this.registry = new CSL.Registry(this);\n\n    // XXX For modular jurisdiction support, parameterize buildTokenLists().\n    // XXX Feed as arguments:\n    // XXX * actual node to be walked (cslXml)\n    // XXX * actual target array\n\n    this.macros = {};\n\n    this.build.area = \"citation\";\n    var area_nodes = this.cslXml.getNodesByName(this.cslXml.dataObj, this.build.area);\n    this.buildTokenLists(area_nodes, this[this.build.area].tokens);\n\n    this.build.area = \"bibliography\";\n    var area_nodes = this.cslXml.getNodesByName(this.cslXml.dataObj, this.build.area);\n    this.buildTokenLists(area_nodes, this[this.build.area].tokens);\n\n    this.build.area = \"intext\";\n    var area_nodes = this.cslXml.getNodesByName(this.cslXml.dataObj, this.build.area);\n    this.buildTokenLists(area_nodes, this[this.build.area].tokens);\n\n    if (this.opt.parallel.enable) {\n        this.parallel = new CSL.Parallel(this);\n    }\n\n    this.juris = {};\n\n    this.configureTokenLists();\n\n    this.disambiguate = new CSL.Disambiguation(this);\n\n    this.splice_delimiter = false;\n\n    //\n    // date parser\n    //\n    this.fun.dateparser = CSL.DateParser;\n    //\n    // flip-flopper for inline markup\n    //\n    this.fun.flipflopper = new CSL.Util.FlipFlopper(this);\n    //\n    // utility functions for quotes\n    //\n    this.setCloseQuotesArray();\n    //\n    // configure ordinal numbers generator\n    //\n    this.fun.ordinalizer.init(this);\n    //\n    // configure long ordinal numbers generator\n    //\n    this.fun.long_ordinalizer.init(this);\n    //\n    // set up page mangler\n    //\n    this.fun.page_mangler = CSL.Util.PageRangeMangler.getFunction(this, \"page\");\n    this.fun.year_mangler = CSL.Util.PageRangeMangler.getFunction(this, \"year\");\n\n    this.setOutputFormat(\"html\");\n};\n\nCSL.Engine.prototype.setCloseQuotesArray = function () {\n    var ret;\n    ret = [];\n    ret.push(this.getTerm(\"close-quote\"));\n    ret.push(this.getTerm(\"close-inner-quote\"));\n    ret.push('\"');\n    ret.push(\"'\");\n    this.opt.close_quotes_array = ret;\n};\n\n// Walker for preparsed XML input\nCSL.makeBuilder = function (me, target) {\n    var var_stack = [];\n    var node_stack = [];\n    function runStart (node) {\n        node_stack.push(node);\n        CSL.XmlToToken.call(node, me, CSL.START, target, var_stack);\n    }\n    function runEnd () {\n        var node = node_stack.pop();\n        CSL.XmlToToken.call(node, me, CSL.END, target, var_stack);\n    }\n    function runSingle (node) {\n        CSL.XmlToToken.call(node, me, CSL.SINGLETON, target, var_stack);\n    }\n    function buildStyle (nodes, parent, node_stack) {\n        if (!node_stack) {\n            node_stack = [];\n        }\n        if (!nodes) {\n            nodes = [];\n        }\n        if (\"undefined\" === typeof nodes.length) {\n            nodes = [nodes];\n        }\n        for (var i=0; i<nodes.length; i++) {\n            var node = nodes[i];\n            if (me.cslXml.nodename(node) === null) {\n                continue;\n            }\n            if (parent && me.cslXml.nodename(node) === \"date\") {\n                CSL.Util.fixDateNode.call(me, parent, i, node);\n                node = me.cslXml.children(parent)[i];\n            }\n            if (me.cslXml.numberofnodes(me.cslXml.children(node))) {\n                runStart(node);\n                buildStyle(me.cslXml.children(node), node, node_stack);\n                runEnd();\n            } else {\n                runSingle(node);\n            }\n        }\n    }\n    return buildStyle;\n};\n\n\nCSL.Engine.prototype.buildTokenLists = function (area_nodes, target) {\n    if (!this.cslXml.getNodeValue(area_nodes)) {\n        return;\n    }\n    var builder = CSL.makeBuilder(this, target);\n    var mynode;\n    if (\"undefined\" === typeof area_nodes.length) {\n        mynode = area_nodes;\n    } else {\n        mynode = area_nodes[0];\n    }\n    builder(mynode);\n};\n\n\nCSL.Engine.prototype.setStyleAttributes = function () {\n    var dummy, attributes, attrname;\n    // Protect against DOM engines that deliver a top-level document\n    // (needed for createElement) that does not contain our top-level node.\n    // \n    // The string coercion on this.cslXml.tagName addresses a bizarre\n    // condition on the top-level node in jsdom running under node.js, in which:\n    //   (1) typeof this.cslXml.tagName === \"undefined\"; and\n    //   (2) !this.cslXml.tagName === false\n    // Coerced, it becomes an empty string.\n    var dummy = {};\n    dummy.name = this.cslXml.nodename(this.cslXml.dataObj);\n    attributes = this.cslXml.attributes(this.cslXml.dataObj);\n    for (attrname in attributes) {\n        if (attributes.hasOwnProperty(attrname)) {\n            // attr = attributes[key];\n            CSL.Attributes[attrname].call(dummy, this, attributes[attrname]);\n        }\n    }\n};\n\nCSL.Engine.prototype.getTerm = function (term, form, plural, gender, mode, forceDefaultLocale) {\n    if (term && term.match(/[A-Z]/) && term === term.toUpperCase()) {\n        CSL.debug(\"Warning: term key is in uppercase form: \"+term);\n        term = term.toLowerCase();\n    }\n    var lang;\n    if (forceDefaultLocale) {\n        lang = this.opt[\"default-locale\"][0];\n    } else {\n        lang = this.opt.lang;\n    }\n    var ret = CSL.Engine.getField(CSL.LOOSE, this.locale[lang].terms, term, form, plural, gender);\n    // XXXXX Temporary, until locale term is deployed in CSL.\n    if (!ret && term === \"range-delimiter\") {\n        ret = \"\\u2013\";\n    }\n    // XXXXX Not so good if mode is neither strict nor tolerant ...\n    if (typeof ret === \"undefined\") {\n        if (mode === CSL.STRICT) {\n            CSL.error(\"Error in getTerm: term \\\"\" + term + \"\\\" does not exist.\");\n        } else if (mode === CSL.TOLERANT) {\n            ret = \"\";\n        }\n    }\n    if (ret) {\n        this.tmp.cite_renders_content = true;\n    }\n    return ret;\n};\n\nCSL.Engine.prototype.getDate = function (form, forceDefaultLocale) {\n    var lang;\n    if (forceDefaultLocale) {\n        lang = this.opt[\"default-locale\"];\n    } else {\n        lang = this.opt.lang;\n    }\n    if (this.locale[lang].dates[form]) {\n        return this.locale[lang].dates[form];\n    } else {\n        return false;\n    }\n};\n\nCSL.Engine.prototype.getOpt = function (arg) {\n    if (\"undefined\" !== typeof this.locale[this.opt.lang].opts[arg]) {\n        return this.locale[this.opt.lang].opts[arg];\n    } else {\n        return false;\n    }\n};\n\n\n\nCSL.Engine.prototype.getVariable = function (Item, varname, form, plural) {\n    return CSL.Engine.getField(CSL.LOOSE, Item, varname, form, plural);\n};\n\nCSL.Engine.prototype.getDateNum = function (ItemField, partname) {\n    if (\"undefined\" === typeof ItemField) {\n        return 0;\n    } else {\n        return ItemField[partname];\n    }\n};\n\nCSL.Engine.getField = function (mode, hash, term, form, plural, gender) {\n    var ret, forms, f, pos, len, hashterm;\n    ret = \"\";\n    if (\"undefined\" === typeof hash[term]) {\n        if (mode === CSL.STRICT) {\n            CSL.error(\"Error in getField: term \\\"\" + term + \"\\\" does not exist.\");\n        } else {\n            return undefined;\n        }\n    }\n    if (gender && hash[term][gender]) {\n        hashterm = hash[term][gender];\n    } else {\n        hashterm = hash[term];\n    }\n    forms = [];\n    if (form === \"symbol\") {\n        forms = [\"symbol\", \"short\"];\n    } else if (form === \"verb-short\") {\n        forms = [\"verb-short\", \"verb\"];\n    } else if (form !== \"long\") {\n        forms = [form];\n    }\n    forms = forms.concat([\"long\"]);\n    len = forms.length;\n    for (pos = 0; pos < len; pos += 1) {\n        f = forms[pos];\n        if (\"string\" === typeof hashterm || \"number\" === typeof hashterm) {\n            ret = hashterm;\n        } else if (\"undefined\" !== typeof hashterm[f]) {\n            if (\"string\" === typeof hashterm[f] || \"number\" === typeof hashterm[f]) {\n                ret = hashterm[f];\n            } else {\n                if (\"number\" === typeof plural) {\n                    ret = hashterm[f][plural];\n                } else {\n                    ret = hashterm[f][0];\n                }\n            }\n            break;\n        }\n    }\n    return ret;\n};\n\nCSL.Engine.prototype.configureTokenLists = function () {\n    var area, pos, len;\n    //for each (var area in [\"citation\", \"citation_sort\", \"bibliography\",\"bibliography_sort\"]) {\n    len = CSL.AREAS.length;\n    for (pos = 0; pos < len; pos += 1) {\n        //var ret = [];\n        area = CSL.AREAS[pos];\n        var tokens = this[area].tokens;\n        this.configureTokenList(tokens);\n    }\n    this.version = CSL.version;\n    return this.state;\n};\n\nCSL.Engine.prototype.configureTokenList = function (tokens) {\n    var dateparts_master, token, dateparts, part, ppos, pppos, llen, lllen;\n    dateparts_master = [\"year\", \"month\", \"day\"];\n    llen = tokens.length - 1;\n    for (ppos = llen; ppos > -1; ppos += -1) {\n        token = tokens[ppos];\n        //token.pos = ppos;\n        //ret.push(token);\n        if (\"date\" === token.name && CSL.END === token.tokentype) {\n            dateparts = [];\n        }\n        if (\"date-part\" === token.name && token.strings.name) {\n            lllen = dateparts_master.length;\n            for (pppos = 0; pppos < lllen; pppos += 1) {\n                part = dateparts_master[pppos];\n                if (part === token.strings.name) {\n                    dateparts.push(token.strings.name);\n                }\n            }\n        }\n        if (\"date\" === token.name && CSL.START === token.tokentype) {\n            dateparts.reverse();\n            token.dateparts = dateparts;\n        }\n        token.next = (ppos + 1);\n        if (token.name && CSL.Node[token.name].configure) {\n            CSL.Node[token.name].configure.call(token, this, ppos);\n        }\n    }\n};\n\nCSL.Engine.prototype.refetchItems = function (ids) {\n    var ret = [];\n    for (var i = 0, ilen = ids.length; i < ilen; i += 1) {\n        ret.push(this.refetchItem(\"\" + ids[i]));\n    }\n    return ret;\n};\n\nCSL.ITERATION = 0;\n\n// Wrapper for sys.retrieveItem supplied by calling application.\n// Adds experimental fields embedded in the note field for\n// style development trial and testing purposes.\nCSL.Engine.prototype.retrieveItem = function (id) {\n    var Item, m, i;\n\n    if (!this.tmp.loadedItemIDs[id]) {\n        this.tmp.loadedItemIDs[id] = true;\n    } else {\n        return this.registry.refhash[id];\n    }\n\n    if (this.opt.development_extensions.normalize_lang_keys_to_lowercase &&\n        \"boolean\" === typeof this.opt.development_extensions.normalize_lang_keys_to_lowercase) {\n        // This is a hack. Should properly be configured by a processor method after build.\n        for (var i=0,ilen=this.opt[\"default-locale\"].length; i<ilen; i+=1) {\n            this.opt[\"default-locale\"][i] = this.opt[\"default-locale\"][i].toLowerCase();\n        }\n        for (var i=0,ilen=this.opt[\"locale-translit\"].length; i<ilen; i+=1) {\n            this.opt[\"locale-translit\"][i] = this.opt[\"locale-translit\"][i].toLowerCase();\n        }\n        for (var i=0,ilen=this.opt[\"locale-translat\"].length; i<ilen; i+=1) {\n            this.opt[\"locale-translat\"][i] = this.opt[\"locale-translat\"][i].toLowerCase();\n        }\n        this.opt.development_extensions.normalize_lang_keys_to_lowercase = 100;\n    }\n\n    //Zotero.debug(\"XXX === ITERATION \" + CSL.ITERATION + \" \"+ id +\" ===\");\n    CSL.ITERATION += 1;\n\n    Item = JSON.parse(JSON.stringify(this.sys.retrieveItem(\"\" + id)));\n\n    // Optionally normalize keys to lowercase()\n    if (this.opt.development_extensions.normalize_lang_keys_to_lowercase) {\n        if (Item.multi) {\n            if (Item.multi._keys) {\n                for (var field in Item.multi._keys) {\n                    for (var key in Item.multi._keys[field]) {\n                        if (key !== key.toLowerCase()) {\n                            Item.multi._keys[field][key.toLowerCase()] = Item.multi._keys[field][key];\n                            delete Item.multi._keys[field][key];\n                        }\n                    }\n                }\n            }\n            if (Item.multi.main) {\n                for (var field in Item.multi.main) {\n                    Item.multi.main[field] = Item.multi.main[field].toLowerCase();\n                }\n            }\n        }\n        for (var i=0, ilen=CSL.NAME_VARIABLES.length; i>ilen; i+=1) {\n            var ctype = CSL.NAME_VARIABLES[i];\n            if (Item[ctype] && Item[ctype].multi) {\n                for (var j=0, jlen=Item[ctype].length; j<jlen; j+=1) {\n                    var creator = Item[ctype][j];\n                    if (creator.multi) {\n                        if (creator.multi._key) {\n                            for (var key in creator.multi._key) {\n                                if (key !== key.toLowerCase()) {\n                                    creator.multi._key[key.toLowerCase()] = creator.multi._key[key];\n                                    delete creator.multi._key[key];\n                                }\n                            }\n                        }\n                        if (creator.multi.main) {\n                            creator.multi.main = creator.multi.main.toLowerCase();\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    // Normalize language field into \"language\" and \"language-original\"\n    if (Item.language && Item.language.match(/[><]/)) {\n        // Attempt to split field in two\n        var m = Item.language.match(/(.*?)([<>])(.*)/);\n        if (m[2] === \"<\") {\n            Item[\"language-name\"] = m[1];\n            Item[\"language-name-original\"] = m[3];\n        } else {\n            Item[\"language-name\"] = m[3];\n            Item[\"language-name-original\"] = m[1];\n        }\n        if (this.opt.multi_layout) {\n            if (Item[\"language-name-original\"]) {\n                Item.language = Item[\"language-name-original\"];\n            }\n        } else {\n            if (Item[\"language-name\"]) {\n                Item.language = Item[\"language-name\"];\n            }\n        }\n    }\n\n    if (Item.page) {\n        Item[\"page-first\"] = Item.page;\n        var num = \"\" + Item.page;\n        var m = num.split(/\\s*(?:&|, |-|\\u2013)\\s*/);\n        if (m[0].slice(-1) !== \"\\\\\") {\n            Item[\"page-first\"] = m[0];\n        }\n    }\n    // Optional development extensions\n    if (this.opt.development_extensions.field_hack && Item.note) {\n        // false is for validFieldsForType (all conforming entries scrubbed when false)\n        CSL.parseNoteFieldHacks(Item, false, this.opt.development_extensions.allow_field_hack_date_override);\n    }\n    // not including locator-date\n    for (var key in Item) {\n        if (CSL.DATE_VARIABLES.indexOf(key.replace(/^alt-/, \"\")) > -1) {\n            var dateobj = Item[key];\n            if (dateobj) {\n                // raw date parsing is harmless, but can be disabled if desired\n                if (this.opt.development_extensions.raw_date_parsing) {\n                    if (dateobj.raw && (!dateobj[\"date-parts\"] || dateobj[\"date-parts\"].length === 0)) {\n                        dateobj = this.fun.dateparser.parseDateToObject(dateobj.raw);\n                    }\n                }\n                Item[key] = this.dateParseArray(dateobj);\n            }\n        }\n    }\n    if (this.opt.development_extensions.consolidate_legal_items) {\n        if (Item.type && [\"bill\",\"gazette\",\"legislation\",\"regulation\",\"treaty\"].indexOf(Item.type) > -1) {\n            var varname;\n            var elements = [\"type\", \"title\", \"jurisdiction\", \"genre\", \"volume\", \"container-title\"];\n            var legislation_id = [];\n            for (var i = 0, ilen = elements.length; i < ilen; i += 1) {\n                varname = elements[i];\n\t\t\t\tif (Item[varname]) {\n\t\t\t\t\tlegislation_id.push(Item[varname]);\n\t\t\t\t}\n\t\t\t}\n            elements = [\"original-date\", \"issued\"];\n\t\t\tfor (var i = 0, ilen=elements.length; i < ilen; i += 1) {\n                varname = elements[i];\n\t\t\t\tif (Item[varname] && Item[varname].year) {\n\t\t\t\t\tvar value = Item[varname].year;\n\t\t\t\t\tlegislation_id.push(value);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tItem.legislation_id = legislation_id.join(\"::\");\n        }\n    }\n    if (this.bibliography.opt.track_container_items) {\n        if (this.bibliography.opt.track_container_items.indexOf(Item.type) > -1) {\n            var varname;\n            var elements = [\"type\", \"container-title\", \"publisher\", \"edition\"];\n            var container_id = [];\n            for (var i = 0, ilen = elements.length; i < ilen; i += 1) {\n                varname = elements[i];\n\t\t\t\tif (Item[varname]) {\n\t\t\t\t\tcontainer_id.push(Item[varname]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tItem.container_id = container_id.join(\"::\");\n        }\n    }\n    // For authority to name shape in legal styles\n    if (this.opt.development_extensions.force_jurisdiction) {\n        if (\"string\" === typeof Item.authority) {\n            Item.authority = [\n                {\n                    literal: Item.authority,\n                    multi: {\n                        _key: {}\n                    }\n                }\n            ];\n            if (Item.multi && Item.multi._keys && Item.multi._keys.authority) {\n                Item.authority[0].multi._key = {};\n                for (var key in Item.multi._keys.authority) {\n                    Item.authority[0].multi._key[key] = {\n                        literal: Item.multi._keys.authority[key]\n                    };\n                }\n            }\n        }\n    }\n    // Add getAbbreviation() call for title-short and container-title-short\n    if (!Item[\"title-short\"]) {\n        Item[\"title-short\"] = Item.shortTitle;\n    }\n    // Add support for main_title_from_short_title\n    if (this.opt.development_extensions.main_title_from_short_title) {\n        var narrowSpaceLocale = this.opt[\"default-locale\"][0].slice(0, 2).toLowerCase() === \"fr\";\n        CSL.extractTitleAndSubtitle.call(this, Item, narrowSpaceLocale);\n    }\n    var isLegalType = [\"bill\",\"legal_case\",\"legislation\",\"gazette\",\"regulation\"].indexOf(Item.type) > -1;\n    if (this.opt.development_extensions.force_jurisdiction && isLegalType) {\n        if (!Item.jurisdiction) {\n            Item.jurisdiction = \"us\";\n        }\n    }\n    var normalizedKey;\n    if (!isLegalType && Item.title && this.sys.getAbbreviation) {\n        var noHints = false;\n        if (!Item.jurisdiction) {\n            noHints = true;\n        }\n        if (this.sys.normalizeAbbrevsKey) {\n             normalizedKey = this.sys.normalizeAbbrevsKey(\"title\", Item.title);\n        } else {\n            normalizedKey = Item.title;\n        }\n        var jurisdiction = this.transform.loadAbbreviation(Item.jurisdiction, \"title\", normalizedKey, Item.language);\n        if (this.transform.abbrevs[jurisdiction].title) {\n            if (this.transform.abbrevs[jurisdiction].title[normalizedKey]) {\n                Item[\"title-short\"] = this.transform.abbrevs[jurisdiction].title[normalizedKey];\n            }\n        }\n    }\n    if (!Item[\"container-title-short\"]) {\n        Item[\"container-title-short\"] = Item.journalAbbreviation;\n    }\n    if (Item[\"container-title\"] && this.sys.getAbbreviation) {\n        if (this.sys.normalizeAbbrevsKey) {\n            normalizedKey = this.sys.normalizeAbbrevsKey(Item[\"container-title\"]);\n        } else {\n            normalizedKey = Item[\"container-title\"];\n        }\n        var jurisdiction = this.transform.loadAbbreviation(Item.jurisdiction, \"container-title\", normalizedKey, Item.language);\n        if (this.transform.abbrevs[jurisdiction][\"container-title\"]) {\n            if (this.transform.abbrevs[jurisdiction][\"container-title\"][normalizedKey]) {\n                Item[\"container-title-short\"] = this.transform.abbrevs[jurisdiction][\"container-title\"][normalizedKey];\n            }\n        }\n    }\n    if (Item.jurisdiction) {\n        Item.country = Item.jurisdiction.split(\":\")[0];\n    }\n    if (this.registry.refhash[id]) {\n        if (JSON.stringify(this.registry.refhash[id]) != JSON.stringify(Item)) {\n            for (var key in this.registry.refhash[id]) {\n                delete this.registry.refhash[id][key];\n            }\n            this.tmp.taintedItemIDs[Item.id] = true;\n            Object.assign(this.registry.refhash[id], Item);\n        }\n    } else {\n        this.registry.refhash[id] = Item;\n    }\n    return this.registry.refhash[id];\n};\n\nCSL.Engine.prototype.refetchItem = function (id) {\n    return this.registry.refhash[id];\n};\n\n// Executed during style build\nCSL.Engine.prototype.setOpt = function (token, name, value) {\n    if (token.name === \"style\" || token.name === \"cslstyle\") {\n        this.opt.inheritedAttributes[name] = value;\n        this.citation.opt.inheritedAttributes[name] = value;\n        this.bibliography.opt.inheritedAttributes[name] = value;\n    } else if ([\"citation\", \"bibliography\"].indexOf(token.name) > -1) {\n        this[token.name].opt.inheritedAttributes[name] = value;\n    } else {\n        token.strings[name] = value;\n    }\n};\n\n// Executed at runtime, since macros can occur in the context of citation or bibliography\nCSL.Engine.prototype.inheritOpt = function (token, attrname, parentname, defaultValue) {\n    if (\"undefined\" !== typeof token.strings[attrname]) {\n        return token.strings[attrname];\n    } else {\n        var parentValue = this[this.tmp.root].opt.inheritedAttributes[parentname ? parentname : attrname];\n        if (\"undefined\" !== typeof parentValue) {\n            return parentValue;\n        } else {\n            return defaultValue;\n        }\n    }\n};\n\nCSL.Engine.prototype.remapSectionVariable = function (inputList) {\n    // We have items with a value in the section field (on Item) that must\n    // be mapped to the locator field (on item). We simply prepend it as\n    // a string here, and handle all parsing of the resulting string\n    // in processNumber(). Plurals and numeric are set in processNumber().\n    \n    // Because the target is in the citation item (lowercase), the\n    // remapping cannot take place when the Item data is received.\n    // Citation provides a list of Item/item pairs, hence the iteration\n    // used here.\n    for (var i = 0, ilen = inputList.length; i < ilen; i += 1) {\n        var Item = inputList[i][0];\n        var item = inputList[i][1];\n\n        if ([\"bill\",\"gazette\",\"legislation\",\"regulation\",\"treaty\"].indexOf(Item.type) > -1) {\n             // If a locator value exists, then\n            //   (a) Leave be an overriding label at the start of the locator field, defaulting to label value\n            if (item.locator) {\n                item.locator = item.locator.trim();\n                var m = item.locator.match(CSL.STATUTE_SUBDIV_PLAIN_REGEX_FRONT);\n                if (!m) {\n                    if (item.label) {\n                        item.locator = CSL.STATUTE_SUBDIV_STRINGS_REVERSE[item.label] + \" \" + item.locator;\n                    } else {\n                        item.locator = \"p. \" + item.locator;\n                    }\n                }\n            }\n            // If a section value exists, then\n            //   (a) Apply an overriding label at the start of the section field, defaulting to sec.\n            var sectionMasterLabel = null;\n            if (Item.section) {\n                Item.section = Item.section.trim();\n                var m = Item.section.match(CSL.STATUTE_SUBDIV_PLAIN_REGEX_FRONT);\n                if (!m) {\n                    Item.section = \"sec. \" + Item.section;\n                    sectionMasterLabel = \"sec.\";\n                } else {\n                    sectionMasterLabel = m[0].trim();\n                }\n            }\n            // If section is nil, then\n            //   (a) Do nothing\n            if (Item.section) {\n            // If section exists and locator is nil\n            //   (a) Set section string in locator field\n                if (!item.locator) {\n                    item.locator = Item.section;\n                } else {\n            // If both section and locator exist, then\n            //   (a) If locator starts with p., remove p., merge with space or no-space, and set in locator field\n            //   (b) If locator starts with non-p., prepend section value to locator with space, and set in locator field\n                    var m = item.locator.match(/^([^ ]*)\\s*(.*)/);\n                    var space = \" \";\n                    if (m) {\n                        if (m[1] === \"p.\" && sectionMasterLabel !== \"p.\") {\n                            item.locator = m[2];\n                        }\n                        if ([\"[\", \"(\", \".\", \",\", \";\", \":\", \"?\"].indexOf(item.locator.slice(0, 1)) > -1) {\n                            space = \"\";\n                        }\n                    } else {\n                       space = \"\"; \n                    }\n                    item.locator = Item.section + space + item.locator;\n                }\n                //Item.section = \"\";\n            }\n            item.label = \"\";\n            // And that's it. Pre-parse complete.\n        }\n    }\n};\n\n\nCSL.Engine.prototype.setNumberLabels = function (Item) {\n     if (Item.number\n        && [\"bill\", \"gazette\", \"legislation\",\"regulation\",\"treaty\"].indexOf(Item.type) > -1\n        && this.opt.development_extensions.consolidate_legal_items\n        && !this.tmp.shadow_numbers[\"number\"]) {\n\n        this.tmp.shadow_numbers[\"number\"] = {};\n        this.tmp.shadow_numbers[\"number\"].values = [];\n        this.tmp.shadow_numbers[\"number\"].plural = 0;\n        this.tmp.shadow_numbers[\"number\"].numeric = false;\n        this.tmp.shadow_numbers[\"number\"].label = false;\n        \n        // Labels embedded in number variable\n        var value = \"\" + Item.number;\n        value = value.split(\"\\\\\").join(\"\");\n        // Get first word, parse out labels only if it parses\n        var firstword = value.split(/\\s+/)[0];\n        var firstlabel = CSL.STATUTE_SUBDIV_STRINGS[firstword];\n        if (firstlabel) {\n            // Get list and match\n            var splt = value.split(CSL.STATUTE_SUBDIV_PLAIN_REGEX);\n            if (splt.length > 1) {\n                // Convert matches to localized form\n                var lst = [];\n                for (var j=1, jlen=splt.length; j < jlen; j += 1) {\n                    lst.push(splt[j].replace(/\\s*$/, \"\").replace(/^\\s*/, \"\"));\n                }\n                // Preemptively save to shadow_numbers\n                value = lst.join(\" \");\n            } else {\n                value = splt[0];\n            }\n            this.tmp.shadow_numbers[\"number\"].label = firstlabel;\n            this.tmp.shadow_numbers[\"number\"].values.push([\"Blob\", value, false]);\n            this.tmp.shadow_numbers[\"number\"].numeric = false;\n        } else {\n            this.tmp.shadow_numbers[\"number\"].values.push([\"Blob\", value, false]);\n            this.tmp.shadow_numbers[\"number\"].numeric = true;\n        }\n    }\n};\n\n/*global CSL: true */\n\nCSL.substituteOne = function (template) {\n    return function (state, list) {\n        if (!list) {\n            return \"\";\n        } else {\n            // (\"string\" === typeof list)\n            return template.replace(\"%%STRING%%\", list);\n        }\n    };\n};\n\n\n/**\n * Two-tiered substitutions gadget.\n * <p>This is used for\n * options like (now defunct) \"font-family\", where the option value\n * cannot be determined until the attribute is processed.\n * Need for this function might be reviewed at some point ...</p>\n * @param {String} template A template containing\n * <code>%%STRING%%</code> and <code>%%PARAM%%</code>\n * placeholders.  See {@link CSL.Output.Formats.html} for\n * examples.\n */\nCSL.substituteTwo = function (template) {\n    return function (param) {\n        var template2 = template.replace(\"%%PARAM%%\", param);\n        return function (state, list) {\n            if (!list) {\n                return \"\";\n            } else {\n                //(\"string\" === typeof list){\n                return template2.replace(\"%%STRING%%\", list);\n            }\n        };\n    };\n};\n\n/**\n * Generate string functions for designated output mode.\n * <p>Only \"html\" (the default) is supported at present.</p>\n * @param {String} mode Either \"html\" or \"rtf\", eventually.\n */\nCSL.Mode = function (mode) {\n    var decorations, params, param, func, val, args;\n    decorations = {};\n    params = CSL.Output.Formats[mode];\n    for (param in params) {\n        if (true) {\n\n            if (\"@\" !== param.slice(0, 1)) {\n                decorations[param] = params[param];\n                continue;\n            }\n            func = false;\n            val = params[param];\n            args = param.split('/');\n\n            if (typeof val === \"string\" && val.indexOf(\"%%STRING%%\") > -1)  {\n                if (val.indexOf(\"%%PARAM%%\") > -1) {\n                    func = CSL.substituteTwo(val);\n                } else {\n                    func = CSL.substituteOne(val);\n                }\n            } else if (typeof val === \"boolean\" && !val) {\n                func = CSL.Output.Formatters.passthrough;\n            } else if (typeof val === \"function\") {\n                func = val;\n            } else {\n                CSL.error(\"Bad \" + mode + \" config entry for \" + param + \": \" + val);\n            }\n\n            if (args.length === 1) {\n                decorations[args[0]] = func;\n            } else if (args.length === 2) {\n                if (!decorations[args[0]]) {\n                    decorations[args[0]] = {};\n                }\n                decorations[args[0]][args[1]] = func;\n            }\n        }\n    }\n    return decorations;\n};\n\n\n/**\n * Generate a separate list of formatting attributes.\n * <p>This generates a list of tuples containing attribute\n * information relevant to output formatting, in the order\n * fixed in the constant {@link CSL.FORMAT_KEY_SEQUENCE}.\n * This function is called during {@link CSL.Core.Build}.\n * Formatting hints are distilled to functions\n * later, in the second compilation pass ({@link CSL.Core.Configure}).</p>\n * @param {Object} state The state object returned by\n * {@link CSL.Engine}.\n * @param {Object} attributes The hash object containing\n * the attributes and values extracted from an XML node.\n */\nCSL.setDecorations = function (state, attributes) {\n    var ret, key, pos;\n    // This applies a fixed processing sequence\n    ret = [];\n    for (pos in CSL.FORMAT_KEY_SEQUENCE) {\n        if (true) {\n            var key = CSL.FORMAT_KEY_SEQUENCE[pos];\n            if (attributes[key]) {\n                ret.push([key, attributes[key]]);\n                delete attributes[key];\n            }\n        }\n    }\n    return ret;\n};\n\nCSL.Doppeler = function(rexStr, stringMangler) {\n    var matchRex = new RegExp(\"(\" + rexStr + \")\", \"g\");\n    var splitRex = new RegExp(rexStr, \"g\");\n    this.split = function (str) {\n        // Normalize markup\n        if (stringMangler) {\n            str = stringMangler(str);\n        }\n        var match = str.match(matchRex);\n        if (!match) {\n            return {\n                tags: [],\n                strings: [str]\n            };\n        }\n        var split = str.split(splitRex);\n        for (var i=match.length-1; i> -1; i--) {\n            if (typeof match[i] === \"number\") {\n                match[i] = \"\";\n            }\n            var tag = match[i];\n            if (tag === \"\\'\" && split[i+1].length > 0) {\n                // Fixes https://forums.zotero.org/discussion/comment/294317\n                split[i+1] = match[i] + split[i+1];\n                match[i] = \"\";\n            }\n        }\n        return {\n            tags: match,\n            strings: split,\n            origStrings: split.slice()\n        };\n    };\n    this.join = function (obj) {\n        var lst = obj.strings.slice(-1);\n        for (var i=obj.tags.length-1; i>-1; i--) {\n            lst.push(obj.tags[i]);\n            lst.push(obj.strings[i]);\n        }\n        lst.reverse();\n        return lst.join(\"\");\n    };\n};\n\nCSL.Engine.prototype.normalDecorIsOrphan = function (blob, params) {\n    //print(\"params: \"+JSON.stringify(params));\n    if (params[1] === \"normal\") {\n        var use_param = false;\n        var all_the_decor;\n        if (this.tmp.area === \"citation\") {\n            all_the_decor = [this.citation.opt.layout_decorations].concat(blob.alldecor);\n        } else {\n            all_the_decor = blob.alldecor;\n        }\n        for (var k = all_the_decor.length - 1; k > -1; k += -1) {\n            //print(\"  all decor: \"+JSON.stringify(all_the_decor[k]));\n            for (var n = all_the_decor[k].length - 1; n > -1; n += -1) {\n                //print(\"  superior param\"+n+\": \"+all_the_decor[k][n][0]);\n                if (all_the_decor[k][n][0] === params[0]) {\n                    //print(\"  HIT!\");\n                    if (all_the_decor[k][n][1] !== \"normal\") {\n                        use_param = true;\n                    }\n                }\n            }\n        }\n        if (!use_param) {\n            return true;\n        }\n    }\n    return false;\n};\n\n/*global CSL: true */\n\n\nCSL.Engine.prototype.getCitationLabel = function (Item) {\n    var label = \"\";\n    var params = this.getTrigraphParams();\n    var config = params[0];\n    var myname = this.getTerm(\"reference\", \"short\", 0);\n    if (\"undefined\" === typeof myname) {\n        myname = \"reference\";\n    }\n    myname = myname.replace(\".\", \"\");\n    myname = myname.slice(0, 1).toUpperCase() + myname.slice(1);\n    for (var i = 0, ilen = CSL.NAME_VARIABLES.length; i < ilen; i += 1) {\n        var n = CSL.NAME_VARIABLES[i];\n        if (Item[n]) {\n            var names = Item[n];\n            if (names.length > params.length) {\n                config = params[params.length - 1];\n            } else {\n                config = params[names.length - 1];\n            }\n            for (var j = 0, jlen = names.length; j < jlen; j += 1) {\n                if (j === config.authors.length) {\n                    break;\n                }\n                var res = this.nameOutput.getName(names[j], \"locale-translit\", true);\n                var name = res.name;\n                if (name && name.family) {\n                    myname = name.family;\n                    myname = myname.replace(/^([ \\'\\u2019a-z]+\\s+)/, \"\");\n\n                } else if (name && name.literal) {\n                    myname = name.literal;\n                }\n                var m = myname.toLowerCase().match(/^(a\\s+|the\\s+|an\\s+)/);\n                if (m) {\n                    myname = myname.slice(m[1].length);\n                }\n                myname = myname.replace(CSL.ROMANESQUE_NOT_REGEXP, \"\");\n                if (!myname) {\n                    break;\n                }\n                myname = myname.slice(0, config.authors[j]);\n                if (myname.length > 1) {\n                    myname = myname.slice(0, 1).toUpperCase() + myname.slice(1).toLowerCase();\n                } else if (myname.length === 1) {\n                    myname = myname.toUpperCase();\n                }\n                label += myname;\n            }\n            break;\n        }\n    }\n    if (!label) {\n        // Try for something using title\n        if (Item.title) {\n            var skipWords = this.locale[this.opt.lang].opts[\"skip-words\"];\n            var lst = Item.title.split(/\\s+/);\n            for (var i = lst.length - 1; i > -1; i--) {\n                if (skipWords.indexOf(lst[i]) > -1) {\n                    lst = lst.slice(0, i).concat(lst.slice(i + 1));\n                }\n            }\n            var str = lst.join('');\n            str = str.slice(0, params[0].authors[0]);\n            if (str.length > 1) {\n                str = str.slice(0, 1).toUpperCase() + str.slice(1).toLowerCase();\n            } else if (str.length === 1) {\n                str = str.toUpperCase();\n            }\n            label = str;\n        }\n    }\n    var year = \"0000\";\n    if (Item.issued) {\n        if (Item.issued.year) {\n            year = \"\" + Item.issued.year;\n        }\n    }\n    year = year.slice((config.year * -1));\n    label = label + year;\n    return label;\n};\n\nCSL.Engine.prototype.getTrigraphParams = function () {\n    var params = [];\n    var ilst = this.opt.trigraph.split(\":\");\n    if (!this.opt.trigraph || this.opt.trigraph.slice(0,1) !== \"A\") {\n        CSL.error(\"Bad trigraph definition: \"+this.opt.trigraph);\n    }\n    for (var i = 0, ilen = ilst.length; i < ilen; i += 1) {\n        var str = ilst[i];\n        var config = {authors:[], year:0};\n        for (var j = 0, jlen = str.length; j < jlen; j += 1) {\n            switch (str.slice(j,j+1)) {\n            case \"A\":\n                config.authors.push(1);\n                break;\n            case \"a\":\n                config.authors[config.authors.length - 1] += 1;\n                break;\n            case \"0\":\n                config.year += 1;\n                break;\n            default:\n                CSL.error(\"Invalid character in trigraph definition: \"+this.opt.trigraph);\n            }\n        }\n        params.push(config);\n    }\n    return params;\n};\n\n/*global CSL: true */\n\nCSL.Engine.prototype.setOutputFormat = function (mode) {\n    this.opt.mode = mode;\n    this.fun.decorate = CSL.Mode(mode);\n    if (!this.output[mode]) {\n        this.output[mode] = {};\n        this.output[mode].tmp = {};\n    }\n};\n\nCSL.Engine.prototype.getSortFunc = function () {\n    return function (a,b) {\n        a = a.split(\"-\");\n        b = b.split(\"-\");\n        if (a.length < b.length) {\n            return 1;\n        } else if (a.length > b.length) {\n            return -1;\n        } else {\n            a = a.slice(-1)[0];\n            b = b.slice(-1)[0];\n            if (a.length < b.length) {\n                return 1;\n            } else if (a.length > b.length) {\n                return -1;\n            } else {\n                return 0;\n            }\n        }\n    };\n};\n\nCSL.Engine.prototype.setLangTagsForCslSort = function (tags) {\n    var i, ilen;\n    if (tags) {\n        this.opt['locale-sort'] = [];\n        for (i = 0, ilen = tags.length; i < ilen; i += 1) {\n            this.opt['locale-sort'].push(tags[i]);\n        }\n    }\n    this.opt['locale-sort'].sort(this.getSortFunc());\n};\n    \nCSL.Engine.prototype.setLangTagsForCslTransliteration = function (tags) {\n    var i, ilen;\n    this.opt['locale-translit'] = [];\n    if (tags) {\n        for (i = 0, ilen = tags.length; i < ilen; i += 1) {\n            this.opt['locale-translit'].push(tags[i]);\n        }\n    }\n    this.opt['locale-translit'].sort(this.getSortFunc());\n};\n    \nCSL.Engine.prototype.setLangTagsForCslTranslation = function (tags) {\n    var i, ilen;\n    this.opt['locale-translat'] = [];\n    if (tags) {\n        for (i = 0, ilen = tags.length; i < ilen; i += 1) {\n            this.opt['locale-translat'].push(tags[i]);\n        }\n    }\n    this.opt['locale-translat'].sort(this.getSortFunc());\n};\n\nCSL.Engine.prototype.setLangPrefsForCites = function (obj, conv) {\n    var opt = this.opt['cite-lang-prefs'];\n    if (!conv) {\n        conv = function (key) {\n            return key.toLowerCase();\n        };\n    }\n    var segments = ['Persons', 'Institutions', 'Titles', 'Journals', 'Publishers', 'Places'];\n    // Set values in place\n    for (var i = 0, ilen = segments.length; i < ilen; i += 1) {\n        var clientSegment = conv(segments[i]);\n        var citeprocSegment = segments[i].toLowerCase();\n        if (!obj[clientSegment]) {\n            continue;\n        }\n        //\n        // Normalize the sequence of secondary and tertiary\n        // in the provided obj segment list.\n        //\n        var supplements = [];\n        while (obj[clientSegment].length > 1) {\n            supplements.push(obj[clientSegment].pop());\n        }\n        var sortval = {orig:1,translit:2,translat:3};\n        if (supplements.length === 2 && sortval[supplements[0]] < sortval[supplements[1]]) {\n            supplements.reverse();\n        }\n        while (supplements.length) {\n            obj[clientSegment].push(supplements.pop());\n        }\n        //\n        // normalization done.\n        //\n        var lst = opt[citeprocSegment];\n        while (lst.length) {\n            lst.pop();\n        }\n        for (var j = 0, jlen = obj[clientSegment].length; j < jlen; j += 1) {\n            lst.push(obj[clientSegment][j]);\n        }\n    }\n};\n\nCSL.Engine.prototype.setLangPrefsForCiteAffixes = function (affixList) {\n    if (affixList && affixList.length === 48) {\n        var affixes = this.opt.citeAffixes;\n        var count = 0;\n        var settings = [\"persons\", \"institutions\", \"titles\", \"journals\", \"publishers\", \"places\"];\n        var forms = [\"translit\", \"orig\", \"translit\", \"translat\"];\n        var value;\n        for (var i = 0, ilen = settings.length; i < ilen; i += 1) {\n            for (var j = 0, jlen = forms.length; j < jlen; j += 1) {\n                value = \"\";\n                if ((count % 8) === 4) {\n                    if (!affixes[settings[i]][\"locale-\"+forms[j]].prefix\n                        && !affixes[settings[i]][\"locale-\"+forms[j]].suffix) {\n\n                        value = affixList[count] ? affixList[count] : \"\";\n                        affixes[settings[i]][\"locale-\" + forms[j]].prefix = value;\n                        value = affixList[count] ? affixList[count + 1] : \"\";\n                        affixes[settings[i]][\"locale-\" + forms[j]].suffix = value;\n                    }\n                } else {\n                    value = affixList[count] ? affixList[count] : \"\";\n                    affixes[settings[i]][\"locale-\" + forms[j]].prefix = value;\n                    value = affixList[count] ? affixList[count + 1] : \"\";\n                    affixes[settings[i]][\"locale-\" + forms[j]].suffix = value;\n                }\n                count += 2;\n            }\n        }\n        this.opt.citeAffixes = affixes;\n    }\n};\n\nCSL.Engine.prototype.setAutoVietnameseNamesOption = function (arg) {\n    if (arg) {\n        this.opt[\"auto-vietnamese-names\"] = true;\n    } else {\n        this.opt[\"auto-vietnamese-names\"] = false;\n    }\n};\n\nCSL.Engine.prototype.setAbbreviations = function (arg) {\n    if (this.sys.setAbbreviations) {\n        this.sys.setAbbreviations(arg);\n    }\n};\n\nCSL.Engine.prototype.setSuppressTrailingPunctuation = function (arg) {\n    this.citation.opt.suppressTrailingPunctuation = !!arg;\n};\n\n/*global CSL: true */\n\nCSL.Output = {};\n/**\n * Output queue object.\n * @class\n */\nCSL.Output.Queue = function (state) {\n    this.levelname = [\"top\"];\n    this.state = state;\n    this.queue = [];\n    this.empty = new CSL.Token(\"empty\");\n    var tokenstore = {};\n    tokenstore.empty = this.empty;\n    this.formats = new CSL.Stack(tokenstore);\n    this.current = new CSL.Stack(this.queue);\n};\n\n// XXX This works, but causes a mismatch in api_cite\n// Could insert a placeholder\n// Better to have a function that spits out an independent blob.\n// Is that possible though?\n// Okay. Use queue.append() with fake_queue instead.\nCSL.Output.Queue.prototype.pop = function () {\n    // For some reason, state.output.current.value() here can be an array, \n    // not a blob ... ?\n    var drip = this.current.value();\n    if (drip.length) {\n        return drip.pop();\n    } else {\n        return drip.blobs.pop();\n    }\n};\n\nCSL.Output.Queue.prototype.getToken = function (name) {\n    var ret = this.formats.value()[name];\n    return ret;\n};\n\nCSL.Output.Queue.prototype.mergeTokenStrings = function (base, modifier) {\n    var base_token, modifier_token, ret, key;\n    base_token = this.formats.value()[base];\n    modifier_token = this.formats.value()[modifier];\n    ret = base_token;\n    if (modifier_token) {\n        if (!base_token) {\n            base_token = new CSL.Token(base, CSL.SINGLETON);\n            base_token.decorations = [];\n        }\n        ret = new CSL.Token(base, CSL.SINGLETON);\n        var key = \"\";\n        for (var key in base_token.strings) {\n            if (base_token.strings.hasOwnProperty(key)) {\n                ret.strings[key] = base_token.strings[key];\n            }\n        }\n        for (var key in modifier_token.strings) {\n            if (modifier_token.strings.hasOwnProperty(key)) {\n                ret.strings[key] = modifier_token.strings[key];\n            }\n        }\n        ret.decorations = base_token.decorations.concat(modifier_token.decorations);\n    }\n    return ret;\n};\n\n// Store a new output format token based on another\nCSL.Output.Queue.prototype.addToken = function (name, modifier, token) {\n    var newtok, attr;\n    newtok = new CSL.Token(\"output\");\n    if (\"string\" === typeof token) {\n        token = this.formats.value()[token];\n    }\n    if (token && token.strings) {\n        for (attr in token.strings) {\n            if (token.strings.hasOwnProperty(attr)) {\n                newtok.strings[attr] = token.strings[attr];\n            }\n        }\n        newtok.decorations = token.decorations;\n\n    }\n    if (\"string\" === typeof modifier) {\n        newtok.strings.delimiter = modifier;\n    }\n    this.formats.value()[name] = newtok;\n};\n\n//\n// newFormat adds a new bundle of formatting tokens to\n// the queue's internal stack of such bundles\nCSL.Output.Queue.prototype.pushFormats = function (tokenstore) {\n    if (!tokenstore) {\n        tokenstore = {};\n    }\n    tokenstore.empty = this.empty;\n    this.formats.push(tokenstore);\n};\n\n\nCSL.Output.Queue.prototype.popFormats = function () {\n    this.formats.pop();\n};\n\nCSL.Output.Queue.prototype.startTag = function (name, token) {\n    var tokenstore = {};\n    if (this.state.tmp[\"doing-macro-with-date\"] && this.state.tmp.extension) {\n        token = this.empty;\n        name = \"empty\";\n    }\n    tokenstore[name] = token;\n    this.pushFormats(tokenstore);\n    this.openLevel(name);\n};\n\nCSL.Output.Queue.prototype.endTag = function (name) {\n    this.closeLevel(name);\n    this.popFormats();\n};\n\n//\n// newlevel adds a new blob object to the end of the current\n// list, and adjusts the current pointer so that subsequent\n// appends are made to blob list of the new object.\n\nCSL.Output.Queue.prototype.openLevel = function (token) {\n    var blob, curr;\n    if (\"object\" === typeof token) {\n        // delimiter, prefix, suffix, decorations from token\n        blob = new CSL.Blob(undefined, token);\n    } else if (\"undefined\" === typeof token) {\n        blob = new CSL.Blob(undefined, this.formats.value().empty, \"empty\");\n    } else {\n        if (!this.formats.value() || !this.formats.value()[token]) {\n            CSL.error(\"CSL processor error: call to nonexistent format token \\\"\" + token + \"\\\"\");\n        }\n        // delimiter, prefix, suffix, decorations from token\n        blob = new CSL.Blob(undefined, this.formats.value()[token], token);\n    }\n    curr = this.current.value();\n    if (!this.state.tmp.just_looking && this.checkNestedBrace) {\n        blob.strings.prefix = this.checkNestedBrace.update(blob.strings.prefix);\n    }\n    curr.push(blob);\n    this.current.push(blob);\n};\n\n/**\n * \"merge\" used to be real complicated, now it's real simple.\n */\nCSL.Output.Queue.prototype.closeLevel = function (name) {\n    // CLEANUP: Okay, so this.current.value() holds the blob at the\n    // end of the current list.  This is wrong.  It should\n    // be the parent, so that we have  the choice of reading\n    // the affixes and decorations, or appending to its\n    // content.  The code that manipulates blobs will be\n    // much simpler that way.\n    if (name && name !== this.current.value().levelname) {\n        CSL.error(\"Level mismatch error:  wanted \" + name + \" but found \" + this.current.value().levelname);\n    }\n    var blob = this.current.pop();\n    if (!this.state.tmp.just_looking && this.checkNestedBrace) {\n        blob.strings.suffix = this.checkNestedBrace.update(blob.strings.suffix);\n    }\n};\n\n//\n// append does the same thing as newlevel, except\n// that the blob it pushes has text content,\n// and the current pointer is not moved after the push.\n\nCSL.Output.Queue.prototype.append = function (str, tokname, notSerious, ignorePredecessor, noStripPeriods) {\n    var token, blob, curr;\n    var useblob = true;\n    if (notSerious) {\n        ignorePredecessor = true;\n    }\n    // XXXXX Nasty workaround, but still an improvement\n    // over the reverse calls to the cs:date node build\n    // function that we had before.\n    if (this.state.tmp[\"doing-macro-with-date\"] && !notSerious) {\n        if (tokname !== \"macro-with-date\") {\n            return false;\n        }\n        if (tokname === \"macro-with-date\") {\n            tokname = \"empty\";\n        }\n    }\n    if (\"undefined\" === typeof str) {\n        return false;\n    }\n    if (\"number\" === typeof str) {\n        str = \"\" + str;\n    }\n    if (!notSerious \n        && this.state.tmp.element_trace \n        && this.state.tmp.element_trace.value() === \"suppress-me\") {\n        \n        return false;\n    }\n    blob = false;\n    if (!tokname) {\n        token = this.formats.value().empty;\n    } else if (tokname === \"literal\") {\n        token = true;\n        useblob = false;\n    } else if (\"string\" === typeof tokname) {\n        token = this.formats.value()[tokname];\n    } else {\n        token = tokname;\n    }\n    if (!token) {\n        CSL.error(\"CSL processor error: unknown format token name: \" + tokname);\n    }\n    // Unset delimiters must be left undefined until they reach the queue\n    // in order to discriminate unset from explicitly empty delimiters\n    // when inheriting a default value from a superior node. [??? really ???]\n    if (token.strings && \"undefined\" === typeof token.strings.delimiter) {\n        token.strings.delimiter = \"\";\n    }\n    if (\"string\" === typeof str && str.length) {\n\n        // Source (;?!»«): http://en.wikipedia.org/wiki/Space_(punctuation)#Breaking_and_non-breaking_spaces\n        // Source (:): http://forums.zotero.org/discussion/4933/localized-quotes/#Comment_88384\n        str = str.replace(/ ([:;?!\\u00bb])/g, \"\\u202f$1\").replace(/\\u00ab /g, \"\\u00ab\\u202f\");\n\n        this.last_char_rendered = str.slice(-1);\n        // This, and not the str argument below on flipflop, is the\n        // source of the flipflopper string source.\n        str = str.replace(/\\s+'/g, \" \\'\");\n        if (!notSerious) {\n            // this condition for sort_LeadingApostropheOnNameParticle\n            str = str.replace(/^'/g, \" \\'\");\n        }\n\n        // signal whether we end with terminal punctuation?\n        if (!ignorePredecessor) {\n            this.state.tmp.term_predecessor = true;\n            this.state.tmp.in_cite_predecessor = true;\n        } else if (notSerious) {\n            this.state.tmp.term_predecessor_name = true;\n        }\n    }\n    blob = new CSL.Blob(str, token);\n    curr = this.current.value();\n    if (\"undefined\" === typeof curr && this.current.mystack.length === 0) {\n        // XXXX An operation like this is missing somewhere, this should NOT be necessary.\n        // Addresses error triggered in multi-layouts.\n        this.current.mystack.push([]);\n        curr = this.current.value();\n    }\n    if (\"string\" === typeof blob.blobs) {\n        if (!ignorePredecessor) {\n            this.state.tmp.term_predecessor = true;\n            this.state.tmp.in_cite_predecessor = true;\n        } else if (notSerious) {\n            this.state.tmp.term_predecessor_name = true;\n        }\n    }\n    //\n    // Caution: The parallel detection machinery will blow up if tracking\n    // variables are not properly initialized elsewhere.\n    //\n    if (\"string\" === typeof str) {\n        if (\"string\" === typeof blob.blobs) {\n            if (blob.blobs.slice(0, 1) !== \" \") {\n                var blobPrefix = \"\";\n                var blobBlobs = blob.blobs;\n                while (CSL.TERMINAL_PUNCTUATION.indexOf(blobBlobs.slice(0, 1)) > -1) {\n                    blobPrefix = blobPrefix + blobBlobs.slice(0, 1);\n                    blobBlobs = blobBlobs.slice(1);\n                }\n                if (blobBlobs && blobPrefix) {\n                    blob.strings.prefix = blob.strings.prefix + blobPrefix;\n                    blob.blobs = blobBlobs;\n                }\n            }\n        }\n        if (blob.strings[\"text-case\"]) {\n            //\n            // This one is _particularly_ hard to follow.  It's not obvious,\n            // but the blob already contains the input string at this\n            // point, as blob.blobs -- it's a terminal node, as it were.\n            // The str variable also contains the input string, but\n            // that copy is not used for onward processing.  We have to\n            // apply our changes to the blob copy.\n            //\n            blob.blobs = CSL.Output.Formatters[blob.strings[\"text-case\"]](this.state, str);\n        }\n        if (this.state.tmp.strip_periods && !noStripPeriods) {\n            blob.blobs = blob.blobs.replace(/\\.([^a-z]|$)/g, \"$1\");\n        }\n        for (var i = blob.decorations.length - 1; i > -1; i += -1) {\n            if (blob.decorations[i][0] === \"@quotes\" && blob.decorations[i][1] !== \"false\") {\n                blob.punctuation_in_quote = this.state.getOpt(\"punctuation-in-quote\");\n            }\n            if (!blob.blobs.match(CSL.ROMANESQUE_REGEXP)) {\n                if (blob.decorations[i][0] === \"@font-style\") {\n                    blob.decorations = blob.decorations.slice(0, i).concat(blob.decorations.slice(i + 1));\n                }\n            }\n        }\n        //\n        // XXX: Beware superfluous code in your code.  str in this\n        // case is not the source of the final rendered string.\n        // See note above.\n        //\n        curr.push(blob);\n        this.state.fun.flipflopper.processTags(blob);\n    } else if (useblob) {\n        curr.push(blob);\n    } else {\n        curr.push(str);\n    }\n    return true;\n};\n\nCSL.Output.Queue.prototype.string = function (state, myblobs, blob) {\n    var i, ilen, j, jlen, b;\n    //if (blob && blob.strings.delimiter) {\n    //    print(\"DELIMITER: \"+blob.strings.delimiter+\" on \"+[x.blobs[0].num for each (x in myblobs)]);\n    //}\n    //var blobs, ret, blob_delimiter, i, params, blobjr, last_str, last_char, b, use_suffix, qres, addtoret, span_split, j, res, blobs_start, blobs_end, key, pos, len, ppos, llen, ttype, ltype, terminal, leading, delimiters, use_prefix, txt_esc;\n    var txt_esc = CSL.getSafeEscape(this.state);\n    var blobs = myblobs.slice();\n    var ret = [];\n    \n    if (blobs.length === 0) {\n        return ret;\n    }\n\n    var blob_delimiter = \"\";\n    if (blob) {\n        blob_delimiter = blob.strings.delimiter;\n    } else {\n        //print(\"=== Setting false to start ===\");\n        state.tmp.count_offset_characters = false;\n        state.tmp.offset_characters = 0;\n    }\n\n    if (blob && blob.new_locale) {\n        blob.old_locale = state.opt.lang;\n        state.opt.lang = blob.new_locale;\n    }\n\n    var blobjr, use_suffix, use_prefix, params;\n    for (var i = 0, ilen = blobs.length; i < ilen; i += 1) {\n        blobjr = blobs[i];\n\n        if (blobjr.strings.first_blob) {\n            // Being the Item.id of the the entry being rendered.\n            //print(\"  -- turning on counting\");\n            state.tmp.count_offset_characters = blobjr.strings.first_blob;\n        }\n\n        if (\"string\" === typeof blobjr.blobs) {\n            if (\"number\" === typeof blobjr.num) {\n                ret.push(blobjr);\n            } else if (blobjr.blobs) {\n                if (blobjr.particle) {\n                    blobjr.blobs = blobjr.particle + blobjr.blobs;\n                    blobjr.particle = \"\";\n                }\n                // (skips empty strings)\n                //b = txt_esc(blobjr.blobs);\n                b = txt_esc(blobjr.blobs);\n                var blen = b.length;\n\n                if (!state.tmp.suppress_decorations) {\n                    for (j = 0, jlen = blobjr.decorations.length; j < jlen; j += 1) {\n                        params = blobjr.decorations[j];\n                        if (params[0] === \"@showid\") {\n                            continue;\n                        }\n                        if (state.normalDecorIsOrphan(blobjr, params)) {\n                            continue;\n                        }\n                        b = state.fun.decorate[params[0]][params[1]].call(blobjr, state, b, params[2]);\n                    }\n                }\n                //\n                // because we will rip out portions of the output\n                // queue before rendering, group wrappers need\n                // to produce no output if they are found to be\n                // empty.\n                if (b && b.length) {\n                    b = txt_esc(blobjr.strings.prefix) + b + txt_esc(blobjr.strings.suffix);\n                    if (state.opt.development_extensions.csl_reverse_lookup_support && !state.tmp.suppress_decorations) {\n                        for (j = 0, jlen = blobjr.decorations.length; j < jlen; j += 1) {\n                            params = blobjr.decorations[j];\n\n                            if (params[0] === \"@showid\") {\n                                b = state.fun.decorate[params[0]][params[1]].call(blobjr, state, b, params[2]);\n                            }\n                        }\n                    }\n                    ret.push(b);\n                    if (state.tmp.count_offset_characters) {\n                        state.tmp.offset_characters += (blen + blobjr.strings.suffix.length + blobjr.strings.prefix.length);\n                    }\n                }\n            }\n        } else if (blobjr.blobs.length) {\n            var addtoret = state.output.string(state, blobjr.blobs, blobjr);\n            if (blob) {\n                // Patch up world-class weird bug in the ill-constructed code of mine.\n                if (\"string\" !== addtoret && addtoret.length > 1 && blobjr.strings.delimiter) {\n                    var numberSeen = false;\n                    for (var j=0,jlen=addtoret.length;j<jlen;j++) {\n                        if (\"string\" !== typeof addtoret[j]) {\n                            numberSeen = true;\n                        } else if (numberSeen) {\n                            addtoret[j] = (blobjr.strings.delimiter + addtoret[j]);\n                        }\n                    }\n                }\n            }\n            ret = ret.concat(addtoret);\n        }\n        if (blobjr.strings.first_blob && state.registry.registry[blobjr.strings.first_blob]) {\n            // The Item.id of the entry being rendered.\n            state.registry.registry[blobjr.strings.first_blob].offset = state.tmp.offset_characters;\n            state.tmp.count_offset_characters = false;\n        }\n    }\n\n    // Provide delimiters on adjacent numeric blobs\n    for (i=0,ilen=ret.length - 1;i<ilen;i+=1) {\n        if (\"number\" === typeof ret[i].num && \"number\" === typeof ret[i+1].num && !ret[i+1].UGLY_DELIMITER_SUPPRESS_HACK) {\n            // XXX watch this\n            ret[i].strings.suffix = ret[i].strings.suffix + (blob_delimiter ? blob_delimiter : \"\");\n            ret[i+1].successor_prefix = \"\";\n            ret[i+1].UGLY_DELIMITER_SUPPRESS_HACK = true;\n        }\n    }\n\n    var span_split = 0;\n    for (var i = 0, ilen = ret.length; i < ilen; i += 1) {\n        if (\"string\" === typeof ret[i]) {\n            span_split = (parseInt(i, 10) + 1);\n            if (i < ret.length - 1  && \"object\" === typeof ret[i + 1]) {\n                if (blob_delimiter && !ret[i + 1].UGLY_DELIMITER_SUPPRESS_HACK) {\n                    ret[i] += txt_esc(blob_delimiter);\n                }\n                // One bite of the apple\n                ret[i + 1].UGLY_DELIMITER_SUPPRESS_HACK = true;\n            }\n            //span_split = ret.length;\n            //print(\"XXX ret: \"+ret+\" -- \"+blob_delimiter);\n        }\n    }\n/*\n    if (blob && (blob.decorations.length || blob.strings.suffix || blob.strings.prefix)) {\n        span_split = ret.length;\n    }\n*/\n    if (blob && (blob.decorations.length || blob.strings.suffix)) {\n        span_split = ret.length;\n    } else if (blob && blob.strings.prefix) {\n        for (var i=0,ilen=ret.length;i<ilen;i++) {\n            if (\"undefined\" !== typeof ret[i].num) {\n                span_split = i;\n                if (i === 0) {\n                    ret[i].strings.prefix = blob.strings.prefix + ret[i].strings.prefix;\n                }\n                break;\n            }\n        }\n    }\n\n    var blobs_start = state.output.renderBlobs(ret.slice(0, span_split), blob_delimiter, false, blob);\n    if (blobs_start && blob && (blob.decorations.length || blob.strings.suffix || blob.strings.prefix)) {\n        if (!state.tmp.suppress_decorations) {\n            for (var i = 0, ilen = blob.decorations.length; i < ilen; i += 1) {\n                params = blob.decorations[i];\n                if ([\"@cite\",\"@bibliography\", \"@display\", \"@showid\"].indexOf(params[0]) > -1) {\n                    continue;\n                }\n                if (state.normalDecorIsOrphan(blobjr, params)) {\n                    continue;\n                }\n                if (!params[0]) continue;\n                if (\"string\" === typeof blobs_start) {\n                    blobs_start = state.fun.decorate[params[0]][params[1]].call(blob, state, blobs_start, params[2]);\n                }\n            }\n        }\n        //\n        // XXXX: cut-and-paste warning.  same as a code block above.\n        //\n        b = blobs_start;\n        use_suffix = blob.strings.suffix;\n        if (b && b.length) {\n            use_prefix = blob.strings.prefix;\n            b = txt_esc(use_prefix) + b + txt_esc(use_suffix);\n            if (state.tmp.count_offset_characters) {\n                state.tmp.offset_characters += (use_prefix.length + use_suffix.length);\n            }\n        }\n        blobs_start = b;\n        if (!state.tmp.suppress_decorations) {\n            for (var i = 0, ilen = blob.decorations.length; i < ilen; i += 1) {\n                params = blob.decorations[i];\n                if ([\"@cite\",\"@bibliography\", \"@display\", \"@showid\"].indexOf(params[0]) === -1) {\n                    continue;\n                }\n                if (\"string\" === typeof blobs_start) {\n                    blobs_start = state.fun.decorate[params[0]][params[1]].call(blob, state, blobs_start, params[2]);\n                }\n            }\n        }\n    }\n\n    var blobs_end = ret.slice(span_split, ret.length);\n    if (!blobs_end.length && blobs_start) {\n        ret = [blobs_start];\n    } else if (blobs_end.length && !blobs_start) {\n        ret = blobs_end;\n    } else if (blobs_start && blobs_end.length) {\n        ret = [blobs_start].concat(blobs_end);\n    }\n    //\n    // Blobs is now definitely a string with\n    // trailing blobs.  Return it.\n    if (\"undefined\" === typeof blob) {\n        this.queue = [];\n        this.current.mystack = [];\n        this.current.mystack.push(this.queue);\n        if (state.tmp.suppress_decorations) {\n            ret = state.output.renderBlobs(ret, undefined, false);\n        }\n    } else if (\"boolean\" === typeof blob) {\n        ret = state.output.renderBlobs(ret, undefined, true);\n    }\n\n    if (blob && blob.new_locale) {\n        state.opt.lang = blob.old_locale;\n    }\n    //if (!blob && !state.tmp.just_looking) {\n    //  print(\"QUEUE (\"+ state.tmp.just_looking +\"): \"+JSON.stringify(state.output.queue, [\"num\", \"strings\", \"decorations\", \"blobs\", \"prefix\", \"suffix\", \"delimiter\"], 2));\n    //}\n    return ret;\n};\n\nCSL.Output.Queue.prototype.clearlevel = function () {\n    var blob, pos, len;\n    blob = this.current.value();\n    len = blob.blobs.length;\n    for (pos = 0; pos < len; pos += 1) {\n        blob.blobs.pop();\n    }\n};\n\nCSL.Output.Queue.prototype.renderBlobs = function (blobs, delim, in_cite, parent) {\n    var state, ret, ret_last_char, use_delim, blob, pos, len, ppos, llen, str, params, txt_esc;\n    txt_esc = CSL.getSafeEscape(this.state);\n    if (!delim) {\n        delim = \"\";\n    }\n    state = this.state;\n    ret = \"\";\n    ret_last_char = [];\n    use_delim = \"\";\n    len = blobs.length;\n    if (this.state.tmp.area === \"citation\" && !this.state.tmp.just_looking && len === 1 && typeof blobs[0] === \"object\" && parent) {\n        blobs[0].strings.prefix = parent.strings.prefix + blobs[0].strings.prefix;\n        blobs[0].strings.suffix = blobs[0].strings.suffix + parent.strings.suffix;\n        blobs[0].decorations = blobs[0].decorations.concat(parent.decorations);\n        blobs[0].params = parent.params;\n        return blobs[0];\n    }\n    var start = true;\n    for (pos = 0; pos < len; pos += 1) {\n        if (blobs[pos].checkNext) {\n            blobs[pos].checkNext(blobs[pos + 1],start);\n            start = false;\n        } else if (blobs[pos+1] && blobs[pos+1].splice_prefix) {\n            start = false;\n            //blobs[pos+1].checkNext(blobs[pos + 1],start);\n        } else {\n            start = true;\n        }\n    }\n    \n    // print(\"LEN=\"+len+\" \"+JSON.stringify(blobs, null, 2));\n    // Fix last non-range join\n    var doit = true;\n    for (pos = blobs.length - 1; pos > 0; pos += -1) {\n        if (blobs[pos].checkLast) {\n            if (doit && blobs[pos].checkLast(blobs[pos - 1])) {\n                doit = false;\n            }\n        } else {\n            doit = true;\n        }\n    }\n    len = blobs.length;\n    for (pos = 0; pos < len; pos += 1) {\n        blob = blobs[pos];\n        if (ret) {\n            use_delim = delim;\n        }\n        if (\"string\" === typeof blob) {\n            ret += txt_esc(use_delim);\n            // XXX Blob should be run through flipflop and flattened here.\n            // (I think it must be a fragment of text around a numeric\n            // variable)\n            ret += blob;\n            if (state.tmp.count_offset_characters) {\n                //state.tmp.offset_characters += (use_delim.length + blob.length);\n                state.tmp.offset_characters += (use_delim.length);\n            }\n        } else if (in_cite) {\n            // pass\n            // Okay, so this does it -- but we're now not able to return a string!\n            if (ret) {\n                ret = [ret, blob];\n            } else {\n                ret = [blob];\n            }\n        } else if (blob.status !== CSL.SUPPRESS) {\n            if (blob.particle) {\n                str = blob.particle + blob.num;\n            } else {\n                str = blob.formatter.format(blob.num, blob.gender);\n            }\n            // Workaround to get a more or less accurate value.\n            var strlen = str.replace(/<[^>]*>/g, \"\").length;\n            // notSerious\n            this.append(str, \"empty\", true);\n            var str_blob = this.pop();\n            var count_offset_characters = state.tmp.count_offset_characters;\n            str = this.string(state, [str_blob], false);\n            state.tmp.count_offset_characters = count_offset_characters;\n            if (blob.strings[\"text-case\"]) {\n                str = CSL.Output.Formatters[blob.strings[\"text-case\"]](this.state, str);\n            }\n            if (str && this.state.tmp.strip_periods) {\n                str = str.replace(/\\.([^a-z]|$)/g, \"$1\");\n            }\n            if (!state.tmp.suppress_decorations) {\n                llen = blob.decorations.length;\n                for (ppos = 0; ppos < llen; ppos += 1) {\n                    params = blob.decorations[ppos];\n                    if (state.normalDecorIsOrphan(blob, params)) {\n                        continue;\n                    }\n                    str = state.fun.decorate[params[0]][params[1]].call(blob, state, str, params[2]);\n                }\n            }\n            str = txt_esc(blob.strings.prefix) + str + txt_esc(blob.strings.suffix);\n            var addme = \"\";\n            if (blob.status === CSL.END) {\n                //print(\"  CSL.END\");\n                addme = txt_esc(blob.range_prefix);\n            } else if (blob.status === CSL.SUCCESSOR) {\n                //print(\"  CSL.SUCCESSOR\");\n                addme = txt_esc(blob.successor_prefix);\n            } else if (blob.status === CSL.START) {\n                //print(\"  CSL.START\");\n                if (pos > 0 && !blob.suppress_splice_prefix) {\n                    addme = txt_esc(blob.splice_prefix);\n                } else {\n                    addme = \"\";\n                }\n            } else if (blob.status === CSL.SEEN) {\n                //print(\"  CSL.SEEN\");\n\n                // THIS IS NOT THE PROPER FUNCTION OF CSL.SEEN, IS IT?\n\n                addme = txt_esc(blob.splice_prefix);\n            }\n            ret += addme;\n            ret += str;\n            if (state.tmp.count_offset_characters) {\n                state.tmp.offset_characters += (addme.length + blob.strings.prefix.length + strlen + blob.strings.suffix.length);\n            }\n        }\n    }\n    return ret;\n};\n\nCSL.Output.Queue.purgeEmptyBlobs = function (parent) {\n    //print(\"START1\");\n    if (\"object\" !== typeof parent || \"object\" !== typeof parent.blobs || !parent.blobs.length) {\n        return;\n    }\n    // back-to-front, bottom-first\n    for (var i=parent.blobs.length-1;i>-1;i--) {\n        CSL.Output.Queue.purgeEmptyBlobs(parent.blobs[i]);\n        var child = parent.blobs[i];\n        if (!child || !child.blobs || !child.blobs.length) {\n            var buf = [];\n            while ((parent.blobs.length-1) > i) {\n                buf.push(parent.blobs.pop());\n            }\n            parent.blobs.pop();\n            while (buf.length) {\n                parent.blobs.push(buf.pop());\n            }\n        }\n    }\n    //print(\"   end\");\n};\n\n// Adjustments to be made:\n//\n// * Never migrate beyond a @quotes node\n// * Never migrate into a num node.\n\nCSL.Output.Queue.adjust = function (punctInQuote) {\n\n    var NO_SWAP_IN = {\n        \";\": true,\n        \":\": true\n    };\n\n    var NO_SWAP_OUT = {\n        \".\": true,\n        \"!\": true,\n        \"?\": true\n    };\n\n    var LtoR_MAP = {\n        \"!\": {\n            \".\": \"!\",\n            \"?\": \"!?\",\n            \":\": \"!\",\n            \",\": \"!,\",\n            \";\": \"!;\"\n        },\n        \"?\": {\n            \"!\": \"?!\",\n            \".\": \"?\",\n            \":\": \"?\",\n            \",\": \"?,\",\n            \";\": \"?;\"\n        },\n        \".\": {\n            \"!\": \".!\",\n            \"?\": \".?\",\n            \":\": \".:\",\n            \",\": \".,\",\n            \";\": \".;\"\n        },\n        \":\": {\n            \"!\": \"!\",\n            \"?\": \"?\",\n            \".\": \":\",\n            \",\": \":,\",\n            \";\": \":;\"\n        },\n        \",\": {\n            \"!\": \",!\",\n            \"?\": \",?\",\n            \":\": \",:\",\n            \".\": \",.\",\n            \";\": \",;\"\n        },\n        \";\": {\n            \"!\": \"!\",\n            \"?\": \"?\",\n            \":\": \";\",\n            \",\": \";,\",\n            \".\": \";\"\n        }\n    };\n\n    var SWAP_IN = {};\n    var SWAP_OUT = {};\n    var PUNCT = {};\n    var PUNCT_OR_SPACE = {};\n    for (var key in LtoR_MAP) {\n        PUNCT[key] = true;\n        PUNCT_OR_SPACE[key] = true;\n        if (!NO_SWAP_IN[key]) {\n            SWAP_IN[key] = true;\n        }\n        if (!NO_SWAP_OUT[key]) {\n            SWAP_OUT[key] = true;\n        }\n    }\n    PUNCT_OR_SPACE[\" \"] = true;\n    PUNCT_OR_SPACE[\" \"] = true;\n\n    var RtoL_MAP = {};\n    for (var key in LtoR_MAP) {\n        for (var subkey in LtoR_MAP[key]) {\n            if (!RtoL_MAP[subkey]) {\n                RtoL_MAP[subkey] = {};\n            }\n            RtoL_MAP[subkey][key] = LtoR_MAP[key][subkey];\n        }\n    }\n\n    function blobIsNumber(blob) {\n        return (\"number\" === typeof blob.num || (blob.blobs && blob.blobs.length === 1 && \"number\" === typeof blob.blobs[0].num));\n    }\n\n    function blobEndsInNumber(blob) {\n        if (\"number\" === typeof blob.num) {\n            return true;\n        }\n        if (!blob.blobs || \"object\" !==  typeof blob.blobs) {\n            return false;\n        }\n        if (blobEndsInNumber(blob.blobs[blob.blobs.length-1])) {\n            return true;\n        }\n    }\n    \n    function blobHasDecorations(blob,includeQuotes) {\n        var ret = false;\n        var decorlist = ['@font-style','@font-variant','@font-weight','@text-decoration','@vertical-align'];\n        if (includeQuotes) {\n            decorlist.push('@quotes');\n        }\n        if (blob.decorations) {\n            for (var i=0,ilen=blob.decorations.length;i<ilen;i++) {\n                if (decorlist.indexOf(blob.decorations[i][0]) > -1) {\n                    ret = true;\n                    break;\n                }\n            }\n        }\n        return ret;\n    }\n    \n    function blobHasDescendantQuotes(blob) {\n        if (blob.decorations) {\n            for (var i=0,ilen=blob.decorations.length;i<ilen;i++) {\n                if (blob.decorations[i][0] === '@quotes' && blob.decorations[i][1] !== \"false\") {\n                    return true;\n                }\n            }\n        }\n        if (\"object\" !== typeof blob.blobs) {\n            return false;\n        }\n        return blobHasDescendantQuotes(blob.blobs[blob.blobs.length-1]);\n        //if (blobHasDescendantQuotes(blob.blobs[blob.blobs.length-1])) {\n        //    return true\n        //};\n        //return false;\n    }\n    \n    function blobHasDescendantMergingPunctuation(parentChar,blob) {\n        var childChar = blob.strings.suffix.slice(-1);\n        if (!childChar && \"string\" === typeof blob.blobs) {\n            childChar = blob.blobs.slice(-1);\n        }\n        var mergedChars = RtoL_MAP[parentChar][childChar];\n        if (mergedChars && mergedChars.length === 1) {\n            return true;\n        }\n        if (\"object\" !== typeof blob.blobs) {\n            return false;\n        }\n        if (blobHasDescendantMergingPunctuation(parentChar,blob.blobs[blob.blobs.length-1])) {\n            return true;\n        }\n        return false;\n    }\n    \n    function matchLastChar(blob, chr) {\n        if (!PUNCT[chr]) {\n            return false;\n        }\n        if (\"string\" === typeof blob.blobs) {\n\n            if (blob.blobs.slice(-1) === chr) {\n                return true;\n            } else {\n                return false;\n            }\n        } else {\n            var child = blob.blobs[blob.blobs.length-1];\n            if (child) {\n                var childChar = child.strings.suffix.slice(-1);\n                if (!childChar) {\n                    return matchLastChar(child,chr);\n                } else if (child.strings.suffix.slice(-1) == chr) {\n                    return true;\n                } else {\n                    return false;\n                }\n            } else {\n                return false;\n            }\n        }\n    }\n    \n    function mergeChars (First, first, Second, second, merge_right) {\n        var FirstStrings = \"blobs\" === first ? First : First.strings;\n        var SecondStrings = \"blobs\" === second ? Second: Second.strings;\n        var firstChar = FirstStrings[first].slice(-1);\n        var secondChar = SecondStrings[second].slice(0,1);\n        function cullRight () {\n            SecondStrings[second] = SecondStrings[second].slice(1);\n        }\n        function cullLeft () {\n            FirstStrings[first] = FirstStrings[first].slice(0,-1);\n        }\n        function addRight (chr) {\n            SecondStrings[second] = chr + SecondStrings[second];\n        }\n        function addLeft (chr) {\n            FirstStrings[first] += chr;\n        }\n        var cull = merge_right ? cullLeft : cullRight;\n        function matchOnRight () {\n            return RtoL_MAP[secondChar];\n        }\n        function matchOnLeft () {\n            return LtoR_MAP[firstChar];\n        }\n        var match = merge_right ? matchOnLeft : matchOnRight;\n        function mergeToRight () {\n            var chr = LtoR_MAP[firstChar][secondChar];\n            if (\"string\" === typeof chr) {\n                cullLeft();\n                cullRight();\n                addRight(chr);\n            } else {\n                addRight(firstChar);\n                cullLeft();\n            }\n        }\n        function mergeToLeft () {\n            var chr = RtoL_MAP[secondChar][firstChar];\n            if (\"string\" === typeof chr) {\n                cullLeft();\n                cullRight();\n                addLeft(chr);\n            } else {\n                addLeft(secondChar);\n                cullRight();\n            }\n        }\n        var merge = merge_right ? mergeToRight: mergeToLeft;\n\n        var isDuplicate = firstChar === secondChar;\n        if (isDuplicate) {\n            cull();\n        } else {\n            if (match()) {\n                merge();\n            }\n        }\n    }\n\n    function upward (parent) {\n        //print(\"START2\");\n        // Terminus if no blobs\n        if (parent.blobs && \"string\" == typeof parent.blobs) {\n            if (PUNCT[parent.strings.suffix.slice(0,1)]\n                && parent.strings.suffix.slice(0,1) === parent.blobs.slice(-1)) {\n\n                parent.strings.suffix = parent.strings.suffix.slice(1);\n            }\n            return;\n        } else if (\"object\" !== typeof parent || \"object\" !== typeof parent.blobs || !parent.blobs.length) {\n            return;\n        }\n\n        // back-to-front, bottom-first\n        var parentDecorations = blobHasDecorations(parent,true);\n        for (var i=parent.blobs.length-1;i>-1;i--) {\n            this.upward(parent.blobs[i]);\n            var parentStrings = parent.strings;\n            var childStrings = parent.blobs[i].strings;\n            if (i === 0) {\n                // Remove leading space on first-position child node prefix if there is a trailing space on the node prefix above \n                if (\" \" === parentStrings.prefix.slice(-1) && \" \" === childStrings.prefix.slice(0, 1)) {\n                    childStrings.prefix = childStrings.prefix.slice(1);\n                }\n                // Migrate leading punctuation or space on a first-position prefix upward\n                var childChar = childStrings.prefix.slice(0, 1);\n                if (!parentDecorations && PUNCT_OR_SPACE[childChar] && !parentStrings.prefix) {\n                    parentStrings.prefix += childChar;\n                    childStrings.prefix = childStrings.prefix.slice(1);\n                }\n            }\n            if (i === (parent.blobs.length - 1)) {\n                // Migrate trailing space ONLY on a last-position suffix upward, controlling for duplicates\n                var childChar = childStrings.suffix.slice(-1);\n                // ZZZ Loosened to fix initialized names wrapped in a span and followed by a period\n                if (!parentDecorations && [\" \"].indexOf(childChar) > -1) {\n                    if (parentStrings.suffix.slice(0,1) !== childChar) {\n                        parentStrings.suffix = childChar + parentStrings.suffix;\n                    }\n                    childStrings.suffix = childStrings.suffix.slice(0, -1);\n                }\n            }\n            if (parentStrings.delimiter && i > 0) {\n                // Remove leading space on mid-position child node prefix if there is a trailing space on delimiter above\n                if (PUNCT_OR_SPACE[parentStrings.delimiter.slice(-1)]\n                    && parentStrings.delimiter.slice(-1) === childStrings.prefix.slice(0, 1)) {\n\n                    childStrings.prefix = childStrings.prefix.slice(1);\n                }\n            }\n            // Siblings are handled in adjustNearsideSuffixes()\n        }\n        //print(\"   end\");\n    }\n\n    function leftward (parent) {\n        // Terminus if no blobs\n        if (\"object\" !== typeof parent || \"object\" !== typeof parent.blobs || !parent.blobs.length) {\n            return;\n        }\n\n        for (var i=parent.blobs.length-1;i>-1;i--) {\n            this.leftward(parent.blobs[i]);\n            // This is a delicate one.\n            //\n            // Migrate if:\n            // * there is no umbrella delimiter [ok]\n            // * neither the child nor its sibling is a number [ok]\n            // * decorations exist neither on the child nor on the sibling [ok]\n            // * sibling prefix char is a swapping char [ok]\n            //\n            // Suppress without migration if:\n            // * sibling prefix char matches child suffix char or\n            // * child suffix is empty and sibling prefix char match last field char\n            if ((i < parent.blobs.length -1) && !parent.strings.delimiter) {\n                // If there is a trailing swappable character on a sibling prefix with no intervening delimiter, copy it to suffix,\n                // controlling for duplicates\n                var child = parent.blobs[i];\n                var childChar = child.strings.suffix.slice(-1);\n                var sibling = parent.blobs[i+1];\n                var siblingChar = sibling.strings.prefix.slice(0, 1);\n                var hasDecorations = blobHasDecorations(child) || blobHasDecorations(sibling);\n                var hasNumber = \"number\" === typeof childChar || \"number\" === typeof siblingChar;\n\n                if (!hasDecorations && !hasNumber && PUNCT[siblingChar] && !hasNumber) {\n                    var suffixAndPrefixMatch = siblingChar === child.strings.suffix.slice(-1);\n                    var suffixAndFieldMatch = (!child.strings.suffix && \"string\" === typeof child.blobs && child.blobs.slice(-1) === siblingChar);\n                    if (!suffixAndPrefixMatch && !suffixAndFieldMatch) {\n                        mergeChars(child, 'suffix', sibling, 'prefix');\n                        //child.strings.suffix += siblingChar;\n                    } else {\n                        sibling.strings.prefix = sibling.strings.prefix.slice(1);\n                    }\n                }\n            }\n        }\n    }\n\n    function downward (parent) {\n        //print(\"START3\");\n        // Terminus if no blobs\n        if (parent.blobs && \"string\" == typeof parent.blobs) {\n            if (PUNCT[parent.strings.suffix.slice(0,1)]\n                && parent.strings.suffix.slice(0,1) === parent.blobs.slice(-1)) {\n\n                parent.strings.suffix = parent.strings.suffix.slice(1);\n            }\n            return;\n        } else if (\"object\" !== typeof parent || \"object\" !== typeof parent.blobs || !parent.blobs.length) {\n            return;\n        }\n        //if (top) {\n        //    print(\"JSON \"+JSON.stringify(parent, [\"strings\", \"decorations\", \"blobs\", \"prefix\", \"suffix\", \"delimiter\"], 2));\n        //}\n\n        var parentStrings = parent.strings;\n        // Check for numeric child\n        var someChildrenAreNumbers = false;\n        for (var i=0,ilen=parent.blobs.length;i<ilen;i++) {\n            if (blobIsNumber(parent.blobs[i])) {\n                someChildrenAreNumbers = true;\n                break;\n            }\n        }\n        if (true || !someChildrenAreNumbers) {\n            // If there is a leading swappable character on delimiter, copy it to suffixes IFF none of the targets are numbers\n            if (parentStrings.delimiter && PUNCT[parentStrings.delimiter.slice(0, 1)]) {\n                var delimChar = parentStrings.delimiter.slice(0, 1);\n                for (var i=parent.blobs.length-2;i>-1;i--) {\n                    var childStrings = parent.blobs[i].strings;\n                    if (childStrings.suffix.slice(-1) !== delimChar) {\n                        childStrings.suffix += delimChar;\n                    }\n                }\n                parentStrings.delimiter = parentStrings.delimiter.slice(1);\n            }\n        }\n        // back-to-front, top-first\n        for (var i=parent.blobs.length-1;i>-1;i--) {\n            var child = parent.blobs[i];\n            var childStrings = parent.blobs[i].strings;\n            var childDecorations = blobHasDecorations(child, true);\n            var childIsNumber = blobIsNumber(child);\n\n            if (i === (parent.blobs.length - 1)) {\n\n                //if (blobHasDescendantQuotes(child)) {\n                //    print(\"JSON \"+JSON.stringify(parent, [\"strings\", \"decorations\", \"blobs\", \"prefix\", \"suffix\", \"delimiter\"]));\n                //}\n\n                if (true || !someChildrenAreNumbers) {\n                    // If we have decorations, drill down to see if there are quotes below.\n                    // If so, we allow migration anyway.\n                    // Original discussion is here:\n                    // https://forums.zotero.org/discussion/37091/citeproc-bug-punctuation-in-quotes/\n                    var parentChar = parentStrings.suffix.slice(0, 1);\n\n                    // Hmm.\n                    // Consider writing out the matching child from blobHasDescendant functions.\n                    // It should save some cycles, and produce the same result.\n\n                    var allowMigration = false;\n                    if (PUNCT[parentChar]) {\n                        allowMigration = blobHasDescendantMergingPunctuation(parentChar,child);\n                        if (!allowMigration && punctInQuote) {\n                            allowMigration = blobHasDescendantQuotes(child);\n                        }\n                    }\n                    if (allowMigration) {\n                        if (PUNCT[parentChar]) {\n                            if (!blobEndsInNumber(child)) {\n                                if (\"string\" === typeof child.blobs) {\n                                    mergeChars(child, 'blobs', parent, 'suffix');\n                                } else {\n                                    mergeChars(child, 'suffix', parent, 'suffix');\n                                }\n                                if (parentStrings.suffix.slice(0,1) === \".\") {\n                                    childStrings.suffix += parentStrings.suffix.slice(0,1);\n                                    parentStrings.suffix = parentStrings.suffix.slice(1);\n                                }\n                            }\n                        }\n                    }\n                    if (childStrings.suffix.slice(-1) === \" \" && parentStrings.suffix.slice(0,1) === \" \") {\n                        parentStrings.suffix = parentStrings.suffix.slice(1);\n                    }\n                    // More duplicates control\n                    if (PUNCT_OR_SPACE[childStrings.suffix.slice(0,1)]) {\n                        if (\"string\" === typeof child.blobs && child.blobs.slice(-1) === childStrings.suffix.slice(0,1)) {\n                            // Remove parent punctuation of it duplicates the last character of a field\n                            childStrings.suffix = childStrings.suffix.slice(1);\n                        }\n                        if (childStrings.suffix.slice(-1) === parentStrings.suffix.slice(0, 1)) {\n                            // Remove duplicate punctuation on child suffix\n                            parentStrings.suffix = parentStrings.suffix.slice(0, -1);\n                        }\n                    }\n                }\n                // Squash dupes\n                if (matchLastChar(parent,parent.strings.suffix.slice(0,1))) {\n                    parent.strings.suffix = parent.strings.suffix.slice(1);\n                }\n            } else if (parentStrings.delimiter) {\n                // Remove trailing space on mid-position child node suffix if there is a leading space on delimiter above\n                if (PUNCT_OR_SPACE[parentStrings.delimiter.slice(0,1)]\n                    && parentStrings.delimiter.slice(0, 1) === childStrings.suffix.slice(-1)) {\n\n                    parent.blobs[i].strings.suffix = parent.blobs[i].strings.suffix.slice(0, -1);\n                    \n                }\n            } else {\n                // Otherwise it's a sibling. We don't care about moving spaces here, just suppress a duplicate\n                var siblingStrings = parent.blobs[i+1].strings;\n                if (!blobIsNumber(child) \n                    && !childDecorations\n                    && PUNCT_OR_SPACE[childStrings.suffix.slice(-1)]\n                    && childStrings.suffix.slice(-1) === siblingStrings.prefix.slice(0, 1)) {\n\n                    siblingStrings.prefix = siblingStrings.prefix.slice(1);\n                }\n            }\n            // If field content ends with swappable punctuation, suppress swappable punctuation in style suffix.\n            if (!childIsNumber && !childDecorations && PUNCT[childStrings.suffix.slice(0,1)]\n                && \"string\" === typeof child.blobs) {\n                \n                mergeChars(child, 'blobs', child, 'suffix');\n            }\n            this.downward(parent.blobs[i]);\n        }\n/*\n        if (top) {\n\n            var seen = [];\n            print(JSON.stringify(parent, function(key, val) {\n                if (!val || key === 'alldecor') return;\n                if (typeof val == \"object\") {\n                    if (seen.indexOf(val) >= 0)\n                        return\n                    seen.push(val)\n                }\n                return val\n            },2));\n        }\n*/\n\n        //print(\"  end\");\n    }\n    // Abstract out a couple of utility functions, used in fix() below.\n    function swapToTheLeft (child) {\n        var childChar = child.strings.suffix.slice(0,1);\n        if (\"string\" === typeof child.blobs) {\n            while (SWAP_IN[childChar]) {\n                mergeChars(child, 'blobs', child, 'suffix');\n                childChar = child.strings.suffix.slice(0,1);\n            }                                \n        } else {\n            while (SWAP_IN[childChar]) {\n                mergeChars(child.blobs[child.blobs.length-1], 'suffix', child, 'suffix');\n                childChar = child.strings.suffix.slice(0,1);\n            }\n        }\n    }\n    function swapToTheRight (child) {\n        if (\"string\" === typeof child.blobs) {\n            var childChar = child.blobs.slice(-1);\n            while (SWAP_OUT[childChar]) {\n                mergeChars(child, 'blobs', child, 'suffix', true);\n                childChar = child.blobs.slice(-1);\n            }\n        } else {\n            var childChar = child.blobs[child.blobs.length-1].strings.suffix.slice(-1);\n            while (SWAP_OUT[childChar]) {\n                mergeChars(child.blobs[child.blobs.length-1], 'suffix', child, 'suffix', true);\n                childChar = child.blobs[child.blobs.length-1].strings.suffix.slice(-1);\n            }\n        }\n    }\n\n    function fix (parent) {\n        // Terminus if no blobs\n        if (\"object\" !== typeof parent || \"object\" !== typeof parent.blobs || !parent.blobs.length) {\n            return;\n        }\n        \n        //print(\"START4\");\n        // Do the swap, front-to-back, bottom-first\n        var lastChar;\n\n        // XXX Two things to fix with this:\n        // XXX (1) Stalls after one character\n        // XXX (2) Moves colon and semicolon, both of which SHOULD stall\n\n        for (var i=0,ilen=parent.blobs.length;i<ilen;i++) {\n            var child = parent.blobs[i];\n            var quoteSwap = false;\n            for (var j=0,jlen=child.decorations.length;j<jlen;j++) {\n                var decoration = child.decorations[j];\n                if (decoration[0] === \"@quotes\" && decoration[1] !== \"false\") {\n                    quoteSwap = true;\n                }\n            }\n            if (quoteSwap) {\n                if (punctInQuote) {\n                    swapToTheLeft(child);\n                } else {\n                    swapToTheRight(child);\n                }\n            }\n            lastChar = this.fix(parent.blobs[i]);\n            if (child.blobs && \"string\" === typeof child.blobs) {\n                lastChar = child.blobs.slice(-1);\n            }\n        }\n        return lastChar;\n    }\n    this.upward = upward;\n    this.leftward = leftward;\n    this.downward = downward;\n    this.fix = fix;\n};\n\n/*global CSL: true */\n\nCSL.Engine.Opt = function () {\n    this.parallel = {\n        enable: false,\n    },\n    this.has_disambiguate = false;\n    this.mode = \"html\";\n    this.dates = {};\n    this.jurisdictions_seen = {};\n    this.suppressedJurisdictions = {};\n    this.inheritedAttributes = {};\n    this[\"locale-sort\"] = [];\n    this[\"locale-translit\"] = [];\n    this[\"locale-translat\"] = [];\n    this.citeAffixes = {\n        persons:{\n            \"locale-orig\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translit\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translat\":{\n                prefix:\"\",\n                suffix:\"\"\n            }\n        },\n        institutions:{\n            \"locale-orig\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translit\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translat\":{\n                prefix:\"\",\n                suffix:\"\"\n            }\n        },\n        titles:{\n            \"locale-orig\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translit\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translat\":{\n                prefix:\"\",\n                suffix:\"\"\n            }\n        },\n        journals:{\n            \"locale-orig\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translit\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translat\":{\n                prefix:\"\",\n                suffix:\"\"\n            }\n        },\n        publishers:{\n            \"locale-orig\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translit\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translat\":{\n                prefix:\"\",\n                suffix:\"\"\n            }\n        },\n        places:{\n            \"locale-orig\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translit\":{\n                prefix:\"\",\n                suffix:\"\"\n            },\n            \"locale-translat\":{\n                prefix:\"\",\n                suffix:\"\"\n            }\n        }\n    };\n    this[\"default-locale\"] = [];\n    this.update_mode = CSL.NONE;\n    this.bib_mode = CSL.NONE;\n    this.sort_citations = false;\n    /*\n     * Default values.\n     * The various et-al values are set globally,\n     * and the appropriate value is set by the names start\n     * tag at runtime, depending on whether the Item is a\n     * first or a subsequent reference.\n     */\n    this[\"et-al-min\"] = 0;\n    this[\"et-al-use-first\"] = 1;\n    this[\"et-al-use-last\"] = false;\n    this[\"et-al-subsequent-min\"] = false;\n    this[\"et-al-subsequent-use-first\"] = false;\n\n    this[\"demote-non-dropping-particle\"] = \"display-and-sort\";\n    // default of true, because none of our consuming\n    // applications so far store the various prefixes and \n    // suffixes we support in separate fields.\n    this[\"parse-names\"] = true;\n    // this[\"auto-vietnamese-names\"] = true;\n\n    this.citation_number_slug = false;\n    this.trigraph = \"Aaaa00:AaAa00:AaAA00:AAAA00\";\n\n    this.nodenames = [];\n\n    this.gender = {};\n    this['cite-lang-prefs'] = {\n        persons:['orig'],\n        institutions:['orig'],\n        titles:['orig'],\n        journals:['orig'],\n        publishers:['orig'],\n        places:['orig'],\n        number:['orig']\n    };\n\n    this.has_layout_locale = false;\n    this.disable_duplicate_year_suppression = [];\n    this.use_context_condition = false;\n\n    this.jurisdiction_fallbacks = {};\n\n    this.development_extensions = {};\n    this.development_extensions.field_hack = true;\n    this.development_extensions.allow_field_hack_date_override = true;\n    this.development_extensions.locator_date_and_revision = true;\n    this.development_extensions.locator_label_parse = true;\n    this.development_extensions.raw_date_parsing = true;\n    this.development_extensions.clean_up_csl_flaws = true;\n    this.development_extensions.consolidate_legal_items = false;\n    this.development_extensions.csl_reverse_lookup_support = false;\n    this.development_extensions.wrap_url_and_doi = false;\n    this.development_extensions.thin_non_breaking_space_html_hack = false;\n    this.development_extensions.apply_citation_wrapper = false;\n    this.development_extensions.main_title_from_short_title = false;\n    this.development_extensions.uppercase_subtitles = false;\n    this.development_extensions.normalize_lang_keys_to_lowercase = false;\n    this.development_extensions.strict_text_case_locales = false;\n    this.development_extensions.expect_and_symbol_form = false;\n    this.development_extensions.require_explicit_legal_case_title_short = false;\n    this.development_extensions.spoof_institutional_affiliations = false;\n    this.development_extensions.force_jurisdiction = false;\n    this.development_extensions.parse_names = true;\n    this.development_extensions.hanging_indent_legacy_number = false;\n    this.development_extensions.throw_on_empty = false;\n    this.development_extensions.strict_inputs = true;\n    this.development_extensions.prioritize_disambiguate_condition = false;\n    this.development_extensions.force_short_title_casing_alignment = true;\n    this.development_extensions.implicit_short_title = false;\n    this.development_extensions.force_title_abbrev_fallback = false;\n    this.development_extensions.split_container_title = false;\n    this.development_extensions.legacy_institution_name_ordering = false;\n    this.development_extensions.etal_min_etal_usefirst_hack = false;\n};\n\nCSL.Engine.Tmp = function () {\n    //\n    // scratch variable to display the total\n    // number of names in all rendered variables\n    // in a cite.  initialized to zero by the\n    // citation element, incremented by each\n    // name variable actually rendered\n    this.names_max = new CSL.Stack();\n    this.names_base = new CSL.Stack();\n    this.givens_base = new CSL.Stack();\n    //\n    // this holds the field values collected by the @value\n    // and @variable attributes, for processing by the\n    // element functions.\n    this.value = [];\n    /**\n     * Object to hold the decorations declared by a name-part\n     * element.\n     */\n    this.namepart_decorations = {};\n    /**\n     * String variable to hold the type of a name-part\n     * element.\n     */\n    this.namepart_type = false;\n    //\n    // scratch variable to flag whether we are processing\n    // a citation or a bibiliography.  this diverts token and\n    // configuration to the appropriateo objects inside\n    // state.  the default is \"citation\".\n    this.area = \"citation\";\n    this.root = \"citation\";\n    this.extension = \"\";\n    //\n    // controls the implicit conditional wrappers applied\n    // to top-level elements inside a names substitute span.\n    // false by default, names start tag pushes a new true level,\n    // names end tag pops it.  Output value check in @variable\n    // function of attributes.js sets level to false.  closing names\n    // tag maps a false value to superior level.\n    this.can_substitute = new CSL.Stack(0, CSL.LITERAL);\n    //\n    // notes whether the formatted elements of a date span\n    // rendered anything.  controls whether literal fallback\n    // is used.\n    this.element_rendered_ok = false;\n    //\n    // element_trace keeps a record of rendered elements.\n    // used to implement author-only.\n    //\n    this.element_trace = new CSL.Stack(\"style\");\n    //\n    // counter for total namesets\n    this.nameset_counter = 0;\n    //\n    /////  this.fun.check_for_output = CSL.check_for_output;\n    //\n    // stack flag used for term handling.  Set to true\n    // if at least one variable has tried to render, and\n    // no variables had content.\n    this.group_context = new CSL.Stack({\n        term_intended: false,\n        variable_attempt: false,\n        variable_success: false,\n        output_tip: undefined,\n        label_form:  undefined,\n        parallel_first: undefined,\n        parallel_last: undefined,\n        parallel_delimiter_override: undefined,\n        condition: false,\n        force_suppress: false,\n        done_vars: []\n    });\n    //\n    // boolean flag used to control first-letter capitalization\n    // of terms.  Set to true if any item preceding the term\n    // being handled has rendered successfully, otherwise\n    // false.\n    this.term_predecessor = false;\n    //\n    // boolean flag to control use of layout delimiter\n    // immediately before numbers. This hack is needed for\n    // some numeric styles.\n    this.in_cite_predecessor = false;\n    //\n    // stack flag used to control jumps in the closing\n    // token of a conditional.\n    this.jump = new CSL.Stack(0, CSL.LITERAL);\n    //\n    // holds string parameters for group formatting, between\n    // the start of a group and the closing token.\n    this.decorations = new CSL.Stack();\n    //\n    // token store stack.\n    this.tokenstore_stack = new CSL.Stack();\n\n    // for collapsing\n    this.last_suffix_used = \"\";\n    this.last_names_used = [];\n    this.last_years_used = [];\n    this.years_used = [];\n    this.names_used = [];\n\n    this.taintedItemIDs = {};\n    this.taintedCitationIDs = {};\n    //\n    // scratch stack containing initialize-with strings or null values\n    this.initialize_with = new CSL.Stack();\n    //\n    // this is used to set a requested set of\n    // disambiguation parameters in the output.\n    // for the array elements, the base array\n    // (either zero for each nameset, or full-up\n    // if givens are already used) is set\n    // during names processing, if no value\n    // is set in the processor before a rendering\n    // run.  to simplify things for the calling\n    // function, these are just bog-standard arrays,\n    // and can be safely overwritten.\n    this.disambig_request = false;\n    //\n    // scratch variable to toggle an attempt to set a\n    // name in sort order rather than display\n    // order.\n    this[\"name-as-sort-order\"] = false;\n    //\n    // suppress decorations (used for generating\n    // sort keys and disambiguation keys)\n    this.suppress_decorations = false;\n    //\n    // empty settings array, used to report settings used\n    // if disambig_request is not set at runtime\n    this.disambig_settings = new CSL.AmbigConfig();\n    //\n    // sort key array\n    this.bib_sort_keys = [];\n    //\n    // holds the prefix between the start of a group\n    // and the closing token.\n    this.prefix = new CSL.Stack(\"\", CSL.LITERAL);\n    //\n    // holds the suffix between the start of a group\n    // and the closing token.\n    this.suffix = new CSL.Stack(\"\", CSL.LITERAL);\n    //\n    // holds the group delimiter between the start of a group\n    // and the closing token.\n    this.delimiter = new CSL.Stack(\"\", CSL.LITERAL);\n    //\n    // Used for conditional locale switching.\n    this.cite_locales = [];\n    this.cite_affixes = {\n        citation: false, \n        bibliography: false,\n        citation_sort: false, \n        bibliography_sort: false\n    };\n    this.strip_periods = 0;\n    this.shadow_numbers = {};\n    this.authority_stop_last = 0;\n    this.loadedItemIDs = {};\n    //\n    // Push/pop array for set/unset of opt.lang setting, used\n    // in if locale=\"XX\" to force terms to language of item.\n    // @locale tests track their nesting level in a counter,\n    // and push the current value of state.opt.lang to one array,\n    // and the counter value to another. On the way back up,\n    // closing node decrements the counter, compares its value\n    // with the trailing value on the array, and pops both\n    // arrays, resetting state.opt.lang to the previous value.\n    // A hack to solve a surprisingly difficult problem caused\n    // by the use of an execution stack for the nested structure.\n    this.condition_counter = 0; //incremented/decremented on ALL conditions\n    this.condition_lang_val_arr = [];\n    this.condition_lang_counter_arr = [];\n};\n\n\nCSL.Engine.Fun = function (state) {\n    //\n    // matcher\n    this.match = new CSL.Util.Match();\n    //\n    // utility to get standard suffixes for disambiguation\n    this.suffixator = new CSL.Util.Suffixator(CSL.SUFFIX_CHARS);\n    //\n    // utility to romanize a numeric value\n    this.romanizer = new CSL.Util.Romanizer();\n    //\n    // utility to make an ordinal form of a number\n    this.ordinalizer = new CSL.Util.Ordinalizer(state);\n    //\n    // utility to make the long ordinal form of a number, if possible\n    this.long_ordinalizer = new CSL.Util.LongOrdinalizer();\n};\n\n\nCSL.Engine.Build = function () {\n    // Alternate et-al term\n    // Holds the localization key of the alternative term\n    // to be used for et-al in a names environment.  Reduced\n    // to a term object when the element tag is processed during\n    // Build.\n    this[\"alternate-term\"] = false;\n    //\n    // flags that we are in the bibliography area.\n    // used by sort.\n    this.in_bibliography = false;\n    //\n    // scratch variable to alter behaviour when processing\n    // locale files\n    this.in_style = false;\n    //\n    // used to ignore info\n    this.skip = false;\n    //\n    // the macro ATTRIBUTE stores a macro name on this\n    // scratch variable anywhere outside the layout area\n    // during build.  The macro name is picked up when\n    // the token is encountered inside the layout area,\n    // either through a direct call, or as part of a nested\n    // macro expansion, and the macro content is exploded\n    // into the token list.\n    this.postponed_macro = false;\n    //\n    // used especially for controlling macro expansion\n    // during Build.\n    this.layout_flag = false;\n    //\n    // (was buffer_name)\n    // scratch variable to hold the name of a macro\n    // or a term until its children have been collected.\n    this.name = false;\n    this.names_variables = [[]];\n    this.name_label = [{}];\n    //\n    // scratch variable to hold the value of a form\n    // attribute until other attributes needed for\n    // processing have been collected.\n    this.form = false;\n    this.term = false;\n    //\n    // the macros themselves are discarded after Build\n    this.macro = {};\n    //\n    // the macro build stack.  used to raise an error\n    // when macros would attempt to call themselves.\n    this.macro_stack = [];\n    //\n    // stores the content of an XML text node during processing\n    this.text = false;\n    //\n    // this is a scratch variable for holding an attribute\n    // value during processing\n    this.lang = false;\n    //\n    // should be able to run uninitialized; may attract some\n    // cruft this way.\n    this.area = \"citation\";\n    this.root = \"citation\";\n    this.extension = \"\";\n    //\n    // controls the application of implicit conditional wrappers\n    // to top-level elements inside a names substitute span.\n    // zero by default, build of names tag pushes a\n    // new level with value 1.  group start tag increments by 1,\n    // group end tag decrements by 1.  conditional wrappers are\n    // only applied if value is exactly 1.\n    this.substitute_level = new CSL.Stack(0, CSL.LITERAL);\n    this.names_level = 0;\n    this.render_nesting_level = 0;\n    this.render_seen = false;\n    this.bibliography_key_pos = 0;\n};\n\n\nCSL.Engine.Configure = function () {\n    //\n    // the fail and succeed arrays are used for stack\n    // processing during configure.\n    this.tests = [];\n    this.fail = [];\n    this.succeed = [];\n};\n\n\nCSL.Engine.Citation = function (state) {\n     // Citation options area.\n     // Holds a mixture of persistent and ephemeral\n     // options and scratch data used during processing of\n     // a citation.</p>\n    this.opt = {\n        inheritedAttributes: {}\n    };\n\n    this.tokens = [];\n    // Placeholder function\n    this.srt = new CSL.Registry.Comparifier(state, \"citation_sort\");\n    //\n    // configuration array to hold the collapse\n    // options, if any.\n    this.opt.collapse = [];\n    //\n    // disambiguate options\n    this.opt[\"disambiguate-add-names\"] = false;\n    this.opt[\"disambiguate-add-givenname\"] = false;\n    this.opt[\"disambiguate-add-year-suffix\"] = false;\n    this.opt[\"givenname-disambiguation-rule\"] = \"by-cite\";\n    this.opt[\"near-note-distance\"] = 5;\n\n    this.opt.topdecor = [];\n    this.opt.layout_decorations = [];\n    this.opt.layout_prefix = \"\";\n    this.opt.layout_suffix = \"\";\n    this.opt.layout_delimiter = \"\";\n    //\n    // sorting\n    this.opt.sort_locales = [];\n    this.opt.max_number_of_names = 0;\n    this.root = \"citation\";\n};\n\n\nCSL.Engine.Bibliography = function () {\n    this.opt = {\n        inheritedAttributes: {}\n    };\n    this.tokens = [];\n\n    this.opt.collapse = [];\n\n    this.opt.topdecor = [];\n    this.opt.layout_decorations = [];\n    this.opt.layout_prefix = \"\";\n    this.opt.layout_suffix = \"\";\n    this.opt.layout_delimiter = \"\";\n    this.opt[\"line-spacing\"] = 1;\n    this.opt[\"entry-spacing\"] = 1;\n    //\n    // sorting\n    this.opt.sort_locales = [];\n    this.opt.max_number_of_names = 0;\n    this.root = \"bibliography\";\n};\n\n\nCSL.Engine.BibliographySort = function () {\n    this.tokens = [];\n    this.opt = {};\n    this.opt.sort_directions = [];\n    this.opt.topdecor = [];\n    // Holds the final citation-number sort direction, for use\n    // in applying numbers in cs:citation and cs:bibliography.\n    // Value is exclusively controlled by cs:key in bibliography_sort\n    this.opt.citation_number_sort_direction = CSL.ASCENDING;\n    this.opt.citation_number_secondary = false;\n    this.tmp = {};\n    this.keys = [];\n    this.root = \"bibliography\";\n};\n\n\nCSL.Engine.CitationSort = function () {\n    this.tokens = [];\n    this.opt = {};\n    this.opt.sort_directions = [];\n    this.keys = [];\n    this.opt.topdecor = [];\n    this.root = \"citation\";\n};\n\nCSL.Engine.InText = function () {\n     // InText options area.\n     // Holds a mixture of persistent and ephemeral\n     // options and scratch data used during processing of\n     // a citation.</p>\n    this.opt = {\n        inheritedAttributes: {}\n    };\n\n    this.tokens = [];\n    // Placeholder function\n    //this.srt = new CSL.Registry.Comparifier(state, \"citation_sort\");\n    //\n    // configuration array to hold the collapse\n    // options, if any.\n    this.opt.collapse = [];\n    //\n    // disambiguate options\n    this.opt[\"disambiguate-add-names\"] = false;\n    this.opt[\"disambiguate-add-givenname\"] = false;\n    this.opt[\"disambiguate-add-year-suffix\"] = false;\n    this.opt[\"givenname-disambiguation-rule\"] = \"by-cite\";\n    this.opt[\"near-note-distance\"] = 5;\n\n    this.opt.topdecor = [];\n    this.opt.layout_decorations = [];\n    this.opt.layout_prefix = \"\";\n    this.opt.layout_suffix = \"\";\n    this.opt.layout_delimiter = \"\";\n    //\n    // sorting\n    this.opt.sort_locales = [];\n    this.opt.max_number_of_names = 0;\n    this.root = \"intext\";\n};\n\n/*global CSL: true */\n\nCSL.Engine.prototype.previewCitationCluster = function (citation, citationsPre, citationsPost, newMode) {\n    // Generate output for a hypothetical citation at the current position,\n    // Leave the registry in the same state in which it was found.\n    //print(\"################### previewCitationCluster() #################\");\n    var oldMode = this.opt.mode;\n    this.setOutputFormat(newMode);\n    // Avoids generating unwanted ibids, if the citationID already exists in document\n\tif (citation.citationID) {\n\t\tdelete citation.citationID;\n\t}\n    var ret = this.processCitationCluster(citation, citationsPre, citationsPost, CSL.PREVIEW);\n\n    this.setOutputFormat(oldMode);\n    return ret[1];\n};\n\nCSL.Engine.prototype.appendCitationCluster = function (citation) {\n    var citationsPre = [];\n    var len = this.registry.citationreg.citationByIndex.length;\n    for (var pos = 0; pos < len; pos += 1) {\n        var c = this.registry.citationreg.citationByIndex[pos];\n        citationsPre.push([\"\" + c.citationID, c.properties.noteIndex]);\n    }\n    // Drop the data segment to return a list of pos/string pairs.\n    return this.processCitationCluster(citation, citationsPre, [])[1];\n};\n\n\nCSL.Engine.prototype.processCitationCluster = function (citation, citationsPre, citationsPost, flag) {\n    var c, preCitation, postCitation, i, ilen, j, jlen, k, klen, n, nlen, key, Item, item, noteCitations, textCitations, m, citationsInNote;\n    this.debug = false;\n    this.tmp.loadedItemIDs = {};\n\n    // Revert citation dereference from 2ffc4664ae\n    //citation = JSON.parse(JSON.stringify(citation));\n    \n    //print(\"################### processCitationCluster() #################\");\n    this.tmp.citation_errors = [];\n    this.registry.return_data = {\"bibchange\": false};\n\n    // make sure this citation has a unique ID, and register it in citationById.\n    this.setCitationId(citation);\n\n    var oldCitationList;\n    var oldItemList;\n    var oldAmbigs;\n    if (flag === CSL.PREVIEW) {\n        //SNIP-START\n        if (this.debug) {\n            CSL.debug(\"****** start state save *********\");\n        }\n        //SNIP-END\n        //\n        // Simplify.\n\n        // Take a slice of existing citations.\n        oldCitationList = this.registry.citationreg.citationByIndex.slice();\n\n        // Take a slice of current items, for later use with update.\n        oldItemList = this.registry.reflist.slice();\n\n        // Make a list of preview citation ref objects. Omit the current\n        // citation, because it will not exist in registry if: (a) this is\n        // a new citation; or (b) the calling application is assigning\n        // new citationIDs for every transaction.\n        var newCitationList = citationsPre.concat(citationsPost);\n\n        // Make a full list of desired ids, for use in preview update,\n        // and a hash list of same while we're at it.\n        // First step through known citations, then step through\n        // the items in the citation for preview.\n        var newItemIds = {};\n        var newItemIdsList = [];\n        for (var i = 0, ilen = newCitationList.length; i < ilen; i += 1) {\n            c = this.registry.citationreg.citationById[newCitationList[i][0]];\n            for (j = 0, jlen = c.citationItems.length; j < jlen; j += 1) {\n                newItemIds[c.citationItems[j].id] = true;\n                newItemIdsList.push(\"\" + c.citationItems[j].id);\n            }\n        }\n        for (j = 0, jlen = citation.citationItems.length; j < jlen; j += 1) {\n            newItemIds[citation.citationItems[j].id] = true;\n            newItemIdsList.push(\"\" + citation.citationItems[j].id);\n        }\n\n        // Clone and save off disambigs of items that will be lost.\n        oldAmbigs = {};\n        for (var i = 0, ilen = oldItemList.length; i < ilen; i += 1) {\n            if (!newItemIds[oldItemList[i].id]) {\n                var oldAkey = this.registry.registry[oldItemList[i].id].ambig;\n                var ids = this.registry.ambigcites[oldAkey];\n                if (ids) {\n                    for (j = 0, jlen = ids.length; j < jlen; j += 1) {\n                        oldAmbigs[ids[j]] = CSL.cloneAmbigConfig(this.registry.registry[ids[j]].disambig);\n                    }\n                }\n            }\n        }\n\n        // Update items.  This will produce the base name data and sort things.\n        // Possibly unnecessary?\n        //this.updateItems(this.registry.mylist.concat(tmpItems));\n\n        //SNIP-START\n        if (this.debug) {\n            CSL.debug(\"****** end state save *********\");\n        }\n        //SNIP-END\n    }\n\n    this.tmp.taintedCitationIDs = {};\n    var sortedItems = [];\n\n    // Styles that use note backreferencing with a by-cite\n    // givenname disambiguation rule include the note number\n    // in the cite for disambiguation purposes. Correct resolution\n    // of disambiguate=\"true\" conditions on first-reference cites \n    // in certain editing scenarios (e.g. where a cite is moved across\n    // notes) requires that disambiguation be rerun on cites\n    // affected by the edit.\n    var rerunAkeys = {};\n\n    // retrieve item data and compose items for use in rendering\n    // attach pointer to item data to shared copy for good measure\n    for (var i = 0, ilen = citation.citationItems.length; i < ilen; i += 1) {\n        // Protect against caller-side overwrites to locator strings etc\n        item = {};\n        for (var key in citation.citationItems[i]) {\n            item[key] = citation.citationItems[i][key];\n        }\n        Item = this.retrieveItem(\"\" + item.id);\n        if (Item.id) {\n            this.transform.loadAbbreviation(\"default\", \"hereinafter\", Item.id, Item.language);\n        }\n        item = CSL.parseLocator.call(this, item);\n        if (this.opt.development_extensions.consolidate_legal_items) {\n            this.remapSectionVariable([[Item,item]]);\n        }\n        if (this.opt.development_extensions.locator_label_parse) {\n            if (item.locator && [\"bill\",\"gazette\",\"legislation\",\"regulation\",\"treaty\"].indexOf(Item.type) === -1 && (!item.label || item.label === 'page')) {\n                var m = CSL.LOCATOR_LABELS_REGEXP.exec(item.locator);\n                if (m) {\n                    var tryLabel = CSL.LOCATOR_LABELS_MAP[m[2]];\n                    if (this.getTerm(tryLabel)) {\n                        item.label = tryLabel;\n                        item.locator = m[3];\n                    }\n                }\n            }\n        }\n        var newitem = [Item, item];\n        sortedItems.push(newitem);\n        citation.citationItems[i].item = Item;\n    }\n\n    // ZZZ sort stuff moved from here.\n\n    // attach the sorted list to the citation item\n    citation.sortedItems = sortedItems;\n\n    // build reconstituted citations list in current document order\n    var citationByIndex = [];\n    var citationById = {};\n    var lastNotePos;\n    for (i=0, ilen=citationsPre.length; i<ilen; i += 1) {\n        preCitation = citationsPre[i];\n        if (this.opt.development_extensions.strict_inputs) {\n            if (citationById[preCitation[0]]) {\n                CSL.error(\"Previously referenced citationID \" + preCitation[0] + \" encountered in citationsPre\");\n            }\n            if (preCitation[1]) {\n                if (lastNotePos > preCitation[1]) {\n                    CSL.debug(\"Note index sequence is not sane at citationsPre[\" + i + \"]\");\n                }\n                lastNotePos = preCitation[1];\n            }\n        }\n        this.registry.citationreg.citationById[preCitation[0]].properties.noteIndex = preCitation[1];\n        citationByIndex.push(this.registry.citationreg.citationById[preCitation[0]]);\n        citationById[preCitation[0]] = this.registry.citationreg.citationById[preCitation[0]];\n    }\n    if (!citation.properties) {\n        citation.properties = {\n            noteIndex: 0\n        };\n    }\n    if (this.opt.development_extensions.strict_inputs) {\n        if (citationById[citation.citationID]) {\n            CSL.error(\"Citation with previously referenced citationID \" + citation.citationID);\n        }\n        if (citation.properties.noteIndex) {\n            if (lastNotePos > citation.properties.noteIndex) {\n                CSL.debug(\"Note index sequence is not sane for citation \" + citation.citationID);\n            }\n            lastNotePos = citation.properties.noteIndex;\n        }\n    }\n    citationByIndex.push(citation);\n    citationById[citation.citationID] = citation;\n    for (i=0, ilen=citationsPost.length; i<ilen; i += 1) {\n        postCitation = citationsPost[i];\n        if (this.opt.development_extensions.strict_inputs) {\n            if (citationById[postCitation[0]]) {\n                CSL.error(\"Previously referenced citationID \" + postCitation[0] + \" encountered in citationsPost\");\n            }\n            if (postCitation[1]) {\n                if (lastNotePos > postCitation[1]) {\n                    CSL.debug(\"Note index sequence is not sane at postCitation[\" + i + \"]\");\n                }\n                lastNotePos = postCitation[1];\n            }\n        }\n        this.registry.citationreg.citationById[postCitation[0]].properties.noteIndex = postCitation[1];\n        citationByIndex.push(this.registry.citationreg.citationById[postCitation[0]]);\n        citationById[postCitation[0]] = this.registry.citationreg.citationById[postCitation[0]];\n    }\n    this.registry.citationreg.citationByIndex = citationByIndex;\n    this.registry.citationreg.citationById = citationById;\n\n    //\n    // The processor provides three facilities to support\n    // updates following position reevaluation.\n    //\n    // (1) The updateItems() function reports tainted ItemIDs\n    // to state.tmp.taintedItemIDs.\n    //\n    // (2) The processor memos the type of style referencing as\n    // CSL.NONE, CSL.NUMERIC or CSL.POSITION in state.opt.update_mode.\n    //\n    // XXXX: NO LONGER\n    // (3) For citations containing cites with backreference note numbers,\n    // a string image of the rendered citation is held in\n    // citation.properties.backref_citation, and a list of\n    // ItemIDs to be used to update the backreference note numbers\n    // is memoed at citation.properties.backref_index.  When such\n    // citations change position, they can be updated with a\n    // series of simple find and replace operations, without\n    // need for rerendering.\n    //\n\n    //\n    // Position evaluation!\n    //\n    // set positions in reconstituted list, noting taints\n    this.registry.citationreg.citationsByItemId = {};\n    if (this.opt.update_mode === CSL.POSITION) {\n        textCitations = [];\n        noteCitations = [];\n        citationsInNote = {};\n    }\n    var update_items = [];\n    for (var i = 0, ilen = citationByIndex.length; i < ilen; i += 1) {\n        citationByIndex[i].properties.index = i;\n        for (j = 0, jlen = citationByIndex[i].sortedItems.length; j < jlen; j += 1) {\n            item = citationByIndex[i].sortedItems[j];\n            if (!this.registry.citationreg.citationsByItemId[item[1].id]) {\n                this.registry.citationreg.citationsByItemId[item[1].id] = [];\n                update_items.push(\"\" + item[1].id);\n            }\n            if (this.registry.citationreg.citationsByItemId[item[1].id].indexOf(citationByIndex[i]) === -1) {\n                this.registry.citationreg.citationsByItemId[item[1].id].push(citationByIndex[i]);\n            }\n        }\n        if (this.opt.update_mode === CSL.POSITION) {\n            if (citationByIndex[i].properties.noteIndex) {\n                noteCitations.push(citationByIndex[i]);\n            } else {\n                citationByIndex[i].properties.noteIndex = 0;\n                textCitations.push(citationByIndex[i]);\n            }\n        }\n    }\n    //\n    // update bibliography items here\n    //\n    if (flag !== CSL.ASSUME_ALL_ITEMS_REGISTERED) {\n        //SNIP-START\n        if (this.debug) {\n            CSL.debug(\"****** start update items *********\");\n        }\n        //SNIP-END\n        // true signals implicit updateItems (will not rerun sys.retrieveItem())\n        this.updateItems(update_items, null, null, true);\n        //SNIP-START\n        if (this.debug) {\n            CSL.debug(\"****** endo update items *********\");\n        }\n        //SNIP-END\n    }\n\n    if (!this.opt.citation_number_sort && sortedItems && sortedItems.length > 1 && this.citation_sort.tokens.length > 0) {\n        for (var i = 0, ilen = sortedItems.length; i < ilen; i += 1) {\n            sortedItems[i][1].sortkeys = CSL.getSortKeys.call(this, sortedItems[i][0], \"citation_sort\");\n        }\n\n        /* \n         * Grouped sort stuff (start)\n         */\n\n        if (this.opt.grouped_sort &&  !citation.properties.unsorted) {\n            // Insert authorstring as key.\n            for (var i = 0, ilen = sortedItems.length; i < ilen; i += 1) {\n                var sortkeys = sortedItems[i][1].sortkeys;\n                this.tmp.authorstring_request = true;\n                // Run getAmbiguousCite() with the current disambig\n                // parameters, and pick up authorstring from the registry.\n                var mydisambig = this.registry.registry[sortedItems[i][0].id].disambig;\n                \n                this.tmp.authorstring_request = true;\n                CSL.getAmbiguousCite.call(this, sortedItems[i][0], mydisambig);\n                var authorstring = this.registry.authorstrings[sortedItems[i][0].id];\n                this.tmp.authorstring_request = false;\n\n                sortedItems[i][1].sortkeys = [authorstring].concat(sortkeys);\n            }\n\n            sortedItems.sort(this.citation.srt.compareCompositeKeys);\n            // Replace authorstring key in items with same (authorstring) with the \n            // keystring of first normal key. This forces grouped sorts,\n            // as discussed here:\n            // https://github.com/citation-style-language/schema/issues/40\n            var lastauthor = false;\n            var thiskey = false;\n            var thisauthor = false;\n            for (var i = 0, ilen = sortedItems.length; i < ilen; i += 1) {\n                if (sortedItems[i][1].sortkeys[0] !== lastauthor) {\n                    thisauthor = sortedItems[i][1].sortkeys[0];\n                    thiskey =  sortedItems[i][1].sortkeys[1];\n                }\n                sortedItems[i][1].sortkeys[0] = \"\" + thiskey + i;\n                lastauthor = thisauthor;\n            }\n        }\n        /*\n         * Grouped sort stuff (end)\n         */\n\n        if (!citation.properties.unsorted) {\n            sortedItems.sort(this.citation.srt.compareCompositeKeys);\n        }\n    }\n\n    // evaluate parallels\n\n    if (this.opt.parallel.enable) {\n        this.parallel.StartCitation(citation.sortedItems);\n    }\n\n    var citations;\n    if (this.opt.update_mode === CSL.POSITION) {\n        for (var i = 0; i < 2; i += 1) {\n            var first_ref = {};\n            var last_ref = {};\n            var first_container_ref = {};\n            citations = [textCitations, noteCitations][i];\n            for (j = 0, jlen = citations.length; j < jlen; j += 1) {\n                var onecitation = citations[j];\n                if (!citations[j].properties.noteIndex) {\n                    citations[j].properties.noteIndex = 0;\n                }\n                citations[j].properties.noteIndex = parseInt(citations[j].properties.noteIndex, 10);\n                if (j > 0 && onecitation.properties.noteIndex && citations[j - 1].properties.noteIndex > onecitation.properties.noteIndex) {\n                    citationsInNote = {};\n                    first_ref = {};\n                    last_ref = {};\n                    first_container_ref = {};\n                }\n                for (k = 0, klen = onecitation.sortedItems.length; k < klen; k += 1) {\n                    if (onecitation.sortedItems[k][1].parallel && onecitation.sortedItems[k][1].parallel !== \"first\") {\n                        continue;\n                    }\n                    if (!citationsInNote[onecitation.properties.noteIndex]) {\n                        citationsInNote[onecitation.properties.noteIndex] = 1;\n                    } else {\n                        citationsInNote[onecitation.properties.noteIndex] += 1;\n                    }\n                }\n                // Set the following:\n                //\n                // (1) position as required (as per current Zotero)\n                // (2) first-reference-note-number as required (on onecitation item)\n                // (3) near-note as required (on onecitation item, according to\n                //     state.opt[\"near-note-distance\"] parameter)\n                // (4) state.registry.citationreg.citationsByItemId.\n                //\n                // Any state changes caused by unsetting or resetting should\n                // trigger a single entry for the citations in\n                // state.tmp.taintedCitationIDs (can block on presence of\n                // state.registry.citationreg.citationsByItemId).\n                //\n                for (k = 0, klen = citations[j].sortedItems.length; k < klen; k += 1) {\n                    item = citations[j].sortedItems[k];\n                    // Okay ...\n                    // We set up three IDs for use in position evaluation.\n                    // item_id is the real Item.id\n                    // first_id is the legislation_id or Item.id (so statutes backref to first in set, chapters to specific chapter)\n                    // last_id is the legislation_id or container_id (so statute AND chapter distance is from any ref in set)\n                    // (replaces myid)\n                    var item_id = item[0].id;\n                    var first_id = item[0].legislation_id ? item[0].legislation_id : item[0].id;\n                    var last_id = item[0].legislation_id ? item[0].legislation_id : item[0].container_id ? item[0].container_id : item[0].id;\n                    var myxloc = item[1][\"locator-extra\"];\n                    var mylocator = item[1].locator;\n                    var mylabel = item[1].label;\n                    var incitationid;\n                    var incitationxloc;\n                    if (k > 0) {\n                        // incitationid is only reached in the else branch\n                        // following \"undefined\" === typeof first_ref[myid]\n                        // below\n                        if (onecitation.sortedItems[k - 1][0].legislation_id) {\n                            incitationid = onecitation.sortedItems[k - 1][0].legislation_id;\n                        } else {\n                            incitationid = onecitation.sortedItems[k - 1][1].id;\n                            incitationxloc = onecitation.sortedItems[k - 1][1][\"locator-extra\"];\n                            //if (onecitation.sortedItems[k-1][1].parallel === \"last\") {\n                                for (var l=k-2; l>-1; l--) {\n                                    if (onecitation.sortedItems[l][1].parallel === \"first\") {\n                                        incitationid = onecitation.sortedItems[l][1].id;\n                                        incitationxloc = onecitation.sortedItems[l][1][\"locator-extra\"];\n                                    }\n                                }\n                            //}\n                        }\n                    }\n                    // Don't touch item data of other cites when previewing\n                    if (flag === CSL.PREVIEW) {\n                        if (onecitation.citationID != citation.citationID) {\n                            if (\"undefined\" === typeof first_ref[item[1].id]) {\n                                first_ref[first_id] = onecitation.properties.noteIndex;\n                                last_ref[last_id] = onecitation.properties.noteIndex;\n                            } else {\n                                last_ref[last_id] = onecitation.properties.noteIndex;\n                            }\n                            continue;\n                        }\n                    }\n                    var oldvalue = {};\n                    oldvalue.position = item[1].position;\n                    oldvalue[\"first-reference-note-number\"] = item[1][\"first-reference-note-number\"];\n                    oldvalue[\"first-container-reference-note-number\"] = item[1][\"first-container-reference-note-number\"];\n                    oldvalue[\"near-note\"] = item[1][\"near-note\"];\n                    item[1][\"first-reference-note-number\"] = 0;\n                    item[1][\"first-container-reference-note-number\"] = 0;\n                    item[1][\"near-note\"] = false;\n                    if (this.registry.citationreg.citationsByItemId[item_id]) {\n                        if (this.opt.xclass === 'note' && this.opt.has_disambiguate) {\n                            var oldCount = this.registry.registry[item[0].id][\"citation-count\"];\n                            var newCount = this.registry.citationreg.citationsByItemId[item_id].length;\n                            this.registry.registry[item[0].id][\"citation-count\"] = this.registry.citationreg.citationsByItemId[item_id].length;\n                            if (\"number\" === typeof oldCount) {\n                                var oldCountCheck = (oldCount < 2);\n                                var newCountCheck = (newCount < 2);\n                                if (oldCountCheck !== newCountCheck) {\n                                    for (var l=0,llen=this.registry.citationreg.citationsByItemId[item_id].length;l<llen;l++) {\n                                        rerunAkeys[this.registry.registry[item[0].id].ambig] = true;\n                                        this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[item_id][l].citationID] = true;\n                                    }\n                                }\n                            } else {\n                                for (var l=0,llen=this.registry.citationreg.citationsByItemId[item_id].length;l<llen;l++) {\n                                    rerunAkeys[this.registry.registry[item[0].id].ambig] = true;\n                                    this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[item_id][l].citationID] = true;\n                                }\n                            }\n                        }\n                    }\n                    var oldlastid;\n                    var oldlastxloc;\n                    \n                    // Okay, chill.\n                    // The first test needs to be for presence of last_ref[last_id]. Everything\n                    // after in subsequent evaluation depends on that.\n\n                    // HOWEVER, despite starting with this test, we need to catch every member\n                    // of the set, and set its first-container-reference-note-number to point at the\n                    // first.\n\n                    // ALSO, despite starting with this test, we need to set first-reference-note-number\n                    // on every item.\n                    \n                    // So ... we run an independent test on first_ref[first_id]], and let this ride.\n                    \n                    if (\"undefined\" === typeof last_ref[last_id] && onecitation.properties.mode !== \"author-only\") {\n                        first_ref[first_id] = onecitation.properties.noteIndex;\n                        last_ref[last_id] = onecitation.properties.noteIndex;\n                        first_container_ref[last_id] = onecitation.properties.noteIndex;\n                        item[1].position = CSL.POSITION_FIRST;\n                    } else {\n                        //\n                        // backward-looking position evaluation happens here.\n                        //\n                        //\n                        //\n                        var ibidme = false;\n                        var suprame = false;\n                        var prevCitation = null;\n                        if (j > 0) {\n                            var prevCitation = citations[j-1];\n                        }\n                        var thisCitation = citations[j];\n                        // XXX Ugly, but This is used in the second else-if branch condition below.\n                        if (j > 0) {\n                            var old_last_id_offset = 1;\n                            if (prevCitation.properties.mode === \"author-only\" && j > 1) {\n                                old_last_id_offset = 2;\n                            }\n                            var adjusted_offset = (j - old_last_id_offset);\n                            if (citations[adjusted_offset].sortedItems.length) {\n                                oldlastid =  citations[adjusted_offset].sortedItems.slice(-1)[0][1].id;\n                                oldlastxloc =  citations[j - old_last_id_offset].sortedItems.slice(-1)[0][1][\"locator-extra\"];\n                            }\n                            if (prevCitation.sortedItems.length) {\n                                if (prevCitation.sortedItems[0].slice(-1)[0].legislation_id) {\n                                    oldlastid = prevCitation.sortedItems[0].slice(-1)[0].legislation_id;\n                                }\n                            }\n                        }\n                        if (j > 0 && k === 0 && prevCitation.properties.noteIndex !== thisCitation.properties.noteIndex) {\n                            // Case 1: source in previous onecitation\n                            // (1) Threshold conditions\n                            //     (a) there must be a previous onecitation with one item\n                            //     (b) this item must be the first in this onecitation\n                            //     (c) the previous onecitation must contain a reference\n                            //         to the same item ...\n                            //     (d) the note numbers must be the same or consecutive.\n                            // (this has some jiggery-pokery in it for parallels)\n                            var useme = false;\n                            // XXX Can oldid be equated with oldlastid, I wonder ...\n                            var oldid = prevCitation.sortedItems[0][0].id;\n                            if (prevCitation.sortedItems[0][0].legislation_id) {\n                                oldid = prevCitation.sortedItems[0][0].legislation_id;\n                            }\n                            if ((oldid  == first_id && prevCitation.properties.noteIndex >= (thisCitation.properties.noteIndex - 1))) {\n                                var prevxloc = prevCitation.sortedItems[0][1][\"locator-extra\"];\n                                var thisxloc = thisCitation.sortedItems[0][1][\"locator-extra\"];\n                                if ((citationsInNote[prevCitation.properties.noteIndex] === 1 || prevCitation.properties.noteIndex === 0) && prevxloc === thisxloc) {\n                                    useme = true;\n                                }\n                            }\n                            if (useme) {\n                                ibidme = true;\n                            } else {\n                                suprame = true;\n                            }\n                        } else if (k > 0 && incitationid == first_id && incitationxloc == myxloc) {\n                            // Case 2: immediately preceding source in this onecitation\n                            // (1) Threshold conditions\n                            //     (a) there must be an imediately preceding reference to  the\n                            //         same item in this onecitation; and\n                            ibidme = true;\n                        } else if (k === 0 && j > 0 && prevCitation.properties.noteIndex == thisCitation.properties.noteIndex\n                                   && prevCitation.sortedItems.length \n                                   && oldlastid == first_id && oldlastxloc == myxloc) {\n                            // ... in case there are separate citations in the same note ...\n                            // Case 2 [take 2]: immediately preceding source in this onecitation\n                            // (1) Threshold conditions\n                            //     (a) there must be an imediately preceding reference to  the\n                            //         same item in this onecitation; and\n                            ibidme = true;\n                        } else {\n                            // everything else is definitely subsequent\n                            suprame = true;\n                        }\n                        // conditions\n                        var prev, prev_locator, prev_label, curr_locator, curr_label;\n                        if (ibidme) {\n                            if (k > 0) {\n                                prev = onecitation.sortedItems[(k - 1)][1];\n                            } else {\n                                prev = citations[(j - 1)].sortedItems[0][1];\n                            }\n                            if (prev.locator) {\n                                if (prev.label) {\n                                    prev_label = prev.label;\n                                } else {\n                                    prev_label = \"\";\n                                }\n                                prev_locator = \"\" + prev.locator + prev_label;\n                            } else {\n                                prev_locator = prev.locator;\n                            }\n                            if (mylocator) {\n                                if (mylabel) {\n                                    curr_label = mylabel;\n                                } else {\n                                    curr_label = \"\";\n                                }\n                                curr_locator = \"\" + mylocator + curr_label;\n                            } else {\n                                curr_locator = mylocator;\n                            }\n                        }\n                        // triage\n                        if (ibidme && prev_locator && !curr_locator) {\n                            ibidme = false;\n                            suprame = true;\n\n                        }\n                        if (ibidme) {\n                            if (!prev_locator && curr_locator) {\n                                //     (a) if the previous onecitation had no locator\n                                //         and this onecitation has one, use ibid+pages\n                                item[1].position = CSL.POSITION_IBID_WITH_LOCATOR;\n                            } else if (!prev_locator && !curr_locator) {\n                                //     (b) if the previous onecitation had no locator\n                                //         and this onecitation also has none, use ibid\n                                item[1].position = CSL.POSITION_IBID;\n                                //print(\"setting ibid in cmd_cite()\");\n                            } else if (prev_locator && curr_locator === prev_locator) {\n                                //     (c) if the previous onecitation had a locator\n                                //         (page number, etc.) and this onecitation has\n                                //         a locator that is identical, use ibid\n\n                                item[1].position = CSL.POSITION_IBID;\n                                //print(\"setting ibid in cmd_cite() [2]\");\n                            } else if (prev_locator && curr_locator && curr_locator !== prev_locator) {\n                                //     (d) if the previous onecitation had a locator,\n                                //         and this onecitation has one that differs,\n                                //         use ibid+pages\n                                item[1].position = CSL.POSITION_IBID_WITH_LOCATOR;\n                            } else {\n                                //     (e) if the previous onecitation had a locator\n                                //         and this onecitation has none, use subsequent\n                                //\n                                //     ... and everything else would be subsequent also\n                                ibidme = false; // just to be clear\n                                suprame = true;\n                            }\n                        }\n                        if (suprame) {\n                            item[1].position = CSL.POSITION_CONTAINER_SUBSEQUENT;\n                            if (\"undefined\" === typeof first_ref[first_id]) {\n                                first_ref[first_id] = onecitation.properties.noteIndex;\n                            } else {\n                                item[1].position = CSL.POSITION_SUBSEQUENT;\n                            }\n                        }\n                        if (suprame || ibidme) {\n                            if (onecitation.properties.mode === \"author-only\") {\n                                item[1].position = CSL.POSITION_FIRST;\n                            }\n                            if (first_container_ref[last_id] != onecitation.properties.noteIndex) {\n                                item[1]['first-container-reference-note-number'] = first_container_ref[last_id];\n                                if (this.registry.registry[item[0].id]) {\n                                    this.registry.registry[item[0].id]['first-container-reference-note-number'] = first_container_ref[last_id];\n                                }\n                            }\n                            if (first_ref[first_id] != onecitation.properties.noteIndex) {\n                                item[1][\"first-reference-note-number\"] = first_ref[first_id];\n                                if (this.registry.registry[item[0].id]) {\n                                    // This is either the earliest recorded number, or the number of the current citation, whichever is smaller.\n                                    /*\n                                    var oldFirst = this.registry.citationreg.citationsByItemId[item_id][0].properties.noteIndex;\n                                    var newFirst = onecitation.properties.noteIndex;\n                                    this.registry.registry[item[0].id]['first-reference-note-number'] = newFirst < oldFirst ? newFirst: oldFirst;\n                                     */\n                                    // Try this instead?\n                                    this.registry.registry[item[0].id]['first-reference-note-number'] = first_ref[first_id];\n                                }\n                            }\n                        }\n                    }\n                    if (onecitation.properties.noteIndex) {\n                        var note_distance = parseInt(onecitation.properties.noteIndex, 10) - parseInt(last_ref[last_id], 10);\n                        if (item[1].position !== CSL.POSITION_FIRST \n                            && note_distance <= this.citation.opt[\"near-note-distance\"]) {\n                            item[1][\"near-note\"] = true;\n                        }\n                        last_ref[last_id] = onecitation.properties.noteIndex;\n                    } else if (item[1].position !== CSL.POSITION_FIRST) {\n                        item[1][\"near-note\"] = true;\n                    }\n                    if (onecitation.citationID != citation.citationID) {\n                        for (n = 0, nlen = CSL.POSITION_TEST_VARS.length; n < nlen; n += 1) {\n                            var param = CSL.POSITION_TEST_VARS[n];\n                            if (item[1][param] !== oldvalue[param]) {\n                                if (this.registry.registry[item[0].id]) {\n                                    if (param === 'first-reference-note-number') {\n                                        rerunAkeys[this.registry.registry[item[0].id].ambig] = true;\n                                        this.tmp.taintedItemIDs[item[0].id] = true;\n                                    }\n                                }\n                                this.tmp.taintedCitationIDs[onecitation.citationID] = true;\n                            }\n                        }\n                    }\n                    if (this.sys.variableWrapper) {\n                        item[1].index = onecitation.properties.index;\n                        item[1].noteIndex = onecitation.properties.noteIndex;\n                    }\n                }\n            }\n        }\n    }\n    if (this.opt.citation_number_sort && sortedItems && sortedItems.length > 1 && this.citation_sort.tokens.length > 0) {\n        if (!citation.properties.unsorted) {\n            for (var i = 0, ilen = sortedItems.length; i < ilen; i += 1) {\n                sortedItems[i][1].sortkeys = CSL.getSortKeys.call(this, sortedItems[i][0], \"citation_sort\");\n            }\n            sortedItems.sort(this.citation.srt.compareCompositeKeys);\n        }\n    }\n    for (var key in this.tmp.taintedItemIDs) {\n        if (this.tmp.taintedItemIDs.hasOwnProperty(key)) {\n            citations = this.registry.citationreg.citationsByItemId[key];\n            // Current citation may be tainted but will not exist\n            // during previewing.\n            if (citations) {\n                for (var i = 0, ilen = citations.length; i < ilen; i += 1) {\n                    this.tmp.taintedCitationIDs[citations[i].citationID] = true;\n                }\n            }\n        }\n    }\n\n    var ret = [];\n    if (flag === CSL.PREVIEW) {\n        // If previewing, return only a rendered string\n        //SNIP-START\n        if (this.debug) {\n            CSL.debug(\"****** start run processor *********\");\n        }\n        //SNIP-END\n        try {\n            ret = this.process_CitationCluster.call(this, citation.sortedItems, citation);\n        } catch (e) {\n            CSL.error(\"Error running CSL processor for preview: \"+e);\n        }\n            \n        //SNIP-START\n        if (this.debug) {\n            CSL.debug(\"****** end run processor *********\");\n            CSL.debug(\"****** start state restore *********\");\n        }\n        //SNIP-END\n        // Wind out anything related to new items added for the preview.\n        // This means (1) names, (2) disambig state for affected items,\n        // (3) keys registered in the ambigs pool arrays, and (4) registry\n        // items.\n        //\n\n        // restore sliced citations\n        this.registry.citationreg.citationByIndex = oldCitationList;\n        this.registry.citationreg.citationById = {};\n        for (var i = 0, ilen = oldCitationList.length; i < ilen; i += 1) {\n            this.registry.citationreg.citationById[oldCitationList[i].citationID] = oldCitationList[i];\n        }\n\n        //SNIP-START\n        if (this.debug) {\n            CSL.debug(\"****** start final update *********\");\n        }\n        //SNIP-END\n        var oldItemIds = [];\n        for (var i = 0, ilen = oldItemList.length; i < ilen; i += 1) {\n            oldItemIds.push(\"\" + oldItemList[i].id);\n        }\n        this.updateItems(oldItemIds, null, null, true);\n        //SNIP-START\n        if (this.debug) {\n            CSL.debug(\"****** end final update *********\");\n        }\n        //SNIP-END\n        // Roll back disambig states\n        for (var key in oldAmbigs) {\n            if (oldAmbigs.hasOwnProperty(key)) {\n                this.registry.registry[key].disambig = oldAmbigs[key];\n            }\n        }\n        //SNIP-START\n        if (this.debug) {\n            CSL.debug(\"****** end state restore *********\");\n        }\n        //SNIP-END\n    } else {\n        // Rerun cites that have moved across citations or had a change\n        // in their number of subsequent references, so that disambiguate\n        // and subsequent-reference-count conditions are applied\n        // correctly in output.\n        for (var rerunAkey in rerunAkeys) {\n            this.disambiguate.run(rerunAkey, citation);\n        }\n        // Run taints only if not previewing\n        //\n        // Push taints to the return object\n        //\n        var obj;\n        for (var key in this.tmp.taintedCitationIDs) {\n            if (key == citation.citationID) {\n                continue;\n            }\n            var mycitation = this.registry.citationreg.citationById[key];\n            if (!mycitation.properties.unsorted) {\n                for (var i = 0, ilen = mycitation.sortedItems.length; i < ilen; i += 1) {\n                    mycitation.sortedItems[i][1].sortkeys = CSL.getSortKeys.call(this, mycitation.sortedItems[i][0], \"citation_sort\");\n                }\n                mycitation.sortedItems.sort(this.citation.srt.compareCompositeKeys);\n            }\n            // For error reporting\n            this.tmp.citation_pos = mycitation.properties.index;\n            this.tmp.citation_note_index = mycitation.properties.noteIndex;\n            this.tmp.citation_id = \"\" + mycitation.citationID;\n            obj = [];\n            obj.push(mycitation.properties.index);\n            obj.push(this.process_CitationCluster.call(this, mycitation.sortedItems, mycitation));\n            obj.push(mycitation.citationID);\n            ret.push(obj);\n        }\n        this.tmp.taintedItemIDs = {};\n        this.tmp.taintedCitationIDs = {};\n\n        // For error reporting again\n        this.tmp.citation_pos = citation.properties.index;\n        this.tmp.citation_note_index = citation.properties.noteIndex;\n        this.tmp.citation_id = \"\" + citation.citationID;\n\n        obj = [];\n        obj.push(citationsPre.length);\n        obj.push(this.process_CitationCluster.call(this, sortedItems, citation));\n        obj.push(citation.citationID);\n        ret.push(obj);\n        //\n        // note for posterity: Rhino and Spidermonkey produce different\n        // sort results for items with matching keys.  That discrepancy\n        // turned up a subtle bug in the parallel detection code, trapped\n        // at line 266, above, and in line 94 of util_parallel.js.\n        //\n        ret.sort(function (a, b) {\n            if (a[0] > b[0]) {\n                return 1;\n            } else if (a[0] < b[0]) {\n                return -1;\n            } else {\n                return 0;\n            }\n        });\n        //\n        // In normal rendering, return is a list of two-part arrays, with the first element\n        // a citation index number, and the second the text to be inserted.\n        //\n    }\n    this.registry.return_data.citation_errors = this.tmp.citation_errors.slice();\n    return [this.registry.return_data, ret];\n};\n\nCSL.Engine.prototype.process_CitationCluster = function (sortedItems, citation) {\n    var str = \"\";\n    if (citation && citation.properties && citation.properties.mode === \"composite\") {\n        citation.properties.mode = \"author-only\";\n        var firstChunk = CSL.getCitationCluster.call(this, sortedItems, citation);\n        citation.properties.mode = \"suppress-author\";\n        var secondChunk = \"\";\n        if (citation.properties.infix) {\n            this.output.append(citation.properties.infix);\n            secondChunk = this.output.string(this, this.output.queue);\n            // Had no idea this could return a single-element array! Go figure.\n            if (\"object\" === typeof secondChunk) {\n                secondChunk = secondChunk.join(\"\");\n            }\n        }\n        var thirdChunk = CSL.getCitationCluster.call(this, sortedItems, citation);\n        citation.properties.mode = \"composite\";\n        if (firstChunk && secondChunk && CSL.SWAPPING_PUNCTUATION.concat([\"\\u2019\", \"\\'\"]).indexOf(secondChunk[0]) > -1) {\n            firstChunk += secondChunk;\n            secondChunk = false;\n        }\n        str = [firstChunk, secondChunk, thirdChunk].filter(function(obj) {\n            return obj;\n        }).join(\" \");\n    } else {\n        str = CSL.getCitationCluster.call(this, sortedItems, citation);\n    }\n    return str;\n};\n\nCSL.Engine.prototype.makeCitationCluster = function (rawList) {\n    var inputList, newitem, str, pos, len, item, Item;\n    inputList = [];\n    len = rawList.length;\n    for (pos = 0; pos < len; pos += 1) {\n        item = {};\n        for (var key in rawList[pos]) {\n            item[key] = rawList[pos][key];\n        }\n        Item = this.retrieveItem(\"\" + item.id);\n        // Code block is copied from processCitationCluster() above\n        if (this.opt.development_extensions.locator_label_parse) {\n            if (item.locator && [\"bill\",\"gazette\",\"legislation\",\"regulation\",\"treaty\"].indexOf(Item.type) === -1 && (!item.label || item.label === 'page')) {\n                var m = CSL.LOCATOR_LABELS_REGEXP.exec(item.locator);\n                if (m) {\n                    var tryLabel = CSL.LOCATOR_LABELS_MAP[m[2]];\n                    if (this.getTerm(tryLabel)) {\n                        item.label = tryLabel;\n                        item.locator = m[3];\n                    }\n                }\n            }\n        }\n        if (item.locator) {\n            item.locator = (\"\" + item.locator).replace(/\\s+$/, '');\n        }\n        newitem = [Item, item];\n        inputList.push(newitem);\n    }\n    if (this.opt.development_extensions.consolidate_legal_items) {\n        this.remapSectionVariable(inputList);\n    }\n    if (inputList && inputList.length > 1 && this.citation_sort.tokens.length > 0) {\n        len = inputList.length;\n        for (pos = 0; pos < len; pos += 1) {\n            inputList[pos][1].sortkeys = CSL.getSortKeys.call(this, inputList[pos][0], \"citation_sort\");\n        }\n        inputList.sort(this.citation.srt.compareCompositeKeys);\n    }\n    this.tmp.citation_errors = [];\n    var str = CSL.getCitationCluster.call(this, inputList);\n    return str;\n};\n\n\n/**\n * Get the undisambiguated version of a cite, without decorations\n * <p>This is used internally by the Registry.</p>\n *\n * [object] CSL Item\n * [object] disambiguation parameters\n * [boolean] If true, include first-reference-note-number value in cite\n */\nCSL.getAmbiguousCite = function (Item, disambig, visualForm, item) {\n    var ret;\n    var flags = this.tmp.group_context.tip;\n    var oldTermSiblingLayer = {\n        term_intended: flags.term_intended,\n        variable_attempt: flags.variable_attempt,\n        variable_success: flags.variable_success,\n        output_tip: flags.output_tip,\n        label_form: flags.label_form,\n        non_parallel: flags.non_parallel,\n        parallel_last: flags.parallel_last,\n        parallel_first: flags.parallel_first,\n        parallel_last_override: flags.parallel_last_override,\n        parallel_delimiter_override: flags.parallel_delimiter_override,\n        parallel_delimiter_override_on_suppress: flags.parallel_delimiter_override_on_suppress,\n        condition: flags.condition,\n        force_suppress: flags.force_suppress,\n        done_vars: flags.done_vars.slice()\n    };\n    if (disambig) {\n        this.tmp.disambig_request = disambig;\n    } else {\n        this.tmp.disambig_request = false;\n    }\n    var itemSupp = {\n        position: CSL.POSITION_SUBSEQUENT,\n        \"near-note\": true\n    };\n\n    if (item) {\n        itemSupp.locator = item.locator;\n        itemSupp.label = item.label;\n    }\n\n    if (this.registry.registry[Item.id] \n        && this.registry.citationreg.citationsByItemId\n        && this.registry.citationreg.citationsByItemId[Item.id]\n        && this.registry.citationreg.citationsByItemId[Item.id].length \n        && visualForm) {\n        if (this.citation.opt[\"givenname-disambiguation-rule\"] === \"by-cite\") {\n            itemSupp['first-reference-note-number'] = this.registry.registry[Item.id]['first-reference-note-number'];\n        }\n    }\n    this.tmp.area = \"citation\";\n    this.tmp.root = \"citation\";\n    var origSuppressDecorations = this.tmp.suppress_decorations;\n    this.tmp.suppress_decorations = true;\n    this.tmp.just_looking = true;\n\n    CSL.getCite.call(this, Item, itemSupp, null, false);\n    // !!!\n    for (var i=0,ilen=this.output.queue.length;i<ilen;i+=1) {\n        CSL.Output.Queue.purgeEmptyBlobs(this.output.queue[i]);\n    }\n    if (this.opt.development_extensions.clean_up_csl_flaws) {\n        for (var j=0,jlen=this.output.queue.length;j<jlen;j+=1) {\n            this.output.adjust.upward(this.output.queue[j]);\n            this.output.adjust.leftward(this.output.queue[j]);\n            this.output.adjust.downward(this.output.queue[j]);\n            this.output.adjust.fix(this.output.queue[j]);\n        }\n    }\n    var ret = this.output.string(this, this.output.queue);\n    this.tmp.just_looking = false;\n    this.tmp.suppress_decorations = origSuppressDecorations;\n    // Cache the result.\n    this.tmp.group_context.replace(oldTermSiblingLayer);\n    return ret;\n};\n\n/**\n * Return delimiter for use in join\n * <p>Splice evaluation is done during cite\n * rendering, and this method returns the\n * result.  Evaluation requires three items\n * of information from the preceding cite, if\n * one is present: the names used; the years\n * used; and the suffix appended to the\n * citation.  These details are copied into\n * the state object before processing begins,\n * and are cleared by the processor on\n * completion of the run.</p>\n */\n\nCSL.getSpliceDelimiter = function (last_locator, last_collapsed, pos) {\n    //print(pos +  \" after-collapse-delimiter=\"+this.citation.opt[\"after-collapse-delimiter\"] + \"\\n  cite_group_delimiter=\" + this.tmp.use_cite_group_delimiter + \"\\n  last_collapsed=\" +last_collapsed + \"\\n  have_collapsed=\" +this.tmp.have_collapsed + \"\\n  last_locator=\" + last_locator)\n    if (undefined !== this.citation.opt[\"after-collapse-delimiter\"]) {\n        if (last_locator) {\n            this.tmp.splice_delimiter = this.citation.opt[\"after-collapse-delimiter\"];\n        } else if (last_collapsed && !this.tmp.have_collapsed) {\n            this.tmp.splice_delimiter = this.citation.opt[\"after-collapse-delimiter\"];\n        } else if (!last_collapsed && !this.tmp.have_collapsed && this.citation.opt.collapse !== \"year-suffix\") {\n            this.tmp.splice_delimiter = this.citation.opt[\"after-collapse-delimiter\"];\n        } else {\n            this.tmp.splice_delimiter = this.citation.opt.layout_delimiter;\n        }\n    } else if (this.tmp.use_cite_group_delimiter) {\n        this.tmp.splice_delimiter = this.citation.opt.cite_group_delimiter;\n    } else {\n        if (this.tmp.have_collapsed && this.opt.xclass === \"in-text\" && this.opt.update_mode !== CSL.NUMERIC) {\n            this.tmp.splice_delimiter = \", \";\n        } else if (this.tmp.cite_locales[pos - 1]) {\n            //\n            // Must have a value to take effect.  Use zero width space to force empty delimiter.\n            var alt_affixes = this.tmp.cite_affixes[this.tmp.area][this.tmp.cite_locales[pos - 1]];\n            if (alt_affixes && alt_affixes.delimiter) {\n                this.tmp.splice_delimiter = alt_affixes.delimiter;\n            }\n        } else if (!this.tmp.splice_delimiter) {\n            // This happens when no delimiter is set on cs:layout under cs:citation\n            this.tmp.splice_delimiter = \"\";\n        }\n    }\n\n/*\n    if (last_locator && \"string\" === typeof this.citation.opt[\"after-collapse-delimiter\"]) {\n        this.tmp.splice_delimiter = this.citation.opt[\"after-collapse-delimiter\"];\n    } else if (last_collapsed && !this.tmp.have_collapsed && \"string\" === typeof this.citation.opt[\"after-collapse-delimiter\"]) {\n        this.tmp.splice_delimiter = this.citation.opt[\"after-collapse-delimiter\"];\n    } else if (!last_collapsed && !this.tmp.have_collapsed && \"string\" === typeof this.citation.opt[\"after-collapse-delimiter\"] && !this.citation.opt.collapse === \"year-suffix\") {\n        this.tmp.splice_delimiter = this.citation.opt[\"after-collapse-delimiter\"];\n    } else if (this.tmp.use_cite_group_delimiter) {\n        this.tmp.splice_delimiter = this.citation.opt.cite_group_delimiter;\n    } else if (this.tmp.have_collapsed && this.opt.xclass === \"in-text\" && this.opt.update_mode !== CSL.NUMERIC) {\n        this.tmp.splice_delimiter = \", \";\n    } else if (this.tmp.cite_locales[pos - 1]) {\n        //\n        // Must have a value to take effect.  Use zero width space to force empty delimiter.\n        var alt_affixes = this.tmp.cite_affixes[this.tmp.area][this.tmp.cite_locales[pos - 1]];\n        if (alt_affixes && alt_affixes.delimiter) {\n            this.tmp.splice_delimiter = alt_affixes.delimiter;\n        }\n    } else if (!this.tmp.splice_delimiter) {\n        // This happens when no delimiter is set on cs:layout under cs:citation\n        this.tmp.splice_delimiter = \"\";\n    }\n*/\n    // Paranoia\n    //if (!this.tmp.splice_delimiter) {\n    //    this.tmp.splice_delimiter = \"\";\n    //}\n    return this.tmp.splice_delimiter;\n};\n\n/*\n * Compose individual cites into a single string, with\n * flexible inter-cite splicing.\n */\nCSL.getCitationCluster = function (inputList, citation) {\n    var result, objects, myparams, len, pos, item, last_collapsed, params, empties, composite, compie, myblobs, Item, llen, ppos, obj, preceding_item, txt_esc, error_object, citationID, authorOnly, suppressAuthor;\n    var citation_prefix = \"\";\n    this.output.checkNestedBrace = new CSL.checkNestedBrace(this);\n    if (citation) {\n        citationID = citation.citationID;\n        authorOnly = citation.properties.mode === \"author-only\" ? !!citation.properties.mode : false;\n        if (this.opt.xclass !== \"note\") {\n            suppressAuthor = citation.properties.mode === \"suppress-author\" ? !!citation.properties.mode : false;\n        }\n        if (citation.properties.prefix) {\n            citation_prefix = CSL.checkPrefixSpaceAppend(this, citation.properties.prefix);\n        }\n    }\n    inputList = inputList ? inputList : [];\n    this.tmp.last_primary_names_string = false;\n    txt_esc = CSL.getSafeEscape(this);\n    this.tmp.area = \"citation\";\n    this.tmp.root = \"citation\";\n    result = \"\";\n    objects = [];\n    this.tmp.last_suffix_used = \"\";\n    this.tmp.last_names_used = [];\n    this.tmp.last_years_used = [];\n    this.tmp.backref_index = [];\n    this.tmp.cite_locales = [];\n    if (!this.tmp.just_looking) {\n        this.tmp.abbrev_trimmer = {\n            QUASHES: {}\n        };\n    }\n\n    var use_layout_prefix = this.output.checkNestedBrace.update(this.citation.opt.layout_prefix + citation_prefix);\n    //var use_layout_prefix = this.citation.opt.layout_prefix;\n\n    var suppressTrailingPunctuation = false;\n    if (this.citation.opt.suppressTrailingPunctuation) {\n        suppressTrailingPunctuation = true;\n    }\n    if (citationID) {\n        //this.registry.citationreg.citationById[citationID].properties.backref_index = false;\n        //this.registry.citationreg.citationById[citationID].properties.backref_citation = false;\n        if (this.registry.citationreg.citationById[citationID].properties[\"suppress-trailing-punctuation\"]) {\n            suppressTrailingPunctuation = true;\n        }\n    }\n\n    // Adjust locator positions if that looks like a sensible thing to do.\n    if (this.opt.xclass === \"note\") {\n        var parasets = [];\n        var lastTitle = false;\n        var lastPosition = false;\n        var lastID = false;\n        var lst = [];\n        for (var i=0, ilen = inputList.length; i < ilen; i += 1) {\n            var type = inputList[i][0].type;\n            var title = inputList[i][0].title;\n            var position = inputList[i][1].position;\n            var id = inputList[i][0].id;\n            if (title && type === \"legal_case\" && id !== lastID && position) {\n                // Start a fresh sublist if the item title does not match the last one\n                if (title !== lastTitle || parasets.length === 0) {\n                    lst = [];\n                    parasets.push(lst);\n                }\n                lst.push(inputList[i][1]);\n            }\n            lastTitle = title;\n            lastPosition = position;\n            lastID = id;\n        }\n        // We now have a list of sublists, each w/matching titles\n        for (i=0, ilen=parasets.length; i < ilen; i += 1) {\n            lst = parasets[i];\n            if (lst.length < 2) {\n                continue;\n            }\n            // Get the locator in last position, but only if it's the only one in the set.\n            var locatorInLastPosition = lst.slice(-1)[0].locator;\n            if (locatorInLastPosition) {\n                for (var j=0, jlen=lst.length - 1; j < jlen; j += 1) {\n                    if (lst[j].locator) {\n                        locatorInLastPosition = false;\n                    }\n                }\n            }\n            // move the locator here, if it's called for.\n            if (locatorInLastPosition) {\n                lst[0].locator = locatorInLastPosition;\n                delete lst.slice(-1)[0].locator;\n                lst[0].label = lst.slice(-1)[0].label;\n                if (lst.slice(-1)[0].label) {\n                    delete lst.slice(-1)[0].label;\n                }\n            }\n       }\n    }\n    myparams = [];\n    len = inputList.length;\n    if (inputList[0] && inputList[0][1]) {\n        if (authorOnly) {\n            delete inputList[0][1][\"suppress-author\"];\n            inputList[0][1][\"author-only\"] = true;\n        } else if (suppressAuthor) {\n            delete inputList[0][1][\"author-only\"];\n            inputList[0][1][\"suppress-author\"] = true;\n        }\n    }\n    if (this.opt.parallel.enable) {\n        this.parallel.StartCitation(inputList);\n    }\n    for (pos = 0; pos < len; pos += 1) {\n\n        // Also for parallels only\n        this.tmp.cite_index = pos;\n\n        Item = inputList[pos][0];\n        item = inputList[pos][1];\n        item = CSL.parseLocator.call(this, item);\n        last_collapsed = this.tmp.have_collapsed;\n        var last_locator = false;\n        if (pos > 0 && inputList[pos-1][1]) {\n            last_locator = !!inputList[pos-1][1].locator;\n        }\n        params = {};\n        \n        // Reset shadow_numbers here, suppress reset in getCite()\n        this.tmp.shadow_numbers = {};\n        if (!this.tmp.just_looking && this.opt.hasPlaceholderTerm) {\n            var output = this.output;\n            this.output = new CSL.Output.Queue(this);\n            this.output.adjust = new CSL.Output.Queue.adjust();\n            CSL.getAmbiguousCite.call(this, Item, null, false, item);\n            this.output = output;\n        }\n\n        this.tmp.in_cite_predecessor = false;\n        // true is to block reset of shadow numbers\n        \n        \n        if (pos > 0) {\n            CSL.getCite.call(this, Item, item, \"\" + inputList[(pos - 1)][0].id, true);\n        } else {\n            this.tmp.term_predecessor = false;\n            CSL.getCite.call(this, Item, item, null, true);\n        }\n\n        // Make a note of any errors\n        if (!this.tmp.cite_renders_content) {\n            error_object = {\n                citationID: \"\" + this.tmp.citation_id,\n                index: this.tmp.citation_pos,\n                noteIndex: this.tmp.citation_note_index,\n                itemID: \"\" + Item.id,\n                citationItems_pos: pos,\n                error_code: CSL.ERROR_NO_RENDERED_FORM\n            };\n            this.tmp.citation_errors.push(error_object);\n        }\n        params.splice_delimiter = CSL.getSpliceDelimiter.call(this, last_locator, last_collapsed, pos);\n        // XXX This appears to be superfluous.\n        if (item && item[\"author-only\"]) {\n            this.tmp.suppress_decorations = true;\n        }\n\n        if (pos > 0) {\n            preceding_item = inputList[pos - 1][1];\n\n            // XXX OR if preceding suffix is empty, and the current prefix begins with a full stop.\n\n            var precedingEndsInPeriodOrComma = preceding_item.suffix && [\";\", \".\", \",\"].indexOf(preceding_item.suffix.slice(-1)) > -1;\n            var currentStartsWithPeriodOrComma = !preceding_item.suffix && item.prefix && [\";\", \".\", \",\"].indexOf(item.prefix.slice(0, 1)) > -1;\n            if (precedingEndsInPeriodOrComma || currentStartsWithPeriodOrComma) {\n                var spaceidx = params.splice_delimiter.indexOf(\" \");\n                if (spaceidx > -1 && !currentStartsWithPeriodOrComma) {\n                    params.splice_delimiter = params.splice_delimiter.slice(spaceidx);\n                } else {\n                    params.splice_delimiter = \"\";\n                }\n            }\n        }\n        params.suppress_decorations = this.tmp.suppress_decorations;\n        params.have_collapsed = this.tmp.have_collapsed;\n        //\n        // XXXXX: capture parameters to an array, which\n        // will be of the same length as this.output.queue,\n        // corresponding to each element.\n        //\n        myparams.push(params);\n        if (item[\"author-only\"]) {\n            break;\n        }\n    }\n    //\n    // output.queue is a simple array.  do a slice\n    // of it to get each cite item, setting params from\n    // the array that was built in the preceding loop.\n    //\n    empties = 0;\n    myblobs = this.output.queue.slice();\n\n    var citation_suffix = \"\";\n    if (citation) {\n        citation_suffix = CSL.checkSuffixSpacePrepend(this, citation.properties.suffix);\n    }\n    var suffix = this.citation.opt.layout_suffix;\n    var last_locale = this.tmp.cite_locales[this.tmp.cite_locales.length - 1];\n    //\n    // Must have a value to take effect.  Use zero width space to force empty suffix.\n    if (last_locale && this.tmp.cite_affixes[this.tmp.area][last_locale] && this.tmp.cite_affixes[this.tmp.area][last_locale].suffix) {\n        suffix = this.tmp.cite_affixes[this.tmp.area][last_locale].suffix;\n    }\n    if (CSL.TERMINAL_PUNCTUATION.slice(0, -1).indexOf(suffix.slice(0, 1)) > -1) {\n        suffix = suffix.slice(0, 1);\n    }\n    //print(\"=== FROM CITE ===\");\n    suffix = this.output.checkNestedBrace.update(citation_suffix + suffix);\n\n\n    for (var i=0,ilen=this.output.queue.length;i<ilen;i+=1) {\n        CSL.Output.Queue.purgeEmptyBlobs(this.output.queue[i]);\n    }\n    if (!this.tmp.suppress_decorations && this.output.queue.length) {\n        if (!(this.opt.development_extensions.apply_citation_wrapper\n              && this.sys.wrapCitationEntry\n               && !this.tmp.just_looking\n              && this.tmp.area === \"citation\")) { \n\n            if (!suppressTrailingPunctuation) {\n                this.output.queue[this.output.queue.length - 1].strings.suffix = suffix;\n            }\n            this.output.queue[0].strings.prefix = use_layout_prefix;\n        }\n    }\n    if (this.opt.development_extensions.clean_up_csl_flaws) {\n        for (var j=0,jlen=this.output.queue.length;j<jlen;j+=1) {\n            //print(\"OUTPUT[5]: \"+JSON.stringify(this.output.queue[j],['strings','prefix','suffix','delimiter','blobs','decorations'],2))\n            this.output.adjust.upward(this.output.queue[j]);\n            //print(\"OUTPUT[4]: \"+JSON.stringify(this.output.queue[j],['strings','prefix','suffix','delimiter','blobs','decorations'],2))\n            this.output.adjust.leftward(this.output.queue[j]);\n            //print(\"OUTPUT[3]: \"+JSON.stringify(this.output.queue[j],['strings','prefix','suffix','delimiter','blobs','decorations'],2))\n            this.output.adjust.downward(this.output.queue[j]);\n            //print(\"OUTPUT[2]: \"+JSON.stringify(this.output.queue[j],['strings','prefix','suffix','delimiter','blobs','decorations'],2))\n            this.tmp.last_chr = this.output.adjust.fix(this.output.queue[j]);\n            //print(\"OUTPUT[1]: \"+JSON.stringify(this.output.queue[j],['strings','prefix','suffix','delimiter','blobs','decorations','num'],2))\n        }\n    }\n    //print(\"this.tmp.last_chr=\"+this.tmp.last_chr);\n    for (pos = 0, len = myblobs.length; pos < len; pos += 1) {\n        var buffer = [];\n        this.output.queue = [myblobs[pos]];\n        this.tmp.suppress_decorations = myparams[pos].suppress_decorations;\n        this.tmp.splice_delimiter = myparams[pos].splice_delimiter;\n        //\n        // oh, one last second thought on delimiters ...\n        //\n\n        if (myblobs[pos].parallel_delimiter) {\n            this.tmp.splice_delimiter = myblobs[pos].parallel_delimiter;\n        }\n        this.tmp.have_collapsed = myparams[pos].have_collapsed;\n\n        composite = this.output.string(this, this.output.queue);\n\n        this.tmp.suppress_decorations = false;\n        // meaningless assignment\n        // this.tmp.handle_ranges = false;\n        if (\"string\" === typeof composite) {\n            this.tmp.suppress_decorations = false;\n            if (!composite) {\n                if (this.opt.development_extensions.throw_on_empty) {\n                    CSL.error(\"Citation would render no content\");\n                } else {\n                    composite = \"[NO_PRINTED_FORM]\";\n                }\n            }\n            return composite;\n        }\n        if (\"object\" === typeof composite && composite.length === 0 && !item[\"suppress-author\"]) {\n            if (pos === 0) {\n                var errStr = \"[CSL STYLE ERROR: reference with no printed form.]\";\n                var preStr = pos === 0 ? txt_esc(this.citation.opt.layout_prefix) : \"\";\n                var sufStr = pos === (myblobs.length - 1) ? txt_esc(this.citation.opt.layout_suffix) : \"\";\n                composite.push(preStr + errStr + sufStr);\n            } else if (pos === myblobs.length - 1) {\n                var tmpobj = objects[objects.length - 1];\n                if (typeof tmpobj === \"string\") {\n                    objects[objects.length -1] += (txt_esc(this.citation.opt.layout_suffix));\n                } else if (typeof tmpobj === \"object\") {\n                    tmpobj.strings.suffix += (txt_esc(this.citation.opt.layout_suffix));\n                }\n            }\n        }\n        if (buffer.length && \"string\" === typeof composite[0]) {\n            composite.reverse();\n            var tmpstr = composite.pop();\n            if (tmpstr && tmpstr.slice(0, 1) === \",\") {\n                buffer.push(tmpstr);\n            } else if (\"string\" == typeof buffer.slice(-1)[0] && buffer.slice(-1)[0].slice(-1) === \",\") {\n                buffer.push(\" \" + tmpstr);\n            } else if (tmpstr) {\n                buffer.push(txt_esc(this.tmp.splice_delimiter) + tmpstr);\n            }\n        } else {\n            composite.reverse();\n            compie = composite.pop();\n            if (\"undefined\" !== typeof compie) {\n                if (buffer.length && \"string\" === typeof buffer[buffer.length - 1]) {\n                    buffer[buffer.length - 1] += compie.successor_prefix;\n                }\n                buffer.push(compie);\n            }\n        }\n        // Seems odd, but this was unnecessary and broken.\n        //composite.reverse();\n        llen = composite.length;\n        for (ppos = 0; ppos < llen; ppos += 1) {\n            obj = composite[ppos];\n            if (\"string\" === typeof obj) {\n                buffer.push(txt_esc(this.tmp.splice_delimiter) + obj);\n                continue;\n            }\n            compie = composite.pop();\n            if (\"undefined\" !== typeof compie) {\n                buffer.push(compie);\n            }\n        }\n        if (buffer.length === 0 && !inputList[pos][1][\"suppress-author\"]) {\n            empties += 1;\n        }\n        if (buffer.length > 1 && typeof buffer[0] !== \"string\") {\n            buffer = [this.output.renderBlobs(buffer)];\n        }\n        if (buffer.length) {\n            if (\"string\" === typeof buffer[0]) {\n                if (pos > 0) {\n                    buffer[0] = txt_esc(this.tmp.splice_delimiter) + buffer[0];\n                }\n            } else {\n                if (pos > 0) {\n                    buffer[0].splice_prefix = this.tmp.splice_delimiter;\n                } else {\n                    buffer[0].splice_prefix = \"\";\n                }\n            }\n        }\n        objects = objects.concat(buffer);\n    }\n    // print(\"OBJECTS=\"+objects);\n    result += this.output.renderBlobs(objects);\n\n    if (result) {\n        //if (CSL.TERMINAL_PUNCTUATION.indexOf(this.tmp.last_chr) > -1 \n        //    && this.tmp.last_chr === use_layout_suffix.slice(0, 1)) {\n        //    use_layout_suffix = use_layout_suffix.slice(1);\n        //}\n        if (!this.tmp.suppress_decorations) {\n            len = this.citation.opt.layout_decorations.length;\n            for (pos = 0; pos < len; pos += 1) {\n                params = this.citation.opt.layout_decorations[pos];\n                // The \"normal\" formats in some output modes expect\n                // a superior nested decoration environment, and\n                // so should produce no output here.\n                if (params[1] === \"normal\") {\n                    continue;\n                }\n                if (!item || !item[\"author-only\"]) {\n                    result = this.fun.decorate[params[0]][params[1]](this, result);\n                }\n            }\n        }\n    }\n    this.tmp.suppress_decorations = false;\n    if (!result) {\n        if (this.opt.development_extensions.throw_on_empty) {\n            CSL.error(\"Citation would render no content\");\n        } else {\n            result = \"[NO_PRINTED_FORM]\"\n        }\n    }\n    return result;\n};\n\n/*\n * Render a single cite item.\n *\n * This is called on the state object, with a single\n * Item as input.  It iterates exactly once over the style\n * citation tokens, and leaves the result of rendering in\n * the top-level list in the relevant *.opt.output\n * stack, as a list item consisting of a single string.\n *\n * (This is dual-purposed for generating individual\n * entries in a bibliography.)\n */\nCSL.getCite = function (Item, item, prevItemID, blockShadowNumberReset) {\n    var next, error_object;\n    var areaOrig = this.tmp.area;\n    if (item && item[\"author-only\"] && this.intext && this.intext.tokens.length > 0) {\n            this.tmp.area = \"intext\";\n    }\n    this.tmp.cite_renders_content = false;\n    this.tmp.probably_rendered_something = false;\n    this.tmp.prevItemID = prevItemID;\n\n    CSL.citeStart.call(this, Item, item, blockShadowNumberReset);\n    next = 0;\n    this.tmp.name_node = {};\n    this.nameOutput = new CSL.NameOutput(this, Item, item);\n\n    // rerun?\n    while (next < this[this.tmp.area].tokens.length) {\n        next = CSL.tokenExec.call(this, this[this.tmp.area].tokens[next], Item, item);\n    }\n\n    CSL.citeEnd.call(this, Item, item);\n    // Odd place for this, but it seems to fit here\n    if (!this.tmp.cite_renders_content && !this.tmp.just_looking) {\n        if (this.tmp.area === \"bibliography\") {\n            error_object = {\n                index: this.tmp.bibliography_pos,\n                itemID: \"\" + Item.id,\n                error_code: CSL.ERROR_NO_RENDERED_FORM\n            };\n            this.tmp.bibliography_errors.push(error_object);\n        }\n    }\n    this.tmp.area = areaOrig;\n    return \"\" + Item.id;\n};\n\n\nCSL.citeStart = function (Item, item, blockShadowNumberReset) {\n    this.tmp.lang_array = [];\n    if (Item.language) {\n        // Guard against garbage locales in user input\n        var m = Item.language.match(/^([a-zA-Z]+).*/);\n        if (m) {\n            this.tmp.lang_array.push(m[1].toLowerCase());\n        }\n    }\n    this.tmp.lang_array.push(this.opt.lang);\n    if (!blockShadowNumberReset) {\n        this.tmp.shadow_numbers = {};\n    }\n    \n    this.tmp.disambiguate_count = 0;\n    this.tmp.disambiguate_maxMax = 0;\n    this.tmp.same_author_as_previous_cite = false;\n    if (!this.tmp.suppress_decorations) {\n        this.tmp.subsequent_author_substitute_ok = true;\n    } else {\n        this.tmp.subsequent_author_substitute_ok = false;\n    }\n    this.tmp.lastchr = \"\";\n    if (this.tmp.area === \"citation\" && this.citation.opt.collapse && this.citation.opt.collapse.length) {\n        //this.tmp.have_collapsed = \"year\";\n        this.tmp.have_collapsed = true;\n    } else {\n        this.tmp.have_collapsed = false;\n    }\n    this.tmp.render_seen = false;\n    if (this.tmp.disambig_request  && ! this.tmp.disambig_override) {\n        this.tmp.disambig_settings = this.tmp.disambig_request;\n    } else if (this.registry.registry[Item.id] && ! this.tmp.disambig_override) {\n        this.tmp.disambig_request = this.registry.registry[Item.id].disambig;\n        this.tmp.disambig_settings = this.registry.registry[Item.id].disambig;\n    } else {\n        this.tmp.disambig_settings = new CSL.AmbigConfig();\n    }\n    if (this.tmp.area !== 'citation') {\n        if (!this.registry.registry[Item.id]) {\n            this.tmp.disambig_restore = new CSL.AmbigConfig();\n        } else {\n            this.tmp.disambig_restore = CSL.cloneAmbigConfig(this.registry.registry[Item.id].disambig);\n            if (this.tmp.area === 'bibliography' && this.tmp.disambig_settings && this.tmp.disambig_override) {\n                if (this.opt[\"disambiguate-add-names\"]) {\n                    this.tmp.disambig_settings.names = this.registry.registry[Item.id].disambig.names.slice();\n                    if (this.tmp.disambig_request) {\n                        this.tmp.disambig_request.names = this.registry.registry[Item.id].disambig.names.slice();\n                    }\n                }\n                if (this.opt[\"disambiguate-add-givenname\"]) {\n                    // This is weird and delicate and not fully understood\n                    this.tmp.disambig_request = this.tmp.disambig_settings;\n                    this.tmp.disambig_settings.givens = this.registry.registry[Item.id].disambig.givens.slice();\n                    this.tmp.disambig_request.givens = this.registry.registry[Item.id].disambig.givens.slice();\n                    for (var i=0,ilen=this.tmp.disambig_settings.givens.length;i<ilen;i+=1) {\n                        this.tmp.disambig_settings.givens[i] = this.registry.registry[Item.id].disambig.givens[i].slice();\n                    }\n                    for (var i=0,ilen=this.tmp.disambig_request.givens.length;i<ilen;i+=1) {\n                        this.tmp.disambig_request.givens[i] = this.registry.registry[Item.id].disambig.givens[i].slice();\n                    }\n                }\n            }\n        }\n    }\n\n    this.tmp.names_used = [];\n    this.tmp.nameset_counter = 0;\n    this.tmp.years_used = [];\n    this.tmp.names_max.clear();\n    if (!this.tmp.just_looking) {\n        if (!item || item.parallel === \"first\" || !item.parallel) {\n            this.tmp.abbrev_trimmer = {\n                QUASHES: {}\n            };\n        }\n    }\n\n    this.tmp.splice_delimiter = this[this.tmp.area].opt.layout_delimiter;\n    //this.tmp.splice_delimiter = this[this.tmp.area].opt.delimiter;\n\n    this.bibliography_sort.keys = [];\n    this.citation_sort.keys = [];\n\n    this.tmp.has_done_year_suffix = false;\n    this.tmp.last_cite_locale = false;\n    // SAVE PARAMETERS HERE, IF APPROPRIATE\n    // (promiscuous addition of global parameters => death by a thousand cuts)\n    if (!this.tmp.just_looking && item && !item.position && this.registry.registry[Item.id]) {\n        this.tmp.disambig_restore = CSL.cloneAmbigConfig(this.registry.registry[Item.id].disambig);\n    }\n    // XXX This only applied to the \"number\" variable itself? Huh?\n    //this.setNumberLabels(Item);\n    this.tmp.first_name_string = false;\n    this.tmp.authority_stop_last = 0;\n};\n\nCSL.citeEnd = function (Item, item) {\n    // RESTORE PARAMETERS IF APPROPRIATE\n    if (this.tmp.disambig_restore && this.registry.registry[Item.id]) {\n        this.registry.registry[Item.id].disambig.names = this.tmp.disambig_restore.names.slice();\n        this.registry.registry[Item.id].disambig.givens = this.tmp.disambig_restore.givens.slice();\n        for (var i=0,ilen=this.registry.registry[Item.id].disambig.givens.length;i<ilen;i+=1) {\n            this.registry.registry[Item.id].disambig.givens[i] = this.tmp.disambig_restore.givens[i].slice();\n        }\n    }\n    this.tmp.disambig_restore = false;\n\n    if (item && item.suffix) {\n        //this.tmp.last_suffix_used = this.tmp.suffix.value();\n        this.tmp.last_suffix_used = item.suffix;\n    } else {\n        this.tmp.last_suffix_used = \"\";\n    }\n    this.tmp.last_years_used = this.tmp.years_used.slice();\n    this.tmp.last_names_used = this.tmp.names_used.slice();\n    this.tmp.cut_var = false;\n\n    // This is a hack, in a way; I have lost track of where\n    // the disambig (name rendering) settings used for rendering work their way\n    // into the registry.  This resets defaults to the subsequent form,\n    // when first cites are rendered.\n    //if (this.tmp.disambig_restore && this.registry.registry[Item.id]) {\n    //    this.registry.registry[Item.id].disambig = this.tmp.disambig_restore;\n    //}\n    //this.tmp.disambig_restore = false;\n    this.tmp.disambig_request = false;\n\n    this.tmp.cite_locales.push(this.tmp.last_cite_locale);\n\n    if (this.tmp.issued_date && this.tmp.renders_collection_number) {\n        var buf = [];\n        for (var i = this.tmp.issued_date.list.length - 1; i > this.tmp.issued_date.pos; i += -1) {\n            buf.push(this.tmp.issued_date.list.pop());\n        }\n        // Throw away the unwanted blob\n        this.tmp.issued_date.list.pop();\n        // Put the other stuff back\n        for (i = buf.length - 1; i > -1; i += -1) {\n            this.tmp.issued_date.list.push(buf.pop());\n        }\n    }\n    this.tmp.issued_date = false;\n    this.tmp.renders_collection_number = false;\n\n};\n\n/*global CSL: true */\n\nCSL.Engine.prototype.makeBibliography = function (bibsection) {\n    var debug, ret, params, maxoffset, item, len, pos, tok, tokk, tokkk, entry_ids, entry_strings;\n    debug = false;\n    if (!bibsection && (this.bibliography.opt.exclude_types || this.bibliography.opt.exclude_with_fields)) {\n        bibsection = {\n            exclude: []\n        };\n        if (this.bibliography.opt.exclude_types) {\n            for (var i in this.bibliography.opt.exclude_types) {\n                var val = this.bibliography.opt.exclude_types[i];\n                bibsection.exclude.push({\n                    field: \"type\",\n                    value: val\n                });\n            }\n        }\n        if (this.bibliography.opt.exclude_with_fields) {\n            for (var i in this.bibliography.opt.exclude_with_fields) {\n                var field = this.bibliography.opt.exclude_with_fields[i];\n                bibsection.exclude.push({\n                    field: field, value: true\n                });\n            }\n        }\n    }\n    // API change: added in version 1.0.51\n    if (!this.bibliography.tokens.length) {\n        return false;\n    }\n    if (\"string\" === typeof bibsection) {\n        this.opt.citation_number_slug = bibsection;\n        bibsection = false;\n    }\n    //SNIP-START\n    if (debug) {\n        len = this.bibliography.tokens.length;\n        for (pos = 0; pos < len; pos += 1) {\n            tok = this.bibliography.tokens[pos];\n            CSL.debug(\"bibtok: \" + tok.name);\n        }\n        CSL.debug(\"---\");\n        len = this.citation.tokens.length;\n        for (pos = 0; pos < len; pos += 1) {\n            tokk = this.citation.tokens[pos];\n            CSL.debug(\"cittok: \" + tok.name);\n        }\n        CSL.debug(\"---\");\n        len = this.bibliography_sort.tokens.length;\n        for (pos = 0; pos < len; pos += 1) {\n            tokkk = this.bibliography_sort.tokens[pos];\n            CSL.debug(\"bibsorttok: \" + tok.name);\n        }\n    }\n    //SNIP-END\n\n    // For paged returns\n    ret = CSL.getBibliographyEntries.call(this, bibsection);\n    entry_ids = ret[0];\n    entry_strings = ret[1];\n\n    // For paged returns\n    var done = ret[2];\n\n    params = {\n        \"maxoffset\": 0,\n        \"entryspacing\": this.bibliography.opt[\"entry-spacing\"],\n        \"linespacing\": this.bibliography.opt[\"line-spacing\"],\n        \"second-field-align\": false,\n        \"entry_ids\": entry_ids,\n        \"bibliography_errors\": this.tmp.bibliography_errors.slice(),\n        \"done\": done\n    };\n    if (this.bibliography.opt[\"second-field-align\"]) {\n        params[\"second-field-align\"] = this.bibliography.opt[\"second-field-align\"];\n    }\n    maxoffset = 0;\n    len = this.registry.reflist.length;\n    for (pos = 0; pos < len; pos += 1) {\n        item = this.registry.reflist[pos];\n        if (item.offset > params.maxoffset) {\n            params.maxoffset = item.offset;\n        }\n    }\n    if (this.bibliography.opt.hangingindent) {\n        params.hangingindent = this.bibliography.opt.hangingindent;\n    }\n    params.bibstart = this.fun.decorate.bibstart;\n    params.bibend = this.fun.decorate.bibend;\n\n    this.opt.citation_number_slug = false;\n    return [params, entry_strings];\n};\n\n/*\n * Compose individual cites into a single string.\n */\nCSL.getBibliographyEntries = function (bibsection) {\n    var ret, input, include, anymatch, allmatch, bib_entry, res, item, spec, lllen, pppos, topblobs, entry_item_ids, debug, i, ilen, siblings, skips, sortedItems, eyetem, entry_item_data, j, jlen;\n    ret = [];\n    entry_item_data = [];\n    this.tmp.area = \"bibliography\";\n    this.tmp.root = \"bibliography\";\n    this.tmp.last_rendered_name = false;\n    this.tmp.bibliography_errors = [];\n    this.tmp.bibliography_pos = 0;\n    \n    // For paged returns: disable generated entries and\n    // do not fetch full items as a batch (input variable\n    // consists of ids only in this case)\n    if (bibsection && bibsection.page_start && bibsection.page_length) {\n        input = this.registry.getSortedIds();        \n    } else {\n        input = this.refetchItems(this.registry.getSortedIds());\n    }\n    \n    this.tmp.disambig_override = true;\n    function eval_string(a, b) {\n        if (a === b) {\n            return true;\n        }\n        return false;\n    }\n    function eval_list(a, lst) {\n        lllen = lst.length;\n        for (pppos = 0; pppos < lllen; pppos += 1) {\n            if (eval_string(a, lst[pppos])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    function eval_spec(a, b) {\n        if (\"boolean\" === typeof a || !a) {\n            if (a) {\n                return !!b;\n            } else {\n                return !b;\n            }\n        } else {\n            if (\"string\" === typeof b) {\n                return eval_string(a, b);\n            } else if (!b) {\n                return false;\n            } else {\n                return eval_list(a, b);\n            }\n        }\n    }\n\n    skips = {};\n\n    // For paged returns\n    var page_item_count;\n    if (bibsection && bibsection.page_start && bibsection.page_length) {\n        page_item_count = 0;\n        if (bibsection.page_start !== true) {\n            for (i = 0, ilen = input.length; i < ilen; i += 1) {\n                skips[input[i]] = true;\n                if (bibsection.page_start == input[i]) {\n                    break;\n                }\n            }\n        }\n    }\n\n    var processed_item_ids = [];\n\n    var consolidatedIDs = {};\n    this.tmp.container_item_count = {};\n    input = input.filter(o => {\n        var ret = o;\n        if (o.legislation_id) {\n            if (consolidatedIDs[o.legislation_id]) {\n                ret = false;\n            } else {\n                consolidatedIDs[o.legislation_id] = true;\n            }\n        } else if (o.container_id) {\n            if (!this.tmp.container_item_count[o.container_id]) {\n                this.tmp.container_item_count[o.container_id] = 0;\n            }\n            this.tmp.container_item_count[o.container_id]++;\n            if (this.bibliography.opt.consolidate_containers.indexOf(o.type) > -1) {\n                if (consolidatedIDs[o.container_id]) {\n                    ret = false;\n                } else {\n                    consolidatedIDs[o.container_id] = true;\n                }\n            }\n        }\n        return ret;\n    });\n\n    this.tmp.container_item_pos = {};\n\n    for (i = 0, ilen = input.length; i < ilen; i += 1) {\n        \n        // For paged returns\n        if (bibsection && bibsection.page_start && bibsection.page_length) {\n            if (skips[input[i]]) {\n                continue;\n            }\n            item = this.refetchItem(input[i]);\n            if (page_item_count === bibsection.page_length) {\n                break;\n            }\n        } else {\n            item = input[i];\n            if (skips[item.id]) {\n                continue;\n            }\n        }\n        if (bibsection) {\n            include = true;\n            if (bibsection.include) {\n                //\n                // Opt-in: these are OR-ed.\n                //\n                include = false;\n                for (j = 0, jlen = bibsection.include.length; j < jlen; j += 1) {\n                    spec = bibsection.include[j];\n                    if (eval_spec(spec.value, item[spec.field])) {\n                        include = true;\n                        break;\n                    }\n                }\n            } else if (bibsection.exclude) {\n                //\n                // Opt-out: these are also OR-ed.\n                //\n                anymatch = false;\n                for (j = 0, jlen = bibsection.exclude.length; j < jlen; j += 1) {\n                    spec = bibsection.exclude[j];\n                    if (eval_spec(spec.value, item[spec.field])) {\n                        anymatch = true;\n                        break;\n                    }\n                }\n                if (anymatch) {\n                    include = false;\n                }\n            } else if (bibsection.select) {\n                //\n                // Multiple condition opt-in: these are AND-ed.\n                //\n                include = false;\n                allmatch = true;\n                for (j = 0, jlen = bibsection.select.length; j < jlen; j += 1) {\n                    spec = bibsection.select[j];\n                    if (!eval_spec(spec.value, item[spec.field])) {\n                        allmatch = false;\n                    }\n                }\n                if (allmatch) {\n                    include = true;\n                }\n            }\n            if (bibsection.quash) {\n                //\n                // Stop criteria: These are AND-ed.\n                //\n                allmatch = true;\n                for (j = 0, jlen = bibsection.quash.length; j < jlen; j += 1) {\n                    spec = bibsection.quash[j];\n                    if (!eval_spec(spec.value, item[spec.field])) {\n                        allmatch = false;\n                    }\n                }\n                if (allmatch) {\n                    include = false;\n                }\n            }\n            if (!include) {\n                continue;\n            }\n        }\n        //SNIP-START\n        if (debug) {\n            CSL.debug(\"BIB: \" + item.id);\n        }\n\n        if (item.container_id) {\n            if (!this.tmp.container_item_pos[item.container_id]) {\n                this.tmp.container_item_pos[item.container_id] = 0;\n            }\n            this.tmp.container_item_pos[item.container_id]++;\n        }\n        \n        //SNIP-END\n        bib_entry = new CSL.Token(\"group\", CSL.START);\n        bib_entry.decorations = [[\"@bibliography\", \"entry\"]].concat(this.bibliography.opt.layout_decorations);\n        this.output.startTag(\"bib_entry\", bib_entry);\n        if (item.system_id && this.sys.embedBibliographyEntry) {\n            this.output.current.value().item_id = item.system_id;\n        } else {\n            this.output.current.value().system_id = item.id;\n        }\n\n        // 2019-06-25 Hacked to conform to new parallels evaluation method\n        // 2020-04-25 Revised to work with latest, and final, parallel-first/parallel-last attributes\n        entry_item_ids = [];\n        if (this.registry.registry[item.id].master\n            && !(bibsection && bibsection.page_start && bibsection.page_length)) {\n            // Fetch item content\n            sortedItems = [[item, {id: item.id}]];\n            siblings = this.registry.registry[item.id].siblings;\n            for (var j=0,jlen=siblings.length; j<jlen; j++) {\n               sortedItems.push([this.refetchItem(siblings[j]), {id: siblings[j]}]);\n            }\n            // Adjust parameters\n            this.parallel.StartCitation(sortedItems);\n            if (this.registry.registry[item.id].parallel_delimiter_override) {\n                this.output.queue[0].strings.delimiter = this.registry.registry[item.id].parallel_delimiter_override;\n            } else {\n                this.output.queue[0].strings.delimiter = \", \";\n            }\n            this.tmp.term_predecessor = false;\n            this.tmp.cite_index = 0;\n            // Run cites\n            for (j = 0, jlen = sortedItems.length; j < jlen; j += 1) {\n                if (j < (sortedItems.length - 1)) {\n                    this.tmp.parallel_and_not_last = true;\n                } else {\n                    delete this.tmp.parallel_and_not_last;\n                }\n                entry_item_ids.push(\"\" + CSL.getCite.call(this, sortedItems[j][0], sortedItems[j][1]));\n                this.tmp.cite_index++;\n                skips[sortedItems[j][0].id] = true;\n            }\n        } else if (!this.registry.registry[item.id].siblings) {\n            this.tmp.term_predecessor = false;\n            this.tmp.cite_index = 0;\n            entry_item_ids.push(\"\" + CSL.getCite.call(this, item));\n            if (bibsection && bibsection.page_start && bibsection.page_length) {\n                page_item_count += 1;\n            }\n            //skips[item.id] = true;\n        }\n        // For RDF support\n        entry_item_data.push(\"\");\n\n        this.tmp.bibliography_pos += 1;\n\n        processed_item_ids.push(entry_item_ids);\n        //\n        // XXX: loop to render parallels goes here\n        // XXX: just have to mark them somehow ...\n        //\n        this.output.endTag(\"bib_entry\");\n        //\n        // place layout prefix on first blob of each cite, and suffix\n        // on the last non-empty blob of each cite.  there be dragons\n        // here.\n        //\n        if (this.output.queue[0].blobs.length && this.output.queue[0].blobs[0].blobs.length) {\n            // The output queue stuff needs cleaning up.  the result of\n            // output.current.value() is sometimes a blob, sometimes its list\n            // of blobs.  this inconsistency is a source of confusion, and\n            // should be cleaned up across the code base in the first\n            // instance, before making any other changes to output code.\n            if (!this.output.queue[0].blobs[0].blobs[0].strings) {\n                topblobs = this.output.queue[0].blobs;\n            } else {\n                topblobs = this.output.queue[0].blobs[0].blobs;\n            }\n            topblobs[0].strings.prefix = this.bibliography.opt.layout_prefix + topblobs[0].strings.prefix;\n        }\n        for (j=0,jlen=this.output.queue.length;j<jlen;j+=1) {\n            CSL.Output.Queue.purgeEmptyBlobs(this.output.queue[j]);\n            //print(\"XXX: \"+JSON.stringify(this.output.queue[j],['strings','prefix','suffix','delimiter','blobs','decorations'],2))\n        }\n        for (j=0,jlen=this.output.queue.length;j<jlen;j+=1) {\n            this.output.adjust.upward(this.output.queue[j]);\n            this.output.adjust.leftward(this.output.queue[j]);\n            this.output.adjust.downward(this.output.queue[j],true);\n            this.output.adjust.fix(this.output.queue[j]);\n            //print(\"OUTPUT: \"+JSON.stringify(this.output.queue[j],['strings','prefix','suffix','delimiter','blobs','decorations'],2))\n        }\n\n        //print(\"DUMP \"+JSON.stringify(this.output.queue, [\"strings\", \"decorations\", \"prefix\", \"suffix\", \"delimiter\", \"blobs\"], 2));\n\n        // XXX Need to account for numeric blobs in input.\n        // XXX No idea how this could have worked previously.\n\n        //print(\"BLOBS \"+this.output.queue[0].blobs[0].blobs);\n\n        //print(\"JSON \"+JSON.stringify(this.output.queue[0].blobs, null, 2));\n\n        res = this.output.string(this, this.output.queue)[0];\n        \n        if (!res && this.opt.update_mode === CSL.NUMERIC) {\n            var err = (ret.length + 1) + \". [CSL STYLE ERROR: reference with no printed form.]\";\n            res = CSL.Output.Formats[this.opt.mode][\"@bibliography/entry\"](this, err);\n        }\n        if (res) {\n            ret.push(res);\n        }\n    }\n\n    var done = false;\n    if (bibsection && bibsection.page_start && bibsection.page_length) {\n        var last_expected_id = input.slice(-1)[0];\n        var last_seen_id = processed_item_ids.slice(-1)[0];\n        if (!last_expected_id || !last_seen_id || last_expected_id == last_seen_id) {\n            done = true;\n        }\n    }\n    this.tmp.disambig_override = false;\n\n    // XXX done\n    return [processed_item_ids, ret, done];\n};\n\n/*global CSL: true */\n\n\nCSL.Engine.prototype.setCitationId = function (citation, force) {\n    var ret, id, direction;\n    ret = false;\n    if (!citation.citationID || force) {\n        id = Math.floor(Math.random() * 100000000000000);\n        while (true) {\n            direction = 0;\n            if (!this.registry.citationreg.citationById[id]) {\n                // In case the ID is used as an HTML identifier in the\n                // calling application.\n                //   https://github.com/Juris-M/citeproc-js/issues/22\n                citation.citationID = \"a\" + id.toString(32);\n                break;\n            } else if (!direction && id < 50000000000000) {\n                direction = 1;\n            } else {\n                direction = -1;\n            }\n            if (direction === 1) {\n                id += 1;\n            } else {\n                id += -1;\n            }\n        }\n        ret = \"\" + id;\n    }\n    this.registry.citationreg.citationById[citation.citationID] = citation;\n    return ret;\n};\n\nCSL.Engine.prototype.rebuildProcessorState = function (citations, mode, uncitedItemIDs) {\n    // Rebuilds the processor from scratch, based on a list of citation\n    // objects. In a dynamic application, once the internal state of processor\n    // is established, citations should edited with individual invocations\n    // of processCitationCluster().\n\n    // citations is a list of citation objects in document order.\n    // mode is one of \"html\", \"text\" or \"rtf\".\n    // uncitedItemIDs is a list of itemIDs or a JS object with itemIDs as keys.\n    // Returns a list of [citationID,noteIndex,string] triples in document order.\n    // Set citation.properties.noteIndex to 0 for in-text citations.\n    // It is not necessary to run updateItems() before this function.\n    if (!citations) {\n        citations = [];\n    }\n    if (!mode) {\n        mode = 'html';\n    }\n    var doneIDs = {};\n    var itemIDs = [];\n    for (var i=0,ilen=citations.length;i<ilen;i+=1) {\n        for (var j=0,jlen=citations[i].citationItems.length;j<jlen;j+=1) {\n            var itemID = \"\" + citations[i].citationItems[j].id;\n            if (!doneIDs[itemID]) {\n                itemIDs.push(itemID);\n            }\n            doneIDs[itemID] = true;\n        }\n    }\n    this.updateItems(itemIDs);\n    var pre = [];\n    var post = [];\n    var ret = [];\n    var oldMode = this.opt.mode;\n    this.setOutputFormat(mode);\n    for (var i=0,ilen=citations.length;i<ilen;i+=1) {\n        // res contains a result report and a list of [index,string] pairs\n        // index begins at 0\n        var res = this.processCitationCluster(citations[i],pre,post,CSL.ASSUME_ALL_ITEMS_REGISTERED);\n        pre.push([citations[i].citationID,citations[i].properties.noteIndex]);\n        for (var j=0,jlen=res[1].length;j<jlen;j+=1) {\n            var index = res[1][j][0];\n            ret[index] = [\n                pre[index][0],\n                pre[index][1],\n                res[1][j][1]\n            ];\n        }\n    }\n    this.updateUncitedItems(uncitedItemIDs);\n    this.setOutputFormat(oldMode);\n    return ret;\n};\n\n\nCSL.Engine.prototype.restoreProcessorState = function (citations) {\n    var i, ilen, j, jlen, item, Item, newitem, citationList, itemList, sortedItems;\n    \n    // This function is deprecated.\n    // Use rebuildProcessorState() instead.\n\n    // Quickly restore state from citation details retained by\n    // calling application.\n    //\n    // if citations are provided, position details and sortkeys \n    // on the citation objects are are assumed to be correct.  Item\n    // data is retrieved, and sortedItems arrays are created and\n    // sorted as required by the current style.\n    //\n    // If citations is an empty list or nil, reset processor to\n    // empty state.\n    citationList = [];\n    itemList = [];\n    if (!citations) {\n        citations = [];\n    }\n    // Adjust citationIDs to avoid duplicates, save off index numbers\n    var indexNumbers = [];\n    var citationIds = {};\n    for (i = 0, ilen = citations.length; i < ilen; i += 1) {\n        if (citationIds[citations[i].citationID]) {\n            this.setCitationId(citations[i], true);\n        }\n        citationIds[citations[i].citationID] = true;\n        indexNumbers.push(citations[i].properties.index);\n    }\n    // Slice citations and sort by their declared index positions, if any,\n    // then reassign index and noteIndex numbers.\n    var oldCitations = citations.slice();\n    oldCitations.sort(\n        function (a,b) {\n            if (a.properties.index < b.properties.index) {\n                return -1;\n            } else if (a.properties.index > b.properties.index) {\n                return 1;\n            } else {\n                return 0;\n            }\n        }\n    );\n    for (i = 0, ilen = oldCitations.length; i < ilen; i += 1) {\n        oldCitations[i].properties.index = i;\n    }\n    for (i = 0, ilen = oldCitations.length; i < ilen; i += 1) {\n        sortedItems = [];\n        for (j = 0, jlen = oldCitations[i].citationItems.length; j < jlen; j += 1) {\n            item = oldCitations[i].citationItems[j];\n            if (\"undefined\" === typeof item.sortkeys) {\n                item.sortkeys = [];\n            }\n            Item = this.retrieveItem(\"\" + item.id);\n            newitem = [Item, item];\n            sortedItems.push(newitem);\n            oldCitations[i].citationItems[j].item = Item;\n            itemList.push(\"\" + item.id);\n        }\n        if (!oldCitations[i].properties.unsorted) {\n            sortedItems.sort(this.citation.srt.compareCompositeKeys);\n        }\n        oldCitations[i].sortedItems = sortedItems;\n        // Save citation data in registry\n        this.registry.citationreg.citationById[oldCitations[i].citationID] = oldCitations[i];\n    }\n    // Register Items\n    this.updateItems(itemList);\n\n    // Construct citationList from original copy\n    for (i = 0, ilen = citations.length; i < ilen; i += 1) {\n        citationList.push([\"\" + citations[i].citationID, citations[i].properties.noteIndex]);\n    }\n\n    var ret = [];\n    if (citations && citations.length) {\n        // Rendering one citation restores remainder of processor state.\n        // If citations is empty, rest to empty state.\n        ret = this.processCitationCluster(citations[0], [], citationList.slice(1));\n    } else {\n        this.registry = new CSL.Registry(this);\n        this.tmp = new CSL.Engine.Tmp();\n        this.disambiguate = new CSL.Disambiguation(this);\n    }\n    return ret;\n};\n\n\nCSL.Engine.prototype.updateItems = function (idList, nosort, rerun_ambigs, implicitUpdate) {\n    var debug = false;\n    var oldArea = this.tmp.area;\n    var oldRoot = this.tmp.root;\n    var oldExtension = this.tmp.extension;\n    if (this.bibliography_sort.tokens.length === 0) {\n        nosort = true;\n    }\n    this.tmp.area = \"citation\";\n    this.tmp.root = \"citation\";\n    this.tmp.extension = \"\";\n    if (!implicitUpdate) {\n        this.tmp.loadedItemIDs = {};\n    }\n    //CSL.debug = print\n    //SNIP-START\n    if (debug) {\n        CSL.debug(\"--> init <--\");\n    }\n    //SNIP-END\n    this.registry.init(idList);\n\n\tif (rerun_ambigs) {\n\t\tfor (var ambig in this.registry.ambigcites) {\n\t\t\tthis.registry.ambigsTouched[ambig] = true;\n\t\t}\n\t}\n\n    this.registry.dodeletes(this.registry.myhash);\n    \n    this.registry.doinserts(this.registry.mylist);\n    \n    this.registry.dorefreshes();\n\n    // *** affects reflist\n    this.registry.rebuildlist(nosort);\n    \n    this.registry.setsortkeys();\n\n    // taints always\n    this.registry.setdisambigs();\n\n    // *** affects reflist\n    this.registry.sorttokens(nosort);\n\n    // *** affects reflist\n    // taints if numbered style\n    this.registry.renumber();\n    \n    // taints always\n    //this.registry.yearsuffix();\n\n    this.tmp.extension = oldExtension;\n    this.tmp.area = oldArea;\n    this.tmp.root = oldRoot;\n\n    return this.registry.getSortedIds();\n};\n\nCSL.Engine.prototype.updateUncitedItems = function (idList, nosort) {\n    var idHash;\n    var oldArea = this.tmp.area;\n    var oldRoot = this.tmp.root;\n    var oldExtension = this.tmp.extension;\n    if (this.bibliography_sort.tokens.length === 0) {\n        nosort = true;\n    }\n    this.tmp.area = \"citation\";\n    this.tmp.root = \"citation\";\n    this.tmp.extension = \"\";\n    this.tmp.loadedItemIDs = {};\n    // This should be a utility function\n    if (!idList) {\n        idList = [];\n    }\n    if (\"object\" == typeof idList) {\n        if (\"undefined\" == typeof idList.length) {\n            idHash = idList;\n            idList = [];\n            for (var key in idHash) {\n                idList.push(key);\n            }\n        } else if (\"number\" == typeof idList.length) {\n            idHash = {};\n            for (var i=0,ilen=idList.length;i<ilen;i+=1) {\n                idHash[idList[i]] = true;\n            }\n        }\n    }\n\n    // prepare extended list of items\n    this.registry.init(idList, true);\n\n    // Use purge instead of delete.\n    // this.registry.dodeletes(this.registry.myhash);\n    this.registry.dopurge(idHash);\n\n    // everything else is the same as updateItems()\n    this.registry.doinserts(this.registry.mylist);\n\n    this.registry.dorefreshes();\n\n    this.registry.rebuildlist(nosort);\n\n    this.registry.setsortkeys();\n\n    this.registry.setdisambigs();\n\n    this.registry.sorttokens(nosort);\n\n    this.registry.renumber();\n\n    this.tmp.extension = oldExtension;\n    this.tmp.area = oldArea;\n    this.tmp.root = oldRoot;\n\n    return this.registry.getSortedIds();\n};\n\n/*global CSL: true */\n\nCSL.localeResolve = function (langstr, defaultLocale) {\n    var ret, langlst;\n    if (!defaultLocale) {\n        defaultLocale = \"en-US\";\n    }\n    if (!langstr) {\n        langstr = defaultLocale;\n    }\n    ret = {};\n    //if (\"undefined\" === typeof langstr) {\n    //    langstr = \"en_US\";\n    //}\n    langlst = langstr.split(/[\\-_]/);\n    ret.base = CSL.LANG_BASES[langlst[0]];\n    if (\"undefined\" === typeof ret.base) {\n        //CSL.debug(\"Warning: unknown locale \"+langstr+\", setting fallback to \"+defaultLocale);\n        return {base:defaultLocale, best:langstr, bare:langlst[0]};\n    }\n    if (langlst.length === 1) {\n        ret.generic = true;\n    }\n    if (langlst.length === 1 || langlst[1] === \"x\") {\n        ret.best = ret.base.replace(\"_\", \"-\");\n    } else {\n        ret.best = langlst.slice(0, 2).join(\"-\");\n    }\n    ret.base = ret.base.replace(\"_\", \"-\");\n    ret.bare = langlst[0];\n    return ret;\n};\n\n// Use call to invoke this.\nCSL.Engine.prototype.localeConfigure = function (langspec, beShy) {\n    var localexml;\n    if (beShy && this.locale[langspec.best]) {\n        return;\n    }\n    if (langspec.best === \"en-US\") {\n        localexml = CSL.setupXml(this.sys.retrieveLocale(\"en-US\"));\n        this.localeSet(localexml, \"en-US\", langspec.best);\n    } else if (langspec.best !== \"en-US\") {\n        if (langspec.base !== langspec.best) {\n            localexml = CSL.setupXml(this.sys.retrieveLocale(langspec.base));\n            this.localeSet(localexml, langspec.base, langspec.best);\n        }\n        localexml = CSL.setupXml(this.sys.retrieveLocale(langspec.best));\n        this.localeSet(localexml, langspec.best, langspec.best);        \n    }\n    this.localeSet(this.cslXml, \"\", langspec.best);\n    this.localeSet(this.cslXml, langspec.bare, langspec.best);\n    if (langspec.base !== langspec.best) {\n        this.localeSet(this.cslXml, langspec.base, langspec.best);\n    }\n    this.localeSet(this.cslXml, langspec.best, langspec.best);\n    if (\"undefined\" === typeof this.locale[langspec.best].terms[\"page-range-delimiter\"]) {\n        if ([\"fr\", \"pt\"].indexOf(langspec.best.slice(0, 2).toLowerCase()) > -1) {\n            this.locale[langspec.best].terms[\"page-range-delimiter\"] = \"-\";\n        } else {\n            this.locale[langspec.best].terms[\"page-range-delimiter\"] = \"\\u2013\";\n        }\n    }\n    if (\"undefined\" === typeof this.locale[langspec.best].terms[\"year-range-delimiter\"]) {\n        this.locale[langspec.best].terms[\"year-range-delimiter\"] = \"\\u2013\";\n    }\n    if (\"undefined\" === typeof this.locale[langspec.best].terms[\"citation-range-delimiter\"]) {\n        this.locale[langspec.best].terms[\"citation-range-delimiter\"] = \"\\u2013\";\n    }\n    if (this.opt.development_extensions.normalize_lang_keys_to_lowercase) {\n        var localeLists = [\"default-locale\",\"locale-sort\",\"locale-translit\",\"locale-translat\"];\n        for (var i=0,ilen=localeLists.length;i<ilen;i+=1) {\n            for (var j=0,jlen=this.opt[localeLists[i]].length;j<jlen;j+=1) {\n                this.opt[localeLists[i]][j] = this.opt[localeLists[i]][j].toLowerCase();\n            }\n        }\n        this.opt.lang = this.opt.lang.toLowerCase();\n    }\n};\n    \n//\n// XXXXX: Got it.  The locales objects need to be reorganized,\n// with a top-level local specifier, and terms, opts, dates\n// below.\n//\nCSL.Engine.prototype.localeSet = function (myxml, lang_in, lang_out) {\n    var blob, locale, nodes, attributes, pos, term, form, termname, styleopts, date, attrname, len, genderform, target, i, ilen;\n    lang_in = lang_in.replace(\"_\", \"-\");\n    lang_out = lang_out.replace(\"_\", \"-\");\n\n    if (this.opt.development_extensions.normalize_lang_keys_to_lowercase) {\n        lang_in = lang_in.toLowerCase();\n        lang_out = lang_out.toLowerCase();\n    }\n\n    if (!this.locale[lang_out]) {\n        this.locale[lang_out] = {};\n        this.locale[lang_out].terms = {};\n        this.locale[lang_out].opts = {};\n        // Set default skip words. Can be overridden in locale by attribute on style-options node.\n        this.locale[lang_out].opts[\"skip-words\"] = CSL.SKIP_WORDS;\n        // Initialise leading noise word to false. Actual assignment is below. Empty by default, can be overridden in locale by attribute on style-options node.\n        if (!this.locale[lang_out].opts[\"leading-noise-words\"]) {\n            this.locale[lang_out].opts[\"leading-noise-words\"] = [];\n        }\n        this.locale[lang_out].dates = {};\n        // For ordinals\n        this.locale[lang_out].ord = {'1.0.1':false,keys:{}};\n        this.locale[lang_out][\"noun-genders\"] = {};\n    }\n\n    //\n    // Xml: Test if node is \"locale\" (nb: ns declarations need to be invoked\n    // on every access to the xml object; bundle this with the functions\n    //\n    locale = myxml.makeXml();\n    if (myxml.nodeNameIs(myxml.dataObj, 'locale')) {\n        locale = myxml.dataObj;\n    } else {\n        //\n        // Xml: get a list of all \"locale\" nodes\n        //\n        nodes = myxml.getNodesByName(myxml.dataObj, \"locale\");\n        var foundLocale = false;\n        for (pos = 0, len = myxml.numberofnodes(nodes); pos < len; pos += 1) {\n            blob = nodes[pos];\n            //\n            // Xml: get locale xml:lang\n            //\n            // Iterate over all locales, but for non-matching nodes,\n            // we set jurisdiction_preference only (processing of the\n            // chosen one will process the attribute there,\n            // separately.\n            if (!foundLocale && myxml.getAttributeValue(blob, 'lang', 'xml') === lang_in) {\n                locale = blob;\n                foundLocale = true;\n            } else {\n                var lang = myxml.getAttributeValue(blob, 'lang', 'xml');\n                var style_options = myxml.getNodesByName(blob, 'style-options');\n                if (lang && style_options && style_options.length) {\n                    var jurispref = myxml.getAttributeValue(style_options[0], 'jurisdiction-preference');\n                    if (jurispref) {\n                        if (!this.locale[lang]) {\n                            this.locale[lang] = {\n                                opts: {}\n                            };\n                        }\n                        this.locale[lang].opts[\"jurisdiction-preference\"] = jurispref.split(/\\s+/);\n                    }\n                }\n            }\n        }\n    }\n    //\n    // Xml: get a list of any cs:type nodes within locale\n    //\n    nodes = myxml.getNodesByName(locale, 'type');\n    for (i = 0, ilen = myxml.numberofnodes(nodes); i < ilen; i += 1) {\n        var typenode = nodes[i];\n        var type = myxml.getAttributeValue(typenode, 'name');\n        var gender = myxml.getAttributeValue(typenode, 'gender');\n        this.opt.gender[type] = gender;\n    }\n    //\n    // Xml: get a list of term nodes within locale\n    //\n\n    // If we are setting CSL 1.0.1 ordinals inside a style, wipe the\n    // slate clean and start over.\n    var hasCslOrdinals101 = myxml.getNodesByName(locale, 'term', 'ordinal').length;\n    if (hasCslOrdinals101) {\n        for (var key in this.locale[lang_out].ord.keys) {\n            delete this.locale[lang_out].terms[key];\n        }\n        this.locale[lang_out].ord = {\"1.0.1\":false,keys:{}};\n    }\n\n    nodes = myxml.getNodesByName(locale, 'term');\n    // Collect ordinals info as for 1.0.1, but save only if 1.0.1 toggle triggers\n    var ordinals101 = {\"last-digit\":{},\"last-two-digits\":{},\"whole-number\":{}};\n    var ordinals101_toggle = false;\n    var genderized_terms = {};\n    for (pos = 0, len = myxml.numberofnodes(nodes); pos < len; pos += 1) {\n        term = nodes[pos];\n        //\n        // Xml: get string value of attribute\n        //\n        termname = myxml.getAttributeValue(term, 'name');\n        if (termname === \"sub verbo\") {\n            termname = \"sub-verbo\";\n        }\n        if (termname.slice(0,7) === \"ordinal\") {\n            if (termname === \"ordinal\") {\n                ordinals101_toggle = true;\n            } else {\n                var match = myxml.getAttributeValue(term, 'match');\n                var termstub = termname.slice(8);\n                var genderform = myxml.getAttributeValue(term, 'gender-form');\n                if (!genderform) {\n                    genderform = \"neuter\";\n                }\n                if (!match) {\n                    match = \"last-two-digits\";\n                    if (termstub.slice(0,1) === \"0\") {\n                        match = \"last-digit\";\n                    }\n                }\n                if (termstub.slice(0,1) === \"0\") {\n                    termstub = termstub.slice(1);\n                }\n                if (!ordinals101[match][termstub]) {\n                    ordinals101[match][termstub] = {};\n                }\n                ordinals101[match][termstub][genderform] = termname;\n            }\n            this.locale[lang_out].ord.keys[termname] = true;\n        }\n        if (\"undefined\" === typeof this.locale[lang_out].terms[termname]) {\n            this.locale[lang_out].terms[termname] = {};\n        }\n        form = \"long\";\n        genderform = false;\n        //\n        // Xml: get string value of form attribute, if any\n        //\n        if (myxml.getAttributeValue(term, 'form')) {\n            form = myxml.getAttributeValue(term, 'form');\n        }\n        //\n        // Xml: get string value of gender attribute, if any\n        // \n        if (myxml.getAttributeValue(term, 'gender-form')) {\n            genderform = myxml.getAttributeValue(term, 'gender-form');\n        }\n        //\n        // Xml: set global gender assignment for variable associated\n        // with term name\n        // \n        if (myxml.getAttributeValue(term, 'gender')) {\n            this.locale[lang_out][\"noun-genders\"][termname] = myxml.getAttributeValue(term, 'gender');\n        }\n        // Work on main segment or gender-specific sub-segment as appropriate\n        if (genderform) {\n            this.locale[lang_out].terms[termname][genderform] = {};\n            this.locale[lang_out].terms[termname][genderform][form] = [];\n            target = this.locale[lang_out].terms[termname][genderform];\n            genderized_terms[termname] = true;\n        } else {\n            this.locale[lang_out].terms[termname][form] = [];\n            target = this.locale[lang_out].terms[termname];\n        }\n        //\n        // Xml: test of existence of node\n        //\n        if (myxml.numberofnodes(myxml.getNodesByName(term, 'multiple'))) {\n            //\n            // Xml: get string value of attribute, plus\n            // Xml: get string value of node content\n            //\n            target[form][0] = myxml.getNodeValue(term, 'single');\n            if (target[form][0].indexOf(\"%s\") > -1) {\n                this.opt.hasPlaceholderTerm = true;\n            }\n            //\n            // Xml: get string value of attribute, plus\n            // Xml: get string value of node content\n            //\n            target[form][1] = myxml.getNodeValue(term, 'multiple');\n            if (target[form][1].indexOf(\"%s\") > -1) {\n                this.opt.hasPlaceholderTerm = true;\n            }\n        } else {\n            //\n            // Xml: get string value of attribute, plus\n            // Xml: get string value of node content\n            //\n            target[form] = myxml.getNodeValue(term);\n            if (target[form].indexOf(\"%s\") > -1) {\n                this.opt.hasPlaceholderTerm = true;\n            }\n        }\n    }\n    if (!this.locale[lang_out].terms.supplement) {\n        this.locale[lang_out].terms.supplement = {};\n    }\n    if (!this.locale[lang_out].terms.supplement[\"long\"]) {\n        this.locale[lang_out].terms.supplement[\"long\"] = [\"supplement\", \"supplements\"];\n    }\n    // If locale had a CSL 1.0.1-style ordinal definition, install the logic object\n    // and iterate over gendered terms, filling in default values for use by getTerm.\n    if (ordinals101_toggle) {\n        for (var ikey in genderized_terms) {\n            var gender_segments = {};\n            var form_segments = 0;\n            for (var jkey in this.locale[lang_out].terms[ikey]) {\n                if ([\"masculine\",\"feminine\"].indexOf(jkey) > -1) {\n                    gender_segments[jkey] = this.locale[lang_out].terms[ikey][jkey];\n                } else {\n                    form_segments += 1;\n                }\n            }\n            if (!form_segments) {\n                if (gender_segments.feminine) {\n                    // Link each feminine form segment to default\n                    // (no need to filter, these will not have gender segments mixed in)\n                    for (var jkey in gender_segments.feminine) {\n                        this.locale[lang_out].terms[ikey][jkey] = gender_segments.feminine[jkey];\n                    }\n                } else if (gender_segments.masculine) {\n                    // Otherwise link each masculine form segment to default \n                    for (var jkey in gender_segments.masculine) {\n                        this.locale[lang_out].terms[ikey][jkey] = gender_segments.masculine[jkey];\n                    }\n                }\n            }\n        }\n        this.locale[lang_out].ord['1.0.1'] = ordinals101;\n    }\n\n    // Iterate over main segments, and fill in any holes in gender-specific data\n    // sub-segments\n    for (termname in this.locale[lang_out].terms) {\n        for (i = 0, ilen = 2; i < ilen; i += 1) {\n            genderform = CSL.GENDERS[i];\n            if (this.locale[lang_out].terms[termname][genderform]) {\n                for (form in this.locale[lang_out].terms[termname]) {\n                    if (!this.locale[lang_out].terms[termname][genderform][form]) {\n                        this.locale[lang_out].terms[termname][genderform][form] = this.locale[lang_out].terms[termname][form];\n                    }\n                }\n            }\n        }\n    }\n    //\n    // Xml: get list of nodes by node type\n    //\n    nodes = myxml.getNodesByName(locale, 'style-options');\n    for (pos = 0, len = myxml.numberofnodes(nodes); pos < len; pos += 1) {\n        if (true) {\n            styleopts = nodes[pos];\n            //\n            // Xml: get list of attributes on a node\n            //\n            attributes = myxml.attributes(styleopts);\n            for (attrname in attributes) {\n                if (attributes.hasOwnProperty(attrname)) {\n                    if (attrname === \"@punctuation-in-quote\" || attrname === \"@limit-day-ordinals-to-day-1\") {\n                        if (attributes[attrname] === \"true\") {\n                            // trim off leading @\n                            this.locale[lang_out].opts[attrname.slice(1)] = true;\n                        } else {\n                            // trim off leading @\n                            this.locale[lang_out].opts[attrname.slice(1)] = false;\n                        }\n                    } else if (attrname === \"@jurisdiction-preference\") {\n                        var jurisdiction_preference = attributes[attrname].split(/\\s+/);\n                        this.locale[lang_out].opts[attrname.slice(1)] = jurisdiction_preference;\n                    } else if (attrname === \"@skip-words\") {\n                        var skip_words = attributes[attrname].split(/\\s*,\\s*/);\n                        this.locale[lang_out].opts[attrname.slice(1)] = skip_words;\n                    } else if (attrname === \"@leading-noise-words\") {\n                        var val = attributes[attrname].split(/\\s*,\\s*/);\n                        this.locale[lang_out].opts[\"leading-noise-words\"] = val;\n                    } else if (attrname === \"@name-as-sort-order\") {\n                        // Fallback is okay here.\n                        this.locale[lang_out].opts[\"name-as-sort-order\"] = {};\n                        var lst = attributes[attrname].split(/\\s+/);\n                        for (var i=0,ilen=lst.length;i<ilen;i+=1) {\n                            this.locale[lang_out].opts[\"name-as-sort-order\"][lst[i]] = true;\n                        }\n                    } else if (attrname === \"@name-as-reverse-order\") {\n                        // Fallback is okay here.\n                        this.locale[lang_out].opts[\"name-as-reverse-order\"] = {};\n                        var lst = attributes[attrname].split(/\\s+/);\n                        for (var i=0,ilen=lst.length;i<ilen;i+=1) {\n                            this.locale[lang_out].opts[\"name-as-reverse-order\"][lst[i]] = true;\n                        }\n                    } else if (attrname === \"@name-never-short\") {\n                        // Here too.\n                        this.locale[lang_out].opts[\"name-never-short\"] = {};\n                        var lst = attributes[attrname].split(/\\s+/);\n                        for (var i=0,ilen=lst.length;i<ilen;i+=1) {\n                            this.locale[lang_out].opts[\"name-never-short\"][lst[i]] = true;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    //\n    // Xml: get list of nodes by type\n    //\n    nodes = myxml.getNodesByName(locale, 'date');\n    for (pos = 0, len = myxml.numberofnodes(nodes); pos < len; pos += 1) {\n        if (true) {\n            var date = nodes[pos];\n            //\n            // Xml: get string value of attribute\n            //\n            this.locale[lang_out].dates[myxml.getAttributeValue(date, \"form\")] = date;\n        }\n    }\n    //\n    // Xml: get list of nodes by node type\n    //\n    CSL.SET_COURT_CLASSES(this, lang_out, myxml, locale);\n};\n\n\nCSL.getLocaleNames = function (myxml, preferredLocale) {\n    var stylexml = CSL.setupXml(myxml);\n\n    function extendLocaleList(localeList, locale) {\n        var forms = [\"base\", \"best\"];\n        if (locale) {\n            var normalizedLocale = CSL.localeResolve(locale);\n            for (var i=0,ilen=forms.length;i<ilen;i++) {\n                if (normalizedLocale[forms[i]] && localeList.indexOf(normalizedLocale[forms[i]]) === -1) {\n                    localeList.push(normalizedLocale[forms[i]]);\n                }\n            }\n        }\n    }\n    \n    var localeIDs = [\"en-US\"];\n    \n    function sniffLocaleOnOneNodeName(nodeName) {\n        var nodes = stylexml.getNodesByName(stylexml.dataObj, nodeName);\n        for (var i=0,ilen=nodes.length;i<ilen;i++) {\n            var nodeLocales = stylexml.getAttributeValue(nodes[i], \"locale\");\n            if (nodeLocales) {\n                nodeLocales = nodeLocales.split(/ +/);\n                for (var j=0,jlen=nodeLocales.length;j<jlen;j++) {\n                    this.extendLocaleList(localeIDs, nodeLocales[j]);\n                }\n            }\n        }\n    }\n\n    extendLocaleList(localeIDs, preferredLocale);\n\n    var styleNode = stylexml.getNodesByName(stylexml.dataObj, \"style\")[0];\n    var defaultLocale = stylexml.getAttributeValue(styleNode, \"default-locale\");\n    extendLocaleList(localeIDs, defaultLocale);\n\n    var nodeNames = [\"layout\", \"if\", \"else-if\", \"condition\"];\n    for (var i=0,ilen=nodeNames.length;i<ilen;i++) {\n        sniffLocaleOnOneNodeName(stylexml, localeIDs, nodeNames[i]);\n    }\n    return localeIDs;\n};\n\n/*global CSL: true */\n\nCSL.Node = {};\n\nCSL.Node.bibliography = {\n    build: function (state, target) {\n        if (this.tokentype === CSL.START) {\n\n            state.build.area = \"bibliography\";\n            state.build.root = \"bibliography\";\n            state.build.extension = \"\";\n\n            var func = function(state) {\n                state.tmp.area = \"bibliography\";\n                state.tmp.root = \"bibliography\";\n                state.tmp.extension = \"\";\n            };\n            this.execs.push(func);\n\n        }\n        target.push(this);\n    }\n};\n\n\n/*global CSL: true */\n\nCSL.Node.choose = {\n    build: function (state, target) {\n        var func;\n        if (this.tokentype === CSL.START) {\n            //open condition\n            func = function (state) {\n                state.tmp.jump.push(undefined, CSL.LITERAL);\n            };\n        }\n        if (this.tokentype === CSL.END) {\n            //close condition\n            func = function (state) {\n                state.tmp.jump.pop();\n            };\n        }\n        this.execs.push(func);\n        target.push(this);\n    },\n\n    configure: function (state, pos) {\n        if (this.tokentype === CSL.END) {\n            state.configure.fail.push((pos));\n            state.configure.succeed.push((pos));\n        } else {\n            state.configure.fail.pop();\n            state.configure.succeed.pop();\n        }\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node.citation = {\n    build: function (state, target) {\n        if (this.tokentype === CSL.START) {\n\n            state.build.area = \"citation\";\n            state.build.root = \"citation\";\n            state.build.extension = \"\";\n\n\n            var func = function(state) {\n                state.tmp.area = \"citation\";\n                state.tmp.root = \"citation\";\n                state.tmp.extension = \"\";\n            };\n            this.execs.push(func);\n\n/*\n            state.build.root = \"citation\";\n\n            OK state.fixOpt(this, \"names-delimiter\", \"delimiter\");\n            OK state.fixOpt(this, \"name-delimiter\", \"delimiter\");\n            OK state.fixOpt(this, \"name-form\", \"form\");\n            OK state.fixOpt(this, \"and\", \"and\");\n            OK state.fixOpt(this, \"delimiter-precedes-last\", \"delimiter-precedes-last\");\n            OK state.fixOpt(this, \"delimiter-precedes-et-al\", \"delimiter-precedes-et-al\");\n            OK state.fixOpt(this, \"initialize-with\", \"initialize-with\");\n            OK state.fixOpt(this, \"initialize\", \"initialize\");\n            OK state.fixOpt(this, \"name-as-sort-order\", \"name-as-sort-order\");\n            OK state.fixOpt(this, \"sort-separator\", \"sort-separator\");\n\n            OK state.fixOpt(this, \"et-al-min\", \"et-al-min\");\n            OK state.fixOpt(this, \"et-al-use-first\", \"et-al-use-first\");\n            OK state.fixOpt(this, \"et-al-use-last\", \"et-al-use-last\");\n            state.fixOpt(this, \"et-al-subsequent-min\", \"et-al-subsequent-min\");\n            state.fixOpt(this, \"et-al-subsequent-use-first\", \"et-al-subsequent-use-first\");\n*/\n        }\n        if (this.tokentype === CSL.END) {\n\n            // Open an extra key at first position for use in\n            // grouped sorts.\n            // print(\"in cs:citation END\");\n            state.opt.grouped_sort = state.opt.xclass === \"in-text\" \n                && (state.citation.opt.collapse \n                    && state.citation.opt.collapse.length)\n                || (state.citation.opt.cite_group_delimiter\n                    && state.citation.opt.cite_group_delimiter.length)\n                && state.opt.update_mode !== CSL.POSITION\n                && state.opt.update_mode !== CSL.NUMERIC;\n            \n            if (state.opt.grouped_sort \n                && state.citation_sort.opt.sort_directions.length) {\n                \n                var firstkey = state.citation_sort.opt.sort_directions[0].slice();\n                //print(\"extending sort keys \"+state.citation_sort.opt.sort_directions+\" with \"+firstkey);\n                state.citation_sort.opt.sort_directions = [firstkey].concat(state.citation_sort.opt.sort_directions);\n                // print(\"new key directions in effect: \"+state.citation_sort.opt.sort_directions);\n            }\n            // print(\"creating new comparifier\");\n            state.citation.srt = new CSL.Registry.Comparifier(state, \"citation_sort\");\n        }\n        target.push(this);\n    }\n};\n\n\n/*global CSL: true */\n\nCSL.Node[\"#comment\"] = {\n       // This is a comment in the CSL file.\n       build: function () {\n        // Save some space in the log files -- no need to mention this, really.\n        // CSL.debug(\"CSL processor warning: comment node reached\");\n       }\n};\n\n/*global CSL: true */\n\nCSL.Node.date = {\n    build: function (state, target) {\n        var func, date_obj, len, pos, part, dpx, parts, mypos, start, end;\n        if (this.tokentype === CSL.START || this.tokentype === CSL.SINGLETON) {\n            // used to collect rendered date part names in node_datepart,\n            // for passing through to node_key, for use in dates embedded\n            // in macros\n            state.dateput.string(state, state.dateput.queue);\n            state.tmp.date_token = CSL.Util.cloneToken(this);\n            state.tmp.date_token.strings.prefix = \"\";\n            state.tmp.date_token.strings.suffix = \"\";\n            state.dateput.openLevel(this);\n            state.build.date_parts = [];\n            state.build.date_variables = this.variables;\n            if (!state.build.extension) {\n                CSL.Util.substituteStart.call(this, state, target);\n            }\n            if (state.build.extension) {\n                func = CSL.dateMacroAsSortKey;\n            } else {\n                func = function (state, Item, item) {\n                    var dp;\n                    state.tmp.element_rendered_ok = false;\n                    state.tmp.donesies = [];\n                    state.tmp.dateparts = [];\n                    dp = [];\n                    //if (this.variables.length && Item[this.variables[0]]){\n                    if (this.variables.length\n                        && !(state.tmp.just_looking\n                             && this.variables[0] === \"accessed\")) {\n                        \n                        date_obj = Item[this.variables[0]];\n                        if (\"undefined\" === typeof date_obj) {\n                            date_obj = {\"date-parts\": [[0]] };\n                            if (state.opt.development_extensions.locator_date_and_revision) {\n                                if (item && this.variables[0] === \"locator-date\" && item[\"locator-date\"]) {\n                                    date_obj = item[\"locator-date\"];\n                                }\n                            }\n                        }\n                        state.tmp.date_object = date_obj;\n                        //\n                        // Call a function here to analyze the\n                        // data and set the name of the date-part that\n                        // should collapse for this range, if any.\n                        //\n                        // (1) build a filtered list, in y-m-d order,\n                        // consisting only of items that are (a) in the\n                        // date-parts and (b) in the *_end data.\n                        // (note to self: remember that season is a\n                        // fallback var when month and day are empty)\n                        \n                        //if (\"undefined\" === typeof this.dateparts) {\n                        //    this.dateparts = [\"year\", \"month\", \"day\"];\n                        //}\n                        len = this.dateparts.length;\n                        for (pos = 0; pos < len; pos += 1) {\n                            part = this.dateparts[pos];\n                            if (\"undefined\" !== typeof state.tmp.date_object[(part +  \"_end\")]) {\n                                dp.push(part);\n                            } else if (part === \"month\" && \"undefined\" !== typeof state.tmp.date_object.season_end) {\n                                dp.push(part);\n                            }\n                        }\n                        dpx = [];\n                        parts = [\"year\", \"month\", \"day\"];\n                        len = parts.length;\n                        for (pos = 0; pos < len; pos += 1) {\n                            if (dp.indexOf(parts[pos]) > -1) {\n                                dpx.push(parts[pos]);\n                            }\n                        }\n                        dp = dpx.slice();\n                        //\n                        // (2) Reverse the list and step through in\n                        // reverse order, popping each item if the\n                        // primary and *_end data match.\n                        mypos = 2;\n                        len = dp.length;\n                        for (pos = 0; pos < len; pos += 1) {\n                            part = dp[pos];\n                            start = state.tmp.date_object[part];\n                            end = state.tmp.date_object[(part + \"_end\")];\n                            if (start !== end) {\n                                mypos = pos;\n                                break;\n                            }\n                        }\n                        \n                        //\n                        // (3) When finished, the first item in the\n                        // list, if any, is the date-part where\n                        // the collapse should occur.\n\n                        // XXXXX: was that it?\n                        state.tmp.date_collapse_at = dp.slice(mypos);\n                        //\n                        // The collapse itself will be done by appending\n                        // string output for the date, less suffix,\n                        // placing a delimiter on output, then then\n                        // doing the *_end of the range, dropping only\n                        // the prefix.  That should give us concise expressions\n                        // of ranges.\n                        //\n                        // Numeric dates should not collapse, though,\n                        // and should probably use a slash delimiter.\n                        // Scope for configurability will remain (all over\n                        // the place), but this will do to get this feature\n                        // started.\n                        //\n                    } else {\n                        state.tmp.date_object = false;\n                    }\n                };\n            }\n            this.execs.push(func);\n\n            // newoutput\n            func = function (state, Item) {\n                if (!Item[this.variables[0]]) {\n                    return;\n                }\n                state.output.startTag(\"date\", this);\n                if (this.variables[0] === \"issued\"\n                    && (Item.type === \"legal_case\" || Item.type === \"legislation\")\n                    && state.opt.disable_duplicate_year_suppression.indexOf(Item.country) === -1\n                    && !state.tmp.extension\n                    && \"\" + Item[\"collection-number\"] === \"\" + state.tmp.date_object.year\n                    && this.dateparts.length === 1\n                    && this.dateparts[0] === \"year\") {\n\n                    // Set up to (maybe) suppress the year if we're not sorting, and\n                    // it's the same as the collection-number, and we would render\n                    // only the year, with not month or day, and this is a legal_case item.\n                    // We save a pointer to the blob parent and its position here. The\n                    // blob will be popped from output if at the end of processing for\n                    // this cite we find that we have rendered the collection-number\n                    // variable also.\n                    for (var key in state.tmp.date_object) {\n                        if (state.tmp.date_object.hasOwnProperty(key)) {\n                            if (key.slice(0, 4) === \"year\") {\n                                state.tmp.issued_date = {};\n                                var lst = state.output.current.mystack.slice(-2)[0].blobs;\n                                state.tmp.issued_date.list = lst;\n                                state.tmp.issued_date.pos = lst.length - 1;\n                            }\n                        }\n                    }\n                }\n            };\n            this.execs.push(func);\n        }\n\n        if (!state.build.extension && (this.tokentype === CSL.END || this.tokentype === CSL.SINGLETON)) {\n            // mergeoutput\n            func = function (state, Item) {\n                if (!Item[this.variables[0]]) {\n                    return;\n                }\n                state.output.endTag();\n            };\n            this.execs.push(func);\n        }\n        target.push(this);\n\n        if (this.tokentype === CSL.END || this.tokentype === CSL.SINGLETON) {\n            if (!state.build.extension) {\n                CSL.Util.substituteEnd.call(this, state, target);\n            }\n        }\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node[\"date-part\"] = {\n    build: function (state, target) {\n        var func, pos, len, first_date, value, value_end, real, have_collapsed, invoked, precondition, known_year, bc, ad, bc_end, ad_end, ready, curr, dcurr, number, num, formatter, item, blob;\n        if (!this.strings.form) {\n            this.strings.form = \"long\";\n        }\n        // used in node_date, to send a list of rendering date parts\n        // to node_key, for dates embedded in macros.\n        state.build.date_parts.push(this.strings.name);\n        //\n        // Set delimiter here, if poss.\n        //\n\n        var date_variable = state.build.date_variables[0];\n\n        function formatAndStrip(myform, gender, val) {\n            if (!val) {\n                return val;\n            }\n            val = \"\" + CSL.Util.Dates[this.strings.name][myform](state, val, gender, this.default_locale);\n            if (\"month\" === this.strings.name) {\n                if (state.tmp.strip_periods) {\n                    val = val.replace(/\\./g, \"\");\n                } else {\n                    for (var i = 0, ilen = this.decorations.length; i < ilen; i += 1) {\n                        if (\"@strip-periods\" === this.decorations[i][0] && \"true\" === this.decorations[i][1]) {\n                            val = val.replace(/\\./g, \"\");\n                            break;\n                        }\n                    }\n                }\n            }\n            return val;\n        }\n\n        func = function (state, Item) {\n\n            if (!state.tmp.date_object) {\n                return;\n            } else {\n                state.tmp.probably_rendered_something = true;\n            }\n\n            var last_string_output = \"\";\n\n            first_date = true;\n            value = \"\";\n            value_end = \"\";\n            state.tmp.donesies.push(this.strings.name);\n\n            // Render literal only when year is included in date output\n            if (state.tmp.date_object.literal && \"year\" === this.strings.name) {\n                last_string_output = state.tmp.date_object.literal;\n                state.output.append(state.tmp.date_object.literal, this);\n            }\n\n            if (state.tmp.date_object) {\n                value = state.tmp.date_object[this.strings.name];\n                value_end = state.tmp.date_object[(this.strings.name + \"_end\")];\n            }\n            if (\"year\" === this.strings.name && value === 0 && !state.tmp.suppress_decorations) {\n                value = false;\n            }\n            real = !state.tmp.suppress_decorations;\n            have_collapsed = state.tmp.have_collapsed;\n            invoked = state[state.tmp.area].opt.collapse === \"year-suffix\" || state[state.tmp.area].opt.collapse === \"year-suffix-ranged\";\n            precondition = state.opt[\"disambiguate-add-year-suffix\"];\n            if (real && precondition && invoked) {\n                state.tmp.years_used.push(value);\n                known_year = state.tmp.last_years_used.length >= state.tmp.years_used.length;\n                if (known_year && have_collapsed) {\n                    if (state.tmp.last_years_used[(state.tmp.years_used.length - 1)] === value) {\n                        value = false;\n                    }\n                }\n            }\n            if (\"undefined\" !== typeof value) {\n                bc = false;\n                ad = false;\n                bc_end = false;\n                ad_end = false;\n                if (\"year\" === this.strings.name) {\n                    if (parseInt(value, 10) < 500 && parseInt(value, 10) > 0) {\n                        ad = state.getTerm(\"ad\");\n                    }\n                    if (parseInt(value, 10) < 0) {\n                        bc = state.getTerm(\"bc\");\n                        value = (parseInt(value, 10) * -1);\n                    }\n                    if (value_end) {\n                        if (parseInt(value_end, 10) < 500 && parseInt(value_end, 10) > 0) {\n                            ad_end = state.getTerm(\"ad\");\n                        }\n                        if (parseInt(value_end, 10) < 0) {\n                            bc_end = state.getTerm(\"bc\");\n                            value_end = (parseInt(value_end, 10) * -1);\n                        }\n                    }\n                }\n\n                // For gendered locales\n                var monthnameid = \"\"+state.tmp.date_object.month;\n                while (monthnameid.length < 2) {\n                    monthnameid = \"0\"+monthnameid;\n                }\n                monthnameid = \"month-\"+monthnameid;\n                var gender = state.locale[state.opt.lang][\"noun-genders\"][monthnameid];\n                if (this.strings.form) {\n                    var myform = this.strings.form;\n                    var myform_end = this.strings.form;\n                    if (this.strings.name === \"day\") {\n                        if (myform === \"ordinal\" && state.locale[state.opt.lang].opts[\"limit-day-ordinals-to-day-1\"]) {\n                            if (value != 1) {\n                                myform = \"numeric\";\n                            }\n                            if (value_end != 1) {\n                                myform_end = \"numeric\";\n                            }\n                        }\n                    }\n                    value = formatAndStrip.call(this, myform, gender, value);\n                    value_end = formatAndStrip.call(this, myform_end, gender, value_end);\n                }\n                state.output.openLevel(\"empty\");\n                if (state.tmp.date_collapse_at.length) {\n                    //state.output.startTag(this.strings.name,this);\n                    ready = true;\n                    len = state.tmp.date_collapse_at.length;\n                    for (pos = 0; pos < len; pos += 1) {\n                        item = state.tmp.date_collapse_at[pos];\n                        if (state.tmp.donesies.indexOf(item) === -1) {\n                            ready = false;\n                            break;\n                        }\n                    }\n                    if (ready) {\n                        if (\"\" + value_end !== \"0\") {\n                            if (state.dateput.queue.length === 0) {\n                                first_date = true;\n                            }\n\n                            // OK! So if the actual data has no month, day or season,\n                            // and we reach this block, then we can combine the dates\n                            // to a string, run minimial-two, and output the trailing\n                            // year right here. No impact on other functionality.\n\n                            if (state.opt[\"year-range-format\"]\n                                && state.opt[\"year-range-format\"] !== \"expanded\"\n                                && !state.tmp.date_object.day\n                                && !state.tmp.date_object.month\n                                && !state.tmp.date_object.season\n                                && this.strings.name === \"year\"\n                                && value && value_end) {\n\n                                // second argument adjusts collapse as required for years\n                                // See OSCOLA section 1.3.2\n                                value_end = state.fun.year_mangler(value + \"-\" + value_end, true);\n                                var range_delimiter = state.getTerm(\"year-range-delimiter\");\n                                value_end = value_end.slice(value_end.indexOf(range_delimiter) + 1);\n                            }\n                            last_string_output = value_end;\n                            state.dateput.append(value_end, this);\n                            if (first_date) {\n                                blob = state.dateput.current.value().blobs[0];\n                                if (blob) {\n                                    blob.strings.prefix = \"\";\n                                }\n\n                            }\n                        }\n                        last_string_output = value;\n                        state.output.append(value, this);\n                        curr = state.output.current.value();\n                        blob = curr.blobs[(curr.blobs.length - 1)];\n                        if (blob) {\n                            blob.strings.suffix = \"\";\n                        }\n\n                        if (this.strings[\"range-delimiter\"]) {\n                            state.output.append(this.strings[\"range-delimiter\"]);\n                        } else {\n                            state.output.append(state.getTerm(\"year-range-delimiter\"), \"empty\");\n                        }\n                        state.dateput.closeLevel();\n                        dcurr = state.dateput.current.value();\n                        curr.blobs = curr.blobs.concat(dcurr);\n                        // This may leave the stack pointer on a lower level.\n                        // It's not a problem because the stack will be clobbered\n                        // when the queue is initialized by the next cs:date node.\n                        state.dateput.string(state, state.dateput.queue);\n                        state.dateput.openLevel(state.tmp.date_token);\n                        state.tmp.date_collapse_at = [];\n                    } else {\n                        last_string_output = value;\n                        state.output.append(value, this);\n                        // print(\"collapse_at: \"+state.tmp.date_collapse_at);\n                        if (state.tmp.date_collapse_at.indexOf(this.strings.name) > -1) {\n                            //\n                            // Use ghost dateput queue\n                            //\n                            if (\"\" + value_end !== \"0\") {\n                                //\n                                // XXXXX: It's a workaround.  It's ugly.\n                                // There's another one above.\n                                //\n                                if (state.dateput.queue.length === 0) {\n                                    first_date = true;\n                                }\n                                state.dateput.openLevel(\"empty\");\n                                last_string_output = value_end;\n                                state.dateput.append(value_end, this);\n                                if (first_date) {\n                                    blob = state.dateput.current.value().blobs[0];\n                                    if (blob) {\n                                        blob.strings.prefix = \"\";\n                                    }\n                                }\n                                if (bc) {\n                                    last_string_output = bc;\n                                    state.dateput.append(bc);\n                                }\n                                if (ad) {\n                                    last_string_output = ad;\n                                    state.dateput.append(ad);\n                                }\n                                state.dateput.closeLevel();\n                            }\n                        }\n                    }\n                } else {\n                    last_string_output = value;\n                    state.output.append(value, this);\n                }\n\n                if (bc) {\n                    last_string_output = bc;\n                    state.output.append(bc);\n                }\n                if (ad) {\n                    last_string_output = ad;\n                    state.output.append(ad);\n                }\n                state.output.closeLevel();\n                //state.output.endTag();\n            } else if (\"month\" === this.strings.name) {\n                // XXX The simpler solution here will be to\n                // directly install season and season_end on\n                // month, with a value of 13, 14, 15, 16, or\n                // (to allow correct ranging with Down Under\n                // dates) 17 or 18.  That will allow ranging\n                // to take place in the normal way.  With this\n                // \"approach\", it doesn't.\n                //\n                // No value for this target variable\n                //\n                if (state.tmp.date_object.season) {\n                    value = \"\" + state.tmp.date_object.season;\n                    if (value && value.match(/^[1-4]$/)) {\n                        // XXXXXXXXXXXXXXXXXXX was replace([false, false, true]);\n                        //state.tmp.group_context.replace([false, false, true]);\n                        state.tmp.group_context.tip.variable_success = true;\n                        last_string_output = \"winter\";\n                        state.output.append(state.getTerm((\"season-0\" + value)), this);\n                    } else if (value) {\n                        last_string_output = value;\n                        state.output.append(value, this);\n                    }\n                }\n            }\n            state.tmp.value = [];\n            if (Item[date_variable] && (value || state.tmp.have_collapsed) && !state.opt.has_year_suffix && \"year\" === this.strings.name && !state.tmp.just_looking) {\n                if (state.registry.registry[Item.id] && state.registry.registry[Item.id].disambig.year_suffix !== false && !state.tmp.has_done_year_suffix) {\n                    state.tmp.has_done_year_suffix = true;\n                    last_string_output = \"x\";\n                    num = parseInt(state.registry.registry[Item.id].disambig.year_suffix, 10);\n                    // first argument is for number particle [a-zA-Z], never present on dates\n                    number = new CSL.NumericBlob(state, false, num, this, Item.id);\n                    this.successor_prefix = state[state.build.area].opt.layout_delimiter;\n                    this.splice_prefix = state[state.build.area].opt.layout_delimiter;\n                    formatter = new CSL.Util.Suffixator(CSL.SUFFIX_CHARS);\n                    number.setFormatter(formatter);\n                    if (state[state.tmp.area].opt.collapse === \"year-suffix-ranged\") {\n                        number.range_prefix = state.getTerm(\"citation-range-delimiter\");\n                    }\n                    if (state[state.tmp.area].opt.cite_group_delimiter) {\n                        number.successor_prefix = state[state.tmp.area].opt.cite_group_delimiter;\n                    } else if (state[state.tmp.area].opt[\"year-suffix-delimiter\"]) {\n                        number.successor_prefix = state[state.tmp.area].opt[\"year-suffix-delimiter\"];\n                    } else {\n                        number.successor_prefix = state[state.tmp.area].opt.layout_delimiter;\n                    }\n                    number.UGLY_DELIMITER_SUPPRESS_HACK = true;\n                    state.output.append(number, \"literal\");\n                }\n            }\n            if (last_string_output && !state.tmp.group_context.tip.condition) {\n                state.tmp.just_did_number = last_string_output.match(/[0-9]$/);\n                if (state.output.current.tip.strings.suffix) {\n                    state.tmp.just_did_number = false;\n                }\n            }\n        };\n        this.execs.push(func);\n        target.push(this);\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node[\"else-if\"] = {\n    //\n    // these function are the same as those in if, might just clone\n    build: function (state, target) {\n        CSL.Conditions.TopNode.call(this, state, target);\n        target.push(this);\n    },\n    configure: function (state, pos) {\n        CSL.Conditions.Configure.call(this, state, pos);\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node[\"else\"] = {\n    build: function (state, target) {\n        target.push(this);\n    },\n    configure: function (state, pos) {\n        if (this.tokentype === CSL.START) {\n            state.configure.fail[(state.configure.fail.length - 1)] = pos;\n        }\n    }\n};\n\n\n/*global CSL: true */\n\nCSL.Node[\"et-al\"] = {\n    build: function (state, target) {\n        if (state.build.area === \"citation\" || state.build.area === \"bibliography\") {\n            var func = function (state) {\n                state.tmp.etal_node = this;\n                if (\"string\" === typeof this.strings.term) {\n                    state.tmp.etal_term = this.strings.term;\n                }\n            };\n            this.execs.push(func);\n        }\n        target.push(this);\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node.group = {\n    build: function (state, target, realGroup) {\n        var func, execs;\n        this.realGroup = realGroup;\n        if (this.tokentype === CSL.START) {\n            CSL.Util.substituteStart.call(this, state, target);\n            if (state.build.substitute_level.value()) {\n                state.build.substitute_level.replace((state.build.substitute_level.value() + 1));\n            }\n            if (!this.juris) {\n                target.push(this);\n            }\n\n            // newoutput\n            func = function (state) {\n                state.output.startTag(\"group\", this);\n                \n                if (this.strings.label_form_override) {\n                    if (!state.tmp.group_context.tip.label_form) {\n                        state.tmp.group_context.tip.label_form = this.strings.label_form_override;\n                    }\n                }\n                \n                if (this.strings.label_capitalize_if_first_override) {\n                    if (!state.tmp.group_context.tip.label_capitalize_if_first) {\n                        state.tmp.group_context.tip.label_capitalize_if_first = this.strings.label_capitalize_if_first_override;\n                    }\n                }\n                \n                if (this.realGroup) {\n                    \n                    if (state.tmp.group_context.tip.condition) {\n                        CSL.UPDATE_GROUP_CONTEXT_CONDITION(state, this.strings.prefix, null, this);\n                    }\n                    \n                    var condition = false;\n                    var force_suppress = false;\n\n                    // XXX Can we do something better for length here?\n                    if (state.tmp.group_context.mystack.length) {\n                        state.output.current.value().parent = state.tmp.group_context.tip.output_tip;\n                    }\n                    \n                    // fieldcontextflag\n                    var label_form = state.tmp.group_context.tip.label_form;\n                    if (!label_form) {\n                        label_form = this.strings.label_form_override;\n                    }\n                    \n                    var label_capitalize_if_first = state.tmp.group_context.tip.label_capitalize_if_first;\n                    if (!label_capitalize_if_first) {\n                        label_capitalize_if_first = this.strings.label_capitalize_if_first;\n                    }\n                    if (state.tmp.group_context.tip.condition) {\n                        condition = state.tmp.group_context.tip.condition;\n                        force_suppress = state.tmp.group_context.tip.force_suppress;\n                        //force_suppress: false;\n                    } else if (this.strings.reject) {\n                        condition = {\n                            test: this.strings.reject,\n                            not: true\n                        };\n                    } else if (this.strings.require) {\n                        condition = {\n                            test: this.strings.require,\n                            not: false\n                        };\n                    }\n                    var context = {\n                        old_term_predecessor: state.tmp.term_predecessor,\n                        term_intended: false,\n                        variable_attempt: false,\n                        variable_success: false,\n                        variable_success_parent: state.tmp.group_context.tip.variable_success,\n                        output_tip: state.output.current.tip,\n                        label_form: label_form,\n                        label_static: state.tmp.group_context.tip.label_static,\n                        label_capitalize_if_first: label_capitalize_if_first,\n                        parallel_delimiter_override: this.strings.set_parallel_delimiter_override,\n                        parallel_delimiter_override_on_suppress: this.strings.set_parallel_delimiter_override_on_suppress,\n                        condition: condition,\n                        force_suppress: force_suppress,\n                        done_vars: state.tmp.group_context.tip.done_vars.slice()\n                    };\n                    if(this.non_parallel) {\n                        var non_parallel = state.tmp.group_context.tip.non_parallel;\n                        if (!non_parallel) {\n                            non_parallel = {};\n                        }\n                        Object.assign(non_parallel, this.non_parallel);\n                        context.non_parallel = non_parallel;\n                    }\n                    if(this.parallel_first) {\n                        var parallel_first = state.tmp.group_context.tip.parallel_first;\n                        if (!parallel_first) {\n                            parallel_first = {};\n                        }\n                        Object.assign(parallel_first, this.parallel_first);\n                        context.parallel_first = parallel_first;\n                    }\n                    if(this.parallel_last) {\n                        var parallel_last = state.tmp.group_context.tip.parallel_last;\n                        if (!parallel_last) {\n                            parallel_last = {};\n                        }\n                        Object.assign(parallel_last, this.parallel_last);\n                        context.parallel_last = parallel_last;\n                    }\n                    if (state.tmp.abbrev_trimmer && state.tmp.abbrev_trimmer.LAST_TO_FIRST && context.parallel_last) {\n                        if (!context.parallel_first) {\n                            context.parallel_first = {};\n                        }\n                        for (var varname in state.tmp.abbrev_trimmer.LAST_TO_FIRST) {\n                            if (context.parallel_last[varname]) {\n                                context.parallel_first[varname] = true;\n                                delete context.parallel_last[varname];\n                            }\n                        }\n                    }\n                    \n                    /*\n                    if(this.parallel_last_override) {\n                        var parallel_last_override = state.tmp.group_context.tip.parallel_last_override;\n                        if (!parallel_last_override) {\n                            parallel_last_override = {};\n                        }\n                        Object.assign(parallel_last_override, this.parallel_last_override);\n                        context.parallel_last_override = parallel_last_override;\n                    }\n                     */\n                    state.tmp.group_context.push(context);\n\n                    if (state.tmp.abbrev_trimmer && this.parallel_last_to_first) {\n                        if (!state.tmp.abbrev_trimmer.LAST_TO_FIRST) {\n                            state.tmp.abbrev_trimmer.LAST_TO_FIRST = {};\n                        }\n                        for (var varname in this.parallel_last_to_first) {\n                            state.tmp.abbrev_trimmer.LAST_TO_FIRST[varname] = true;\n                        }\n                    }\n                    \n                    //if (!state.tmp.just_looking) {\n                    //    print(\"       flags=\"+JSON.stringify(state.tmp.group_context.tip, params))\n                    //}\n                }\n            };\n            //\n            // Paranoia.  Assure that this init function is the first executed.\n            execs = [];\n            execs.push(func);\n            this.execs = execs.concat(this.execs);\n\n            // \"Special handling\" for nodes that contain only\n            // publisher and place, with no affixes. For such\n            // nodes only, parallel publisher/place pairs\n            // will be parsed out and properly joined, piggybacking on\n            // join parameters set on cs:citation or cs:bibliography.\n            if (this.strings[\"has-publisher-and-publisher-place\"]) {\n                // Pass variable string values to the closing\n                // tag via a global, iff they conform to expectations.\n                state.build[\"publisher-special\"] = true;\n                if (this.strings[\"subgroup-delimiter\"]) {\n                    // Set the handling function only if name-delimiter\n                    // is set on the parent cs:citation or cs:bibliography\n                    // node.\n                    func = function (state, Item) {\n                        if (Item.publisher && Item[\"publisher-place\"]) {\n                            var publisher_lst = Item.publisher.split(/;\\s*/);\n                            var publisher_place_lst = Item[\"publisher-place\"].split(/;\\s*/);\n                            if (publisher_lst.length > 1\n                                && publisher_lst.length === publisher_place_lst.length) {\n                                state.publisherOutput = new CSL.PublisherOutput(state, this);\n                                state.publisherOutput[\"publisher-list\"] = publisher_lst;\n                                state.publisherOutput[\"publisher-place-list\"] = publisher_place_lst;\n                            }\n                        }\n                    };\n                    this.execs.push(func);\n                }\n            }\n\n            if (this.juris) {\n                // \"Special handling\" for jurisdiction macros\n                // We try to instantiate these as standalone token lists.\n                // If available, the token list is executed,\n                // the result is written directly into output,\n                // and control returns here.\n\n                // So we'll have something like this:\n                // * expandMacro() in util_node.js flags juris- macros\n                //   on build. [DONE]\n                // * Those are picked up here, and\n                //   - A runtime function attempts to fetch and instantiate\n                //     the macros in separate token lists under a segment\n                //     opened for the jurisdiction. We assume that the\n                //     jurisdiction has a full set of macros. That will need\n                //     to be enforced by validation. [DONE HERE, function is TODO]\n                //   - Success or failure is marked in a runtime flag object\n                //     (in citeproc.opt). [DONE]\n                //   - After the instantiation function comes a test, for\n                //     juris- macros only, which either runs diverted code,\n                //     or proceeds as per normal through the token list. [TODO]\n                // I think that's all there is to it.\n                \n                // Code for fetching an instantiating?\n\n                var choose_start = new CSL.Token(\"choose\", CSL.START);\n                CSL.Node.choose.build.call(choose_start, state, target);\n                \n                var if_start = new CSL.Token(\"if\", CSL.START);\n\n                func = (function (macroName) {\n                    return function (Item, item) {\n                        return CSL.INIT_JURISDICTION_MACROS(state, Item, item, macroName);\n                    }\n                }(this.juris));\n                \n                if_start.tests ? {} : if_start.tests = [];\n                if_start.tests.push(func);\n                if_start.test = state.fun.match.any(if_start, state, if_start.tests);\n                target.push(if_start);\n                var text_node = new CSL.Token(\"text\", CSL.SINGLETON);\n                func = function (state, Item, item) {\n                    // This will run the juris- token list.\n                    var itemItem = Item;\n                    if (item && item[\"best-jurisdiction\"] && this.juris === \"juris-locator\") {\n                        itemItem = item;\n                    }\n                    var next = 0;\n                    if (state.juris[itemItem[\"best-jurisdiction\"]][this.juris]) {\n                        while (next < state.juris[itemItem[\"best-jurisdiction\"]][this.juris].length) {\n                            next = CSL.tokenExec.call(state, state.juris[itemItem[\"best-jurisdiction\"]][this.juris][next], Item, item);\n                        }\n                    }\n                };\n                text_node.juris = this.juris;\n                text_node.execs.push(func);\n                target.push(text_node);\n\n                var if_end = new CSL.Token(\"if\", CSL.END);\n                CSL.Node[\"if\"].build.call(if_end, state, target);\n                var else_start = new CSL.Token(\"else\", CSL.START);\n                CSL.Node[\"else\"].build.call(else_start, state, target);\n            }\n        }\n\n        if (this.tokentype === CSL.END) {\n            \n            // Unbundle and print publisher lists\n            // Same constraints on creating the necessary function here\n            // as above. The full content of the group formatting token\n            // is apparently not available on the closing tag here,\n            // hence the global flag on state.build.\n            if (state.build[\"publisher-special\"]) {\n                state.build[\"publisher-special\"] = false;\n                func = function (state) {\n                    if (state.publisherOutput) {\n                        state.publisherOutput.render();\n                        state.publisherOutput = false;\n                    }\n                };\n                this.execs.push(func);\n            }\n            \n            // quashnonfields\n            func = function (state, Item, item) {\n                if (!state.tmp.group_context.tip.condition) {\n                    if (state.output.current.tip.strings.suffix) {\n                        state.tmp.just_did_number = false;\n                    }\n                }\n                state.output.endTag();\n                if (this.realGroup) {\n                    var flags = state.tmp.group_context.pop();\n                    if (flags.parallel_delimiter_override) {\n                        state.tmp.group_context.tip.parallel_delimiter_override = flags.parallel_delimiter_override;\n                        if (!state.tmp.just_looking && state.registry.registry[Item.id].master) {\n                            state.registry.registry[Item.id].parallel_delimiter_override = flags.parallel_delimiter_override;\n                        }\n                    }\n                    if (flags.parallel_delimiter_override_on_suppress) {\n                        state.tmp.group_context.tip.parallel_delimiter_override_on_suppress = flags.parallel_delimiter_override_on_suppress;\n                    }\n                    if (state.tmp.area === \"bibliography_sort\") {\n                        var citationNumberIdx = flags.done_vars.indexOf(\"citation-number\");\n                        if (this.strings.sort_direction && citationNumberIdx > -1 && state.tmp.group_context.length() == 1) {\n                            if (this.strings.sort_direction === CSL.DESCENDING) {\n                                state.bibliography_sort.opt.citation_number_sort_direction = CSL.DESCENDING;\n                            } else {\n                                state.bibliography_sort.opt.citation_number_sort_direction = CSL.ASCENDING;\n                            }\n                            flags.done_vars = flags.done_vars.slice(0, citationNumberIdx).concat(flags.done_vars.slice(citationNumberIdx + 1))\n                        }\n                    }\n                    //var params = [\"condition\", \"variable_success\", \"force_suppress\",\"term_intended\", \"variable_attempt\"]\n                    //if (!state.tmp.just_looking) {\n                    //    print(\"POP parent=\"+JSON.stringify(state.tmp.group_context.tip, params))\n                    //    print(\"    flags=\"+JSON.stringify(flags, params));\n                    //}\n                    if (flags.condition) {\n                        flags.force_suppress = CSL.EVALUATE_GROUP_CONDITION(state, flags);\n                    }\n                    if (state.tmp.group_context.tip.condition) {\n                        state.tmp.group_context.tip.force_suppress = flags.force_suppress;\n                    }\n                            \n                    if (!flags.force_suppress && (flags.variable_success || (flags.term_intended && !flags.variable_attempt))) {\n                        if (!this.isJurisLocatorLabel) {\n                            state.tmp.group_context.tip.variable_success = true;\n                        }\n                        var blobs = state.output.current.value().blobs;\n                        var pos = state.output.current.value().blobs.length - 1;\n\n                        if (!state.tmp.just_looking && (flags.non_parallel || flags.parallel_last || flags.parallel_first || flags.parallel_delimiter_override || flags.parallel_delimiter_override_on_suppress)) {\n                            // flags.parallel_last\n                            // flags.parallel_first\n\n                            // Returns true ONLY if all variables listed on this group are repeats.\n                            var hasRepeat = state.parallel.checkRepeats(flags);\n                            if (hasRepeat) {\n                                if (blobs) {\n                                    blobs.pop();\n                                }\n                            }\n                            if (state.tmp.cite_index > 0 && (hasRepeat || (!flags.parallel_first && !flags.parallel_last && !flags.non_parallel))) {\n                                //state.sys.print(`${state.tmp.cite_index} ${JSON.stringify(state.tmp.suppress_repeats, null, 2)}`)\n                                var info = state.tmp.suppress_repeats[state.tmp.cite_index-1];\n                                if (hasRepeat && flags.parallel_delimiter_override_on_suppress && (info.SIBLING || info.ORPHAN)) {\n                                    state.output.queue.slice(-1)[0].parallel_delimiter = flags.parallel_delimiter_override_on_suppress;\n                                } else if (flags.parallel_delimiter_override && info.SIBLING) {\n                                    state.output.queue.slice(-1)[0].parallel_delimiter = flags.parallel_delimiter_override;\n                                }\n                            }\n                        }\n                    } else {\n                        state.tmp.term_predecessor = flags.old_term_predecessor;\n                        state.tmp.group_context.tip.variable_attempt = flags.variable_attempt;\n                        if (flags.force_suppress && !state.tmp.group_context.tip.condition) {\n                            state.tmp.group_context.tip.variable_attempt = true;\n                            state.tmp.group_context.tip.variable_success = flags.variable_success_parent;\n                        }\n                        if (flags.force_suppress) {\n                            // 2019-04-15\n                            // This is removing variables done within the group we're leaveing from global\n                            // done_vars? How does that make sense?\n                            // Ah. This is a FAILURE. So removing from done_vars allows it to re-render\n                            // later in the cite if desired.\n                            // Currently no tests fail from removing the condition, but leaving it in.\n                            for (var i=0,ilen=flags.done_vars.length;i<ilen;i++) {\n                                var doneVar = flags.done_vars[i];\n                                for (var j=0,jlen=state.tmp.done_vars.length; j<jlen; j++) {\n                                    if (state.tmp.done_vars[j] === doneVar) {\n                                        state.tmp.done_vars = state.tmp.done_vars.slice(0, j).concat(state.tmp.done_vars.slice(j+1));\n                                    }\n                                }\n                            }\n                        }\n                        if (state.output.current.value().blobs) {\n                            state.output.current.value().blobs.pop();\n                        }\n                    }\n                }\n            };\n            this.execs.push(func);\n            \n            if (this.juris) {\n                var else_end = new CSL.Token(\"else\", CSL.END);\n                CSL.Node[\"else\"].build.call(else_end, state, target);\n                var choose_end = new CSL.Token(\"choose\", CSL.END);\n                CSL.Node.choose.build.call(choose_end, state, target);\n            }\n        }\n\n        if (this.tokentype === CSL.END) {\n            if (!this.juris) {\n                target.push(this);\n            }\n            if (state.build.substitute_level.value()) {\n                state.build.substitute_level.replace((state.build.substitute_level.value() - 1));\n            }\n            CSL.Util.substituteEnd.call(this, state, target);\n        }\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node[\"if\"] = {\n    build: function (state, target) {\n        CSL.Conditions.TopNode.call(this, state, target);\n        target.push(this);\n    },\n    configure: function (state, pos) {\n        CSL.Conditions.Configure.call(this, state, pos);\n    }\n};\n\n\nCSL.Node[\"conditions\"] = {\n    build: function (state) {\n        if (this.tokentype === CSL.START) {\n            state.tmp.conditions.addMatch(this.match);\n        }\n        if (this.tokentype === CSL.END) {\n            state.tmp.conditions.matchCombine();\n        }\n    }\n};\n\nCSL.Node[\"condition\"] = {\n    build: function (state) {\n        if (this.tokentype === CSL.SINGLETON) {\n            var test = state.fun.match[this.match](this, state, this.tests);\n            state.tmp.conditions.addTest(test);\n        }\n    }\n};\n\nCSL.Conditions = {};\n\nCSL.Conditions.TopNode = function (state) {\n    var func;\n    if (this.tokentype === CSL.START || this.tokentype === CSL.SINGLETON) {\n        if (this.locale) {\n            state.opt.lang = this.locale;\n        }\n        if (!this.tests || !this.tests.length) {\n            // Set up the condition compiler with our current context\n            state.tmp.conditions = new CSL.Conditions.Engine(state, this);\n        } else {\n            // The usual.\n            this.test = state.fun.match[this.match](this, state, this.tests);\n        }\n        if (state.build.substitute_level.value() === 0) {\n            func = function(state) {\n                state.tmp.condition_counter++;\n            }\n            this.execs.push(func);\n        }\n    }\n    if (this.tokentype === CSL.END || this.tokentype === CSL.SINGLETON) {\n        if (state.build.substitute_level.value() === 0) {\n            func = function (state) {\n                state.tmp.condition_counter--;\n                if (state.tmp.condition_lang_counter_arr.length > 0) {\n                    var counter = state.tmp.condition_lang_counter_arr.slice(-1)[0];\n                    if (counter === state.tmp.condition_counter) {\n                        state.opt.lang = state.tmp.condition_lang_val_arr.pop();\n                        state.tmp.condition_lang_counter_arr.pop();\n                    }\n                }\n                if (this.locale_default) {\n                    // Open output tag with locale marker\n                    state.output.current.value().old_locale = this.locale_default;\n                    state.output.closeLevel(\"empty\");\n                    state.opt.lang = this.locale_default;\n                }\n            };\n            this.execs.push(func);\n        }\n        // closingjump\n        func = function (state) {\n            var next = this[state.tmp.jump.value()];\n            return next;\n        };\n        this.execs.push(func);\n        if (this.locale_default) {\n            state.opt.lang = this.locale_default;\n        }\n    }\n};\n\nCSL.Conditions.Configure = function (state, pos) {\n    if (this.tokentype === CSL.START) {\n        // jump index on failure\n        this.fail = state.configure.fail.slice(-1)[0];\n        this.succeed = this.next;\n        state.configure.fail[(state.configure.fail.length - 1)] = pos;\n    } else if (this.tokentype === CSL.SINGLETON) {\n        // jump index on failure\n        this.fail = this.next;\n        this.succeed = state.configure.succeed.slice(-1)[0];\n        state.configure.fail[(state.configure.fail.length - 1)] = pos;\n    } else {\n        // jump index on success\n        this.succeed = state.configure.succeed.slice(-1)[0];\n        this.fail = this.next;\n    }\n};\n\nCSL.Conditions.Engine = function (state, token) {\n    this.token = token;\n    this.state = state;\n};\n\nCSL.Conditions.Engine.prototype.addTest = function (test) {\n    this.token.tests ? {} : this.token.tests = [];\n    this.token.tests.push(test);\n};\n\nCSL.Conditions.Engine.prototype.addMatch = function (match) {\n    this.token.match = match;\n};\n\nCSL.Conditions.Engine.prototype.matchCombine = function () {\n    this.token.test = this.state.fun.match[this.token.match](this.token, this.state, this.token.tests);\n};\n\n/*global CSL: true */\n\nCSL.Node.info = {\n    build: function (state) {\n        if (this.tokentype === CSL.START) {\n            state.build.skip = \"info\";\n        } else {\n            state.build.skip = false;\n        }\n    }\n};\n\n\n/*global CSL: true */\n\nCSL.Node.institution = {\n    build: function (state, target) {\n        if ([CSL.SINGLETON, CSL.START].indexOf(this.tokentype) > -1) {\n\n            var func = function (state) {\n                if (\"string\" === typeof this.strings.delimiter) {\n                    state.tmp.institution_delimiter = this.strings.delimiter;\n                } else {\n                    state.tmp.institution_delimiter = state.tmp.name_delimiter;\n                }\n\n                // This is the same code for the same result as in node_name.js, \n                // but when cs:institution comes on stream, it may produce\n                // different results.\n                if (\"text\" === state.inheritOpt(this, \"and\")) {\n                    this.and_term = state.getTerm(\"and\", \"long\", 0);\n                } else if (\"symbol\" === state.inheritOpt(this, \"and\")) {\n                    if (state.opt.development_extensions.expect_and_symbol_form) {\n                        this.and_term = state.getTerm(\"and\", \"symbol\", 0);\n                    } else {\n                        this.and_term = \"&\";\n                    }\n                } else if (\"none\" === state.inheritOpt(this, \"and\")) {\n                    this.and_term = state.tmp.institution_delimiter;\n                }\n                if (\"undefined\" === typeof this.and_term && state.tmp.and_term) {\n                    // this.and_term = state.getTerm(\"and\", \"long\", 0);\n                    this.and_term = state.tmp.and_term;\n                }\n                if (CSL.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)) {\n                    this.and_prefix_single = \" \";\n                    this.and_prefix_multiple = \", \";\n                    if (\"string\" === typeof state.tmp.institution_delimiter) {\n                        this.and_prefix_multiple = state.tmp.institution_delimiter;\n                    }\n                    this.and_suffix = \" \";\n                } else {\n                    this.and_prefix_single = \"\";\n                    this.and_prefix_multiple = \"\";\n                    this.and_suffix = \"\";\n                }\n                if (state.inheritOpt(this, \"delimiter-precedes-last\") === \"always\") {\n                    this.and_prefix_single = state.tmp.institution_delimiter;\n                } else if (state.inheritOpt(this, \"delimiter-precedes-last\") === \"never\") {\n                    // Slightly fragile: could test for charset here to make\n                    // this more certain.\n                    if (this.and_prefix_multiple) {\n                        this.and_prefix_multiple = \" \";\n                    }\n                }\n                \n                this.and = {};\n                if (\"undefined\" !== typeof this.and_term) {\n                    state.output.append(this.and_term, \"empty\", true);\n                    this.and.single = state.output.pop();\n                    this.and.single.strings.prefix = this.and_prefix_single;\n                    this.and.single.strings.suffix = this.and_suffix;\n                    state.output.append(this.and_term, \"empty\", true);\n                    this.and.multiple = state.output.pop();\n                    this.and.multiple.strings.prefix = this.and_prefix_multiple;\n                    this.and.multiple.strings.suffix = this.and_suffix;\n                } else if (\"undefined\" !== this.strings.delimiter) {\n                    this.and.single = new CSL.Blob(state.tmp.institution_delimiter);\n                    this.and.single.strings.prefix = \"\";\n                    this.and.single.strings.suffix = \"\";\n                    this.and.multiple = new CSL.Blob(state.tmp.institution_delimiter);\n                    this.and.multiple.strings.prefix = \"\";\n                    this.and.multiple.strings.suffix = \"\";\n                }\n                state.nameOutput.institution = this;\n            };\n            this.execs.push(func);\n        }\n        target.push(this);\n    },\n    configure: function (state) {\n        if ([CSL.SINGLETON, CSL.START].indexOf(this.tokentype) > -1) {\n            state.build.has_institution = true;\n        }\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node[\"institution-part\"] = {\n    build: function (state, target) {\n        var func;\n        if (\"long\" === this.strings.name) {\n            if (this.strings[\"if-short\"]) {\n                func = function (state) {\n                    state.nameOutput.institutionpart[\"long-with-short\"] = this;\n                };\n            } else {\n                func = function (state) {\n                    state.nameOutput.institutionpart[\"long\"] = this;\n                };\n            }\n        } else if (\"short\" === this.strings.name) {\n            func = function (state) {\n                state.nameOutput.institutionpart[\"short\"] = this;\n            };\n        }\n        this.execs.push(func);\n        target.push(this);\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node.key = {\n    build: function (state, target) {\n        \n        target = state[state.build.root + \"_sort\"].tokens;\n\n        var func;\n        var debug = false;\n        var start_key = new CSL.Token(\"key\", CSL.START);\n\n        state.tmp.root = state.build.root;\n\n        // The params object for build and runtime (tmp) really shouldn't have been separated.\n        // Oh, well.\n        start_key.strings[\"et-al-min\"] = state.inheritOpt(this, \"et-al-min\");\n        start_key.strings[\"et-al-use-first\"] = state.inheritOpt(this, \"et-al-use-first\");\n        start_key.strings[\"et-al-use-last\"] = state.inheritOpt(this, \"et-al-use-last\");\n\n\n        // initialize done vars\n        func = function (state) {\n            state.tmp.done_vars = [];\n        };\n        start_key.execs.push(func);\n\n        // initialize output queue\n        func = function (state) {\n            state.output.openLevel(\"empty\");\n        };\n        start_key.execs.push(func);\n\n        // sort direction\n        var sort_direction = [];\n        if (this.strings.sort_direction === CSL.DESCENDING) {\n            //print(\"sort: descending on \"+state.tmp.area);\n            sort_direction.push(1);\n            sort_direction.push(-1);\n        } else {\n            //print(\"sort: ascending\");\n            sort_direction.push(-1);\n            sort_direction.push(1);\n        }\n        state[state.build.area].opt.sort_directions.push(sort_direction);\n\n        if (CSL.DATE_VARIABLES.indexOf(this.variables[0]) > -1) {\n            state.build.date_key = true;\n        }\n\n        // et al init\n        func = function (state) {\n            state.tmp.sort_key_flag = true;\n            //print(\"== key node function ==\");\n            if (state.inheritOpt(this, \"et-al-min\")) {\n                state.tmp[\"et-al-min\"] = state.inheritOpt(this, \"et-al-min\");\n            }\n            if (state.inheritOpt(this, \"et-al-use-first\")) {\n                state.tmp[\"et-al-use-first\"] = state.inheritOpt(this, \"et-al-use-first\");\n            }\n            if (\"boolean\" === typeof state.inheritOpt(this, \"et-al-use-last\")) {\n                state.tmp[\"et-al-use-last\"] = state.inheritOpt(this, \"et-al-use-last\");\n                //print(\"  set tmp et-al-use-last: \"+this.strings[\"et-al-use-last\"])\n            }\n        };\n        start_key.execs.push(func);\n        target.push(start_key);\n        \n        //\n        // ops to initialize the key's output structures\n        if (this.variables.length) {\n            var variable = this.variables[0];\n            if (CSL.NAME_VARIABLES.indexOf(variable) > -1) {\n                //\n                // Start tag\n                var names_start_token = new CSL.Token(\"names\", CSL.START);\n                names_start_token.tokentype = CSL.START;\n                names_start_token.variables = this.variables;\n                CSL.Node.names.build.call(names_start_token, state, target);\n                //\n                // Name tag\n                var name_token = new CSL.Token(\"name\", CSL.SINGLETON);\n                name_token.tokentype = CSL.SINGLETON;\n                name_token.strings[\"name-as-sort-order\"] = \"all\";\n                name_token.strings[\"sort-separator\"] = \" \";\n                name_token.strings[\"et-al-use-last\"] = state.inheritOpt(this, \"et-al-use-last\");\n                name_token.strings[\"et-al-min\"] = state.inheritOpt(this, \"et-al-min\");\n                name_token.strings[\"et-al-use-first\"] = state.inheritOpt(this, \"et-al-use-first\");\n                CSL.Node.name.build.call(name_token, state, target);\n                //\n                // Institution tag\n                var institution_token = new CSL.Token(\"institution\", CSL.SINGLETON);\n                institution_token.tokentype = CSL.SINGLETON;\n                CSL.Node.institution.build.call(institution_token, state, target);\n                //\n                // End tag\n                var names_end_token = new CSL.Token(\"names\", CSL.END);\n                names_end_token.tokentype = CSL.END;\n                CSL.Node.names.build.call(names_end_token, state, target);\n            } else {\n                var single_text = new CSL.Token(\"text\", CSL.SINGLETON);\n                single_text.strings.sort_direction = this.strings.sort_direction;\n                single_text.dateparts = this.dateparts;\n                if (CSL.NUMERIC_VARIABLES.indexOf(variable) > -1) {\n                    // citation-number is virtualized. As a sort key it has no effect on registry\n                    // sort order per se, but if set to DESCENDING, it reverses the sequence of numbers representing\n                    // bib entries.\n                    if (variable === \"citation-number\") {\n                        func = function (state, Item) {\n                            if (state.tmp.area === \"bibliography_sort\") {\n                                if (this.strings.sort_direction === CSL.DESCENDING) {\n                                    state.bibliography_sort.opt.citation_number_sort_direction = CSL.DESCENDING;\n                                } else {\n                                    state.bibliography_sort.opt.citation_number_sort_direction = CSL.ASCENDING;\n                                }\n                            }\n                            if (state.tmp.area === \"citation_sort\" && state.bibliography_sort.tmp.citation_number_map) {\n                                var num = state.bibliography_sort.tmp.citation_number_map[state.registry.registry[Item.id].seq];\n                            } else {\n                                var num = state.registry.registry[Item.id].seq;\n                            }\n                            if (num) {\n                                // Code currently in util_number.js\n                                num = CSL.Util.padding(\"\" + num);\n                            }\n                            state.output.append(num, this);\n                        };\n                    } else {\n                        func = function (state, Item) {\n                            var num = false;\n                            num = Item[variable];\n                            // XXX What if this is NaN?\n                            if (num) {\n                                // Code currently in util_number.js\n                                num = CSL.Util.padding(num);\n                            }\n                            state.output.append(num, this);\n                        };\n                    }\n                } else if (variable === \"citation-label\") {\n                    func = function (state, Item) {\n                        var trigraph = state.getCitationLabel(Item);\n                        state.output.append(trigraph, this);\n                    };\n                } else if (CSL.DATE_VARIABLES.indexOf(variable) > -1) {\n                    func = CSL.dateAsSortKey;\n                    single_text.variables = this.variables;\n                } else if (\"title\" === variable) {\n                    var abbrevfam = \"title\";\n                    var abbrfall = false;\n                    var altvar = false;\n                    var transfall = true;\n                    func = state.transform.getOutputFunction(this.variables, abbrevfam, abbrfall, altvar, transfall);\n                } else if (\"court-class\" === variable) {\n                    func = function(state, Item, item) {\n                        CSL.INIT_JURISDICTION_MACROS(state, Item, item, \"juris-main\")\n                        // true is for sortKey mode\n                        var cls = CSL.GET_COURT_CLASS(state, Item, true);\n                        state.output.append(cls, \"empty\");\n                    }\n                } else {\n                    func = function (state, Item) {\n                        var varval = Item[variable];\n                        state.output.append(varval, \"empty\");\n                    };\n                }\n                single_text.execs.push(func);\n                target.push(single_text);\n            }\n        } else { // macro\n            //\n            // if it's not a variable, it's a macro\n            var token = new CSL.Token(\"text\", CSL.SINGLETON);\n            token.strings.sort_direction = this.strings.sort_direction;\n            token.postponed_macro = this.postponed_macro;\n            CSL.expandMacro.call(state, token, target);\n        }\n        //\n        // ops to output the key string result to an array go\n        // on the closing \"key\" tag before it is pushed.\n        // Do not close the level.\n        var end_key = new CSL.Token(\"key\", CSL.END);\n\n        // Eliminated at revision 1.0.159.\n        // Was causing non-fatal error \"wanted empty but found group\".\n        // Possible contributor to weird \"PAGES\" bug?\n        //func = function (state, Item) {\n        //state.output.closeLevel(\"empty\");\n        //};\n        //end_key.execs.push(func);\n        \n        // store key for use\n        func = function (state) {\n            var keystring = state.output.string(state, state.output.queue);\n            if (state.sys.normalizeUnicode) {\n                keystring = state.sys.normalizeUnicode(keystring);\n            }\n            keystring = keystring ? (keystring.split(\" \").join(state.opt.sort_sep) + state.opt.sort_sep) : \"\";\n            //SNIP-START\n            if (debug) {\n                CSL.debug(\"keystring: \" + keystring + \" \" + typeof keystring);\n            }\n            //print(\"keystring: (\" + keystring + \") \" + typeof keystring + \" \" + state.tmp.area);\n            //SNIP-END\n            //state.sys.print(\"keystring: (\" + keystring + \") \" + typeof keystring + \" \" + state.tmp.area);\n            if (\"\" === keystring) {\n                keystring = undefined;\n            }\n            if (\"string\" !== typeof keystring) {\n                keystring = undefined;\n                //state.tmp.empty_date = false;\n            }\n            state[state[state.tmp.area].root + \"_sort\"].keys.push(keystring);\n            state.tmp.value = [];\n        };\n        end_key.execs.push(func);\n\n        // Set year-suffix key on anything that looks like a date\n        if (state.build.date_key) {\n            if (state.build.area === \"citation\" && state.build.extension === \"_sort\") {\n                // ascending sort always\n                state[state.build.area].opt.sort_directions.push([-1,1]);\n                func = function (state, Item) {\n                    // year-suffix Key\n                    var year_suffix = state.registry.registry[Item.id].disambig.year_suffix;\n                    if (!year_suffix) {\n                        year_suffix = 0;\n                    }\n                    var key = CSL.Util.padding(\"\" + year_suffix);\n                    state[state.tmp.area].keys.push(key);\n                };\n                end_key.execs.push(func);\n            }\n            state.build.date_key = false;\n        }\n\n        // reset key params\n        func = function (state) {\n            // state.tmp.name_quash = new Object();\n\n            // XXX This should work, should be necessary, but doesn't and isn't.\n            //state.output.closeLevel(\"empty\");\n\n            state.tmp[\"et-al-min\"] = undefined;\n            state.tmp[\"et-al-use-first\"] = undefined;\n            state.tmp[\"et-al-use-last\"] = undefined;\n            state.tmp.sort_key_flag = false;\n        };\n        end_key.execs.push(func);\n        target.push(end_key);\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node.label = {\n    build: function (state, target) {\n        \n        if (this.strings.term) {\n            // Non-names labels\n            var func = function (state, Item, item) {\n                // Must accomplish this without touching strings\n                // shared with the calling application: \"sub verbo\"\n                // and \"sub-verbo\" must both pass, as they stand.\n                //if (item && item.label === \"sub verbo\") {\n                //    item.label = \"sub-verbo\";\n                //}\n                // This is abstracted away, because the same\n                // logic must be run in cs:names.\n                var termtxt = CSL.evaluateLabel(this, state, Item, item);\n                if (item && this.strings.term === \"locator\") {\n\n                    item.section_form_override = this.strings.form;\n\n                }\n                if (termtxt) {\n                    state.tmp.group_context.tip.term_intended = true;\n                }\n                CSL.UPDATE_GROUP_CONTEXT_CONDITION(state, termtxt, null, this);\n                if (termtxt.indexOf(\"%s\") === -1) {\n                    // ^ Suppress output here if we have an embedded term\n                    if (this.strings.capitalize_if_first) {\n                        if (!state.tmp.term_predecessor && !(state.opt[\"class\"] === \"in-text\" && state.tmp.area === \"citation\")) {\n                            termtxt = CSL.Output.Formatters[\"capitalize-first\"](state, termtxt);\n                        }\n                    }\n                    state.output.append(termtxt, this);\n                }\n            };\n            this.execs.push(func);\n        } else {\n            if (!this.strings.form) {\n                this.strings.form = \"long\";\n            }\n            // Names labels\n            // Picked up in names END\n            var namevars = state.build.names_variables[state.build.names_variables.length-1];\n            var namelabels = state.build.name_label[state.build.name_label.length-1];\n            for (var i = 0, ilen = namevars.length; i < ilen; i += 1) {\n                if (!namelabels[namevars[i]]) {\n                    namelabels[namevars[i]] = {};\n                }\n            }\n            if (!state.build.name_flag) {\n                for (var i = 0, ilen = namevars.length; i < ilen; i += 1) {\n                    namelabels[namevars[i]].before = this;\n                }\n            } else {\n                for (var i = 0, ilen = namevars.length; i < ilen; i += 1) {\n                    namelabels[namevars[i]].after = this;\n                }\n            }\n        }\n        target.push(this);\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node.layout = {\n    build: function (state, target) {\n        var func, prefix_token, suffix_token, tok;\n\n        function setSuffix() {\n            if (state.build.area === \"bibliography\") {\n                suffix_token = new CSL.Token(\"text\", CSL.SINGLETON);\n                func = function(state) {\n                    // Suppress suffix on all but the last item in bibliography parallels\n                    if (!state.tmp.parallel_and_not_last) {\n                        var suffix;\n                        if (state.tmp.cite_affixes[state.tmp.area][state.tmp.last_cite_locale]) {\n                            suffix = state.tmp.cite_affixes[state.tmp.area][state.tmp.last_cite_locale].suffix;\n                        } else {\n                            suffix = state.bibliography.opt.layout_suffix;\n                        }\n\n                        // If @display is used, layout suffix is placed on the last\n                        // immediate child of the layout, which we assume will be a\n                        // @display group node.\n                        var topblob = state.output.current.value();\n                        if (state.opt.using_display) {\n                            topblob.blobs[topblob.blobs.length-1].strings.suffix = suffix;\n                        } else {\n                            topblob.strings.suffix = suffix;\n                        }\n                    }\n                    if (state.bibliography.opt[\"second-field-align\"]) {\n                        // closes bib_other\n                        state.output.endTag(\"bib_other\");\n                    }\n                };\n                suffix_token.execs.push(func);\n                target.push(suffix_token);\n            }\n        }\n\n        if (this.tokentype === CSL.START) {\n\n            if (this.locale_raw) {\n                state.build.current_default_locale = this.locale_raw;\n            } else {\n                state.build.current_default_locale = state.opt[\"default-locale\"];\n            }\n\n            func = function (state, Item, item) {\n                if (state.opt.development_extensions.apply_citation_wrapper\n                    && state.sys.wrapCitationEntry\n                    && !state.tmp.just_looking\n                    && Item.system_id \n                    && state.tmp.area === \"citation\") { \n\n                    var cite_entry = new CSL.Token(\"group\", CSL.START);\n                    cite_entry.decorations = [[\"@cite\", \"entry\"]];\n                    state.output.startTag(\"cite_entry\", cite_entry);\n                    state.output.current.value().item_id = Item.system_id;\n                    if (item) {\n                        state.output.current.value().locator_txt = item.locator_txt;\n                        state.output.current.value().suffix_txt = item.suffix_txt;\n                    }\n                }\n            };\n            this.execs.push(func);\n        }\n\n        // XXX Works, but using state.tmp looks wrong here? We're in the build layer ...\n        if (this.tokentype === CSL.START && !state.tmp.cite_affixes[state.build.area]) {\n            //\n            // done_vars is used to prevent the repeated\n            // rendering of variables\n            //\n            // initalize done vars\n            func = function (state, Item, item) {\n\n                state.tmp.done_vars = [];\n                if (item && item[\"author-only\"]) {\n                    state.tmp.done_vars.push(\"locator\");\n                }\n                if (state.opt.suppressedJurisdictions[Item[\"country\"]]\n                    && Item[\"country\"]\n                    && [\"treaty\", \"patent\"].indexOf(Item.type) === -1) {\n                    \n                    state.tmp.done_vars.push(\"country\");\n                }\n                if (!state.tmp.just_looking && state.registry.registry[Item.id] && state.registry.registry[Item.id].parallel) {\n                    state.tmp.done_vars.push(\"first-reference-note-number\");\n                }\n                // trimmer is not available in getAmbiguousCite\n                if (!state.tmp.just_looking && state.tmp.abbrev_trimmer && Item.jurisdiction) {\n                    for (var field in state.tmp.abbrev_trimmer.QUASHES[Item.jurisdiction]) {\n                        state.tmp.done_vars.push(field);\n                    }\n                }\n\n                //CSL.debug(\" === init rendered_name === \");\n                state.tmp.rendered_name = false;\n            };\n            this.execs.push(func);\n            // set opt delimiter\n            func = function (state) {\n                // just in case\n                state.tmp.sort_key_flag = false;\n            };\n            this.execs.push(func);\n            \n            // reset nameset counter [all nodes]\n            func = function (state) {\n                state.tmp.nameset_counter = 0;\n            };\n            this.execs.push(func);\n\n            func = function (state, Item) {\n                var tok = new CSL.Token();\n                state.output.openLevel(tok);\n            };\n            this.execs.push(func);\n            target.push(this);\n\n            if (state.build.area === \"citation\") {\n                prefix_token = new CSL.Token(\"text\", CSL.SINGLETON);\n                func = function (state, Item, item) {\n                    if (item && item.prefix) {\n                        var prefix = CSL.checkPrefixSpaceAppend(state, item.prefix);\n                        if (!state.tmp.just_looking) {\n                            prefix = state.output.checkNestedBrace.update(prefix);\n                        }\n                        var ignorePredecessor = CSL.checkIgnorePredecessor(state, prefix);\n                        state.output.append(prefix, this, false, ignorePredecessor);\n                    }\n                };\n                prefix_token.execs.push(func);\n                target.push(prefix_token);\n            }\n        }\n\n        // Cast token to be used in one of the configurations below.\n        var my_tok;\n        if (this.locale_raw) {\n            my_tok = new CSL.Token(\"dummy\", CSL.START);\n            my_tok.locale = this.locale_raw;\n            my_tok.strings.delimiter = this.strings.delimiter;\n            my_tok.strings.suffix = this.strings.suffix;\n            if (!state.tmp.cite_affixes[state.build.area]) {\n                state.tmp.cite_affixes[state.build.area] = {};\n            }\n        }\n\n        if (this.tokentype === CSL.START) {\n            state.build.layout_flag = true;\n                            \n            // Only run the following once, to set up the final layout node ...\n            if (!this.locale_raw) {\n                //\n                // save out decorations for flipflop processing [final node only]\n                //\n                state[state.tmp.area].opt.topdecor = [this.decorations];\n                state[(state.tmp.area + \"_sort\")].opt.topdecor = [this.decorations];\n\n                state[state.build.area].opt.layout_prefix = this.strings.prefix;\n                state[state.build.area].opt.layout_suffix = this.strings.suffix;\n                state[state.build.area].opt.layout_delimiter = this.strings.delimiter;\n\n                state[state.build.area].opt.layout_decorations = this.decorations;\n                \n                // Only do this if we're running conditionals\n                if (state.tmp.cite_affixes[state.build.area]) {\n                    // if build_layout_locale_flag is true,\n                    // write cs:else START to the token list.\n                    tok = new CSL.Token(\"else\", CSL.START);\n                    CSL.Node[\"else\"].build.call(tok, state, target);\n                }\n\n            } // !this.locale_raw\n\n            // Conditionals\n            if (this.locale_raw) {\n                if (!state.build.layout_locale_flag) {\n                    // if layout_locale_flag is untrue,\n                    // write cs:choose START and cs:if START\n                    // to the token list.\n                    var choose_tok = new CSL.Token(\"choose\", CSL.START);\n                    CSL.Node.choose.build.call(choose_tok, state, target);\n                    my_tok.name = \"if\";\n                    CSL.Attributes[\"@locale-internal\"].call(my_tok, state, this.locale_raw);\n                    CSL.Node[\"if\"].build.call(my_tok, state, target);\n                } else {\n                    // if build_layout_locale_flag is true,\n                    // write cs:else-if START to the token list.\n                    my_tok.name = \"else-if\";\n                    CSL.Attributes[\"@locale-internal\"].call(my_tok, state, this.locale_raw);\n                    CSL.Node[\"else-if\"].build.call(my_tok, state, target);\n                }\n                // cite_affixes for this node\n                state.tmp.cite_affixes[state.build.area][my_tok.locale] = {};\n                state.tmp.cite_affixes[state.build.area][my_tok.locale].delimiter = this.strings.delimiter;\n                state.tmp.cite_affixes[state.build.area][my_tok.locale].suffix = this.strings.suffix;\n            }\n        }\n        if (this.tokentype === CSL.END) {\n            if (this.locale_raw) {\n                setSuffix();\n                if (!state.build.layout_locale_flag) {\n                    // If layout_locale_flag is untrue, write cs:if END\n                    // to the token list.\n                    my_tok.name = \"if\";\n                    my_tok.tokentype = CSL.END;\n                    CSL.Attributes[\"@locale-internal\"].call(my_tok, state, this.locale_raw);\n                    CSL.Node[\"if\"].build.call(my_tok, state, target);\n                    state.build.layout_locale_flag = true;\n                } else {\n                    // If layout_locale_flag is true, write cs:else-if END\n                    // to the token list.\n                    my_tok.name = \"else-if\";\n                    my_tok.tokentype = CSL.END;\n                    CSL.Attributes[\"@locale-internal\"].call(my_tok, state, this.locale_raw);\n                    CSL.Node[\"else-if\"].build.call(my_tok, state, target);\n                }\n            }\n            if (!this.locale_raw) {\n                setSuffix();\n                // Only add this if we're running conditionals\n                if (state.tmp.cite_affixes[state.build.area]) {\n                    // If layout_locale_flag is true, write cs:else END\n                    // and cs:choose END to the token list.\n                    if (state.build.layout_locale_flag) {\n                        tok = new CSL.Token(\"else\", CSL.END);\n                        CSL.Node[\"else\"].build.call(tok, state, target);\n                        tok = new CSL.Token(\"choose\", CSL.END);\n                        CSL.Node.choose.build.call(tok, state, target);\n                    }\n                }\n                state.build_layout_locale_flag = true;\n                if (state.build.area === \"citation\") {\n                    suffix_token = new CSL.Token(\"text\", CSL.SINGLETON);\n                    func = function (state, Item, item) {\n                        var sp;\n                        if (item && item.suffix) {\n                            var suffix = CSL.checkSuffixSpacePrepend(state, item.suffix);\n                            if (!state.tmp.just_looking) {\n                                suffix = state.output.checkNestedBrace.update(suffix);\n                            }\n                            state.output.append((suffix), this);\n                        }\n                    };\n                    suffix_token.execs.push(func);\n                    target.push(suffix_token);\n                }\n\n                // Closes wrapper token\n                func = function (state) {\n                    state.output.closeLevel();\n                };\n                this.execs.push(func);\n                func = function (state, Item) {\n                    if (state.opt.development_extensions.apply_citation_wrapper\n                        && state.sys.wrapCitationEntry\n                        && !state.tmp.just_looking\n                        && Item.system_id \n                        && state.tmp.area === \"citation\") { \n                        \n                        state.output.endTag(); // closes citation link wrapper\n                    }\n                };\n                this.execs.push(func);\n                target.push(this);\n                state.build.layout_flag = false;\n                state.build.layout_locale_flag = false;\n            } // !this.layout_raw\n        }\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node.macro = {\n    build: function () {}\n};\n\n/*global CSL: true */\n\nCSL.Node.alternative = {\n    build: function (state, target) {\n        if (this.tokentype === CSL.START) {\n\n            var choose_tok = new CSL.Token(\"choose\", CSL.START);\n            CSL.Node[\"choose\"].build.call(choose_tok, state, target);\n\n            var if_tok = new CSL.Token(\"if\", CSL.START);\n            CSL.Attributes[\"@alternative-node-internal\"].call(if_tok, state);\n            CSL.Node[\"if\"].build.call(if_tok, state, target);\n\n            var func = function(state, Item) {\n\n                state.tmp.oldItem = Item;\n                state.tmp.oldLang = state.opt.lang;\n                state.tmp.abort_alternative = true;\n\n                if (Item[\"language-name\"] && Item[\"language-name-original\"]) {\n\n                    var newItem = JSON.parse(JSON.stringify(Item));\n\n                    newItem.language = newItem[\"language-name\"];\n                    var langspec = CSL.localeResolve(newItem.language, state.opt[\"default-locale\"][0]);\n\n                    if (state.opt.multi_layout) {\n                        for (var i in state.opt.multi_layout) {\n                            var locale_list = state.opt.multi_layout[i];\n                            var gotlang = false;\n                            for (var j in locale_list) {\n                                var tryspec = locale_list[j];\n                                if (langspec.best === tryspec.best || langspec.base === tryspec.base || langspec.bare === tryspec.bare) {\n                                    gotlang = locale_list[0].best;\n                                    break;\n                                }\n                            }\n                            if (!gotlang) {\n                                gotlang = state.opt[\"default-locale\"][0];\n                            }\n                            state.opt.lang = gotlang;\n                        }\n                    }\n\n                    for (var key in newItem) {\n                        if ([\"id\", \"type\", \"language\", \"multi\"].indexOf(key) === -1 && key.slice(0, 4) !== \"alt-\") {\n                            if (newItem.multi && newItem.multi._keys[key]) {\n                                var deleteme = true;\n                                for (var lang in newItem.multi._keys[key]) {\n                                    if (langspec.bare === lang.replace(/^([a-zA-Z]+).*/, \"$1\")) {\n                                        deleteme = false;\n                                        break;\n                                    }\n                                }\n                                if (deleteme) {\n                                    delete newItem[key];\n                                }\n                            } else {\n                                delete newItem[key];\n                            }\n                        }\n                    }\n                    for (var key in newItem) {\n                        if (key.slice(0, 4) === \"alt-\") {\n                            newItem[key.slice(4)] = newItem[key];\n                            state.tmp.abort_alternative = false;\n                        } else {\n                            if (newItem.multi && newItem.multi._keys) {\n                                if (!newItem[\"alt-\" + key] && newItem.multi._keys[key]) {\n                                    if (newItem.multi._keys[key][langspec.best]) {\n                                        newItem[key] = newItem.multi._keys[key][langspec.best];\n                                        state.tmp.abort_alternative = false;\n                                    } else if (newItem.multi._keys[key][langspec.base]) {\n                                        newItem[key] = newItem.multi._keys[key][langspec.base];\n                                        state.tmp.abort_alternative = false;\n                                    } else if (newItem.multi._keys[key][langspec.bare]) {\n                                        newItem[key] = newItem.multi._keys[key][langspec.bare];\n                                        state.tmp.abort_alternative = false;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n\n                state.output.openLevel(this);\n                state.registry.refhash[Item.id] = newItem;\n                state.nameOutput = new CSL.NameOutput(state, newItem);\n            };\n            this.execs.push(func);\n            target.push(this);\n\n            var choose_tok = new CSL.Token(\"choose\", CSL.START);\n            CSL.Node[\"choose\"].build.call(choose_tok, state, target);\n\n            var if_tok = new CSL.Token(\"if\", CSL.START);\n            CSL.Attributes[\"@alternative-node-internal\"].call(if_tok, state);\n            var func = function(state) {\n                state.tmp.abort_alternative = true;\n            }\n            if_tok.execs.push(func);\n            CSL.Node[\"if\"].build.call(if_tok, state, target);\n\n        } else if (this.tokentype === CSL.END) {\n\n            var if_tok = new CSL.Token(\"if\", CSL.END);\n            CSL.Node[\"if\"].build.call(if_tok, state, target);\n\n            var choose_tok = new CSL.Token(\"choose\", CSL.END);\n            CSL.Node[\"choose\"].build.call(choose_tok, state, target);\n\n            var func = function(state, Item) {\n                state.output.closeLevel();\n                state.registry.refhash[Item.id] = state.tmp.oldItem;\n                state.opt.lang = state.tmp.oldLang;\n                state.nameOutput = new CSL.NameOutput(state, state.tmp.oldItem);\n                state.tmp.abort_alternative = false;\n            };\n            this.execs.push(func);\n            target.push(this);\n\n            var if_tok = new CSL.Token(\"if\", CSL.END);\n            CSL.Node[\"if\"].build.call(if_tok, state, target);\n\n            var choose_tok = new CSL.Token(\"choose\", CSL.END);\n            CSL.Node[\"choose\"].build.call(choose_tok, state, target);\n\n        }\n    }\n};\n\nCSL.Node[\"alternative-text\"] = {\n    build: function (state, target) {\n        if (this.tokentype === CSL.SINGLETON) {\n            // do stuff\n            var func = function(state, Item) {\n                var Item = state.refetchItem(Item.id);\n                CSL.getCite.call(state, Item);\n            };\n            this.execs.push(func);\n        }\n        target.push(this);\n    }\n};\n\n\n\n/*global CSL: true */\n\nCSL.NameOutput = function(state, Item, item) {\n    this.debug = false;\n    this.state = state;\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(1)\");\n    }\n    //SNIP-END\n    this.Item = Item;\n    this.item = item;\n    this.nameset_base = 0;\n    this.etal_spec = {};\n    this._first_creator_variable = false;\n    this._please_chop = false;\n};\n\nCSL.NameOutput.prototype.init = function (names) {\n    this.requireMatch = names.requireMatch;\n    if (this.state.tmp.term_predecessor) {\n        this.state.tmp.subsequent_author_substitute_ok = false;\n    }\n    if (this.nameset_offset) {\n        this.nameset_base = this.nameset_base + this.nameset_offset;\n    }\n    this.nameset_offset = 0;\n    this.names = names;\n    this.variables = names.variables;\n\n    this.state.tmp.value = [];\n    this.state.tmp.rendered_name = [];\n    this.state.tmp.label_blob = false;\n    this.state.tmp.etal_node = false;\n    this.state.tmp.etal_term = false;\n    for (var i = 0, ilen = this.variables.length; i < ilen; i += 1) {\n        if (this.Item[this.variables[i]] && this.Item[this.variables[i]].length) {\n            this.state.tmp.value = this.state.tmp.value.concat(this.Item[this.variables[i]]);\n        }\n    }\n    this[\"et-al\"] = undefined;\n    // REMOVE THIS\n    this[\"with\"] = undefined;\n\n    this.name = undefined;\n    // long, long-with-short, short\n    this.institutionpart = {};\n    // family, given\n    //this.namepart = {};\n    // before, after\n    //this.label = {};\n\n    this.state.tmp.group_context.tip.variable_attempt = true;\n\n    this.labelVariable = this.variables[0];\n\n    if (!this.state.tmp.value.length) {\n        return;\n    }\n\n    // Abort and proceed to the next substitution if a match is required,\n    // two variables are called, and they do not match.\n    var checkCommonTerm = this.checkCommonAuthor(this.requireMatch);\n    if (checkCommonTerm) {\n        this.state.tmp.can_substitute.pop();\n        this.state.tmp.can_substitute.push(true);\n        //this.state.tmp.group_context.mystack[this.state.tmp.group_context.mystack.length-1].variable_success = false;\n        for (var i in this.variables) {\n            var idx = this.state.tmp.done_vars.indexOf(this.variables[i]);\n            if (idx > -1) {\n                this.state.tmp.done_vars = this.state.tmp.done_vars.slice(0, idx).concat(this.state.tmp.done_vars.slice(i+1));\n            }\n        }\n        this.state.tmp.common_term_match_fail = true;\n        this.variables = [];\n    }\n};\n\n\nCSL.NameOutput.prototype.reinit = function (names, labelVariable) {\n    this.requireMatch = names.requireMatch;\n    this.labelVariable = labelVariable;\n\n    if (this.state.tmp.can_substitute.value()) {\n        this.nameset_offset = 0;\n        // What-all should be carried across from the subsidiary\n        // names node, and on what conditions? For each attribute,\n        // and decoration, is it an override, or is it additive?\n        this.variables = names.variables;\n        \n        // Not sure why this is necessary. Guards against a memory leak perhaps?\n        var oldval = this.state.tmp.value.slice();\n        this.state.tmp.value = [];\n\n        for (var i = 0, ilen = this.variables.length; i < ilen; i += 1) {\n            if (this.Item[this.variables[i]] && this.Item[this.variables[i]].length) {\n                this.state.tmp.value = this.state.tmp.value.concat(this.Item[this.variables[i]]);\n            }\n        }\n        if (this.state.tmp.value.length) {\n            this.state.tmp.can_substitute.replace(false, CSL.LITERAL);\n        }\n\n        this.state.tmp.value = oldval;\n\n    }\n    // Abort and proceed to the next substitution if a match is required,\n    // two variables are called, and they do not match.\n    var checkCommonTerm = this.checkCommonAuthor(this.requireMatch);\n    if (checkCommonTerm) {\n        this.state.tmp.can_substitute.pop();\n        this.state.tmp.can_substitute.push(true);\n        for (var i in this.variables) {\n            var idx = this.state.tmp.done_vars.indexOf(this.variables[i]);\n            if (idx > -1) {\n                this.state.tmp.done_vars = this.state.tmp.done_vars.slice(0, idx).concat(this.state.tmp.done_vars.slice(i+1));\n            }\n        }\n        this.variables = [];\n    }\n};\n\nCSL.NameOutput.prototype.outputNames = function () {\n    var i, ilen;\n    var variables = this.variables;\n    if (this.institution.and) {\n        if (!this.institution.and.single.blobs || !this.institution.and.single.blobs.length) {\n            this.institution.and.single.blobs = this.name.and.single.blobs;\n        }\n        if (!this.institution.and.multiple.blobs || !this.institution.and.multiple.blobs.length) {\n            this.institution.and.multiple.blobs = this.name.and.multiple.blobs;\n        }\n    }\n\n    this.variable_offset = {};\n    if (this.family) {\n        this.family_decor = CSL.Util.cloneToken(this.family);\n        this.family_decor.strings.prefix = \"\";\n        this.family_decor.strings.suffix = \"\";\n        // Sets text-case value (text-case=\"title\" is suppressed for items\n        // non-English with non-English value in Item.language)\n        for (i = 0, ilen = this.family.execs.length; i < ilen; i += 1) {\n            this.family.execs[i].call(this.family_decor, this.state, this.Item);\n        }\n    } else {\n        this.family_decor = false;\n    }\n\n    if (this.given) {\n        this.given_decor = CSL.Util.cloneToken(this.given);\n        this.given_decor.strings.prefix = \"\";\n        this.given_decor.strings.suffix = \"\";\n        // Sets text-case value (text-case=\"title\" is suppressed for items\n        // non-English with non-English value in Item.language)\n        for (i = 0, ilen = this.given.execs.length; i < ilen; i += 1) {\n            this.given.execs[i].call(this.given_decor, this.state, this.Item);\n        }\n    } else {\n        this.given_decor = false;\n    }\n\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(2)\");\n    }\n    //SNIP-END\n    // util_names_etalconfig.js\n    this.getEtAlConfig();\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(3)\");\n    }\n    //SNIP-END\n    // util_names_divide.js\n    this.divideAndTransliterateNames();\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(4)\");\n    }\n    //SNIP-END\n    // util_names_truncate.js\n\n    this.truncatePersonalNameLists();\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(5)\");\n    }\n    //SNIP-END\n\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(6)\");\n    }\n    //SNIP-END\n    // util_names_disambig.js\n    this.disambigNames();\n\n    // util_names_constraints.js\n    this.constrainNames();\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(7)\");\n    }\n    //SNIP-END\n    // form=\"count\"\n    if (this.name.strings.form === \"count\") {\n        if (this.state.tmp.extension || this.names_count != 0) {\n            this.state.output.append(this.names_count, \"empty\");\n            this.state.tmp.group_context.tip.variable_success = true;\n        }\n        return;\n    }\n\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(8)\");\n    }\n    //SNIP-END\n    this.setEtAlParameters();\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(9)\");\n    }\n    //SNIP-END\n    this.setCommonTerm(this.requireMatch);\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(10)\");\n    }\n    //SNIP-END\n    this.renderAllNames();\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(11)\");\n    }\n    //SNIP-END\n    var blob_list = [];\n    for (i = 0, ilen = variables.length; i < ilen; i += 1) {\n        var v = variables[i];\n        var institution_sets = [];\n        var institutions = false;\n        var varblob = null;\n        if (!this.state.opt.development_extensions.spoof_institutional_affiliations) {\n            varblob = this._join([this.freeters[v]], \"\");\n        } else {\n            //SNIP-START\n            if (this.debug) {\n                this.state.sys.print(\"(11a)\");\n            }\n            //SNIP-END\n            for (var j = 0, jlen = this.institutions[v].length; j < jlen; j += 1) {\n                institution_sets.push(this.joinPersonsAndInstitutions([this.persons[v][j], this.institutions[v][j]]));\n            }\n            //SNIP-START\n            if (this.debug) {\n                this.state.sys.print(\"(11b)\");\n            }\n            //SNIP-END\n            if (this.institutions[v].length) {\n                var pos = this.nameset_base + this.variable_offset[v];\n                if (this.freeters[v].length) {\n                    pos += 1;\n                }\n                institutions = this.joinInstitutionSets(institution_sets, pos);\n            }\n            //SNIP-START\n            if (this.debug) {\n                this.state.sys.print(\"(11c)\");\n            }\n            //SNIP-END\n            var varblob = this.joinFreetersAndInstitutionSets([this.freeters[v], institutions]);\n            //SNIP-START\n            if (this.debug) {\n                this.state.sys.print(\"(11d)\");\n            }\n            //SNIP-END\n        }\n        if (varblob) {\n            // Apply labels, if any\n            if (!this.state.tmp.extension) {\n                varblob = this._applyLabels(varblob, v);\n            }\n            blob_list.push(varblob);\n        }\n        //SNIP-START\n        if (this.debug) {\n            this.state.sys.print(\"(11e)\");\n        }\n        //SNIP-END\n        if (this.common_term) {\n            break;\n        }\n    }\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(12)\");\n    }\n    //SNIP-END\n    this.state.output.openLevel(\"empty\");\n    this.state.output.current.value().strings.delimiter = this.state.inheritOpt(this.names, \"delimiter\", \"names-delimiter\");\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(13)\");\n    }\n    //SNIP-END\n    for (i = 0, ilen = blob_list.length; i < ilen; i += 1) {\n        // notSerious\n        this.state.output.append(blob_list[i], \"literal\", true);\n    }\n    if (!this.state.tmp.just_looking && blob_list.length > 0) {\n        this.state.tmp.probably_rendered_something = true;\n    }\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(14)\");\n    }\n    //SNIP-END\n    this.state.output.closeLevel(\"empty\");\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(15)\");\n    }\n    //SNIP-END\n    var blob = this.state.output.pop();\n    this.state.tmp.name_node.top = blob;\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(16)\");\n    }\n    //SNIP-END\n\n    // Append will drop the names on the floor here if suppress-me is\n    // set on element_trace.\n    // Need to rescue the value for collapse comparison.\n    var namesToken = CSL.Util.cloneToken(this.names);\n    if (this.state.tmp.group_context.tip.condition) {\n        CSL.UPDATE_GROUP_CONTEXT_CONDITION(this.state, this.names.strings.prefix, null, this.names);\n    }\n    this.state.output.append(blob, namesToken);\n    if (this.state.tmp.term_predecessor_name) {\n        this.state.tmp.term_predecessor = true;\n    }\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(17)\");\n    }\n    //SNIP-END\n    // Also used in CSL.Util.substituteEnd (which could do with\n    // some cleanup at this writing).\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(18)\");\n    }\n    //SNIP-END\n    if (variables[0] !== \"authority\") {\n        // Just grab the string values in the name\n        var name_node_string = [];\n        var nameobjs = this.Item[variables[0]];\n        if (nameobjs) {\n            for (var i = 0, ilen = nameobjs.length; i < ilen; i += 1) {\n                var substring = CSL.Util.Names.getRawName(nameobjs[i]);\n                if (substring) {\n                    name_node_string.push(substring);\n                }\n            }\n        }\n        name_node_string = name_node_string.join(\", \");\n        if (name_node_string) {\n            this.state.tmp.name_node.string = name_node_string;\n        }\n    }\n    // for classic support\n    // This may be more convoluted than it needs to be. Or maybe not.\n    //\n    // Check for classic abbreviation\n    //\n    // If found, then (1) suppress title rendering, (2) replace the node\n    // with the abbreviation output [and (3) do not run this._collapseAuthor() ?]\n    if (this.state.tmp.name_node.string && !this.state.tmp.first_name_string) {\n        this.state.tmp.first_name_string = this.state.tmp.name_node.string;\n    }\n    if (\"classic\" === this.Item.type) {\n        if (this.state.tmp.first_name_string) {\n            var author_title = [];\n            author_title.push(this.state.tmp.first_name_string);\n            if (this.Item.title) {\n                author_title.push(this.Item.title);\n            }\n            author_title = author_title.join(\", \");\n            if (author_title && this.state.sys.getAbbreviation) {\n                if (this.state.sys.normalizeAbbrevsKey) {\n                    author_title = this.state.sys.normalizeAbbrevsKey(\"classic\", author_title);\n                }\n                this.state.transform.loadAbbreviation(\"default\", \"classic\", author_title, this.Item.language);\n                if (this.state.transform.abbrevs[\"default\"].classic[author_title]) {\n                    this.state.tmp.done_vars.push(\"title\");\n                    this.state.output.append(this.state.transform.abbrevs[\"default\"].classic[author_title], \"empty\", true);\n                    blob = this.state.output.pop();\n\t\t\t\t    this.state.tmp.name_node.top.blobs.pop();\n                    this.state.tmp.name_node.top.blobs.push(blob);\n                }\n            }\n        }\n    }\n\n    // Let's try something clever here.\n    this._collapseAuthor();\n\n    // For name_SubstituteOnNamesSpanNamesSpanFail\n    this.variables = [];\n    \n    // Reset stop-last after rendering\n    this.state.tmp.authority_stop_last = 0;\n\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"(19)\");\n    }\n    //SNIP-END\n};\n\nCSL.NameOutput.prototype._applyLabels = function (blob, v) {\n    var txt;\n    if (!this.label || !this.label[this.labelVariable]) {\n        return blob;\n    }\n    var plural = 0;\n    var num = this.freeters_count[v] + this.institutions_count[v];\n    if (num > 1) {\n        plural = 1;\n    } else {\n        for (var i = 0, ilen = this.persons[v].length; i < ilen; i += 1) {\n            num += this.persons_count[v][i];\n        }\n        if (num > 1) {\n            plural = 1;\n        }\n    }\n    // Some code duplication here, should be factored out.\n    if (this.label[this.labelVariable].before) {\n        if (\"number\" === typeof this.label[this.labelVariable].before.strings.plural) {\n            plural = this.label[this.labelVariable].before.strings.plural;\n        }\n        txt = this._buildLabel(v, plural, \"before\", this.labelVariable);\n        this.state.output.openLevel(\"empty\");\n        this.state.output.append(txt, this.label[this.labelVariable].before, true);\n        this.state.output.append(blob, \"literal\", true);\n        this.state.output.closeLevel(\"empty\");\n        blob = this.state.output.pop();\n    } else if (this.label[this.labelVariable].after) {\n        if (\"number\" === typeof this.label[this.labelVariable].after.strings.plural) {\n            plural = this.label[this.labelVariable].after.strings.plural;\n        }\n        txt = this._buildLabel(v, plural, \"after\", this.labelVariable);\n        this.state.output.openLevel(\"empty\");\n        this.state.output.append(blob, \"literal\", true);\n        this.state.output.append(txt, this.label[this.labelVariable].after, true);\n        this.state.tmp.label_blob = this.state.output.pop();\n        this.state.output.append(this.state.tmp.label_blob,\"literal\",true);\n        this.state.output.closeLevel(\"empty\");\n        blob = this.state.output.pop();\n    }\n    return blob;\n};\n\nCSL.NameOutput.prototype._buildLabel = function (term, plural, position, v) {\n    if (this.common_term) {\n        term = this.common_term;\n    }\n\n    var ret = false;\n    var node = this.label[v][position];\n    if (node) {\n        ret = CSL.castLabel(this.state, node, term, plural, CSL.TOLERANT);\n    }\n    return ret;\n};\n\n\nCSL.NameOutput.prototype._collapseAuthor = function () {\n    var myqueue, mystr, oldchars;\n    // collapse can be undefined, an array of length zero, and probably\n    // other things ... ugh.\n    if (this.state.tmp.name_node.top.blobs.length === 0) {\n        return;\n    }\n    if (this.nameset_base === 0 && this.Item[this.variables[0]] && !this._first_creator_variable) {\n        this._first_creator_variable = this.variables[0];\n    }\n    if ((this.state[this.state.tmp.area].opt.collapse\n            && this.state[this.state.tmp.area].opt.collapse.length)\n        || (this.state[this.state.tmp.area].opt.cite_group_delimiter \n            && this.state[this.state.tmp.area].opt.cite_group_delimiter.length)) {\n\n        if (this.state.tmp.authorstring_request) {\n            // Avoid running this on every call to getAmbiguousCite()?\n            mystr = \"\";\n            myqueue = this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs;\n            oldchars = this.state.tmp.offset_characters;\n            if (myqueue) {\n                mystr = this.state.output.string(this.state, myqueue, false);\n            }\n            // Avoid side-effects on character counting: we're only interested\n            // in the final rendering.\n            this.state.tmp.offset_characters = oldchars;\n            this.state.registry.authorstrings[this.Item.id] = mystr;\n        } else if (!this.state.tmp.just_looking\n                   && !this.state.tmp.suppress_decorations && ((this.state[this.state.tmp.area].opt.collapse && this.state[this.state.tmp.area].opt.collapse.length) || this.state[this.state.tmp.area].opt.cite_group_delimiter && this.state[this.state.tmp.area].opt.cite_group_delimiter)) {\n            // XX1 this.state.sys.print(\"RENDER: \"+this.Item.id);\n            mystr = \"\";\n            myqueue = this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs;\n            oldchars = this.state.tmp.offset_characters;\n            if (myqueue) {\n                mystr = this.state.output.string(this.state, myqueue, false);\n            }\n            if (mystr === this.state.tmp.last_primary_names_string) {\n                if (this.item[\"suppress-author\"] || (this.state[this.state.tmp.area].opt.collapse && this.state[this.state.tmp.area].opt.collapse.length)) {\n                    // XX1 this.state.sys.print(\"    CUT!\");\n                    this.state.tmp.name_node.top.blobs.pop();\n                    this.state.tmp.name_node.children = [];\n                    // If popped, avoid side-effects on character counting: we're only interested\n                    // in things that actually render.\n                    this.state.tmp.offset_characters = oldchars;\n                }\n                // Needed\n                if (this.state[this.state.tmp.area].opt.cite_group_delimiter && this.state[this.state.tmp.area].opt.cite_group_delimiter) {\n                    this.state.tmp.use_cite_group_delimiter = true;\n                }\n            } else {\n                // XX1 this.state.sys.print(\"remembering: \"+mystr);\n                this.state.tmp.last_primary_names_string = mystr;\n                // XXXXX A little more precision would be nice.\n                // This will clobber variable=\"author editor\" as well as variable=\"author\".\n\n                if (this.variables.indexOf(this._first_creator_variable) > -1 && this.item && this.item[\"suppress-author\"] && this.Item.type !== \"legal_case\") {\n                    this.state.tmp.name_node.top.blobs.pop();\n                    this.state.tmp.name_node.children = [];\n                    // If popped, avoid side-effects on character counting: we're only interested\n                    // in things that actually render.\n                    this.state.tmp.offset_characters = oldchars;\n\n                    // A wild guess, but will usually be correct\n                    this.state.tmp.term_predecessor = false;\n                }\n                // Arcane and probably unnecessarily complicated?\n                this.state.tmp.have_collapsed = false;\n                // Needed\n                if (this.state[this.state.tmp.area].opt.cite_group_delimiter && this.state[this.state.tmp.area].opt.cite_group_delimiter) {\n                    this.state.tmp.use_cite_group_delimiter = false;\n                }\n            }\n        }\n    }\n};\n\n/*\nCSL.NameOutput.prototype.suppressNames = function() {\n    suppress_condition = suppress_min && display_names.length >= suppress_min;\n    if (suppress_condition) {\n        continue;\n    }\n}\n*/\n\n/*global CSL: true */\n\nCSL.NameOutput.prototype.isPerson = function (value) {\n    if (value.literal\n        || (!value.given && value.family && value.isInstitution)) {\n        \n        return false;\n    } else {\n        return true;\n    }\n};\n\n/*global CSL: true */\n\nCSL.NameOutput.prototype.truncatePersonalNameLists = function () {\n    var v, i, ilen, j, jlen, chopvar, values;\n    // XXX Before truncation, make a note of the original number\n    // of names, for use in et-al evaluation.\n    this.freeters_count = {};\n    this.persons_count = {};\n    this.institutions_count = {};\n    // By key is okay here, as we don't care about sequence.\n    for (v in this.freeters) {\n        if (this.freeters.hasOwnProperty(v)) {\n            this.freeters_count[v] = this.freeters[v].length;\n            this.freeters[v] = this._truncateNameList(this.freeters, v);\n        }\n    }\n\n    for (v in this.persons) {\n        if (this.persons.hasOwnProperty(v)) {\n            this.institutions_count[v] = this.institutions[v].length;\n            this._truncateNameList(this.institutions, v);\n            this.persons[v] = this.persons[v].slice(0, this.institutions[v].length);\n            this.persons_count[v] = [];\n            for (j = 0, jlen = this.persons[v].length; j < jlen; j += 1) {\n                this.persons_count[v][j] = this.persons[v][j].length;\n                this.persons[v][j] = this._truncateNameList(this.persons, v, j);\n            }\n        }\n    }\n    if (this.state.opt.development_extensions.etal_min_etal_usefirst_hack\n        && this.etal_min === 1 && this.etal_use_first === 1 \n        && !(this.state.tmp.extension\n             || this.state.tmp.just_looking)) {\n        chopvar = v;\n    } else {\n        chopvar = false;\n    }\n    if (chopvar || this._please_chop) {\n        for (i = 0, ilen = this.variables.length; i < ilen; i += 1) {\n            v = this.variables[i];\n            if (this.freeters[v].length) {\n                if (this._please_chop === v) {\n                    this.freeters[v] = this.freeters[v].slice(1);\n                    this.freeters_count[v] += -1;\n                    this._please_chop = false;\n                } else if (chopvar && !this._please_chop) {\n                    this.freeters[v] = this.freeters[v].slice(0, 1);\n                    this.freeters_count[v] = 1;\n                    this.institutions[v] = [];\n                    this.persons[v] = [];\n                    this._please_chop = chopvar;\n                }\n            }\n            for (var j=0,jlen = this.persons[v].length;j<jlen;j++) {\n                if (this.persons[v][j].length) {\n                    if (this._please_chop === v) {\n                        this.persons[v][j] = this.persons[v][j].slice(1);\n                        this.persons_count[v][j] += -1;\n                        this._please_chop = false;\n                        break;\n                    } else if (chopvar && !this._please_chop) {\n                        this.freeters[v] = this.persons[v][j].slice(0, 1);\n                        this.freeters_count[v] = 1;\n                        this.institutions[v] = [];\n                        this.persons[v] = [];\n                        values = [];\n                        this._please_chop = chopvar;\n                        break;\n                    }\n                }\n            }\n            if (this.institutions[v].length) {\n                if (this._please_chop === v) {\n                    this.institutions[v] = this.institutions[v].slice(1);\n                    this.institutions_count[v] += -1;\n                    this._please_chop = false;\n                } else if (chopvar && !this._please_chop) {\n                    this.institutions[v] = this.institutions[v].slice(0, 1);\n                    this.institutions_count[v] = 1;\n                    values = [];\n                    this._please_chop = chopvar;\n                }\n            }\n        }\n    }\n\n    // Transliteration and abbreviation mapping\n\n    // Hmm. This could produce three lists for each nameset:\n    //   - primary (transformed in place)\n    //   - secondary\n    //   - tertiary\n    // with items that produce no result in the secondary and tertiary\n    // transforms set to false. Maybe.\n\n    // Actually that would be insane, so forget it.\n    // What we need is to add suitable parameters to getName(), and merge\n    // the single-name-level operations below into that function. Then the\n    // operation can be applied in util_names_render.js, and the logic\n    // becomes very similar to what we already have running in util_transform.js.\n\n/*\n    for (v in this.freeters) {\n        this._transformNameset(this.freeters[v]);\n    }\n    for (v in this.persons) {\n        for (i = 0, ilen = this.persons[v].length; i < ilen; i += 1) {\n            this._transformNameset(this.persons[v][i]);\n        }\n        this._transformNameset(this.institutions[v]);\n    }\n*/\n\n    // Could also be factored out to a separate function for clarity.\n    // ???? XXX Does this belong?\n    for (i = 0, ilen = this.variables.length; i < ilen; i += 1) {\n        if (this.institutions[v].length) {\n            this.nameset_offset += 1;\n        }\n        for (var j=0,jlen=this.persons[v].length;j<jlen;j++) {\n            if (this.persons[v][j].length) {\n                this.nameset_offset += 1;\n            }\n            // this.institutions[v][i] = this._splitInstitution(this.institutions[v][i], v, i);\n        }\n    }\n};\n\nCSL.NameOutput.prototype._truncateNameList = function (container, variable, index) {\n    var lst;\n    if (\"undefined\" === typeof index) {\n        lst = container[variable];\n    } else {\n        lst = container[variable][index];\n    }\n    if (this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names \n        && lst.length > 50 \n        && lst.length > (this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names + 2)) {\n\n        // Preserve the last name in the list, in case we're rendering with a PI ellipsis (et-al-use-last)\n        var limit = this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names;\n        lst = lst.slice(0, limit+1).concat(lst.slice(-1));\n    }\n    return lst;\n};\n\n\n/*global CSL: true */\n\nCSL.NameOutput.prototype.divideAndTransliterateNames = function () {\n    var i, ilen, j, jlen;\n    var Item = this.Item;\n    var variables = this.variables;\n    this.varnames = variables.slice();\n    this.freeters = {};\n    this.persons = {};\n    this.institutions = {};\n    for (i = 0, ilen = variables.length; i < ilen; i += 1) {\n        var v = variables[i];\n        this.variable_offset[v] = this.nameset_offset;\n        var values = this._normalizeVariableValue(Item, v);\n        if (this.name.strings[\"suppress-min\"] && values.length >= this.name.strings[\"suppress-min\"]) {\n            values = [];\n        }\n        if (this.name.strings[\"suppress-max\"] && values.length <= this.name.strings[\"suppress-max\"]) {\n            values = [];\n        }\n        this._getFreeters(v, values);\n        this._getPersonsAndInstitutions(v, values);\n        if (this.state.opt.development_extensions.spoof_institutional_affiliations) {\n            if (this.name.strings[\"suppress-min\"] === 0) {\n                this.freeters[v] = [];\n                for (j = 0, jlen = this.persons[v].length; j < jlen; j += 1) {\n                    this.persons[v][j] = [];\n                }\n            } else if (this.institution.strings[\"suppress-min\"] === 0) {\n                this.institutions[v] = [];\n                this.freeters[v] = this.freeters[v].concat(this.persons[v]);\n                for (j = 0, jlen = this.persons[v].length; j < jlen; j += 1) {\n                    for (var k = 0, klen = this.persons[v][j].length; k < klen; k += 1) {\n                        this.freeters[v].push(this.persons[v][j][k]);\n                    }\n                }\n                this.persons[v] = [];\n            }\n        }\n    }\n};\n\nCSL.NameOutput.prototype._normalizeVariableValue = function (Item, variable) {\n    var names;\n    if (\"string\" === typeof Item[variable] || \"number\" === typeof Item[variable]) {\n        CSL.debug(\"name variable \\\"\" + variable + \"\\\" is string or number, not array. Attempting to fix.\");\n        names = [{literal: Item[variable] + \"\"}];\n    } else if (!Item[variable]) {\n        names = [];\n    } else if (\"number\" !== typeof Item[variable].length) {\n        CSL.debug(\"name variable \\\"\" + variable + \"\\\" is object, not array. Attempting to fix.\");\n        Item[variable] = [Item[variable]];\n        names = Item[variable].slice();\n    } else {\n        names = Item[variable].slice();\n    }\n    return names;\n};\n\nCSL.NameOutput.prototype._getFreeters = function (v, values) {\n    this.freeters[v] = [];\n    if (this.state.opt.development_extensions.spoof_institutional_affiliations) {\n        for (var i=values.length-1;i>-1;i--) {\n            if (this.isPerson(values[i])) {\n                var value = this._checkNickname(values.pop());\n                if (value) {\n                    this.freeters[v].push(value);\n                }\n            } else {\n                break;\n            }\n        }\n    } else {\n        for (var i=values.length-1;i>-1;i--) {\n            var value = values.pop();\n            if (this.isPerson(value)) {\n                var value = this._checkNickname(value);\n            }\n            this.freeters[v].push(value);\n        }\n    }\n    this.freeters[v].reverse();\n    if (this.freeters[v].length) {\n        this.nameset_offset += 1;\n    }\n};\n\nCSL.NameOutput.prototype._getPersonsAndInstitutions = function (v, values) {\n    this.persons[v] = [];\n    this.institutions[v] = [];\n    if (!this.state.opt.development_extensions.spoof_institutional_affiliations) {\n        return;\n    }\n    var persons = [];\n    var has_affiliates = false;\n    var first = true;\n    for (var i = values.length - 1; i > -1; i += -1) {\n        if (this.isPerson(values[i])) {\n            var value = this._checkNickname(values[i]);\n            if (value) {\n                persons.push(value);\n            }\n        } else {\n            has_affiliates = true;\n            this.institutions[v].push(values[i]);\n            if (!first) {\n                persons.reverse();\n                this.persons[v].push(persons);\n                persons = [];\n            }\n            first = false;\n        }\n    }\n    if (has_affiliates) {\n        persons.reverse();\n        this.persons[v].push(persons);\n        this.persons[v].reverse();\n        this.institutions[v].reverse();\n    }\n};\n\nCSL.NameOutput.prototype._clearValues = function (values) {\n    for (var i = values.length - 1; i > -1; i += -1) {\n        values.pop();\n    }\n};\n\nCSL.NameOutput.prototype._checkNickname = function (name) {\n    if ([\"interview\", \"personal_communication\"].indexOf(this.Item.type) > -1) {\n        var author = \"\";\n        author = CSL.Util.Names.getRawName(name);\n        if (author && this.state.sys.getAbbreviation && !(this.item && this.item[\"suppress-author\"])) {\n            var normalizedKey = author;\n            if (this.state.sys.normalizeAbbrevsKey) {\n                // The first argument does not have to be the exact variable name.\n                normalizedKey = this.state.sys.normalizeAbbrevsKey(\"author\", author);\n            }\n            this.state.transform.loadAbbreviation(\"default\", \"nickname\", normalizedKey, this.Item.language);\n            // XXX Why does this have to happen here?\n            var myLocalName = this.state.transform.abbrevs[\"default\"].nickname[normalizedKey];\n            if (myLocalName) {\n                if (myLocalName === \"!here>>>\") {\n                    name = false;\n                } else {\n                    name = {family:myLocalName,given:''};\n                }\n            }\n        }\n    }\n    return name;\n};\n\n/*global CSL: true */\n\nCSL.NameOutput.prototype._purgeEmptyBlobs = function (blobs) {\n    for (var i = blobs.length - 1; i > -1; i += -1) {\n        if (!blobs[i] || blobs[i].length === 0 || !blobs[i].blobs.length) {\n            blobs = blobs.slice(0, i).concat(blobs.slice(i + 1));\n        }\n    }\n    return blobs;\n};\n\nCSL.NameOutput.prototype.joinPersons = function (blobs, pos, j, tokenname) {\n    var ret;\n    blobs = this._purgeEmptyBlobs(blobs);\n    if (!tokenname) {\n        tokenname = \"name\";\n    }\n    if (\"undefined\" === typeof j) {\n        if (this.etal_spec[pos].freeters === 1) {\n           ret = this._joinEtAl(blobs);\n        } else if (this.etal_spec[pos].freeters === 2) {\n            ret = this._joinEllipsis(blobs);\n        } else if (!this.state.tmp.sort_key_flag) {\n            ret = this._joinAnd(blobs);\n        } else {\n            ret = this._join(blobs, this.state.inheritOpt(this.name, \"delimiter\", \"name-delimiter\", \", \"));\n        }\n    } else {\n        if (this.etal_spec[pos].persons[j] === 1) {\n            ret = this._joinEtAl(blobs);\n        } else if (this.etal_spec[pos].persons[j] === 2) {\n            ret = this._joinEllipsis(blobs);\n        } else if (!this.state.tmp.sort_key_flag) {\n            ret = this._joinAnd(blobs);\n        } else {\n            ret = this._join(blobs, this.state.inheritOpt(this.name, \"delimiter\", \"name-delimiter\", \", \"));\n        }\n    }\n    return ret;\n};\n\n\nCSL.NameOutput.prototype.joinInstitutionSets = function (blobs, pos) {\n    var ret;\n    blobs = this._purgeEmptyBlobs(blobs);\n    if (this.etal_spec[pos].institutions === 1) {\n        ret = this._joinEtAl(blobs, \"institution\");\n    } else if (this.etal_spec[pos].institutions === 2) {\n        ret = this._joinEllipsis(blobs, \"institution\");\n    } else {\n        ret = this._joinAnd(blobs);\n    }\n    return ret;\n};\n\n\nCSL.NameOutput.prototype.joinPersonsAndInstitutions = function (blobs) {\n    //\n    blobs = this._purgeEmptyBlobs(blobs);\n    var ret = this._join(blobs, this.state.tmp.name_delimiter);\n    ret.isInstitution = true;\n    return ret;\n};\n\n// LEGACY\n// This should go away eventually\nCSL.NameOutput.prototype.joinFreetersAndInstitutionSets = function (blobs) {\n    // Nothing, one or two, never more\n    blobs = this._purgeEmptyBlobs(blobs);\n    var ret = this._join(blobs, \"[never here]\", this[\"with\"].single, this[\"with\"].multiple);\n    //var ret = this._join(blobs, \"\");\n    return ret;\n};\n\nCSL.NameOutput.prototype._getAfterInvertedName = function(blobs, delimiter, finalJoin) {\n    if (finalJoin && blobs.length > 1) {\n        if (this.state.inheritOpt(this.name, \"delimiter-precedes-last\") === \"after-inverted-name\") {\n            var prevBlob = blobs[blobs.length - 2];\n            if (prevBlob.blobs.length > 0 && prevBlob.blobs[0].isInverted) {\n                finalJoin.strings.prefix = delimiter;\n            }\n        }\n    }\n    return finalJoin;\n}\n\nCSL.NameOutput.prototype._getAndJoin = function (blobs, delimiter) {\n    var finalJoin = false;\n    if (blobs.length > 1) {\n        var singleOrMultiple = \"single\";\n        if (blobs.length > 2) {\n            singleOrMultiple = \"multiple\";\n        }\n        if (blobs[blobs.length - 1].isInstitution) {\n            finalJoin = this.institution.and[singleOrMultiple];\n        } else {\n            finalJoin = this.name.and[singleOrMultiple];\n        }\n        // finalJoin = new CSL.Blob(finalJoin);\n        finalJoin = JSON.parse(JSON.stringify(finalJoin));\n        finalJoin = this._getAfterInvertedName(blobs, delimiter, finalJoin);\n    }\n    return finalJoin;\n};\n\nCSL.NameOutput.prototype._joinEtAl = function (blobs) {\n    var delimiter = this.state.inheritOpt(this.name, \"delimiter\", \"name-delimiter\", \", \");\n    var blob = this._join(blobs, delimiter);\n    \n    // notSerious\n    this.state.output.openLevel(this._getToken(\"name\"));\n    // Delimiter is applied from separately saved source in this case,\n    // for discriminate application of single and multiple joins.\n    this.state.output.current.value().strings.delimiter = \"\";\n    this.state.output.append(blob, \"literal\", true);\n    if (blobs.length > 1) {\n        this.state.output.append(this[\"et-al\"].multiple, \"literal\", true);\n    } else if (blobs.length === 1) {\n        this.state.output.append(this[\"et-al\"].single, \"literal\", true);\n    }\n    this.state.output.closeLevel();\n    return this.state.output.pop();\n};\n\n\nCSL.NameOutput.prototype._joinEllipsis = function (blobs) {\n    var delimiter = this.state.inheritOpt(this.name, \"delimiter\", \"name-delimiter\", \", \");\n    var finalJoin = false;\n    if (blobs.length > 1) {\n        var singleOrMultiple = \"single\";\n        if (blobs.length > 2) {\n            singleOrMultiple = \"multiple\";\n        }\n        finalJoin = JSON.parse(JSON.stringify(this.name.ellipsis[singleOrMultiple]));\n        finalJoin = this._getAfterInvertedName(blobs, delimiter , finalJoin);\n        \n    }\n    return this._join(blobs, delimiter, finalJoin);\n};\n\nCSL.NameOutput.prototype._joinAnd = function (blobs) {\n    var delimiter = this.state.inheritOpt(this.name, \"delimiter\", \"name-delimiter\", \", \");\n    var finalJoin = this._getAndJoin(blobs, delimiter);\n    return this._join(blobs, delimiter, finalJoin);\n};\n\n\nCSL.NameOutput.prototype._join = function (blobs, delimiter, finalJoin) {\n    var i, ilen;\n    if (!blobs) {\n        return false;\n    }\n    blobs = this._purgeEmptyBlobs(blobs);\n    if (!blobs.length) {\n        return false;\n    }\n    if (blobs.length > 1) {\n        if (blobs.length === 2) {\n            if (!finalJoin) {\n                blobs[0].strings.suffix += delimiter;\n            } else {\n                blobs = [blobs[0], finalJoin, blobs[1]];\n            }\n        } else {\n            var offset;\n            if (finalJoin) {\n                offset = 1;\n            } else {\n                offset = 0;\n            }\n            var blob = blobs.pop();\n            for (var i=0,ilen=blobs.length - offset;i<ilen;i++) {\n                blobs[i].strings.suffix += delimiter;\n            }\n            blobs.push(finalJoin);\n            blobs.push(blob);\n        }\n    }\n\n    //this.state.output.openLevel(this._getToken(tokenname));\n    this.state.output.openLevel();\n\n    //this.state.output.openLevel(this._getToken(\"empty\"));\n    // Delimiter is applied from separately saved source in this case,\n    // for discriminate application of single and multiple joins.\n    for (i = 0, ilen = blobs.length; i < ilen; i += 1) {\n        this.state.output.append(blobs[i], false, true);\n    }\n    this.state.output.closeLevel();\n    return this.state.output.pop();\n};\n\n\nCSL.NameOutput.prototype._getToken = function (tokenname) {\n    var token = this[tokenname];\n    if (tokenname === \"institution\") {\n        var newtoken = new CSL.Token();\n        // Which, hmm, is the same thing as \"empty\"\n        // Oh, well.\n        //newtoken.strings.prefix = token.prefix;\n        //newtoken.strings.suffix = token.suffix;\n        return newtoken;\n    }\n    return token;\n};\n\n/*global CSL: true */\n\nCSL.NameOutput.prototype.checkCommonAuthor = function(requireMatch) {\n    if (!requireMatch) {\n        return false;\n    }\n    var common_term = false;\n    if (this.variables.length === 2) {\n        var variables = this.variables;\n        var varnames = variables.slice();\n        varnames.sort();\n        common_term = varnames.join(\"\");\n    }\n    if (!common_term) {\n        return false;\n    }\n    var has_term = false;\n    if (this.state.locale[this.state.opt.lang].terms[common_term]) {\n        has_term = true;\n    }\n    if (!has_term) {\n        this.state.tmp.done_vars.push(this.variables[0]);\n        this.state.tmp.done_vars.push(this.variables[1]);\n        return false;\n    }\n    var firstSet = this.Item[this.variables[0]];\n    var secondSet = this.Item[this.variables[1]];\n    var perfectMatch = this._compareNamesets(firstSet, secondSet);\n    if (perfectMatch === true) {\n        this.state.tmp.done_vars.push(this.variables[0]);\n        this.state.tmp.done_vars.push(this.variables[1]);\n    }\n    // This may be counter-intuitive.\n    // This check controls whether we will fail on the this attempt at rendering\n    // and proceed with substitution. If the names match exactly (true), then\n    // we do *not* want to abort and continue with substitution.\n    return !perfectMatch;\n};\n\nCSL.NameOutput.prototype.setCommonTerm = function () {\n    var variables = this.variables;\n    var varnames = variables.slice();\n    varnames.sort();\n    this.common_term = varnames.join(\"\");\n    // When no varnames are on offer\n    if (!this.common_term) {\n        return;\n    }\n    var has_term = false;\n    if (this.label && this.label[this.variables[0]]) {\n        if (this.label[this.variables[0]].before) {\n            has_term = this.state.getTerm(this.common_term, this.label[this.variables[0]].before.strings.form, 0);\n        } else if (this.label[this.variables[0]].after) {\n            has_term = this.state.getTerm(this.common_term, this.label[this.variables[0]].after.strings.form, 0);\n        }\n     }\n\n    // When there is no common term\n    if (!this.state.locale[this.state.opt.lang].terms[this.common_term]\n        || !has_term\n        || this.variables.length < 2) {\n        this.common_term = false;\n        return;\n    }\n    var freeters_offset = 0;\n    for (var i = 0, ilen = this.variables.length - 1; i < ilen; i += 1) {\n        var v = this.variables[i];\n        var vv = this.variables[i + 1];\n        if (this.freeters[v].length || this.freeters[vv].length) {\n            if (this.etal_spec[v].freeters !== this.etal_spec[vv].freeters\n                || !this._compareNamesets(this.freeters[v], this.freeters[vv])) {\n                this.common_term = false;\n                return;\n            }\n            freeters_offset += 1;\n        }\n        if (this.persons[v].length !== this.persons[vv].length) {\n            this.common_term = false;\n            return;\n        }\n        for (var j = 0, jlen = this.persons[v].length; j < jlen; j += 1) {\n            if (this.etal_spec[v].persons[j] !== this.etal_spec[vv].persons[j]\n                || !this._compareNamesets(this.persons[v][j], this.persons[vv][j])) {\n                this.common_term = false;\n                return;\n            }\n        }\n    }\n};\n\nCSL.NameOutput.prototype._compareNamesets = function (base_nameset, nameset) {\n    if (!base_nameset || !nameset || base_nameset.length !== nameset.length) {\n        return false;\n    }\n    for (var i = 0, ilen = nameset.length; i < ilen; i += 1) {\n        for (var j = 0, jlen = CSL.NAME_PARTS.length; j < jlen; j += 1) {\n            var part = CSL.NAME_PARTS[j];\n            if (!base_nameset[i] || base_nameset[i][part] != nameset[i][part]) {\n                return false;\n            }\n        }\n    }\n    return true;\n};\n\n/*global CSL: true */\n\nCSL.NameOutput.prototype.constrainNames = function () {\n    // figure out how many names to include, in light of the disambig params\n    //\n    this.names_count = 0;\n    //var pos = 0;\n    var pos;\n    for (var i = 0, ilen = this.variables.length; i < ilen; i += 1) {\n        var v = this.variables[i];\n        pos = this.nameset_base + i;\n        // Constrain independent authors here\n        if (this.freeters[v].length) {\n            this.state.tmp.names_max.push(this.freeters[v].length, \"literal\");\n            this._imposeNameConstraints(this.freeters, this.freeters_count, v, pos);\n            this.names_count += this.freeters[v].length;\n        }\n\n        // Constrain institutions here\n        if (this.institutions[v].length) {\n            this.state.tmp.names_max.push(this.institutions[v].length, \"literal\");\n            this._imposeNameConstraints(this.institutions, this.institutions_count, v, pos);\n            this.persons[v] = this.persons[v].slice(0, this.institutions[v].length);\n            this.names_count += this.institutions[v].length;\n        }\n\n        for (var j = 0, jlen = this.persons[v].length; j < jlen; j += 1) {\n            // Constrain affiliated authors here\n            if (this.persons[v][j].length) {\n                this.state.tmp.names_max.push(this.persons[v][j].length, \"literal\");\n                this._imposeNameConstraints(this.persons[v], this.persons_count[v], j, pos);\n                this.names_count += this.persons[v][j].length;\n            }\n        }\n    }\n};\n\nCSL.NameOutput.prototype._imposeNameConstraints = function (lst, count, key, pos) {\n    // display_names starts as the original length of this list of names.\n    var display_names = lst[key];\n    var discretionary_names_length = this.state.tmp[\"et-al-min\"];\n    \n    // Mappings, to allow existing disambiguation machinery to\n    // remain untouched.\n    if (this.state.tmp.suppress_decorations) {\n        if (this.state.tmp.disambig_request && this.state.tmp.disambig_request.names[pos]) {\n            // Oh. Trouble.\n            // state.tmp.nameset_counter is the number of the nameset\n            // in the disambiguation try-sequence. Ouch.\n            discretionary_names_length = this.state.tmp.disambig_request.names[pos];\n        } else if (count[key] >= this.etal_min) {\n            discretionary_names_length = this.etal_use_first;\n        }\n    } else {\n        if (this.state.tmp.disambig_request \n            && this.state.tmp.disambig_request.names[pos] > this.etal_use_first) {\n\n            if (count[key] < this.etal_min) {\n                discretionary_names_length = count[key];\n            } else {\n                discretionary_names_length = this.state.tmp.disambig_request.names[pos];\n            }\n        } else if (count[key] >= this.etal_min) {\n            //discretionary_names_length = this.state.tmp[\"et-al-use-first\"];\n            discretionary_names_length = this.etal_use_first;\n        }\n        // XXXX: This is a workaround. Under some conditions.\n        // Where namesets disambiguate on one of the two names\n        // dropped here, it is possible for more than one\n        // in-text citation to be close (and indistinguishable)\n        // matches to a single bibliography entry.\n        //\n        // \n        if (this.etal_use_last && discretionary_names_length > (this.etal_min - 2)) {\n            discretionary_names_length = this.etal_min - 2;\n        }\n    }\n    var sane = this.etal_min >= this.etal_use_first;\n    var overlength = count[key] > discretionary_names_length;\n    // This var is used to control contextual join, and\n    // lies about the number of names when forceEtAl is true,\n    // unless normalized.\n    if (discretionary_names_length > count[key]) {\n\n        // Use actual truncated list length, to avoid overrun.\n        discretionary_names_length = display_names.length;\n    }\n    // forceEtAl is relevant when the author list is\n    // truncated to eliminate clutter.\n    if (sane && overlength) {\n        if (this.etal_use_last) {\n            lst[key] = display_names.slice(0, discretionary_names_length).concat(display_names.slice(-1));\n        } else {\n            lst[key] = display_names.slice(0, discretionary_names_length);\n        }\n    }\n    this.state.tmp.disambig_settings.names[pos] = lst[key].length;\n    this.state.disambiguate.padBase(this.state.tmp.disambig_settings);\n    \n\n    // ???\n    //if (!this.state.tmp.disambig_request) {\n    //    this.state.tmp.disambig_settings.givens[pos] = [];\n    //}\n};\n\n// Disambiguate names (the number of names is controlled externally, by successive\n// runs of the processor).\n\n/*global CSL: true */\n\nCSL.NameOutput.prototype.disambigNames = function () {\n    var pos;\n    for (var i = 0, ilen = this.variables.length; i < ilen; i += 1) {\n        var v = this.variables[i];\n        pos = this.nameset_base + i;\n        if (this.freeters[v].length) {\n            this._runDisambigNames(this.freeters[v], pos);\n        }\n        // Is this even necessary???\n        if (this.institutions[v].length) {\n            if (\"undefined\" === typeof this.state.tmp.disambig_settings.givens[pos]) {\n                this.state.tmp.disambig_settings.givens[pos] = [];\n            }\n            for (var j=0,jlen=this.institutions[v].length;j<jlen;j+=1) {\n                if (\"undefined\" === typeof this.state.tmp.disambig_settings.givens[pos][j]) {\n                    this.state.tmp.disambig_settings.givens[pos].push(2);\n                }\n            }\n        }\n        for (var j = 0, jlen = this.persons[v].length; j < jlen; j += 1) {\n            if (this.persons[v][j].length) {\n                this._runDisambigNames(this.persons[v][j], pos);\n            }\n        }\n    }\n};\n\nCSL.NameOutput.prototype._runDisambigNames = function (lst, pos) {\n    var chk, myform, myinitials, param, i, ilen, paramx;\n    //if (this.state.tmp.root === \"bibliography\") {\n    //    return;\n    //}\n    for (i = 0, ilen = lst.length; i < ilen; i += 1) {\n        //\n        // register the name in the global names disambiguation\n        // registry\n\n        if (!lst[i].given && !lst[i].family) {\n            continue;\n        }\n\n        myinitials = this.state.inheritOpt(this.name, \"initialize-with\");\n        this.state.registry.namereg.addname(\"\" + this.Item.id, lst[i], i);\n        chk = this.state.tmp.disambig_settings.givens[pos];\n        if (\"undefined\" === typeof chk) {\n            // Holes can appear in the list, probably due to institutional\n            // names that this doesn't touch. Maybe. This fills them up.\n            for (var j = 0, jlen = pos + 1; j < jlen; j += 1) {\n                if (!this.state.tmp.disambig_settings.givens[j]) {\n                    this.state.tmp.disambig_settings.givens[j] = [];\n                }\n            }\n        }\n        chk = this.state.tmp.disambig_settings.givens[pos][i];\n        //if (\"undefined\" !== typeof chk && this.state.tmp.root === 'citation') {\n            //this.state.tmp.disambig_settings.givens[pos] = [];\n            //chk = undefined;\n        //}\n        if (\"undefined\" === typeof chk) {\n            myform = this.state.inheritOpt(this.name, \"form\", \"name-form\", \"long\");\n            param = this.state.registry.namereg.evalname(\"\" + this.Item.id, lst[i], i, 0, myform, myinitials);\n            this.state.tmp.disambig_settings.givens[pos].push(param);\n        }\n        //\n        // set the display mode default for givennames if required\n        myform = this.state.inheritOpt(this.name, \"form\", \"name-form\", \"long\");\n        paramx = this.state.registry.namereg.evalname(\"\" + this.Item.id, lst[i], i, 0, myform, myinitials);\n        // this.state.registry.namereg.evalname(\"\" + this.Item.id, lst[i], i, 0, myform, myinitials);\n        if (this.state.tmp.disambig_request) {\n            //\n            // fix a request for initials that makes no sense.\n            // can't do this in disambig, because the availability\n            // of initials is not a global parameter.\n            var val = this.state.tmp.disambig_settings.givens[pos][i];\n            // This is limited to by-cite disambiguation.\n            // 2012-09-13: added lst[i].given check to condition\n            if (val === 1 && \n                this.state.citation.opt[\"givenname-disambiguation-rule\"] === \"by-cite\" && \n                (\"undefined\" === typeof this.state.inheritOpt(this.name, \"initialize-with\")\n                 || \"undefined\" === typeof lst[i].given)) {\n                val = 2;\n            }\n            param = val;\n            // 2012-09-13: lst[i].given check protects against personal names\n            // that have no first name element. These were causing an infinite loop,\n            // this prevents that.\n            if (this.state.opt[\"disambiguate-add-givenname\"] && lst[i].given) {\n                param = this.state.registry.namereg.evalname(\"\" + this.Item.id, lst[i], i, param, this.state.inheritOpt(this.name, \"form\", \"name-form\", \"long\"), this.state.inheritOpt(this.name, \"initialize-with\"));\n            }\n        } else {\n            //\n            // it clicks.  here is where we will put the\n            // call to the names register, to get the floor value\n            // for an individual name.\n            //\n            param = paramx;\n        }\n        // Need to save off the settings based on subsequent\n        // form, when first cites are rendered.\n        if (!this.state.tmp.just_looking && this.item && this.item.position === CSL.POSITION_FIRST) {\n            if (paramx > param) {\n                param = paramx;\n            }\n        }\n        if (!this.state.tmp.sort_key_flag) {\n            this.state.tmp.disambig_settings.givens[pos][i] = param;\n            if (\"string\" === typeof myinitials\n                && (\"undefined\" === typeof this.name.strings[\"initialize\"]\n                    || true === this.name.strings[\"initialize\"])) {\n\n                this.state.tmp.disambig_settings.use_initials = true;\n            }\n        }\n    }\n    //this.state.registry.registry[this.Item.id].disambig.givens = this.state.tmp.disambig_settings.givens.slice();\n};\n\n/*global CSL: true */\n\nCSL.NameOutput.prototype.getEtAlConfig = function () {\n    var item = this.item;\n    this[\"et-al\"] = {};\n\n    this.state.output.append(this.etal_term, this.etal_style, true);\n    this[\"et-al\"].single = this.state.output.pop();\n    this[\"et-al\"].single.strings.suffix = this.etal_suffix;\n    this[\"et-al\"].single.strings.prefix = this.etal_prefix_single;\n    \n    this.state.output.append(this.etal_term, this.etal_style, true);\n    this[\"et-al\"].multiple = this.state.output.pop();\n    this[\"et-al\"].multiple.strings.suffix = this.etal_suffix;\n    this[\"et-al\"].multiple.strings.prefix = this.etal_prefix_multiple;\n\n    // Et-al style parameters (may be sidestepped by disambiguation\n    // in util_names_constraints.js)\n    if (\"undefined\" === typeof item) {\n        item = {};\n    }\n    //print(\"== getEtAlConfig() == \"+this.state.tmp.area);\n\n    if (item.position) {\n        if (this.state.inheritOpt(this.name, \"et-al-subsequent-min\")) {\n            // XX\n            this.etal_min = this.state.inheritOpt(this.name, \"et-al-subsequent-min\");\n        } else {\n            // XX\n            this.etal_min = this.state.inheritOpt(this.name, \"et-al-min\");\n        }\n        if (this.state.inheritOpt(this.name, \"et-al-subsequent-use-first\")) {\n            // XX\n            this.etal_use_first = this.state.inheritOpt(this.name, \"et-al-subsequent-use-first\");\n        } else {\n            // XX\n            this.etal_use_first = this.state.inheritOpt(this.name, \"et-al-use-first\");\n        }\n    } else {\n        if (this.state.tmp[\"et-al-min\"]) {\n            this.etal_min = this.state.tmp[\"et-al-min\"];\n        } else {\n            // XX\n            this.etal_min = this.state.inheritOpt(this.name, \"et-al-min\");\n        }\n        if (this.state.tmp[\"et-al-use-first\"]) {\n            this.etal_use_first = this.state.tmp[\"et-al-use-first\"];\n        } else {\n            // XX\n            this.etal_use_first = this.state.inheritOpt(this.name, \"et-al-use-first\");\n        }\n        if (\"boolean\" === typeof this.state.tmp[\"et-al-use-last\"]) {\n            //print(\"  etal_use_last from tmp: \"+this.state.tmp[\"et-al-use-last\"]);\n            this.etal_use_last = this.state.tmp[\"et-al-use-last\"];\n        } else {\n            //print(\"  etal_use_last from name: \"+this.name.strings[\"et-al-use-last\"]);\n            // XX\n            this.etal_use_last = this.state.inheritOpt(this.name, \"et-al-use-last\");\n        }\n        //print(\"  etal_use_last: \"+this.etal_use_last);\n    }\n    // Provided for use as the starting level for disambiguation.\n    if (!this.state.tmp[\"et-al-min\"]) {\n        this.state.tmp[\"et-al-min\"] = this.etal_min;\n    }\n};\n\n/*global CSL: true */\n\nCSL.NameOutput.prototype.setEtAlParameters = function () {\n    var i, ilen, j, jlen;\n    for (i = 0, ilen = this.variables.length; i < ilen; i += 1) {\n        var v = this.variables[i];\n        if (\"undefined\" === typeof this.etal_spec[v]) {\n            this.etal_spec[v] = {freeters:0,institutions:0,persons:[]};\n        }\n        this.etal_spec[this.nameset_base + i] = this.etal_spec[v];\n        if (this.freeters[v].length) {\n            this._setEtAlParameter(\"freeters\", v);\n        }\n        for (j = 0, jlen = this.persons[v].length; j < jlen; j += 1) {\n            if (\"undefined\" === typeof this.etal_spec[v][j]) {\n                this.etal_spec[v].persons[j] = 0;\n            }\n            this._setEtAlParameter(\"persons\", v, j);\n        }\n        if (this.institutions[v].length) {\n            this._setEtAlParameter(\"institutions\", v);\n        }\n    }\n};\n\nCSL.NameOutput.prototype._setEtAlParameter = function (type, v, j) {\n    var lst, count;\n    if (type === \"persons\") {\n        lst = this.persons[v][j];\n        count = this.persons_count[v][j];\n    } else {\n        lst = this[type][v];\n        count = this[type + \"_count\"][v];\n    }\n    if (lst.length < count && !this.state.tmp.sort_key_flag) {\n        if (this.etal_use_last) {\n            if (type === \"persons\") {\n                this.etal_spec[v].persons[j] = 2;\n            } else {\n                this.etal_spec[v][type] = 2;\n            }\n        } else {\n            if (type === \"persons\") {\n                this.etal_spec[v].persons[j] = 1;\n            } else {\n                this.etal_spec[v][type] = 1;\n            }\n        }\n    } else {\n        if (type === \"persons\") {\n            this.etal_spec[v].persons[j] = 0;\n        } else {\n            this.etal_spec[v][type] = 0;\n        }\n    }\n};\n\n/*global CSL: true */\n\nCSL.NameOutput.prototype.renderAllNames = function () {\n    // Note that et-al/ellipsis parameters are set on the basis\n    // of rendering order through the whole cite.\n    var pos;\n    for (var i = 0, ilen = this.variables.length; i < ilen; i += 1) {\n        var v = this.variables[i];\n\n        if (this.freeters[v].length || this.institutions[v].length) {\n            if (!this.state.tmp.group_context.tip.condition) {\n                this.state.tmp.just_did_number = false;\n            }\n        }\n        \n        pos = this.nameset_base + i;\n        if (this.freeters[v].length) {\n            this.freeters[v] = this._renderNames(v, this.freeters[v], pos);\n        }\n        for (var j = 0, jlen = this.institutions[v].length; j < jlen; j += 1) {\n            this.persons[v][j] = this._renderNames(v, this.persons[v][j], pos, j);\n        }\n    }\n    this.renderInstitutionNames();\n};\n\nCSL.NameOutput.prototype.renderInstitutionNames = function () {\n    // Institutions are split to string list as\n    // this.institutions[v][\"long\"] and this.institutions[v][\"short\"]\n    for (var i = 0, ilen = this.variables.length; i < ilen; i += 1) {\n        var v = this.variables[i];\n        for (var j = 0, jlen = this.institutions[v].length; j < jlen; j += 1) {\n            var institution;\n\n            var name = this.institutions[v][j];\n\n            \n\n            // XXX Start here for institutions\n            // Figure out the three segments: primary, secondary, tertiary\n            var j, jlen, localesets;\n            if (this.state.tmp.extension) {\n                localesets = [\"sort\"];\n            } else if (name.isInstitution || name.literal) {\n                // Will never hit this in this function, but preserving\n                // in case we factor this out.\n                localesets = this.state.opt['cite-lang-prefs'].institutions;\n            } else {\n                localesets = this.state.opt['cite-lang-prefs'].persons;\n            }\n\n            var slot = {primary:'locale-orig',secondary:false,tertiary:false};\n\t        if (localesets) {\n\t\t        var slotnames = [\"primary\", \"secondary\", \"tertiary\"];\n\t\t        for (var k = 0, klen = slotnames.length; k < klen; k += 1) {\n\t\t\t        if (localesets.length - 1 <  k) {\n\t\t\t\t        break;\n\t\t\t        }\n                    if (localesets[k]) {\n\t\t\t            slot[slotnames[k]] = 'locale-' + localesets[k];\n                    }\n\t\t        }\n\t        } else {\n\t\t        slot.primary = 'locale-translat';\n\t        }\n\t        if (this.state.tmp.area !== \"bibliography\"\n\t\t        && !(this.state.tmp.area === \"citation\"\n\t\t\t         && this.state.opt.xclass === \"note\"\n\t\t\t         && this.item && !this.item.position)) {\n                \n\t\t        slot.secondary = false;\n\t\t        slot.tertiary = false;\n\t        }\n            // Get normalized name object for a start.\n            // true invokes fallback\n            this.setRenderedName(name);\n\n            // XXXX FROM HERE (instututions)\n            var institution = this._renderInstitutionName(v, name, slot, j);\n\n            //this.institutions[v][j] = this._join(institution, \"\");\n            this.institutions[v][j] = institution;\n        }\n    }\n};\n\nCSL.NameOutput.prototype._renderInstitutionName = function (v, name, slot, j) {\n    var secondary, tertiary, long_style, short_style, institution, institution_short, institution_long;\n    var res = this.getName(name, slot.primary, true);\n    var primary = res.name;\n    var usedOrig = res.usedOrig;\n    if (primary) {\n        //print(\"primary, v, j = \"+primary+\", \"+v+\", \"+j);\n        primary = this.fixupInstitution(primary, v, j);\n    }\n\tsecondary = false;\n\tif (slot.secondary) {\n        res = this.getName(name, slot.secondary, false, usedOrig);\n        var secondary = res.name;\n        usedOrig = res.usedOrig;\n        if (secondary) {\n\t\t\tsecondary = this.fixupInstitution(secondary, v, j);\n        }\n\t}\n    //Zotero.debug(\"XXX [2] secondary: \"+secondary[\"long\"].literal+\", slot.secondary: \"+slot.secondary);\n\ttertiary = false;\n\tif (slot.tertiary) {\n        res = this.getName(name, slot.tertiary, false, usedOrig);\n        tertiary = res.name;\n        if (tertiary) {\n\t\t\ttertiary = this.fixupInstitution(tertiary, v, j);\n        }\n\t}\n    var n = {\n        l: {\n            pri: false,\n            sec: false,\n            ter: false\n        },\n        s: {\n            pri: false,\n            sec: false,\n            ter: false\n        }\n    };\n    if (primary) {\n        n.l.pri = primary[\"long\"];\n        n.s.pri = primary[\"short\"].length ? primary[\"short\"] : primary[\"long\"];\n    }\n    if (secondary) {\n        n.l.sec = secondary[\"long\"];\n        n.s.sec = secondary[\"short\"].length ? secondary[\"short\"] : secondary[\"long\"];\n    }\n    if (tertiary) {\n        n.l.ter = tertiary[\"long\"];\n        n.s.ter = tertiary[\"short\"].length ? tertiary[\"short\"] : tertiary[\"long\"];\n    }\n    switch (this.institution.strings[\"institution-parts\"]) {\n    case \"short\":\n        // No multilingual for pure short form institution names.\n        if (primary[\"short\"].length) {\n            short_style = this._getShortStyle();\n            institution = [this._composeOneInstitutionPart([n.s.pri, n.s.sec, n.s.ter], slot, short_style, v)];\n        } else {\n            // Fail over to long.\n            long_style = this._getLongStyle(primary, v, j);\n            institution = [this._composeOneInstitutionPart([n.l.pri, n.l.sec, n.l.ter], slot, long_style, v)];\n        }\n        break;\n    case \"short-long\":\n        long_style = this._getLongStyle(primary, v, j);\n        short_style = this._getShortStyle();\n        institution_short = this._renderOneInstitutionPart(primary[\"short\"], short_style);\n        // true is to include multilingual supplement\n        institution_long = this._composeOneInstitutionPart([n.l.pri, n.l.sec, n.l.ter], slot, long_style, v);\n        institution = [institution_short, institution_long];\n        break;\n    case \"long-short\":\n        long_style = this._getLongStyle(primary, v, j);\n        short_style = this._getShortStyle();\n        institution_short = this._renderOneInstitutionPart(primary[\"short\"], short_style);\n        // true is to include multilingual supplement\n        institution_long = this._composeOneInstitutionPart([n.l.pri, n.l.sec, n.l.ter], slot, long_style, v);\n        institution = [institution_long, institution_short];\n        break;\n    default:\n        long_style = this._getLongStyle(primary, v, j);\n        // true is to include multilingual supplement\n        institution = [this._composeOneInstitutionPart([n.l.pri, n.l.sec, n.l.ter], slot, long_style, v)];\n        break;\n    }\n    var blob = this._join(institution, \" \");\n    if (blob) {\n        blob.isInstitution = true;\n    }\n    this.state.tmp.name_node.children.push(blob);\n    return blob;\n};\n\nCSL.NameOutput.prototype._composeOneInstitutionPart = function (names, slot, style) {\n    var primary = false, secondary = false, tertiary = false, primary_tok, secondary_tok, tertiary_tok;\n    if (names[0]) {\n        primary_tok = CSL.Util.cloneToken(style);\n        if (this.state.opt.citeAffixes[slot.primary]){\n            if (\"<i>\" === this.state.opt.citeAffixes.institutions[slot.primary].prefix) {\n                var hasItalic = false;\n                for (var i = 0, ilen = primary_tok.decorations.length; i < ilen; i += 1) {\n                    if (style.decorations[i][0] === \"@font-style\"\n                        && primary_tok.decorations[i][1] === \"italic\") {\n                        hasItalic = true;\n                    }\n                }\n                if (!hasItalic) {\n                    primary_tok.decorations.push([\"@font-style\", \"italic\"]);\n                }\n            }\n        }\n        primary = this._renderOneInstitutionPart(names[0], primary_tok);\n     }\n    if (names[1]) {\n        secondary = this._renderOneInstitutionPart(names[1], style);\n    }\n    if (names[2]) {\n        tertiary = this._renderOneInstitutionPart(names[2], style);\n    }\n    // Compose\n    var institutionblob;\n    if (secondary || tertiary) {\n        this.state.output.openLevel(\"empty\");\n\n        this.state.output.append(primary);\n\n        secondary_tok = CSL.Util.cloneToken(style);\n        if (slot.secondary) {\n            secondary_tok.strings.prefix = this.state.opt.citeAffixes.institutions[slot.secondary].prefix;\n            secondary_tok.strings.suffix = this.state.opt.citeAffixes.institutions[slot.secondary].suffix;\n            // Add a space if empty\n            if (!secondary_tok.strings.prefix) {\n                secondary_tok.strings.prefix = \" \";\n            }\n        }\n        var secondary_outer = new CSL.Token();\n        secondary_outer.decorations.push([\"@font-style\", \"normal\"]);\n        secondary_outer.decorations.push([\"@font-weight\", \"normal\"]);\n        this.state.output.openLevel(secondary_outer);\n        this.state.output.append(secondary, secondary_tok);\n        this.state.output.closeLevel();\n\n        tertiary_tok = CSL.Util.cloneToken(style);\n        if (slot.tertiary) {\n            tertiary_tok.strings.prefix = this.state.opt.citeAffixes.institutions[slot.tertiary].prefix;\n            tertiary_tok.strings.suffix = this.state.opt.citeAffixes.institutions[slot.tertiary].suffix;\n            // Add a space if empty\n            if (!tertiary_tok.strings.prefix) {\n                tertiary_tok.strings.prefix = \" \";\n            }\n        }\n        var tertiary_outer = new CSL.Token();\n        tertiary_outer.decorations.push([\"@font-style\", \"normal\"]);\n        tertiary_outer.decorations.push([\"@font-weight\", \"normal\"]);\n        this.state.output.openLevel(tertiary_outer);\n        this.state.output.append(tertiary, tertiary_tok);\n        this.state.output.closeLevel();\n\n        this.state.output.closeLevel();\n\n        institutionblob = this.state.output.pop();\n    } else {\n        institutionblob = primary;\n    }\n    return institutionblob;\n};\n\nCSL.NameOutput.prototype._renderOneInstitutionPart = function (blobs, style) {\n    for (var i = 0, ilen = blobs.length; i < ilen; i += 1) {\n        if (blobs[i]) {\n            var str = blobs[i];\n            // XXXXX Cut-and-paste code in multiple locations. This code block should be\n            // collected in a function.\n            // Tag: strip-periods-block\n            if (this.state.tmp.strip_periods) {\n                str = str.replace(/\\./g, \"\");\n            } else {\n                for (var j = 0, jlen = style.decorations.length; j < jlen; j += 1) {\n                    if (\"@strip-periods\" === style.decorations[j][0] && \"true\" === style.decorations[j][1]) {\n                        str = str.replace(/\\./g, \"\");\n                        break;\n                    }\n                }\n            }\n            //this.state.output.append(blobs[i], style, true);\n            this.state.tmp.group_context.tip.variable_success = true;\n            this.state.tmp.can_substitute.replace(false, CSL.LITERAL);\n            if (str === \"!here>>>\") {\n                blobs[i] = false;\n            } else {\n                this.state.output.append(str, style, true);\n                blobs[i] = this.state.output.pop();\n            }\n        }\n    }\n    if (\"undefined\" === typeof this.institution.strings[\"part-separator\"]) {\n        this.institution.strings[\"part-separator\"] = this.state.tmp.name_delimiter;\n    }\n    return this._join(blobs, this.institution.strings[\"part-separator\"]);\n};\n\nCSL.NameOutput.prototype._renderNames = function (v, values, pos, j) {\n    //\n    var ret = false;\n    if (values.length) {\n        var names = [];\n        for (var i = 0, ilen = values.length; i < ilen; i += 1) {\n            var name = values[i];\n            \n            // XXX We'll start here with attempts.\n            // Figure out the three segments: primary, secondary, tertiary\n            var ret, localesets;\n            \n            if (this.state.tmp.extension) {\n                localesets = [\"sort\"];\n            } else if (name.isInstitution || name.literal) {\n                // Will never hit this in this function, but preserving\n                // in case we factor this out.\n                localesets = this.state.opt['cite-lang-prefs'].institutions;\n            } else {\n                localesets = this.state.opt['cite-lang-prefs'].persons;\n            }\n            var slot = {primary:'locale-orig',secondary:false,tertiary:false};\n\t        if (localesets) {\n\t\t        var slotnames = [\"primary\", \"secondary\", \"tertiary\"];\n\t\t        for (var k = 0, klen = slotnames.length; k < klen; k += 1) {\n\t\t\t        if (localesets.length - 1 <  k) {\n\t\t\t\t        break;\n\t\t\t        }\n\t\t\t        slot[slotnames[k]] = 'locale-' + localesets[k];\n\t\t        }\n\t        } else {\n\t\t        slot.primary = 'locale-translat';\n\t        }\n\t        if (this.state.tmp.sort_key_flag || (this.state.tmp.area !== \"bibliography\"\n\t\t        && !(this.state.tmp.area === \"citation\"\n\t\t\t         && this.state.opt.xclass === \"note\"\n\t\t\t         && this.item && !this.item.position))) {\n                \n\t\t        slot.secondary = false;\n\t\t        slot.tertiary = false;\n\t        }\n\n            // primary\n            // true is for fallback\n            this.setRenderedName(name);\n\n            if (!name.literal && !name.isInstitution) {\n                var nameBlob = this._renderPersonalName(v, name, slot, pos, i, j);\n                var nameToken = CSL.Util.cloneToken(this.name);\n                this.state.output.append(nameBlob, nameToken, true);\n                names.push(this.state.output.pop());\n            } else {\n                names.push(this._renderInstitutionName(v, name, slot, j));\n            }\n        }\n        //ret = this._join(names, \"\");\n        ret = this.joinPersons(names, pos, j);\n    }\n    return ret;\n};\n\n\nCSL.NameOutput.prototype._renderPersonalName = function (v, name, slot, pos, i, j) {\n    // XXXX FROM HERE (persons)\n\n    var res = this.getName(name, slot.primary, true);\n    var primary = this._renderOnePersonalName(res.name, pos, i, j);\n\tvar secondary = false;\n\tif (slot.secondary) {\n        res = this.getName(name, slot.secondary, false, res.usedOrig);\n        if (res.name) {\n\t\t\tsecondary = this._renderOnePersonalName(res.name, pos, i, j);\n        }\n\t}\n\tvar tertiary = false;\n\tif (slot.tertiary) {\n        res = this.getName(name, slot.tertiary, false, res.usedOrig);\n        if (res.name) {\n\t\t\ttertiary = this._renderOnePersonalName(res.name, pos, i, j);\n        }\n\t}\n    // Now compose them to a unit\n    var personblob;\n    if (secondary || tertiary) {\n\n        this.state.output.openLevel(\"empty\");\n\n        this.state.output.append(primary);\n\n        var secondary_tok = new CSL.Token();\n        if (slot.secondary) {\n            secondary_tok.strings.prefix = this.state.opt.citeAffixes.persons[slot.secondary].prefix;\n            secondary_tok.strings.suffix = this.state.opt.citeAffixes.persons[slot.secondary].suffix;\n            // Add a space if empty\n            if (!secondary_tok.strings.prefix) {\n                secondary_tok.strings.prefix = \" \";\n            }\n        }\n        this.state.output.append(secondary, secondary_tok);\n\n        var tertiary_tok = new CSL.Token();\n        if (slot.tertiary) {\n            tertiary_tok.strings.prefix = this.state.opt.citeAffixes.persons[slot.tertiary].prefix;\n            tertiary_tok.strings.suffix = this.state.opt.citeAffixes.persons[slot.tertiary].suffix;\n            // Add a space if empty\n            if (!tertiary_tok.strings.prefix) {\n                tertiary_tok.strings.prefix = \" \";\n            }\n        }\n        this.state.output.append(tertiary, tertiary_tok);\n\n        this.state.output.closeLevel();\n\n        personblob = this.state.output.pop();\n    } else {\n        personblob = primary;\n    }\n    return personblob;\n};\n\nCSL.NameOutput.prototype._isRomanesque = function (name) {\n    // 0 = entirely non-romanesque\n    // 1 = mixed content\n    // 2 = pure romanesque\n    var ret = 2;\n    if (!name.family.replace(/\\\"/g, '').match(CSL.ROMANESQUE_REGEXP)) {\n        ret = 0;\n    }\n    if (!ret && name.given && name.given.match(CSL.STARTSWITH_ROMANESQUE_REGEXP)) {\n        ret = 1;\n    }\n    var top_locale;\n    if (ret == 2) {\n        if (name.multi && name.multi.main) {\n            top_locale = name.multi.main.slice(0, 2);\n        } else if (this.Item.language) {\n            top_locale = this.Item.language.slice(0, 2);\n        }\n        if ([\"ja\", \"zh\"].indexOf(top_locale) > -1) {\n            ret = 1;\n        }\n    }\n    //print(\"name: \"+name.given+\", multi: \"+name.multi+\", ret: \"+ret);\n    return ret;\n};\n\nCSL.NameOutput.prototype._renderOnePersonalName = function (value, pos, i, j) {\n    var name = value;\n    var dropping_particle = this._droppingParticle(name, pos, j);\n    var family = this._familyName(name);\n    var non_dropping_particle = this._nonDroppingParticle(name);\n    var givenInfo = this._givenName(name, pos, i);\n    var given = givenInfo.blob;\n    var suffix = this._nameSuffix(name);\n    if (given === false) {\n        dropping_particle = false;\n        suffix = false;\n    }\n    var sort_sep = this.state.inheritOpt(this.name, \"sort-separator\");\n    if (!sort_sep) {\n        sort_sep = \"\";\n    }\n    var suffix_sep;\n    if (name[\"comma-suffix\"]) {\n        suffix_sep = \", \";\n    } else {\n        suffix_sep = \" \";\n    }\n    var romanesque = this._isRomanesque(name);\n    function hasJoiningPunctuation(blob) {\n        if (!blob) {\n            return false;\n        } else if (\"string\" === typeof blob.blobs) {\n            if ([\"\\u2019\", \"\\'\", \"-\", \" \"].indexOf(blob.blobs.slice(-1)) > -1) {\n                return true;\n            } else {\n                return false;\n            }\n        } else {\n            return hasJoiningPunctuation(blob.blobs[blob.blobs.length-1]);\n        }\n    }\n    \n    var has_hyphenated_non_dropping_particle = hasJoiningPunctuation(non_dropping_particle);\n\n    var nbspace;\n    if ([\"fr\", \"ru\", \"cs\"].indexOf(this.state.opt[\"default-locale\"][0].slice(0, 2)) > -1) {\n        nbspace = \"\\u00a0\";\n    } else {\n        nbspace = \" \";\n    }\n\n    var blob, merged, first, second;\n    if (romanesque === 0) {\n        // XXX handle affixes for given and family\n        blob = this._join([non_dropping_particle, family, given], \"\");\n    } else if (romanesque === 1 || name[\"static-ordering\"]) { // entry likes sort order\n        merged = this._join([non_dropping_particle, family], nbspace);\n        blob = this._join([merged, given], \" \");\n    } else if (name[\"reverse-ordering\"]) { // entry likes reverse order\n        merged = this._join([non_dropping_particle, family], nbspace);\n        blob = this._join([given, merged], \" \");\n    } else if (this.state.tmp.sort_key_flag) {\n        // ok with no affixes here\n        if (this.state.opt[\"demote-non-dropping-particle\"] === \"never\") {\n            merged = this._join([non_dropping_particle, family], nbspace);\n            merged = this._join([merged, dropping_particle], \" \");\n            merged = this._join([merged, given], this.state.opt.sort_sep);\n            blob = this._join([merged, suffix], \" \");\n        } else {\n            second = this._join([given, dropping_particle, non_dropping_particle], \" \");\n            merged = this._join([family, second], this.state.opt.sort_sep);\n            blob = this._join([merged, suffix], \" \");\n        }\n    } else if (this.state.inheritOpt(this.name, \"name-as-sort-order\") === \"all\" || (this.state.inheritOpt(this.name, \"name-as-sort-order\") === \"first\" && i === 0 && (j === 0 || \"undefined\" === typeof j))) {\n        //\n        // Discretionary sort ordering and inversions\n        //\n        if ([\"Lord\", \"Lady\"].indexOf(name.given) > -1) {\n            sort_sep = \", \";\n        }\n\n        // XXX Needs a more robust solution than this\n        // XXX See https://forums.zotero.org/discussion/30974/any-idea-why-an-a-author-comes-last-in-the-bibliography/#Item_30\n\n        //if ([\"always\", \"display-and-sort\"].indexOf(this.state.opt[\"demote-non-dropping-particle\"]) > -1 && !has_hyphenated_non_dropping_particle) {\n        if ([\"always\", \"display-and-sort\"].indexOf(this.state.opt[\"demote-non-dropping-particle\"]) > -1) {\n            // Drop non-dropping particle\n            //second = this._join([given, dropping_particle, non_dropping_particle], \" \");\n            second = this._join([given, dropping_particle], (name[\"comma-dropping-particle\"] + \" \"));\n        \n            // This would be a problem with al-Ghazali. Avoided by has_hyphenated_non_dropping_particle check above.\n            second = this._join([second, non_dropping_particle], \" \");\n            if (second && this.given) {\n                second.strings.prefix = this.given.strings.prefix;\n                second.strings.suffix = this.given.strings.suffix;\n            }\n            if (family && this.family) {\n                family.strings.prefix = this.family.strings.prefix;\n                family.strings.suffix = this.family.strings.suffix;\n            }\n            merged = this._join([family, second], sort_sep);\n            blob = this._join([merged, suffix], sort_sep);\n        } else {\n            // Don't drop particle.\n            // Don't do this\n            //if (this.state.tmp.area === \"bibliography\" && !this.state.tmp.term_predecessor && non_dropping_particle) {\n            //    if (!has_hyphenated_non_dropping_particle) {\n            //        non_dropping_particle.blobs = CSL.Output.Formatters[\"capitalize-first\"](this.state, non_dropping_particle.blobs)\n            //    }\n            //}\n            if (has_hyphenated_non_dropping_particle) {\n                first = this._join([non_dropping_particle, family], \"\");\n            } else {\n                first = this._join([non_dropping_particle, family], nbspace);\n            }\n            if (first && this.family) {\n                first.strings.prefix = this.family.strings.prefix;\n                first.strings.suffix = this.family.strings.suffix;\n            }\n\n            second = this._join([given, dropping_particle], (name[\"comma-dropping-particle\"] + \" \"));\n            //second = this._join([given, dropping_particle], \" \");\n            if (second && this.given) {\n                second.strings.prefix = this.given.strings.prefix;\n                second.strings.suffix = this.given.strings.suffix;\n            }\n\n            merged = this._join([first, second], sort_sep);\n            blob = this._join([merged, suffix], sort_sep);\n        }\n        blob.isInverted = true;\n    } else { // plain vanilla\n        if (name[\"dropping-particle\"] && name.family && !name[\"non-dropping-particle\"]) {\n            var dp = name[\"dropping-particle\"];\n            var apostrophes = [\"'\",\"\\u02bc\",\"\\u2019\",\"-\"];\n            if (apostrophes.indexOf(dp.slice(-1)) > -1 && dp.slice(0, -1) !== \"de\") {\n                family = this._join([dropping_particle, family], \"\");\n                dropping_particle = false;\n            }\n        }\n\n        if (has_hyphenated_non_dropping_particle) {\n            second = this._join([non_dropping_particle, family], \"\");\n            second = this._join([dropping_particle, second], nbspace);\n        } else {\n            second = this._join([dropping_particle, non_dropping_particle, family], nbspace);\n        }\n        second = this._join([second, suffix], suffix_sep);\n        if (second && this.family) {\n            second.strings.prefix = this.family.strings.prefix;\n            second.strings.suffix = this.family.strings.suffix;\n        }\n        if (given && this.given) {\n            given.strings.prefix = this.given.strings.prefix;\n            given.strings.suffix = this.given.strings.suffix;\n        }\n        if (second.strings.prefix) {\n            name[\"comma-dropping-particle\"] = \"\";\n        }\n\n        var space;\n        if (this.state.inheritOpt(this.name, \"initialize-with\")\n            && this.state.inheritOpt(this.name, \"initialize-with\").match(/[\\u00a0\\ufeff]/)\n            && givenInfo.initializationLevel === 1) {\n            \n            space = nbspace;\n        } else {\n            space = \" \";\n        }\n        blob = this._join([given, second], (name[\"comma-dropping-particle\"] + space));\n    }\n    // XXX Just generally assume for the present that personal names render something\n    this.state.tmp.group_context.tip.variable_success = true;\n    this.state.tmp.can_substitute.replace(false, CSL.LITERAL);\n    this.state.tmp.term_predecessor = true;\n    // notSerious\n    //this.state.output.append(blob, \"literal\", true);\n    //var ret = this.state.output.pop();\n    this.state.tmp.name_node.children.push(blob);\n    return blob;\n};\n\n/*\n        // Do not include given name, dropping particle or suffix in strict short form of name\n\n        // initialize if appropriate\n*/\n\n// Input names should be touched by _normalizeNameInput()\n// exactly once: this is not idempotent.\nCSL.NameOutput.prototype._normalizeNameInput = function (value) {\n    var name = {\n        literal:value.literal,\n        family:value.family,\n        isInstitution:value.isInstitution,\n        given:value.given,\n        suffix:value.suffix,\n        \"comma-suffix\":value[\"comma-suffix\"],\n        \"non-dropping-particle\":value[\"non-dropping-particle\"],\n        \"dropping-particle\":value[\"dropping-particle\"],\n        \"static-ordering\":value[\"static-ordering\"],\n        \"static-particles\":value[\"static-particles\"],\n        \"reverse-ordering\":value[\"reverse-ordering\"],\n        \"full-form-always\": value[\"full-form-always\"],\n        \"parse-names\":value[\"parse-names\"],\n        \"comma-dropping-particle\": \"\",\n        block_initialize:value.block_initialize,\n        multi:value.multi\n    };\n    this._parseName(name);\n    return name;\n};\n\n// _transformNameset() replaced with enhanced transform.name().\n\nCSL.NameOutput.prototype._stripPeriods = function (tokname, str) {\n    var decor_tok = this[tokname + \"_decor\"];\n    if (str) {\n        if (this.state.tmp.strip_periods) {\n            str = str.replace(/\\./g, \"\");\n        } else  if (decor_tok) {\n            for (var i = 0, ilen = decor_tok.decorations.length; i < ilen; i += 1) {\n                if (\"@strip-periods\" === decor_tok.decorations[i][0] && \"true\" === decor_tok.decorations[i][1]) {\n                    str = str.replace(/\\./g, \"\");\n                    break;\n                }\n            }\n        }\n    }\n    return str;\n};\n\nCSL.NameOutput.prototype._nonDroppingParticle = function (name) {\n    var ndp = name[\"non-dropping-particle\"];\n    if (ndp && this.state.tmp.sort_key_flag) {\n        ndp = ndp.replace(/[\\'\\u2019]/, \"\");\n    }\n    var str = this._stripPeriods(\"family\", ndp);\n    if (this.state.output.append(str, this.family_decor, true)) {\n        return this.state.output.pop();\n    }\n    return false;\n};\n\nCSL.NameOutput.prototype._droppingParticle = function (name, pos, j) {\n    var dp = name[\"dropping-particle\"];\n    if (dp && this.state.tmp.sort_key_flag) {\n        dp = dp.replace(/[\\'\\u2019]/, \"\");\n    }\n    var str = this._stripPeriods(\"given\", dp);\n    if (name[\"dropping-particle\"] && name[\"dropping-particle\"].match(/^et.?al[^a-z]$/)) {\n        if (this.state.inheritOpt(this.name, \"et-al-use-last\")) {\n            if (\"undefined\" === typeof j) { \n                this.etal_spec[pos].freeters = 2;\n            } else {\n                this.etal_spec[pos].persons = 2;\n            }\n        } else {\n            if (\"undefined\" === typeof j) { \n                this.etal_spec[pos].freeters = 1;\n            } else {\n                this.etal_spec[pos].persons = 1;\n            }\n        }\n        name[\"comma-dropping-particle\"] = \"\";\n    } else if (this.state.output.append(str, this.given_decor, true)) {\n        return this.state.output.pop();\n    }\n    return false;\n};\n\nCSL.NameOutput.prototype._familyName = function (name) {\n    var str = this._stripPeriods(\"family\", name.family);\n    if (this.state.output.append(str, this.family_decor, true)) {\n        return this.state.output.pop();\n    }\n    return false;\n};\n\nCSL.NameOutput.prototype._givenName = function (name, pos, i) {\n    var ret;\n    // citation\n    //   use disambig as-is\n    // biblography\n    //   use disambig only if it boosts over the default\n    //   SO WHAT IS THE DEFAULT?\n    //   A: If \"form\" is short, it's 0.\n    //      If \"form\" is long, initialize-with exists (and initialize is not false) it's 1\n    //      If \"form\" is long, and initialize_with does not exist, it's 2.\n    var formIsShort = this.state.inheritOpt(this.name, \"form\", \"name-form\", \"long\") !== \"long\";\n    var initializeIsTurnedOn = this.state.inheritOpt(this.name, \"initialize\") !== false;\n    var hasInitializeWith = \"string\" === typeof this.state.inheritOpt(this.name, \"initialize-with\") && !name.block_initialize;\n    var defaultLevel;\n    var useLevel;\n    if (name[\"full-form-always\"]) {\n        useLevel = 2;\n    } else {\n        if (formIsShort) {\n            defaultLevel = 0;\n        } else if (hasInitializeWith) {\n            defaultLevel = 1;\n        } else {\n            defaultLevel = 2;\n        }\n        var requestedLevel = this.state.tmp.disambig_settings.givens[pos][i];\n        if (requestedLevel > defaultLevel) {\n            useLevel = requestedLevel;\n        } else {\n            useLevel = defaultLevel;\n        }\n    }\n    var gdropt = this.state.citation.opt[\"givenname-disambiguation-rule\"];\n   if (gdropt && gdropt.slice(-14) === \"-with-initials\") {\n        hasInitializeWith = true;\n    }\n    if (name.family && useLevel === 1) {\n        if (hasInitializeWith) {\n            var initialize_with = this.state.inheritOpt(this.name, \"initialize-with\", false, \"\");\n            name.given = CSL.Util.Names.initializeWith(this.state, name.given, initialize_with, !initializeIsTurnedOn);\n        } else {\n            name.given = CSL.Util.Names.unInitialize(this.state, name.given);\n        }\n    } else if (useLevel === 0) {\n        return {\n            blob: false\n        }\n    } else if (useLevel === 2) {\n        name.given = CSL.Util.Names.unInitialize(this.state, name.given);\n    }\n\n    var str = this._stripPeriods(\"given\", name.given);\n    var rendered = this.state.output.append(str, this.given_decor, true);\n    if (rendered) {\n        ret = this.state.output.pop();\n\t    return {\n            blob: ret,\n            initializationLevel: useLevel\n        };\n    }\n    return {\n        blob: false\n    };\n};\n\nCSL.NameOutput.prototype._nameSuffix = function (name) {\n\n    var str = name.suffix, ret;\n\n    if (str && \"string\" === typeof this.state.inheritOpt(this.name, \"initialize-with\")) {\n        str = CSL.Util.Names.initializeWith(this.state, str, this.state.inheritOpt(this.name, \"initialize-with\"), true);\n    }\n\n    str = this._stripPeriods(\"family\", str);\n    var toSuffix = '';\n    if (str && str.slice(-1) === '.') {\n\tstr = str.slice(0, -1);\n\ttoSuffix = '.';\n    }\n    var rendered = this.state.output.append(str, \"empty\", true);\n    if (rendered) {\n        ret = this.state.output.pop();\n\tret.strings.suffix = toSuffix + ret.strings.suffix;\n\treturn ret;\n    }\n    return false;\n};\n\nCSL.NameOutput.prototype._getLongStyle = function (name) {\n    var long_style;\n    if (name[\"short\"].length) {\n        if (this.institutionpart[\"long-with-short\"]) {\n            long_style = this.institutionpart[\"long-with-short\"];\n        } else {\n            long_style = this.institutionpart[\"long\"];\n        }\n    } else {\n        long_style = this.institutionpart[\"long\"];\n    }\n    if (!long_style) {\n        long_style = new CSL.Token();\n    }\n    return long_style;\n};\n\nCSL.NameOutput.prototype._getShortStyle = function () {\n    var short_style;\n    if (this.institutionpart[\"short\"]) {\n        short_style = this.institutionpart[\"short\"];\n    } else {\n        short_style = new CSL.Token();\n    }\n    return short_style;\n};\n\nCSL.NameOutput.prototype._parseName = function (name) {\n    if (!name[\"parse-names\"] && \"undefined\" !== typeof name[\"parse-names\"]) {\n        return name;\n    }\n    if (name.family && !name.given && name.isInstitution) {\n        name.literal = name.family;\n        name.family = undefined;\n        name.isInstitution = undefined;\n    }\n    var noparse;\n    if (name.family \n        && (name.family.slice(0, 1) === '\"' && name.family.slice(-1) === '\"')\n        || (!name[\"parse-names\"] && \"undefined\" !== typeof name[\"parse-names\"])) {\n\n        name.family = name.family.slice(1, -1);\n        noparse = true;\n        name[\"parse-names\"] = 0;\n    } else {\n        noparse = false;\n    }\n    if (this.state.opt.development_extensions.parse_names) {\n        if (!name[\"non-dropping-particle\"] && name.family && !noparse && name.given) {\n            if (!name[\"static-particles\"]) {\n                CSL.parseParticles(name, true);\n            }\n        }\n    }\n};\n\n/*\n * Return a single name object\n  */\n\n// The interface is a mess, but this should serve.\n\nCSL.NameOutput.prototype.getName = function (name, slotLocaleset, fallback, stopOrig) {\n\n    // Needs to tell us whether we used orig or not.\n    \n    if (stopOrig && slotLocaleset === 'locale-orig') {\n        return {name:false,usedOrig:stopOrig};\n    }\n\n    // Normalize to string\n    if (!name.family) {\n        name.family = \"\";\n    }\n    if (!name.given) {\n        name.given = \"\";\n    }\n\n    // Recognized params are:\n    //  block-initialize\n    //  transliterated\n    //  static-ordering\n    //  full-form-always\n    // All default to false, except for static-ordering, which is initialized\n    // with a sniff.\n    var name_params = {};\n    // Determines the default static-order setting based on the characters\n    // used in the headline field. Will be overridden by locale-based\n    // parameters evaluated against explicit lang tags set on the (sub)field.\n    name_params[\"static-ordering\"] = this.getStaticOrder(name);\n\n    var foundTag = true;\n    var langTag;\n    if (slotLocaleset !== 'locale-orig') {\n        foundTag = false;\n        if (name.multi) {\n            var langTags = this.state.opt[slotLocaleset];\n            for (var i = 0, ilen = langTags.length; i < ilen; i += 1) {\n                langTag = langTags[i];\n                if (name.multi._key[langTag]) {\n                    foundTag = true;\n                    var isInstitution = name.isInstitution;\n                    name = name.multi._key[langTag];\n                    name.isInstitution = isInstitution;\n                    // Set name formatting params\n                    name_params = this.getNameParams(langTag);\n                    name_params.transliterated = true;\n                    break;\n                }\n            }\n        }\n    }\n\n    if (!foundTag) {\n        langTag = false;\n        if (name.multi && name.multi.main) {\n            langTag = name.multi.main;\n        } else if (this.Item.language) {\n            langTag = this.Item.language;\n        }\n        if (langTag) {\n            name_params = this.getNameParams(langTag);\n        }\n    }\n\n    if (!fallback && !foundTag) {\n        return {name:false,usedOrig:stopOrig};\n    }\n    \n    // Normalize to string (again)\n    if (!name.family) {\n        name.family = \"\";\n    }\n    if (!name.given) {\n        name.given = \"\";\n    }\n    if (name.literal) {\n        delete name.family;\n        delete name.given;\n    }\n    // var clone the item before writing into it\n    name = {\n        family:name.family,\n        given:name.given,\n        \"non-dropping-particle\":name[\"non-dropping-particle\"],\n        \"dropping-particle\":name[\"dropping-particle\"],\n        suffix:name.suffix,\n        \"static-ordering\":name_params[\"static-ordering\"],\n        \"static-particles\":name[\"static-particles\"],\n        \"reverse-ordering\":name_params[\"reverse-ordering\"],\n        \"full-form-always\": name_params[\"full-form-always\"],\n        \"parse-names\":name[\"parse-names\"],\n        \"comma-suffix\":name[\"comma-suffix\"],\n        \"comma-dropping-particle\":name[\"comma-dropping-particle\"],\n        transliterated: name_params.transliterated,\n        block_initialize: name_params[\"block-initialize\"],\n        literal:name.literal,\n        isInstitution:name.isInstitution,\n        multi:name.multi\n    };\n    \n    if (!name.literal && (!name.given && name.family && name.isInstitution)) {\n        name.literal = name.family;\n    }\n    if (name.literal) {\n        delete name.family;\n        delete name.given;\n    }\n    name = this._normalizeNameInput(name);\n    var usedOrig;\n    if (stopOrig) {\n        usedOrig = stopOrig;\n    } else {\n        usedOrig = !foundTag;\n    }\n    return {name:name,usedOrig:usedOrig};\n};\n\nCSL.NameOutput.prototype.getNameParams = function (langTag) {\n    var ret = {};\n    var langspec = CSL.localeResolve(this.Item.language, this.state.opt[\"default-locale\"][0]);\n    var try_locale = this.state.locale[langspec.best] ? langspec.best : this.state.opt[\"default-locale\"][0];\n    var name_as_sort_order = this.state.locale[try_locale].opts[\"name-as-sort-order\"];\n    var name_as_reverse_order = this.state.locale[try_locale].opts[\"name-as-reverse-order\"];\n    var name_never_short = this.state.locale[try_locale].opts[\"name-never-short\"];\n    var field_lang_bare = langTag.split(\"-\")[0];\n    if (name_as_sort_order && name_as_sort_order[field_lang_bare]) {\n        ret[\"static-ordering\"] = true;\n        ret[\"reverse-ordering\"] = false;\n    }\n    if (name_as_reverse_order && name_as_reverse_order[field_lang_bare]) {\n        ret[\"reverse-ordering\"] = true;\n        ret[\"static-ordering\"] = false;\n    }\n    if (name_never_short && name_never_short[field_lang_bare]) {\n        ret[\"full-form-always\"] = true;\n    }\n    \n    if (ret[\"static-ordering\"]) {\n        ret[\"block-initialize\"] = true;\n    }\n    return ret;\n};\n\nCSL.NameOutput.prototype.setRenderedName = function (name) {\n    if (this.state.tmp.area === \"bibliography\") {\n        var strname = \"\";\n        for (var j=0,jlen=CSL.NAME_PARTS.length;j<jlen;j+=1) {\n            if (name[CSL.NAME_PARTS[j]]) {\n                strname += name[CSL.NAME_PARTS[j]];\n            }\n        }\n        this.state.tmp.rendered_name.push(strname);\n    }\n};\n\nCSL.NameOutput.prototype.fixupInstitution = function (name, varname, listpos) {\n    if (!name.literal && name.family) {\n        name.literal = name.family;\n        delete name.family;\n    }\n    var longNameStr = name.literal;\n    var shortNameStr = longNameStr;\n    var ret = {\n        \"long\": longNameStr.split(/\\s*\\|\\s*/),\n        \"short\": shortNameStr.split(/\\s*\\|\\s*/),\n    };\n    if (this.state.sys.getAbbreviation) {\n        // Normalize longNameStr and shortNameStr\n        if (this.institution.strings.form === \"short\") {\n            let jurisdiction = this.Item.jurisdiction;\n            jurisdiction = this.state.transform.loadAbbreviation(jurisdiction, \"institution-entire\", longNameStr, this.Item.language);\n            if (this.state.transform.abbrevs[jurisdiction][\"institution-entire\"][longNameStr]) {\n                longNameStr = this.state.transform.abbrevs[jurisdiction][\"institution-entire\"][longNameStr];\n            } else {\n                jurisdiction = this.Item.jurisdiction;\n                jurisdiction = this.state.transform.loadAbbreviation(jurisdiction, \"institution-part\", longNameStr, this.Item.language);\n                if (this.state.transform.abbrevs[jurisdiction][\"institution-part\"][longNameStr]) {\n                    longNameStr = this.state.transform.abbrevs[jurisdiction][\"institution-part\"][longNameStr];\n                }\n            }\n            longNameStr = this._quashChecks(jurisdiction, longNameStr);\n        }\n        if ([\"short\", \"short-long\", \"long-short\"].indexOf(this.institution.strings[\"institution-parts\"]) > -1) {\n            let jurisdiction = this.Item.jurisdiction;\n            jurisdiction = this.state.transform.loadAbbreviation(jurisdiction, \"institution-part\", shortNameStr, this.Item.language);\n            if (this.state.transform.abbrevs[jurisdiction][\"institution-part\"][shortNameStr]) {\n                shortNameStr = this.state.transform.abbrevs[jurisdiction][\"institution-part\"][shortNameStr];\n            }\n            shortNameStr = this._quashChecks(jurisdiction, shortNameStr);\n            if ([\"short-long\", \"long-short\"].indexOf(this.institution.strings[\"institution-parts\"]) > -1) {\n                if (shortNameStr === longNameStr) {\n                    shortNameStr = \"\";\n                }\n            }\n        }\n        // Split abbreviated strings\n        // For pure long, split and we're done.\n        ret[\"long\"] = longNameStr.split(/\\s*\\|\\s*/);\n        // For short, split and then try abbrev with institution-part on each element\n        ret[\"short\"] = shortNameStr.split(/\\s*\\|\\s*/);\n        if ([\"short\", \"short-long\", \"long-short\"].indexOf(this.institution.strings[\"institution-parts\"]) > -1) {\n            for (var j=ret[\"short\"].length-1; j>-1; j--) {\n                let jurisdiction = this.Item.jurisdiction;\n                var abbrevKey = ret[\"short\"][j];\n                jurisdiction = this.state.transform.loadAbbreviation(jurisdiction, \"institution-part\", abbrevKey, this.Item.language);\n                if (this.state.transform.abbrevs[jurisdiction][\"institution-part\"][abbrevKey]) {\n                    ret[\"short\"][j] = this.state.transform.abbrevs[jurisdiction][\"institution-part\"][abbrevKey];\n                }\n                if (ret[\"short\"][j].indexOf(\"|\") > -1) {\n                    let retShort = ret[\"short\"];\n                    let splitShort = retShort[j].split(/\\s*\\|\\s*/);\n                    ret[\"short\"] = retShort.slice(0, j).concat(splitShort).concat(retShort.slice(j+1));\n                }\n            }\n        }\n        if (this.state.opt.development_extensions.legacy_institution_name_ordering) {\n            ret[\"short\"].reverse();\n        }\n        ret[\"short\"] = this._trimInstitution(ret[\"short\"]);\n        if (this.institution.strings[\"reverse-order\"]) {\n            ret[\"short\"].reverse();\n        }\n        // trimmer is not available in getAmbiguousCite\n        if (!this.state.tmp.just_looking) {\n            if (this.Item.jurisdiction) {\n                let jurisdiction = this.Item.jurisdiction;\n                var trimmer = this.state.tmp.abbrev_trimmer;\n                if (trimmer && trimmer[jurisdiction] && trimmer[jurisdiction][varname]) {\n                    for (var i=0,ilen=ret[\"short\"].length;i<ilen;i++) {\n                        var frag = ret[\"short\"][i];\n                        ret[\"short\"][i] = frag.replace(trimmer[jurisdiction][varname], \"\").trim();\n                    }\n                }\n            }\n        }\n    }\n    if (this.state.opt.development_extensions.legacy_institution_name_ordering) {\n        ret[\"long\"].reverse();\n    }\n    ret[\"long\"] = this._trimInstitution(ret[\"long\"]);\n    if (this.institution.strings[\"reverse-order\"]) {\n        ret[\"long\"].reverse();\n    }\n\n    return ret;\n};\n\n\nCSL.NameOutput.prototype.getStaticOrder = function (name, refresh) {\n    var static_ordering_val = false;\n    if (!refresh && name[\"static-ordering\"]) {\n        static_ordering_val = true;\n    } else if (this._isRomanesque(name) === 0) {\n        static_ordering_val = true;\n    } else if ((!name.multi || !name.multi.main) && this.Item.language && ['vi', 'hu'].indexOf(this.Item.language) > -1) {\n        static_ordering_val = true;\n    } else if (name.multi && name.multi.main && ['vi', 'hu'].indexOf(name.multi.main.slice(0,2)) > -1) {\n        static_ordering_val = true;\n    } else {\n        if (this.state.opt['auto-vietnamese-names']\n            && (CSL.VIETNAMESE_NAMES.exec(name.family + \" \" + name.given)\n                && CSL.VIETNAMESE_SPECIALS.exec(name.family + name.given))) {\n            \n            static_ordering_val = true;\n        }\n    }\n    return static_ordering_val;\n};\n\nCSL.NameOutput.prototype._quashChecks = function (jurisdiction, str) {\n    var str = this.state.transform.quashCheck(jurisdiction, str);\n    // If the abbreviation has date cut-offs, find the most recent\n    // abbreviation within scope.\n    var lst = str.split(/>>[0-9]{4}>>/);\n    var m = str.match(/>>([0-9]{4})>>/);\n    str = lst.pop();\n    var date = this.Item[\"original-date\"] ? this.Item[\"original-date\"] : this.Item[\"issued\"];\n    if (date) {\n        date = parseInt(date.year, 10);\n        date = isNaN(date) ? false : date;\n    }\n    if (date) {\n        if (lst.length > 0) {\n            for (var k=m.length-1; k>0; k--) {\n                if (date >= parseInt(m[k], 10)) {\n                    break;\n                }\n                str = lst.pop();\n            }\n        }\n        str = str.replace(/\\s*\\|\\s*/g, \"|\");\n    }\n    return str;\n}\n\nCSL.NameOutput.prototype._trimInstitution = function (subunits) {\n\t// Oh! Good catch in the tests. This happens before abbrevs.\n    // Won't work that way. Need to do abbrev substitute first,\n    // and apply this separately to long and to short.\n    var use_first = false;\n    var stop_last = false;\n    var use_last = false;\n    var stop_first = false;\n    var s = subunits.slice();\n    if (this.institution) {\n        // If use_first, apply stop_last, then apply use_first;\n        // If use_last, apply stop_first, then apply use_last;\n        if (\"undefined\" !== typeof this.institution.strings[\"use-first\"]) {\n            // this.state.sys.print(\"use-first OK\");\n            use_first = this.institution.strings[\"use-first\"];\n        }\n        if (\"undefined\" !== typeof this.institution.strings[\"use-last\"]) {\n            // this.state.sys.print(\"use-last OK\");\n            use_last = this.institution.strings[\"use-last\"];\n        }\n        if (\"undefined\" !== typeof this.institution.strings[\"stop-first\"]) {\n            // this.state.sys.print(\"stop-first OK\");\n            stop_first = this.institution.strings[\"stop-first\"];\n        }\n        if (\"undefined\" !== typeof this.institution.strings[\"stop-last\"]) {\n            stop_last = this.institution.strings[\"stop-last\"];\n        }\n\n        if (use_first) {\n            if (stop_last) {\n                s = s.slice(0, stop_last * -1);\n            }\n            s = s.slice(0, use_first);\n        }\n        \n        if (use_last) {\n            var ss = subunits.slice();\n            if (use_first) {\n                stop_first = use_first;\n            } else {\n                s = [];\n            }\n            if (stop_first) {\n                ss = ss.slice(stop_first);\n            }\n            ss = ss.slice(use_last * -1);\n            s = s.concat(ss);\n        }\n        subunits = s;\n    }\n    return subunits;\n};\n\n/*global CSL: true */\n\nCSL.PublisherOutput = function (state, group_tok) {\n    this.state = state;\n    this.group_tok = group_tok;\n    this.varlist = [];\n};\n\nCSL.PublisherOutput.prototype.render = function () {\n    this.clearVars();\n    this.composeAndBlob();\n    this.composeElements();\n    this.composePublishers();\n    this.joinPublishers();\n};\n\n\n// XXX Figure out how to adapt this to the House of Lords / House of Commons\n// joint committee case\n\n// name_delimiter\n// delimiter_precedes_last\n// and\n\nCSL.PublisherOutput.prototype.composeAndBlob = function () {\n    this.and_blob = {};\n    var and_term = false;\n    if (this.group_tok.strings.and === \"text\") {\n        and_term = this.state.getTerm(\"and\");\n    } else if (this.group_tok.strings.and === \"symbol\") {\n        and_term = \"&\";\n    }\n    var tok = new CSL.Token();\n    tok.strings.suffix = \" \";\n    tok.strings.prefix = \" \";\n    this.state.output.append(and_term, tok, true);\n    var no_delim = this.state.output.pop();\n\n    tok.strings.prefix = this.group_tok.strings[\"subgroup-delimiter\"];\n    this.state.output.append(and_term, tok, true);\n    var with_delim = this.state.output.pop();\n    \n    this.and_blob.single = false;\n    this.and_blob.multiple = false;\n    if (and_term) {\n        if (this.group_tok.strings[\"subgroup-delimiter-precedes-last\"] === \"always\") {\n            this.and_blob.single = with_delim;\n        } else if (this.group_tok.strings[\"subgroup-delimiter-precedes-last\"] === \"never\") {\n            this.and_blob.single = no_delim;\n            this.and_blob.multiple = no_delim;\n        } else {\n            this.and_blob.single = no_delim;\n            this.and_blob.multiple = with_delim;\n        }\n    }\n};\n\n\nCSL.PublisherOutput.prototype.composeElements = function () {\n    for (var i = 0, ilen = 2; i < ilen; i += 1) {\n        var varname = [\"publisher\", \"publisher-place\"][i];\n        for (var j = 0, jlen = this[\"publisher-list\"].length; j < jlen; j += 1) {\n            var str = this[varname + \"-list\"][j];\n            var tok = this[varname + \"-token\"];\n            // notSerious\n            this.state.output.append(str, tok, true);\n            this[varname + \"-list\"][j] = this.state.output.pop();\n        }\n    }\n};\n\n\nCSL.PublisherOutput.prototype.composePublishers = function () {\n    var blobs;\n    for (var i = 0, ilen = this[\"publisher-list\"].length; i < ilen; i += 1) {\n        blobs = [this[this.varlist[0] + \"-list\"][i], this[this.varlist[1] + \"-list\"][i]];\n        this[\"publisher-list\"][i] = this._join(blobs, this.group_tok.strings.delimiter);\n    }\n};\n\n\nCSL.PublisherOutput.prototype.joinPublishers = function () {\n    var blobs = this[\"publisher-list\"];\n    var publishers = this._join(blobs, this.group_tok.strings[\"subgroup-delimiter\"], this.and_blob.single, this.and_blob.multiple, this.group_tok);\n    this.state.output.append(publishers, \"literal\");\n};\n\n\n// blobs, delimiter, single, multiple, tokenname\n// Tokenname is a key at top level of this object.\nCSL.PublisherOutput.prototype._join = CSL.NameOutput.prototype._join;\nCSL.PublisherOutput.prototype._getToken = CSL.NameOutput.prototype._getToken;\n\n\nCSL.PublisherOutput.prototype.clearVars = function () {\n    this.state.tmp[\"publisher-list\"] = false;\n    this.state.tmp[\"publisher-place-list\"] = false;\n    this.state.tmp[\"publisher-group-token\"] = false;\n    this.state.tmp[\"publisher-token\"] = false;\n    this.state.tmp[\"publisher-place-token\"] = false;\n};\n\n/*global CSL: true */\n\nCSL.evaluateLabel = function (node, state, Item, item) {\n    var myterm;\n    if (\"locator\" === node.strings.term) {\n        if (item && item.label) {\n            if (item.label === \"sub verbo\") {\n                myterm = \"sub-verbo\";\n            } else {\n                myterm = item.label;\n            }\n        }\n        if (!myterm) {\n            myterm = \"page\";\n        }\n    } else {\n        myterm = node.strings.term;\n    }\n    \n    // Plurals detection.\n    var plural = node.strings.plural;\n    if (\"number\" !== typeof plural) {\n        // (node, ItemObject, variable, type)\n        var theItem = (item && node.strings.term === \"locator\") ? item : Item;\n        if (theItem[node.strings.term]) {\n            state.processNumber(false, theItem, node.strings.term, Item.type);\n            plural = state.tmp.shadow_numbers[node.strings.term].plural;\n            if (!state.tmp.shadow_numbers[node.strings.term].labelForm\n                && !state.tmp.shadow_numbers[node.strings.term].labelDecorations) {\n                if (node.strings.form) {\n                    state.tmp.shadow_numbers[node.strings.term].labelForm = node.strings.form;\n                } else if (state.tmp.group_context.tip.label_form) {\n                    state.tmp.shadow_numbers[node.strings.term].labelForm = state.tmp.group_context.tip.label_form;\n                }\n                state.tmp.shadow_numbers[node.strings.term].labelCapitalizeIfFirst = node.strings.capitalize_if_first;\n                state.tmp.shadow_numbers[node.strings.term].labelDecorations = node.decorations.slice();\n            }\n            \n            if ([\"locator\", \"number\", \"page\"].indexOf(node.strings.term) > -1 && state.tmp.shadow_numbers[node.strings.term].label) {\n                myterm = state.tmp.shadow_numbers[node.strings.term].label;\n            }\n            if (node.decorations && state.opt.development_extensions.csl_reverse_lookup_support) {\n                node.decorations.reverse();\n                node.decorations.push([\"@showid\",\"true\", node.cslid]);\n                node.decorations.reverse();\n            }\n        }\n    }\n    return CSL.castLabel(state, node, myterm, plural, CSL.TOLERANT);\n};\n\nCSL.castLabel = function (state, node, term, plural, mode) {\n    var label_form = node.strings.form;\n    var label_capitalize_if_first = node.strings.capitalize_if_first;\n    if (state.tmp.group_context.tip.label_form) {\n        if (label_form === \"static\") {\n            state.tmp.group_context.tip.label_static = true;\n        } else {\n            label_form = state.tmp.group_context.tip.label_form;\n        }\n    }\n\n    if (state.tmp.group_context.tip.label_capitalize_if_first) {\n        label_capitalize_if_first = state.tmp.group_context.tip.label_capitalize_if_first;\n    }\n    var ret = state.getTerm(term, label_form, plural, false, mode, node.default_locale);\n    if (label_capitalize_if_first) {\n        ret = CSL.Output.Formatters[\"capitalize-first\"](state, ret);\n    }\n    // XXXXX Cut-and-paste code in multiple locations. This code block should be\n    // collected in a function.\n    // Tag: strip-periods-block\n    if (state.tmp.strip_periods) {\n        ret = ret.replace(/\\./g, \"\");\n    } else {\n        for (var i = 0, ilen = node.decorations.length; i < ilen; i += 1) {\n            if (\"@strip-periods\" === node.decorations[i][0] && \"true\" === node.decorations[i][1]) {\n                ret = ret.replace(/\\./g, \"\");\n                break;\n            }\n        }\n    }\n    return ret;\n};\n\n/*global CSL: true */\n\nCSL.Node.name = {\n    build: function (state, target) {\n        var func;\n        if ([CSL.SINGLETON, CSL.START].indexOf(this.tokentype) > -1) {\n            var oldTmpRoot;\n            if (\"undefined\" === typeof state.tmp.root) {\n                oldTmpRoot = undefined;\n                state.tmp.root = \"citation\";\n            } else {\n                oldTmpRoot = state.tmp.root;\n            }\n            // Many CSL styles set et-al-[min|use-first]\n            // and et-al-subsequent-[min|use-first] to the same\n            // value.\n            // Set state.opt.update_mode = CSL.POSITION if\n            // et-al-subsequent-min or et-al-subsequent-use-first\n            // are set AND their value differs from their plain\n            // counterparts.\n            if (state.inheritOpt(this, \"et-al-subsequent-min\")\n                && (state.inheritOpt(this, \"et-al-subsequent-min\") !== state.inheritOpt(this, \"et-al-min\"))) {\n                \n                state.opt.update_mode = CSL.POSITION;\n            }\n            if (state.inheritOpt(this, \"et-al-subsequent-use-first\")\n                && (state.inheritOpt(this, \"et-al-subsequent-use-first\") !== state.inheritOpt(this, \"et-al-use-first\"))) {\n                \n                state.opt.update_mode = CSL.POSITION;\n            }\n\n            state.tmp.root = oldTmpRoot;\n\n            func = function (state) {\n                // Et-al (onward processing in node_etal.js and node_names.js)\n                // XXXXX Why is this necessary? This is available on this.name, right?\n                state.tmp.etal_term = \"et-al\";\n\n                // Use default delimiter as fallback, in a way that allows explicit\n                // empty strings.\n                state.tmp.name_delimiter = state.inheritOpt(this, \"delimiter\", \"name-delimiter\", \", \");\n                state.tmp[\"delimiter-precedes-et-al\"] = state.inheritOpt(this, \"delimiter-precedes-et-al\");\n                \n                // And\n                if (\"text\" === state.inheritOpt(this, \"and\")) {\n                    this.and_term = state.getTerm(\"and\", \"long\", 0);\n                } else if (\"symbol\" === state.inheritOpt(this, \"and\")) {\n                    if (state.opt.development_extensions.expect_and_symbol_form) {\n                        this.and_term = state.getTerm(\"and\", \"symbol\", 0);\n                    } else {\n                        this.and_term = \"&\";\n                    }\n                }\n                state.tmp.and_term = this.and_term;\n                if (CSL.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)) {\n                    this.and_prefix_single = \" \";\n                    this.and_prefix_multiple = \", \";\n                    // Workaround to allow explicit empty string\n                    // on cs:name delimiter.\n                    if (\"string\" === typeof state.tmp.name_delimiter) {\n                        this.and_prefix_multiple = state.tmp.name_delimiter;\n                    }\n                    this.and_suffix = \" \";\n\n                    // Really can't inspect these values in the build phase. Sorry.\n                    //state.build.name_delimiter = this.strings.delimiter;\n\n                } else {\n                    this.and_prefix_single = \"\";\n                    this.and_prefix_multiple = \"\";\n                    this.and_suffix = \"\";\n                }\n                if (state.inheritOpt(this, \"delimiter-precedes-last\") === \"always\") {\n                    this.and_prefix_single = state.tmp.name_delimiter;\n                } else if (state.inheritOpt(this, \"delimiter-precedes-last\") === \"never\") {\n                    // Slightly fragile: could test for charset here to make\n                    // this more certain.\n                    if (this.and_prefix_multiple) {\n                        this.and_prefix_multiple = \" \";\n                    }\n                } else if (state.inheritOpt(this, \"delimiter-precedes-last\") === \"after-inverted-name\") {\n                    if (this.and_prefix_single) {\n                        this.and_prefix_single = state.tmp.name_delimiter;\n                    }\n                    if (this.and_prefix_multiple) {\n                        this.and_prefix_multiple = \" \";\n                    }\n                }\n\n                this.and = {};\n                if (state.inheritOpt(this, \"and\")) {\n                    state.output.append(this.and_term, \"empty\", true);\n                    this.and.single = state.output.pop();\n                    this.and.single.strings.prefix = this.and_prefix_single;\n                    this.and.single.strings.suffix = this.and_suffix;\n                    state.output.append(this.and_term, \"empty\", true);\n                    this.and.multiple = state.output.pop();\n                    this.and.multiple.strings.prefix = this.and_prefix_multiple;\n                    this.and.multiple.strings.suffix = this.and_suffix;\n                } else if (state.tmp.name_delimiter) {\n                    // This is a little weird, but it works.\n                    this.and.single = new CSL.Blob(state.tmp.name_delimiter);\n                    this.and.single.strings.prefix = \"\";\n                    this.and.single.strings.suffix = \"\";\n                    this.and.multiple = new CSL.Blob(state.tmp.name_delimiter);\n                    this.and.multiple.strings.prefix = \"\";\n                    this.and.multiple.strings.suffix = \"\";\n                }\n\n                this.ellipsis = {};\n                if (state.inheritOpt(this, \"et-al-use-last\")) {\n                    // We use the dedicated Unicode ellipsis character because\n                    // it is recommended by some editors, and can be more easily\n                    // identified for find and replace operations.\n                    // Source: http://en.wikipedia.org/wiki/Ellipsis#Computer_representations\n                    //\n                    \n                    // Eventually, this should be localized as a term in CSL, with some\n                    // mechanism for triggering appropriate punctuation handling around\n                    // the ellipsis placeholder (Polish is a particularly tough case for that).\n                    this.ellipsis_term = \"\\u2026\";\n                    // Similar treatment to \"and\", above, will be needed\n                    // here when this becomes a locale term.\n                    this.ellipsis_prefix_single = \" \";\n                    this.ellipsis_prefix_multiple =  state.inheritOpt(this, \"delimiter\", \"name-delimiter\", \", \");\n                    this.ellipsis_suffix = \" \";\n                    this.ellipsis.single = new CSL.Blob(this.ellipsis_term);\n                    this.ellipsis.single.strings.prefix = this.ellipsis_prefix_single;\n                    this.ellipsis.single.strings.suffix = this.ellipsis_suffix;\n                    this.ellipsis.multiple = new CSL.Blob(this.ellipsis_term);\n                    this.ellipsis.multiple.strings.prefix = this.ellipsis_prefix_multiple;\n                    this.ellipsis.multiple.strings.suffix = this.ellipsis_suffix;\n                }\n\n                // et-al parameters are annoyingly incomprehensible\n                // again.\n                //\n                // Explanation probably just adds a further layer of\n                // irritation, but what's INTENDED here is that\n                // the state.tmp et-al variables are set from the\n                // cs:key element when composing sort keys, and a\n                // macro containing a name can be called from cs:key.\n                // So when cs:key sets et-al attributes, they are\n                // set on state.tmp, and when the key is finished\n                // processing, the state.tmp variables are reset to\n                // undefined. IN THEORY the state.tmp et-al variables\n                // will not be used in other contexts. I hope.\n                //\n                // Anyway, the current tests now seem to pass.\n                if (\"undefined\" === typeof state.tmp[\"et-al-min\"]) {\n                    state.tmp[\"et-al-min\"] = state.inheritOpt(this, \"et-al-min\");\n                }\n                if (\"undefined\" === typeof state.tmp[\"et-al-use-first\"]) {\n                    state.tmp[\"et-al-use-first\"] = state.inheritOpt(this, \"et-al-use-first\");\n                }\n                if (\"undefined\" === typeof state.tmp[\"et-al-use-last\"]) {\n                    //print(\"  setting et-al-use-last from name: \"+this.strings[\"et-al-use-last\"]);\n                    state.tmp[\"et-al-use-last\"] = state.inheritOpt(this, \"et-al-use-last\");\n                }\n\n                state.nameOutput.name = this;\n            };\n            \n            state.build.name_flag = true;\n\n            this.execs.push(func);\n        }\n        target.push(this);\n    }\n};\n\n\n\n/*global CSL: true */\n\nCSL.Node[\"name-part\"] = {\n    build: function (state) {\n        state.build[this.strings.name] = this;\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node.names = {\n    build: function (state, target) {\n        var func;\n        // CSL.debug = print;\n\n        if (this.tokentype === CSL.START || this.tokentype === CSL.SINGLETON) {\n            CSL.Util.substituteStart.call(this, state, target);\n            state.build.substitute_level.push(1);\n        }\n        \n        if (this.tokentype === CSL.SINGLETON) {\n            state.build.names_variables[state.build.names_variables.length-1].concat(this.variables);\n            for (var i in this.variables) {\n                var variable = this.variables[i];\n                var name_labels = state.build.name_label[state.build.name_label.length-1];\n                if (Object.keys(name_labels).length) {\n                    name_labels[variable] = name_labels[Object.keys(name_labels)[0]];\n                }\n            }\n            func = function (state) {\n                state.nameOutput.reinit(this, this.variables_real[0]);\n            };\n            this.execs.push(func);\n        }\n\n        if (this.tokentype === CSL.START) {\n\n            state.build.names_flag = true;\n            state.build.name_flag = false;\n            state.build.names_level += 1;\n            state.build.names_variables.push(this.variables);\n            state.build.name_label.push({});\n            // init can substitute\n            // init names\n            func = function (state) {\n                state.tmp.can_substitute.push(true);\n                state.tmp.name_node = {};\n                state.tmp.name_node.children = [];\n                state.nameOutput.init(this);\n            };\n            this.execs.push(func);\n\n        }\n        \n        if (this.tokentype === CSL.END) {\n\n            // Set/reset name blobs if they exist, for processing\n            // by namesOutput()\n            for (var i = 0, ilen = 3; i < ilen; i += 1) {\n                var key = [\"family\", \"given\", \"et-al\"][i];\n                this[key] = state.build[key];\n                if (state.build.names_level === 1) {\n                    state.build[key] = undefined;\n                }\n            }\n            // Labels, if any\n            this.label = state.build.name_label[state.build.name_label.length-1];\n            state.build.names_level += -1;\n            state.build.names_variables.pop();\n            state.build.name_label.pop();\n\n            // The with term. This isn't the right place\n            // for this, but it's all hard-wired at the\n            // moment.\n\n            // \"and\" and \"ellipsis\" are set in node_name.js\n            func = function (state) {\n                // Et-al (strings only)\n                // Blob production has to happen inside nameOutput()\n                // since proper escaping requires access to the output\n                // queue.\n                if (state.tmp.etal_node) {\n                    this.etal_style = state.tmp.etal_node;\n                } else {\n                    this.etal_style = \"empty\";\n                }\n\n                this.etal_term = state.getTerm(state.tmp.etal_term, \"long\", 0);\n                this.etal_prefix_single = \" \";\n                // Should be name delimiter, not hard-wired.\n                this.etal_prefix_multiple = state.tmp.name_delimiter;\n                if (state.tmp[\"delimiter-precedes-et-al\"] === \"always\") {\n                    this.etal_prefix_single = state.tmp.name_delimiter;\n                } else if (state.tmp[\"delimiter-precedes-et-al\"] === \"never\") {\n                    this.etal_prefix_multiple = \" \";\n                } else if (state.tmp[\"delimiter-precedes-et-al\"] === \"after-inverted-name\") {\n                    this.etal_prefix_single = state.tmp.name_delimiter;\n                    this.etal_prefix_multiple = \" \";\n                }\n                this.etal_suffix = \"\";\n                if (!CSL.STARTSWITH_ROMANESQUE_REGEXP.test(this.etal_term)) {\n                    // Not sure what the correct treatment is here, but we should not suppress\n                    // a comma-space.\n                    // https://forums.zotero.org/discussion/76679/delimiter-precedes-et-al-always-dose-not-work-in-locale-zh-cn\n                    if (this.etal_prefix_single === \" \") {\n                        this.etal_prefix_single = \"\";\n                    }\n                    if (this.etal_prefix_multiple === \" \") {\n                        this.etal_prefix_multiple = \"\";\n                    }\n                    if (this.etal_suffix === \" \") {\n                        this.etal_suffix = \"\";\n                    }\n                }\n                // et-al affixes are further adjusted in nameOutput(),\n                // after the term (possibly changed in cs:et-al) is known.\n\n\n                for (var i = 0, ilen = 3; i < ilen; i += 1) {\n                    var key = [\"family\", \"given\"][i];\n                    state.nameOutput[key] = this[key];\n                }\n                state.nameOutput[\"with\"] = this[\"with\"];\n\n                // REMOVE THIS\n                var mywith = \"with\";\n                var with_default_prefix = \"\";\n                var with_suffix = \"\";\n                if (CSL.STARTSWITH_ROMANESQUE_REGEXP.test(mywith)) {\n                    with_default_prefix = \" \";\n                    with_suffix = \" \";\n                }\n                var thewith = {};\n                thewith.single = new CSL.Blob(mywith);\n                thewith.single.strings.suffix = with_suffix;\n                thewith.multiple = new CSL.Blob(mywith);\n                thewith.multiple.strings.suffix = with_suffix;\n                if (state.inheritOpt(state.nameOutput.name, \"delimiter-precedes-last\") === \"always\") {\n                    thewith.single.strings.prefix = state.inheritOpt(this, \"delimiter\", \"names-delimiter\");\n                    thewith.multiple.strings.prefix = state.inheritOpt(this, \"delimiter\", \"names-delimiter\");\n                } else if (state.inheritOpt(state.nameOutput.name, \"delimiter-precedes-last\") === \"contextual\") {\n                    thewith.single.strings.prefix = with_default_prefix;\n                    thewith.multiple.strings.prefix = state.inheritOpt(this, \"delimiter\", \"names-delimiter\");\n                } else if (state.inheritOpt(state.nameOutput.name, \"delimiter-precedes-last\") === \"after-inverted-name\") {\n                    thewith.single.strings.prefix = state.inheritOpt(this, \"delimiter\", \"names-delimiter\");\n                    thewith.multiple.strings.prefix = with_default_prefix;\n                } else {\n                    thewith.single.strings.prefix = with_default_prefix;\n                    thewith.multiple.strings.prefix = with_default_prefix;\n                }\n                state.nameOutput[\"with\"] = thewith;\n\n\n                // XXX label style should be set per variable, since they may differ\n                // XXX with full-form nested names constructs\n                state.nameOutput.label = this.label;\n\n                state.nameOutput.etal_style = this.etal_style;\n                state.nameOutput.etal_term = this.etal_term;\n                state.nameOutput.etal_prefix_single = this.etal_prefix_single;\n                state.nameOutput.etal_prefix_multiple = this.etal_prefix_multiple;\n                state.nameOutput.etal_suffix = this.etal_suffix;\n                state.nameOutput.outputNames();\n                state.tmp[\"et-al-use-first\"] = undefined;\n                state.tmp[\"et-al-min\"] = undefined;\n                state.tmp[\"et-al-use-last\"] = undefined;\n            };\n            this.execs.push(func);\n\n            // unsets\n            func = function (state) {\n                if (!state.tmp.can_substitute.pop()) {\n                    state.tmp.can_substitute.replace(false, CSL.LITERAL);\n                }\n                \n                // For posterity ...\n                //\n                // This was enough to fix the issue reported here:\n                //\n                //   http://forums.zotero.org/discussion/25223/citeproc-bug-substitute-doesnt-work-correctly-for-title-macro/\n                //\n                // The remainder of the changes applied in the same patch\n                // relate to a label assignments, which were found to be\n                // buggy while working on the issue. The test covering\n                // both problems is here:\n                //\n                //   https://bitbucket.org/bdarcus/citeproc-test/src/ab136a6aa8f2/processor-tests/humans/substitute_SuppressOrdinaryVariable.txt\n                if (state.tmp.can_substitute.mystack.length === 1) {\n                    state.tmp.can_block_substitute = false;\n                }\n            };\n            this.execs.push(func);\n\n            state.build.name_flag = false;\n        }\n        target.push(this);\n\n        if (this.tokentype === CSL.END || this.tokentype === CSL.SINGLETON) {\n            state.build.substitute_level.pop();\n            CSL.Util.substituteEnd.call(this, state, target);\n        }\n    }\n};\n\n/*global CSL: true */\n\nCSL.Node.number = {\n    build: function (state, target) {\n        var func;\n        CSL.Util.substituteStart.call(this, state, target);\n        //\n        // This should push a rangeable object to the queue.\n        //\n        if (this.strings.form === \"roman\") {\n            this.formatter = state.fun.romanizer;\n        } else if (this.strings.form === \"ordinal\") {\n            this.formatter = state.fun.ordinalizer;\n        } else if (this.strings.form === \"long-ordinal\") {\n            this.formatter = state.fun.long_ordinalizer;\n        }\n        if (\"undefined\" === typeof this.successor_prefix) {\n            this.successor_prefix = state[state.build.area].opt.layout_delimiter;\n        }\n        if (\"undefined\" === typeof this.splice_prefix) {\n            this.splice_prefix = state[state.build.area].opt.layout_delimiter;\n        }\n        // is this needed?\n        //if (\"undefined\" === typeof this.splice_prefix){\n        //    this.splice_prefix = state[state.tmp.area].opt.layout_delimiter;\n        //}\n        //\n        // Whether we actually stick a number object on\n        // the output queue depends on whether the field\n        // contains a pure number.\n        //\n        // push number or text\n        func = function (state, Item, item) {\n            // NOTE: this works because this is the ONLY function in this node.\n            // If further functions are added, they need to start with the same\n            // abort condition.\n            if (this.variables.length === 0) {\n                return;\n            }\n            var varname;\n            varname = this.variables[0];\n            if (\"undefined\" === typeof item) {\n                var item = {};\n            }\n            if ([\"locator\", \"locator-extra\"].indexOf(varname) > -1) {\n                if (state.tmp.just_looking) {\n                    return;\n                }\n                if (!item[varname]) {\n                    return;\n                }\n            } else {\n                if (!Item[varname]) {\n                    return;\n                }\n            }\n\n            if (varname === 'collection-number' && Item.type === 'legal_case') {\n                state.tmp.renders_collection_number = true;\n            }\n            \n            // For bill or legislation items that have a label-form\n            // attribute set on the cs:number node rendering the locator,\n            // the form and pluralism of locator terms are controlled\n            // separately from those of the initial label. Form is\n            // straightforward: the label uses the value set on\n            // the cs:label node that renders it, and the embedded\n            // labels use the value of label-form set on the cs:number\n            // node. Both default to \"long\".\n            //\n            // Pluralism is more complicated. For embedded labels,\n            // pluralism is evaluated using a simple heuristic that\n            // can be found below (it just looks for comma, ampersand etc).\n            // The item.label rendered independently via cs:label\n            // defaults to singular. It is always singular if embedded\n            // labels exist that (when expanded to their valid CSL\n            // value) do not match the value of item.label. Otherwise,\n            // if one or more matching embedded labels exist, the\n            // cs:label is set to plural.\n            //\n            // The code that does all this is divided between this module,\n            // util_static_locator.js, and util_label.js. It's not easy\n            // to follow, but seems to do the job. Let's home for good\n            // luck out there in the wild.\n            \n            var node = this;\n\n            if (state.tmp.group_context.tip.force_suppress) {\n                return false;\n            }\n\n            if ([\"locator\", \"locator-extra\"].indexOf(varname) > -1) {\n                // amazing that we reach this. should abort sooner if no content?\n                state.processNumber.call(state, node, item, varname, Item.type);\n            } else {\n                if (!state.tmp.group_context.tip.condition && Item[varname]) {\n                    state.tmp.just_did_number = (\"\" + Item[varname]).match(/[0-9]$/);\n                }\n                // UPDATE_GROUP_CONTEXT_CONDITION is run by processNumber\n                state.processNumber.call(state, node, Item, varname, Item.type);\n            }\n\n            if (this.substring) {\n                var val = Item[varname].slice(this.substring);\n                state.output.append(val, node);\n            } else {\n                CSL.Util.outputNumericField(state, varname, Item.id);\n            }\n\n            if ([\"locator\", \"locator-extra\"].indexOf(this.variables_real[0]) > -1\n               && !state.tmp.just_looking) {\n                state.tmp.done_vars.push(this.variables_real[0]);\n                state.tmp.group_context.tip.done_vars.push(this.variables_real[0]);\n            }\n        };\n        this.execs.push(func);\n        target.push(this);\n        \n        CSL.Util.substituteEnd.call(this, state, target);\n    }\n};\n\n/*global CSL: true */\n\n/*\n * Yikes, these functions were running out of scope for yonks.\n * now that they are set in the correct token list,\n * they might be useful for things.\n * FB 2013.11.09\n*/\n\nCSL.Node.sort = {\n    build: function (state, target) {\n        target = state[state.build.root + \"_sort\"].tokens;\n        if (this.tokentype === CSL.START) {\n            if (state.build.area === \"citation\") {\n                state.opt.sort_citations = true;\n            }\n            state.build.area = state.build.root + \"_sort\";\n            state.build.extension = \"_sort\";\n            \n            var func = function (state, Item) {\n                //state.tmp.area = state.tmp.root + \"_sort\";\n                //state.tmp.extension = \"_sort\";\n                if (state.opt.has_layout_locale) {\n                    var langspec = CSL.localeResolve(Item.language, state.opt[\"default-locale\"][0]);\n                    var sort_locales = state[state.tmp.area.slice(0,-5)].opt.sort_locales;\n                    var langForItem;\n                    for (var i=0,ilen=sort_locales.length;i<ilen;i+=1) {\n                        langForItem = sort_locales[i][langspec.bare];\n                        if (!langForItem) {\n                            langForItem = sort_locales[i][langspec.best];\n                        }\n                        if (langForItem) {\n                            break;\n                        }\n                    }\n                    if (!langForItem) {\n                        langForItem = state.opt[\"default-locale\"][0];\n                    }\n                    state.tmp.lang_sort_hold = state.opt.lang;\n                    state.opt.lang = langForItem;\n                }\n            };\n            this.execs.push(func);\n            \n        }\n        if (this.tokentype === CSL.END) {\n            state.build.area = state.build.root;\n            state.build.extension = \"\";\n            var func = function (state) {\n                if (state.opt.has_layout_locale) {\n                    state.opt.lang = state.tmp.lang_sort_hold;\n                    delete state.tmp.lang_sort_hold;\n                }\n                //state.tmp.area = state.tmp.root;\n                //state.tmp.extension = \"\";\n            };\n            this.execs.push(func);\n            /*\n            var func = function (state, Item) {\n                state.tmp.area = state.tmp.root;\n                state.tmp.extension = \"\";\n            }\n            this.execs.push(func);\n            */\n        }\n        target.push(this);\n    }\n};\n\n\n\n/*global CSL: true */\n\nCSL.Node.substitute = {\n    build: function (state, target) {\n        var func;\n        if (this.tokentype === CSL.START) {\n            /* */\n            // set conditional\n            var choose_start = new CSL.Token(\"choose\", CSL.START);\n            CSL.Node.choose.build.call(choose_start, state, target);\n            var if_singleton = new CSL.Token(\"if\", CSL.SINGLETON);\n            func = function() {\n                if (state.tmp.value.length && !state.tmp.common_term_match_fail) {\n                    return true;\n                }\n                return false;\n            }\n            if_singleton.tests = [func];\n            if_singleton.test = state.fun.match.any(if_singleton, state, if_singleton.tests);\n            target.push(if_singleton);\n\n            func = function (state) {\n                state.tmp.can_block_substitute = true;\n                if (state.tmp.value.length && !state.tmp.common_term_match_fail) {\n                    state.tmp.can_substitute.replace(false, CSL.LITERAL);\n                }\n                state.tmp.common_term_match_fail = false;\n            };\n            this.execs.push(func);\n            target.push(this);\n            /* */\n        }\n        if (this.tokentype === CSL.END) {\n            //var if_end = new CSL.Token(\"if\", CSL.END);\n            //CSL.Node[\"if\"].build.call(if_end, state, target);\n            /* */\n            target.push(this);\n            var choose_end = new CSL.Token(\"choose\", CSL.END);\n            CSL.Node.choose.build.call(choose_end, state, target);\n            /* */\n        }\n    }\n};\n\n\n\n/*global CSL: true */\n\nCSL.Node.text = {\n    build: function (state, target) {\n        var func, form, plural, id, num, number, formatter, firstoutput, specialdelimiter, label, suffix, term;\n        if (this.postponed_macro) {\n            var group_start = CSL.Util.cloneToken(this);\n            group_start.name = \"group\";\n            group_start.tokentype = CSL.START;\n            CSL.Node.group.build.call(group_start, state, target);\n\n            CSL.expandMacro.call(state, this, target);\n\n            var group_end = CSL.Util.cloneToken(this);\n            group_end.name = \"group\";\n            group_end.tokentype = CSL.END;\n            if (this.postponed_macro === 'juris-locator-label') {\n                group_end.isJurisLocatorLabel = true;\n            }\n            CSL.Node.group.build.call(group_end, state, target);\n\n        } else {\n            CSL.Util.substituteStart.call(this, state, target);\n            // ...\n            //\n            // Do non-macro stuff\n            \n            // Guess again. this.variables is ephemeral, adjusted by an initial\n            // function set on the node via @variable attribute setup.\n            //variable = this.variables[0];\n            \n            if (!this.variables_real) {\n                this.variables_real = [];\n            }\n            if (!this.variables) {\n                this.variables = [];\n            }\n\n            form = \"long\";\n            plural = 0;\n            if (this.strings.form) {\n                form = this.strings.form;\n            }\n            if (this.strings.plural) {\n                plural = this.strings.plural;\n            }\n            if (\"citation-number\" === this.variables_real[0] || \"year-suffix\" === this.variables_real[0] || \"citation-label\" === this.variables_real[0]) {\n                //\n                // citation-number and year-suffix are super special,\n                // because they are rangeables, and require a completely\n                // different set of formatting parameters on the output\n                // queue.\n                if (this.variables_real[0] === \"citation-number\") {\n\n                    if (state.build.root === \"citation\") {\n                        state.opt.update_mode = CSL.NUMERIC;\n                    }\n                    if (state.build.root === \"bibliography\") {\n                        state.opt.bib_mode = CSL.NUMERIC;\n                    }\n                    //this.strings.is_rangeable = true;\n                    if (\"citation-number\" === state[state.tmp.area].opt.collapse) {\n                        this.range_prefix = state.getTerm(\"citation-range-delimiter\");\n                    }\n                    this.successor_prefix = state[state.build.area].opt.layout_delimiter;\n                    this.splice_prefix = state[state.build.area].opt.layout_delimiter;\n                    func = function (state, Item, item) {\n\n                        id = \"\" + Item.id;\n                        if (!state.tmp.just_looking) {\n                            if (state.tmp.area.slice(-5) === \"_sort\" && this.variables[0] === \"citation-number\") {\n                                if (state.tmp.area === \"bibliography_sort\") {\n                                    state.tmp.group_context.tip.done_vars.push(\"citation-number\");\n                                }\n                                if (state.tmp.area === \"citation_sort\" && state.bibliography_sort.tmp.citation_number_map) {\n                                    var num = state.bibliography_sort.tmp.citation_number_map[state.registry.registry[Item.id].seq];\n                                } else {\n                                    var num = state.registry.registry[Item.id].seq;\n                                }\n                                if (num) {\n                                    // Code currently in util_number.js\n                                    num = CSL.Util.padding(\"\" + num);\n                                }\n                                state.output.append(num, this);\n                                return;\n                            }\n                            if (item && item[\"author-only\"]) {\n                                state.tmp.element_trace.replace(\"suppress-me\");\n                            }\n                            if (state.tmp.area !== \"bibliography_sort\" && state.bibliography_sort.tmp.citation_number_map && state.bibliography_sort.opt.citation_number_sort_direction === CSL.DESCENDING) {\n                                num = state.bibliography_sort.tmp.citation_number_map[state.registry.registry[id].seq];\n                            } else {\n                                num = state.registry.registry[id].seq;\n                            }\n                            if (state.opt.citation_number_slug) {\n                                state.output.append(state.opt.citation_number_slug, this);\n                            } else {\n                                number = new CSL.NumericBlob(state, false, num, this, Item.id);\n                                if (state.tmp.in_cite_predecessor) {\n                                    number.suppress_splice_prefix = true;\n                                }\n                                state.output.append(number, \"literal\");\n                            }\n                        }\n                    };\n                    this.execs.push(func);\n                } else if (this.variables_real[0] === \"year-suffix\") {\n\n                    state.opt.has_year_suffix = true;\n\n                    if (state[state.tmp.area].opt.collapse === \"year-suffix-ranged\") {\n                        //this.range_prefix = \"-\";\n                        this.range_prefix = state.getTerm(\"citation-range-delimiter\");\n                    }\n                    this.successor_prefix = state[state.build.area].opt.layout_delimiter;\n                    if (state[state.tmp.area].opt[\"year-suffix-delimiter\"]) {\n                        this.successor_prefix = state[state.build.area].opt[\"year-suffix-delimiter\"];\n                    }\n                    func = function (state, Item) {\n                        if (state.registry.registry[Item.id] && state.registry.registry[Item.id].disambig.year_suffix !== false && !state.tmp.just_looking) {\n                            //state.output.append(state.registry.registry[Item.id].disambig[2],this);\n                            num = parseInt(state.registry.registry[Item.id].disambig.year_suffix, 10);\n\n                            //if (state[state.tmp.area].opt.collapse === \"year-suffix-ranged\") {\n                            //    //this.range_prefix = \"-\";\n                            //    this.range_prefix = state.getTerm(\"citation-range-delimiter\");\n                            //}\n                            //this.successor_prefix = state[state.tmp.area].opt.layout_delimiter;\n                            if (state[state.tmp.area].opt.cite_group_delimiter) {\n                                this.successor_prefix = state[state.tmp.area].opt.cite_group_delimiter;\n                            }\n                            number = new CSL.NumericBlob(state, false, num, this, Item.id);\n                            formatter = new CSL.Util.Suffixator(CSL.SUFFIX_CHARS);\n                            number.setFormatter(formatter);\n                            state.output.append(number, \"literal\");\n                            firstoutput = false;\n                            // XXX Can we do something better for length here?\n                            for (var i=0,ilen=state.tmp.group_context.mystack.length; i<ilen; i++) {\n                                var flags = state.tmp.group_context.mystack[i];\n                                if (!flags.variable_success && (flags.variable_attempt || (!flags.variable_attempt && !flags.term_intended))) {\n                                    firstoutput = true;\n                                    break;\n                                }\n                            }\n                            specialdelimiter = state[state.tmp.area].opt[\"year-suffix-delimiter\"];\n                            if (firstoutput && specialdelimiter && !state.tmp.sort_key_flag) {\n                                state.tmp.splice_delimiter = state[state.tmp.area].opt[\"year-suffix-delimiter\"];\n                            }\n                        }\n                    };\n                    this.execs.push(func);\n                } else if (this.variables_real[0] === \"citation-label\") {\n                    if (state.build.root === \"bibliography\") {\n                        state.opt.bib_mode = CSL.TRIGRAPH;\n                    }\n                    state.opt.has_year_suffix = true;\n                    func = function (state, Item) {\n                        label = Item[\"citation-label\"];\n                        if (!label) {\n                            label = state.getCitationLabel(Item);\n                        }\n                        if (!state.tmp.just_looking) {\n                            suffix = \"\";\n                            if (state.registry.registry[Item.id] && state.registry.registry[Item.id].disambig.year_suffix !== false) {\n                                num = parseInt(state.registry.registry[Item.id].disambig.year_suffix, 10);\n                                suffix = state.fun.suffixator.format(num);\n                            }\n                            label += suffix;\n                        }\n                        state.output.append(label, this);\n                    };\n                    this.execs.push(func);\n                }\n            } else {\n                if (this.strings.term) {\n                    \n                    // printterm\n                    func = function (state, Item) {\n                        var gender = state.opt.gender[Item.type];\n                        var term = this.strings.term;\n                        term = state.getTerm(term, form, plural, gender, CSL.TOLERANT, this.default_locale);\n                        var myterm;\n                        // if the term is not an empty string, say\n                        // that we rendered a term\n                        if (term !== \"\") {\n                            state.tmp.group_context.tip.term_intended = true;\n                        }\n                        CSL.UPDATE_GROUP_CONTEXT_CONDITION(state, term, null, this);\n                        \n                        // capitalize the first letter of a term, if it is the\n                        // first thing rendered in a citation (or if it is\n                        // being rendered immediately after terminal punctuation,\n                        // I guess, actually).\n                        if (!state.tmp.term_predecessor && !(state.opt[\"class\"] === \"in-text\" && state.tmp.area === \"citation\")) {\n                            myterm = CSL.Output.Formatters[\"capitalize-first\"](state, term);\n                            //CSL.debug(\"Capitalize\");\n                        } else {\n                            myterm = term;\n                        }\n                        \n                        // XXXXX Cut-and-paste code in multiple locations. This code block should be\n                        // collected in a function.\n                        // Tag: strip-periods-block\n                        if (state.tmp.strip_periods) {\n                            myterm = myterm.replace(/\\./g, \"\");\n                        } else {\n                            for (var i = 0, ilen = this.decorations.length; i < ilen; i += 1) {\n                                if (\"@strip-periods\" === this.decorations[i][0] && \"true\" === this.decorations[i][1]) {\n                                    myterm = myterm.replace(/\\./g, \"\");\n                                    break;\n                                }\n                            }\n                        }\n                        state.output.append(myterm, this);\n                        if (state.tmp.can_block_substitute) {\n                            // Black magic here. This causes the cs:substitution condition to pass,\n                            // blocking further rendering within its scope. \n                            state.tmp.can_substitute.replace(false, CSL.LITERAL);\n                        }\n                    };\n                    this.execs.push(func);\n                    state.build.term = false;\n                    state.build.form = false;\n                    state.build.plural = false;\n                } else if (this.variables_real.length) {\n                    func = function (state, Item) {\n\n                        // If some text variable is rendered, we're not collapsing.\n                        if (this.variables_real[0] !== \"locator\") {\n                            state.tmp.have_collapsed = false;\n                        }\n\n                        if (!state.tmp.group_context.tip.condition && Item[this.variables[0]]) {\n                            state.tmp.just_did_number = false;\n                        }\n                        var val = Item[this.variables[0]];\n                        if (val && !state.tmp.group_context.tip.condition) {\n                            if ((\"\" + val).slice(-1).match(/[0-9]/)) {\n                                state.tmp.just_did_number = true;\n                            } else {\n                                state.tmp.just_did_number = false;\n                            }\n                        }\n                    };\n                    this.execs.push(func);\n\n                    // plain string fields\n\n                    // Deal with multi-fields and ordinary fields separately.\n                    if (CSL.MULTI_FIELDS.indexOf(this.variables_real[0]) > -1\n                        || this.variables_real[0].indexOf(\"-main\") > -1\n                        || this.variables_real[0].indexOf(\"-sub\") > -1\n                        || [\"language-name\", \"language-name-original\"].indexOf(this.variables_real[0]) > -1\n                       ) {\n\n                        // multi-fields\n                        // Initialize transform factory according to whether\n                        // abbreviation is desired.\n                        var abbrevfam = this.variables[0];\n                        var abbrfall = false;\n                        var altvar = false;\n                        var transfall = false;\n                        if (form === \"short\") {\n                            if (this.variables_real[0].slice(-6) !== \"-short\") {\n                                altvar = this.variables_real[0] + \"-short\";\n                            }\n                        } else {\n                            abbrevfam = false;\n                        }\n                        if (state.build.extension) {\n                            // multi-fields for sorting get a sort transform,\n                            // (abbreviated if the short form was selected)\n                            transfall = true;\n                        } else {\n                            transfall = true;\n                            abbrfall = true;\n\t\t\t\t\t\t}\n\n                        func = state.transform.getOutputFunction(this.variables, abbrevfam, abbrfall, altvar, transfall);\n                    } else {\n                        // ordinary fields\n                        if (CSL.CITE_FIELDS.indexOf(this.variables_real[0]) > -1) {\n                            // per-cite fields are read from item, rather than Item\n                            func = function (state, Item, item) {\n                                if (item && item[this.variables[0]]) {\n                                    // Code copied to page variable as well; both\n                                    // become cs:number in MLZ extended schema\n                                    \n                                    // If locator, use cs:number. Otherwise, render\n                                    // normally.\n\n                                    // XXX The code below is pretty-much copied from\n                                    // XXX node_number.js. Should be a common function.\n                                    // XXX BEGIN\n                                    state.processNumber(this, item, this.variables[0], Item.type);\n                                    CSL.Util.outputNumericField(state, this.variables[0], Item.id);\n                                    // XXX END\n\n                                    if ([\"locator\", \"locator-extra\"].indexOf(this.variables_real[0]) > -1\n                                       && !state.tmp.just_looking) { \n                                        state.tmp.done_vars.push(this.variables_real[0]);\n                                    }\n                                }\n                            };\n                        } else  if ([\"page\", \"page-first\", \"chapter-number\", \"collection-number\", \"edition\", \"issue\", \"number\", \"number-of-pages\", \"number-of-volumes\", \"volume\"].indexOf(this.variables_real[0]) > -1) {\n                            // page gets mangled with the correct collapsing\n                            // algorithm\n                            func = function(state, Item) {\n                                state.processNumber(this, Item, this.variables[0], Item.type);\n                                CSL.Util.outputNumericField(state, this.variables[0], Item.id);\n                            };\n                        } else if ([\"URL\", \"DOI\"].indexOf(this.variables_real[0]) > -1) {\n                            func = function (state, Item) {\n                                var value;\n                                if (this.variables[0]) {\n                                    value = state.getVariable(Item, this.variables[0], form);\n                                    if (value) {\n                                        if (this.variables[0] === \"URL\" && form === \"short\") {\n                                            value = value.replace(/(.*\\.[^\\/]+)\\/.*/, \"$1\");\n                                            if (value.match(/\\/\\/www\\./)) {\n                                                value = value.replace(/https?:\\/\\//, \"\");\n                                            }\n                                        }\n                                        // true is for non-suppression of periods\n                                        if (state.opt.development_extensions.wrap_url_and_doi) {\n                                            if (!this.decorations.length || this.decorations[0][0] !== \"@\" + this.variables[0]) {\n                                                // Special-casing to fix https://github.com/Juris-M/citeproc-js/issues/57\n                                                // clone current token, to avoid collateral damage\n                                                var clonetoken = CSL.Util.cloneToken(this);\n                                                // cast a group blob\n                                                var groupblob = new CSL.Blob(null, null, \"url-wrapper\");\n                                                // set the DOI decoration on the blob\n                                                groupblob.decorations.push([\"@DOI\", \"true\"]);\n                                                if (this.variables_real[0] === \"DOI\") {\n                                                    // strip a proper DOI prefix\n                                                    var prefix;\n                                                    if (this.strings.prefix && this.strings.prefix.match(/^.*https:\\/\\/doi\\.org\\/$/)) {\n                                                        value = value.replace(/^https?:\\/\\/doi\\.org\\//, \"\");\n                                                        if (value.match(/^https?:\\/\\//)) {\n                                                            // Do not tamper with another protocol + domain if already set in field value\n                                                            prefix = \"\";\n                                                        } else {\n                                                            // Otherwise https + domain\n                                                            prefix = \"https://doi.org/\";\n                                                        }\n                                                        // set any string prefix on the clone\n                                                        clonetoken.strings.prefix = this.strings.prefix.slice(0, clonetoken.strings.prefix.length-16);\n                                                    }\n                                                    // cast a text blob\n                                                    // set the prefix as the content of the blob\n                                                    var prefixblob = new CSL.Blob(prefix);\n                                                    // cast another text blob\n                                                    // set the value as the content of the second blob\n                                                    var valueblob = new CSL.Blob(value);\n                                                    // append new text token and clone to group token\n                                                    groupblob.push(prefixblob);\n                                                    groupblob.push(valueblob);\n                                                    // append group token to output\n                                                    state.output.append(groupblob, clonetoken, false, false, true);\n                                                } else {\n                                                    var valueblob = new CSL.Blob(value);\n                                                    // append new text token and clone to group token\n                                                    groupblob.push(valueblob);\n                                                    // append group token to output\n                                                    //this.decorations = [[\"@\" + this.variables[0], \"true\"]].concat(this.decorations);\n                                                    state.output.append(groupblob, clonetoken, false, false, true);\n                                                }\n                                            } else {\n                                                state.output.append(value, this, false, false, true);\n                                            }\n                                        } else {\n                                            // This is totally unnecessary, isn't it?\n                                            if (this.decorations.length) {\n                                                for (var i=this.decorations.length-1; i>-1; i--) {\n                                                    if (this.decorations[i][0] === \"@\" + this.variables[0]) {\n                                                        this.decorations = this.decorations.slice(0, i).concat(this.decorations.slice(i+1));\n                                                    }\n                                                }\n                                            }\n                                            state.output.append(value, this, false, false, true);\n                                        }\n                                    }\n                                }\n                            };\n                        } else if (this.variables_real[0] === \"section\") {\n                            // Sections for statutes are special. This is an uncommon\n                            // variable, so we save the cost of the runtime check\n                            // unless it's being used.\n                            func = function (state, Item) {\n                                var value;\n                                value = state.getVariable(Item, this.variables[0], form);\n                                if (value) {\n                                    state.output.append(value, this);\n                                }\n                            };\n                        } else if (this.variables_real[0] === \"hereinafter\") {\n                            func = function (state, Item) {\n                                var value = state.transform.abbrevs[\"default\"][\"hereinafter\"][Item.id];\n                                if (value) {\n                                    state.output.append(value, this);\n                                    state.tmp.group_context.tip.variable_success = true;\n                                }\n                            };\n                        } else {\n                            // anything left over just gets output in the normal way.\n                            func = function (state, Item) {\n                                var value;\n                                if (this.variables[0]) {\n                                    value = state.getVariable(Item, this.variables[0], form);\n                                    if (value) {\n                                        value = \"\" + value;\n                                        value = value.split(\"\\\\\").join(\"\");\n                                        state.output.append(value, this);\n                                    }\n                                }\n                            };\n                        }\n                    }\n                    this.execs.push(func);\n                } else if (this.strings.value) {\n                    // for the text value attribute.\n                    func = function (state) {\n                        state.tmp.group_context.tip.term_intended = true;\n                        // true flags that this is a literal-value term\n                        CSL.UPDATE_GROUP_CONTEXT_CONDITION(state, this.strings.value, true, this);\n                        state.output.append(this.strings.value, this);\n                        if (state.tmp.can_block_substitute) {\n                            // Black magic here. This causes the cs:substitution condition to pass,\n                            // blocking further rendering within its scope. \n                            state.tmp.can_substitute.replace(false, CSL.LITERAL);\n                        }\n                    };\n                    this.execs.push(func);\n                    // otherwise no output\n                }\n            }\n            target.push(this);\n            CSL.Util.substituteEnd.call(this, state, target);\n        }\n    }\n};\n\n\n\n/*global CSL: true */\n\nCSL.Node.intext = {\n    build: function (state, target) {\n        if (this.tokentype === CSL.START) {\n\n            state.build.area = \"intext\";\n            state.build.root = \"intext\";\n            state.build.extension = \"\";\n\n            var func = function(state, Item) {\n                state.tmp.area = \"intext\";\n                state.tmp.root = \"intext\";\n                state.tmp.extension = \"\";\n            }\n            this.execs.push(func);\n        }\n        if (this.tokentype === CSL.END) {\n\n            // Do whatever cs:citation does with sorting.\n            state.intext_sort = {\n                opt: {\n                    sort_directions: state.citation_sort.opt.sort_directions\n                }\n            }\n            state.intext.srt = state.citation.srt;\n        }\n        target.push(this);\n    }\n};\n\n\n/*global CSL: true */\n\nCSL.Attributes = {};\n\nCSL.Attributes[\"@disambiguate\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    if (arg === \"true\") {\n        state.opt.has_disambiguate = true;\n        var func = function (Item) {\n            if (state.tmp.area === \"bibliography\") {\n                if (state.tmp.disambiguate_count < state.registry.registry[Item.id].disambig.disambiguate) {\n                    state.tmp.disambiguate_count += 1;\n                    return true;\n                }\n            } else {\n                state.tmp.disambiguate_maxMax += 1;\n                if (state.tmp.disambig_settings.disambiguate\n                    && state.tmp.disambiguate_count < state.tmp.disambig_settings.disambiguate) {\n                    state.tmp.disambiguate_count += 1;\n                    return true;\n                }\n            }\n            return false;\n        };\n        this.tests.push(func);\n    } else if (arg === \"check-ambiguity-and-backreference\") {\n        var func = function (Item) {\n            if (state.registry.registry[Item.id].disambig.disambiguate && state.registry.registry[Item.id][\"citation-count\"] > 1) {\n                return true;\n            }\n            return false;\n        };\n        this.tests.push(func);\n    }\n};\n\nCSL.Attributes[\"@is-numeric\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var variables = arg.split(/\\s+/);\n    var maketest = function(variable) {\n        return function (Item, item) {\n            var myitem = Item;\n            if (item && [\"locator\",\"locator-extra\"].indexOf(variable) > -1) {\n                myitem = item;\n            }\n            if (!myitem[variable]) {\n                return false;\n            }\n            if (CSL.NUMERIC_VARIABLES.indexOf(variable) > -1) {\n                if (!state.tmp.shadow_numbers[variable]) {\n                    state.processNumber(false, myitem, variable, Item.type);\n                }\n                if (state.tmp.shadow_numbers[variable].numeric) {\n                    return true;\n                }\n            } else if ([\"title\",\"version\"].indexOf(variable) > -1) {\n                if (myitem[variable].slice(-1) === \"\" + parseInt(myitem[variable].slice(-1), 10)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    for (var i=0; i<variables.length; i+=1) {\n        this.tests.push(maketest(variables[i]));\n    }\n};\n\n\nCSL.Attributes[\"@is-uncertain-date\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var variables = arg.split(/\\s+/);\n    // Strip off any boolean prefix.\n    var maketest = function (myvariable) {\n        return function(Item) {\n            if (Item[myvariable] && Item[myvariable].circa) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n    };\n    for (var i=0,ilen=variables.length;i<ilen;i+=1) {\n        this.tests.push(maketest(variables[i]));\n    }\n};\n\n\nCSL.Attributes[\"@locator\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var trylabels = arg.replace(\"sub verbo\", \"sub-verbo\");\n    trylabels = trylabels.split(/\\s+/);\n    // Strip off any boolean prefix.\n    var maketest = function (trylabel) {\n        return function(Item, item) {\n            var label;\n            state.processNumber(false, item, \"locator\");\n            label = state.tmp.shadow_numbers.locator.label;\n            if (label && trylabel === label) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n    };\n    for (var i=0,ilen=trylabels.length;i<ilen;i+=1) {\n        this.tests.push(maketest(trylabels[i]));\n    }\n};\n\n\nCSL.Attributes[\"@position\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var tryposition;\n    state.opt.update_mode = CSL.POSITION;\n    var trypositions = arg.split(/\\s+/);\n    var testSubsequentNear = function (Item, item) {\n        if (item && CSL.POSITION_MAP[item.position] >= CSL.POSITION_MAP[CSL.POSITION_SUBSEQUENT] && item[\"near-note\"]) {\n            return true;\n        }\n        return false;\n    };\n    var testSubsequentNotNear = function (Item, item) {\n        if (item && CSL.POSITION_MAP[item.position] == CSL.POSITION_MAP[CSL.POSITION_SUBSEQUENT] && !item[\"near-note\"]) {\n            return true;\n        }\n        return false;\n    };\n    var maketest = function(tryposition) {\n        return function (Item, item) {\n            if (state.tmp.area === \"bibliography\") {\n                return false;\n            }\n            if (item && \"undefined\" === typeof item.position) {\n                item.position = 0;\n            }\n            if (item && typeof item.position === \"number\") {\n                if (item.position === 0 && tryposition === 0) {\n                    return true;\n                } else if (tryposition > 0 && CSL.POSITION_MAP[item.position] >= CSL.POSITION_MAP[tryposition]) {\n                    return true;\n                }\n            } else if (tryposition === 0) {\n                return true;\n            }\n            return false;\n        };\n    };\n    for (var i=0,ilen=trypositions.length;i<ilen;i+=1) {\n        var tryposition = trypositions[i];\n        if (tryposition === \"first\") {\n            tryposition = CSL.POSITION_FIRST;\n        } else if (tryposition === \"container-subsequent\") {\n            tryposition = CSL.POSITION_CONTAINER_SUBSEQUENT;\n        } else if (tryposition === \"subsequent\") {\n            tryposition = CSL.POSITION_SUBSEQUENT;\n        } else if (tryposition === \"ibid\") {\n            tryposition = CSL.POSITION_IBID;\n        } else if (tryposition === \"ibid-with-locator\") {\n            tryposition = CSL.POSITION_IBID_WITH_LOCATOR;\n        }\n        if (\"near-note\" === tryposition) {\n            this.tests.push(testSubsequentNear);\n        } else if (\"far-note\" === tryposition) {\n            this.tests.push(testSubsequentNotNear);\n        } else {\n            this.tests.push(maketest(tryposition));\n        }\n    }\n};\n\nCSL.Attributes[\"@type\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    // XXX This is ALWAYS composed as an \"any\" match\n    var types = arg.split(/\\s+/);\n    // Strip off any boolean prefix.\n    var maketest = function (mytype) {\n        return function(Item) {\n            var ret = (Item.type === mytype);\n            if (ret) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n    };\n    var tests = [];\n    for (var i=0,ilen=types.length;i<ilen;i+=1) {\n        tests.push(maketest(types[i]));\n    }\n    this.tests.push(state.fun.match.any(this, state, tests));\n};\n\nCSL.Attributes[\"@variable\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var func;\n    this.variables = arg.split(/\\s+/);\n    this.variables_real = this.variables.slice();\n\n    // First the non-conditional code.\n    if (\"label\" === this.name && this.variables[0]) {\n        this.strings.term = this.variables[0];\n    } else if ([\"names\", \"date\", \"text\", \"number\"].indexOf(this.name) > -1) {\n        //\n        // An oddity of variable handling is that this.variables\n        // is actually ephemeral; the full list of variables is\n        // held in the variables_real var, and pushed into this.variables\n        // conditionally in order to suppress repeat renderings of\n        // the same item variable.  [STILL FUNCTIONAL? 2010.01.15]\n        //\n        // set variable names\n        func = function (state, Item, item) {\n            // Clear this.variables in place\n            for (var i = this.variables.length - 1; i > -1; i += -1) {\n                this.variables.pop();\n            }\n            for (var i=0,ilen=this.variables_real.length;i<ilen;i++) {\n                // set variable name if not quashed, and if not the title of a legal case w/suppress-author\n                if (state.tmp.done_vars.indexOf(this.variables_real[i]) === -1 \n// This looks nuts. Why suppress a case name if not required by context?\n//                    && !(item && Item.type === \"legal_case\" && item[\"suppress-author\"] && this.variables_real[i] === \"title\")\n                   ) {\n                    this.variables.push(this.variables_real[i]);\n                }\n                if (state.tmp.can_block_substitute) {\n                    state.tmp.done_vars.push(this.variables_real[i]);\n                }\n            }\n        };\n        this.execs.push(func);\n\n        // check for output\n        func = function (state, Item, item) {\n            var output = false;\n            for (var i=0,ilen=this.variables.length;i<ilen;i++) {\n                var variable = this.variables[i];\n                if ([\"authority\", \"committee\"].indexOf(variable) > -1\n                    && \"string\" === typeof Item[variable]\n                    && \"names\" === this.name) {\n\n                    // Great! So for each of these, we split.\n                    // And we only recombine everything if the length\n                    // of all the splits matches.\n                    \n                    // Preflight\n                    var isValid = true;\n                    var rawNames = Item[variable].split(/\\s*;\\s*/);\n                    var rawMultiNames = {};\n                    if (Item.multi && Item.multi._keys[variable]) {\n                        for (var langTag in Item.multi._keys[variable]) {\n                            rawMultiNames[langTag] = Item.multi._keys[variable][langTag].split(/\\s*;\\s*/);\n                            if (rawMultiNames[langTag].length !== rawNames.length) {\n                                isValid = false;\n                                break;\n                            }\n                        }\n                    }\n                    if (!isValid) {\n                        rawNames = [Item[variable]];\n                        rawMultiNames = Item.multi._keys[variable];\n                    }\n                    for (var j = 0, jlen = rawNames.length; j < jlen; j++) {\n                        var creatorParent = {\n                            literal:rawNames[j],\n                            multi:{\n                                _key:{}\n                            }\n                        };\n                        for (var langTag in rawMultiNames) {\n                            var creatorChild = {\n                                literal:rawMultiNames[langTag][j]\n                            };\n                            creatorParent.multi._key[langTag] = creatorChild;\n                        }\n                        rawNames[j] = creatorParent;\n                    }\n                    Item[variable] = rawNames;\n                }\n                if (this.strings.form === \"short\" && !Item[variable]) {\n                    if (variable === \"title\") {\n                        variable = \"title-short\";\n                    } else if (variable === \"container-title\") {\n                        variable = \"container-title-short\";\n                    }\n                }\n                if (variable === \"year-suffix\") {\n                    // year-suffix always signals that it produces output,\n                    // even when it doesn't. This permits it to be used with\n                    // the \"no date\" term inside a group used exclusively\n                    // to control formatting.\n                    output = true;\n                    break;\n                } else if (CSL.DATE_VARIABLES.indexOf(variable) > -1) {\n                    if (state.opt.development_extensions.locator_date_and_revision && \"locator-date\" === variable) {\n                        // If locator-date is set, it's valid.\n                        output = true;\n                        break;\n                    }\n                    if (Item[variable]) {\n                        for (var key in Item[variable]) {\n                            if (this.dateparts.indexOf(key) === -1 && \"literal\" !== key) {\n                                continue;\n                            }\n                            if (Item[variable][key]) {\n                                output = true;\n                                break;\n                            }\n                        }\n                        if (output) {\n                            break;\n                        }\n                    }\n                } else if (\"locator\" === variable) {\n                    if (item && item.locator) {\n                        output = true;\n                    }\n                    break;\n                } else if (\"locator-extra\" === variable) {\n                    if (item && item[\"locator-extra\"]) {\n                        output = true;\n                    }\n                    break;\n                } else if ([\"citation-number\",\"citation-label\"].indexOf(variable) > -1) {\n                    output = true;\n                    break;\n                } else if (\"first-reference-note-number\" === variable) {\n                    if (item && item[\"first-reference-note-number\"]) {\n                        output = true;\n                    }\n                    break;\n                } else if (\"first-container-reference-note-number\" === variable) {\n                    if (item && item[\"first-container-reference-note-number\"]) {\n                        output = true;\n                    }\n                    break;\n                } else if (\"hereinafter\" === variable) {\n                    if (state.transform.abbrevs[\"default\"].hereinafter[Item.id]\n                        && state.sys.getAbbreviation\n                        && Item.id) {\n\t\t\t\t\t\t\n                        output = true;\n                    }\n                    break;\n                } else if (\"object\" === typeof Item[variable]) {\n                    break;\n                } else if (\"string\" === typeof Item[variable] && Item[variable]) {\n                    output = true;\n                    break;\n                } else if (\"number\" === typeof Item[variable]) {\n                    output = true;\n                    break;\n                }\n                if (output) {\n                    break;\n                }\n            }\n            //print(\"-- VAR: \"+variable);\n            //flag = state.tmp.group_context.tip;\n            if (output) {\n                for (var i=0,ilen=this.variables_real.length;i<ilen;i++) {\n                    var variable = this.variables_real[i];\n                    if (variable !== \"citation-number\" || state.tmp.area !== \"bibliography\") {\n                        state.tmp.cite_renders_content = true;\n                    }\n                    //print(\"  setting [2] to true based on: \" + arg);\n                    state.tmp.group_context.tip.variable_success = true;\n                    // For util_substitute.js, subsequent-author-substitute\n                    if (state.tmp.can_substitute.value() \n                        && state.tmp.area === \"bibliography\"\n                        && \"string\" === typeof Item[variable]) {\n\n                        state.tmp.name_node.top = state.output.current.value();\n                        state.tmp.rendered_name.push(Item[variable]);\n                    }\n                }\n                state.tmp.can_substitute.replace(false,  CSL.LITERAL);\n            } else {\n                //print(\"  setting [1] to true based on: \" + arg);\n                state.tmp.group_context.tip.variable_attempt = true;\n            }\n            //state.tmp.group_context.replace(flag);\n        };\n        this.execs.push(func);\n    } else if ([\"if\",  \"else-if\", \"condition\"].indexOf(this.name) > -1) {\n        // Strip off any boolean prefix.\n        // Now the conditionals.\n        var maketest = function (variable) {\n            return function(Item,item){\n                var myitem = Item;\n                if (item && [\"locator\", \"locator-extra\", \"first-reference-note-number\", \"first-container-reference-note-number\", \"locator-date\"].indexOf(variable) > -1) {\n                    myitem = item;\n                }\n                // We don't run loadAbbreviation() here; it is run by the application-supplied\n                // retrieveItem() if hereinafter functionality is to be used, so this key will\n                // always exist in memory, possibly with a nil value.\n                if (variable === \"hereinafter\" && state.sys.getAbbreviation && myitem.id) {\n                    if (state.transform.abbrevs[\"default\"].hereinafter[myitem.id]) {\n                        return true;\n                    }\n                } else if (myitem[variable]) {\n                    if (\"number\" === typeof myitem[variable] || \"string\" === typeof myitem[variable]) {\n                        return true;\n                    } else if (\"object\" === typeof myitem[variable]) {\n                        //\n                        // this will turn true only for hash objects\n                        // that have at least one attribute, or for a\n                        // non-zero-length list\n                        //\n                        for (var key in myitem[variable]) {\n                            if (myitem[variable][key]) {\n                                return true;\n                            }\n                        }\n                    }\n                }\n                return false;\n            };\n        };\n        for (var i=0,ilen=this.variables.length;i<ilen;i+=1) {\n            this.tests.push(maketest(this.variables[i]));\n        }\n    }\n};\n\n\nCSL.Attributes[\"@page\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var trylabels = arg.replace(\"sub verbo\", \"sub-verbo\");\n    trylabels = trylabels.split(/\\s+/);\n    // Strip off any boolean prefix.\n    var maketest = function (trylabel) {\n        return function(Item) {\n            var label;\n            state.processNumber(false, Item, \"page\", Item.type);\n            if (!state.tmp.shadow_numbers.page.label) {\n                label = \"page\";\n            } else if (state.tmp.shadow_numbers.page.label === \"sub verbo\") {\n                label = \"sub-verbo\";\n            } else {\n                label = state.tmp.shadow_numbers.page.label;\n            }\n            if (state.tmp.shadow_numbers.page.values.length > 0) {\n                if (state.tmp.shadow_numbers.page.values[0].gotosleepability) {\n                    state.tmp.shadow_numbers.page.values[0].labelVisibility = false;\n                }\n            }\n            if (trylabel === label) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n    };\n    for (var i=0,ilen=trylabels.length;i<ilen;i+=1) {\n        this.tests.push(maketest(trylabels[i]));\n    }\n};\n\n\n// a near duplicate of code above\nCSL.Attributes[\"@number\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var trylabels = arg.split(/\\s+/);\n    var maketest = function(trylabel) {\n        return function (Item) {\n            var label;\n            state.processNumber(false, Item, \"number\", Item.type);\n            if (!state.tmp.shadow_numbers.number.label) {\n                label = \"number\";\n            } else {\n                label = state.tmp.shadow_numbers.number.label;\n            }\n            if (trylabel === label) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n    };\n    for (var i=0,ilen=trylabels.length;i<ilen;i+=1) {\n        this.tests.push(maketest(trylabels[i]));\n    }\n};\n\nCSL.Attributes[\"@jurisdiction\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var tryjurisdictions = arg.split(/\\s+/);\n    \n    // This forces a match=any method, similar to @type\n    var maketests = function (tryjurisdictions) {\n        return function(Item) {\n            if (!Item.jurisdiction) {\n                return false;\n            }\n            var jurisdiction = Item.jurisdiction;\n            for (var i=0,ilen=tryjurisdictions.length;i<ilen;i++) {\n                if (jurisdiction === tryjurisdictions[i]) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    this.tests.push(maketests(tryjurisdictions));\n};\n\nCSL.Attributes[\"@country\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var trycountries = arg.split(/\\s+/);\n    \n    // This forces a match=any method, similar to @type\n    var maketests = function (trycountries) {\n        return function(Item) {\n            if (!Item.country) {\n                return false;\n            }\n            var country = Item.country;\n            for (var i=0,ilen=trycountries.length;i<ilen;i++) {\n                if (country === trycountries[i]) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    this.tests.push(maketests(trycountries));\n};\n\nCSL.Attributes[\"@context\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var func = function () {\n        if ([\"bibliography\", \"citation\"].indexOf(arg) > -1) {\n\t\t    var area = state.tmp.area.slice(0, arg.length);\n\t\t    if (area === arg) {\n\t\t\t    return true;\n\t\t    }\n\t\t    return false;\n        } else if (\"alternative\" === arg) {\n            return !!state.tmp.abort_alternative;\n        }\n    };\n    this.tests.push(func);\n};\n\nCSL.Attributes[\"@has-year-only\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var trydates = arg.split(/\\s+/);\n    var maketest = function (trydate) {\n        return function(Item) {\n            var date = Item[trydate];\n            if (!date || date.month || date.season) {\n                return false;\n            } else {\n                return true;\n            }\n        };\n    };\n    for (var i=0,ilen=trydates.length;i<ilen;i+=1) {\n        this.tests.push(maketest(trydates[i]));\n    }\n};\n\nCSL.Attributes[\"@has-to-month-or-season\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var trydates = arg.split(/\\s+/);\n    var maketest = function (trydate) {\n        return function(Item) {\n            var date = Item[trydate];\n            if (!date || (!date.month && !date.season) || date.day) {\n                return false;\n            } else {\n                return true;\n            }\n        };\n    };\n    for (var i=0,ilen=trydates.length;i<ilen;i+=1) {\n        this.tests.push(maketest(trydates[i]));\n    }\n};\n\nCSL.Attributes[\"@has-day\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var trydates = arg.split(/\\s+/);\n    var maketest = function (trydate) {\n        return function(Item) {\n            var date = Item[trydate];\n            if (!date || !date.day) {\n                return false;\n            } else {\n                return true;\n            }\n        };\n    };\n    for (var i=0,ilen=trydates.length;i<ilen;i+=1) {\n        this.tests.push(maketest(trydates[i]));\n    }\n};\n\nCSL.Attributes[\"@is-plural\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var func = function (Item) {\n        var nameList = Item[arg];\n        if (nameList && nameList.length) {\n            var persons = 0;\n            var institutions = 0;\n            var last_is_person = false;\n            for (var i = 0, ilen = nameList.length; i < ilen; i += 1) {\n                if (state.opt.development_extensions.spoof_institutional_affiliations\n                    && (nameList[i].literal || (nameList[i].isInstitution && nameList[i].family && !nameList[i].given))) {\n                    institutions += 1;\n                    last_is_person = false;\n                } else {\n                    persons += 1;\n                    last_is_person = true;\n                }\n            }\n            if (persons > 1) {\n                return true;\n            } else if (institutions > 1) {\n                return true;\n            } else if (institutions && last_is_person) {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.tests.push(func);\n};\n\nCSL.Attributes[\"@is-multiple\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var func = function (Item) {\n        var val = (\"\" + Item[arg]);\n        var lst = val.split(/(?:,\\s|\\s(?:tot\\sen\\smet|līdz|oraz|and|bis|έως|και|och|až|do|en|et|in|ir|ja|og|sa|to|un|und|és|și|i|u|y|à|e|a|и|-|–)\\s|—|\\&)/);\n        if (lst.length > 1) {\n            return true;\n        }\n        return false;\n    };\n    this.tests.push(func);\n};\n\n\n\n\nCSL.Attributes[\"@locale\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var ret, langspec, lang, lst, i, ilen;\n    // Style default\n    var locale_default = state.opt[\"default-locale\"][0];\n\n    if (this.name === \"layout\") {\n        // For layout\n        this.locale_raw = arg;\n        if (this.tokentype === CSL.START) {\n            if (!state.opt.multi_layout) {\n                state.opt.multi_layout = [];\n            }\n            var locale_data = [];\n            // Register the primary locale in the set, and others that \"map\" to it, \n            // so that they can be used when generating sort keys. See node_sort.js.\n            // Not idempotent. Only do this once.\n            var locales = arg.split(/\\s+/);\n            var sort_locale = {};\n            var localeMaster = CSL.localeResolve(locales[0], locale_default);\n            locale_data.push(localeMaster);\n            if (localeMaster.generic) {\n                sort_locale[localeMaster.generic] = localeMaster.best;\n            } else {\n                sort_locale[localeMaster.best] = localeMaster.best;\n            }\n            for (var i=1,ilen=locales.length;i<ilen;i+=1) {\n                var localeServant = CSL.localeResolve(locales[i], locale_default);\n                locale_data.push(localeServant);\n                if (localeServant.generic) {\n                    sort_locale[localeServant.generic] = localeMaster.best;\n                } else {\n                    sort_locale[localeServant.best] = localeMaster.best;\n                }\n\n            }\n            state[state.build.area].opt.sort_locales.push(sort_locale);\n            state.opt.multi_layout.push(locale_data);\n        }\n        state.opt.has_layout_locale = true;\n    } else {\n        // For if and if-else\n\n        // Split argument\n        lst = arg.split(/\\s+/);\n\n        // Expand each list element\n        var locale_bares = [];\n        for (i = 0, ilen = lst.length; i < ilen; i += 1) {\n            // Parse out language string\n            lang = lst[i];\n        \n            // Analyze the locale\n            langspec = CSL.localeResolve(lang, locale_default);\n            if (lst[i].length === 2) {\n                // For fallback\n                locale_bares.push(langspec.bare);\n            }\n            // Load the locale terms etc.\n            // (second argument causes immediate return if locale already exists)\n            state.localeConfigure(langspec, true);\n            \n            // Replace string with locale spec object\n            lst[i] = langspec;\n        }\n        // Locales to test\n        var locale_list = lst.slice();\n\n        // check for variable value\n        // Closure probably not necessary here.\n        var maketest = function (locale_list, locale_default,locale_bares) {\n            return function (Item) {\n                var res;\n                ret = [];\n                res = false;\n                var langspec = false;\n\n                var lang;\n                if (!Item.language) {\n                    lang = locale_default;\n                } else {\n                    lang = Item.language;\n                }\n                langspec = CSL.localeResolve(lang, locale_default);\n                for (i = 0, ilen = locale_list.length; i < ilen; i += 1) {\n                    if (langspec.best === locale_list[i].best) {\n                        state.tmp.condition_lang_counter_arr.push(state.tmp.condition_counter);\n                        state.tmp.condition_lang_val_arr.push(state.opt.lang);\n                        state.opt.lang = locale_list[0].best;\n                        res = true;\n                        break;\n                    }\n                }\n                if (!res && locale_bares.indexOf(langspec.bare) > -1) {\n                    state.tmp.condition_lang_counter_arr.push(state.tmp.condition_counter);\n                    state.tmp.condition_lang_val_arr.push(state.opt.lang);\n                    state.opt.lang = locale_list[0].best;\n                    res = true;\n                }\n                return res;\n            };\n        };\n        this.tests.push(maketest(locale_list,locale_default,locale_bares));\n    }\n};\n\nCSL.Attributes[\"@alternative-node-internal\"] = function (state) {\n    if (!this.tests) {this.tests = []; };\n    var maketest = function () {\n        return function() {\n            return !state.tmp.abort_alternative;\n        };\n    };\n    var me = this;\n    this.tests.push(maketest(me));\n};\n\nCSL.Attributes[\"@locale-internal\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var langspec, lang, lst, i, ilen;\n        // For if and if-else\n\n        // Split argument\n        lst = arg.split(/\\s+/);\n\n        // Expand each list element\n        this.locale_bares = [];\n        for (i = 0, ilen = lst.length; i < ilen; i += 1) {\n            // Parse out language string\n            lang = lst[i];\n        \n            // Analyze the locale\n            langspec = CSL.localeResolve(lang, state.opt[\"default-locale\"][0]);\n            if (lst[i].length === 2) {\n                // For fallback\n                this.locale_bares.push(langspec.bare);\n            }\n            // Load the locale terms etc.\n            state.localeConfigure(langspec);\n            \n            // Replace string with locale spec object\n            lst[i] = langspec;\n        }\n        // Set locale tag on node\n        this.locale_default = state.opt[\"default-locale\"][0];\n        // The locale to set on node children if match is successful\n        this.locale = lst[0].best;\n        // Locales to test\n        this.locale_list = lst.slice();\n        \n        // check for variable value\n        // Closure probably not necessary here.\n        var maketest = function (me) {\n            return function (Item) {\n                var ret, res;\n                ret = [];\n                res = false;\n                var langspec = false;\n                if (Item.language) {\n                    lang = Item.language;\n                    langspec = CSL.localeResolve(lang, state.opt[\"default-locale\"][0]);\n                    if (langspec.best === state.opt[\"default-locale\"][0]) {\n                        langspec = false;\n                    }\n                }\n                if (langspec) {\n                    // We attempt to match a specific locale from the\n                    // list of parameters.  If that fails, we fall back\n                    // to the base locale of the first element.  The\n                    // locale applied is always the first local \n                    // in the list of parameters (or base locale, for a \n                    // single two-character language code) \n                    for (i = 0, ilen = me.locale_list.length; i < ilen; i += 1) {\n                        if (langspec.best === me.locale_list[i].best) {\n                            state.opt.lang = me.locale;\n                            state.tmp.last_cite_locale = me.locale;\n                            // Set empty group open tag with locale set marker\n                            state.output.openLevel(\"empty\");\n                            state.output.current.value().new_locale = me.locale;\n                            res = true;\n                            break;\n                        }\n                    }\n                    if (!res && me.locale_bares.indexOf(langspec.bare) > -1) {\n                        state.opt.lang = me.locale;\n                        state.tmp.last_cite_locale = me.locale;\n                        // Set empty group open tag with locale set marker\n                        state.output.openLevel(\"empty\");\n                        state.output.current.value().new_locale = me.locale;\n                        res = true;\n                    }\n                }\n                return res;\n            };\n        };\n        var me = this;\n        this.tests.push(maketest(me));\n};\n\n\nCSL.Attributes[\"@court-class\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n\tvar tryclasses = arg.split(/\\s+/);\n    var maketest = function (tryclass) {\n        return function(Item) {\n            var cls = CSL.GET_COURT_CLASS(state, Item);\n            if (cls === tryclass) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n    };\n    for (var i=0,ilen=tryclasses.length; i<ilen; i++) {\n        this.tests.push(maketest(tryclasses[i]));\n    }\n};\n\nCSL.Attributes[\"@container-multiple\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n\tvar retval = \"true\" === arg ? true : false;\n    var maketest = function (retval) {\n        return function(Item) {\n            if (!state.tmp.container_item_count[Item.container_id]) {\n                return !retval;\n            } else if (state.tmp.container_item_count[Item.container_id] > 1) {\n                return retval;\n            }\n            return !retval;\n        };\n    };\n    this.tests.push(maketest(retval));\n};\n\nCSL.Attributes[\"@container-subsequent\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n\tvar retval = \"true\" === arg ? true : false;\n    var maketest = function (retval) {\n        return function(Item) {\n            if (state.tmp.container_item_pos[Item.container_id] > 1) {\n                return retval;\n            }\n            return !retval;\n        };\n    };\n    this.tests.push(maketest(retval));\n};\n\nCSL.Attributes[\"@has-subunit\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var maketest = function(namevar) {\n        return function (Item) {\n            var subunit_count = 0;\n            for (var i in Item[namevar]) {\n                var name = Item[namevar][i];\n                if (!name.given) {\n                    var institution = name.literal ? name.literal : name.family;\n                    var length = institution.split(\"|\").length;\n                    if (subunit_count === 0 || length < subunit_count) {\n                        subunit_count = length;\n                    }\n                }\n            }\n            return (subunit_count > 1);\n        };\n    };\n    this.tests.push(maketest(arg));\n}\n\nCSL.Attributes[\"@cite-form\"] = function (state, arg) {\n    if (!this.tests) {this.tests = []; };\n    var maketest = function(citeForm) {\n        return function (Item) {\n            if (Item[\"cite-form\"] === citeForm) {\n                return true;\n            }\n            return false;\n        };\n    };\n    this.tests.push(maketest(arg));\n}\n\nCSL.Attributes[\"@disable-duplicate-year-suppression\"] = function (state, arg) {\n\tstate.opt.disable_duplicate_year_suppression = arg.split(/\\s+/);\n}\n\nCSL.Attributes[\"@consolidate-containers\"] = function (state, arg) {\n    CSL.Attributes[\"@track-containers\"](state, arg);\n    var args = arg.split(/\\s+/);\n    state.bibliography.opt.consolidate_containers = args;\n}\n\nCSL.Attributes[\"@track-containers\"] = function (state, arg) {\n    var args = arg.split(/\\s+/);\n    if (!state.bibliography.opt.track_container_items) {\n        state.bibliography.opt.track_container_items = [];\n    }\n    if (!state.bibliography.opt.consolidate_containers) {\n        state.bibliography.opt.consolidate_containers = [];\n    }\n    state.bibliography.opt.track_container_items = state.bibliography.opt.track_container_items.concat(args);\n}\n\n// These are not evaluated as conditions immediately: they only\n// set parameters that are picked up during processing.\nCSL.Attributes[\"@parallel-first\"] = function (state, arg) {\n    state.opt.parallel.enable = true;\n    var vars = arg.split(/\\s+/);\n    if (!state.opt.track_repeat) {\n        state.opt.track_repeat = {};\n    }\n    this.parallel_first = {};\n    for (var i in vars) {\n        var v = vars[i];\n        this.parallel_first[v] = true;\n        state.opt.track_repeat[v] = true;\n    }\n};\nCSL.Attributes[\"@parallel-last\"] = function (state, arg) {\n    state.opt.parallel.enable = true;\n    var vars = arg.split(/\\s+/);\n    if (!state.opt.track_repeat) {\n        state.opt.track_repeat = {};\n    }\n    this.parallel_last = {};\n    for (var i in vars) {\n        var v = vars[i];\n        this.parallel_last[v] = true;\n        state.opt.track_repeat[v] = true;\n    }\n};\nCSL.Attributes[\"@parallel-last-to-first\"] = function (state, arg) {\n    state.opt.parallel.enable = true;\n    var vars = arg.split(/\\s+/);\n    this.parallel_last_to_first = {};\n    for (var i=0,ilen=vars.length;i<ilen;i++) {\n        this.parallel_last_to_first[vars[i]] = true;\n    }\n};\nCSL.Attributes[\"@parallel-delimiter-override\"] = function (state, arg) {\n    state.opt.parallel.enable = true;\n    this.strings.set_parallel_delimiter_override = arg;\n};\nCSL.Attributes[\"@parallel-delimiter-override-on-suppress\"] = function (state, arg) {\n    state.opt.parallel.enable = true;\n    this.strings.set_parallel_delimiter_override_on_suppress = arg;\n};\nCSL.Attributes[\"@no-repeat\"] = function (state, arg) {\n    state.opt.parallel.enable = true;\n    var vars = arg.split(/\\s+/);\n    if (!state.opt.track_repeat) {\n        state.opt.track_repeat = {};\n    }\n    this.non_parallel = {};\n    for (var i in vars) {\n        var v = vars[i];\n        this.non_parallel[v] = true;\n        state.opt.track_repeat[v] = true;\n    }\n};\n\nCSL.Attributes[\"@require\"] = function (state, arg) {\n    state.opt.use_context_condition = true;\n    this.strings.require = arg;\n\n    // Introduced to constrain rendering of the group with a\n    // requirement that it either render an alpha term via cs:label or\n    // cs:text at least once, or render without any label. That\n    // behaviour is invoked with \"label-empty-or-alpha\" as arg.\n\n    // This attribute is a complement to @label-form and modular\n    // jurisdiction support, as it makes macros that adapt to shifting\n    // local term definitions possible.\n};\n\nCSL.Attributes[\"@reject\"] = function (state, arg) {\n    state.opt.use_context_condition = true;\n    this.strings.reject = arg;\n\n    // Introduced to constrain rendering of the group with a\n    // requirement that it render some label via cs:label or cs:text,\n    // and that it NOT be alpha. That behaviour is invoked with\n    // \"label-empty-or-alpha\" as arg.\n\n    // This attribute is a complement to @label-form and modular\n    // jurisdiction support, as it makes macros that adapt to shifting\n    // local term definitions possible.\n};\n\nCSL.Attributes[\"@require-comma-on-symbol\"] = function (state, arg) {\n    state.opt.require_comma_on_symbol = arg;\n}\n\nCSL.Attributes[\"@gender\"] = function (state, arg) {\n    this.gender = arg;\n};\n\nCSL.Attributes[\"@cslid\"] = function (state, arg) {\n    // @cslid is a noop\n    // The value set on this attribute is used to\n    // generate reverse lookup wrappers on output when \n    // this.development_extensions.csl_reverse_lookup_support is\n    // set to true in state.js (there is no runtime option,\n    // it must be set in state.js)\n    //\n    // See the @showid method in the html output\n    // section of formats.js for the function that\n    // renders the wrappers.\n    this.cslid = parseInt(arg, 10);\n};\n\nCSL.Attributes[\"@capitalize-if-first\"] = function (state, arg) {\n    this.strings.capitalize_if_first_override = arg;\n};\n\nCSL.Attributes[\"@label-capitalize-if-first\"] = function (state, arg) {\n    this.strings.label_capitalize_if_first_override = arg;\n};\n\nCSL.Attributes[\"@label-form\"] = function (state, arg) {\n    this.strings.label_form_override = arg;\n};\n\nCSL.Attributes[\"@part-separator\"] = function (state, arg) {\n    this.strings[\"part-separator\"] = arg;\n};\n\nCSL.Attributes[\"@leading-noise-words\"] = function (state, arg) {\n    this[\"leading-noise-words\"] = arg;\n};\n\nCSL.Attributes[\"@name-never-short\"] = function (state, arg) {\n    this[\"name-never-short\"] = arg;\n};\n\nCSL.Attributes[\"@class\"] = function (state, arg) {\n    state.opt[\"class\"] = arg;\n};\n\nCSL.Attributes[\"@version\"] = function (state, arg) {\n    state.opt.version = arg;\n};\n\n/**\n * Store the value attribute on the token.\n * @name CSL.Attributes.@value\n * @function\n */\nCSL.Attributes[\"@value\"] = function (state, arg) {\n    this.strings.value = arg;\n};\n\n\n/**\n * Store the name attribute (of a macro or term node)\n * on the state object.\n * <p>For reference when the closing node of a macro\n * or locale definition is encountered.</p>\n * @name CSL.Attributes.@name\n * @function\n */\nCSL.Attributes[\"@name\"] = function (state, arg) {\n    this.strings.name = arg;\n};\n\n/**\n * Store the form attribute (of a term node) on the state object.\n * <p>For reference when the closing node of a macro\n * or locale definition is encountered.</p>\n * @name CSL.Attributes.@form\n * @function\n */\nCSL.Attributes[\"@form\"] = function (state, arg) {\n    this.strings.form = arg;\n};\n\nCSL.Attributes[\"@date-parts\"] = function (state, arg) {\n    this.strings[\"date-parts\"] = arg;\n};\n\nCSL.Attributes[\"@range-delimiter\"] = function (state, arg) {\n    this.strings[\"range-delimiter\"] = arg;\n};\n\n/**\n * Store macro tokens in a buffer on the state object.\n * <p>For reference when the enclosing text token is\n * processed.</p>\n * @name CSL.Attributes.@macro\n * @function\n */\nCSL.Attributes[\"@macro\"] = function (state, arg) {\n    this.postponed_macro = arg;\n};\n\n/*\n * CSL.Attributes[\"@prefer-jurisdiction\"] = function (state, arg) {\n *    this.prefer_jurisdiction = true;\n * };\n */\n\nCSL.Attributes[\"@term\"] = function (state, arg) {\n    if (arg === \"sub verbo\") {\n        this.strings.term = \"sub-verbo\";\n    } else {\n        this.strings.term = arg;\n    }\n};\n\n\n/*\n * Ignore xmlns attribute.\n * <p>This should always be <p>http://purl.org/net/xbiblio/csl</code>\n * anyway.  At least for the present we will blindly assume\n * that it is.</p>\n * @name CSL.Attributes.@xmlns\n * @function\n */\nCSL.Attributes[\"@xmlns\"] = function () {};\n\n\n/*\n * Store language attribute to a buffer field.\n * <p>Will be placed in the appropriate location\n * when the element is processed.</p>\n * @name CSL.Attributes.@lang\n * @function\n */\nCSL.Attributes[\"@lang\"] = function (state, arg) {\n    if (arg) {\n        state.build.lang = arg;\n    }\n};\n\n\n// Used as a flag during dates processing\nCSL.Attributes[\"@lingo\"] = function () {};\n\n// Used as a flag during dates processing\nCSL.Attributes[\"@macro-has-date\"] = function () {\n    this[\"macro-has-date\"] = true;\n};\n\n/*\n * Store suffix string on token.\n * @name CSL.Attributes.@suffix\n * @function\n */\nCSL.Attributes[\"@suffix\"] = function (state, arg) {\n    this.strings.suffix = arg;\n};\n\n\n/*\n * Store prefix string on token.\n * @name CSL.Attributes.@prefix\n * @function\n */\nCSL.Attributes[\"@prefix\"] = function (state, arg) {\n    this.strings.prefix = arg;\n};\n\n\n/*\n * Store delimiter string on token.\n * @name CSL.Attributes.@delimiter\n * @function\n */\nCSL.Attributes[\"@delimiter\"] = function (state, arg) {\n    this.strings.delimiter = arg;\n};\n\n\n/*\n * Store match evaluator on token.\n */\nCSL.Attributes[\"@match\"] = function (state, arg) {\n    this.match = arg;\n};\n\n\nCSL.Attributes[\"@names-min\"] = function (state, arg) {\n    var val = parseInt(arg, 10);\n    if (state[state.build.area].opt.max_number_of_names < val) {\n        state[state.build.area].opt.max_number_of_names = val;\n    }\n    this.strings[\"et-al-min\"] = val;\n};\n\nCSL.Attributes[\"@names-use-first\"] = function (state, arg) {\n    this.strings[\"et-al-use-first\"] = parseInt(arg, 10);\n};\n\nCSL.Attributes[\"@names-use-last\"] = function (state, arg) {\n    if (arg === \"true\") {\n        this.strings[\"et-al-use-last\"] = true;\n    } else {\n        this.strings[\"et-al-use-last\"] = false;\n    }\n};\n\nCSL.Attributes[\"@sort\"] = function (state, arg) {\n    if (arg === \"descending\") {\n        this.strings.sort_direction = CSL.DESCENDING;\n    }\n};\n\nCSL.Attributes[\"@plural\"] = function (state, arg) {\n    // Accepted values of plural attribute differ on cs:text\n    // and cs:label nodes.\n    if (\"always\" === arg || \"true\" === arg) {\n        this.strings.plural = 1;\n    } else if (\"never\" === arg || \"false\" === arg) {\n        this.strings.plural = 0;\n    } else if (\"contextual\" === arg) {\n        this.strings.plural = false;\n    }\n};\n\nCSL.Attributes[\"@has-publisher-and-publisher-place\"] = function () {\n    this.strings[\"has-publisher-and-publisher-place\"] = true;\n};\n\nCSL.Attributes[\"@publisher-delimiter-precedes-last\"] = function (state, arg) {\n    this.strings[\"publisher-delimiter-precedes-last\"] = arg;\n};\n\nCSL.Attributes[\"@publisher-delimiter\"] = function (state, arg) {\n    this.strings[\"publisher-delimiter\"] = arg;\n};\n\nCSL.Attributes[\"@publisher-and\"] = function (state, arg) {\n    this.strings[\"publisher-and\"] = arg;\n};\n\nCSL.Attributes[\"@givenname-disambiguation-rule\"] = function (state, arg) {\n    if (CSL.GIVENNAME_DISAMBIGUATION_RULES.indexOf(arg) > -1) {\n        state.citation.opt[\"givenname-disambiguation-rule\"] = arg;\n    }\n};\n\nCSL.Attributes[\"@collapse\"] = function (state, arg) {\n    // only one collapse value will be honoured.\n    if (arg) {\n        state[this.name].opt.collapse = arg;\n    }\n};\n\nCSL.Attributes[\"@cite-group-delimiter\"] = function (state, arg) {\n    if (arg) {\n        state[state.tmp.area].opt.cite_group_delimiter = arg;\n    }\n};\n\n\n\nCSL.Attributes[\"@names-delimiter\"] = function (state, arg) {\n    state.setOpt(this, \"names-delimiter\", arg);\n};\n\nCSL.Attributes[\"@name-form\"] = function (state, arg) {\n    state.setOpt(this, \"name-form\", arg);\n};\n\nCSL.Attributes[\"@subgroup-delimiter\"] = function (state, arg) {\n    this.strings[\"subgroup-delimiter\"] = arg;\n};\n\nCSL.Attributes[\"@subgroup-delimiter-precedes-last\"] = function (state, arg) {\n    this.strings[\"subgroup-delimiter-precedes-last\"] = arg;\n};\n\n\nCSL.Attributes[\"@name-delimiter\"] = function (state, arg) {\n    state.setOpt(this, \"name-delimiter\", arg);\n};\n\nCSL.Attributes[\"@et-al-min\"] = function (state, arg) {\n    var val = parseInt(arg, 10);\n    if (state[state.build.area].opt.max_number_of_names < val) {\n        state[state.build.area].opt.max_number_of_names = val;\n    }\n    state.setOpt(this, \"et-al-min\", val);\n};\n\nCSL.Attributes[\"@et-al-use-first\"] = function (state, arg) {\n    state.setOpt(this, \"et-al-use-first\", parseInt(arg, 10));\n};\n\nCSL.Attributes[\"@et-al-use-last\"] = function (state, arg) {\n    if (arg === \"true\") {\n        state.setOpt(this, \"et-al-use-last\", true);\n    } else {\n        state.setOpt(this, \"et-al-use-last\", false);\n    }\n};\n\nCSL.Attributes[\"@et-al-subsequent-min\"] = function (state, arg) {\n    var val = parseInt(arg, 10);\n    if (state[state.build.area].opt.max_number_of_names < val) {\n        state[state.build.area].opt.max_number_of_names = val;\n    }\n    state.setOpt(this, \"et-al-subsequent-min\", val);\n};\n\nCSL.Attributes[\"@et-al-subsequent-use-first\"] = function (state, arg) {\n    state.setOpt(this, \"et-al-subsequent-use-first\", parseInt(arg, 10));\n};\n\nCSL.Attributes[\"@suppress-min\"] = function (state, arg) {\n    this.strings[\"suppress-min\"] = parseInt(arg, 10);\n};\n\nCSL.Attributes[\"@suppress-max\"] = function (state, arg) {\n    this.strings[\"suppress-max\"] = parseInt(arg, 10);\n};\n\n\nCSL.Attributes[\"@and\"] = function (state, arg) {\n    state.setOpt(this, \"and\", arg);\n};\n\nCSL.Attributes[\"@delimiter-precedes-last\"] = function (state, arg) {\n    state.setOpt(this, \"delimiter-precedes-last\", arg);\n};\n\nCSL.Attributes[\"@delimiter-precedes-et-al\"] = function (state, arg) {\n    state.setOpt(this, \"delimiter-precedes-et-al\", arg);\n};\n\nCSL.Attributes[\"@initialize-with\"] = function (state, arg) {\n    state.setOpt(this, \"initialize-with\", arg);\n};\n\nCSL.Attributes[\"@initialize\"] = function (state, arg) {\n    if (arg === \"false\") {\n        state.setOpt(this, \"initialize\", false);\n    }\n};\n\nCSL.Attributes[\"@name-as-reverse-order\"] = function (state, arg) {\n    this[\"name-as-reverse-order\"] = arg;\n};\n\nCSL.Attributes[\"@name-as-sort-order\"] = function (state, arg) {\n    if (this.name === \"style-options\") {\n        this[\"name-as-sort-order\"] = arg;\n    } else {\n        state.setOpt(this, \"name-as-sort-order\", arg);\n    }\n};\n\nCSL.Attributes[\"@sort-separator\"] = function (state, arg) {\n    state.setOpt(this, \"sort-separator\", arg);\n};\n\nCSL.Attributes[\"@require-match\"] = function (state, arg) {\n    if (arg === \"true\") {\n        this.requireMatch = true;\n    }\n};\n\nCSL.Attributes[\"@exclude-types\"] = function (state, arg) {\n    state.bibliography.opt.exclude_types = arg.split(/\\s+/);\n};\n\nCSL.Attributes[\"@exclude-with-fields\"] = function (state, arg) {\n    state.bibliography.opt.exclude_with_fields = arg.split(/\\s+/);\n};\n\n\nCSL.Attributes[\"@year-suffix-delimiter\"] = function (state, arg) {\n    state[this.name].opt[\"year-suffix-delimiter\"] = arg;\n};\n\nCSL.Attributes[\"@after-collapse-delimiter\"] = function (state, arg) {\n    state[this.name].opt[\"after-collapse-delimiter\"] = arg;\n};\n\nCSL.Attributes[\"@subsequent-author-substitute\"] = function (state, arg) {\n    state[this.name].opt[\"subsequent-author-substitute\"] = arg;\n};\n\nCSL.Attributes[\"@subsequent-author-substitute-rule\"] = function (state, arg) {\n    state[this.name].opt[\"subsequent-author-substitute-rule\"] = arg;\n};\n\nCSL.Attributes[\"@disambiguate-add-names\"] = function (state, arg) {\n    if (arg === \"true\") {\n        state.opt[\"disambiguate-add-names\"] = true;\n    }\n};\n\nCSL.Attributes[\"@disambiguate-add-givenname\"] = function (state, arg) {\n    if (arg === \"true\") {\n        state.opt[\"disambiguate-add-givenname\"] = true;\n    }\n};\n\nCSL.Attributes[\"@disambiguate-add-year-suffix\"] = function (state, arg) {\n    if (arg === \"true\" && state.opt.xclass !== \"numeric\") {\n        state.opt[\"disambiguate-add-year-suffix\"] = true;\n    }\n};\n\n\nCSL.Attributes[\"@second-field-align\"] = function (state, arg) {\n    if (arg === \"flush\" || arg === \"margin\") {\n        state[this.name].opt[\"second-field-align\"] = arg;\n    }\n};\n\n\nCSL.Attributes[\"@hanging-indent\"] = function (state, arg) {\n    if (arg === \"true\") {\n        if (state.opt.development_extensions.hanging_indent_legacy_number) {\n            state[this.name].opt.hangingindent = 2;\n\t    } else {\n            state[this.name].opt.hangingindent = true;\n\t    }\n    }\n};\n\n\nCSL.Attributes[\"@line-spacing\"] = function (state, arg) {\n    if (arg && arg.match(/^[.0-9]+$/)) {\n        state[this.name].opt[\"line-spacing\"] = parseFloat(arg, 10);\n    }\n};\n\n\nCSL.Attributes[\"@entry-spacing\"] = function (state, arg) {\n    if (arg && arg.match(/^[.0-9]+$/)) {\n        state[this.name].opt[\"entry-spacing\"] = parseFloat(arg, 10);\n    }\n};\n\n\nCSL.Attributes[\"@near-note-distance\"] = function (state, arg) {\n    state[this.name].opt[\"near-note-distance\"] = parseInt(arg, 10);\n};\n\nCSL.Attributes[\"@substring\"] = function (state, arg) {\n    this.substring = parseInt(arg, 10);\n};\n\nCSL.Attributes[\"@text-case\"] = function (state, arg) {\n    var func = function (state, Item) {\n        if (arg === \"normal\") {\n            this.text_case_normal = true;\n        } else {\n            this.strings[\"text-case\"] = arg;\n            if (arg === \"title\") {\n                if (Item.jurisdiction) {\n                    this.strings[\"text-case\"] = \"passthrough\";\n                }\n            }\n        }\n    };\n    this.execs.push(func);\n};\n\n\nCSL.Attributes[\"@page-range-format\"] = function (state, arg) {\n    state.opt[\"page-range-format\"] = arg;\n};\n\n\nCSL.Attributes[\"@year-range-format\"] = function (state, arg) {\n    state.opt[\"year-range-format\"] = arg;\n};\n\n\nCSL.Attributes[\"@default-locale\"] = function (state, arg) {\n    if (this.name === 'style') {\n        var lst, len, pos, m, ret;\n        //\n        // Workaround for Internet Exploder 6 (doesn't recognize\n        // groups in str.split(/something(braced-group)something/)\n        //\n        var m = arg.match(/-x-(sort|translit|translat)-/g);\n        if (m) {\n            for (pos = 0, len = m.length; pos < len; pos += 1) {\n                m[pos] = m[pos].replace(/^-x-/, \"\").replace(/-$/, \"\");\n            }\n        }\n        lst = arg.split(/-x-(?:sort|translit|translat)-/);\n        ret = [lst[0]];\n        for (pos = 1, len = lst.length; pos < len; pos += 1) {\n            ret.push(m[pos - 1]);\n            ret.push(lst[pos]);\n        }\n        lst = ret.slice();\n        len = lst.length;\n        for (pos = 1; pos < len; pos += 2) {\n            state.opt[(\"locale-\" + lst[pos])].push(lst[(pos + 1)].replace(/^\\s*/g, \"\").replace(/\\s*$/g, \"\"));\n        }\n        if (lst.length) {\n            state.opt[\"default-locale\"] = lst.slice(0, 1);\n        } else {\n            state.opt[\"default-locale\"] = [\"en\"];\n        }\n    } else if (arg === \"true\") {\n        this.default_locale = true;\n    }\n};\n\nCSL.Attributes[\"@default-locale-sort\"] = function (state, arg) {\n    state.opt[\"default-locale-sort\"] = arg;\n};\n\nCSL.Attributes[\"@demote-non-dropping-particle\"] = function (state, arg) {\n    state.opt[\"demote-non-dropping-particle\"] = arg;\n};\n\nCSL.Attributes[\"@initialize-with-hyphen\"] = function (state, arg) {\n    if (arg === \"false\") {\n        state.opt[\"initialize-with-hyphen\"] = false;\n    }\n};\n\nCSL.Attributes[\"@institution-parts\"] = function (state, arg) {\n    this.strings[\"institution-parts\"] = arg;\n};\n\nCSL.Attributes[\"@if-short\"] = function (state, arg) {\n    if (arg === \"true\") {\n        this.strings[\"if-short\"] = true;\n    }\n};\n\nCSL.Attributes[\"@substitute-use-first\"] = function (state, arg) {\n    this.strings[\"substitute-use-first\"] = parseInt(arg, 10);\n};\n\nCSL.Attributes[\"@use-first\"] = function (state, arg) {\n    this.strings[\"use-first\"] = parseInt(arg, 10);\n};\n\nCSL.Attributes[\"@use-last\"] = function (state, arg) {\n    this.strings[\"use-last\"] = parseInt(arg, 10);\n};\n\nCSL.Attributes[\"@stop-first\"] = function (state, arg) {\n    this.strings[\"stop-first\"] = parseInt(arg, 10);\n};\n\nCSL.Attributes[\"@stop-last\"] = function (state, arg) {\n    this.strings[\"stop-last\"] = parseInt(arg, 10) * -1;\n};\n\n\nCSL.Attributes[\"@reverse-order\"] = function (state, arg) {\n    if (\"true\" === arg) {\n        this.strings[\"reverse-order\"] = true;\n    }\n};\n\nCSL.Attributes[\"@display\"] = function (state, arg) {\n    if (state.bibliography.tokens.length === 2) {\n        state.opt.using_display = true;\n    }\n    this.strings.cls = arg;\n};\n\n\n/*global CSL: true */\n\n\n/**\n * String stack object.\n * <p>Numerous string stacks are used to track nested\n * parameters at runtime.  This class provides methods\n * that remove some of the aggravation of managing\n * them.</p>\n * @class\n */\nCSL.Stack = function (val, literal) {\n    this.mystack = [];\n    if (literal || val) {\n        this.mystack.push(val);\n    }\n    this.tip = this.mystack[0];\n};\n\n/**\n * Push a value onto the stack.\n * <p>This just does what it says.</p>\n */\nCSL.Stack.prototype.push = function (val, literal) {\n    if (literal || val) {\n        this.mystack.push(val);\n    } else {\n        this.mystack.push(\"\");\n    }\n    this.tip = this.mystack[this.mystack.length - 1];\n};\n\n/**\n * Clear the stack\n */\nCSL.Stack.prototype.clear = function () {\n    this.mystack = [];\n    this.tip = {};\n};\n\n/**\n * Replace the top value on the stack.\n * <p>This removes some ugly syntax from the\n * main code.</p>\n */\nCSL.Stack.prototype.replace = function (val, literal) {\n    //\n    // safety fix after a bug was chased down.  Rhino\n    // JS will process a negative index without error (!).\n    if (this.mystack.length === 0) {\n        CSL.error(\"Internal CSL processor error: attempt to replace nonexistent stack item with \" + val);\n    }\n    if (literal || val) {\n        this.mystack[(this.mystack.length - 1)] = val;\n    } else {\n        this.mystack[(this.mystack.length - 1)] = \"\";\n    }\n    this.tip = this.mystack[this.mystack.length - 1];\n};\n\n\n/**\n * Remove the top value from the stack.\n * <p>Just does what it says.</p>\n */\nCSL.Stack.prototype.pop = function () {\n    var ret = this.mystack.pop();\n    if (this.mystack.length) {\n        this.tip = this.mystack[this.mystack.length - 1];\n    } else {\n        this.tip = {};\n    }\n    return ret;\n};\n\n\n/**\n * Return the top value on the stack.\n * <p>Removes a little hideous complication from\n * the main code.</p>\n */\nCSL.Stack.prototype.value = function () {\n    return this.mystack.slice(-1)[0];\n};\n\n\n/**\n * Return length (depth) of stack.\n * <p>Used to identify if there is content to\n * be handled on the stack</p>\n */\nCSL.Stack.prototype.length = function () {\n    return this.mystack.length;\n};\n\n/*global CSL: true */\n\n/**\n * Initializes the parallel cite tracking arrays\n */\nCSL.Parallel = function (state) {\n    this.state = state;\n};\n\nCSL.Parallel.prototype.StartCitation = function (sortedItems, out) {\n    // This array carries the repeat markers used in rendering the cite.\n    this.state.tmp.suppress_repeats = [];\n    if (sortedItems.length < 2) return;\n    var idxEnd = 0;\n    var parallelMatchList = false;\n    var siblingRanges = [];\n\n    for (var i=0,ilen=sortedItems.length-1;i<ilen;i++) {\n        var currItem = sortedItems[i][0];\n        var nextItem = sortedItems[i+1][0];\n        var freshMatchList = false;\n        var info = {};\n        if (sortedItems[i][0].seeAlso && sortedItems[i][0].seeAlso.length > 0 && !parallelMatchList) {\n            freshMatchList = true;\n            parallelMatchList = [sortedItems[i][0].id].concat(sortedItems[i][0].seeAlso);\n            var tempMatchList = parallelMatchList.slice();\n            var remainder = sortedItems.slice(i);\n            remainder[0][1].parallel = \"first\";\n            for (var j=0,jlen=remainder.length;j<jlen;j++) {\n                var itemID = remainder[j][0].id;\n                var ididx = tempMatchList.indexOf(itemID);\n                idxEnd = false;\n                if (ididx === -1) {\n                    idxEnd = (i+j-1);\n                } else if ((i+j) === (sortedItems.length-1)) {\n                    idxEnd = (i+j);\n                }\n                if (idxEnd) {\n                    siblingRanges.push([i, idxEnd]);\n                    break;\n                } else {\n                    tempMatchList = tempMatchList.slice(0, ididx).concat(tempMatchList.slice(ididx+1));\n                }\n            }\n        }\n        // parallelMatchList/freshMatchList relate only to parallels.\n        // no-repeat non-parallels are handled in a separate block.\n        if (i > 0 && freshMatchList) {\n            this.state.tmp.suppress_repeats[i-1].START = true;\n            freshMatchList = false;\n        }\n        for (var varname in this.state.opt.track_repeat) {\n            if (!currItem[varname] || !nextItem[varname]) {\n                // Go ahead and render any value with an empty partner\n                info[varname] = false;\n            } else if (\"string\" === typeof nextItem[varname] || \"number\" === typeof nextItem[varname]) {\n                // Simple comparison of string values\n                if (varname === \"title\" && currItem[\"title-short\"] && nextItem[\"title-short\"]) {\n                    var currVal = currItem[\"title-short\"];\n                    var nextVal = nextItem[\"title-short\"];\n                } else {\n                    var currVal = currItem[varname];\n                    var nextVal = nextItem[varname];\n                }\n                if (currVal == nextVal) {\n                    info[varname] = true;\n                } else {\n                    info[varname] = false;\n                }\n            } else if (\"undefined\" === typeof currItem[varname].length) {\n                // If a date, use only the year\n                info[varname] = false;\n                var currYear = currItem[varname].year;\n                var nextYear = nextItem[varname].year;\n                if (currYear && nextYear) {\n                    if (currYear == nextYear) {\n                        info[varname] = true;\n                    }\n                }\n            } else {\n                // If a creator value, kludge it\n                var currVal = JSON.stringify(currItem[varname]);\n                var nextVal = JSON.stringify(nextItem[varname]);\n                if (currVal === nextVal) {\n                    info[varname] = true;\n                } else {\n                    info[varname] = false;\n                }\n            }\n        }\n        if (!parallelMatchList) {\n            info.ORPHAN = true;\n        }\n        if (idxEnd === i) {\n            info.END = true;\n            parallelMatchList = false;\n        }\n        this.state.tmp.suppress_repeats.push(info);\n    }\n    \n    // if (!this.state.tmp.just_looking) {\n    //     this.state.sys.print(`${JSON.stringify(this.state.tmp.suppress_repeats, null, 2)}`);\n    // }\n    \n    // Set no-repeat info here?\n    for (var j=0,jlen=siblingRanges.length;j<jlen;j++) {\n        var masterID = sortedItems[siblingRanges[j][0]][0].id;\n        this.state.registry.registry[masterID].master = true;\n        this.state.registry.registry[masterID].siblings = [];\n        var start = siblingRanges[j][0];\n        var end = siblingRanges[j][1];\n        for (var k=start; k<end; k++) {\n            this.state.tmp.suppress_repeats[k].SIBLING = true;\n            var siblingID = sortedItems[k+1][0].id;\n            sortedItems[k+1][1].parallel = \"other\";\n            this.state.registry.registry[masterID].siblings.push(siblingID);\n        }\n    }\n    // this.state.sys.print(JSON.stringify(this.state.tmp.suppress_repeats, null, 2));\n};\n\nCSL.Parallel.prototype.checkRepeats = function(params) {\n    var idx = this.state.tmp.cite_index;\n    if (this.state.tmp.suppress_repeats) {\n        if (params.parallel_first && Object.keys(params.parallel_first).length > 0) {\n            var arr = [{}].concat(this.state.tmp.suppress_repeats);\n            var ret = true;\n            for (var varname in params.parallel_first) {\n                if (!arr[idx][varname] || arr[idx].START) {\n                    // true --> suppress the entry\n                    // Test here evaluates as \"all\", not \"any\"\n                    ret = false;\n                }\n            }\n            return ret;\n        }\n        if (params.parallel_last && Object.keys(params.parallel_last).length > 0) {\n            var arr = this.state.tmp.suppress_repeats.concat([{}]);\n            var ret = Object.keys(params.parallel_last).length > 0 ? true : false;\n            for (var varname in params.parallel_last) {\n                if (!arr[idx][varname] || arr[idx].END) {\n                    // \"all\" match, as above.\n                    ret = false;\n                }\n            }\n            return ret;\n        }\n        if (params.non_parallel && Object.keys(params.non_parallel).length > 0) {\n            var arr = [{}].concat(this.state.tmp.suppress_repeats);\n            var ret = true;\n            for (var varname in params.non_parallel) {\n                if (!arr[idx][varname]) {\n                    ret = false;\n                }\n            }\n            return ret;\n        }\n    }\n    return false;\n};\n\n/*global CSL: true */\n\n\nCSL.Util = {};\n\nCSL.Util.Match = function () {\n\n    this.any = function (token, state, tests) {\n        return function (Item, item) {\n            for (var i=0, ilen=tests.length; i < ilen; i += 1) {\n                var result = tests[i](Item, item);\n                if (result) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n\n    this.none = function (token, state, tests) {\n        return function (Item, item) {\n            for (var i=0,ilen=tests.length;i<ilen;i+=1) {\n                var result = tests[i](Item,item);\n                if (result) {\n                    return false;\n                }\n            }\n            return true;\n        };\n    };\n\n    this.all = function (token, state, tests) {\n        return function (Item, item) {\n            for (var i=0,ilen=tests.length;i<ilen;i+=1) {\n                var result = tests[i](Item,item);\n                if (!result) {\n                    return false;\n                }\n            }\n            return true;\n        };\n    };\n\n    this[undefined] = this.all;\n\n    this.nand = function (token, state, tests) {\n        return function (Item, item) {\n            for (var i=0,ilen=tests.length;i<ilen;i+=1) {\n                var result = tests[i](Item,item);\n                if (!result) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n\n};\n\n/*global CSL: true */\n\n/*\n * Fields can be transformed by translation/transliteration, or by\n * abbreviation.  Transformations are performed in that order.\n *\n * Renderings of original, translated or transliterated content\n * (followed by abbreviation if requested) are placed in the primary\n * output slot or the (implicitly punctuated) secondary and tertiary\n * output slots according to the settings registered in the\n * state.opt['cite-lang-prefs'] arrays. The array has six segments:\n * 'persons', 'institutions', 'titles', 'journals', 'publishers', and\n * 'places'. Each segment always contains at least one item, and may\n * hold values 'orig', 'translit' or 'translat'. The array defaults to\n * a single item 'orig'.\n *\n * All multilingual variables are associated with segments,\n * with the exception of 'edition' and 'genre'. These two\n * exceptions are always rendered with the first matching\n * language form found in state.opt['locale-translit'] or, if\n * composing a sort key, state.opt['locale-sort']. No secondary\n * slot rendering is performed for this two variables.\n *\n * The balance of multilingual variables are rendered with\n * the first matching value in the transform locales spec\n * (no transform, state.opt['locale-translit'], or \n * state.opt['locale-translat']) mapped to the target\n * slot.\n *\n * Full primary+secondary+tertiary rendering is performed only in\n * note-style citations and the bibliography.  In-text citations are\n * rendered in the primary output slot only, following the same spec\n * parameters.\n *\n *   Optional setters:\n *     .setAbbreviationFallback(); fallback flag\n *       (if true, a failed abbreviation will fallback to long)\n *\n *     .setAlternativeVariableName(): alternative variable name in Item,\n *       for use as a fallback abbreviation source\n *\n * Translation/transliteration\n *\n *   Optional setter:\n *     .setTransformFallback():\n *       default flag (if true, the original field value will be used as a fallback)\n *\n * The getTextSubField() method may be used to obtain a string transform\n * of a field, without abbreviation, as needed for setting sort keys\n * (for example).\n *\n */\n\nCSL.Transform = function (state) {\n    // Abbreviation families\n    this.abbrevs = {};\n    this.abbrevs[\"default\"] = new state.sys.AbbreviationSegments();\n\n    function getCountryOrJurisdiction(variable, normalizedKey, quashCountry) {\n        var value = \"\";\n        if (state.sys.getHumanForm) {\n            if (variable === \"country\") {\n                value = state.sys.getHumanForm(normalizedKey.toLowerCase(), false, true);\n                value = value.split(\"|\")[0];\n            } else if (variable === \"jurisdiction\") {\n                value = state.sys.getHumanForm(normalizedKey.toLowerCase(), false, true);\n                if (!quashCountry) {\n                    value = value.split(\"|\").slice(1).join(\", \");\n                } else {\n                    // Bare country name is rendered by \"country\", not \"jurisdiction\"\n                    value = \"\";\n                }\n            }\n\t    }\n\t    return value;\n    }\n    \n    // Internal function\n    function abbreviate(state, tok, Item, altvar, basevalue, family_var, use_field) {\n\n        var value = \"\";\n        var myabbrev_family = CSL.FIELD_CATEGORY_REMAP[family_var];\n        var preferredJurisdiction;\n        if (!myabbrev_family) {\n            return basevalue;\n        }\n\n        var variable = family_var;\n        var normalizedKey = basevalue;\n\n        if (state.sys.normalizeAbbrevsKey) {\n            normalizedKey = state.sys.normalizeAbbrevsKey(family_var, basevalue);\n        }\n        var quashCountry = false;\n        if (variable === \"jurisdiction\" && normalizedKey) {\n            quashCountry = normalizedKey.indexOf(\":\") === -1;\n        }\n        // Fix up jurisdiction codes\n        if ([\"jurisdiction\", \"country\"].indexOf(family_var) > -1 && basevalue === basevalue.toLowerCase()) {\n            normalizedKey = basevalue.toUpperCase();\n        }\n        \n        \n        // Lazy retrieval of abbreviations.\n        if (state.sys.getAbbreviation) {\n\n            if ([\"jurisdiction\", \"country\", \"language-name\", \"language-name-original\"].indexOf(variable) > -1) {\n                preferredJurisdiction = \"default\";\n            } else if (Item.jurisdiction) {\n                preferredJurisdiction = Item.jurisdiction;\n            } else {\n                preferredJurisdiction = \"default\";\n            }\n            var jurisdiction = state.transform.loadAbbreviation(preferredJurisdiction, myabbrev_family, normalizedKey, Item.language);\n\n            // Some rules:\n            // # variable === \"country\"\n            // (1) If an abbreviation is associated with the code, then:\n            //     (a) return the abbreviated form if form=\"short\"\n            // (2) Otherwise:\n            //     (a) return the human-readable country name, or whatever is there if it's not a code\n            // # variable === \"jurisdiction\"\n            // (1) If !!getHumanForm(jurisdictionID, false, false):\n            //     (a) If the code is top-level (i.e. a country):\n            //         (i) return nothing -- this is what the \"country\" variable is for.\n            //     (b) otherwise:\n            //         (i) If an abbreviation is associated with the code, then:\n            //             (A) return the abbreviated form\n            //         (ii) Otherwise\n            //             (A) return the human-readable form, with the country name & code removed from the front\n            // (2) Otherwise:\n            //     (a) abbreviate as per normal.\n            // # other variables\n            // (1) Abbreviate as per normal.\n\n            if (state.transform.abbrevs[jurisdiction][myabbrev_family] && normalizedKey) {\n                // Safe to test presence of abbrev against raw object in this block\n                var abbrev = state.transform.abbrevs[jurisdiction][myabbrev_family][normalizedKey];\n                if (tok.strings.form === \"short\" && abbrev) {\n                    if (quashCountry) {\n                        value = \"\";\n                    } else {\n                        value = abbrev;\n                    }\n                } else {\n\t                value = getCountryOrJurisdiction(variable, normalizedKey, quashCountry);\n                }\n            }\n        }\n        \n        // Was for: \n        if (!value \n            && (!state.opt.development_extensions.require_explicit_legal_case_title_short || Item.type !== 'legal_case') \n            && altvar && Item[altvar] && use_field) {\n            value = Item[altvar];\n        }\n        if (!value && !state.sys.getAbbreviation && state.sys.getHumanForm) {\n\t        value = getCountryOrJurisdiction(variable, normalizedKey, quashCountry);\n\t    }\n        if (!value && !quashCountry && (!state.sys.getHumanForm || variable !== \"jurisdiction\")) {\n            value = basevalue;\n        }\n        if (state.opt.development_extensions.force_title_abbrev_fallback) {\n            if (variable === \"title\" && value === basevalue && Item[\"title-short\"]) {\n                value = Item[\"title-short\"];\n            }\n        }\n        return value;\n    }\n\n    function getFieldLocale(Item,field) {\n        var ret = state.opt[\"default-locale\"][0].slice(0, 2);\n        var localeRex;\n        if (state.opt.development_extensions.strict_text_case_locales) {\n            localeRex = new RegExp(\"^([a-zA-Z]{2})(?:$|-.*| .*)\");\n        } else {\n            localeRex = new RegExp(\"^([a-zA-Z]{2})(?:$|-.*|.*)\");\n        }\n        if (Item.language) {\n            var m = (\"\" + Item.language).match(localeRex);\n            if (m) {\n                ret = m[1];\n            } else {\n                // Set garbage to \"Klingon\".\n                ret = \"tlh\";\n            }\n        }\n        if (Item.multi && Item.multi && Item.multi.main && Item.multi.main[field]) {\n            ret = Item.multi.main[field];\n        }\n        if (!state.opt.development_extensions.strict_text_case_locales\n            || state.opt.development_extensions.normalize_lang_keys_to_lowercase) {\n\n            ret = ret.toLowerCase();\n        }\n        return ret;\n    }\n\n    // Internal functions\n    function getTextSubField (Item, field, locale_type, use_default, stopOrig, family_var) {\n        var opt, o, ret, opts;\n        var usedOrig = stopOrig;\n        var usingOrig = false;\n\n        if (!Item[field]) {\n            return {\n                name:\"\",\n                usedOrig:stopOrig,\n                token: CSL.Util.cloneToken(this)\n            };\n        }\n        // If form=\"short\" is selected (\"family_var\" is a misnomer\n        // here, it means short-form requested), and the variable\n        // has a short-form partner (i.e. it is in array\n        // VARIABLES_WITH_SHORT_FORM), then it is run here as *-short\".\n        var stickyLongForm = false;\n        if (CSL.VARIABLES_WITH_SHORT_FORM.indexOf(field) > -1\n            && family_var) {\n\n            field = field + \"-short\";\n            stickyLongForm = true;\n        }\n        var breakMe = false;\n        var firstValue = null;\n        var fieldsToTry = [];\n        if (field.slice(-6) === \"-short\") {\n            fieldsToTry.push(field);\n            fieldsToTry.push(field.slice(0, -6))\n        } else {\n            fieldsToTry.push(field);\n        }\n\n        for (var h=0,hlen=fieldsToTry.length; h<hlen; h++) {\n            var variantMatch = false;\n            var field = fieldsToTry[h];\n\n            ret = {name:\"\", usedOrig:stopOrig,locale:getFieldLocale(Item,field)};\n\n            opts = state.opt[locale_type] ? state.opt[locale_type].slice() : [];\n            var hasVal = false;\n\n            if (locale_type === 'locale-orig') {\n                if (!stopOrig) {\n                    ret.name = Item[field];\n                    ret.usedOrig = false;\n                }\n                hasVal = true;\n                usingOrig = true;\n            } else if (use_default && (\"undefined\" === typeof opts || opts.length === 0)) {\n                // If we want the original, or if we don't have any specific guidance and we \n                // definitely want output, just return the original value.\n                ret.name = Item[field];\n                ret.usedOrig = true;\n                hasVal = true;\n                usingOrig = true;\n            }\n\n            if (!hasVal) {\n                for (var i = 0, ilen = opts.length; i < ilen; i += 1) {\n                    opt = opts[i];\n                    o = opt.split(/[\\-_]/)[0];\n                    if (opt && Item.multi && Item.multi._keys[field] && Item.multi._keys[field][opt]) {\n                        ret.name = Item.multi._keys[field][opt];\n                        ret.locale = opt;\n                        hasVal = true;\n                        variantMatch = true;\n                        usingOrig = false;\n                        break;\n                    } else if (o && Item.multi && Item.multi._keys[field] && Item.multi._keys[field][o]) {\n                        ret.name = Item.multi._keys[field][o];\n                        ret.locale = o;\n                        hasVal = true;\n                        variantMatch = true;\n                        usingOrig = false;\n                        break;\n                    }\n                }\n                if (!ret.name && use_default) {\n                    ret = {name:Item[field], usedOrig:true, locale:getFieldLocale(Item,field)};\n                    usingOrig = true;\n                }\n            }\n            ret.token = CSL.Util.cloneToken(this);\n            if (h === 0) {\n                if (variantMatch) {\n                    ret.found_variant_ok = true;\n                }\n                firstValue = ret;\n                if (!stickyLongForm && (\"undefined\" === typeof opts || opts.length === 0)) {\n                    breakMe = true;\n                }\n                if (variantMatch) {\n                    breakMe = true;\n                }\n            } else {\n                if (!stickyLongForm && !variantMatch && firstValue) {\n                    ret = firstValue;\n                    field = fieldsToTry[0];\n                } else if (variantMatch) {\n                    ret.found_variant_ok = true;\n                }\n            }\n            if ([\"title\", \"container-title\"].indexOf(field) > -1) {\n                if (!usedOrig\n                    && (!ret.token.strings[\"text-case\"]\n                        || ret.token.strings[\"text-case\"] === \"sentence\"\n                        || ret.token.strings[\"text-case\"] === \"normal\")) {\n                    var locale = state.opt.lang;\n                    var lang;\n                    if (usingOrig) {\n                        lang = false;\n                    } else {\n                        lang = ret.locale;\n                    }\n                    var seg = field.slice(0,-5);\n                    var sentenceCase = ret.token.strings[\"text-case\"] === \"sentence\" ? true : false;\n                    ret.name = CSL.titlecaseSentenceOrNormal(state, Item, seg, lang, sentenceCase);\n                    delete ret.token.strings[\"text-case\"];\n                }\n            }\n            if (breakMe) {\n                break;\n            }\n        }\n        return ret;\n    }\n    this.getTextSubField = getTextSubField;\n    \n    // Setter for abbreviation lists\n    // This initializes a single abbreviation based on known\n    // data.\n    function loadAbbreviation(jurisdiction, category, orig, lang) {\n        if (!jurisdiction) {\n            jurisdiction = \"default\";\n        }\n        var country = jurisdiction.split(\":\")[0];\n        var domain = CSL.getAbbrevsDomain(state, country, lang);\n        if (domain) {\n            jurisdiction += (\"@\" + domain);\n        }\n        if (!orig) {\n            if (!state.transform.abbrevs[jurisdiction]) {\n                state.transform.abbrevs[jurisdiction] = new state.sys.AbbreviationSegments();\n            }\n            if (!state.transform.abbrevs[jurisdiction][category]) {\n                state.transform.abbrevs[jurisdiction][category] = {};\n            }\n            return jurisdiction;\n        }\n        // The getAbbreviation() function should check the\n        // external DB for the content key. If a value exists\n        // in this[category] and no value exists in DB, the entry\n        // in memory is left untouched. If a value does exist in\n        // DB, the memory value is created.\n        //\n        // See testrunner_stdrhino.js for an example.\n        if (state.sys.getAbbreviation) {\n            jurisdiction = state.sys.getAbbreviation(state.opt.styleID, state.transform.abbrevs, jurisdiction, category, orig);\n            if (!jurisdiction) {\n                jurisdiction = \"default\";\n                if (domain) {\n                    jurisdiction += (\"@\" + domain);\n                }\n            }\n        }\n        return jurisdiction;\n    }\n    this.loadAbbreviation = loadAbbreviation;\n\n    function publisherCheck (tok, Item, primary, family_var) {\n        var varname = tok.variables[0];\n        if (state.publisherOutput && primary) {\n            if ([\"publisher\",\"publisher-place\"].indexOf(varname) === -1) {\n                return false;\n            } else {\n                // In this case, the publisher bundle will be rendered\n                // at the close of the group, by the closing group node.\n                state.publisherOutput[varname + \"-token\"] = tok;\n                state.publisherOutput.varlist.push(varname);\n                var lst = primary.split(/;\\s*/);\n                if (lst.length === state.publisherOutput[varname + \"-list\"].length) {\n                    state.publisherOutput[varname + \"-list\"] = lst;\n                }\n                // Abbreviate each of the items in the list here!\n                for (var i = 0, ilen = lst.length; i < ilen; i += 1) {\n                    lst[i] = abbreviate(state, tok, Item, false, lst[i], family_var, true);\n                }\n                state.tmp[varname + \"-token\"] = tok;\n                return true;\n            }\n        }\n        return false;\n    }\n\n    function citeFormCheck(Item, value) {\n        var m = value.match(/^#([0-9]+).*>>>/);\n        if (m && m[1]) {\n            Item[\"cite-form\"] = m[1];\n        }\n    }\n    \n    // The name transform code is placed here to keep similar things\n    // in one place.  Obviously this module could do with a little\n    // tidying up.\n    function quashCheck(jurisdiction, value) {\n        var m = value.match(/^(?:#[0-9]+)*(?:!((?:[-_a-z]+(?:(?:.*)))(?:,(?:[-_a-z]+(?:(?:.*))))*))*>>>/);\n        if (m) {\n            value = value.slice(m[0].length);\n            if (m[1]) {\n                var fields = m[1].split(\",\");\n                for (var i = 0, ilen = fields.length; i < ilen; i += 1) {\n                    var rawField = fields[i];\n                    var mm = rawField.match(/^([-_a-z]+)(?:\\:(.*))*$/);\n                    var field = mm[1];\n                    // trimmer is not available in getAmbiguousCite\n                    var trimmer = state.tmp.abbrev_trimmer;\n                    if (mm[2]) {\n                        if (trimmer && jurisdiction) {\n                            if (!trimmer[jurisdiction]) {\n                                trimmer[jurisdiction] = {};\n                            }\n                            trimmer[jurisdiction][field] = mm[2];\n                        }\n                    } else if (state.tmp.done_vars.indexOf(field) === -1) {\n                        if (trimmer && jurisdiction) {\n                            if (!trimmer.QUASHES[jurisdiction]) {\n                                trimmer.QUASHES[jurisdiction] = {};\n                            }\n                            trimmer.QUASHES[jurisdiction][field] = true;\n                        }\n                        state.tmp.done_vars.push(field);\n                    }\n                }\n            }\n        }\n        return value;\n    }\n    this.quashCheck = quashCheck;\n\n    // Return function appropriate to selected options\n    function getOutputFunction(variables, family_var, abbreviation_fallback, alternative_varname) {\n        // var mytoken;\n\n        // Set the primary_locale and secondary_locale lists appropriately.\n        // No instance helper function for this; everything can be derived\n        // from processor settings and rendering context.\n\n        var localesets;\n        var langPrefs = CSL.LangPrefsMap[variables[0]];\n        if (!langPrefs) {\n            localesets = false;\n        } else {\n            localesets = state.opt['cite-lang-prefs'][langPrefs];\n        }\n\n        return function (state, Item, item) {\n            var primary, primary_locale, secondary, secondary_locale, tertiary, tertiary_locale, primary_tok;\n            if (!variables[0] || (!Item[variables[0]] && !Item[alternative_varname])) {\n                return null;\n            }\n            //\n            // Exploring the edges here.\n            // \"suppress-author\" for string variables (mostly titles).\n            //\n            if (!state.tmp.just_looking && item && item[\"suppress-author\"]) {\n                if (!state.tmp.probably_rendered_something && state.tmp.can_substitute.length() > 1) {\n                    return null;\n                }\n            }\n            var slot = {primary:false, secondary:false, tertiary:false};\n            if (state.tmp.area.slice(-5) === \"_sort\") {\n                slot.primary = 'locale-sort';\n            } else {\n                if (localesets && localesets.length === 1 && localesets[0] === \"locale-orig\") {\n                    slot.primary = \"locale-orig\";\n                    localesets = false;\n                } else if (localesets && !state.tmp.multi_layout) {\n                    var slotnames = [\"primary\", \"secondary\", \"tertiary\"];\n                    for (var i = 0, ilen = slotnames.length; i < ilen; i += 1) {\n                        if (localesets.length - 1 <  i) {\n                            break;\n                        }\n                        if (localesets[i]) {\n                            slot[slotnames[i]] = 'locale-' + localesets[i];\n                        }\n                    }\n                } else {\n                    slot.primary = 'locale-orig';\n                }\n            }\n            \n            if (variables[0] === \"title-short\" \n                || (state.tmp.area !== \"bibliography\"\n                    && !(state.tmp.area === \"citation\"\n                         && state.opt.xclass === \"note\"\n                         && item && !item.position))) {\n                \n                slot.secondary = false;\n                slot.tertiary = false;\n            }\n\n            if (state.tmp.multi_layout) {\n                slot.secondary = false;\n                slot.tertiary = false;\n            }\n            \n            // Problem for multilingual: we really should be\n            // checking for sanity on the basis of the output\n            // strings to be actually used. (also below)\n            if (state.tmp[\"publisher-list\"]) {\n                if (variables[0] === \"publisher\") {\n                    state.tmp[\"publisher-token\"] = this;\n                } else if (variables[0] === \"publisher-place\") {\n                    state.tmp[\"publisher-place-token\"] = this;\n                }\n                return null;\n            }\n            \n            // tmp.lang_array carries the current locale IDs of the style\n            // and the item. Field-level locale IDs are added here, so\n            // we clone it to allow reset.\n            var oldLangArray = state.tmp.lang_array.slice();\n\n            // True is for transform fallback\n            var res = getTextSubField.call(this, Item, variables[0], slot.primary, true, null, family_var);\n            primary = res.name;\n            primary_locale = res.locale;\n            var primary_tok = res.token;\n            var primaryUsedOrig = res.usedOrig;\n            if (family_var && !res.found_variant_ok) {\n                primary = abbreviate(state, primary_tok, Item, alternative_varname, primary, family_var, true);\n                // Suppress subsequent use of another variable if requested by\n                // hack syntax in this abbreviation short form.\n                if (primary) {\n                    // We run quash-check in getAmbiguousCite, to possibly pick up a cite-form value.\n                    citeFormCheck(Item, primary);\n                    if (!state.tmp.just_looking) {\n                        primary = quashCheck(Item.jurisdiction, primary);\n                    }\n                }\n            }\n            if (publisherCheck(this, Item, primary, family_var)) {\n                state.tmp.lang_array = oldLangArray;\n                return null;\n            }\n\n            // No fallback for secondary and tertiary\n            secondary = false;\n            tertiary = false;\n            var secondary_tok;\n            var tertiary_tok;\n            if (slot.secondary) {\n                res = getTextSubField.call(this, Item, variables[0], slot.secondary, false, res.usedOrig, null, family_var);\n                secondary = res.name;\n                secondary_locale = res.locale;\n                secondary_tok = res.token;\n                if (family_var && !res.found_variant_ok) {\n                    if (secondary) {\n                        // The abbreviate() function could use a cleanup, after Zotero correct to use title-short\n                        secondary = abbreviate(state, secondary_tok, Item, false, secondary, family_var, true);\n                    }\n                }\n                //print(\"XXX secondary_locale: \"+secondary_locale);\n            }\n            if (slot.tertiary) {\n                res = getTextSubField.call(this, Item, variables[0], slot.tertiary, false, res.usedOrig, null, family_var);\n                tertiary = res.name;\n                tertiary_locale = res.locale;\n                tertiary_tok = res.token;\n                if (family_var && !res.found_variant_ok) {\n                    if (tertiary) {\n                        // The abbreviate() function could use a cleanup, after Zotero correct to use title-short\n                        tertiary = abbreviate(state, tertiary_tok, Item, false, tertiary, family_var, true);\n                    }\n                }\n                //print(\"XXX tertiary_locale: \"+tertiary_locale);\n            }\n            \n            // Decoration of primary (currently translit only) goes here\n            var primaryPrefix;\n            if (slot.primary === \"locale-translit\") {\n                primaryPrefix = state.opt.citeAffixes[langPrefs][slot.primary].prefix;\n            }                \n            // XXX This should probably protect against italics at higher\n            // levels.\n\n            if (primaryPrefix === \"<i>\" && variables[0] === 'title' && !primaryUsedOrig) {\n                var hasItalic = false;\n                for (var i = 0, ilen = primary_tok.decorations.length; i < ilen; i += 1) {\n                    if (primary_tok.decorations[i][0] === \"@font-style\"\n                        && primary_tok.decorations[i][1] === \"italic\") {\n                        \n                        hasItalic = true;\n                    }\n                }\n                if (!hasItalic) {\n                    primary_tok.decorations.push([\"@font-style\", \"italic\"]);\n                }\n            }\n\n            //print(\"XXX \"+primary_tok.strings[\"text-case\"]);\n            if (primary_locale !== \"en\" && primary_tok.strings[\"text-case\"] === \"title\") {\n                primary_tok.strings[\"text-case\"] = \"passthrough\";\n            }\n            \n            if (\"title\" === variables[0]) {\n                primary = CSL.demoteNoiseWords(state, primary, this[\"leading-noise-words\"]);\n            }\n            if (secondary || tertiary) {\n\n                state.output.openLevel(\"empty\");\n\n                // A little too aggressive maybe.\n                primary_tok.strings.suffix = primary_tok.strings.suffix.replace(/[ .,]+$/,\"\");\n                if (primary_locale) {\n                    state.tmp.lang_array = [primary_locale].concat(oldLangArray);\n                }\n                CSL.UPDATE_GROUP_CONTEXT_CONDITION(state, null, null, primary_tok, primary_tok.strings.prefix + primary);\n                state.output.append(primary, primary_tok);\n                state.tmp.probably_rendered_something = true;\n\n                if (primary === secondary) {\n                    secondary = false;\n                }\n                if (secondary) {\n                    secondary_tok.strings.prefix = state.opt.citeAffixes[langPrefs][slot.secondary].prefix;\n                    secondary_tok.strings.suffix = state.opt.citeAffixes[langPrefs][slot.secondary].suffix;\n                    // Add a space if empty\n                    if (!secondary_tok.strings.prefix) {\n                        secondary_tok.strings.prefix = \" \";\n                    }\n                    // Remove quotes\n                    for (var i = secondary_tok.decorations.length - 1; i > -1; i += -1) {\n                        if (['@quotes/true', '@font-style/italic', '@font-style/oblique', '@font-weight/bold'].indexOf(secondary_tok.decorations[i].join('/')) > -1) {\n                            secondary_tok.decorations = secondary_tok.decorations.slice(0, i).concat(secondary_tok.decorations.slice(i + 1));\n                        }\n                    }\n                    if (secondary_locale !== \"en\" && secondary_tok.strings[\"text-case\"] === \"title\") {\n                        secondary_tok.strings[\"text-case\"] = \"passthrough\";\n                    }\n                    if (secondary_locale) {\n                        state.tmp.lang_array = [secondary_locale].concat(oldLangArray);\n                    }\n                    var secondary_outer = new CSL.Token();\n                    secondary_outer.decorations.push([\"@font-style\", \"normal\"]);\n                    secondary_outer.decorations.push([\"@font-weight\", \"normal\"]);\n                    state.output.openLevel(secondary_outer);\n                    state.output.append(secondary, secondary_tok);\n                    state.output.closeLevel();\n\n                    var blob_obj = state.output.current.value();\n                    var blobs_pos = state.output.current.value().blobs.length - 1;\n                    // Suppress supplementary multilingual info on subsequent\n                    // partners of a parallel cite?\n                }\n                if (primary === tertiary) {\n                    tertiary = false;\n                }\n                \n                if (tertiary) {\n                    tertiary_tok.strings.prefix = state.opt.citeAffixes[langPrefs][slot.tertiary].prefix;\n                    tertiary_tok.strings.suffix = state.opt.citeAffixes[langPrefs][slot.tertiary].suffix;\n                    // Add a space if empty\n                    if (!tertiary_tok.strings.prefix) {\n                        tertiary_tok.strings.prefix = \" \";\n                    }\n                    // Remove quotes\n                    for (var i = tertiary_tok.decorations.length - 1; i > -1; i += -1) {\n                        if (['@quotes/true', '@font-style/italic', '@font-style/oblique', '@font-weight/bold'].indexOf(tertiary_tok.decorations[i].join('/')) > -1) {\n                            tertiary_tok.decorations = tertiary_tok.decorations.slice(0, i).concat(tertiary_tok.decorations.slice(i + 1));\n                        }\n                    }\n                    if (tertiary_locale !== \"en\" && tertiary_tok.strings[\"text-case\"] === \"title\") {\n                        tertiary_tok.strings[\"text-case\"] = \"passthrough\";\n                    }\n                    if (tertiary_locale) {\n                        state.tmp.lang_array = [tertiary_locale].concat(oldLangArray);\n                    }\n                    var tertiary_outer = new CSL.Token();\n                    tertiary_outer.decorations.push([\"@font-style\", \"normal\"]);\n                    tertiary_outer.decorations.push([\"@font-weight\", \"normal\"]);\n                    state.output.openLevel(tertiary_outer);\n                    state.output.append(tertiary, tertiary_tok);\n                    state.output.closeLevel();\n\n                    var blob_obj = state.output.current.value();\n                    var blobs_pos = state.output.current.value().blobs.length - 1;\n                    // Suppress supplementary multilingual info on subsequent\n                    // partners of a parallel cite?\n                    // See note above.\n                }\n\n                state.output.closeLevel();\n            } else {\n                if (primary_locale) {\n                    state.tmp.lang_array = [primary_locale].concat(oldLangArray);\n                }\n                CSL.UPDATE_GROUP_CONTEXT_CONDITION(state, null, null, primary_tok, primary_tok.strings.prefix + primary);\n                state.output.append(primary, primary_tok);\n                state.tmp.probably_rendered_something = true;\n            }\n\n            state.tmp.lang_array = oldLangArray;\n                \n            if (state.tmp.can_block_substitute) {\n                state.tmp.name_node.children.push(state.output.current.value());\n            }\n            return null;\n        };\n    }\n    this.getOutputFunction = getOutputFunction;\n};\n\n/*global CSL: true */\n\n/**\n * Style token.\n * <p>This class provides the tokens that define\n * the runtime version of the style.  The tokens are\n * instantiated by {@link CSL.Core.Build}, but the token list\n * must be post-processed with\n * {@link CSL.Core.Configure} before it can be used to generate\n * citations.</p>\n * @param {String} name The node name represented by this token.\n * @param {Int} tokentype A flag indicating whether this token\n * marks the start of a node, the end of a node, or is a singleton.\n * @class\n */\nCSL.Token = function (name, tokentype, conditional) {\n    /**\n     * Name of the element.\n     * <p>This corresponds to the element name of the\n     * relevant tag in the CSL file.\n     */\n    this.name = name;\n    /**\n     * Strings and other static content specific to the element.\n     */\n    this.strings = {};\n    this.strings.delimiter = undefined;\n    this.strings.prefix = \"\";\n    this.strings.suffix = \"\";\n    /**\n     * Formatting parameters.\n     * <p>This is a placeholder at instantiation.  It is\n     * replaced by the result of {@link CSL.setDecorations}\n     * when the tag is created and configured during {@link CSL.Core.Build}\n     * by {@link CSL.XmlToToken}.  The parameters for particular\n     * formatting attributes are stored as string arrays, which\n     * map to formatting functions at runtime,\n     * when the output format is known.  Note that the order in which\n     * parameters are registered is fixed by the constant\n     * {@link CSL.FORMAT_KEY_SEQUENCE}.\n     */\n    this.decorations = [];\n    this.variables = [];\n    /**\n     * Element functions.\n     * <p>Functions implementing the styling behaviour of the element\n     * are pushed into this array in the {@link CSL.Core.Build} phase.\n     */\n    this.execs = [];\n    /**\n     * Token type.\n     * <p>This is a flag constant indicating whether the token represents\n     * a start tag, an end tag, or is a singleton.</p>\n     */\n    this.tokentype = tokentype;\n\n    // Conditional attributes added to bare tokens at runtime\n    \n    /**\n     * Condition evaluator.\n     * <p>This is a placeholder that receives a single function, and is\n     * only relevant for a conditional branching tag (<code>if</code> or\n     * <code>else-if</code>).  The function implements the argument to\n     * the <code>match=</code> attribute (<code>any</code>, <code>all</code>\n     * or <code>none</code>), by executing the functions registered in the\n     * <code>tests</code> array (see below), and reacting accordingly.  This\n     * function is invoked by the execution wrappers found in\n     * {@link CSL.Engine}.</p>\n     */\n    // this.evaluator = false;\n    /**\n     * Conditions.\n     * <p>Functions that evaluate to true or false, implementing\n     * various posisble attributes to the conditional branching tags,\n     * are registered here during {@link CSL.Core.Build}.\n     * </p>\n     */\n    // this.tests = [];\n    /**\n     * Jump point on success.\n     * <p>This holds the list jump point to be used when the\n     * <code>evaluator</code> function of a conditional tag\n     * returns true (success).  The jump index value is set during the\n     * back-to-front token pass performed during {@link CSL.Core.Configure}.\n     * </p>\n     */\n    // this.succeed = false;\n    /**\n     * Jump point on failure.\n     * <p>This holds the list jump point to be used when the\n     * <code>evaluator</code> function of a conditional tag\n     * returns false (failure).  Jump index values are set during the\n     * back-to-front token pass performed during {@link CSL.Core.Configure}.\n     * </p>\n     */\n    // this.fail = false;\n    /**\n     * Index of next token.\n     * <p>This holds the index of the next token in the\n     * token list, which is the default \"jump-point\" for ordinary\n     * processing.  Jump index values are set during the\n     * back-to-front token pass performed during {@link CSL.Core.Configure}.\n     * </p>\n     */\n    // this.next = false;\n};\n\n// Have needed this for yonks\nCSL.Util.cloneToken = function (token) {\n    var newtok, key, pos, len;\n    if (\"string\" === typeof token) {\n        return token;\n    }\n    newtok = new CSL.Token(token.name, token.tokentype);\n    for (var key in token.strings) {\n        if (token.strings.hasOwnProperty(key)) {\n            newtok.strings[key] = token.strings[key];\n        }\n    }\n    if (token.decorations) {\n        newtok.decorations = [];\n        for (pos = 0, len = token.decorations.length; pos < len; pos += 1) {\n            newtok.decorations.push(token.decorations[pos].slice());\n        }\n    }\n    if (token.variables) {\n        newtok.variables = token.variables.slice();\n    }\n    // Probably overkill; this is only used for cloning formatting\n    // tokens.\n    if (token.execs) {\n        newtok.execs = token.execs.slice();\n        if (token.tests) {\n            newtok.tests = token.tests.slice();\n        }\n    }\n    return newtok;\n};\n\n/*global CSL: true */\n\n/**\n * Ambiguous Cite Configuration Object\n * @class\n */\nCSL.AmbigConfig = function () {\n    this.maxvals = [];\n    this.minval = 1;\n    this.names = [];\n    this.givens = [];\n    this.year_suffix = false;\n    this.disambiguate = 0;\n};\n\n/*global CSL: true */\n\nCSL.Blob = function (str, token, levelname) {\n    var len, pos, key;\n    this.levelname = levelname;\n    //print(levelname);\n    if (token) {\n        this.strings = {\"prefix\":\"\",\"suffix\":\"\"};\n        for (var key in token.strings) {\n            if (token.strings.hasOwnProperty(key)) {\n                this.strings[key] = token.strings[key];\n            }\n        }\n        this.decorations = [];\n        if (token.decorations === undefined) {\n            len = 0;\n        } else {\n            len = token.decorations.length;\n        }\n        for (pos = 0; pos < len; pos += 1) {\n            this.decorations.push(token.decorations[pos].slice());\n        }\n    } else {\n        this.strings = {};\n        this.strings.prefix = \"\";\n        this.strings.suffix = \"\";\n        this.strings.delimiter = \"\";\n        this.decorations = [];\n    }\n    if (\"string\" === typeof str) {\n        this.blobs = str;\n    } else if (str) {\n        this.blobs = [str];\n    } else {\n        this.blobs = [];\n    }\n    this.alldecor = [this.decorations];\n};\n\n\nCSL.Blob.prototype.push = function (blob) {\n    if (\"string\" === typeof this.blobs) {\n        CSL.error(\"Attempt to push blob onto string object\");\n    } else if (false !== blob) {\n        blob.alldecor = blob.alldecor.concat(this.alldecor);\n        this.blobs.push(blob);\n    }\n};\n\n/*global CSL: true */\n\n/**\n * An output instance object representing a number or a range\n *\n * with attributes next and start, and\n * methods isRange(), renderStart(), renderEnd() and renderRange().\n * At render time, the output queue will perform optional\n * collapsing of these objects in the queue, according to\n * configurable options, and apply any decorations registered\n * in the object to the output elements.\n * @namespace Range object and friends.\n */\n\nCSL.NumericBlob = function (state, particle, num, mother_token, id) {\n    // item id is used to assure that prefix delimiter is invoked only\n    // when joining blobs across items\n    this.id = id;\n    this.alldecor = [];\n    this.num = num;\n    this.particle = particle;\n    this.blobs = num.toString();\n    this.status = CSL.START;\n    this.strings = {};\n    if (mother_token) {\n        if (mother_token.strings[\"text-case\"]) {\n            var textCase = mother_token.strings[\"text-case\"];\n            this.particle = CSL.Output.Formatters[textCase](state, this.particle);\n            this.blobs = CSL.Output.Formatters[textCase](state, this.blobs);\n        }\n        this.gender = mother_token.gender;\n        this.decorations = mother_token.decorations;\n        this.strings.prefix = mother_token.strings.prefix;\n        this.strings.suffix = mother_token.strings.suffix;\n        this.strings[\"text-case\"] = mother_token.strings[\"text-case\"];\n        this.successor_prefix = mother_token.successor_prefix;\n        this.range_prefix = mother_token.range_prefix;\n        this.splice_prefix = mother_token.splice_prefix;\n        this.formatter = mother_token.formatter;\n        if (!this.formatter) {\n            this.formatter =  new CSL.Output.DefaultFormatter();\n        }\n        if (this.formatter) {\n            this.type = this.formatter.format(1);\n        }\n    } else {\n        this.decorations = [];\n        this.strings.prefix = \"\";\n        this.strings.suffix = \"\";\n        this.successor_prefix = \"\";\n        this.range_prefix = \"\";\n        this.splice_prefix = \"\";\n        this.formatter = new CSL.Output.DefaultFormatter();\n    }\n};\n\n\nCSL.NumericBlob.prototype.setFormatter = function (formatter) {\n    this.formatter = formatter;\n    this.type = this.formatter.format(1);\n};\n\n\nCSL.Output.DefaultFormatter = function () {};\n\nCSL.Output.DefaultFormatter.prototype.format = function (num) {\n    return num.toString();\n};\n\nCSL.NumericBlob.prototype.checkNext = function (next,start) {\n    if (start) {\n        this.status = CSL.START;\n        if (\"object\" === typeof next) {\n            if (next.num === (this.num + 1)) {\n                next.status = CSL.SUCCESSOR;\n            } else {\n                next.status = CSL.SEEN;\n            }\n        }\n    } else if (! next || !next.num || this.type !== next.type || next.num !== (this.num + 1)) {\n        if (this.status === CSL.SUCCESSOR_OF_SUCCESSOR) {\n            this.status = CSL.END;\n        }\n        if (\"object\" === typeof next) { \n           next.status = CSL.SEEN;\n        }\n    } else { // next number is in the sequence\n        if (this.status === CSL.START || this.status === CSL.SEEN) {\n            next.status = CSL.SUCCESSOR;\n        } else if (this.status === CSL.SUCCESSOR || this.status === CSL.SUCCESSOR_OF_SUCCESSOR) {\n            if (this.range_prefix) {\n                next.status = CSL.SUCCESSOR_OF_SUCCESSOR;\n                this.status = CSL.SUPPRESS;\n            } else {\n                next.status = CSL.SUCCESSOR;\n            }\n        }\n        // wakes up the correct delimiter.\n        //if (this.status === CSL.SEEN) {\n        //    this.status = CSL.SUCCESSOR;\n        //}\n    }\n};\n\n\nCSL.NumericBlob.prototype.checkLast = function (last) {\n    // Used to adjust final non-range join\n    if (this.status === CSL.SEEN \n    || (last.num !== (this.num - 1) && this.status === CSL.SUCCESSOR)) {\n        this.status = CSL.SUCCESSOR;\n        return true;\n    }\n    return false;\n};\n\n/*global CSL: true */\n\nCSL.Util.fixDateNode = function (parent, pos, node) {\n    var form, variable, datexml, subnode, partname, attr, val, prefix, suffix, children, subchildren, display, cslid;\n    \n    var lingo = this.cslXml.getAttributeValue(node, \"lingo\");\n\n    var default_locale = this.cslXml.getAttributeValue(node, \"default-locale\");\n\n    // Raise date flag, used to control inclusion of year-suffix key in sorts\n    // This may be a little reckless: not sure what happens on no-date conditions\n    this.build.date_key = true;\n\n    form = this.cslXml.getAttributeValue(node, \"form\");\n    var lingo;\n    if (default_locale) {\n        lingo = this.opt[\"default-locale\"][0];\n    } else {\n        lingo = this.cslXml.getAttributeValue(node, \"lingo\");\n    }\n\n    if (!this.getDate(form, default_locale)) {\n        return parent;\n    }\n\n    var dateparts = this.cslXml.getAttributeValue(node, \"date-parts\");\n\n    variable = this.cslXml.getAttributeValue(node, \"variable\");\n    prefix = this.cslXml.getAttributeValue(node, \"prefix\");\n    suffix = this.cslXml.getAttributeValue(node, \"suffix\");\n    display = this.cslXml.getAttributeValue(node, \"display\");\n    cslid = this.cslXml.getAttributeValue(node, \"cslid\");\n\n    //\n    // Xml: Copy a node\n    //\n    datexml = this.cslXml.nodeCopy(this.getDate(form, default_locale));\n    this.cslXml.setAttribute(datexml, 'lingo', this.opt.lang);\n    this.cslXml.setAttribute(datexml, 'form', form);\n    this.cslXml.setAttribute(datexml, 'date-parts', dateparts);\n    this.cslXml.setAttribute(datexml, \"cslid\", cslid);\n    //\n    // Xml: Set attribute\n    //\n    this.cslXml.setAttribute(datexml, 'variable', variable);\n    this.cslXml.setAttribute(datexml, 'default-locale', default_locale);\n    //\n    // Xml: Set flag\n    //\n    if (prefix) {\n        //\n        // Xml: Set attribute\n        //\n        this.cslXml.setAttribute(datexml, \"prefix\", prefix);\n    }\n    if (suffix) {\n        //\n        // Xml: Set attribute\n        //\n        this.cslXml.setAttribute(datexml, \"suffix\", suffix);\n    }\n    if (display) {\n        //\n        // Xml: Set attribute\n        //\n        this.cslXml.setAttribute(datexml, \"display\", display);\n    }\n    //\n    // Step through any date-part children of the layout date node,\n    // and lay their attributes onto the corresponding node in the\n    // locale template node copy.\n    //\n    // tests: language_BaseLocale\n    // tests: date_LocalizedTextInStyleLocaleWithTextCase\n    //\n    children = this.cslXml.children(datexml);\n    for (var key in children) {\n        subnode = children[key];\n        if (\"date-part\" === this.cslXml.nodename(subnode)) {\n            partname = this.cslXml.getAttributeValue(subnode, \"name\");\n            if (default_locale) {\n                this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(datexml, \"date-part\", partname, \"@default-locale\", \"true\");\n            }\n        }\n    }\n\n    children = this.cslXml.children(node);\n    for (var key in children) {\n        subnode = children[key];\n        if (\"date-part\" === this.cslXml.nodename(subnode)) {\n            partname = this.cslXml.getAttributeValue(subnode, \"name\");\n            subchildren = this.cslXml.attributes(subnode);\n            for (attr in subchildren) {\n                if (\"@name\" === attr) {\n                    continue;\n                }\n                if (lingo && lingo !== this.opt.lang) {\n                    if ([\"@suffix\", \"@prefix\", \"@form\"].indexOf(attr) > -1) {\n                        continue;\n                    }\n                }\n                val = subchildren[attr];\n                this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(datexml, \"date-part\", partname, attr, val);\n            }\n        }\n    }\n    \n    if (\"year\" === this.cslXml.getAttributeValue(node, \"date-parts\")) {\n\n        //\n        // Xml: Find one node by attribute and delete\n        //\n        this.cslXml.deleteNodeByNameAttribute(datexml, 'month');\n        //\n        // Xml: Find one node by attribute and delete\n        //\n        this.cslXml.deleteNodeByNameAttribute(datexml, 'day');\n        \n    } else if (\"year-month\" === this.cslXml.getAttributeValue(node, \"date-parts\")) {\n        //\n        // Xml: Find one node by attribute and delete\n        //\n        this.cslXml.deleteNodeByNameAttribute(datexml, 'day');\n    } else if (\"month-day\" === this.cslXml.getAttributeValue(node, \"date-parts\")) {\n        //\n        // Xml: Get child nodes\n        //\n        var childNodes = this.cslXml.children(datexml);\n        for (var i=1,ilen=this.cslXml.numberofnodes(childNodes);i<ilen;i++) {\n            //\n            // Xml: Get attribute value (for string comparison)\n            //\n            if (this.cslXml.getAttributeValue(childNodes[i], 'name') === \"year\") {\n                //\n                // Xml: Set attribute value\n                //\n                this.cslXml.setAttribute(childNodes[i-1], \"suffix\", \"\");\n                break;\n            }\n        }\n        //\n        // Xml: Find one node by attribute and delete\n        //\n        this.cslXml.deleteNodeByNameAttribute(datexml, 'year');\n    }\n    return this.cslXml.insertChildNodeAfter(parent, node, pos, datexml);\n};\n\n/*global CSL: true */\n\nCSL.dateMacroAsSortKey = function (state, Item) {\n    CSL.dateAsSortKey.call(this, state, Item, true);\n};\n\n\nCSL.dateAsSortKey = function (state, Item, isMacro) {\n    var dp, elem, value, e, yr, prefix, i, ilen;\n    var variable = this.variables[0];\n    var macroFlag = \"empty\";\n    if (isMacro && state.tmp.extension) {\n        macroFlag = \"macro-with-date\";\n    }\n    dp = Item[variable];\n    if (\"undefined\" === typeof dp) {\n        dp = {\"date-parts\": [[0]] };\n    }\n    if (\"undefined\" === typeof this.dateparts) {\n        this.dateparts = [\"year\", \"month\", \"day\"];\n    }\n    if (dp.raw) {\n        dp = state.fun.dateparser.parseDateToArray(dp.raw);\n    } else if (dp[\"date-parts\"]) {\n        dp = state.dateParseArray(dp);\n    }\n    if (\"undefined\" === typeof dp) {\n        dp = {};\n    }\n    if (dp.year) {\n        for (i = 0, ilen = CSL.DATE_PARTS_INTERNAL.length; i < ilen; i += 1) {\n            elem = CSL.DATE_PARTS_INTERNAL[i];\n            value = 0;\n            e = elem;\n            if (e.slice(-4) === \"_end\") {\n                e = e.slice(0, -4);\n            }\n            if (dp[elem] && this.dateparts.indexOf(e) > -1) {\n                value = dp[elem];\n            }\n            if (elem.slice(0, 4) === \"year\") {\n                yr = CSL.Util.Dates[e].numeric(state, value);\n                var prefix = \"1\";\n                if (yr[0] === \"-\") {\n                    prefix = \"0\";\n                    yr = yr.slice(1);\n                    yr = 9999 - parseInt(yr, 10);\n                }\n                state.output.append(CSL.Util.Dates[elem.slice(0, 4)].numeric(state, (prefix + yr)), macroFlag);\n            } else {\n                value = CSL.Util.Dates[e][\"numeric-leading-zeros\"](state, value);\n                // Ugh.\n                if (!value) {\n                    value = \"00\";\n                }\n                state.output.append(value, macroFlag);\n            }\n        }\n    }\n};\n\nCSL.Engine.prototype.dateParseArray = function (date_obj) {\n    var ret, field, dp, exts;\n    ret = {};\n    for (field in date_obj) {\n        if (field === \"date-parts\") {\n            dp = date_obj[\"date-parts\"];\n            if (dp.length > 1) {\n                if (dp[0].length !== dp[1].length) {\n                    CSL.error(\"CSL data error: element mismatch in date range input.\");\n                }\n            }\n            exts = [\"\", \"_end\"];\n            for (var i = 0, ilen = dp.length; i < ilen; i += 1) {\n                for (var j = 0, jlen = CSL.DATE_PARTS.length; j < jlen; j += 1) {\n                    if (isNaN(parseInt(dp[i][j], 10))) {\n                        ret[(CSL.DATE_PARTS[j] + exts[i])] = undefined;\n                    } else {\n                        ret[(CSL.DATE_PARTS[j] + exts[i])] = parseInt(dp[i][j], 10);\n                    }\n                }\n            }\n        } else if (date_obj.hasOwnProperty(field)) {\n\n            // XXXX: temporary workaround\n\n            if (field === \"literal\" && \"object\" === typeof date_obj.literal && \"string\" === typeof date_obj.literal.part) {\n                CSL.debug(\"Warning: fixing up weird literal date value\");\n                ret.literal = date_obj.literal.part;\n            } else {\n                ret[field] = date_obj[field];\n            }\n        }\n    }\n    return ret;\n};\n\n/*global CSL: true */\n\nCSL.Util.Names = {};\n\nCSL.Util.Names.compareNamesets = CSL.NameOutput.prototype._compareNamesets;\n\n/**\n * Un-initialize a name (quash caps after first character)\n */\nCSL.Util.Names.unInitialize = function (state, name) {\n    var i, ilen, namelist, punctlist, ret;\n    if (!name) {\n        return \"\";\n    }\n    namelist = name.split(/(?:\\-|\\s+)/);\n    punctlist = name.match(/(\\-|\\s+)/g);\n    ret = \"\";\n    for (i = 0, ilen = namelist.length; i < ilen; i += 1) {\n        // if (CSL.ALL_ROMANESQUE_REGEXP.exec(namelist[i].slice(0,-1)) \n        //    && namelist[i] \n        //    && namelist[i] !== namelist[i].toUpperCase()) {\n\n            // More or less like this, to address the following fault report:\n            // http://forums.zotero.org/discussion/17610/apsa-problems-with-capitalization-of-mc-mac-etc/\n\n            // Leaving the name string untouched because name capitalization is varied and wonderful.\n            // https://github.com/Juris-M/citeproc-js/issues/43\n            \n            //namelist[i] = namelist[i].slice(0, 1) + namelist[i].slice(1, 2).toLowerCase() + namelist[i].slice(2);\n        // }\n        ret += namelist[i];\n        if (i < ilen - 1) {\n            ret += punctlist[i];\n        }\n    }\n    return ret;\n};\n\n/**\n * Initialize a name.\n */\nCSL.Util.Names.initializeWith = function (state, name, terminator, normalizeOnly) {\n    var i, ilen, mm, lst, ret;\n    if (!name) {\n        return \"\";\n    }\n    if (!terminator) {\n        terminator = \"\";\n    }\n    if ([\"Lord\", \"Lady\"].indexOf(name) > -1\n        || (!name.replace(/^(?:<[^>]+>)*/, \"\").match(CSL.STARTSWITH_ROMANESQUE_REGEXP)\n            && !terminator.match(\"%s\"))) {\n        return name;\n    }\n\n    if (state.opt[\"initialize-with-hyphen\"] === false) {\n        name = name.replace(/\\-/g, \" \");\n    }\n\n    // We need to suss out what is a set of initials or abbreviation,\n    // so that they can be selectively normalized. Steps might be:\n    //   (1) Split the string\n    //   (2) Step through the string, deleting periods and, if initalize=\"false\", then\n    //       (a) note abbreviations and initials (separately).\n    //   (3) If initialize=\"false\" then:\n    //       (a) Do the thing below, but only pushing terminator; or else\n    //       (b) Do the thing below\n\n    name = name.replace(/\\s*\\-\\s*/g, \"-\").replace(/\\s+/g, \" \");\n    name = name.replace(/-([a-z])/g, \"\\u2013$1\");\n\n    for (var i=name.length-2; i>-1; i += -1) {\n        if (name.slice(i, i+1) === \".\" && name.slice(i+1, i+2) !== \" \") {\n            name = name.slice(0, i) + \". \" + name.slice(i+1);\n        }\n    }\n\n    // (1) Split the string\n    var nameSplits = CSL.Output.Formatters.nameDoppel.split(name);\n    var namelist = [];\n    namelist = [nameSplits.strings[0]];\n\n    if (nameSplits.tags.length === 0) {\n        var mmm = namelist[0].match(/[^\\.]+$/);\n        if (mmm && mmm[0].length === 1 && mmm[0] !== mmm[0].toLowerCase()) {\n            namelist[0] += \".\";\n        }\n    }\n\n    for (i = 1, ilen = nameSplits.strings.length; i < ilen; i += 1) {\n        namelist.push(nameSplits.tags[i - 1]);\n        namelist.push(nameSplits.strings[i]);\n    }\n\n    // Use doInitializeName or doNormalizeName, depending on requirements.\n    if (normalizeOnly) {\n        ret = this.doNormalize(state, namelist, terminator);\n    } else {\n        ret = this.doInitialize(state, namelist, terminator);\n    }\n    ret = ret.replace(/\\u2013([a-z])/g, \"-$1\");\n    return ret;\n};\n\nCSL.Util.Names.notag = function(str) {\n    return str.replace(/^(?:<[^>]+>)*/, \"\");\n};\n\nCSL.Util.Names.mergetag = function(state, tagstr, newstr) {\n    var m = tagstr.match(/(?:-*<[^>]+>-*)/g);\n    if (!m) {\n        return newstr;\n    } else {\n        tagstr = m.join(\"\");\n    }\n    m = newstr.match(/^(.*[^\\s])*(\\s+)$/);\n    if (m) {\n        m[1] = m[1] ? m[1] : \"\";\n        newstr = m[1] + tagstr + m[2];\n    } else {\n        newstr = newstr + tagstr;\n    }\n    return newstr;\n};\n\nCSL.Util.Names.tagonly = function(state, str) {\n    var m = str.match(/(?:<[^>]+>)+/);\n    if (!m) {\n        return str;\n    } else {\n        return m.join(\"\");\n    }\n};\n\nCSL.Util.Names.doNormalize = function (state, namelist, terminator) {\n    var i, ilen;\n    // namelist is a flat list of given-name elements and space-like separators between them\n    terminator = terminator ? terminator : \"\";\n    // Flag elements that look like abbreviations\n    var isAbbrev = [];\n    for (i = 0, ilen = namelist.length; i < ilen; i += 1) {\n        if (this.notag(namelist[i]).length > 1 && this.notag(namelist[i]).slice(-1) === \".\") {\n            // namelist[i] = namelist[i].slice(0, -1);\n            namelist[i] = namelist[i].replace(/^(.*)\\.(.*)$/, \"$1$2\");\n            isAbbrev.push(true);\n        } else if (namelist[i].length === 1 && namelist[i].toUpperCase() === namelist[i]) {\n            isAbbrev.push(true);\n        } else {\n            isAbbrev.push(false);\n        }\n    }\n    // Step through the elements of the givenname array\n    for (i = 0, ilen = namelist.length; i < ilen; i += 2) {\n        // If the element is not an abbreviation, leave it and its trailing spaces alone\n        if (isAbbrev[i]) {\n            // For all elements but the last\n            if (i < namelist.length - 2) {\n                // Start from scratch on space-like things following an abbreviation\n                namelist[i + 1] = this.tagonly(state, namelist[i+1]);\n                if (!isAbbrev[i+2]) {\n                    namelist[i + 1] = this.tagonly(state, namelist[i+1]) + \" \";\n                }\n                \n                // Add the terminator to the element\n                // If the following element is not a single-character abbreviation, remove a trailing zero-width non-break space, if present\n                // These ops may leave some duplicate cruft in the elements and separators. This will be cleaned at the end of the function.\n                if (namelist[i + 2].length > 1) {\n                    namelist[i+1] = terminator.replace(/\\ufeff$/, \"\") + namelist[i+1];\n                } else {\n                    namelist[i+1] = this.mergetag(state, namelist[i+1], terminator);\n                }\n            }\n            // For the last element (if it is an abbreviation), just append the terminator\n            if (i === namelist.length - 1) {\n                namelist[i] = namelist[i] + terminator;\n            }\n        }\n    }\n    // Remove trailing cruft and duplicate spaces, and return\n    return namelist.join(\"\").replace(/[\\u0009\\u000a\\u000b\\u000c\\u000d\\u0020\\ufeff\\u00a0]+$/,\"\").replace(/\\s*\\-\\s*/g, \"-\").replace(/[\\u0009\\u000a\\u000b\\u000c\\u000d\\u0020]+/g, \" \");\n};\n\nCSL.Util.Names.doInitialize = function (state, namelist, terminator) {\n    var i, ilen, m, j, jlen, lst, n;\n    for (i = 0, ilen = namelist.length; i < ilen; i += 2) {\n        n = namelist[i];\n        if (!n) {\n            continue;\n        }\n        m = n.match(CSL.NAME_INITIAL_REGEXP);\n        if (!m && (!n.match(CSL.STARTSWITH_ROMANESQUE_REGEXP) && n.length > 1 && terminator.match(\"%s\"))) {\n            m = n.match(/(.)(.*)/);\n        }\n        if (m && m[2] && m[3]) {\n            m[1] = m[1] + m[2];\n            m[2] = \"\";\n        }\n        if (m && m[1].slice(0, 1) === m[1].slice(0, 1).toUpperCase()) {\n            var extra = \"\";\n            if (m[2]) {\n                var s = \"\";\n                lst = m[2].split(\"\");\n                for (j = 0, jlen = lst.length; j < jlen; j += 1) {\n                    var c = lst[j];\n                    if (c === c.toUpperCase()) {\n                        s += c;\n                    } else {\n                        break;\n                    }\n                }\n                if (s.length < m[2].length) {\n                    extra = CSL.toLocaleLowerCase.call(state, s);\n                }\n            }\n            namelist[i] = m[1] + extra;\n            if (i < (ilen - 1)) {\n                if (terminator.match(\"%s\")) {\n                    namelist[i] = terminator.replace(\"%s\", namelist[i]);\n                } else {\n                    if (namelist[i + 1].indexOf(\"-\") > -1) {\n                        namelist[i + 1] = this.mergetag(state, namelist[i+1].replace(\"-\", \"\"), terminator) + \"-\";\n                    } else {\n                        namelist[i + 1] = this.mergetag(state, namelist[i+1], terminator);\n                    }\n                }\n            } else {\n                if (terminator.match(\"%s\")) {\n                    namelist[i] = terminator.replace(\"%s\", namelist[i]);\n                } else {\n                    namelist.push(terminator);\n                }\n            }\n        } else if (n.match(CSL.ROMANESQUE_REGEXP) && (!m || !m[3])) {\n            namelist[i] = \" \" + n;\n        }\n    }\n    var ret = namelist.join(\"\");\n    ret = ret.replace(/[\\u0009\\u000a\\u000b\\u000c\\u000d\\u0020\\ufeff\\u00a0]+$/,\"\").replace(/\\s*\\-\\s*/g, \"-\").replace(/[\\u0009\\u000a\\u000b\\u000c\\u000d\\u0020]+/g, \" \");\n    return ret;\n};\n\nCSL.Util.Names.getRawName = function (name) {\n    var ret = [];\n    if (name.literal) {\n        ret.push(name.literal);\n    } else {\n        if (name.given) {\n            ret.push(name.given);\n        }\n        if (name.family) {\n            ret.push(name.family);\n        }\n    }\n    return ret.join(\" \");\n};\n\n/*global CSL: true */\n\n/**\n * Date mangling functions.\n * @namespace Date construction utilities\n */\nCSL.Util.Dates = {};\n\n/**\n * Year manglers\n * <p>short, long</p>\n */\nCSL.Util.Dates.year = {};\n\n/**\n * Convert year to long form\n * <p>This just passes the number back as a string.</p>\n */\nCSL.Util.Dates.year[\"long\"] = function (state, num) {\n    if (!num) {\n        if (\"boolean\" === typeof num) {\n            num = \"\";\n        } else {\n            num = 0;\n        }\n    }\n    return num.toString();\n};\n\n/**\n * Crudely convert to Japanese Imperial form.\n * <p>Returns the result as a string.</p>\n */\nCSL.Util.Dates.year.imperial = function (state, num, end) {\n    var year = \"\";\n    if (!num) {\n        if (\"boolean\" === typeof num) {\n            num = \"\";\n        } else {\n            num = 0;\n        }\n    }\n    end = end ? \"_end\" : \"\";\n    var month = state.tmp.date_object[\"month\" + end];\n    month = month ? \"\"+month : \"1\";\n    while (month.length < 2) {\n        month = \"0\" + month;\n    }\n    var day = state.tmp.date_object[\"day\" + end];\n    day = day ? \"\"+day : \"1\";\n    while (day.length < 2) {\n        day = \"0\" + day;\n    }\n    var date = parseInt(num + month + day, 10);\n    var label;\n    var offset;\n    if (date >= 18680908 && date < 19120730) {\n        label = '\\u660e\\u6cbb';\n        offset = 1867;\n    } else if (date >= 19120730 && date < 19261225) {\n        label = '\\u5927\\u6b63';\n        offset = 1911;\n    } else if (date >= 19261225 && date < 19890108) {\n        label = '\\u662d\\u548c';\n        offset = 1925;\n    } else if (date >= 19890108) {\n        label = '\\u5e73\\u6210';\n        offset = 1988;\n    }\n    // This entire \"imperial\" code block should be cut. Scraped input\n    // for this will be too ratty to be useful anyway.\n    if (label && offset) {\n        var normalizedKey = label;\n        if (state.sys.normalizeAbbrevsKey) {\n            // The first argument does not need to specify the exact variable\n            // name.\n            normalizedKey = state.sys.normalizeAbbrevsKey(\"number\", label);\n        }\n        if (!state.transform.abbrevs['default']['number'][normalizedKey]) {\n            // loadAbbreviation normally takes an item as fourth argument.\n            // It is not available here, \n            state.transform.loadAbbreviation('default', \"number\", normalizedKey, null);\n        }\n        if (state.transform.abbrevs['default']['number'][normalizedKey]) {\n            label = state.transform.abbrevs['default']['number'][normalizedKey];\n        }\n        year = label + (num - offset);\n    }\n    return year;\n};\n\n/**\n * Convert year to short form\n * <p>Just crops any 4-digit year to the last two digits.</p>\n */\nCSL.Util.Dates.year[\"short\"] = function (state, num) {\n    num = num.toString();\n    if (num && num.length === 4) {\n        return num.substr(2);\n    }\n};\n\n\n/**\n * Convert year to short form\n * <p>Just crops any 4-digit year to the last two digits.</p>\n */\nCSL.Util.Dates.year.numeric = function (state, num) {\n    var m, pre;\n    num = \"\" + num;\n    var m = num.match(/([0-9]*)$/);\n    if (m) {\n        pre = num.slice(0, m[1].length * -1);\n        num = m[1];\n    } else {\n        pre = num;\n        num = \"\";\n    }\n    while (num.length < 4) {\n        num = \"0\" + num;\n    }\n    return (pre + num);\n};\n\n\n/*\n * MONTH manglers\n * normalize\n * long, short, numeric, numeric-leading-zeros\n */\nCSL.Util.Dates.normalizeMonth = function (num, useSeason) {\n    var ret;\n    if (!num) {\n        num = 0;\n    }\n    num = \"\" + num;\n    if (!num.match(/^[0-9]+$/)) {\n        num = 0;\n    }\n    num = parseInt(num, 10);\n    if (useSeason) {\n        var res = {stub: \"month-\", num: num};\n        if (res.num < 1 || res.num > 24) {\n            res.num = 0;\n        } else {\n            while (res.num > 16) {\n                res.num = res.num - 4;\n            }\n            if (res.num > 12) {\n                res.stub = \"season-\";\n                res.num = res.num - 12;\n            }\n        }\n        ret = res;\n    } else {\n        if (num < 1 || num > 12) {\n            num = 0;\n        }\n        ret = num;\n    }\n    return ret;\n};\n\nCSL.Util.Dates.month = {};\n\n/**\n * Convert month to numeric form\n * <p>This just passes the number back as a string.</p>\n */\nCSL.Util.Dates.month.numeric = function (state, num) {\n    var num = CSL.Util.Dates.normalizeMonth(num);\n    if (!num) {\n        num = \"\";\n    }\n    return num;\n};\n\n/**\n * Convert month to numeric-leading-zeros form\n * <p>This just passes the number back as string padded with zeros.</p>\n */\nCSL.Util.Dates.month[\"numeric-leading-zeros\"] = function (state, num) {\n    var num = CSL.Util.Dates.normalizeMonth(num);\n    if (!num) {\n        num = \"\";\n    } else {\n        num = \"\" + num;\n        while (num.length < 2) {\n            num = \"0\" + num;\n        }\n    }\n    return num;\n};\n\n/**\n * Convert month to long form\n * <p>This passes back the month of the locale in long form.</p>\n */\n\n// Gender is not currently used. Is it needed?\n\nCSL.Util.Dates.month[\"long\"] = function (state, num, gender, forceDefaultLocale) {\n    var res = CSL.Util.Dates.normalizeMonth(num, true);\n    var num = res.num;\n    if (!num) {\n        num = \"\";\n    } else {\n        num = \"\" + num;\n        while (num.length < 2) {\n            num = \"0\" + num;\n        }\n        num = state.getTerm(res.stub + num, \"long\", 0, 0, false, forceDefaultLocale);\n    }\n    return num;\n};\n\n/**\n * Convert month to long form\n * <p>This passes back the month of the locale in short form.</p>\n */\n\n// See above.\n\nCSL.Util.Dates.month[\"short\"] = function (state, num, gender, forceDefaultLocale) {\n    var res = CSL.Util.Dates.normalizeMonth(num, true);\n    var num = res.num;\n    if (!num) {\n        num = \"\";\n    } else {\n        num = \"\" + num;\n        while (num.length < 2) {\n            num = \"0\" + num;\n        }\n        num = state.getTerm(res.stub + num, \"short\", 0, 0, false, forceDefaultLocale);\n    }\n    return num;\n};\n\n/*\n * DAY manglers\n * numeric, numeric-leading-zeros, ordinal\n */\nCSL.Util.Dates.day = {};\n\n/**\n * Convert day to numeric form\n * <p>This just passes the number back as a string.</p>\n */\nCSL.Util.Dates.day.numeric = function (state, num) {\n    return num.toString();\n};\n\nCSL.Util.Dates.day[\"long\"] = CSL.Util.Dates.day.numeric;\n\n/**\n * Convert day to numeric-leading-zeros form\n * <p>This just passes the number back as a string padded with zeros.</p>\n */\nCSL.Util.Dates.day[\"numeric-leading-zeros\"] = function (state, num) {\n    if (!num) {\n        num = 0;\n    }\n    num = num.toString();\n    while (num.length < 2) {\n        num = \"0\" + num;\n    }\n    return num.toString();\n};\n\n/**\n * Convert day to ordinal form\n * <p>This will one day pass back the number as a string with the\n * ordinal suffix appropriate to the locale.  For the present,\n * it just does what is most of the time right for English.</p>\n */\nCSL.Util.Dates.day.ordinal = function (state, num, gender) {\n    return state.fun.ordinalizer.format(num, gender);\n};\n\n/*global CSL: true */\n\n/**\n * Helper functions for constructing sort keys.\n * @namespace Sort key utilities\n */\nCSL.Util.Sort = {};\n\n/**\n * Strip prepositions from a string\n * <p>Used when generating sort keys.</p>\n */\nCSL.Util.Sort.strip_prepositions = function (str) {\n    var m;\n    if (\"string\" === typeof str) {\n        m = str.match(/^(([aA]|[aA][nN]|[tT][hH][eE])\\s+)/);\n    }\n    if (m) {\n        str = str.substr(m[1].length);\n    }\n    return str;\n};\n\n/*global CSL: true */\n\nCSL.Util.substituteStart = function (state, target) {\n    var element_trace, display, bib_first, func, choose_start, if_start, nodetypes;\n    func = function (state, Item, item) {\n        for (var i = 0, ilen = this.decorations.length; i < ilen; i += 1) {\n            if (\"@strip-periods\" === this.decorations[i][0] && \"true\" === this.decorations[i][1]) {\n                state.tmp.strip_periods += 1;\n                break;\n            }\n        }\n    };\n    this.execs.push(func);\n    if (this.decorations && state.opt.development_extensions.csl_reverse_lookup_support) {\n        this.decorations.reverse();\n        this.decorations.push([\"@showid\",\"true\", this.cslid]);\n        this.decorations.reverse();\n    }\n    //\n    // Contains body code for both substitute and first-field/remaining-fields\n    // formatting.\n    //\n\n    nodetypes = [\"number\", \"date\", \"names\"];\n    if ((\"text\" === this.name && !this.postponed_macro) || nodetypes.indexOf(this.name) > -1) {\n        element_trace = function (state, Item, item) {\n            if (state.tmp.element_trace.value() === \"author\" || \"names\" === this.name) {\n                if (!state.tmp.just_looking && item && item[\"author-only\"] && state.tmp.area !== \"intext\") {\n                    if (!state.tmp.probably_rendered_something) {\n                    } else {\n                        state.tmp.element_trace.push(\"suppress-me\");\n                    }\n                }\n                if (!state.tmp.just_looking && item && item[\"suppress-author\"]) {\n                    if (!state.tmp.probably_rendered_something) {\n                        state.tmp.element_trace.push(\"suppress-me\");\n                    }\n                }\n            }\n            else if (\"date\" === this.name) {\n                if (!state.tmp.just_looking && item && item[\"author-only\"] && state.tmp.area !== \"intext\") {\n                    if (state.tmp.probably_rendered_something) {\n                        state.tmp.element_trace.push(\"suppress-me\");\n                    }\n                }\n                /*\n                if (!state.tmp.just_looking && item && item[\"suppress-author\"]) {\n                    if (state.tmp.probably_rendered_something) {\n                        //state.tmp.element_trace.push(\"suppress-me\");\n                    }\n                }\n                */\n            } else {\n                if (!state.tmp.just_looking && item && item[\"author-only\"] && state.tmp.area !== \"intext\") {\n                    // XXX can_block_substitute probably is doing nothing here. The value is always true.\n                    if (!state.tmp.probably_rendered_something && state.tmp.can_block_substitute) {\n                    } else {\n                        state.tmp.element_trace.push(\"suppress-me\");\n                    }\n                } else if (item && item[\"suppress-author\"]) {\n                    state.tmp.element_trace.push(\"do-not-suppress-me\");\n                }\n            }\n        };\n        this.execs.push(element_trace);\n    }\n    display = this.strings.cls;\n    this.strings.cls = false;\n    if (state.build.render_nesting_level === 0) {\n        //\n        // The markup formerly known as @bibliography/first\n        //\n        // Separate second-field-align from the generic display logic.\n        // There will be some code replication, but not in the\n        // assembled style.\n        //\n        if (state.build.area === \"bibliography\" && state.bibliography.opt[\"second-field-align\"]) {\n            bib_first = new CSL.Token(\"group\", CSL.START);\n            bib_first.decorations = [[\"@display\", \"left-margin\"]];\n            func = function (state, Item) {\n                if (!state.tmp.render_seen) {\n                    bib_first.strings.first_blob = Item.id;\n                    state.output.startTag(\"bib_first\", bib_first);\n                }\n            };\n            bib_first.execs.push(func);\n            target.push(bib_first);\n        } else if (CSL.DISPLAY_CLASSES.indexOf(display) > -1) {\n            bib_first = new CSL.Token(\"group\", CSL.START);\n            bib_first.decorations = [[\"@display\", display]];\n            func = function (state, Item) {\n                bib_first.strings.first_blob = Item.id;\n                state.output.startTag(\"bib_first\", bib_first);\n            };\n            bib_first.execs.push(func);\n            target.push(bib_first);\n        }\n        state.build.cls = display;\n    }\n    state.build.render_nesting_level += 1;\n    // Should this be render_nesting_level, with the increment\n    // below? ... ?\n    if (state.build.substitute_level.value() === 1) {\n        //\n        // All top-level elements in a substitute environment get\n        // wrapped in conditionals.  The substitute_level variable\n        // is a stack, because spanned names elements (with their\n        // own substitute environments) can be nested inside\n        // a substitute environment.\n        //\n        // (okay, we use conditionals a lot more than that.\n        // we slot them in for author-only as well...)\n        choose_start = new CSL.Token(\"choose\", CSL.START);\n        CSL.Node.choose.build.call(choose_start, state, target);\n        if_start = new CSL.Token(\"if\", CSL.START);\n        //\n        // Set a test of the shadow if token to skip this\n        // macro if we have acquired a name value.\n\n        // check for variable\n        func = function () {\n            if (state.tmp.can_substitute.value()) {\n                return true;\n            }\n            return false;\n        };\n        if_start.tests ? {} : if_start.tests = [];\n        if_start.tests.push(func);\n        if_start.test = state.fun.match.any(this, state, if_start.tests);\n        target.push(if_start);\n    }\n\n    if (state.sys.variableWrapper\n        && this.variables_real\n        && this.variables_real.length) {\n\n        func = function (state, Item, item) {\n            if (!state.tmp.just_looking && !state.tmp.suppress_decorations) {\n                // Attach item data and variable names.\n                // Do with them what you will.\n                var variable_entry = new CSL.Token(\"text\", CSL.START);\n                variable_entry.decorations = [[\"@showid\", \"true\"]];\n                state.output.startTag(\"variable_entry\", variable_entry);\n                var position = null;\n                if (item) {\n                    position = item.position;\n                }\n                if (!position) {\n                    position = 0;\n                }\n                var positionMap = [\n                    \"first\",\n                    \"container-subsequent\",\n                    \"subsequent\",\n                    \"ibid\",\n                    \"ibid-with-locator\"\n                ];\n                var noteNumber = 0;\n                if (item && item.noteIndex) {\n                    noteNumber = item.noteIndex;\n                }\n                var firstReferenceNoteNumber = 0;\n                if (item && item['first-reference-note-number']) {\n                    firstReferenceNoteNumber = item['first-reference-note-number'];\n                }\n                var firstContainerReferenceNoteNumber = 0;\n                if (item && item['first-container-reference-note-number']) {\n                    firstContainerReferenceNoteNumber = item['first-container-reference-note-number'];\n                }\n                var citationNumber = 0;\n                // XXX Will this EVER happen?\n                if (item && item['citation-number']) {\n                    citationNumber = item['citation-number'];\n                }\n                var index = 0;\n                if (item && item.index) {\n                    index = item.index;\n                }\n                var params = {\n                    itemData: Item,\n                    variableNames: this.variables,\n                    context: state.tmp.area,\n                    xclass: state.opt.xclass,\n                    position: positionMap[position],\n                    \"note-number\": noteNumber,\n                    \"first-reference-note-number\": firstReferenceNoteNumber,\n                    \"first-container-reference-note-number\": firstContainerReferenceNoteNumber,\n                    \"citation-number\": citationNumber,\n                    \"index\": index,\n                    \"mode\": state.opt.mode\n                };\n                state.output.current.value().params = params;\n            }\n        };\n        this.execs.push(func);\n    }\n};\n\n\nCSL.Util.substituteEnd = function (state, target) {\n    var func, bib_first_end, bib_other, if_end, choose_end, author_substitute, str;\n\n    if (state.sys.variableWrapper\n        && (this.hasVariable || (this.variables_real && this.variables_real.length))) {\n        \n        func = function (state) {\n            if (!state.tmp.just_looking && !state.tmp.suppress_decorations) {\n                state.output.endTag(\"variable_entry\");\n            }\n        };\n        this.execs.push(func);\n    }\n\n    func = function (state) {\n        for (var i = 0, ilen = this.decorations.length; i < ilen; i += 1) {\n            if (\"@strip-periods\" === this.decorations[i][0] && \"true\" === this.decorations[i][1]) {\n                state.tmp.strip_periods += -1;\n                break;\n            }\n        }\n    };\n    this.execs.push(func);\n\n    state.build.render_nesting_level += -1;\n    if (state.build.render_nesting_level === 0) {\n        if (state.build.cls) {\n            func = function (state) {\n                state.output.endTag(\"bib_first\");\n            };\n            this.execs.push(func);\n            state.build.cls = false;\n        } else if (state.build.area === \"bibliography\" && state.bibliography.opt[\"second-field-align\"]) {\n            bib_first_end = new CSL.Token(\"group\", CSL.END);\n            // first func end\n            func = function (state) {\n                if (!state.tmp.render_seen) {\n                    state.output.endTag(\"bib_first\"); // closes bib_first\n                }\n            };\n            bib_first_end.execs.push(func);\n            target.push(bib_first_end);\n            bib_other = new CSL.Token(\"group\", CSL.START);\n            bib_other.decorations = [[\"@display\", \"right-inline\"]];\n            func = function (state) {\n                if (!state.tmp.render_seen) {\n                    state.tmp.render_seen = true;\n                    state.output.startTag(\"bib_other\", bib_other);\n                }\n            };\n            bib_other.execs.push(func);\n            target.push(bib_other);\n        }\n    }\n    if (state.build.substitute_level.value() === 1) {\n        if_end = new CSL.Token(\"if\", CSL.END);\n        target.push(if_end);\n        choose_end = new CSL.Token(\"choose\", CSL.END);\n        CSL.Node.choose.build.call(choose_end, state, target);\n    }\n\n    if (\"names\" === this.name || (\"text\" === this.name && this.variables_real !== \"title\")) {\n        author_substitute = new CSL.Token(\"text\", CSL.SINGLETON);\n        var substitution_name = this.name;\n        func = function (state, Item) {\n            if (state.tmp.area !== \"bibliography\") {\n                return;\n            }\n            if (\"string\" !== typeof state.bibliography.opt[\"subsequent-author-substitute\"]) {\n                return;\n            }\n            if (this.variables_real && !Item[this.variables_real]) {\n                return;\n            }\n            // The logic of these two is not obvious. The effect is to enable placeholder substitution\n            // on a text macro name substitution, without printing both the text macro AND the placeholder.\n            // See https://forums.zotero.org/discussion/comment/350407\n            if (this.variables_real && substitution_name === \"names\") {\n                return;\n            }\n\n            var subrule = state.bibliography.opt[\"subsequent-author-substitute-rule\"];\n            var i, ilen;\n            //var text_esc = CSL.getSafeEscape(state);\n            var printing = !state.tmp.suppress_decorations;\n            if (printing && state.tmp.subsequent_author_substitute_ok) {\n                if (state.tmp.rendered_name) {\n                    if (\"partial-each\" === subrule || \"partial-first\" === subrule) {\n                        var dosub = true;\n                        var rendered_name = [];\n                        // This is a wee bit risky, as we're assuming that the name\n                        // children and the list of stringified names are congruent.\n                        // That *should* always be true, but you never know.\n                        for (i = 0, ilen = state.tmp.name_node.children.length; i < ilen; i += 1) {\n                            var name = state.tmp.rendered_name[i];\n                            if (dosub\n                                && state.tmp.last_rendered_name && state.tmp.last_rendered_name.length > (i - 1)\n                                && name && !name.localeCompare(state.tmp.last_rendered_name[i])) {\n                                str = new CSL.Blob(state[state.tmp.area].opt[\"subsequent-author-substitute\"]);\n                                state.tmp.name_node.children[i].blobs = [str];\n                                if (\"partial-first\" === subrule) {\n                                    dosub = false;\n                                }\n                            } else {\n                                dosub = false;\n                            }\n                            rendered_name.push(name);\n                        }\n                        // might want to slice this?\n                        state.tmp.last_rendered_name = rendered_name;\n                    } else if (\"complete-each\" === subrule) {\n                        var rendered_name = state.tmp.rendered_name.join(\",\");\n                        if (rendered_name) {\n                            if (state.tmp.last_rendered_name && !rendered_name.localeCompare(state.tmp.last_rendered_name)) {\n                                for (i = 0, ilen = state.tmp.name_node.children.length; i < ilen; i += 1) {\n                                    str = new CSL.Blob(state[state.tmp.area].opt[\"subsequent-author-substitute\"]);\n                                    state.tmp.name_node.children[i].blobs = [str];\n                                }\n                            }\n                            state.tmp.last_rendered_name = rendered_name;\n                        }\n                    } else {\n                        var rendered_name = state.tmp.rendered_name.join(\",\");\n                        if (rendered_name) {\n                            if (state.tmp.last_rendered_name && !rendered_name.localeCompare(state.tmp.last_rendered_name)) {\n                                str = new CSL.Blob(state[state.tmp.area].opt[\"subsequent-author-substitute\"]);\n                                if (state.tmp.label_blob) {\n                                    state.tmp.name_node.top.blobs = [str,state.tmp.label_blob];\n                                } else if (state.tmp.name_node.top.blobs.length) {\n                                    state.tmp.name_node.top.blobs[0].blobs = [str];\n                                } else {\n                                    state.tmp.name_node.top.blobs = [str];\n                                }\n                                state.tmp.substituted_variable = substitution_name;\n                            }\n                            state.tmp.last_rendered_name = rendered_name;\n                        }\n                    }\n                    state.tmp.subsequent_author_substitute_ok = false;\n                }\n            }\n        };\n        this.execs.push(func);\n    }\n\n    if ((\"text\" === this.name && !this.postponed_macro) || [\"number\", \"date\", \"names\"].indexOf(this.name) > -1) {\n        // element trace\n        func = function (state, Item) {\n            // element_trace is a mess, but it's trying to do something simple.\n            // A queue append is done, and element_trace.value() returns \"suppress-me\"\n            // the append is aborted. That's it.\n            // It seems only to be used on numeric elements of numeric styles ATM.\n            // If used only for that purpose, it could be greatly simplified.\n            // If cleaned up, it could do more interesting things, like control\n            // the suppression of names set later than first position.\n            if (state.tmp.element_trace.mystack.length>1) {\n                state.tmp.element_trace.pop();\n            }\n        };\n        this.execs.push(func);\n    }\n};\n\n/*global CSL: true */\n\nCSL.Util.padding = function (num) {\n    var m = num.match(/\\s*(-{0,1}[0-9]+)/);\n    if (m) {\n        num = parseInt(m[1], 10);\n        if (num < 0) {\n            num = 99999999999999999999 + num;\n        }\n        num = \"\" + num;\n        while (num.length < 20) {\n            num = \"0\" + num;\n        }\n    }\n    return num;\n};\n\nCSL.Util.LongOrdinalizer = function () {};\n\nCSL.Util.LongOrdinalizer.prototype.init = function (state) {\n    this.state = state;\n};\n\nCSL.Util.LongOrdinalizer.prototype.format = function (num, gender) {\n    if (num < 10) {\n        num = \"0\" + num;\n    }\n    // Argument true means \"loose\".\n    var ret = CSL.Engine.getField(\n        CSL.LOOSE, \n        this.state.locale[this.state.opt.lang].terms,\n        \"long-ordinal-\" + num,\n        \"long\", \n        0, \n        gender\n    );\n    if (!ret) {\n        ret = this.state.fun.ordinalizer.format(num, gender);\n    }\n    // Probably too optimistic -- what if only renders in _sort?\n    this.state.tmp.cite_renders_content = true;\n    return ret;\n};\n\n\nCSL.Util.Ordinalizer = function (state) {\n    this.state = state;\n    this.suffixes = {};\n};\n\nCSL.Util.Ordinalizer.prototype.init = function () {\n    if (!this.suffixes[this.state.opt.lang]) {\n        this.suffixes[this.state.opt.lang] = {};\n        for (var i = 0, ilen = 3; i < ilen; i += 1) {\n            var gender = [undefined, \"masculine\", \"feminine\"][i];\n            this.suffixes[this.state.opt.lang][gender] = [];\n            for (var j = 1; j < 5; j += 1) {\n                var ordinal = this.state.getTerm(\"ordinal-0\" + j, \"long\", false, gender);\n                if (\"undefined\" === typeof ordinal) {\n                    delete this.suffixes[this.state.opt.lang][gender];\n                    break;\n                }\n                this.suffixes[this.state.opt.lang][gender].push(ordinal);\n            }\n        }\n    }\n};\n\nCSL.Util.Ordinalizer.prototype.format = function (num, gender) {\n    var str;\n    num = parseInt(num, 10);\n    str = \"\" + num;\n    var suffix = \"\";\n    var trygenders = [];\n    if (gender) {\n        trygenders.push(gender);\n    }\n    trygenders.push(\"neuter\");\n    if (this.state.locale[this.state.opt.lang].ord[\"1.0.1\"]) {\n        suffix = this.state.getTerm(\"ordinal\",false,0,gender);\n        var trygender;\n        for (var i = 0, ilen = trygenders.length; i < ilen; i += 1) {\n            trygender = trygenders[i];\n            var ordinfo = this.state.locale[this.state.opt.lang].ord[\"1.0.1\"];\n            if (ordinfo[\"whole-number\"][str] && ordinfo[\"whole-number\"][str][trygender]) {\n                suffix = this.state.getTerm(this.state.locale[this.state.opt.lang].ord[\"1.0.1\"][\"whole-number\"][str][trygender],false,0,gender);\n            } else if (ordinfo[\"last-two-digits\"][str.slice(str.length - 2)] && ordinfo[\"last-two-digits\"][str.slice(str.length - 2)][trygender]) {\n                suffix = this.state.getTerm(this.state.locale[this.state.opt.lang].ord[\"1.0.1\"][\"last-two-digits\"][str.slice(str.length - 2)][trygender],false,0,gender);\n            } else if (ordinfo[\"last-digit\"][str.slice(str.length - 1)] && ordinfo[\"last-digit\"][str.slice(str.length - 1)][trygender]) {\n                suffix = this.state.getTerm(this.state.locale[this.state.opt.lang].ord[\"1.0.1\"][\"last-digit\"][str.slice(str.length - 1)][trygender],false,0,gender);\n            }\n            if (suffix) {\n                break;\n            }\n        }\n    } else {\n        if (!gender) {\n            // XXX hack to prevent crash on CSL 1.0 styles.\n            // Reported by Carles.\n            gender = undefined;\n        }\n        this.state.fun.ordinalizer.init();\n        if ((num / 10) % 10 === 1 || (num > 10 && num < 20)) {\n            suffix = this.suffixes[this.state.opt.lang][gender][3];\n        } else if (num % 10 === 1 && num % 100 !== 11) {\n            suffix = this.suffixes[this.state.opt.lang][gender][0];\n        } else if (num % 10 === 2 && num % 100 !== 12) {\n            suffix = this.suffixes[this.state.opt.lang][gender][1];\n        } else if (num % 10 === 3 && num % 100 !== 13) {\n            suffix = this.suffixes[this.state.opt.lang][gender][2];\n        } else {\n            suffix = this.suffixes[this.state.opt.lang][gender][3];\n        }\n    }\n    str = str += suffix;\n    return str;\n};\n\nCSL.Util.Romanizer = function () {};\n\nCSL.Util.Romanizer.prototype.format = function (num) {\n    var ret, pos, n, numstr, len;\n    ret = \"\";\n    if (num < 6000) {\n        numstr = num.toString().split(\"\");\n        numstr.reverse();\n        pos = 0;\n        n = 0;\n        len = numstr.length;\n        for (pos = 0; pos < len; pos += 1) {\n            n = parseInt(numstr[pos], 10);\n            ret = CSL.ROMAN_NUMERALS[pos][n] + ret;\n        }\n    }\n    return ret;\n};\n\n\n/**\n * Create a suffix formed from a list of arbitrary characters of arbitrary length.\n * <p>This is a <i>lot</i> harder than it seems.</p>\n */\nCSL.Util.Suffixator = function (slist) {\n    if (!slist) {\n        slist = CSL.SUFFIX_CHARS;\n    }\n    this.slist = slist.split(\",\");\n};\n\n/**\n * The format method.\n * <p>This method is used in generating ranges.  Every numeric\n * formatter (of which Suffixator is one) must be an instantiated\n * object with such a \"format\" method.</p>\n */\n\nCSL.Util.Suffixator.prototype.format = function (N) {\n    // Many thanks to Avram Lyon for this code, and good\n    // riddance to the several functions that it replaces.\n    var X;\n    N += 1;\n    var key = \"\";\n    do {\n        X = ((N % 26) === 0) ? 26 : (N % 26);\n        var key = this.slist[X-1] + key;\n        N = (N - X) / 26;\n    } while ( N !== 0 );\n    return key;\n};\n\n\nCSL.Engine.prototype.processNumber = function (node, ItemObject, variable) {\n    //print(\"** processNumber() ItemObject[variable]=\"+ItemObject[variable]);\n    var val;\n\n    var me = this;\n\n    var realVariable = variable;\n    variable = (variable === \"page-first\") ? \"page\" : variable;\n\n    var fullformAnd = \",\\\\s+and\\\\s+|\\\\s+and\\\\s+\";\n    if (this.opt.lang.slice(0, 2) !== \"en\") {\n        fullformAnd += \"|,\\\\s+\" + this.getTerm(\"and\") + \"\\\\s+|\\\\s+\" + this.getTerm(\"and\") + \"\\\\s+\";\n    }\n    var symbolAnd = \"\\\\s*&\\\\s*\";\n    var andRex = new RegExp(\"^\" + symbolAnd+ \"$\");\n    var joinerMatchRex = new RegExp(\"(\" + symbolAnd + \"|\" + fullformAnd + \"|;\\\\s+|,\\\\s+|\\\\s*\\\\\\\\*[\\\\-\\\\u2013]+\\\\s*)\", \"g\");\n    var joinerSplitRex = new RegExp(\"(?:\" + symbolAnd + \"|\" + fullformAnd + \"|;\\\\s+|,\\\\s+|\\\\s*\\\\\\\\*[\\\\-\\\\u2013]+\\\\s*)\");\n\n    // This guesses whether the symbol form is defined or not.\n    // It's the best we can do, because when locales are built, all of the\n    // holes are filled explictly with fallback values: the symbol form is never undefined.\n    var localeAnd = this.getTerm(\"and\");\n    var localeAmpersand = this.getTerm(\"and\", \"symbol\");\n    if (localeAnd === localeAmpersand) {\n        localeAmpersand = \"&\";\n    }\n\n    // XXXX shadow_numbers should carry an array of objects with\n    // XXXX full data for each. The test of a number should be\n    // XXXX a separate function, possibly supported by a splitter\n    // XXXX method also used here. Keep code for each action in one place,\n    // XXXX to prevent debugging from becoming a nightmare.\n\n    // The capture pattern below would apply affixes to all sub-elements,\n    // which is not what we want. Sub-elements should nest within, or\n    // affixes should be edited. The latter is probably easier to handle.\n    \n    // values = [\n    //   {\n    //     label: \"sec.\",\n    //     label-form: \"plural\",\n    //     value: 100,\n    //     styling: [object],\n    //     numeric: true\n    //     joiningSuffix: \" & \",\n    //   },\n    //   {\n    //     label: \"sec.\",\n    //     label-form: \"none\",\n    //     value: 103,\n    //     styling: [object],\n    //     numeric: true,\n    //     joiningSuffix: \"\"\n    //   }\n    // ]\n    \n    function normalizeFieldValue(str) {\n        str = str.trim();\n        var m = str.match(/^([^ ]+)/);\n        if (m && !CSL.STATUTE_SUBDIV_STRINGS[m[1]]) {\n            var embeddedLabel = null;\n            if ([\"locator\", \"locator-extra\", \"page\"].indexOf(variable) > -1) {\n                if (ItemObject.label) {\n                    embeddedLabel = CSL.STATUTE_SUBDIV_STRINGS_REVERSE[ItemObject.label];\n                } else {\n                    embeddedLabel = \"p.\";\n                }\n            } else {\n                embeddedLabel = CSL.STATUTE_SUBDIV_STRINGS_REVERSE[variable];\n            }\n            if (embeddedLabel) {\n                str = embeddedLabel + \" \" + str;\n            }\n        }\n        return str;\n    }\n    \n\n    function composeNumberInfo(origLabel, label, val, joiningSuffix, parsePosition) {\n        joiningSuffix = joiningSuffix ? joiningSuffix : \"\";\n        var info = {};\n\n        if (!label && !CSL.STATUTE_SUBDIV_STRINGS_REVERSE[variable]) {\n            label = \"var:\"+ variable;\n        }\n\n        if (label) {\n            var m = label.match(/(\\s*)([^\\s]+)(\\s*)/);\n            if (realVariable === \"page\" && parsePosition === 0 && [\"p.\", \"pp.\"].indexOf(m[2]) === -1) {\n                info.gotosleepability = true;\n                info.labelVisibility = true;\n            } else {\n                info.labelVisibility = false;\n            }\n            info.label = m[2];\n            info.origLabel = origLabel;\n            info.labelSuffix = m[3] ? m[3] : \"\";\n            info.plural = 0;\n        }\n        \n        var m = val.match(/^([0-9]*[a-zA-Z]+0*)?([0-9]+(?:[a-zA-Z]*|[-,a-zA-Z]+))$/);\n        //var m = val.match(/^([0-9]*[a-zA-Z]0*)([0-9]+(?:[a-zA-Z]*|[-,a-zA-Z]+))$/);\n        if (m) {\n            info.particle = m[1] ? m[1] : \"\";\n            info.value = m[2];\n        } else {\n            info.particle = \"\";\n            info.value = val;\n        }\n        info.joiningSuffix = joiningSuffix.replace(/\\s*-\\s*/, \"-\");\n        return info;\n    }\n\n    function fixupSubsections(elems) {\n        // This catches things like p. 12a-c, recombining content to yield\n        // numeric true despite the hyphen.\n        for (var i=elems.length-2;i>-1;i-=2) {\n            if (elems[i] === \"-\"\n               && elems[i-1].match(/^(?:(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\\.  *)*[0-9]+[,a-zA-Z]+$/)\n               && elems[i+1].match(/^[,a-zA-Z]+$/)) {\n                elems[i-1] = elems.slice(i-1,i+2).join(\"\");\n                elems = elems.slice(0,i).concat(elems.slice(i+2));\n            }\n        }\n        return elems;\n    }\n\n    function parseString(str, defaultLabel) {\n        defaultLabel = defaultLabel ? defaultLabel : \"\";\n        \n        str = normalizeFieldValue(str, defaultLabel);\n\n        var jmrex, jsrex, mystr;\n        if (\"page\" === variable) {\n            if (str.indexOf(\"\\u2013\") > -1) {\n                str = str.replace(/\\u2013/g, \"-\");\n            }\n        }\n        if (str.indexOf(\"\\\\-\") > -1) {\n            jmrex = new RegExp(joinerMatchRex.source.replace(\"\\\\-\", \"\"));\n            jsrex = new RegExp(joinerSplitRex.source.replace(\"\\\\-\", \"\"));\n            var lst = str.split(\"\\\\-\");\n            for (var i=0,ilen=lst.length;i<ilen;i++) {\n                lst[i] = lst[i].replace(/\\-/g, \"\\u2013\");\n            }\n            mystr = lst.join(\"\\\\-\");\n            mystr = mystr.replace(/\\\\/g, \"\");\n        } else {\n            jmrex = joinerMatchRex;\n            jsrex = joinerSplitRex;\n            mystr = str;\n        }\n        // jmrex = joinerMatchRex;\n        // jsrex = joinerSplitRex;\n        \n        // Split chunks and collate delimiters.\n        var elems = [];\n        var m = mystr.match(jmrex);\n        if (m) {\n            var lst = mystr.split(jsrex);\n            for (var i=0, ilen=m.length; i<ilen; i++) {\n                if (m[i].match(andRex)) {\n                    if (lst[i].match(/[a-zA-Z]$/) && lst[i].match(/^[a-zA-Z]/)) {\n                        m[i] = localeAmpersand;\n                    } else {\n                        m[i] = \" \" + localeAmpersand + \" \";\n                    }\n                }\n            }\n            var recombine = false;\n            for (var i in lst) {\n                if ((\"\" + lst[i]).replace(/^[a-z]\\.\\s+/, \"\").match(/[^\\s0-9ivxlcmIVXLCM]/)) {\n                    //recombine = true;\n                    break;\n                }\n            }\n            if (recombine) {\n                elems = [mystr];\n            } else {\n                for (var i=0,ilen=lst.length-1; i<ilen; i++) {\n                    elems.push(lst[i]);\n                    elems.push(m[i]);\n                }\n                elems.push(lst[lst.length-1]);\n                //print(\"ELEMS: \"+elems);\n                elems = fixupSubsections(elems);\n                //print(\"  fixup: \"+elems);\n            }\n        } else {\n            var elems = [mystr];\n        }\n        // Split elements within each chunk build list of value objects.\n        var values = [];\n        var label = defaultLabel;\n        var origLabel = \"\";\n        for (var i=0,ilen=elems.length;i<ilen;i += 2) {\n            \n            // AHA! HERE'S THE CULPRIT!!!\n            // Words up to four characters are treated as honorary short-form labels.\n            // Some valid labels are longer than four chars, so we stir those in explicitly\n            \n            var m = elems[i].match(/((?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\\.| ) *)/g);\n            if (m) {\n                var lst = elems[i].split(/(?:(?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\\.| ) *)/);\n                // Head off disaster by merging parsed labels on non-numeric values into content\n                for (var j=lst.length-1;j>0;j--) {\n                    if (lst[j-1] && (!lst[j].match(/^[0-9]+([-;,:a-zA-Z]*)$/) || !lst[j-1].match(/^[0-9]+([-;,:a-zA-Z]*)$/))) {\n                        lst[j-1] = lst[j-1] + m[j-1] + lst[j];\n                        lst = lst.slice(0,j).concat(lst.slice(j+1));\n                        m = m.slice(0,j-1).concat(m.slice(j));\n                    }\n                }\n                // merge bad leading label into content\n                if (m.length > 0) {\n                    var slug = m[0].trim();\n                    var notAlabel = !CSL.STATUTE_SUBDIV_STRINGS[slug]\n                        || \"undefined\" === typeof me.getTerm(CSL.STATUTE_SUBDIV_STRINGS[slug])\n                        || ([\"locator\", \"number\", \"locator-extra\", \"page\"].indexOf(variable) === -1 && CSL.STATUTE_SUBDIV_STRINGS[slug] !== variable);\n                    if (notAlabel) {\n                        if (i === 0) {\n                            m = m.slice(1);\n                            lst[0] = lst[0] + \" \" + slug + \" \" + lst[1];\n                            lst = lst.slice(0,1).concat(lst.slice(2));\n                        }\n                    } else {\n                        origLabel = slug;\n                    }\n                }\n\n                for (var j=0,jlen=lst.length; j<jlen; j++) {\n                    if (lst[j] || j === (lst.length-1)) {\n                        var filteredOrigLabel;\n                        label = m[j-1] ? m[j-1] : label;\n                        if (origLabel === label.trim()) {\n                            filteredOrigLabel = \"\";\n                        } else {\n                            filteredOrigLabel = origLabel;\n                        }\n                        //var origLabel = j > 1 ? m[j-1] : \"\";\n                        mystr = lst[j] ? lst[j].trim() : \"\";\n                        if (j === (lst.length-1)) {\n                            values.push(composeNumberInfo(filteredOrigLabel, label, mystr, elems[i+1], i));\n                        } else {\n                            values.push(composeNumberInfo(filteredOrigLabel, label, mystr, null, i));\n                        }\n                    }\n                }\n            } else {\n                var filteredOrigLabel;\n                if (origLabel === label.trim()) {\n                    filteredOrigLabel = \"\";\n                } else {\n                    filteredOrigLabel = origLabel;\n                }\n                values.push(composeNumberInfo(filteredOrigLabel, label, elems[i], elems[i+1]));\n            }\n        }\n        return values;\n    }\n\n    function setSpaces(values) {\n        // Add space joins (is this really right?)\n        for (var i=0,ilen=values.length-1;i<ilen;i++) {\n            if (!values[i].joiningSuffix && values[i+1].label) {\n                values[i].joiningSuffix = \" \";\n            }\n        }\n    }\n\n    function fixNumericAndCount(values, i, currentLabelInfo) {\n        var master = values[currentLabelInfo.pos];\n        var val = values[i].value;\n        var isEscapedHyphen = master.joiningSuffix === \"\\\\-\";\n        if (val.particle && val.particle !== master.particle) {\n            currentLabelInfo.collapsible = false;\n        }\n        var mVal = val.match(/^[0-9]+([-,:a-zA-Z]*)$/);\n        var mCurrentLabel = master.value.match(/^(?:[0-9]+|[ixv]+)([-,:a-zA-Z]*|\\-[\\-0-9]+)$/);\n        if (!val || !mVal || !mCurrentLabel || isEscapedHyphen) {\n            currentLabelInfo.collapsible = false;\n            if (!val || !mCurrentLabel) {\n                currentLabelInfo.numeric = false;\n            }\n            if (isEscapedHyphen) {\n                currentLabelInfo.count--;\n            }\n        }\n        if ((mVal && mVal[1]) || (mCurrentLabel && mCurrentLabel[1])) {\n            currentLabelInfo.collapsible = false;\n        }\n        if (undefined === values[i].collapsible) {\n            for (var j=i,jlen=i+currentLabelInfo.count;j<jlen;j++) {\n                if (isNaN(parseInt(values[j].value)) && !values[j].value.match(/^[ivxlcmIVXLCM]+$/)) {\n                    values[j].collapsible = false;\n                } else {\n                    values[j].collapsible = true;\n                }\n            }\n            currentLabelInfo.collapsible = values[i].collapsible;\n        }\n        var isCollapsible = currentLabelInfo.collapsible;\n        for (var j=currentLabelInfo.pos,jlen=(currentLabelInfo.pos + currentLabelInfo.count); j<jlen; j++) {\n            if (currentLabelInfo.count > 1 && isCollapsible) {\n                values[j].plural = 1;\n            }\n            values[j].numeric = currentLabelInfo.numeric;\n            values[j].collapsible = currentLabelInfo.collapsible;\n        }\n    }\n\n    function fixLabelVisibility(values, groupStartPos, currentLabelInfo) {\n        if (currentLabelInfo.label.slice(0, 4) !== \"var:\") {\n            if (currentLabelInfo.pos === 0) {\n                if ([\"locator\", \"number\", \"locator-extra\", \"page\"].indexOf(variable) > -1) {\n                    // Actually, shouldn't we do this always?\n                    if (\"undefined\" === typeof me.getTerm(CSL.STATUTE_SUBDIV_STRINGS[currentLabelInfo.label])) {\n                        values[currentLabelInfo.pos].labelVisibility = true;\n                    }\n                }\n                // If there is an explicit\n                // label embedded at the start of a field that\n                // does not match the context, it should be\n                // marked for rendering.\n                if ([\"locator\", \"number\", \"locator-extra\", \"page\"].indexOf(variable) === -1) {\n                    if (CSL.STATUTE_SUBDIV_STRINGS[currentLabelInfo.label] !== variable) {\n                        values[0].labelVisibility = true;\n                    }\n                }\n            } else {\n                // Also, mark initial mid-field labels for\n                // rendering.\n                //if (values[i-1].label !== values[i].label && currentLabelInfo.label.slice(0, 4) !== \"var:\") {\n                values[currentLabelInfo.pos].labelVisibility = true;\n                //}\n            }\n        }\n    }\n    \n    function setPluralsAndNumerics(values) {\n        if (values.length === 0) {\n            return;\n        }\n        var groupStartPos = 0;\n        var groupCount = 1;\n        \n        for (var i=1,ilen=values.length;i<ilen;i++) {\n            var lastVal = values[i-1];\n            var thisVal = values[i];\n            if (lastVal.label === thisVal.label && lastVal.particle === lastVal.particle) {\n                groupCount++;\n            } else {\n                var currentLabelInfo = JSON.parse(JSON.stringify(values[groupStartPos]));\n                currentLabelInfo.pos = groupStartPos;\n                currentLabelInfo.count = groupCount;\n                currentLabelInfo.numeric = true;\n                fixNumericAndCount(values, groupStartPos, currentLabelInfo);\n                if (lastVal.label !== thisVal.label) {\n                    fixLabelVisibility(values, groupStartPos, currentLabelInfo);\n                }\n                groupStartPos = i;\n                groupCount = 1;\n            }\n        }\n        // Not sure why this repetition is necessary?\n        var currentLabelInfo = JSON.parse(JSON.stringify(values[groupStartPos]));\n        currentLabelInfo.pos = groupStartPos;\n        currentLabelInfo.count = groupCount;\n        currentLabelInfo.numeric = true;\n        fixNumericAndCount(values, groupStartPos, currentLabelInfo);\n        fixLabelVisibility(values, groupStartPos, currentLabelInfo);\n        if (values.length && values[0].numeric && variable.slice(0, 10) === \"number-of-\") {\n            if (parseInt(ItemObject[realVariable], 10) > 1) {\n                values[0].plural = 1;\n            }\n        }\n    }        \n\n    function stripHyphenBackslash(joiningSuffix) {\n        return joiningSuffix.replace(\"\\\\-\", \"-\");\n    }\n\n    function setStyling(values) {\n        var masterNode = CSL.Util.cloneToken(node);\n        var masterStyling = new CSL.Token();\n        if (!me.tmp.just_looking) {\n            // Per discussion @ https://discourse.citationstyles.org/t/formatting-attributes-and-hyphen/1518\n            masterStyling.decorations = masterNode.decorations;\n            masterNode.decorations = [];\n            //for (var j=masterNode.decorations.length-1;j>-1;j--) {\n            //    if (masterNode.decorations[j][0] === \"@quotes\") {\n            //        // Add to styling\n            //        masterStyling.decorations = masterStyling.decorations.concat(masterNode.decorations.slice(j, j+1));\n            //        // Remove from node\n            //        masterNode.decorations = masterNode.decorations.slice(0, j).concat(masterNode.decorations.slice(j+1));\n            //    }\n            //}\n            masterStyling.strings.prefix = masterNode.strings.prefix;\n            masterNode.strings.prefix = \"\";\n            masterStyling.strings.suffix = masterNode.strings.suffix;\n            masterNode.strings.suffix = \"\";\n        }\n        var masterLabel = values.length ? values[0].label : null;\n        if (values.length) {\n            for (var i=0,ilen=values.length; i<ilen; i++) {\n                var val = values[i];\n                // Clone node, make styling parameters on each instance sane.\n                var newnode = CSL.Util.cloneToken(masterNode);\n                newnode.gender = node.gender;\n                if (masterLabel === val.label) {\n                    newnode.formatter = node.formatter;\n                }\n                if (val.numeric) {\n                    newnode.successor_prefix = val.successor_prefix;\n                }\n                newnode.strings.suffix = newnode.strings.suffix + stripHyphenBackslash(val.joiningSuffix);\n                val.styling = newnode;\n            }\n            if (!me.tmp.just_looking) {\n                if (values[0].value.slice(0,1) === \"\\\"\" && values[values.length-1].value.slice(-1) === \"\\\"\") {\n                    values[0].value = values[0].value.slice(1);\n                    values[values.length-1].value = values[values.length-1].value.slice(0,-1);\n                    masterStyling.decorations.push([\"@quotes\", true]);\n                }\n            }\n        }\n        return masterStyling;\n    }\n\n    function checkTerm(variable, val) {\n        var ret = true;\n        if ([\"locator\", \"locator-extra\", \"page\"].indexOf(variable) > -1) {\n            var label;\n            if (val.origLabel) {\n                label = val.origLabel;\n            } else {\n                label = val.label;\n            }\n            ret = !!me.getTerm(CSL.STATUTE_SUBDIV_STRINGS[label]);\n        }\n        return ret;\n    }\n\n    function checkPage(variable, val) {\n        return \"page\" === variable\n            || ([\"locator\", \"locator-extra\"].indexOf(variable) > -1 && ([\"p.\"].indexOf(val.label) > -1 || [\"p.\"].indexOf(val.origLabel) > -1));\n    }\n    \n    function fixupRangeDelimiter(variable, val, rangeDelimiter, isNumeric) {\n        var isPage = checkPage(variable, val);\n        var hasTerm = checkTerm(variable, val);\n        if (hasTerm && rangeDelimiter === \"-\") {\n            if (isNumeric) {\n                if (isPage || [\"locator\", \"locator-extra\", \"issue\", \"volume\", \"edition\", \"number\"].indexOf(variable) > -1) {\n                    rangeDelimiter = me.getTerm(\"page-range-delimiter\");\n                    if (!rangeDelimiter) {\n                        rangeDelimiter = \"\\u2013\";\n                    }\n                }\n                if (variable === \"collection-number\") {\n                    rangeDelimiter = me.getTerm(\"year-range-delimiter\");\n                    if (!rangeDelimiter) {\n                        rangeDelimiter = \"\\u2013\";\n                    }\n                }\n            }\n        }\n        //if (rangeDelimiter === \"\\\\-\") {\n        //    rangeDelimiter = \"-\";\n        //}\n        return rangeDelimiter;\n    }\n\n    function manglePageNumbers(values, i, currentInfo) {\n        if (i<1) {\n            return;\n        }\n        if (currentInfo.count !== 2) {\n            return;\n        }\n        if (values[i-1].particle !== values[i].particle) {\n            return;\n        }\n        if (values[i-1].joiningSuffix !== \"-\") {\n            currentInfo.count = 1;\n            return;\n        }\n        if (!me.opt[\"page-range-format\"] && (parseInt(values[i-1].value, 10) > parseInt(values[i].value, 10))) {\n            values[i-1].joiningSuffix = fixupRangeDelimiter(variable, values[i], values[i-1].joiningSuffix, true);\n            return;\n        }\n        var val = values[i];\n\n        var isPage = checkPage(variable, val);\n        var str;\n        if (isPage && !isNaN(parseInt(values[i-1].value)) && !isNaN(parseInt(values[i].value))) {\n            str = values[i-1].particle + values[i-1].value + \" - \" + values[i].particle + values[i].value;\n            str = me.fun.page_mangler(str);\n        } else {\n            // if ((\"\" + values[i-1].value).match(/[0-9]$/) && (\"\" + values[i].value).match(/^[0-9]/)) {\n            if ((\"\" + values[i-1].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/) && (\"\" + values[i].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)) {\n                values[i-1].joiningSuffix = me.getTerm(\"page-range-delimiter\");\n            }\n            str = values[i-1].value + stripHyphenBackslash(values[i-1].joiningSuffix) + values[i].value;\n        }\n        var m = str.match(/^((?:[0-9]*[a-zA-Z]+0*))?([0-9]+[a-z]*)(\\s*[^0-9]+\\s*)([-,a-zA-Z]?0*)([0-9]+[a-z]*)$/);\n        // var m = str.match(/^((?:[0-9]*[a-zA-Z]+0*))?([0-9]+[a-z]*)(\\s*[^0-9]+\\s*)([-,a-zA-Z]?0*)([0-9]+[a-z]*)$/);\n        if (m) {\n            var rangeDelimiter = m[3];\n            rangeDelimiter = fixupRangeDelimiter(variable, val, rangeDelimiter, values[i].numeric);\n            values[i-1].particle = m[1];\n            values[i-1].value = m[2];\n            values[i-1].joiningSuffix = rangeDelimiter;\n            values[i].particle = m[4];\n            values[i].value = m[5];\n        }\n        currentInfo.count = 0;\n    }\n    \n    function fixRanges(values) {\n\n        if (!node) {\n            return;\n        }\n        if ([\"page\", \"chapter-number\", \"collection-number\", \"edition\", \"issue\", \"number\", \"number-of-pages\", \"number-of-volumes\", \"volume\", \"locator\", \"locator-extra\"].indexOf(variable) === -1) {\n            return;\n        }\n\n        var currentInfo = {\n            count: 0,\n            label: null,\n            lastHadRangeDelimiter: false\n        };\n\n        for (var i=0,ilen=values.length; i<ilen; i++) {\n            var val = values[i];\n            if (!val.collapsible) {\n                currentInfo.count = 0;\n                currentInfo.label = null;\n                var isNumeric = val.numeric;\n                val.joiningSuffix = fixupRangeDelimiter(variable, val, val.joiningSuffix, isNumeric);\n            } else if (currentInfo.label === val.label && val.joiningSuffix === \"-\") {\n                // So if there is a hyphen here, and none previous, reset to 1\n                currentInfo.count = 1;\n            } else if (currentInfo.label === val.label && val.joiningSuffix !== \"-\") {\n                // If there is NO hyphen here, count up\n                currentInfo.count++;\n                if (currentInfo.count === 2) {\n                    manglePageNumbers(values, i, currentInfo);\n                }\n            } else if (currentInfo.label !== val.label) {\n                // If the label doesn't match and count is 2, process\n                currentInfo.label = val.label;\n                currentInfo.count = 1;\n            } else {\n                // Safety belt: label doesn't match and count is some other value, so reset to 1\n                // This never happens, though.\n                currentInfo.count = 1;\n                currentInfo.label = val.label;\n            }\n        }\n        // Finally clear, if needed\n        if (currentInfo.count === 2) {\n            manglePageNumbers(values, values.length-1, currentInfo);\n        }\n    }\n\n    function setVariableParams(shadow_numbers, realVariable, values) {\n        var obj = shadow_numbers[realVariable];\n        if (values.length) {\n            obj.numeric = values[0].numeric;\n            obj.collapsible = values[0].collapsible;\n            obj.plural = values[0].plural;\n            obj.label = CSL.STATUTE_SUBDIV_STRINGS[values[0].label];\n            if (variable === \"number\" && obj.label === \"issue\" && me.getTerm(\"number\")) {\n                obj.label = \"number\";\n            }\n        }\n    }\n\n    // Split out the labels and values.\n\n    // short-circuit if object exists: if numeric, set styling, no other action\n    if (node && this.tmp.shadow_numbers[realVariable] && this.tmp.shadow_numbers[realVariable].values.length) {\n        var values = this.tmp.shadow_numbers[realVariable].values;\n        fixRanges(values);\n        //if (!this.tmp.shadow_numbers[variable].masterStyling && !this.tmp.just_looking) {\n            this.tmp.shadow_numbers[realVariable].masterStyling = setStyling(values);\n        //}\n        return;\n    }\n\n    // info.styling = node;\n\n    // This carries value, pluralization and numeric info for use in other contexts.\n    // XXX We used to use one set of params for the entire variable value.\n    // XXX Now params are set on individual objects, of which there may be several after parsing.\n    if (!this.tmp.shadow_numbers[realVariable]) {\n        this.tmp.shadow_numbers[realVariable] = {\n            values:[]\n        };\n    }\n    //this.tmp.shadow_numbers[variable].values = [];\n    //this.tmp.shadow_numbers[variable].plural = 0;\n    //this.tmp.shadow_numbers[variable].numeric = false;\n    //this.tmp.shadow_numbers[variable].label = false;\n\n    if (!ItemObject) {\n        return;\n    }\n\n    // Possibly apply multilingual transform\n    var languageRole = CSL.LangPrefsMap[variable];\n    if (languageRole) {\n        var localeType = this.opt[\"cite-lang-prefs\"][languageRole][0];\n        val = this.transform.getTextSubField(ItemObject, realVariable, \"locale-\"+localeType, true);\n        val = val.name;\n    } else {\n        val = ItemObject[realVariable];\n    }\n\n    if (val && realVariable === \"number\" && ItemObject.type === \"legal_case\") {\n        val = val.replace(/[\\\\]*-/g, \"\\\\-\");\n    }\n\n    // XXX HOLDING THIS\n    // Apply short form ONLY if first element tests is-numeric=false\n    if (val && this.sys.getAbbreviation) {\n        // RefMe bug report: print(\"XX D'oh! (3): \"+num);\n        // true as the fourth argument suppresses update of the UI\n\n        // No need for this.\n        //val = (\"\" + val).replace(/^\\\"/, \"\").replace(/\\\"$/, \"\");\n        if (this.sys.normalizeAbbrevsKey) {\n            var normval = this.sys.normalizeAbbrevsKey(realVariable, val);\n        } else {\n            var normval = val;\n        }\n        var jurisdiction = this.transform.loadAbbreviation(ItemObject.jurisdiction, \"number\", normval, ItemObject.language);\n        if (this.transform.abbrevs[jurisdiction].number) {\n            if (this.transform.abbrevs[jurisdiction].number[normval]) {\n                val = this.transform.abbrevs[jurisdiction].number[normval];\n            } else {\n                \n                // *** This is terrible ***\n                \n                // Strings rendered via cs:number should not be added to the abbreviations\n                // UI unless they test non-numeric. The test happens below.\n                if (\"undefined\" !== typeof this.transform.abbrevs[jurisdiction].number[normval]) {\n                    delete this.transform.abbrevs[jurisdiction].number[normval];\n                }\n            }\n        }\n    }\n\n    //   {\n    //     label: \"sec.\",\n    //     labelForm: \"plural\",\n    //     labelVisibility: true,\n    //     value: 100,\n    //     styling: [object],\n    //     numeric: true\n    //     joiningSuffix: \" & \",\n    //   },\n\n    // Process only if there is a value.\n    if (\"undefined\" !== typeof val && (\"string\" === typeof val || \"number\" === typeof val)) {\n        if (\"number\" === typeof val) {\n            val = \"\" + val;\n        }\n        var defaultLabel = CSL.STATUTE_SUBDIV_STRINGS_REVERSE[variable];\n\n        if (this.tmp.shadow_numbers[realVariable].values.length === 0) {\n            // XXX\n            var values = parseString(val, defaultLabel);\n\n            setSpaces(values);\n            //print(\"setSpaces(): \"+JSON.stringify(values, null, 2));\n\n            setPluralsAndNumerics(values);\n            //print(\"setPluralsAndNumerics(): \"+JSON.stringify(values, null, 2));\n\n            for (var obj of values) {\n                if (!obj.numeric) obj.plural = 0;\n            }\n            this.tmp.shadow_numbers[realVariable].values = values;\n            // me.sys.print(JSON.stringify(values))\n\n            if (node) {\n                fixRanges(values);\n                \n                this.tmp.shadow_numbers[realVariable].masterStyling = setStyling(values);\n                // me.sys.print(\"setStyling(): \"+JSON.stringify(values, null, 2));\n            }\n            setVariableParams(this.tmp.shadow_numbers, realVariable, values);\n        }\n        \n        // hack in support for non-numeric numerics like \"91 Civ. 5442 (RPP)|91 Civ. 5471\"\n        var info = this.tmp.shadow_numbers[realVariable];\n        if (variable === \"number\") {\n            if (info.values.length === 1 && info.values[0].value.indexOf(\"|\") > -1) {\n                info.values[0].value = info.values[0].value.replace(/\\|/g, \", \");\n                info.values[0].numeric = true;\n                info.values[0].plural = 1;\n                info.values[0].collapsible = false;\n                info.numeric = true;\n                info.plural = 1;\n                info.collapsible = false;\n            }\n        }\n        if (info.values.length === 1) {\n            if (info.values[0].value.match(/^[0-9]+(?:\\/[0-9]+)+$/)) {\n                info.values[0].numeric = true;\n                info.values[0].plural = 0;\n                info.values[0].collapsible = false;\n                info.numeric = true;\n                info.plural = 0;\n                info.collapsible = false;\n            }\n        }\n        if (variable === \"page\") {\n            if (info.values.length > 0) {\n                if (info.values[0].gotosleepability) {\n                    info.labelForm = \"short\";\n                }\n            }\n        }\n        //this.sys.print(\"OK \"+JSON.stringify(values, [\"label\", \"origLabel\", \"labelSuffix\", \"particle\", \"collapsible\", \"value\", \"numeric\", \"joiningSuffix\", \"labelVisibility\", \"plural\"], 2));\n    }\n};\n\nCSL.Util.outputNumericField = function(state, varname, itemID) {\n\n    state.output.openLevel(state.tmp.shadow_numbers[varname].masterStyling);\n    var masterStyling = state.tmp.shadow_numbers[varname].masterStyling;\n    var nums = state.tmp.shadow_numbers[varname].values;\n    var masterLabel = nums.length ? nums[0].label : null;\n    var labelForm = state.tmp.shadow_numbers[varname].labelForm;\n    var tryStatic = state.tmp.group_context.tip.label_static;\n    var embeddedLabelForm;\n    if (labelForm) {\n        embeddedLabelForm = labelForm;\n    } else {\n        embeddedLabelForm = \"short\";\n        //labelForm = \"short\";\n    }\n    var labelCapitalizeIfFirst = state.tmp.shadow_numbers[varname].labelCapitalizeIfFirst;\n    var labelDecorations = state.tmp.shadow_numbers[varname].labelDecorations;\n    var lastLabelName = null;\n\n    for (var i=0,ilen=nums.length;i<ilen;i++) {\n        var num = nums[i];\n        var label = \"\";\n        var labelName;\n        if (num.label) {\n            if ('var:' === num.label.slice(0,4)) {\n                labelName = num.label.slice(4);\n            } else {\n                labelName = CSL.STATUTE_SUBDIV_STRINGS[num.label];\n            }\n            if (labelName) {\n                // Simplify this some day.\n                if (num.label === masterLabel) {\n                    if (tryStatic) {\n                        label = state.getTerm(labelName, \"static\", num.plural);\n                        if (label.indexOf(\"%s\") === -1) {\n                            label = \"\";\n                        }\n                    }\n                    if (!label) {\n                        label = state.getTerm(labelName, labelForm, num.plural);\n                    }\n                } else {\n                    if (tryStatic) {\n                        label = state.getTerm(labelName, \"static\", num.plural);\n                        if (label.indexOf(\"%s\") === -1) {\n                            label = \"\";\n                        }\n                    }\n                    if (!label) {\n                        label = state.getTerm(labelName, embeddedLabelForm, num.plural);\n                    }\n                }\n                if (labelCapitalizeIfFirst) {\n                    label = CSL.Output.Formatters[\"capitalize-first\"](state, label);\n                }\n            }\n        }\n        var labelPlaceholderPos = -1;\n        if (label) {\n            labelPlaceholderPos = label.indexOf(\"%s\");\n        }\n        var numStyling = CSL.Util.cloneToken(num.styling);\n        numStyling.formatter = num.styling.formatter;\n        numStyling.type = num.styling.type;\n        numStyling.num = num.styling.num;\n        numStyling.gender = num.styling.gender;\n        \n        if (labelPlaceholderPos > 0 && labelPlaceholderPos < (label.length-2)) {\n            numStyling.strings.prefix += label.slice(0,labelPlaceholderPos);\n            numStyling.strings.suffix = label.slice(labelPlaceholderPos+2) + numStyling.strings.suffix;\n        } else if (num.labelVisibility) {\n            if (!label) {\n                label = num.label;\n                labelName = num.label;\n            }\n            if (labelPlaceholderPos > 0) {\n                var prefixLabelStyling = new CSL.Token();\n                prefixLabelStyling.decorations = labelDecorations;\n                state.output.append(label.slice(0,labelPlaceholderPos), prefixLabelStyling);\n            } else if (labelPlaceholderPos === (label.length-2) || labelPlaceholderPos === -1) {\n                // And add a trailing delimiter.\n                state.output.append(label+num.labelSuffix, \"empty\");\n            }\n        }\n        CSL.UPDATE_GROUP_CONTEXT_CONDITION(state, masterStyling.strings.prefix, null, masterStyling, `${num.particle}${num.value}`);\n        if (num.collapsible) {\n            var blob;\n            if (num.value.match(/^[1-9][0-9]*$/) && Number.isSafeInteger(parseInt(num.value, 10))) {\n                blob = new CSL.NumericBlob(state, num.particle, parseInt(num.value, 10), numStyling, itemID);\n            } else {\n                blob = new CSL.NumericBlob(state, num.particle, num.value, numStyling, itemID);\n            }\n            if (\"undefined\" === typeof blob.gender) {\n                blob.gender = state.locale[state.opt.lang][\"noun-genders\"][varname];\n            }\n            state.output.append(blob, \"literal\");\n        } else {\n            state.output.append(num.particle + num.value, numStyling);\n        }\n        if (labelPlaceholderPos === 0 && labelPlaceholderPos < (label.length-2)) {\n            // Only and always if this is the last entry of this label\n            if (lastLabelName === null) {\n                lastLabelName = labelName;\n            }\n            if (labelName !== lastLabelName || i === (nums.length-1)) {\n                var suffixLabelStyling = new CSL.Token();\n                suffixLabelStyling.decorations = labelDecorations;\n                state.output.append(label.slice(labelPlaceholderPos+2), suffixLabelStyling);\n            }\n        }\n        lastLabelName = labelName;\n        state.tmp.term_predecessor = true;\n    }\n    state.output.closeLevel();\n};\n\n/*global CSL: true */\n\nCSL.Util.PageRangeMangler = {};\n\nCSL.Util.PageRangeMangler.getFunction = function (state, rangeType) {\n    var rangerex, pos, len, stringify, listify, expand, minimize, minimize_internal, chicago15, chicago16, lst, m, b, e, ret, begin, end, ret_func;\n    \n    var range_delimiter = state.getTerm(rangeType + \"-range-delimiter\");\n\n    rangerex = /([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)\\s*(?:\\u2013|-)\\s*([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)/;\n\n    stringify = function (lst) {\n        len = lst.length;\n        for (pos = 1; pos < len; pos += 2) {\n            if (\"object\" === typeof lst[pos]) {\n                lst[pos] = lst[pos].join(\"\");\n            }\n        }\n        var ret = lst.join(\"\");\n        ret = ret.replace(/([^\\\\])\\-/g, \"$1\"+state.getTerm(rangeType + \"-range-delimiter\"));\n        return ret;\n    };\n\n    listify = function (str) {\n        var m, lst, ret;\n        // Normalized delimiter form, for use in regexps\n        var hyphens = \"\\\\s+\\\\-\\\\s+\";\n        // Normalize delimiters to hyphen wrapped in single spaces\n        var this_range_delimiter = range_delimiter === \"-\" ? \"\" : range_delimiter;\n        var delimRex = new RegExp(\"([^\\\\\\\\])[-\" + this_range_delimiter + \"\\\\u2013]\", \"g\");\n        str = str.replace(delimRex, \"$1 - \").replace(/\\s+-\\s+/g, \" - \");\n        // Workaround for Internet Explorer\n        //var rexm = new RegExp(\"((?:[0-9]*[a-zA-Z]+)?[0-9]+\" + hyphens + \"(?:[0-9]*[a-zA-Z]+)?[0-9]+)\", \"g\");\n        //var rexlst = new RegExp(\"(?:[0-9]*[a-zA-Z]+)?[0-9]+\" + hyphens + \"(?:[0-9]*[a-zA-Z]+)?[0-9]+\");\n        var rexm = new RegExp(\"((?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*\" + hyphens + \"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*)\", \"g\");\n        var rexlst = new RegExp(\"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*\" + hyphens + \"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*\");\n        m = str.match(rexm);\n        lst = str.split(rexlst);\n        if (lst.length === 0) {\n            ret = m;\n        } else {\n            ret = [lst[0]];\n            for (pos = 1, len = lst.length; pos < len; pos += 1) {\n                ret.push(m[pos - 1].replace(/\\s*\\-\\s*/g, \"-\"));\n                ret.push(lst[pos]);\n            }\n        }\n        return ret;\n    };\n\n    expand = function (str) {\n        str = \"\" + str;\n        lst = listify(str);\n        len = lst.length;\n        for (pos = 1; pos < len; pos += 2) {\n            m = lst[pos].match(rangerex);\n            if (m) {\n                if (!m[3] || m[1] === m[3]) {\n                    if (m[4].length < m[2].length) {\n                        m[4] = m[2].slice(0, (m[2].length - m[4].length)) + m[4];\n                    }\n                    if (parseInt(m[2], 10) < parseInt(m[4], 10)) {\n                        m[3] = range_delimiter + (m[1] ? m[1] : \"\");\n                        lst[pos] = m.slice(1);\n                    }\n                }\n            }\n            if (\"string\" === typeof lst[pos]) {\n                lst[pos] = lst[pos].replace(/\\-/g, range_delimiter);\n            }\n        }\n        return lst;\n    };\n\n    minimize = function (lst, minchars, isyear) {\n        len = lst.length;\n        for (var i = 1, ilen = lst.length; i < ilen; i += 2) {\n            if (\"object\" === typeof lst[i]) {\n                lst[i][3] = minimize_internal(lst[i][1], lst[i][3], minchars, isyear);\n                if (lst[i][2].slice(1) === lst[i][0]) {\n                    lst[i][2] = range_delimiter;\n                }\n            }\n        }\n        return stringify(lst);\n    };\n\n    minimize_internal = function (begin, end, minchars, isyear) {\n        if (!minchars) {\n            minchars = 0;\n        }\n        b = (\"\" + begin).split(\"\");\n        e = (\"\" + end).split(\"\");\n        ret = e.slice();\n        ret.reverse();\n        if (b.length === e.length) {\n            for (var i = 0, ilen = b.length; i < ilen; i += 1) {\n                if (b[i] === e[i] && ret.length > minchars) {\n                    ret.pop();\n                } else {\n                    if (minchars && isyear && ret.length === 3) {\n                        var front = b.slice(0, i);\n                        front.reverse();\n                        ret = ret.concat(front);\n                    }\n                    break;\n                }\n            }\n        }\n        ret.reverse();\n        return ret.join(\"\");\n    };\n\n    chicago15 = function (lst) {\n        len = lst.length;\n        for (pos = 1; pos < len; pos += 2) {\n            if (\"object\" === typeof lst[pos]) {\n                m = lst[pos];\n                begin = parseInt(m[1], 10);\n                end = parseInt(m[3], 10);\n                if (begin > 100 && begin % 100 && parseInt((begin / 100), 10) === parseInt((end / 100), 10)) {\n                    m[3] = \"\" + (end % 100);\n                } else if (begin >= 10000) {\n                    m[3] = \"\" + (end % 1000);\n                }\n            }\n            if (m[2].slice(1) === m[0]) {\n                m[2] = range_delimiter;\n            }\n        }\n        return stringify(lst);\n    };\n\n    chicago16 = function (lst) {\n        len = lst.length;\n        for (pos = 1; pos < len; pos += 2) {\n            if (\"object\" === typeof lst[pos]) {\n                m = lst[pos];\n                begin = parseInt(m[1], 10);\n                end = parseInt(m[3], 10);\n                e = \"\" + end;\n                if (begin > 100 && begin % 100) {\n                    for (var i = 2; i < e.length; i++) {\n                        var divisor = Math.pow(10, i);\n                        if (Math.floor(begin / divisor) === Math.floor(end / divisor)) {\n                            m[3] = \"\" + (end % divisor);\n                            break;\n                        }\n                    }\n                }\n            }\n            if (m[2].slice(1) === m[0]) {\n                m[2] = range_delimiter;\n            }\n        }\n        return stringify(lst);\n    };\n\n    //\n    // The top-level option handlers.\n    //\n    var sniff = function (str, func, minchars, isyear) {\n        var ret;\n\t\tstr = \"\" + str;\n\t\tvar lst = expand(str);\n        var ret = func(lst, minchars, isyear);\n        return ret;\n    };\n    if (!state.opt[rangeType + \"-range-format\"]) {\n        ret_func = function (str) {\n            //return str.replace(\"-\", \"\\u2013\", \"g\");\n            return sniff(str, stringify);\n        };\n    } else if (state.opt[rangeType + \"-range-format\"] === \"expanded\") {\n        ret_func = function (str) {\n            return sniff(str, stringify);\n        };\n    } else if (state.opt[rangeType + \"-range-format\"] === \"minimal\") {\n        ret_func = function (str) {\n            return sniff(str, minimize);\n        };\n    } else if (state.opt[rangeType + \"-range-format\"] === \"minimal-two\") {\n        ret_func = function (str, isyear) {\n            return sniff(str, minimize, 2, isyear);\n        };\n    } else if (state.opt[rangeType + \"-range-format\"] === \"chicago\") {\n        ret_func = function (str) {\n            return sniff(str, chicago15);\n        };\n    } else if (state.opt[rangeType + \"-range-format\"] === \"chicago-15\") {\n        ret_func = function (str) {\n            return sniff(str, chicago15);\n        };\n    } else if (state.opt[rangeType + \"-range-format\"] === \"chicago-16\") {\n        ret_func = function (str) {\n            return sniff(str, chicago16);\n        };\n    }\n\n    return ret_func;\n};\n\n\n/*global CSL: true */\n\n// Use a state machine\n\n// Okay, good!\n// Needs some tweaks:\n// 1. First pass: quotes only\n//    Special: Convert all sandwiched single-quote markup to apostrophe\n// 2. Second pass: tags\n\nCSL.Util.FlipFlopper = function(state) {\n    \n    /**\n     * INTERNAL\n     */\n\n    var _nestingState = [];\n\n    var _nestingData = {\n        \"<span class=\\\"nocase\\\">\": {\n            type: \"nocase\",\n            opener: \"<span class=\\\"nocase\\\">\",\n            closer: \"</span>\",\n            attr: null,\n            outer: null,\n            flipflop: null\n        },\n        \"<span class=\\\"nodecor\\\">\": {\n            type: \"nodecor\",\n            opener: \"<span class=\\\"nodecor\\\">\",\n            closer: \"</span>\",\n            attr: \"@class\",\n            outer: \"nodecor\",\n            flipflop: {\n                \"nodecor\": \"nodecor\"\n            }\n        },\n        \"<span style=\\\"font-variant:small-caps;\\\">\": {\n            type: \"tag\",\n            opener: \"<span style=\\\"font-variant:small-caps;\\\">\",\n            closer: \"</span>\",\n            attr: \"@font-variant\",\n            outer: \"small-caps\",\n            flipflop: {\n                \"small-caps\": \"normal\",\n                \"normal\": \"small-caps\"\n            }\n        },\n        \"<sc>\": {\n            type: \"tag\",\n            opener: \"<sc>\",\n            closer: \"</sc>\",\n            attr: \"@font-variant\",\n            outer: \"small-caps\",\n            flipflop: {\n                \"small-caps\": \"normal\",\n                \"normal\": \"small-caps\"\n            }\n        },\n        \"<i>\": {\n            type: \"tag\",\n            opener: \"<i>\",\n            closer: \"</i>\",\n            attr: \"@font-style\",\n            outer: \"italic\",\n            flipflop: {\n                \"italic\": \"normal\",\n                \"normal\": \"italic\"\n            }\n        },\n        \"<b>\": {\n            type: \"tag\",\n            opener: \"<b>\",\n            closer: \"</b>\",\n            attr: \"@font-weight\",\n            outer: \"bold\",\n            flipflop: {\n                \"bold\": \"normal\",\n                \"normal\": \"bold\"\n            }\n        },\n        \"<sup>\": {\n            type: \"tag\",\n            opener: \"<sup>\",\n            closer: \"</sup>\",\n            attr: \"@vertical-align\",\n            outer: \"sup\",\n            flipflop: {\n                \"sub\": \"sup\",\n                \"sup\": \"sup\"\n            }\n        },\n        \"<sub>\": {\n            type: \"tag\",\n            opener: \"<sub>\",\n            closer: \"</sub>\",\n            attr: \"@vertical-align\",\n            outer: \"sub\",\n            flipflop: {\n                \"sup\": \"sub\",\n                \"sub\": \"sub\"\n            }\n        },\n        \" \\\"\": {\n            type: \"quote\",\n            opener: \" \\\"\",\n            closer: \"\\\"\",\n            attr: \"@quotes\",\n            outer: \"true\",\n            flipflop: {\n                \"true\": \"inner\",\n                \"inner\": \"true\",\n                \"false\": \"true\"\n            }\n        },\n        \" \\'\": {\n            type: \"quote\",\n            opener: \" \\'\",\n            closer: \"\\'\",\n            attr: \"@quotes\",\n            outer: \"inner\",\n            flipflop: {\n                \"true\": \"inner\",\n                \"inner\": \"true\",\n                \"false\": \"true\"\n            }\n        }\n    };\n\n    _nestingData[\"(\\\"\"] = _nestingData[\" \\\"\"];\n    _nestingData[\"(\\'\"] = _nestingData[\" \\'\"];\n\n    var localeOpenQuote = state.getTerm(\"open-quote\");\n    var localeCloseQuote = state.getTerm(\"close-quote\");\n    var localeOpenInnerQuote = state.getTerm(\"open-inner-quote\");\n    var localeCloseInnerQuote = state.getTerm(\"close-inner-quote\");\n\n    // If locale uses straight quotes, do not register them. All will be well.\n    // Otherwise, clone straight-quote data, and adjust.\n    if (localeOpenQuote && localeCloseQuote && [\" \\\"\",\" \\'\",\"\\\"\",\"\\'\"].indexOf(localeOpenQuote) === -1) {\n        _nestingData[localeOpenQuote] = JSON.parse(JSON.stringify(_nestingData[\" \\\"\"]));\n        _nestingData[localeOpenQuote].opener = localeOpenQuote;\n        _nestingData[localeOpenQuote].closer = localeCloseQuote;\n    }\n    \n    if (localeOpenInnerQuote && localeCloseInnerQuote && [\" \\\"\",\" \\'\",\"\\\"\",\"\\'\"].indexOf(localeOpenInnerQuote) === -1) {\n        _nestingData[localeOpenInnerQuote] = JSON.parse(JSON.stringify(_nestingData[\" \\'\"]));\n        _nestingData[localeOpenInnerQuote].opener = localeOpenInnerQuote;\n        _nestingData[localeOpenInnerQuote].closer = localeCloseInnerQuote;\n    }\n    \n    function _setOuterQuoteForm(quot) {\n        var flip = {\n            \" \\'\": \" \\\"\",\n            \" \\\"\": \" \\'\",\n            \"(\\\"\": \"(\\'\",\n            \"(\\'\": \"(\\\"\"\n        };\n        _nestingData[quot].outer = \"true\";\n        _nestingData[flip[quot]].outer = \"inner\";\n    }\n    \n    function _getNestingOpenerParams(opener) {\n        var openers = [];\n        var keys = Object.keys(_nestingData);\n        for (var i = 0, l = keys.length; i < l; i++) {\n            var key = keys[i];\n            if (_nestingData[opener].type !== \"quote\" || !_nestingData[opener]) {\n                openers.push(key);\n            }\n        }\n        var ret = _nestingData[opener];\n        ret.opener = new RegExp(\"^(?:\" + openers.map(function(str){\n            return str.replace(\"(\", \"\\\\(\");\n        }).join(\"|\") + \")\");\n        return ret;\n    }\n\n    var _nestingParams = (function() {\n        var ret = {};\n        var keys = Object.keys(_nestingData);\n        for (var i = 0, l = keys.length; i < l; i++) {\n            var key = keys[i];\n            ret[key] = _getNestingOpenerParams(key);\n        }\n        return ret;\n    }());\n\n    var _tagRex = (function() {\n        var openers = [];\n        var closers = [];\n        var vals = {};\n        for (var opener in _nestingParams) {\n            openers.push(opener);\n            vals[_nestingParams[opener].closer] = true;\n        }\n        var keys = Object.keys(vals);\n        for (var i = 0, l = keys.length; i < l; i++) {\n            var closer = keys[i];\n            closers.push(closer);\n        }\n\n        var all = openers.concat(closers).map(function(str){\n            return str.replace(\"(\", \"\\\\(\");\n        }).join(\"|\");\n\n        return {\n            matchAll: new RegExp(\"((?:\" + all + \"))\", \"g\"),\n            splitAll: new RegExp(\"(?:\" + all + \")\", \"g\"),\n            open: new RegExp(\"(^(?:\" + openers.map(function(str){\n                return str.replace(\"(\", \"\\\\(\");\n            }).join(\"|\") + \")$)\"),\n            close: new RegExp(\"(^(?:\" + closers.join(\"|\") + \")$)\"),\n        };\n    }());\n\n    function _tryOpen(tag, pos) {\n        var params = _nestingState[_nestingState.length - 1];\n        if (!params || tag.match(params.opener)) {\n            _nestingState.push({\n                type: _nestingParams[tag].type,\n                opener: _nestingParams[tag].opener,\n                closer: _nestingParams[tag].closer,\n                pos: pos\n            });\n            return false;\n        } else {\n            _nestingState.pop();\n            _nestingState.push({\n                type: _nestingParams[tag].type,\n                opener: _nestingParams[tag].opener,\n                closer: _nestingParams[tag].closer,\n                pos: pos\n            });\n            return {\n                fixtag: params.pos\n            };\n        }\n    }\n    \n    function _tryClose(tag, pos) {\n        var params = _nestingState[_nestingState.length - 1];\n        if (params && tag === params.closer) {\n            _nestingState.pop();\n            if (params.type === \"nocase\") {\n                return {\n                    nocase: {\n                        open: params.pos,\n                        close: pos\n                    }\n                };\n            } else {\n                return false;\n            }\n        } else {\n            if (params) {\n                return {\n                    fixtag: params.pos\n                };\n            } else {\n                return {\n                    fixtag: pos\n                };\n            }\n        }\n    }\n    \n    function _pushNestingState(tag, pos) {\n        if (tag.match(_tagRex.open)) {\n            return _tryOpen(tag, pos);\n        } else {\n            return _tryClose(tag, pos);\n        }\n    }\n    \n    function _doppelString(str) {\n        var forcedSpaces = [];\n        // Normalize markup\n        str = str.replace(/(<span)\\s+(style=\\\"font-variant:)\\s*(small-caps);?\\\"[^>]*(>)/g, \"$1 $2$3;\\\"$4\");\n        str = str.replace(/(<span)\\s+(class=\\\"no(?:case|decor)\\\")[^>]*(>)/g, \"$1 $2$3\");\n\n        var match = str.match(_tagRex.matchAll);\n        if (!match) {\n            return {\n                tags: [],\n                strings: [str],\n                forcedSpaces: []\n            };\n        }\n        var split = str.split(_tagRex.splitAll);\n\n        for (var i=0,ilen=match.length-1;i<ilen;i++) {\n            if (_nestingData[match[i]]) {\n                if (split[i+1] === \"\" && [\"\\\"\", \"'\"].indexOf(match[i+1]) > -1) {\n                    match[i+1] = \" \" + match[i+1];\n                    forcedSpaces.push(true);\n                } else {\n                    forcedSpaces.push(false);\n                }\n            }\n        }\n        return {\n            tags: match,\n            strings: split,\n            forcedSpaces: forcedSpaces\n        };\n    }\n\n    var TagReg = function(blob) {\n        var _stack = [];\n        this.set = function (tag) {\n            var attr = _nestingData[tag].attr;\n            var decor = null;\n            for (var i=_stack.length-1;i>-1;i--) {\n                var _decor = _stack[i];\n                if (_decor[0] === attr) {\n                    decor = _decor;\n                    break;\n                }\n            }\n            if (!decor) {\n                var allTheDecor = [state[state.tmp.area].opt.layout_decorations].concat(blob.alldecor);\n                outer:\n                for (var i=allTheDecor.length-1;i>-1;i--) {\n                    var decorset = allTheDecor[i];\n                    if (!decorset) {\n                        continue;\n                    }\n                    for (var j=decorset.length-1;j>-1;j--) {\n                        var _decor = decorset[j];\n                        if (_decor[0] === attr) {\n                            decor = _decor;\n                            break outer;\n                        }\n                    }\n                }\n            }\n            if (!decor) {\n                decor = [attr, _nestingData[tag].outer];\n            } else {\n                decor = [attr, _nestingData[tag].flipflop[decor[1]]];\n            }\n            _stack.push(decor);\n        };\n        this.pair = function () {\n            return _stack[_stack.length-1];\n        };\n        this.pop = function () {\n            _stack.pop();\n        };\n    };\n    \n    function _apostropheForce(tag, str) {\n        if (tag === \"\\'\") {\n            if (str && str.match(/^[^\\,\\.\\?\\:\\;\\ ]/)) {\n                return \"\\u2019\";\n            }\n        } else if (tag === \" \\'\" && str && str.match(/^[\\ ]/)) {\n            return \" \\u2019\";\n        }\n        return false;\n    }\n\n    function _undoppelToQueue(blob, doppel, leadingSpace) {\n        var firstString = true;\n        var tagReg = new TagReg(blob);\n        blob.blobs = [];\n        function Stack (blob) {\n            this.stack = [blob];\n            this.latest = blob;\n            this.addStyling = function(str, decor) {\n                if (firstString) {\n                    if (str.slice(0, 1) === \" \") {\n                        str = str.slice(1);\n                    }\n                    if (str.slice(0, 1) === \" \") {\n                        str = str.slice(1);\n                    }\n                    firstString = false;\n                }\n                this.latest = this.stack[this.stack.length-1];\n                if (decor) {\n                    if (\"string\" === typeof this.latest.blobs) {\n                        var child = new CSL.Blob();\n                        child.blobs = this.latest.blobs;\n                        child.alldecor = this.latest.alldecor.slice();\n                        this.latest.blobs = [child];\n                    }\n                    var tok = new CSL.Token();\n                    var newblob = new CSL.Blob(null, tok);\n                    newblob.alldecor = this.latest.alldecor.slice();\n                    \n                    // AHA! Bad naming. There is _decorset from the list, and\n                    // there WAS decorset that we are building. Dumb. Fix the\n                    // names and fix it up.\n                    \n                    if (decor[0] === \"@class\" && decor[1] === \"nodecor\") {\n                        var newdecorset = [];\n                        var seen = {};\n                        var allTheDecor = [state[state.tmp.area].opt.layout_decorations].concat(newblob.alldecor);\n                        for (var i=allTheDecor.length-1;i>-1;i--) {\n                            var _decorset = allTheDecor[i];\n                            if (!_decorset) {\n                                continue;\n                            }\n                            for (var j=_decorset.length-1;j>-1;j--) {\n                                var _olddecor = _decorset[j];\n                                if ([\"@font-weight\", \"@font-style\", \"@font-variant\"].indexOf(_olddecor[0]) > -1\n                                    && !seen[_olddecor[0]]) {\n                                    \n                                    if (decor[1] !== \"normal\") {\n                                        newblob.decorations.push([_olddecor[0], \"normal\"]);\n                                        newdecorset.push([_olddecor[0], \"normal\"]);\n                                    }\n                                    seen[_olddecor[0]] = true;\n                                }\n                            }\n                        }\n                        newblob.alldecor.push(newdecorset);\n                        \n                    } else {\n                        newblob.decorations.push(decor);\n                        newblob.alldecor.push([decor]);\n                    }\n                    this.latest.blobs.push(newblob);\n                    this.stack.push(newblob);\n                    this.latest = newblob;\n                    if (str) {\n                        var tok = new CSL.Token();\n                        var newblob = new CSL.Blob(null, tok);\n                        newblob.blobs = str;\n                        newblob.alldecor = this.latest.alldecor.slice();\n                        this.latest.blobs.push(newblob);\n                    }\n                } else {\n                    if (str) {\n                        var child = new CSL.Blob();\n                        child.blobs = str;\n                        child.alldecor = this.latest.alldecor.slice();\n                        this.latest.blobs.push(child);\n                    }\n                }\n            };\n            this.popStyling = function() {\n                this.stack.pop();\n            };\n        }\n        var stack = new Stack(blob);\n        if (doppel.strings.length) {\n            var str = doppel.strings[0];\n            if (leadingSpace) {\n                str = \" \" + str;\n            }\n            stack.addStyling(str);\n        }\n        for (var i=0,ilen=doppel.tags.length;i<ilen;i++) {\n            var tag = doppel.tags[i];\n            var str = doppel.strings[i+1];\n            if (tag.match(_tagRex.open)) {\n                tagReg.set(tag);\n                stack.addStyling(str, tagReg.pair());\n            } else {\n                tagReg.pop();\n                stack.popStyling();\n                stack.addStyling(str);\n            }\n        }\n    }\n\n    /**\n     * PUBLIC\n     */\n\n    this.processTags = function (blob) {\n        var str = blob.blobs;\n        var leadingSpace = false;\n        if (str.slice(0, 1) === \" \" && !str.match(/^\\s+[\\'\\\"]/)) {\n            leadingSpace = true;\n        }\n        var rex = new RegExp(\"(\" + CSL.ROMANESQUE_REGEXP.source + \")\\u2019(\" + CSL.ROMANESQUE_REGEXP.source + \")\", \"g\");\n        var str = \" \" + str.replace(rex, \"$1\\'$2\");\n        var doppel = _doppelString(str);\n        if (doppel.tags.length === 0) {\n            return;\n        }\n        var quoteFormSeen = false;\n        \n    \tfor (var i=0,ilen=doppel.tags.length;i<ilen;i++) {\n            var tag = doppel.tags[i];\n            var str = doppel.strings[i+1];\n            var apostrophe = _apostropheForce(tag, str);\n            if (apostrophe) {\n                doppel.strings[i+1] = apostrophe + doppel.strings[i+1];\n                doppel.tags[i] = \"\";\n            } else {\n                var tagInfo;\n                while (true) {\n                    tagInfo = _pushNestingState(tag, i);\n                    if (tagInfo) {\n                        if (Object.keys(tagInfo).indexOf(\"fixtag\") > -1) {\n                            if (tag.match(_tagRex.close)\n                                && tag === \"\\'\") {\n                                \n                                doppel.strings[i+1] = \"\\u2019\" + doppel.strings[i+1];\n                                doppel.tags[i] = \"\";\n                            } else {\n                                var failedTag = doppel.tags[tagInfo.fixtag];\n                                if (doppel.forcedSpaces[tagInfo.fixtag-1]) {\n                                    failedTag = failedTag.slice(1);\n                                }\n                                doppel.strings[tagInfo.fixtag+1] = failedTag + doppel.strings[tagInfo.fixtag+1];\n                                doppel.tags[tagInfo.fixtag] = \"\";\n                            }\n                            if (_nestingState.length > 0) {\n                                if (tag !== \"\\'\") {\n                                    _nestingState.pop();\n                                } else {\n                                    break;\n                                }\n                            } else {\n                                break;\n                            }\n                        } else if (tagInfo.nocase) {\n                            doppel.tags[tagInfo.nocase.open] = \"\";\n                            doppel.tags[tagInfo.nocase.close] = \"\";\n                            break;\n                        } else {\n                            break;\n                        }\n                    } else {\n                        break;\n                    }\n                }\n                if (tagInfo && (tagInfo.fixtag|| tagInfo.fixtag === 0)) {\n                    doppel.strings[i+1] = doppel.tags[i] + doppel.strings[i+1];\n                    doppel.tags[i] = \"\";\n                }\n            }\n        }\n        // Stray tags are neutralized here\n        for (var i=_nestingState.length-1;i>-1;i--) {\n            var tagPos = _nestingState[i].pos;\n            var tag = doppel.tags[tagPos];\n            if (tag === \" \\'\" || tag === \"\\'\") {\n\n                doppel.strings[tagPos+1] = \" \\u2019\" + doppel.strings[tagPos+1];\n            } else {\n                doppel.strings[tagPos+1] = doppel.tags[tagPos] + doppel.strings[tagPos+1];\n            }\n            doppel.tags[tagPos] = \"\";\n            _nestingState.pop();\n        }\n        for (var i=doppel.tags.length-1;i>-1;i--) {\n            if (!doppel.tags[i]) {\n                doppel.tags = doppel.tags.slice(0,i).concat(doppel.tags.slice(i+1));\n                doppel.strings[i] = doppel.strings[i] + doppel.strings[i+1];\n                doppel.strings = doppel.strings.slice(0,i+1).concat(doppel.strings.slice(i+2));\n            }\n        }\n        // Sniff initial (outer) quote form (single or double) and configure parser\n        // Also add leading spaces.\n        for (var i=0,ilen=doppel.tags.length;i<ilen;i++) {\n            var tag = doppel.tags[i];\n            var forcedSpace = doppel.forcedSpaces[i-1];\n            if ([\" \\\"\", \" \\'\", \"(\\\"\", \"(\\'\"].indexOf(tag) > -1) {\n                if (!quoteFormSeen) {\n                    _setOuterQuoteForm(tag);\n                    quoteFormSeen = true;\n                }\n                if (!forcedSpace) {\n                    doppel.strings[i] += tag.slice(0, 1);\n                }\n            }\n        }\n        //print(JSON.stringify(doppel, null, 2))\n        //print(_undoppelString(doppel));\n        _undoppelToQueue(blob, doppel, leadingSpace);\n    };\n};\n\n/*global CSL: true */\n\nCSL.Output.Formatters = (function () {\n    var rexStr = \"(?:\\u2018|\\u2019|\\u201C|\\u201D| \\\"| \\'|\\\"|\\'|[-\\u2013\\u2014\\/.,;?!:]|\\\\[|\\\\]|\\\\(|\\\\)|<span style=\\\"font-variant: small-caps;\\\">|<span class=\\\"no(?:case|decor)\\\">|<\\/span>|<\\/?(?:i|sc|b|sub|sup)>)\";\n    var tagDoppel = new CSL.Doppeler(rexStr, function(str) {\n        return str.replace(/(<span)\\s+(class=\\\"no(?:case|decor)\\\")[^>]*(>)/g, \"$1 $2$3\").replace(/(<span)\\s+(style=\\\"font-variant:)\\s*(small-caps);?(\\\")[^>]*(>)/g, \"$1 $2 $3;$4$5\");\n    });\n    var rexNameStr = \"(?:[-\\\\s]*<\\\\/*(?:span\\s+class=\\\"no(?:case|decor)\\\"|i|sc|b|sub|sup)>[-\\\\s]*|[-\\\\s]+)\";\n    var nameDoppel = new CSL.Doppeler(rexNameStr);\n    \n    var wordDoppel = new CSL.Doppeler(\"(?:[\\u00A0\\u0020\\u00A0\\u2000-\\u200B\\u205F\\u3000]+)\");\n    \n    /**\n     * INTERNAL\n     */\n\n    var _tagParams = {\n        \"<span style=\\\"font-variant: small-caps;\\\">\": \"</span>\",\n        \"<span class=\\\"nocase\\\">\": \"</span>\",\n        \"<span class=\\\"nodecor\\\">\": \"</span>\",\n        \"<sc>\": \"</sc>\",\n        \"<sub>\": \"</sub>\",\n        \"<sup>\": \"</sup>\"\n    };\n\n    function _capitalise (word) {\n        // Weird stuff is (.) transpiled with regexpu\n        //   https://github.com/mathiasbynens/regexpu\n        var m = word.match(/(^\\s*)((?:[\\0-\\t\\x0B\\f\\x0E-\\u2027\\u202A-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]))(.*)/);\n        // Do not uppercase lone Greek letters\n        // (No case transforms in Greek citations, but chars used in titles to science papers)\n        if (m && !(m[2].match(/^[\\u0370-\\u03FF]$/) && !m[3])) {\n            return m[1] + CSL.toLocaleUpperCase.call(this, m[2]) + m[3];\n        }\n        return word;\n    }\n\n    function _textcaseEngine(config, string) {\n        if (!string) {\n            return \"\";\n        }\n        config.doppel = tagDoppel.split(string);\n        var quoteParams = {\n            \" \\\"\": {\n                opener: \" \\'\",\n                closer: \"\\\"\"\n            },\n            \" \\'\": {\n                opener: \" \\\"\",\n                closer: \"\\'\"\n            },\n            \"\\u2018\": {\n                opener: \"\\u2018\",\n                closer: \"\\u2019\"\n            },\n            \"\\u201C\": {\n                opener: \"\\u201C\",\n                closer: \"\\u201D\"\n            },\n        };\n        function tryOpen(tag, pos) {\n            if (config.quoteState.length === 0 || tag === config.quoteState[config.quoteState.length - 1].opener) {\n                config.quoteState.push({\n                    opener: quoteParams[tag].opener,\n                    closer: quoteParams[tag].closer,\n                    pos: pos\n                });\n                return false;\n            } else {\n                var prevPos = config.quoteState[config.quoteState.length-1].pos;\n                config.quoteState.pop();\n                config.quoteState.push({\n                    opener: quoteParams[tag].opener,\n                    closer: quoteParams[tag].closer,\n                    positions: pos\n                });\n                return prevPos;\n            }\n        }\n        function tryClose(tag, pos) {\n            if (config.quoteState.length > 0 && tag === config.quoteState[config.quoteState.length - 1].closer) {\n                config.quoteState.pop();\n            } else {\n                return pos;\n            }\n        }\n        function pushQuoteState(tag, pos) {\n            var isOpener = [\"\\u201C\", \"\\u2018\", \" \\\"\", \" \\'\"].indexOf(tag) > -1 ? true : false;\n            if (isOpener) {\n                return tryOpen(tag, pos);\n            } else {\n                return tryClose(tag, pos);\n            }\n        }\n        function quoteFix (tag, positions) {\n            var m = tag.match(/(^(?:\\u2018|\\u2019|\\u201C|\\u201D|\\\"|\\')|(?: \\\"| \\')$)/);\n            if (m) {\n                return pushQuoteState(m[1], positions);\n            }\n        }\n        // Run state machine\n        if (config.doppel.strings.length && config.doppel.strings[0].trim()) {\n            config.doppel.strings[0] = config.capitaliseWords(config.doppel.strings[0], 0, config.doppel.tags[0]);\n        }\n\n    \tfor (var i=0,ilen=config.doppel.tags.length;i<ilen;i++) {\n            var tag = config.doppel.tags[i];\n            var str = config.doppel.strings[i+1];\n\n            if (config.tagState !== null) {\n                // Evaluate tag state for current string\n                if (_tagParams[tag]) {\n                    config.tagState.push(_tagParams[tag]);\n                } else if (config.tagState.length && tag === config.tagState[config.tagState.length - 1]) {\n                    config.tagState.pop();\n                }\n            }\n\n            if (config.afterPunct !== null) {\n                // Evaluate punctuation state of current string\n                if (tag.match(/[\\!\\?\\:]$/)) {\n                    config.afterPunct = true;\n                }\n            }\n\n            // Process if outside tag scope, else noop for upper-casing\n            if (config.tagState.length === 0) {\n                config.doppel.strings[i+1] = config.capitaliseWords(str, i+1, config.doppel,config.doppel.tags[i+1]);\n                \n            } else if (config.doppel.strings[i+1].trim()) {\n                config.lastWordPos = null;\n            }\n            \n            if (config.quoteState !== null) {\n                // Evaluate quote state of current string and fix chars that have flown\n                var quotePos = quoteFix(tag, i);\n                if (quotePos || quotePos === 0) {\n                    var origChar = config.doppel.origStrings[quotePos+1].slice(0, 1);\n                    config.doppel.strings[quotePos+1] = origChar + config.doppel.strings[quotePos+1].slice(1);\n                    config.lastWordPos = null;\n                }\n            }\n\n            // If there was a printable string, unset first-word and after-punctuation\n            if (config.isFirst) {\n                if (str.trim()) {\n                    config.isFirst = false;\n                }\n            }\n            if (config.afterPunct) {\n                if (str.trim()) {\n                    config.afterPunct = false;\n                }\n            }\n        }\n        if (config.quoteState) {\n            for (var i=0,ilen=config.quoteState.length;i<ilen;i++) {\n                var quotePos = config.quoteState[i].pos;\n                // Test for quotePos avoids a crashing error:\n                //   https://github.com/citation-style-language/test-suite/blob/master/processor-tests/humans/flipflop_OrphanQuote.txt\n                if (typeof quotePos !== 'undefined') {\n                    var origChar = config.doppel.origStrings[quotePos+1].slice(0, 1);\n                    config.doppel.strings[quotePos+1] = origChar + config.doppel.strings[quotePos+1].slice(1);\n                }\n            }\n        }\n        // Specially capitalize the last word if necessary (invert stop-word list)\n        if (config.lastWordPos) {\n            var lastWords = wordDoppel.split(config.doppel.strings[config.lastWordPos.strings]);\n            var lastWord = lastWords.strings[config.lastWordPos.words];\n            if (lastWord.length > 1 && CSL.toLocaleLowerCase.call(this, lastWord).match(config.skipWordsRex)) {\n                lastWord = _capitalise.call(this, lastWord);\n                lastWords.strings[config.lastWordPos.words] = lastWord;\n            }\n            config.doppel.strings[config.lastWordPos.strings] = wordDoppel.join(lastWords);\n        }\n\n        // Recombine the string\n        return tagDoppel.join(config.doppel);\n    }\n\n    /**\n     * PUBLIC\n     */\n\n    /**\n     * A noop that just delivers the string.\n     */\n    function passthrough (state, str) {\n        return str;\n    }\n\n    /**\n     * Force all letters in the string to lowercase, skipping nocase spans\n     */\n    function lowercase(state, string) {\n        var config = {\n            quoteState: null,\n            capitaliseWords: function(str) {\n                var words = str.split(\" \");\n                for (var i=0,ilen=words.length;i<ilen;i++) {\n                    var word = words[i];\n                    if (word) {\n                        words[i] = CSL.toLocaleLowerCase.call(state, word);\n                    }\n                }\n                return words.join(\" \");\n            },\n            skipWordsRex: null,\n            tagState: [],\n            afterPunct: null,\n            isFirst: null\n        };\n        return _textcaseEngine.call(state, config, string);\n    }\n\n    /**\n     * Force all letters in the string to uppercase.\n     */\n    function uppercase(state, string) {\n        var config = {\n            quoteState: null,\n            capitaliseWords: function(str) {\n                var words = str.split(\" \");\n                for (var i=0,ilen=words.length;i<ilen;i++) {\n                    var word = words[i];\n                    if (word) {\n                        // Okay.\n                        // So we need to pick up an array of locales from state.tmp.\n                        // This function is invoked in the context of queue.js, so\n                        // the item is not available here. Three levels to be included\n                        // in the array:\n                        // 1. Field language tag, if any\n                        // 2. Item language tag, if any\n                        // 3. Value of state.opt.lang\n                        words[i] = CSL.toLocaleUpperCase.call(state, word);\n                    }\n                }\n                return words.join(\" \");\n            },\n            skipWordsRex: null,\n            tagState: [],\n            afterPunct: null,\n            isFirst: null\n        };\n        return _textcaseEngine.call(state, config, string);\n    }\n\n    /**\n     * Similar to <b>capitalize_first</b>, but force the\n     * subsequent characters to lowercase.\n     */\n    function sentence(state, string) {\n        var config = {\n            quoteState: [],\n            capitaliseWords: function(str) {\n                var words = str.split(\" \");\n                for (var i=0,ilen=words.length;i<ilen;i++) {\n                    var word = words[i];\n                    if (word) {\n                        if (config.isFirst) {\n                            words[i] = _capitalise.call(state, word);\n                            config.isFirst = false;\n                        } else {\n                            words[i] = CSL.toLocaleLowerCase.call(state, word);\n                        }\n                    }\n                }\n                return words.join(\" \");\n            },\n            skipWordsRex: null,\n            tagState: [],\n            afterPunct: null,\n            isFirst: true\n        };\n        return _textcaseEngine.call(state, config, string);\n    }\n\n    function title(state, string) {\n        var config = {\n            quoteState: [],\n            capitaliseWords: function(str, i, followingTag) {\n                if (str.trim()) {\n                    var wordle = wordDoppel.split(str);\n                    var words = wordle.strings;\n                    for (var j=0,jlen=words.length;j<jlen;j++) {\n                        var word = words[j];\n                        if (!word) {\n                            continue;\n                        }\n                        let lcase = CSL.toLocaleLowerCase.call(state, word);\n                        let capitalize = false;\n                        if (word.length > 1 && !lcase.match(config.skipWordsRex)) {\n                            // Capitalize every word that is not a stop-word\n                            capitalize = true;\n                        } else if (j === (words.length - 1) && followingTag === \"-\") {\n                            capitalize = true;\n                        } else if (config.isFirst) {\n                            // Capitalize first word, even if a stop-word\n                            capitalize = true;\n                        } else if (config.afterPunct) {\n                            // Capitalize after punctuation\n                            capitalize = true;\n                        }\n                        // Don't capitalize if word already contains capitalization\n                        if (capitalize && word === lcase) {\n                            words[j] = _capitalise.call(state, word);\n                        }\n                        config.afterPunct = false;\n                        config.isFirst = false;\n                        config.lastWordPos = {\n                            strings: i,\n                            words: j\n                        };\n                    }\n                    str = wordDoppel.join(wordle);\n                }\n                return str;\n            },\n            skipWordsRex: state.locale[state.opt.lang].opts[\"skip-words-regexp\"],\n            tagState: [],\n            afterPunct: false,\n            isFirst: true\n        };\n        return _textcaseEngine.call(state, config, string);\n    }\n    \n    \n    /**\n     * Force capitalization of the first letter in the string, leave\n     * the rest of the characters untouched.\n     */\n    function capitalizeFirst(state, string) {\n        var config = {\n            quoteState: [],\n            capitaliseWords: function(str) {\n                var wordle = wordDoppel.split(str);\n                var words = wordle.strings;\n                for (var i=0,ilen=words.length;i<ilen;i++) {\n                    var word = words[i];\n                    if (word) {\n                        if (config.isFirst) {\n                            // Don't capitalize if word already contains capitalization\n                            if (word === CSL.toLocaleLowerCase.call(state, word)) {\n                                words[i] = _capitalise.call(state, word);\n                            }\n                            config.isFirst = false;\n                            break;\n                        }\n                    }\n                }\n                return wordDoppel.join(wordle);\n            },\n            skipWordsRex: null,\n            tagState: [],\n            afterPunct: null,\n            isFirst: true\n        };\n        return _textcaseEngine.call(state, config, string);\n    }\n\n    /**\n     * Force the first letter of each space-delimited\n     * word in the string to uppercase, and leave the remainder\n     * of the string untouched.  Single characters are forced\n     * to uppercase.\n     */\n    function capitalizeAll (state, string) {\n        var config = {\n            quoteState: [],\n            capitaliseWords: function(str) {\n                var wordle = wordDoppel.split(str);\n                var words = wordle.strings;\n                for (var i=0,ilen=words.length;i<ilen;i++) {\n                    var word = words[i];\n                    if (word) {\n                        // Don't capitalize if word already contains capitalization\n                        if (word === CSL.toLocaleLowerCase.call(state, word)) {\n                            words[i] = _capitalise.call(state, word);\n                        }\n                    }\n                }\n                return wordDoppel.join(wordle);\n            },\n            skipWordsRex: null,\n            tagState: [],\n            afterPunct: null,\n            isFirst: null\n        };\n        return _textcaseEngine.call(state, config, string);\n    }\n    return {\n        nameDoppel: nameDoppel,\n        passthrough: passthrough,\n        lowercase: lowercase,\n        uppercase: uppercase,\n        sentence: sentence,\n        title: title,\n        \"capitalize-first\": capitalizeFirst,\n        \"capitalize-all\": capitalizeAll\n    };\n}());\n\n/*global CSL: true */\n\n\n/**\n * Output specifications.\n * @class\n */\nCSL.Output.Formats = function () {};\n\n/**\n * HTML output format specification.\n * <p>The headline says it all.  The source code for this\n * object can be used as a template for producing other\n * output modes.</p>\n */\nCSL.Output.Formats.prototype.html = {\n    //\n    // text_escape: Format-specific function for escaping text destined\n    // for output.  Takes the text to be escaped as sole argument.  Function\n    // will be run only once across each portion of text to be escaped, it\n    // need not be idempotent.\n    //\n    \"text_escape\": function (text) {\n        // Numeric entities, in case the output is processed as\n        // xml in an environment in which HTML named entities are\n        // not declared.\n        if (!text) {\n            text = \"\";\n        }\n        return text.replace(/&/g, \"&#38;\")\n            .replace(/</g, \"&#60;\")\n            .replace(/>/g, \"&#62;\")\n            .replace(/\\s\\s/g, \"\\u00A0 \")\n            .replace(CSL.SUPERSCRIPTS_REGEXP,\n                     function(aChar) {\n                         // return \"&#60;sup&#62;\" + CSL.SUPERSCRIPTS[aChar] + \"&#60;/sup&#62;\";\n                         return \"<sup>\" + CSL.SUPERSCRIPTS[aChar] + \"</sup>\";\n                     });\n    },\n    \"bibstart\": \"<div class=\\\"csl-bib-body\\\">\\n\",\n    \"bibend\": \"</div>\",\n    \"@font-style/italic\": \"<i>%%STRING%%</i>\",\n    \"@font-style/oblique\": \"<em>%%STRING%%</em>\",\n    \"@font-style/normal\": \"<span style=\\\"font-style:normal;\\\">%%STRING%%</span>\",\n    \"@font-variant/small-caps\": \"<span style=\\\"font-variant:small-caps;\\\">%%STRING%%</span>\",\n    \"@passthrough/true\": CSL.Output.Formatters.passthrough,\n    \"@font-variant/normal\": \"<span style=\\\"font-variant:normal;\\\">%%STRING%%</span>\",\n    \"@font-weight/bold\": \"<b>%%STRING%%</b>\",\n    \"@font-weight/normal\": \"<span style=\\\"font-weight:normal;\\\">%%STRING%%</span>\",\n    \"@font-weight/light\": false,\n    \"@text-decoration/none\": \"<span style=\\\"text-decoration:none;\\\">%%STRING%%</span>\",\n    \"@text-decoration/underline\": \"<span style=\\\"text-decoration:underline;\\\">%%STRING%%</span>\",\n    \"@vertical-align/sup\": \"<sup>%%STRING%%</sup>\",\n    \"@vertical-align/sub\": \"<sub>%%STRING%%</sub>\",\n    \"@vertical-align/baseline\": \"<span style=\\\"baseline\\\">%%STRING%%</span>\",\n    \"@strip-periods/true\": CSL.Output.Formatters.passthrough,\n    \"@strip-periods/false\": CSL.Output.Formatters.passthrough,\n    \"@quotes/true\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            return state.getTerm(\"open-quote\");\n        }\n        return state.getTerm(\"open-quote\") + str + state.getTerm(\"close-quote\");\n    },\n    \"@quotes/inner\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            //\n            // Mostly right by being wrong (for apostrophes)\n            //\n            return \"\\u2019\";\n        }\n        return state.getTerm(\"open-inner-quote\") + str + state.getTerm(\"close-inner-quote\");\n    },\n    \"@quotes/false\": false,\n    //\"@bibliography/body\": function (state,str){\n    //    return \"<div class=\\\"csl-bib-body\\\">\\n\"+str+\"</div>\";\n    //},\n    \"@cite/entry\": function (state, str) {\n        return state.sys.wrapCitationEntry(str, this.item_id, this.locator_txt, this.suffix_txt);\n\t},\n    \"@bibliography/entry\": function (state, str) {\n        // Test for this.item_id to add decorations to\n        // bibliography output of individual entries.\n        //\n        // Full item content can be obtained from\n        // state.registry.registry[id].ref, using\n        // CSL variable keys.\n        //\n        // Example:\n        //\n        //   print(state.registry.registry[this.item_id].ref[\"title\"]);\n        //\n        // At present, for parallel citations, only the\n        // id of the master item is supplied on this.item_id.\n        var insert = \"\";\n        if (state.sys.embedBibliographyEntry) {\n            insert = state.sys.embedBibliographyEntry(this.item_id) + \"\\n\";\n        }\n        return \"  <div class=\\\"csl-entry\\\">\" + str + \"</div>\\n\" + insert;\n    },\n    \"@display/block\": function (state, str) {\n        return \"\\n\\n    <div class=\\\"csl-block\\\">\" + str + \"</div>\\n\";\n    },\n    \"@display/left-margin\": function (state, str) {\n        return \"\\n    <div class=\\\"csl-left-margin\\\">\" + str + \"</div>\";\n    },\n    \"@display/right-inline\": function (state, str) {\n        return \"<div class=\\\"csl-right-inline\\\">\" + str + \"</div>\\n  \";\n    },\n    \"@display/indent\": function (state, str) {\n        return \"<div class=\\\"csl-indent\\\">\" + str + \"</div>\\n  \";\n    },\n    \"@showid/true\": function (state, str, cslid) {\n        if (!state.tmp.just_looking && ! state.tmp.suppress_decorations) {\n            if (cslid) {\n                return \"<span class=\\\"\" + state.opt.nodenames[cslid] + \"\\\" cslid=\\\"\" + cslid + \"\\\">\" + str + \"</span>\";\n            } else if (this.params && \"string\" === typeof str) {\n                var prePunct = \"\";\n                if (str) {\n                    var m = str.match(CSL.VARIABLE_WRAPPER_PREPUNCT_REX);\n                    prePunct = m[1];\n                    str = m[2];\n                }\n                var postPunct = \"\";\n                if (str && CSL.SWAPPING_PUNCTUATION.indexOf(str.slice(-1)) > -1) {\n                    postPunct = str.slice(-1);\n                    str = str.slice(0,-1);\n                }\n                return state.sys.variableWrapper(this.params, prePunct, str, postPunct);\n            } else {\n                return str;\n            }\n        } else {\n            return str;\n        }\n    },\n    \"@URL/true\": function (state, str) {\n        return \"<a href=\\\"\" + str + \"\\\">\" + str + \"</a>\";\n    },\n    \"@DOI/true\": function (state, str) {\n        var doiurl = str;\n        if (!str.match(/^https?:\\/\\//)) {\n            doiurl = \"https://doi.org/\" + str;\n        }\n        return \"<a href=\\\"\" + doiurl + \"\\\">\" + str + \"</a>\";\n    }\n};\n\n/**\n * Plain text output specification.\n *\n * (Code contributed by Simon Kornblith, Center for History and New Media,\n * George Mason University.)\n */\nCSL.Output.Formats.prototype.text = {\n    //\n    // text_escape: Format-specific function for escaping text destined\n    // for output.  Takes the text to be escaped as sole argument.  Function\n    // will be run only once across each portion of text to be escaped, it\n    // need not be idempotent.\n    //\n    \"text_escape\": function (text) {\n        if (!text) {\n            text = \"\";\n        }\n        return text;\n    },\n    \"bibstart\": \"\",\n    \"bibend\": \"\",\n    \"@font-style/italic\": false,\n    \"@font-style/oblique\": false,\n    \"@font-style/normal\": false,\n    \"@font-variant/small-caps\": false,\n    \"@passthrough/true\": CSL.Output.Formatters.passthrough,\n    \"@font-variant/normal\": false,\n    \"@font-weight/bold\": false,\n    \"@font-weight/normal\": false,\n    \"@font-weight/light\": false,\n    \"@text-decoration/none\": false,\n    \"@text-decoration/underline\": false,\n    \"@vertical-align/baseline\": false,\n    \"@vertical-align/sup\": false,\n    \"@vertical-align/sub\": false,\n    \"@strip-periods/true\": CSL.Output.Formatters.passthrough,\n    \"@strip-periods/false\": CSL.Output.Formatters.passthrough,\n    \"@quotes/true\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            return state.getTerm(\"open-quote\");\n        }\n        return state.getTerm(\"open-quote\") + str + state.getTerm(\"close-quote\");\n    },\n    \"@quotes/inner\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            //\n            // Mostly right by being wrong (for apostrophes)\n            //\n            return \"\\u2019\";\n        }\n        return state.getTerm(\"open-inner-quote\") + str + state.getTerm(\"close-inner-quote\");\n    },\n    \"@quotes/false\": false,\n    //\"@bibliography/body\": function (state,str){\n    //    return \"<div class=\\\"csl-bib-body\\\">\\n\"+str+\"</div>\";\n    //},\n    \"@cite/entry\": function (state, str) {\n\t\treturn state.sys.wrapCitationEntry(str, this.item_id, this.locator_txt, this.suffix_txt);\n\t},\n    \"@bibliography/entry\": function (state, str) {\n        return str+\"\\n\";\n    },\n    \"@display/block\": function (state, str) {\n        return \"\\n\"+str;\n    },\n    \"@display/left-margin\": function (state, str) {\n        return str + \" \";\n    },\n    \"@display/right-inline\": function (state, str) {\n        return str;\n    },\n    \"@display/indent\": function (state, str) {\n        return \"\\n    \"+str;\n    },\n    \"@showid/true\": function (state, str) {\n        return str;\n    },\n    \"@URL/true\": function (state, str) {\n        return str;\n    },\n    \"@DOI/true\": function (state, str) {\n        return str;\n    }\n};\n\n/**\n * Plain text output specification.\n *\n * (Code contributed by Simon Kornblith, Center for History and New Media,\n * George Mason University.)\n */\nCSL.Output.Formats.prototype.rtf = {\n    //\n    // text_escape: Format-specific function for escaping text destined\n    // for output.  Takes the text to be escaped as sole argument.  Function\n    // will be run only once across each portion of text to be escaped, it\n    // need not be idempotent.\n    //\n    \"text_escape\": function (text) {\n        if (!text) {\n            text = \"\";\n        }\n        return text\n        .replace(/([\\\\{}])/g, \"\\\\$1\")\n        .replace(CSL.SUPERSCRIPTS_REGEXP,\n                 function(aChar) {\n                     return \"\\\\super \" + CSL.SUPERSCRIPTS[aChar] + \"\\\\nosupersub{}\";\n                 })\n        .replace(/[\\u007F-\\uFFFF]/g,\n                 function(aChar) { return \"\\\\uc0\\\\u\"+aChar.charCodeAt(0).toString()+\"{}\"; })\n        .split(\"\\t\").join(\"\\\\tab{}\");\n    },\n    \"@passthrough/true\": CSL.Output.Formatters.passthrough,\n    \"@font-style/italic\":\"{\\\\i{}%%STRING%%}\",\n    \"@font-style/normal\":\"{\\\\i0{}%%STRING%%}\",\n    \"@font-style/oblique\":\"{\\\\i{}%%STRING%%}\",\n    \"@font-variant/small-caps\":\"{\\\\scaps %%STRING%%}\",\n    \"@font-variant/normal\":\"{\\\\scaps0{}%%STRING%%}\",\n    \"@font-weight/bold\":\"{\\\\b{}%%STRING%%}\",\n    \"@font-weight/normal\":\"{\\\\b0{}%%STRING%%}\",\n    \"@font-weight/light\":false,\n    \"@text-decoration/none\":false,\n    \"@text-decoration/underline\":\"{\\\\ul{}%%STRING%%}\",\n    \"@vertical-align/baseline\":false,\n    \"@vertical-align/sup\":\"\\\\super %%STRING%%\\\\nosupersub{}\",\n    \"@vertical-align/sub\":\"\\\\sub %%STRING%%\\\\nosupersub{}\",\n    \"@strip-periods/true\": CSL.Output.Formatters.passthrough,\n    \"@strip-periods/false\": CSL.Output.Formatters.passthrough,\n    \"@quotes/true\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            return CSL.Output.Formats.rtf.text_escape(state.getTerm(\"open-quote\"));\n        }\n        return CSL.Output.Formats.rtf.text_escape(state.getTerm(\"open-quote\")) + str + CSL.Output.Formats.rtf.text_escape(state.getTerm(\"close-quote\"));\n    },\n    \"@quotes/inner\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            return CSL.Output.Formats.rtf.text_escape(\"\\u2019\");\n        }\n        return CSL.Output.Formats.rtf.text_escape(state.getTerm(\"open-inner-quote\")) + str + CSL.Output.Formats.rtf.text_escape(state.getTerm(\"close-inner-quote\"));\n    },\n    \"@quotes/false\": false,\n    \"bibstart\":\"{\\\\rtf \",\n    \"bibend\":\"}\",\n    \"@display/block\": \"\\\\line{}%%STRING%%\\\\line\\r\\n\",\n    \"@cite/entry\": function (state, str) {\n        // If wrapCitationEntry does not exist, cite/entry \n        // is not applied.\n\t\treturn state.sys.wrapCitationEntry(str, this.item_id, this.locator_txt, this.suffix_txt);\n\t},\n    \"@bibliography/entry\": function(state,str){\n        return str;\n    },\n    \"@display/left-margin\": function(state,str){\n        return str+\"\\\\tab \";\n    },\n    \"@display/right-inline\": function (state, str) {\n        return str+\"\\r\\n\";\n    },\n    \"@display/indent\": function (state, str) {\n        return \"\\n\\\\tab \"+str+\"\\\\line\\r\\n\";\n    },\n    \"@showid/true\": function (state, str) {\n        if (!state.tmp.just_looking && ! state.tmp.suppress_decorations) {\n            var prePunct = \"\";\n            if (str) {\n                var m = str.match(CSL.VARIABLE_WRAPPER_PREPUNCT_REX);\n                prePunct = m[1];\n                str = m[2];\n            }\n            var postPunct = \"\";\n            if (str && CSL.SWAPPING_PUNCTUATION.indexOf(str.slice(-1)) > -1) {\n                postPunct = str.slice(-1);\n                str = str.slice(0,-1);\n            }\n            return state.sys.variableWrapper(this.params, prePunct, str, postPunct);\n        } else {\n            return str;\n        }\n    },\n    \"@URL/true\": function (state, str) {\n        return str;\n    },\n    \"@DOI/true\": function (state, str) {\n        return str;\n    }\n};\n\n/*\n\n    This does not seem to work in Zotero plugins. For some reason the scope of the link does not\n    close when interpreted by the LibreOffice. Perhaps this creates a field within a field,\n    and that is not allowed?\n\n    \"@URL/true\": function (state, str) {\n        return \"\\\\field{\\\\*\\\\fldinst{HYPERLINK \\\"\" + str + \"\\\"}}{\\\\fldrslt{\"+ str +\"}}\";\n    },\n    \"@DOI/true\": function (state, str) {\n        return \"\\\\field{\\\\*\\\\fldinst{HYPERLINK \\\"https://doi.org/\" + str + \"\\\"}}{\\\\fldrslt{\"+ str +\"}}\";\n    }\n*/\n\n/**\n * AsciiDoc output specification.\n *\n * See http://asciidoc.org/ or https://asciidoctor.org/\n */\nCSL.Output.Formats.prototype.asciidoc = {\n    \"text_escape\": function (text) {\n        if (!text) {\n            text = \"\";\n        }\n        return text.replace(\"*\", \"pass:[*]\", \"g\")\n            .replace(\"_\", \"pass:[_]\", \"g\")\n            .replace(\"#\", \"pass:[#]\", \"g\")\n            .replace(\"^\", \"pass:[^]\", \"g\")\n            .replace(\"~\", \"pass:[~]\", \"g\")\n            .replace(\"[[\", \"pass:[[[]\", \"g\")\n            .replace(\"  \", \"&#160; \", \"g\")\n            .replace(CSL.SUPERSCRIPTS_REGEXP, function(aChar) {\n                return \"^\" + CSL.SUPERSCRIPTS[aChar] + \"^\";\n            });\n    },\n    \"bibstart\": \"\",\n    \"bibend\": \"\",\n    \"@passthrough/true\": CSL.Output.Formatters.passthrough,\n    \"@font-style/italic\": \"__%%STRING%%__\",\n    \"@font-style/oblique\": \"__%%STRING%%__\",\n    \"@font-style/normal\": false,\n    \"@font-variant/small-caps\": \"[small-caps]#%%STRING%%#\",\n    \"@font-variant/normal\": false,\n    \"@font-weight/bold\": \"**%%STRING%%**\",\n    \"@font-weight/normal\": false,\n    \"@font-weight/light\": false,\n    \"@text-decoration/none\": false,\n    \"@text-decoration/underline\": \"[underline]##%%STRING%%##\",\n    \"@vertical-align/sup\": \"^^%%STRING%%^^\",\n    \"@vertical-align/sub\": \"~~%%STRING%%~~\",\n    \"@vertical-align/baseline\": false,\n    \"@strip-periods/true\": CSL.Output.Formatters.passthrough,\n    \"@strip-periods/false\": CSL.Output.Formatters.passthrough,\n    \"@quotes/true\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            return \"``\";\n        }\n        return \"``\" + str + \"''\";\n    },\n    \"@quotes/inner\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            return \"`\";\n        }\n        return \"`\" + str + \"'\";\n    },\n    \"@quotes/false\": false,\n    \"@cite/entry\": function (state, str) {\n        // if wrapCitationEntry does not exist, cite/entry is not applied\n        return state.sys.wrapCitationEntry(str, this.item_id, this.locator_txt, this.suffix_txt);\n    },\n    \"@bibliography/entry\": function (state, str) {\n        return str + \"\\n\";\n    },\n    \"@display/block\": function (state, str) {\n        return str;\n    },\n    \"@display/left-margin\": function (state, str) {\n        return str;\n    },\n    \"@display/right-inline\": function (state, str) {\n        return \" \" + str;\n    },\n    \"@display/indent\": function (state, str) {\n        return \" \" + str;\n    },\n    \"@showid/true\": function (state, str) {\n        if (!state.tmp.just_looking && !state.tmp.suppress_decorations && this.params && \"string\" === typeof str) {\n            var prePunct = \"\";\n            if (str) {\n                var m = str.match(CSL.VARIABLE_WRAPPER_PREPUNCT_REX);\n                prePunct = m[1];\n                str = m[2];\n            }\n            var postPunct = \"\";\n            if (str && CSL.SWAPPING_PUNCTUATION.indexOf(str.slice(-1)) > -1) {\n                postPunct = str.slice(-1);\n                str = str.slice(0,-1);\n            }\n            return state.sys.variableWrapper(this.params, prePunct, str, postPunct);\n        } else {\n            return str;\n        }\n    },\n    \"@URL/true\": function (state, str) {\n        // AsciiDoc renders URLs automatically as links\n        return str;\n    },\n    \"@DOI/true\": function (state, str) {\n        var doiurl = str;\n        if (!str.match(/^https?:\\/\\//)) {\n            doiurl = \"https://doi.org/\" + str;\n        }\n        return doiurl + \"[\" + str + \"]\";\n    }\n};\n\n/**\n * Output specification for XSL-FO (Extensible Stylesheet\n * Language - Formatting Objects)\n *\n * See https://www.w3.org/TR/xsl11/#fo-section\n */\nCSL.Output.Formats.prototype.fo = {\n    \"text_escape\": function (text) {\n        if (!text) {\n            text = \"\";\n        }\n        return text.replace(/&/g, \"&#38;\")\n            .replace(/</g, \"&#60;\")\n            .replace(/>/g, \"&#62;\")\n            .replace(\"  \", \"&#160; \", \"g\")\n            .replace(CSL.SUPERSCRIPTS_REGEXP, function(aChar) {\n                return \"<fo:inline vertical-align=\\\"super\\\">\" + CSL.SUPERSCRIPTS[aChar] + \"</fo:inline>\";\n            });\n    },\n    \"bibstart\": \"\",\n    \"bibend\": \"\",\n    \"@passthrough/true\": CSL.Output.Formatters.passthrough,\n    \"@font-style/italic\": \"<fo:inline font-style=\\\"italic\\\">%%STRING%%</fo:inline>\",\n    \"@font-style/oblique\": \"<fo:inline font-style=\\\"oblique\\\">%%STRING%%</fo:inline>\",\n    \"@font-style/normal\": \"<fo:inline font-style=\\\"normal\\\">%%STRING%%</fo:inline>\",\n    \"@font-variant/small-caps\": \"<fo:inline font-variant=\\\"small-caps\\\">%%STRING%%</fo:inline>\",\n    \"@font-variant/normal\": \"<fo:inline font-variant=\\\"normal\\\">%%STRING%%</fo:inline>\",\n    \"@font-weight/bold\": \"<fo:inline font-weight=\\\"bold\\\">%%STRING%%</fo:inline>\",\n    \"@font-weight/normal\": \"<fo:inline font-weight=\\\"normal\\\">%%STRING%%</fo:inline>\",\n    \"@font-weight/light\": \"<fo:inline font-weight=\\\"lighter\\\">%%STRING%%</fo:inline>\",\n    \"@text-decoration/none\": \"<fo:inline text-decoration=\\\"none\\\">%%STRING%%</fo:inline>\",\n    \"@text-decoration/underline\": \"<fo:inline text-decoration=\\\"underline\\\">%%STRING%%</fo:inline>\",\n    \"@vertical-align/sup\": \"<fo:inline vertical-align=\\\"super\\\">%%STRING%%</fo:inline>\",\n    \"@vertical-align/sub\": \"<fo:inline vertical-align=\\\"sub\\\">%%STRING%%</fo:inline>\",\n    \"@vertical-align/baseline\": \"<fo:inline vertical-align=\\\"baseline\\\">%%STRING%%</fo:inline>\",\n    \"@strip-periods/true\": CSL.Output.Formatters.passthrough,\n    \"@strip-periods/false\": CSL.Output.Formatters.passthrough,\n    \"@quotes/true\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            return state.getTerm(\"open-quote\");\n        }\n        return state.getTerm(\"open-quote\") + str + state.getTerm(\"close-quote\");\n    },\n    \"@quotes/inner\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            return \"\\u2019\";\n        }\n        return state.getTerm(\"open-inner-quote\") + str + state.getTerm(\"close-inner-quote\");\n    },\n    \"@quotes/false\": false,\n    \"@cite/entry\": function (state, str) {\n        return state.sys.wrapCitationEntry(str, this.item_id, this.locator_txt, this.suffix_txt);\n    },\n    \"@bibliography/entry\": function (state, str) {\n        var indent = \"\";\n        if (state.bibliography && state.bibliography.opt && state.bibliography.opt.hangingindent) {\n            var hi = state.bibliography.opt.hangingindent;\n            indent = \" start-indent=\\\"\" + hi +\"em\\\" text-indent=\\\"-\" + hi + \"em\\\"\";\n        }\n        var insert = \"\";\n        if (state.sys.embedBibliographyEntry) {\n            insert = state.sys.embedBibliographyEntry(this.item_id) + \"\\n\";\n        }\n        return \"<fo:block id=\\\"\" + this.system_id + \"\\\"\" + indent + \">\" + str + \"</fo:block>\\n\" + insert;\n    },\n    \"@display/block\": function (state, str) {\n        return \"\\n  <fo:block>\" + str + \"</fo:block>\\n\";\n    },\n    \"@display/left-margin\": function (state, str) {\n        return \"\\n  <fo:table table-layout=\\\"fixed\\\" width=\\\"100%\\\">\\n    \" +\n                \"<fo:table-column column-number=\\\"1\\\" column-width=\\\"$$$__COLUMN_WIDTH_1__$$$\\\"/>\\n    \" +\n                \"<fo:table-column column-number=\\\"2\\\" column-width=\\\"proportional-column-width(1)\\\"/>\\n    \" +\n                \"<fo:table-body>\\n      \" +\n                    \"<fo:table-row>\\n        \" +\n                        \"<fo:table-cell>\\n          \" +\n                            \"<fo:block>\" + str + \"</fo:block>\\n        \" +\n                        \"</fo:table-cell>\\n        \";\n    },\n    \"@display/right-inline\": function (state, str) {\n        return \"<fo:table-cell>\\n          \" +\n                \"<fo:block>\" + str + \"</fo:block>\\n        \" +\n            \"</fo:table-cell>\\n      \" +\n            \"</fo:table-row>\\n    \" +\n            \"</fo:table-body>\\n  \" +\n            \"</fo:table>\\n\";\n    },\n    \"@display/indent\": function (state, str) {\n        return \"<fo:block margin-left=\\\"2em\\\">\" + str + \"</fo:block>\\n\";\n    },\n    \"@showid/true\": function (state, str) {\n        if (!state.tmp.just_looking && !state.tmp.suppress_decorations && this.params && \"string\" === typeof str) {\n            var prePunct = \"\";\n            if (str) {\n                var m = str.match(CSL.VARIABLE_WRAPPER_PREPUNCT_REX);\n                prePunct = m[1];\n                str = m[2];\n            }\n            var postPunct = \"\";\n            if (str && CSL.SWAPPING_PUNCTUATION.indexOf(str.slice(-1)) > -1) {\n                postPunct = str.slice(-1);\n                str = str.slice(0,-1);\n            }\n            return state.sys.variableWrapper(this.params, prePunct, str, postPunct);\n        } else {\n            return str;\n        }\n    },\n    \"@URL/true\": function (state, str) {\n        return \"<fo:basic-link external-destination=\\\"url('\" + str + \"')\\\">\" + str + \"</fo:basic-link>\";\n    },\n    \"@DOI/true\": function (state, str) {\n        var doiurl = str;\n        if (!str.match(/^https?:\\/\\//)) {\n            doiurl = \"https://doi.org/\" + str;\n        }\n        return \"<fo:basic-link external-destination=\\\"url('\" + doiurl + \"')\\\">\" + str + \"</fo:basic-link>\";\n    }\n};\n\n/**\n * LaTeX .bbl output.\n *\n * (Code contributed by Egon Willighagen, based on the prototype.text code.)\n */\nCSL.Output.Formats.prototype.latex = {\n    \"text_escape\": function (text) {\n        if (!text) {\n            text = \"\";\n        }\n        return text;\n    },\n    \"bibstart\": \"\\\\begin{thebibliography}{4}\",\n    \"bibend\": \"\\\\end{thebibliography}\",\n    \"@font-style/italic\": \"{\\\\em %%STRING%%}\",\n    \"@font-style/oblique\": false,\n    \"@font-style/normal\": false,\n    \"@font-variant/small-caps\": false,\n    \"@passthrough/true\": CSL.Output.Formatters.passthrough,\n    \"@font-variant/normal\": false,\n    \"@font-weight/bold\": \"{\\\\bf %%STRING%%}\",\n    \"@font-weight/normal\": false,\n    \"@font-weight/light\": false,\n    \"@text-decoration/none\": false,\n    \"@text-decoration/underline\": false,\n    \"@vertical-align/baseline\": false,\n    \"@vertical-align/sup\": false,\n    \"@vertical-align/sub\": false,\n    \"@strip-periods/true\": CSL.Output.Formatters.passthrough,\n    \"@strip-periods/false\": CSL.Output.Formatters.passthrough,\n    \"@quotes/true\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            return state.getTerm(\"open-quote\");\n        }\n        return state.getTerm(\"open-quote\") + str + state.getTerm(\"close-quote\");\n    },\n    \"@quotes/inner\": function (state, str) {\n        if (\"undefined\" === typeof str) {\n            //\n            // Mostly right by being wrong (for apostrophes)\n            //\n            return \"\\u2019\";\n        }\n        return state.getTerm(\"open-inner-quote\") + str + state.getTerm(\"close-inner-quote\");\n    },\n    \"@quotes/false\": false,\n    //\"@bibliography/body\": function (state,str){\n    //    return \"<div class=\\\"csl-bib-body\\\">\\n\"+str+\"</div>\";\n    //},\n    \"@cite/entry\": function (state, str) {\n\t\treturn state.sys.wrapCitationEntry(str, this.item_id, this.locator_txt, this.suffix_txt);\n\t},\n    \"@bibliography/entry\": function (state, str) {\n        return \"\\\\bibitem{\" + state.sys.embedBibliographyEntry(this.item_id) + \"}\\n\";\n    },\n    \"@display/block\": function (state, str) {\n        return \"\\n\"+str;\n    },\n    \"@display/left-margin\": function (state, str) {\n        return str;\n    },\n    \"@display/right-inline\": function (state, str) {\n        return str;\n    },\n    \"@display/indent\": function (state, str) {\n        return \"\\n    \"+str;\n    },\n    \"@showid/true\": function (state, str, cslid) {\n        return str;\n    },\n    \"@URL/true\": function (state, str) {\n        return str;\n    },\n    \"@DOI/true\": function (state, str) {\n        return str;\n    }\n};\n\nCSL.Output.Formats = new CSL.Output.Formats();\n\n/*global CSL: true */\n\n\n//\n// Time for a rewrite of this module.\n//\n// Simon has pointed out that list and hash behavior can\n// be obtained by ... just using a list and a hash.  This\n// is faster for batched operations, because sorting is\n// greatly optimized.  Since most of the interaction\n// with plugins at runtime will involve batches of\n// references, there will be solid gains if the current,\n// one-reference-at-a-time approach implemented here\n// can be replaced with something that leverages the native\n// sort method of the Array() type.\n//\n// That's going to take some redesign, but it will simplify\n// things in the long run, so it might as well happen now.\n//\n// We'll keep makeCitationCluster and makeBibliography as\n// simple methods that return a string.  Neither should\n// have any effect on internal state.  This will be a change\n// in behavior for makeCitationCluster.\n//\n// A new updateItems command will be introduced, to replace\n// insertItems.  It will be a simple list of IDs, in the\n// sequence of first reference in the document.\n//\n// The calling application should always invoke updateItems\n// before makeCitationCluster.\n//\n\n//\n// should allow batched registration of items by\n// key.  should behave as an update, with deletion\n// of items and the tainting of disambiguation\n// partner sets affected by a deletes and additions.\n//\n//\n// we'll need a reset method, to clear the decks\n// in the citation area and start over.\n\n/**\n * Registry of cited items.\n * <p>This is a persistent store of disambiguation and\n * sort order information relating to individual items\n * for which rendering is requested.  Item data is stored\n * in a hash, with the item key as hash key, for quick\n * retrieval.  A virtual sequence within the hashed store\n * is maintained on the fly as items are added to the\n * store, using <code>*_next</code> and <code>*_prev</code>\n * attributes on each item.  A separate hash of items\n * based on their undisambiguated cite form is\n * maintained, and the item id list and disambiguation\n * level for each set of disambiguation partners is shared\n * through the registry item.</p>\n * @class\n */\nCSL.Registry = function (state) {\n    this.debug = false;\n    this.state = state;\n    this.registry = {};\n    this.reflist = [];\n    this.refhash = {};\n    this.namereg = new CSL.Registry.NameReg(state);\n    this.citationreg = new CSL.Registry.CitationReg(state);\n    // See CSL.NameOutput.prototype.outputNames\n    // and CSL.Registry.prototype.doinserts\n    this.authorstrings = {};\n    \n    // for parallel delimiter support\n    this.masterMap = {};\n    \n    //\n    // shared scratch vars\n    this.mylist = [];\n    this.myhash = {};\n    this.deletes = [];\n    this.inserts = [];\n    this.uncited = {};\n    this.refreshes = {};\n    this.akeys = {};\n    this.oldseq = {};\n    this.return_data = {};\n    //\n    // each ambig is a list of the ids of other objects\n    // that have the same base-level rendering\n    this.ambigcites = {};\n    this.ambigresets = {};\n    this.sorter = new CSL.Registry.Comparifier(state, \"bibliography_sort\");\n    //this.modes = CSL.getModes.call(this.state);\n    //this.checkerator = new CSL.Checkerator();\n\n    this.getSortedIds = function () {\n        var ret = [];\n        for (var i = 0, ilen = this.reflist.length; i < ilen; i += 1) {\n            ret.push(\"\" + this.reflist[i].id);\n        }\n        return ret;\n    };\n\n    this.getSortedRegistryItems = function () {\n        var ret = [];\n        for (var i = 0, ilen = this.reflist.length; i < ilen; i += 1) {\n            ret.push(this.reflist[i]);\n        }\n        return ret;\n    };\n};\n\n//\n// Here's the sequence of operations to be performed on\n// update:\n//\n//  1.  (o) [init] Receive list as function argument, store as hash and as list.\n//  2.  (o) [init] Initialize refresh list.  Never needs sorting, only hash required.\n\n//  3.  (o) [dodeletes] Delete loop.\n//  3a. (o) [dodeletes] Delete names in items to be deleted from names reg.\n//  3b. (o) [dodeletes] Complement refreshes list with items affected by\n//      possible name changes.  We'll actually perform the refresh once\n//      all of the necessary data and parameters have been established\n//      in the registry.\n//  3c. (o) [dodeletes] Delete all items to be deleted from their disambig pools.\n//  3d. (o) [dodeletes] Delete all items in deletion list from hash.\n\n//  4.  (o) [doinserts] Insert loop.\n//  4a. (o) [doinserts] Retrieve entries for items to insert.\n//  4b. (o) [doinserts] Generate ambig key.\n//  4c. (o) [doinserts] Add names in items to be inserted to names reg\n//      (implicit in getAmbiguousCite).\n//  4d. (o) [doinserts] Record ambig pool key on akey list (used for updating further\n//      down the chain).\n//  4e. (o) [doinserts] Create registry token.\n//  4f. (o) [doinserts] Add item ID to hash.\n//  4g. (o) [doinserts] Set and record the base token to hold disambiguation\n//      results (\"disambig\" in the object above).\n//  5.  (o) [rebuildlist] Create \"new\" list of hash pointers, in the order given\n//          in the argument to the update function.\n//  6.  (o) [rebuildlist] Apply citation numbers to new list.\n//  7.  (o) [dorefreshes] Refresh items requiring update.\n\n\n\n//  5. (o) [delnames] Delete names in items to be deleted from names reg, and obtain IDs\n//         of other items that would be affected by changes around that surname.\n//  6. (o) [delnames] Complement delete and insert lists with items affected by\n//         possible name changes.\n//  7. (o) [delambigs] Delete all items to be deleted from their disambig pools.\n//  8. (o) [delhash] Delete all items in deletion list from hash.\n\n//  9. (o) [addtohash] Retrieve entries for items to insert.\n// 10. (o) [addtohash] Add items to be inserted to their disambig pools.\n// 11. (o) [addtohash] Add names in items to be inserted to names reg\n//         (implicit in getAmbiguousCite).\n// 12. (o) [addtohash] Create registry token for each item to be inserted.\n// 13. (o) [addtohash] Add items for insert to hash.\n\n// 14. (o) [buildlist] Create \"new\" list of hash pointers, in the order given in the argument\n//         to the update function.\n// 15. (o) [renumber] Apply citation numbers to new list.\n// 16. (o) [setdisambigs] Set disambiguation parameters on each inserted item token.\n// 17. (o) [setsortkeys] Set sort keys on each item token.\n// 18. (o) [sorttokens] Resort token list\n// 19. (o) [renumber] Reset citation numbers on list items\n//\n\nCSL.Registry.prototype.init = function (itemIDs, uncited_flag) {\n    var i, ilen;\n    this.oldseq = {};\n    //  1. Receive list as function argument, store as hash and as list.\n    //\n    // Result:\n    //   this.mylist: a list of all itemIDs of referenced items, cited and uncited.\n    //   this.myhash: a hash of index positions in this.mylist.\n    //   this.uncited: hash of uncited itemIDs.\n    //\n    // Proceed as follows.\n    //\n    if (uncited_flag) {\n        // If uncited_flag is non-nil, add any missing itemIDs to this.mylist\n        // from itemIDs input list, and set the itemIDs in itemIDs on this.uncited.\n        this.uncited = {};\n        for (var i=0,ilen=itemIDs.length;i<ilen; i += 1) {\n            if (!this.myhash[itemIDs[i]]) {\n                this.mylist.push(\"\" + itemIDs[i]);\n            }\n            this.uncited[itemIDs[i]] = true;\n            this.myhash[itemIDs[i]] = true;\n        }\n    } else {\n        // If uncited_flag is nil, remove duplicate itemIDs from itemIDs input\n        // list, set the result on this.mylist, and add missing itemIDs to\n        // this.mylist from itemIDs input list.\n        for (var key in this.uncited) {\n            itemIDs.push(key);\n        }\n        var myhash = {};\n        for (i=itemIDs.length-1;i>-1; i += -1) {\n            if (myhash[itemIDs[i]]) {\n                itemIDs = itemIDs.slice(0, i).concat(itemIDs.slice(i + 1));\n            } else {\n                myhash[itemIDs[i]] = true;\n            }\n        }\n        this.mylist = itemIDs;\n        this.myhash = myhash;\n    }\n    //\n    //  2. Initialize refresh list.  Never needs sorting, only hash required.\n    //\n    this.refreshes = {};\n    this.touched = {};\n    this.ambigsTouched = {};\n    this.ambigresets = {};\n};\n\nCSL.Registry.prototype.dopurge = function (myhash) {\n    // Remove any uncited items not in myhash\n    for (var i=this.mylist.length-1;i>-1;i+=-1) {\n        // Might not want to be quite this restrictive.\n        if (this.citationreg.citationsByItemId) {\n            if ((!this.citationreg.citationsByItemId || !this.citationreg.citationsByItemId[this.mylist[i]]) && !myhash[this.mylist[i]]) {\n                delete this.myhash[this.mylist[i]];\n                delete this.uncited[this.mylist[i]];\n                this.mylist = this.mylist.slice(0,i).concat(this.mylist.slice(i+1));\n            }\n        }\n    }\n    this.dodeletes(this.myhash);\n};\n\nCSL.Registry.prototype.dodeletes = function (myhash) {\n    var otheritems, key, ambig, pos, len, items, kkey, mypos, id;\n    if (\"string\" === typeof myhash) {\n        var key = myhash;\n        myhash = {};\n        myhash[key] = true;\n    }\n    //\n    //  3. Delete loop.\n    //\n    for (var key in this.registry) {\n        if (!myhash[key]) {\n            // skip items explicitly marked as uncited\n            if (this.uncited[key]) {\n                continue;\n            }\n            //\n            //  3a. Delete names in items to be deleted from names reg.\n            //\n            otheritems = this.namereg.delitems(key);\n            //\n            //  3b. Complement refreshes list with items affected by\n            //      possible name changes.  We'll actually perform the refresh once\n            //      all of the necessary data and parameters have been established\n            //      in the registry.\n            //\n            for (kkey in otheritems) {\n                this.refreshes[kkey] = true;\n            }\n            //\n            //  3c. Delete all items to be deleted from their disambig pools.\n            //\n            ambig = this.registry[key].ambig;\n            mypos = this.ambigcites[ambig].indexOf(key);\n            if (mypos > -1) {\n                items = this.ambigcites[ambig].slice();\n                this.ambigcites[ambig] = items.slice(0, mypos).concat(items.slice(mypos+1, items.length));\n                this.ambigresets[ambig] = this.ambigcites[ambig].length;\n            }\n            //\n            // XX. What we've missed is to provide an update of all\n            // items sharing the same ambig  += -1 the remaining items in\n            // ambigcites.  So let's do that here, just in case the\n            // names update above doesn't catch them all.\n            //\n            len = this.ambigcites[ambig].length;\n            for (pos = 0; pos < len; pos += 1) {\n                id = \"\" + this.ambigcites[ambig][pos];\n                this.refreshes[id] = true;\n            }\n            //\n            // 3d-0. Remove parallel id references and realign\n            // parallel ID refs.\n            //\n            if (this.registry[key].siblings) {\n                if (this.registry[key].siblings.length == 1) {\n                    var loneSiblingID = this.registry[key].siblings[0];\n                    if (this.registry[loneSiblingID].siblings) {\n                        this.registry[loneSiblingID].siblings.pop();\n                        this.registry[loneSiblingID].master = true;\n                        // this.registry[loneSiblingID].parallel = false;\n                    }\n                } else if (this.registry[key].siblings.length > 1) {\n                    var removeIDs = [key];\n                    if (this.registry[key].master) {\n                        var newmasterID = this.registry[key].siblings[0];\n                        var newmaster = this.registry[newmasterID];\n                        newmaster.master = true;\n                        // newmaster.parallel_delimiter is set externally, if at all\n                        // newmaster.parallel = false;\n                        removeIDs.push(newmasterID);\n                        // for (var k = 0, klen = this.registry[key].siblings.length; k < klen; k += 1) {\n                        //     this.registry[this.registry[key].siblings[k]].parallel = newmasterID;\n                        // }\n                    }\n                    var buffer = [];\n                    for (var k = this.registry[key].siblings.length - 1; k > -1; k += -1) {\n                        var siblingID = this.registry[key].siblings.pop();\n                        if (removeIDs.indexOf(siblingID) === -1) {\n                            buffer.push(siblingID);\n                        }\n                    }\n                    for (var k = buffer.length - 1; k > -1; k += -1) {\n                        this.registry[key].siblings.push(buffer[k]);\n                    }\n                }\n            }\n            //\n            // 3d-1. Remove item from reflist\n            for (var i=this.reflist.length-1;i>-1;i--) {\n                if (this.reflist[i].id === key) {\n                    this.reflist = this.reflist.slice(0, i).concat(this.reflist.slice(i+1));\n                }\n            }\n            //\n            //  3d. Delete all items in deletion list from hash.\n            //\n            delete this.registry[key];\n            delete this.refhash[key];\n\n            // For processCitationCluster()\n            this.return_data.bibchange = true;\n        }\n    }\n    // Disabled.  See formats.js for code.\n    // this.state.fun.decorate.items_delete( this.state.output[this.state.opt.mode].tmp, myhash );\n};\n\nCSL.Registry.prototype.doinserts = function (mylist) {\n    var item, Item, akey, newitem, abase, i, ilen;\n    if (\"string\" === typeof mylist) {\n        mylist = [mylist];\n    }\n    //\n    //  4. Insert loop.\n    //\n    for (var i = 0, ilen = mylist.length; i < ilen; i += 1) {\n        item = mylist[i];\n        if (!this.registry[item]) {\n            //\n            //  4a. Retrieve entries for items to insert.\n            //\n            Item = this.state.retrieveItem(item);\n\n            //\n            //  4b. Generate ambig key.\n            //\n            // AND\n            //\n            //  4c. Add names in items to be inserted to names reg\n            //      (implicit in getAmbiguousCite).\n            //\n            akey = CSL.getAmbiguousCite.call(this.state, Item);\n            this.ambigsTouched[akey] = true;\n            //\n            //  4d. Record ambig pool key on akey list (used for updating further\n            //      down the chain).\n            //\n            if (!Item.legislation_id) {\n                this.akeys[akey] = true;\n            }\n            //\n            //  4e. Create registry token.\n            //\n            newitem = {\n                \"id\": \"\" + item,\n                \"seq\": 0,\n                \"offset\": 0,\n                \"sortkeys\": false,\n                \"ambig\": false,\n                \"rendered\": false,\n                \"disambig\": false,\n                \"ref\": Item,\n                \"newItem\": true\n            };\n            //\n            //\n            //  4f. Add item ID to hash.\n            //\n            this.registry[item] = newitem;\n            //\n            //  4f(a). Add first reference note number\n            //         (this may be redundant)\n            if (this.citationreg.citationsByItemId && this.citationreg.citationsByItemId[item]) {\n                this.registry[item][\"first-reference-note-number\"] = this.citationreg.citationsByItemId[item][0].properties.noteIndex;\n            }\n\n            //\n            //  4g. Set and record the base token to hold disambiguation\n            //      results (\"disambig\" in the object above).\n            //\n            abase = CSL.getAmbigConfig.call(this.state);\n            this.registerAmbigToken(akey, item, abase);\n\n            //if (!this.ambigcites[akey]){\n            //    this.ambigcites[akey] = [];\n            //}\n            //CSL.debug(\"Run: \"+item+\"(\"+this.ambigcites[akey]+\")\");\n            //if (this.ambigcites[akey].indexOf(item) === -1){\n            //    CSL.debug(\"  Add: \"+item);\n            //    this.ambigcites[akey].push(item);\n            //}\n            //\n            //  4h. Make a note that this item needs its sort keys refreshed.\n            //\n            this.touched[item] = true;\n            // For processCitationCluster()\n            this.return_data.bibchange = true;\n        }\n    }\n    // Disabled.  See formats.js for code.\n    // this.state.fun.decorate.items_add( this.state.output[this.state.opt.mode].tmp, mylist );\n};\n\n/*\n// No longer required.\nCSL.Registry.prototype.douncited = function () {\n    var pos, len;\n    var cited_len = this.mylist.length - this.uncited.length;\n    for (pos = 0, len = cited_len; pos < len; pos += 1) {\n        this.registry[this.mylist[pos]].uncited = false;\n    }\n    for (pos = cited_len, len = this.mylist.length; pos < len; pos += 1) {\n        this.registry[this.mylist[pos]].uncited = true;\n    }\n};\n*/\n\nCSL.Registry.prototype.rebuildlist = function (nosort) {\n    var len, pos, item, Item;\n    //\n    //  5. Create \"new\" list of hash pointers, in the order given in the argument\n    //     to the update function.\n    //\n    //\n    // XXX Keep reflist in place.\n    //\n    if (!nosort) {\n        this.reflist_inserts = [];\n        //\n        //  6. Apply citation numbers to new list,\n        //     saving off old sequence numbers as we go.\n        //\n        // XXX Just memo inserts -- actual insert happens below, at last \"sort\"\n        //\n        len = this.mylist.length;\n        for (pos = 0; pos < len; pos += 1) {\n            item = this.mylist[pos];\n            Item = this.registry[item];\n            if (Item.newItem) {\n                this.reflist_inserts.push(Item);\n            }\n            this.oldseq[item] = this.registry[item].seq;\n            this.registry[item].seq = (pos + 1);\n        }\n    } else {\n        this.reflist = [];\n        len = this.mylist.length;\n        for (pos = 0; pos < len; pos += 1) {\n            item = this.mylist[pos];\n            Item = this.registry[item];\n            this.reflist.push(Item);\n            this.oldseq[item] = this.registry[item].seq;\n            this.registry[item].seq = (pos + 1);\n        }\n    }\n};\n\n/*\n * Okay, at this point we should have a numbered list\n * of registry tokens in the notional order requested,\n * with sequence numbers to reconstruct the ordering\n * if the list is remangled.  So far so good.\n */\n\nCSL.Registry.prototype.dorefreshes = function () {\n    var key, regtoken, Item, akey, abase;\n    //\n    //  7. Refresh items requiring update.\n    //\n    // It looks like we need to do four things on each cite for refresh:\n    // (1) Generate the akey for the cite.\n    // (2) Register it on the ambig token.\n    // (3) Register the akey in this.akeys\n    // (4) Register the item ID in this.touched\n    //\n    for (var key in this.refreshes) {\n        regtoken = this.registry[key];\n        if (!regtoken) {\n            continue;\n        }\n        regtoken.sortkeys = undefined;\n        Item = this.state.refetchItem(key);\n        var akey = regtoken.ambig;\n\n        if (\"undefined\" === typeof akey) {\n            this.state.tmp.disambig_settings = false;\n            akey = CSL.getAmbiguousCite.call(this.state, Item);\n            abase = CSL.getAmbigConfig.call(this.state);\n            this.registerAmbigToken(akey, key, abase);\n        }\n        for (var akkey in this.ambigresets) {\n            if (this.ambigresets[akkey] === 1) {\n                var loneKey = this.ambigcites[akey][0];\n                var Item = this.state.refetchItem(loneKey);\n                this.registry[loneKey].disambig = new CSL.AmbigConfig();\n                this.state.tmp.disambig_settings = false;\n                var akey = CSL.getAmbiguousCite.call(this.state, Item);\n                var abase = CSL.getAmbigConfig.call(this.state);\n                this.registerAmbigToken(akey, loneKey, abase);\n            }\n        }\n        this.state.tmp.taintedItemIDs[key] = true;\n        this.ambigsTouched[akey] = true;\n        if (!Item.legislation_id) {\n            this.akeys[akey] = true;\n        }\n        this.touched[key] = true;\n    }\n};\n\n/*\n * Main disambiguation  += -1 can everything for disambiguation be\n * crunched into this function?\n */\nCSL.Registry.prototype.setdisambigs = function () {\n    //\n    // Okay, more changes.  Here is where we resolve all disambiguation\n    // issues for cites touched by the update.  The this.ambigcites set is\n    // based on the complete short form of citations, and is the basis on\n    // which names are added and minimal adding of initials or given names\n    // is performed.\n    //\n\n    //\n    //  8.  Set disambiguation parameters on each inserted item token.\n    //\n    for (var akey in this.ambigsTouched) {\n        //\n        // Disambiguation is fully encapsulated.\n        // Disambiguator will run only if there are multiple\n        // items, and at least one disambiguation mode is\n        // in effect.\n        this.state.disambiguate.run(akey);\n    }\n    this.ambigsTouched = {};\n    this.akeys = {};\n};\n\n\n\nCSL.Registry.prototype.renumber = function () {\n    var len, pos, item;\n    //\n    // 19. Reset citation numbers on list items\n    //\n    if (this.state.bibliography_sort.opt.citation_number_sort_direction === CSL.DESCENDING) {\n        this.state.bibliography_sort.tmp.citation_number_map = {};\n    }\n    len = this.reflist.length;\n    for (pos = 0; pos < len; pos += 1) {\n        item = this.reflist[pos];\n        // save the overhead of rerenderings if citation-number is not\n        // used in the style.\n        item.seq = (pos + 1);\n        if (this.state.bibliography_sort.opt.citation_number_sort_direction === CSL.DESCENDING) {\n            this.state.bibliography_sort.tmp.citation_number_map[item.seq] = (this.reflist.length - item.seq + 1);\n        }\n        // update_mode is set to CSL.NUMERIC if citation-number is rendered\n        // in citations.\n        if (this.state.opt.update_mode === CSL.NUMERIC && item.seq != this.oldseq[item.id]) {\n            this.state.tmp.taintedItemIDs[item.id] = true;\n        }\n        if (item.seq != this.oldseq[item.id]) {\n            this.return_data.bibchange = true;\n        }\n    }\n};\n\nCSL.Registry.prototype.setsortkeys = function () {\n    var key;\n    //\n    // 17. Set sort keys on each item token.\n    //\n    for (var i = 0, ilen = this.mylist.length; i < ilen; i += 1) {\n        var key = this.mylist[i];\n        // The last of these conditions may create some thrashing on styles that do not require sorting.\n        if (this.touched[key] || this.state.tmp.taintedItemIDs[key] || !this.registry[key].sortkeys) {\n            this.registry[key].sortkeys = CSL.getSortKeys.call(this.state, this.state.retrieveItem(key), \"bibliography_sort\");\n        }\n    }\n};\n\nCSL.Registry.prototype._insertItem = function(element, array) {\n    array.splice(this._locationOf(element, array) + 1, 0, element);\n    return array;\n};\n\nCSL.Registry.prototype._locationOf = function(element, array, start, end) {\n    if (array.length === 0) {\n        return -1;\n    }\n    start = start || 0;\n    end = end || array.length;\n    var pivot = (start + end) >> 1;  // should be faster than dividing by 2\n    \n    var c = this.sorter.compareKeys(element, array[pivot]);\n    if (end - start <= 1) {\n        return c == -1 ? pivot - 1 : pivot;\n    }\n    switch (c) {\n        case -1: return this._locationOf(element, array, start, pivot);\n        case 0: return pivot;\n        case 1: return this._locationOf(element, array, pivot, end);\n    }\n};\n\nCSL.Registry.prototype.sorttokens = function (nosort) {\n    var len, item, Item, pos;\n    //\n    // 18. Resort token list.\n    //\n    if (!nosort) {\n        this.reflist_inserts = [];\n        len = this.mylist.length;\n        for (pos = 0; pos < len; pos += 1) {\n            item = this.mylist[pos];\n            Item = this.registry[item];\n            if (Item.newItem) {\n                this.reflist_inserts.push(Item);\n            }\n        }\n        // There is a thin possibility that tainted items in a sorted list\n        // will change position due to disambiguation. We cover for that here.\n        for (var key in this.state.tmp.taintedItemIDs) {\n            if (this.registry[key] && !this.registry[key].newItem) {\n                // Move tainted items from reflist to reflist_inserts\n                for (var i=this.reflist.length-1;i>-1;i--) {\n                    if (this.reflist[i].id === key) {\n                        this.reflist_inserts.push(this.reflist[i]);\n                        this.reflist = this.reflist.slice(0, i).concat(this.reflist.slice(i+1));\n                    }\n                }\n            }\n        }\n        for (var i=0,ilen=this.reflist_inserts.length;i<ilen;i++) {\n            var Item = this.reflist_inserts[i];\n            delete Item.newItem;\n            this.reflist = this._insertItem(Item, this.reflist);\n        }\n        for (pos = 0; pos < len; pos += 1) {\n            item = this.mylist[pos];\n            Item = this.registry[item];\n            this.registry[item].seq = (pos + 1);\n        }\n    }\n};\n\n/**\n * Compare two sort keys\n * <p>Nested, because keys are an array.</p>\n */\nCSL.Registry.Comparifier = function (state, keyset) {\n    var sort_directions, len, pos, compareKeys;\n    var sortCompare = CSL.getSortCompare.call(state, state.opt[\"default-locale-sort\"]);\n    sort_directions = state[keyset].opt.sort_directions;\n    this.compareKeys = function (a, b) {\n        len = a.sortkeys ? a.sortkeys.length : 0;\n        for (pos = 0; pos < len; pos += 1) {\n            //\n            // for ascending sort 1 uses 1, -1 uses -1.\n            // For descending sort, the values are reversed.\n            //\n            // Need to handle undefined values.  No way around it.\n            // So have to screen .localeCompare (which is also\n            // needed) from undefined values.  Everywhere, in all\n            // compares.\n            //\n            var cmp = 0;\n            if (a.sortkeys[pos] === b.sortkeys[pos]) {\n                cmp = 0;\n            } else if (\"undefined\" === typeof a.sortkeys[pos]) {\n                cmp = sort_directions[pos][1];\n            } else if (\"undefined\" === typeof b.sortkeys[pos]) {\n                cmp = sort_directions[pos][0];\n            } else {\n                // cmp = a.sortkeys[pos].localeCompare(b.sortkeys[pos]);\n                cmp = sortCompare(a.sortkeys[pos], b.sortkeys[pos]);\n            }\n            if (0 < cmp) {\n                return sort_directions[pos][1];\n            } else if (0 > cmp) {\n                return sort_directions[pos][0];\n            }\n        }\n        if (a.seq > b.seq) {\n            return 1;\n        } else if (a.seq < b.seq) {\n            return -1;\n        }\n        return 0;\n    };\n    compareKeys = this.compareKeys;\n    this.compareCompositeKeys = function (a, b) {\n        return compareKeys(a[1], b[1]);\n    };\n};\n\n\n/**\n * Compare two disambiguation tokens by their registry sort order\n * <p>Disambiguation lists need to be sorted this way, to\n * obtain the correct year-suffix when that's used.</p>\n */\nCSL.Registry.prototype.compareRegistryTokens = function (a, b) {\n    if (a.seq > b.seq) {\n        return 1;\n    } else if (a.seq < b.seq) {\n        return -1;\n    }\n    return 0;\n};\n\nCSL.Registry.prototype.registerAmbigToken = function (akey, id, ambig_config) {\n    //SNIP-START\n    if (!this.registry[id]) {\n        CSL.debug(\"Warning: unregistered item: itemID=(\"+id+\"), akey=(\"+akey+\")\");\n    }\n    //SNIP-END\n    // Taint if number of names to be included has changed\n    if (this.registry[id] && this.registry[id].disambig && this.registry[id].disambig.names) {\n        for (var i = 0, ilen = ambig_config.names.length; i < ilen; i += 1) {\n            var new_names_params = ambig_config.names[i];\n            var old_names_params = this.registry[id].disambig.names[i];\n            if (new_names_params !== old_names_params) {\n                this.state.tmp.taintedItemIDs[id] = true;\n            } else if (ambig_config.givens[i]) {\n                // Compare givenses only if the number of names is aligned.\n                for (var j=0,jlen=ambig_config.givens[i].length;j<jlen;j+=1) {\n                    var new_gnames_params = ambig_config.givens[i][j];\n                    var old_gnames_params = this.registry[id].disambig.givens[i][j];\n                    if (new_gnames_params !== old_gnames_params) {\n                        this.state.tmp.taintedItemIDs[id] = true;\n                    }\n                }\n            }\n        }\n    }\n\n    if (!this.ambigcites[akey]) {\n        this.ambigcites[akey] = [];\n    }\n    if (this.ambigcites[akey].indexOf(\"\" + id) === -1) {\n        this.ambigcites[akey].push(\"\" + id);\n    }\n    this.registry[id].ambig = akey;\n    this.registry[id].disambig = CSL.cloneAmbigConfig(ambig_config);\n};\n\n\n/**\n * Get the sort key of an item, without decorations\n * <p>This is used internally by the Registry.</p>\n */\nCSL.getSortKeys = function (Item, key_type) {\n    var area, root, extension, strip_prepositions, len, pos;\n    //SNIP-START\n    if (false) {\n        CSL.debug(\"KEY TYPE: \" + key_type);\n    }\n    //SNIP-END\n    area = this.tmp.area;\n    root = this.tmp.root;\n    extension = this.tmp.extension;\n    strip_prepositions = CSL.Util.Sort.strip_prepositions;\n    this.tmp.area = key_type;\n    // Gawdawful, this.\n    this.tmp.root = key_type.indexOf(\"_\") > -1 ? key_type.slice(0,-5) : key_type;\n    this.tmp.extension = \"_sort\";\n    this.tmp.disambig_override = true;\n    this.tmp.disambig_request = false;\n    this.tmp.suppress_decorations = true;\n    CSL.getCite.call(this, Item);\n    this.tmp.suppress_decorations = false;\n    this.tmp.disambig_override = false;\n    len = this[key_type].keys.length;\n    for (pos = 0; pos < len; pos += 1) {\n        this[key_type].keys[pos] = strip_prepositions(this[key_type].keys[pos]);\n    }\n    //SNIP-START\n    if (false) {\n        CSL.debug(\"sort keys (\" + key_type + \"): \" + this[key_type].keys);\n    }\n    //SNIP-END\n    \n    this.tmp.area = area;\n    this.tmp.root = root;\n    this.tmp.extension = extension;\n    return this[key_type].keys;\n};\n\n\n/*global CSL: true */\n\nCSL.Registry.NameReg = function (state) {\n    var pkey, ikey, skey, dagopt, gdropt, items, strip_periods, set_keys, evalname, delitems, addname, myitems;\n    this.state = state;\n    this.namereg = {};\n    this.nameind = {};\n    // used for restoring state following preview\n    this.nameindpkeys = {};\n    //\n    // family, initials form, fullname (with given stripped of periods)\n    //\n    // keys registered, indexed by ID\n    this.itemkeyreg = {};\n\n    strip_periods = function (str) {\n        if (!str) {\n            str = \"\";\n        }\n        return str.replace(/\\./g, \" \").replace(/\\s+/g, \" \").replace(/\\s+$/,\"\");\n    };\n\n    set_keys = function (state, itemid, nameobj) {\n        pkey = strip_periods(nameobj.family);\n\n        if (state.opt[\"demote-non-dropping-particle\"] === \"never\" && nameobj[\"non-dropping-particle\"] && nameobj[\"family\"]) {\n            pkey = `${pkey} ${nameobj[\"non-dropping-particle\"]}`;\n        }\n        \n        skey = strip_periods(nameobj.given);\n        // Drop lowercase suffixes (such as et al.) from given name field\n        // for disambiguation purposes.\n        var m = skey.match(/[,\\!]* ([^,]+)$/);\n        if (m && m[1] === m[1].toLowerCase()) {\n            skey = skey.replace(/[,\\!]* [^,]+$/, \"\");\n        }\n        // The %s terminator enables normal initialization behavior\n        // with non-Byzantine names.\n        ikey = CSL.Util.Names.initializeWith(state, skey, \"%s\");\n        if (state.citation.opt[\"givenname-disambiguation-rule\"] === \"by-cite\") {\n            pkey = \"\" + itemid + pkey;\n        }\n    };\n\n    evalname = function (item_id, nameobj, namenum, request_base, form, initials) {\n        var param;\n        // XXX THIS CAN NO LONGER HAPPEN\n        if (state.tmp.area.slice(0, 12) === \"bibliography\" && !form) {\n            if (\"string\" === typeof initials) {\n                return 1;\n            } else {\n                return 2;\n            }\n        }\n        var res = state.nameOutput.getName(nameobj, \"locale-translit\", true);\n        nameobj = res.name;\n        set_keys(this.state, \"\" + item_id, nameobj);\n        //\n        // possible options are:\n        //\n        // <option disambiguate-add-givenname value=\"true\"/> (a)\n        // <option disambiguate-add-givenname value=\"all-names\"/> (a)\n        // <option disambiguate-add-givenname value=\"all-names-with-initials\"/> (b)\n        // <option disambiguate-add-givenname value=\"primary-name\"/> (d)\n        // <option disambiguate-add-givenname value=\"primary-name-with-initials\"/> (e)\n        // <option disambiguate-add-givenname value=\"by-cite\"/> (g)\n        //\n        param = 2;\n        dagopt = state.opt[\"disambiguate-add-givenname\"];\n        gdropt = state.citation.opt[\"givenname-disambiguation-rule\"];\n        var gdropt_orig = gdropt;\n        if (gdropt === \"by-cite\") {\n            gdropt = \"all-names\";\n        }\n        //\n        // set initial value\n        //\n        if (\"short\" === form) {\n            param = 0;\n        } else if (\"string\" === typeof initials) {\n            param = 1;\n        }\n        //\n        // give literals a pass\n        if (\"undefined\" === typeof this.namereg[pkey] || \"undefined\" === typeof this.namereg[pkey].ikey[ikey]) {\n            return param;\n        }\n        //\n        // adjust value upward if appropriate -- only if running\n        // a non-names-global disambiguation strategy\n        //\n        if (gdropt_orig === \"by-cite\" && param <= request_base) {\n            //param = request_base;\n            return request_base;\n        }\n        if (!dagopt) {\n            return param;\n        }\n        if (\"string\" === typeof gdropt && gdropt.slice(0, 12) === \"primary-name\" && namenum > 0) {\n            return param;\n        }\n        //\n        // the last composite condition is for backward compatibility\n        //\n        if (!gdropt || gdropt === \"all-names\" || gdropt === \"primary-name\") {\n            if (this.namereg[pkey].count > 1) {\n                param = 1;\n            }\n            if ((this.namereg[pkey].ikey \n                 && this.namereg[pkey].ikey[ikey].count > 1)\n                || (this.namereg[pkey].count > 1 \n                    && \"string\" !== typeof initials)) {\n\n                param = 2;\n            }\n        } else if (gdropt === \"all-names-with-initials\" || gdropt === \"primary-name-with-initials\") {\n            if (this.namereg[pkey].count > 1) {\n                param = 1;\n            } else {\n                param = 0;\n            }\n        }\n        if (!state.registry.registry[item_id]) {\n            if (form == \"short\") {\n                return 0;\n            } else if (\"string\" == typeof initials) {\n                return 1;\n            }\n        } else {\n            return param;\n        }\n    };\n\n    //\n    // The operation of this function does not show up in the\n    // standard test suite, but it has been hand-tested with\n    // a print trace, and seems to work okay.\n    //\n    delitems = function (ids) {\n        var pos, len, posB, id, fullkey;\n        if (\"string\" === typeof ids || \"number\" === typeof ids) {\n            ids = [\"\" + ids];\n        }\n        // ret carries the IDs of other items using this name.\n        var ret = {};\n        len = ids.length;\n        for (pos = 0; pos < len; pos += 1) {\n            id = \"\" + ids[pos];\n            if (!this.nameind[id]) {\n                continue;\n            }\n            for (fullkey in this.nameind[id]) {\n                if (this.nameind[id].hasOwnProperty(fullkey)) {\n                    var key = fullkey.split(\"::\");\n                    pkey = key[0];\n                    ikey = key[1];\n                    skey = key[2];\n                    // Skip names that have been deleted already.\n                    // Needed to clear integration DisambiguateAddGivenname1.txt\n                    // and integration DisambiguateAddGivenname2.txt\n                    if (\"undefined\" === typeof this.namereg[pkey]) {\n                        continue;\n                    }\n\n                    // ????\n                    //posA = this.namereg[pkey].items.indexOf(posA);\n\n                    items = this.namereg[pkey].items;\n                    // This was really, really unperceptive. They key elements\n                    // have absolutely nothing to do with whether there was ever\n                    // a registration at each key level.\n                    if (skey && this.namereg[pkey].ikey[ikey] && this.namereg[pkey].ikey[ikey].skey[skey]) {\n                        myitems = this.namereg[pkey].ikey[ikey].skey[skey].items;\n                        posB = myitems.indexOf(\"\" + id);\n                        if (posB > -1) {\n                            this.namereg[pkey].ikey[ikey].skey[skey].items = myitems.slice(0, posB).concat(myitems.slice([(posB + 1)]));\n                        }\n                        if (this.namereg[pkey].ikey[ikey].skey[skey].items.length === 0) {\n                            delete this.namereg[pkey].ikey[ikey].skey[skey];\n                            this.namereg[pkey].ikey[ikey].count += -1;\n                            if (this.namereg[pkey].ikey[ikey].count < 2) {\n                                for (var i = 0, ilen = this.namereg[pkey].ikey[ikey].items.length; i < ilen; i += 1) {\n                                    state.tmp.taintedItemIDs[this.namereg[pkey].ikey[ikey].items[i]] = true;\n                                }\n                            }\n                        }\n                    }\n                    if (ikey && this.namereg[pkey].ikey[ikey]) {\n                        posB = this.namereg[pkey].ikey[ikey].items.indexOf(\"\" + id);\n                        if (posB > -1) {\n                            items = this.namereg[pkey].ikey[ikey].items.slice();\n                            this.namereg[pkey].ikey[ikey].items = items.slice(0, posB).concat(items.slice([posB + 1]));\n                        }\n                        if (this.namereg[pkey].ikey[ikey].items.length === 0) {\n                            delete this.namereg[pkey].ikey[ikey];\n                            this.namereg[pkey].count += -1;\n                            if (this.namereg[pkey].count < 2) {\n                                for (var i = 0, ilen = this.namereg[pkey].items.length; i < ilen; i += 1) {\n                                    state.tmp.taintedItemIDs[this.namereg[pkey].items[i]] = true;\n                                }\n                            }\n                        }\n                    }\n                    if (pkey) {\n                        posB = this.namereg[pkey].items.indexOf(\"\" + id);\n                        if (posB > -1) {\n                            items = this.namereg[pkey].items.slice();\n                            this.namereg[pkey].items = items.slice(0, posB).concat(items.slice([posB + 1], items.length));\n                        }\n                        if (this.namereg[pkey].items.length < 2) {\n                            delete this.namereg[pkey];\n                        }\n                    }\n                    delete this.nameind[id][fullkey];\n                }\n            }\n            delete this.nameind[id];\n            delete this.nameindpkeys[id];\n        }\n        return ret;\n    };\n    //\n    // Run ALL\n    // renderings with disambiguate-add-givenname set to a value\n    // with the by-cite behaviour, and then set the names-based\n    // expanded form when the final makeCitationCluster rendering\n    // is output.  This could be done with a single var set on\n    // the state object in the execution wrappers that run the\n    // style.\n    //\n    addname = function (item_id, nameobj, pos) {\n        var i, ilen;\n        var res = state.nameOutput.getName(nameobj, \"locale-translit\", true);\n        nameobj = res.name;\n\n        if (state.citation.opt[\"givenname-disambiguation-rule\"]\n            && state.citation.opt[\"givenname-disambiguation-rule\"].slice(0, 8) === \"primary-\"\n            && pos !== 0) {\n                return;\n        }\n\n        // A hack. Safe if the name object is used only here, for disambiguation purposes.\n        /*\n        */\n        \n        //CSL.debug(\"INS\");\n        set_keys(this.state, \"\" + item_id, nameobj);\n        // pkey, ikey and skey should be stored in separate cascading objects.\n        // there should also be a kkey, on each, which holds the item ids using\n        // that form of the name.\n        //\n        // (later note: well, we seem to have slipped a notch here.\n        // Adding lists of IDs all over the place here makes no sense;\n        // the lists need to include _only_ the items currently rendered\n        // at the given level, and the place to do that is in evalname,\n        // and in delnames, not here.)\n        if (pkey) {\n            if (\"undefined\" === typeof this.namereg[pkey]) {\n                this.namereg[pkey] = {};\n                this.namereg[pkey].count = 0;\n                this.namereg[pkey].ikey = {};\n                this.namereg[pkey].items = [item_id];\n            } else if (this.namereg[pkey].items.indexOf(item_id) === -1) {\n                this.namereg[pkey].items.push(item_id);\n            }\n//            if (this.namereg[pkey].items.indexOf(item_id) === -1) {\n//                this.namereg[pkey].items.push(item_id);\n//            }\n        }\n        if (pkey && ikey) {\n            if (\"undefined\" === typeof this.namereg[pkey].ikey[ikey]) {\n                this.namereg[pkey].ikey[ikey] = {};\n                this.namereg[pkey].ikey[ikey].count = 0;\n                this.namereg[pkey].ikey[ikey].skey = {};\n                this.namereg[pkey].ikey[ikey].items = [item_id];\n                this.namereg[pkey].count += 1;\n                if (this.namereg[pkey].count === 2) {\n                    for (var i = 0, ilen = this.namereg[pkey].items.length; i < ilen; i += 1) {\n                        state.tmp.taintedItemIDs[this.namereg[pkey].items[i]] = true;\n                    }\n                }\n            } else if (this.namereg[pkey].ikey[ikey].items.indexOf(item_id) === -1) {\n                this.namereg[pkey].ikey[ikey].items.push(item_id);\n            }\n//            if (this.namereg[pkey].ikey[ikey].items.indexOf(item_id) === -1) {\n//                this.namereg[pkey].ikey[ikey].items.push(item_id);\n//            }\n        }\n        if (pkey && ikey && skey) {\n            if (\"undefined\" === typeof this.namereg[pkey].ikey[ikey].skey[skey]) {\n                this.namereg[pkey].ikey[ikey].skey[skey] = {};\n                this.namereg[pkey].ikey[ikey].skey[skey].items = [item_id];\n                this.namereg[pkey].ikey[ikey].count += 1;\n                if (this.namereg[pkey].ikey[ikey].count === 2) {\n                    for (var i = 0, ilen = this.namereg[pkey].ikey[ikey].items.length; i < ilen; i += 1) {\n                        state.tmp.taintedItemIDs[this.namereg[pkey].ikey[ikey].items[i]] = true;\n                    }\n                }\n            } else if (this.namereg[pkey].ikey[ikey].skey[skey].items.indexOf(item_id) === -1) {\n                this.namereg[pkey].ikey[ikey].skey[skey].items.push(item_id);\n            }\n//            if (this.namereg[pkey].ikey[ikey].skey[skey].items.indexOf(item_id) === -1) {\n//                this.namereg[pkey].ikey[ikey].skey[skey].items.push(item_id);\n//            }\n        }\n        if (\"undefined\" === typeof this.nameind[item_id]) {\n            this.nameind[item_id] = {};\n            this.nameindpkeys[item_id] = {};\n        }\n        //CSL.debug(\"INS-A: [\" + pkey + \"] [\" + ikey + \"] [\" + skey + \"]\");\n        if (pkey) {\n            this.nameind[item_id][pkey + \"::\" + ikey + \"::\" + skey] = true;\n            this.nameindpkeys[item_id][pkey] = this.namereg[pkey];\n        }\n        //CSL.debug(\"INS-B\");\n    };\n    this.addname = addname;\n    this.delitems = delitems;\n    this.evalname = evalname;\n};\n\n/*global CSL: true */\n\nCSL.Registry.CitationReg = function () {\n    this.citationById = {};\n    this.citationByIndex = [];\n};\n\n/*global CSL: true */\n\nCSL.Disambiguation = function (state) {\n    this.state = state;\n    this.sys = this.state.sys;\n    this.registry = state.registry.registry;\n    this.ambigcites = state.registry.ambigcites;\n    this.configModes();\n    this.debug = false;\n};\n\nCSL.Disambiguation.prototype.run = function(akey) {\n    if (!this.modes.length) {\n        return;\n    }\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"[A] === RUN ===\");\n    }\n    //SNIP-END\n    this.akey = akey;\n    if (this.initVars(akey)) {\n        this.runDisambig();\n    }\n\n};\n\nCSL.Disambiguation.prototype.runDisambig = function () {\n    var ismax;\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"[C] === runDisambig() ===\");\n    }\n    //SNIP-END\n    this.initGivens = true;\n    //\n    // Length of list may change during processing\n    while (this.lists.length) {\n        this.gnameset = 0;\n        this.gname = 0;\n        this.clashes = [1, 0];\n        // each list is scanned repeatedly until all\n        // items either succeed or ultimately fail.\n        while(this.lists[0][1].length) {\n            this.listpos = 0;\n            if (!this.base) {\n                this.base = this.lists[0][0];\n            }\n            ismax = this.incrementDisambig();\n            this.scanItems(this.lists[0]);\n            this.evalScan(ismax);\n        }\n        this.lists = this.lists.slice(1);\n    }\n};\n\nCSL.Disambiguation.prototype.scanItems = function (list) {\n    var pos, len, otherItem;\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"[2] === scanItems() ===\");\n    }\n    //SNIP-END\n\n    this.Item = list[1][0];\n    this.ItemCite = CSL.getAmbiguousCite.call(this.state, this.Item, this.base, true);\n\n    this.scanlist = list[1];\n    this.partners = [];\n    this.partners.push(this.Item);\n    this.nonpartners = [];\n    var clashes = 0;\n\n    for (var pos = 1, len = list[1].length; pos < len; pos += 1) {\n        otherItem = list[1][pos];\n        var otherItemCite = CSL.getAmbiguousCite.call(this.state, otherItem, this.base, true);\n        //SNIP-START\n        if (this.debug) {\n            if (pos > 1) {\n                this.state.sys.print(\"  -----------\");\n            }\n        }\n        //SNIP-END\n        if (this.ItemCite === otherItemCite) {\n            //SNIP-START\n            if (this.debug) {\n                this.state.sys.print(\"  [CLASH]--> \"+this.Item.id+\": \"+this.ItemCite);\n                this.state.sys.print(\"             \"+otherItem.id+\": \"+otherItemCite);\n            }\n            //SNIP-END\n            clashes += 1;\n            this.partners.push(otherItem);\n        } else {\n            //SNIP-START\n            if (this.debug) {\n                this.state.sys.print(\"  [clear]--> \"+this.Item.id+\": \"+this.ItemCite);\n                this.state.sys.print(\"             \"+otherItem.id+\": \"+otherItemCite);\n            }\n            //SNIP-END\n            this.nonpartners.push(otherItem);\n        }\n    }\n    this.clashes[0] = this.clashes[1];\n    this.clashes[1] = clashes;\n};\n\nCSL.Disambiguation.prototype.evalScan = function (maxed) {\n    this[this.modes[this.modeindex]](maxed);\n    if (maxed) {\n        if (this.modeindex < this.modes.length - 1) {\n            this.modeindex += 1;\n        } else {\n            this.lists[this.listpos + 1] = [this.base, []];\n        }\n    }\n};\n\nCSL.Disambiguation.prototype.disNames = function (ismax) {\n    var i, ilen;\n    \n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"[3] == disNames() ==\");\n        //this.state.sys.print(\"       partners: \"+[this.partners[i].id for (i in this.partners)].join(\", \"));\n        //this.state.sys.print(\"    nonpartners: \"+[this.nonpartners[i].id for (i in this.nonpartners)].join(\", \"));\n    }\n    //SNIP-END\n\n    // New design\n    // this.base is a forward-only counter. Values are never\n    // reduced, and the counter object is never overwritten.\n    // It is methodically pushed forward in single-unit increments\n    // in incrementDisambig() until disNames() wipes out the list.\n\n    // this.betterbase is cloned from this.base exactly once,\n    // at the start of a disambiguation run. Whenever an operation\n    // results in improvement, the just-incremented elements\n    // identified as this.base.names[this.gnameset] (number of\n    // names)and as this.base.givens[this.gnameset][this.gname]\n    // (level of given name) are copied from this.base.\n\n    // The this.base object is used to control disambiguation\n    // renderings. These will be more fully expanded than the final\n    // text, but the flip side of the fact that the extra data does\n    // not contribute anything to disambiguation is that leaving\n    // it in does no harm -- think of it as the Cold Dark Matter of\n    // disambiguation.\n\n    if (this.clashes[1] === 0 && this.nonpartners.length === 1) {\n        this.captureStepToBase();\n        //SNIP-START\n        if (this.debug) {\n            this.state.sys.print(\"  ** RESOLUTION [a]: lone partner, one nonpartner\");\n            this.state.sys.print(\"  registering \"+this.partners[0].id+\" and \"+this.nonpartners[0].id);\n        }\n        //SNIP-END\n        this.state.registry.registerAmbigToken(this.akey, \"\" + this.nonpartners[0].id, this.betterbase);\n        this.state.registry.registerAmbigToken(this.akey, \"\" + this.partners[0].id, this.betterbase);\n        this.lists[this.listpos] = [this.betterbase, []];\n    } else if (this.clashes[1] === 0) {\n        this.captureStepToBase();\n        //SNIP-START\n        if (this.debug) {\n            this.state.sys.print(\"  ** RESOLUTION [b]: lone partner, unknown number of remaining nonpartners\");\n            this.state.sys.print(\"  registering \"+this.partners[0].id);\n        }\n        //SNIP-END\n        this.state.registry.registerAmbigToken(this.akey, \"\" + this.partners[0].id, this.betterbase);\n        this.lists[this.listpos] = [this.betterbase, this.nonpartners];\n        if (this.nonpartners.length) {\n            this.initGivens = true;\n        }\n    } else if (this.nonpartners.length === 1) {\n        this.captureStepToBase();\n        //SNIP-START\n        if (this.debug) {\n            this.state.sys.print(\"  ** RESOLUTION [c]: lone nonpartner, unknown number of partners remaining\");\n            this.state.sys.print(\"  registering \"+this.nonpartners[0].id);\n        }\n        //SNIP-END\n        this.state.registry.registerAmbigToken(this.akey, \"\" + this.nonpartners[0].id, this.betterbase);\n        //this.lists[this.listpos] = [this.betterbase, this.partners];\n        this.lists[this.listpos] = [this.betterbase, this.partners];\n    } else if (this.clashes[1] < this.clashes[0]) {\n        this.captureStepToBase();\n        //SNIP-START\n        if (this.debug) {\n            this.state.sys.print(\"  ** RESOLUTION [d]: better result, but no entries safe to register\");\n        }\n        //SNIP-END\n        this.lists[this.listpos] = [this.betterbase, this.partners];\n        this.lists.push([this.betterbase, this.nonpartners]);\n    } else {\n        //SNIP-START\n        if (this.debug) {\n            this.state.sys.print(\"  ** RESOLUTION [e]: no improvement, and clashes remain\");\n        }\n        //SNIP-END\n        if (ismax) {\n            this.lists[this.listpos] = [this.betterbase, this.nonpartners];\n            this.lists.push([this.betterbase, this.partners]);\n            if (this.modeindex === this.modes.length - 1) {\n                //SNIP-START\n                if (this.debug) {\n                    this.state.sys.print(\"     (registering clashing entries because we've run out of options)\");\n                }\n                //SNIP-END\n                for (var i = 0, ilen = this.partners.length; i < ilen; i += 1) {\n                    this.state.registry.registerAmbigToken(this.akey, \"\" + this.partners[i].id, this.betterbase);\n                }\n                this.lists[this.listpos] = [this.betterbase, []];\n            }\n        }\n    }\n};\n\nCSL.Disambiguation.prototype.disExtraText = function () {\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"[3] === disExtraText ==\");\n    }\n    //SNIP-END\n    \n    var done = false;\n\n    if (this.clashes[1] === 0 && this.nonpartners.length < 2) {\n        done = true;\n    }\n\n    // If first encounter in this cycle and multiple modes are\n    // available, decrement mode and reset base\n    if (!done && (!this.base.disambiguate || this.state.tmp.disambiguate_count !== this.state.tmp.disambiguate_maxMax)) {\n        // Rerun everything on each subcycle? This doesn't work currently.\n        //this.initVars(this.akey)\n        this.modeindex = 0;\n        this.base.disambiguate = this.state.tmp.disambiguate_count;\n        this.betterbase.disambiguate = this.state.tmp.disambiguate_count;\n        if (!this.base.disambiguate) {\n            // Evaluate here?\n            this.initGivens = true;\n            // If disambiguate is false set to true\n            this.base.disambiguate = 1;\n            // There may be changes\n            for (var i = 0, ilen = this.lists[this.listpos][1].length; i < ilen; i += 1) {\n                this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id] = true;\n            }\n        } else {\n            this.disNames();\n        }\n    } else if (done || this.state.tmp.disambiguate_count === this.state.tmp.disambiguate_maxMax) {\n        if (done || this.modeindex === this.modes.length - 1) {\n            // If this is the end, disambiguation failed.\n            // Discard disambiguate=true (?) and set parameters\n            var base = this.lists[this.listpos][0];\n            for (var i = 0, ilen = this.lists[this.listpos][1].length; i < ilen; i += 1) {\n                this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id] = true;\n                this.state.registry.registerAmbigToken(this.akey, \"\" + this.lists[this.listpos][1][i].id, base);\n            }\n            this.lists[this.listpos] = [this.betterbase, []];\n        } else {\n            // If this is followed by year-suffix, keep\n            // parameters and set disambiguate=true since it MIGHT\n            // include the date, needed for year-suffix.\n            // This may be a bit over-aggressive for cases in which the\n            // disambiguate condition does not add the date\n            this.modeindex = this.modes.length - 1;\n            var base = this.lists[this.listpos][0];\n            base.disambiguate = true;\n            for (var i = 0, ilen = this.lists[this.listpos][1].length; i < ilen; i += 1) {\n                // Always tainting here might be a little over-aggressive, but a taint may be required.\n                this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][i].id] = true;\n                this.state.registry.registerAmbigToken(this.akey, \"\" + this.lists[this.listpos][1][i].id, base);\n            }\n        }\n    }\n};\n\nCSL.Disambiguation.prototype.disYears = function () {\n    var pos, len, tokens, token;\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"[3] === disYears ==\");\n    }\n    //SNIP-END\n    tokens = [];\n    var base = this.lists[this.listpos][0];\n    if (this.clashes[1]) {\n        // That is, if the initial increment on the ambigs group returns no\n        // clashes, don't apply suffix. The condition is a necessary failsafe.\n\t\t// In original submission order\n\t\tfor (var i = 0, ilen = this.state.registry.mylist.length; i < ilen; i += 1) {\n\t\t\tvar origid = this.state.registry.mylist[i];\n\t\t\tfor (var j = 0, jlen = this.lists[this.listpos][1].length; j < jlen; j += 1) {\n\t\t\t\tvar token = this.lists[this.listpos][1][j];\n\t\t\t\t// Warning: token.id can be number. This should be fixed at a higher level in citeproc-js if poss.\n\t\t\t\tif (token.id == origid) {\n\t\t\t\t\ttokens.push(this.registry[token.id]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n    }\n    tokens.sort(this.state.registry.sorter.compareKeys);\n    for (var pos = 0, len = tokens.length; pos < len; pos += 1) {\n        base.year_suffix = \"\"+pos;\n        var oldBase = this.state.registry.registry[tokens[pos].id].disambig;\n        this.state.registry.registerAmbigToken(this.akey, \"\" + tokens[pos].id, base);\n        if (CSL.ambigConfigDiff(oldBase,base)) {\n            this.state.tmp.taintedItemIDs[tokens[pos].id] = true;\n        }\n    }\n    this.lists[this.listpos] = [this.betterbase, []];\n};\n\nCSL.Disambiguation.prototype.incrementDisambig = function () {\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"\\n[1] === incrementDisambig() ===\");\n    }\n    //SNIP-END\n    if (this.initGivens) {\n        this.initGivens = false;\n        return false;\n    }\n    var maxed = false;\n    var increment_names = true;\n    if (\"disNames\" === this.modes[this.modeindex]) {\n        // this.gnameset: the index pos of the current nameset\n        // this.gname: the index pos of the current name w/in the current nameset\n        \n        // Stages:\n        // - Increment givenname (optional)\n        // - Add a name (optional)\n        // - Move to next nameset\n\n        // Incrementing is done forward-only on this.base. Values\n        // that improve disambiguation results are copied to\n        // this.betterbase, which is used to set the disambig parameters\n        // in the processor registry.\n        \n\n        // Increment\n        // Max val is always true if a level is inactive.\n        increment_names = false;\n        if (\"number\" !== typeof this.givensMax) {\n            increment_names = true;\n        }\n        var increment_namesets = false;\n        if (\"number\" !== typeof this.namesMax) {\n            increment_namesets = true;\n        }\n        if (\"number\" === typeof this.givensMax) {\n            if (this.base.givens.length && this.base.givens[this.gnameset][this.gname] < this.givensMax) {\n                this.base.givens[this.gnameset][this.gname] += 1;\n            } else {\n                increment_names = true;\n            }\n        }\n        if (\"number\" === typeof this.namesMax \n            && increment_names) {\n            if (this.state.opt[\"disambiguate-add-names\"]) {\n                increment_namesets = false;\n                if (this.gname < this.namesMax) {\n                    this.base.names[this.gnameset] += 1;\n                    this.gname += 1;\n                } else {\n                    increment_namesets = true;\n                }\n            } else {\n                increment_namesets = true;\n            }\n        }\n        if (\"number\" === typeof this.namesetsMax && increment_namesets) {\n            if (this.gnameset < this.namesetsMax) {\n                this.gnameset += 1;\n                this.base.names[this.gnameset] = 1;\n                this.gname = 0;\n            }\n        }\n        //SNIP-START\n        if (this.debug) {\n            this.state.sys.print(\"    ------------------\");\n            this.state.sys.print(\"    incremented values\");\n            this.state.sys.print(\"    ------------------\");\n            this.state.sys.print(\"    | gnameset: \"+this.gnameset);\n            this.state.sys.print(\"    | gname: \"+this.gname);\n            this.state.sys.print(\"    | names value: \"+this.base.names[this.gnameset]);\n            if (this.base.givens.length) {\n                this.state.sys.print(\"    | givens value: \"+this.base.givens[this.gnameset][this.gname]);\n            } else {\n                this.state.sys.print(\"    | givens value: nil\");\n            }\n            this.state.sys.print(\"    | namesetsMax: \"+this.namesetsMax);\n            this.state.sys.print(\"    | namesMax: \"+this.namesMax);\n            this.state.sys.print(\"    | givensMax: \"+this.givensMax);\n        }\n        //SNIP-END\n        if ((\"number\" !== typeof this.namesetsMax || this.namesetsMax === -1 || this.gnameset === this.namesetsMax)\n            && (!this.state.opt[\"disambiguate-add-names\"] || \"number\" !== typeof this.namesMax || this.gname === this.namesMax)\n            && (\"number\" != typeof this.givensMax || \"undefined\" === typeof this.base.givens[this.gnameset] || \"undefined\" === typeof this.base.givens[this.gnameset][this.gname] || this.base.givens[this.gnameset][this.gname] === this.givensMax)) {\n  \n\n            maxed = true;\n            //SNIP-START\n            if (this.debug) {\n                this.state.sys.print(\"    MAXED\");\n            }\n            //SNIP-END\n        }\n    } else if (\"disExtraText\" === this.modes[this.modeindex]) {\n        this.base.disambiguate += 1;\n        this.betterbase.disambiguate += 1;\n    }\n    return maxed;\n};\n\nCSL.Disambiguation.prototype.initVars = function (akey) {\n    var i, ilen, myIds, myItemBundles, myItems;\n    //SNIP-START\n    if (this.debug) {\n        this.state.sys.print(\"[B] === initVars() ===\");\n    }\n    //SNIP-END\n    this.lists = [];\n    this.base = false;\n    this.betterbase = false;\n    this.akey = akey;\n\n    this.maxNamesByItemId = {};\n\n\n    myItemBundles = [];\n    myIds = this.ambigcites[akey];\n    if (!myIds || !myIds.length) {\n        return false;\n    }\n    var myItem = this.state.refetchItem(\"\" + myIds[0]);\n    this.getCiteData(myItem);\n    this.base = CSL.getAmbigConfig.call(this.state);\n    if (myIds && myIds.length > 1) {\n        myItemBundles.push([this.maxNamesByItemId[myItem.id], myItem]);\n        // Build a composite list of Items and associated\n        // max names. This is messy, but it's the only\n        // way to get the items sorted by the number of names\n        // to be disambiguated. If they are in descending order\n        // with name expansions, the processor will hang.\n        for (var i = 1, ilen = myIds.length; i < ilen; i += 1) {\n            myItem = this.state.refetchItem(\"\" + myIds[i]);\n            this.getCiteData(myItem, this.base);\n            myItemBundles.push([this.maxNamesByItemId[myItem.id], myItem]);\n        }\n        myItemBundles.sort(\n            function (a, b) {\n                if (a[0] > b[0]) {\n                    return 1;\n                } else if (a[0] < b[0]) {\n                    return -1;\n                } else {\n                    if (a[1].id > b[1].id) {\n                        return 1;\n                    } else if (a[1].id < b[1].id) {\n                        return -1;\n                    } else {\n                        return 0;\n                    }\n                }\n            }\n        );\n        myItems = [];\n        for (var i = 0, ilen = myItemBundles.length; i < ilen; i += 1) {\n            myItems.push(myItemBundles[i][1]);\n        }\n        this.lists.push([this.base, myItems]);\n        this.Item = this.lists[0][1][0];\n    } else {\n        this.Item = this.state.refetchItem(\"\" + myIds[0]);\n    }\n\n    this.modeindex = 0;\n    if (this.state.citation.opt[\"disambiguate-add-names\"] || true) {\n        this.namesMax = this.maxNamesByItemId[this.Item.id][0];\n    } else {\n        var namesMax = this.base.names[0];\n        for (var i=1,ilen=this.base.names.length;i<ilen;i+=1){\n            namesMax = Math.max(namesMax,this.base.names.names[i]);\n        }\n    }\n\n\n    this.padBase(this.base);\n    this.padBase(this.betterbase);\n    this.base.year_suffix = false;\n    this.base.disambiguate = false;\n    this.betterbase.year_suffix = false;\n    this.betterbase.disambiguate = false;\n    if (this.state.citation.opt[\"givenname-disambiguation-rule\"] === \"by-cite\"\n       && this.state.opt[\"disambiguate-add-givenname\"]) {\n        this.givensMax = 2;\n    }\n    return true;\n};\n\n\nCSL.Disambiguation.prototype.padBase = function (base) {\n    for (var i = 0, ilen = base.names.length; i < ilen; i += 1) {\n        if (!base.givens[i]) {\n            base.givens[i] = [];\n        }\n        for (var j=0,jlen=base.names[i];j<jlen;j+=1) {\n            if (!base.givens[i][j]) {\n                base.givens[i][j] = 0;\n            }\n        }\n    }\n};\n\n/**\n * Set available modes for disambiguation\n */\nCSL.Disambiguation.prototype.configModes = function () {\n    var dagopt, gdropt;\n    // Modes are function names prototyped to this instance.\n    this.modes = [];\n    dagopt = this.state.opt[\"disambiguate-add-givenname\"];\n    gdropt = this.state.citation.opt[\"givenname-disambiguation-rule\"];\n    if (this.state.opt['disambiguate-add-names'] || (dagopt && gdropt === \"by-cite\")) {\n        this.modes.push(\"disNames\");\n    }\n\n    if (this.state.opt.development_extensions.prioritize_disambiguate_condition) {\n        if (this.state.opt.has_disambiguate) {\n            this.modes.push(\"disExtraText\");\n        }\n        if (this.state.opt[\"disambiguate-add-year-suffix\"]) {\n            this.modes.push(\"disYears\");\n        }\n    } else {\n        if (this.state.opt[\"disambiguate-add-year-suffix\"]) {\n            this.modes.push(\"disYears\");\n        }\n        if (this.state.opt.has_disambiguate) {\n            this.modes.push(\"disExtraText\");\n        }\n    }\n};\n\nCSL.Disambiguation.prototype.getCiteData = function(Item, base) {\n    // Initialize base if first set item seen\n    if (!this.maxNamesByItemId[Item.id]) {\n        CSL.getAmbiguousCite.call(this.state, Item, base);\n        base = CSL.getAmbigConfig.call(this.state);\n        this.maxNamesByItemId[Item.id] = CSL.getMaxVals.call(this.state);\n        this.state.registry.registry[Item.id].disambig.givens = this.state.tmp.disambig_settings.givens.slice();\n        // Slice the nested lists as well. Without this, disambiguate_YearSuffixFiftyTwoEntriesByCite fails.\n        for (var i=0,ilen=this.state.registry.registry[Item.id].disambig.givens.length;i<ilen;i+=1) {\n            this.state.registry.registry[Item.id].disambig.givens[i] = this.state.tmp.disambig_settings.givens[i].slice();\n        }\n        this.namesetsMax = this.state.registry.registry[Item.id].disambig.names.length - 1;\n        if (!this.base) {\n            this.base = base;\n            this.betterbase = CSL.cloneAmbigConfig(base);\n        }\n        if (base.names.length < this.base.names.length) {\n            // I don't know what would happen with discrepancies in the number\n            // of namesets rendered on items, so we use the fewer of the two\n            // and limit the other to that size.\n            this.base = base;\n        }\n        // Padding. Within namesets, we use the longer of the two throughout.\n        for (var i = 0, ilen = base.names.length; i < ilen; i += 1) {\n            if (base.names[i] > this.base.names[i]) {\n                // XXX The old must have been wrong surely. The new, I'm not sure.\n                //this.base.givens[i] = this.base.givens[i].concat(this.base.givens[i].slice(this.base.names[i]));\n                this.base.givens[i] = base.givens[i].slice();\n                this.base.names[i] = base.names[i];\n                this.betterbase.names = this.base.names.slice();\n                this.betterbase.givens = this.base.givens.slice();\n                this.padBase(this.base);\n                this.padBase(this.betterbase);\n            }\n        }\n        // This shouldn't be necessary\n        // getAmbiguousCite() should return a valid and complete\n        // givens segment under all conditions, but it does not\n        // do so for institution authors, so we clean up after it\n        // here.\n        // Relevant test: sort_ChicagoYearSuffix2\n        this.betterbase.givens = this.base.givens.slice();\n        for (var j = 0, jlen = this.base.givens.length; j < jlen; j += 1) {\n            this.betterbase.givens[j] = this.base.givens[j].slice();\n        }\n    }\n};\n\nCSL.Disambiguation.prototype.captureStepToBase = function() {\n    // Be paranoid about the presence of givens\n    if (this.state.citation.opt[\"givenname-disambiguation-rule\"] === \"by-cite\"\n        && this.base.givens && this.base.givens.length) {\n        if (\"undefined\" !== typeof this.base.givens[this.gnameset][this.gname]) {\n            if (this.betterbase.givens.length < this.base.givens.length) {\n                this.betterbase.givens = JSON.parse(JSON.stringify(this.base.givens));\n            }\n            this.betterbase.givens[this.gnameset][this.gname] = this.base.givens[this.gnameset][this.gname];\n        }\n    }\n    this.betterbase.names[this.gnameset] = this.base.names[this.gnameset];\n};\n\nCSL.Engine.prototype.getJurisdictionList = function (jurisdiction) {\n    var jurisdictionList = [];\n    var jurisdictionElems = jurisdiction.split(\":\");\n    for (var j=jurisdictionElems.length;j>0;j--) {\n        var composedID = jurisdictionElems.slice(0,j).join(\":\");\n        jurisdictionList.push(composedID);\n        if (this.opt.jurisdiction_fallbacks[composedID]) {\n            var fallback = this.opt.jurisdiction_fallbacks[composedID];\n            jurisdictionList.push(fallback);\n        }\n    }\n    if (jurisdictionList.indexOf(\"us\") === -1) {\n        jurisdictionList.push(\"us\");\n    }\n    return jurisdictionList;\n};\n\nCSL.Engine.prototype.loadStyleModule = function (jurisdiction, xmlSource, skipFallback) {\n    var myFallback = null;\n    var macroCount = 0;\n    this.juris[jurisdiction] = {};\n    var myXml = CSL.setupXml(xmlSource);\n    myXml.addMissingNameNodes(myXml.dataObj);\n    myXml.addInstitutionNodes(myXml.dataObj);\n    myXml.insertPublisherAndPlace(myXml.dataObj);\n    myXml.flagDateMacros(myXml.dataObj);\n    var myNodes = myXml.getNodesByName(myXml.dataObj, \"law-module\");\n    for (var i=0,ilen=myNodes.length;i<ilen;i++) {\n        var myTypes = myXml.getAttributeValue(myNodes[i],\"types\");\n        if (myTypes) {\n            this.juris[jurisdiction].types = {};\n            myTypes =  myTypes.split(/\\s+/);\n            for (var j=0,jlen=myTypes.length;j<jlen;j++) {\n                this.juris[jurisdiction].types[myTypes[j]] = true;\n            }\n        }\n        if (!skipFallback) {\n            myFallback = myXml.getAttributeValue(myNodes[i],\"fallback\");\n            if (myFallback) {\n                if (jurisdiction !== \"us\") {\n                    this.opt.jurisdiction_fallbacks[jurisdiction] = myFallback;\n                }\n            }\n        }\n    }\n    var lang = this.opt.lang ? this.opt.lang : this.opt[\"default-locale\"][0];\n    CSL.SET_COURT_CLASSES(this, lang, myXml, myXml.dataObj);\n    \n    if (!this.juris[jurisdiction].types) {\n        this.juris[jurisdiction].types = CSL.MODULE_TYPES;\n    }\n    var myNodes = myXml.getNodesByName(myXml.dataObj, \"macro\");\n    for (var i=0,ilen=myNodes.length;i<ilen;i++) {\n        var myName = myXml.getAttributeValue(myNodes[i], \"name\");\n        if (!CSL.MODULE_MACROS[myName]) {\n            CSL.debug(\"CSL: skipping non-modular macro name \\\"\" + myName + \"\\\" in module context\");\n            continue;\n        }\n        macroCount++;\n        this.juris[jurisdiction][myName] = [];\n        // Must use the same XML parser for style and modules.\n        this.buildTokenLists(myNodes[i], this.juris[jurisdiction][myName]);\n        this.configureTokenList(this.juris[jurisdiction][myName]);\n    }\n    //if (macroCount < Object.keys(CSL.MODULE_MACROS).length) {\n    //    var missing = [];\n    //    throw \"CSL ERROR: Incomplete jurisdiction style module for: \" + jurisdiction;\n    //}\n    return myFallback;\n};\n\nCSL.Engine.prototype.retrieveAllStyleModules = function (jurisdictionList) {\n    var ret = {};\n    var preferences = this.locale[this.opt.lang].opts[\"jurisdiction-preference\"];\n    preferences = preferences ? preferences : [];\n    preferences = [\"\"].concat(preferences);\n    for (var i=preferences.length-1;i>-1;i--) {\n        var preference = preferences[i];\n        for (var j=0,jlen=jurisdictionList.length;j<jlen;j++) {\n            var jurisdiction = jurisdictionList[j];\n            // If we've \"seen\" it, we have it already, or we're not going to get it.\n            if (this.opt.jurisdictions_seen[jurisdiction]) {\n                continue;\n            }\n            // Try to get the module\n            var res = this.sys.retrieveStyleModule(jurisdiction, preference);\n            // If we fail and we've run out of preferences, mark as \"seen\"\n            // Otherwise mark as \"seen\" if we get something.\n            if ((!res && !preference) || res) {\n                this.opt.jurisdictions_seen[jurisdiction] = true;\n            }\n            // Don't memo unless get got style code.\n            if (!res) {\n                continue;\n            }\n            ret[jurisdiction] = res;\n        }\n    }\n    // Give 'em what we got.\n    return ret;\n};\n\nCSL.ParticleList = (function() {\n\tvar always_dropping_1 = [[[0,1], null]];\n\tvar always_dropping_3 = [[[0,3], null]];\n\tvar always_non_dropping_1 = [[null, [0,1]]];\n\tvar always_non_dropping_2 = [[null, [0,2]]];\n\tvar always_non_dropping_3 = [[null, [0,3]]];\n\tvar either_1 = [[null, [0,1]],[[0,1],null]];\n\tvar either_2 = [[null, [0,2]],[[0,2],null]];\n\tvar either_1_dropping_best = [[[0,1],null],[null, [0,1]]];\n\tvar either_2_dropping_best = [[[0,2],null],[null, [0,2]]];\n\tvar either_3_dropping_best = [[[0,3],null],[null, [0,3]]];\n\tvar non_dropping_2_alt_dropping_1_non_dropping_1 = [[null, [0,2]], [[0,1], [1,2]]];\n\tvar PARTICLES = [\n\t\t[\"'s\", always_non_dropping_1],\n\t\t[\"'s-\", always_non_dropping_1],\n\t\t[\"'t\", always_non_dropping_1],\n\t\t[\"a\", \talways_non_dropping_1],\n\t\t[\"aan 't\", always_non_dropping_2],\n\t\t[\"aan de\", always_non_dropping_2],\n\t\t[\"aan den\", always_non_dropping_2],\n\t\t[\"aan der\", always_non_dropping_2],\n\t\t[\"aan het\", always_non_dropping_2],\n\t\t[\"aan t\", always_non_dropping_2],\n\t\t[\"aan\", always_non_dropping_1],\n\t\t[\"ad-\", either_1],\n\t\t[\"adh-\", either_1],\n\t\t[\"af\", either_1],\n\t\t[\"al\", either_1],\n\t\t[\"al-\", either_1],\n\t\t[\"am de\", always_non_dropping_2],\n\t\t[\"am\", always_non_dropping_1],\n\t\t[\"an-\", either_1],\n\t\t[\"ar-\", either_1],\n\t\t[\"as-\", either_1],\n\t\t[\"ash-\", either_1],\n\t\t[\"at-\", either_1],\n\t\t[\"ath-\", either_1],\n\t\t[\"auf dem\", either_2_dropping_best],\n\t\t[\"auf den\", either_2_dropping_best],\n\t\t[\"auf der\", either_2_dropping_best],\n\t\t[\"auf ter\", always_non_dropping_2],\n\t\t[\"auf\", either_1_dropping_best],\n\t\t[\"aus 'm\", either_2_dropping_best],\n\t\t[\"aus dem\", either_2_dropping_best],\n\t\t[\"aus den\", either_2_dropping_best],\n\t\t[\"aus der\", either_2_dropping_best],\n\t\t[\"aus m\", either_2_dropping_best],\n\t\t[\"aus\", either_1_dropping_best],\n\t\t[\"aus'm\", either_2_dropping_best],\n\t\t[\"az-\", either_1],\n\t\t[\"aš-\", either_1],\n\t\t[\"aḍ-\", either_1],\n\t\t[\"aḏ-\", either_1],\n\t\t[\"aṣ-\", either_1],\n\t\t[\"aṭ-\", either_1],\n\t\t[\"aṯ-\", either_1],\n\t\t[\"aẓ-\", either_1],\n\t\t[\"ben\", always_non_dropping_1],\n\t\t[\"bij 't\", always_non_dropping_2],\n\t\t[\"bij de\", always_non_dropping_2],\n\t\t[\"bij den\", always_non_dropping_2],\n\t\t[\"bij het\", always_non_dropping_2],\n\t\t[\"bij t\", always_non_dropping_2],\n\t\t[\"bij\", always_non_dropping_1],\n\t\t[\"bin\", always_non_dropping_1],\n\t\t[\"boven d\", always_non_dropping_2],\n\t\t[\"boven d'\", always_non_dropping_2],\n\t\t[\"d\", always_non_dropping_1],\n\t\t[\"d'\", either_1],\n\t\t[\"da\", either_1],\n\t\t[\"dal\", always_non_dropping_1],\n\t\t[\"dal'\", always_non_dropping_1],\n\t\t[\"dall'\", always_non_dropping_1],\n\t\t[\"dalla\", always_non_dropping_1],\n\t\t[\"das\", either_1],\n\t\t[\"de die le\", always_non_dropping_3],\n\t\t[\"de die\", always_non_dropping_2],\n\t\t[\"de l\", always_non_dropping_2],\n\t\t[\"de l'\", always_non_dropping_2],\n\t\t[\"de la\", non_dropping_2_alt_dropping_1_non_dropping_1],\n\t\t[\"de las\", non_dropping_2_alt_dropping_1_non_dropping_1],\n\t\t[\"de le\", always_non_dropping_2],\n\t\t[\"de li\", either_2],\n\t\t[\"de van der\", always_non_dropping_3],\n\t\t[\"de\", either_1],\n\t\t[\"de'\", either_1],\n\t\t[\"deca\", always_non_dropping_1],\n\t\t[\"degli\", either_1],\n\t\t[\"dei\", either_1],\n\t\t[\"del\", either_1],\n\t\t[\"dela\", always_dropping_1],\n\t\t[\"dell'\", either_1],\n\t\t[\"della\", either_1],\n\t\t[\"delle\", either_1],\n\t\t[\"dello\", either_1],\n\t\t[\"den\", either_1],\n\t\t[\"der\", either_1],\n\t\t[\"des\", either_1],\n\t\t[\"di\", either_1],\n\t\t[\"die le\", always_non_dropping_2],\n\t\t[\"do\", always_non_dropping_1],\n\t\t[\"don\", always_non_dropping_1],\n\t\t[\"dos\", either_1],\n\t\t[\"du\", either_1],\n\t\t[\"ed-\", either_1],\n\t\t[\"edh-\", either_1],\n\t\t[\"el\", either_1],\n\t\t[\"el-\", either_1],\n\t\t[\"en-\", either_1],\n\t\t[\"er-\", either_1],\n\t\t[\"es-\", either_1],\n\t\t[\"esh-\", either_1],\n\t\t[\"et-\", either_1],\n\t\t[\"eth-\", either_1],\n\t\t[\"ez-\", either_1],\n\t\t[\"eš-\", either_1],\n\t\t[\"eḍ-\", either_1],\n\t\t[\"eḏ-\", either_1],\n\t\t[\"eṣ-\", either_1],\n\t\t[\"eṭ-\", either_1],\n\t\t[\"eṯ-\", either_1],\n\t\t[\"eẓ-\", either_1],\n\t\t[\"het\", always_non_dropping_1],\n\t\t[\"i\", always_non_dropping_1],\n\t\t[\"il\", always_dropping_1],\n\t\t[\"im\", always_non_dropping_1],\n\t\t[\"in 't\", always_non_dropping_2],\n\t\t[\"in de\", always_non_dropping_2],\n\t\t[\"in den\", always_non_dropping_2],\n\t\t[\"in der\", either_2],\n\t\t[\"in het\", always_non_dropping_2],\n\t\t[\"in t\", always_non_dropping_2],\n\t\t[\"in\", always_non_dropping_1],\n\t\t[\"l\", always_non_dropping_1],\n\t\t[\"l'\", always_non_dropping_1],\n\t\t[\"la\", always_non_dropping_1],\n\t\t[\"las\", always_non_dropping_1],\n\t\t[\"le\", always_non_dropping_1],\n\t\t[\"les\", either_1],\n\t\t[\"lo\", either_1],\n\t\t[\"los\", always_non_dropping_1],\n\t\t[\"lou\", always_non_dropping_1],\n\t\t[\"of\", always_non_dropping_1],\n\t\t[\"onder 't\", always_non_dropping_2],\n\t\t[\"onder de\", always_non_dropping_2],\n\t\t[\"onder den\", always_non_dropping_2],\n\t\t[\"onder het\", always_non_dropping_2],\n\t\t[\"onder t\", always_non_dropping_2],\n\t\t[\"onder\", always_non_dropping_1],\n\t\t[\"op 't\", always_non_dropping_2],\n\t\t[\"op de\", either_2],\n\t\t[\"op den\", always_non_dropping_2],\n\t\t[\"op der\", always_non_dropping_2],\n\t\t[\"op gen\", always_non_dropping_2],\n\t\t[\"op het\", always_non_dropping_2],\n\t\t[\"op t\", always_non_dropping_2],\n\t\t[\"op ten\", always_non_dropping_2],\n\t\t[\"op\", always_non_dropping_1],\n\t\t[\"over 't\", always_non_dropping_2],\n\t\t[\"over de\", always_non_dropping_2],\n\t\t[\"over den\", always_non_dropping_2],\n\t\t[\"over het\", always_non_dropping_2],\n\t\t[\"over t\", always_non_dropping_2],\n\t\t[\"over\", always_non_dropping_1],\n\t\t[\"s\", always_non_dropping_1],\n\t\t[\"s'\", always_non_dropping_1],\n\t\t[\"sen\", always_dropping_1],\n\t\t[\"t\", always_non_dropping_1],\n\t\t[\"te\", always_non_dropping_1],\n\t\t[\"ten\", always_non_dropping_1],\n\t\t[\"ter\", always_non_dropping_1],\n\t\t[\"tho\", always_non_dropping_1],\n\t\t[\"thoe\", always_non_dropping_1],\n\t\t[\"thor\", always_non_dropping_1],\n\t\t[\"to\", always_non_dropping_1],\n\t\t[\"toe\", always_non_dropping_1],\n\t\t[\"tot\", always_non_dropping_1],\n\t\t[\"uijt 't\", always_non_dropping_2],\n\t\t[\"uijt de\", always_non_dropping_2],\n\t\t[\"uijt den\", always_non_dropping_2],\n\t\t[\"uijt te de\", always_non_dropping_3],\n\t\t[\"uijt ten\", always_non_dropping_2],\n\t\t[\"uijt\", always_non_dropping_1],\n\t\t[\"uit 't\", always_non_dropping_2],\n\t\t[\"uit de\", always_non_dropping_2],\n\t\t[\"uit den\", always_non_dropping_2],\n\t\t[\"uit het\", always_non_dropping_2],\n\t\t[\"uit t\", always_non_dropping_2],\n\t\t[\"uit te de\", always_non_dropping_3],\n\t\t[\"uit ten\", always_non_dropping_2],\n\t\t[\"uit\", always_non_dropping_1],\n\t\t[\"unter\", always_non_dropping_1],\n\t\t[\"v\", always_non_dropping_1],\n\t\t[\"v.\", always_non_dropping_1],\n\t\t[\"v.d.\", always_non_dropping_1],\n\t\t[\"van 't\", always_non_dropping_2],\n\t\t[\"van de l\", always_non_dropping_3],\n\t\t[\"van de l'\", always_non_dropping_3],\n\t\t[\"van de\", always_non_dropping_2],\n\t\t[\"van de\", always_non_dropping_2],\n\t\t[\"van den\", always_non_dropping_2],\n\t\t[\"van der\", always_non_dropping_2],\n\t\t[\"van gen\", always_non_dropping_2],\n\t\t[\"van het\", always_non_dropping_2],\n\t\t[\"van la\", always_non_dropping_2],\n\t\t[\"van t\", always_non_dropping_2],\n\t\t[\"van ter\", always_non_dropping_2],\n\t\t[\"van van de\", always_non_dropping_3],\n\t\t[\"van\", either_1],\n\t\t[\"vander\", always_non_dropping_1],\n\t\t[\"vd\", always_non_dropping_1],\n\t\t[\"ver\", always_non_dropping_1],\n\t\t[\"vom und zum\", always_dropping_3],\n\t\t[\"vom\", either_1],\n\t\t[\"von 't\", always_non_dropping_2],\n\t\t[\"von dem\", either_2_dropping_best],\n\t\t[\"von den\", either_2_dropping_best],\n\t\t[\"von der\", either_2_dropping_best],\n\t\t[\"von t\", always_non_dropping_2],\n\t\t[\"von und zu\", either_3_dropping_best],\n\t\t[\"von zu\", either_2_dropping_best],\n\t\t[\"von\", either_1_dropping_best],\n\t\t[\"voor 't\", always_non_dropping_2],\n\t\t[\"voor de\", always_non_dropping_2],\n\t\t[\"voor den\", always_non_dropping_2],\n\t\t[\"voor in 't\", always_non_dropping_3],\n\t\t[\"voor in t\", always_non_dropping_3],\n\t\t[\"voor\", always_non_dropping_1],\n\t\t[\"vor der\", either_2_dropping_best],\n\t\t[\"vor\", either_1_dropping_best],\n\t\t[\"z\", always_dropping_1],\n\t\t[\"ze\", always_dropping_1],\n\t\t[\"zu\", either_1_dropping_best],\n\t\t[\"zum\", either_1],\n\t\t[\"zur\", either_1]\n\t];\n    return PARTICLES;\n}());\n\nCSL.parseParticles = (function(){\n    function splitParticles(nameValue, firstNameFlag, caseOverride) {\n\t\t// Parse particles out from name fields.\n\t\t// * nameValue (string) is the field content to be parsed.\n\t\t// * firstNameFlag (boolean) parse trailing particles\n\t\t//\t (default is to parse leading particles)\n\t\t// * caseOverride (boolean) include all but one word in particle set\n\t\t//\t (default is to include only words with lowercase first char)\n        //   [caseOverride is not used in this application]\n\t\t// Returns an array with:\n\t\t// * (boolean) flag indicating whether a particle was found\n\t\t// * (string) the name after removal of particles\n\t\t// * (array) the list of particles found\n\t\tvar origNameValue = nameValue;\n\t\tnameValue = caseOverride ? nameValue.toLowerCase() : nameValue;\n\t\tvar particleList = [];\n\t\tvar rex;\n        var hasParticle;\n\t\tif (firstNameFlag) {\n\t\t\tnameValue = nameValue.split(\"\").reverse().join(\"\");\n\t\t\trex = CSL.PARTICLE_GIVEN_REGEXP;\n\t\t} else {\n\t\t\trex = CSL.PARTICLE_FAMILY_REGEXP;\n\t\t}\n\t\tvar m = nameValue.match(rex);\n\t\twhile (m) {\n\t\t\tvar m1 = firstNameFlag ? m[1].split(\"\").reverse().join(\"\") : m[1];\n\t\t\tvar firstChar = m ? m1 : false;\n\t\t\tvar firstChar = firstChar ? m1.replace(/^[-\\'\\u02bb\\u2019\\s]*(.).*$/, \"$1\") : false;\n\t\t\thasParticle = firstChar ? firstChar.toUpperCase() !== firstChar : false;\n\t\t\tif (!hasParticle) {\n                break;\n            }\n\t\t\tif (firstNameFlag) {\n\t\t\t\tparticleList.push(origNameValue.slice(m1.length * -1));\n\t\t\t\torigNameValue = origNameValue.slice(0,m1.length * -1);\n\t\t\t} else {\n\t\t\t\tparticleList.push(origNameValue.slice(0,m1.length));\n\t\t\t\torigNameValue = origNameValue.slice(m1.length);\n\t\t\t}\n\t\t\t//particleList.push(m1);\n\t\t\tnameValue = m[2];\n\t\t\tm = nameValue.match(rex);\n\t\t}\n\t\tif (firstNameFlag) {\n\t\t\tnameValue = nameValue.split(\"\").reverse().join(\"\");\n\t\t\tparticleList.reverse();\n\t\t\tfor (var i=1,ilen=particleList.length;i<ilen;i++) {\n\t\t\t\tif (particleList[i].slice(0, 1) == \" \") {\n\t\t\t\t\tparticleList[i-1] += \" \";\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i=0,ilen=particleList.length;i<ilen;i++) {\n\t\t\t\tif (particleList[i].slice(0, 1) == \" \") {\n\t\t\t\t\tparticleList[i] = particleList[i].slice(1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tnameValue = origNameValue.slice(0, nameValue.length);\n\t\t} else {\n\t\t\tnameValue = origNameValue.slice(nameValue.length * -1);\n\t\t}\n\t\treturn [hasParticle, nameValue, particleList];\n\t}\n    function trimLast(str) {\n        var lastChar = str.slice(-1);\n        str = str.trim();\n        if (lastChar === \" \" && [\"\\'\", \"\\u2019\"].indexOf(str.slice(-1)) > -1) {\n            str += \" \";\n        }\n        return str;\n    }\n    function parseSuffix(nameObj) {\n        if (!nameObj.suffix && nameObj.given) {\n            var m = nameObj.given.match(/(\\s*,!*\\s*)/);\n            if (m) {\n                var idx = nameObj.given.indexOf(m[1]);\n                var possible_suffix = nameObj.given.slice(idx + m[1].length);\n                var possible_comma = nameObj.given.slice(idx, idx + m[1].length).replace(/\\s*/g, \"\");\n                if (possible_suffix.replace(/\\./g, \"\") === 'et al' && !nameObj[\"dropping-particle\"]) {\n                    // This hack covers the case where \"et al.\" is explicitly used in the\n                    // authorship information of the work.\n                    nameObj[\"dropping-particle\"] = possible_suffix;\n                    nameObj[\"comma-dropping-particle\"] = \",\";\n                } else {\n                    if (possible_comma.length === 2) {\n                        nameObj[\"comma-suffix\"] = true;\n                    }\n                    nameObj.suffix = possible_suffix;\n                }\n                nameObj.given = nameObj.given.slice(0, idx);\n            }\n        }\n    }\n    return function(nameObj) {\n        // Extract and set non-dropping particle(s) from family name field\n        var res = splitParticles(nameObj.family);\n        var lastNameValue = res[1];\n        var lastParticleList = res[2];\n        nameObj.family = lastNameValue;\n        var nonDroppingParticle = trimLast(lastParticleList.join(\"\"));\n        if (nonDroppingParticle) {\n            nameObj['non-dropping-particle'] = nonDroppingParticle;\n        }\n        // Split off suffix first of all\n        parseSuffix(nameObj);\n        // Extract and set dropping particle(s) from given name field\n        var res = splitParticles(nameObj.given, true);\n        var firstNameValue = res[1];\n        var firstParticleList = res[2];\n        nameObj.given = firstNameValue;\n        var droppingParticle = firstParticleList.join(\"\").trim();\n        if (droppingParticle) {\n            nameObj['dropping-particle'] = droppingParticle;\n        }\n    };\n}());\n\n\nmodule.exports = CSL"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;AAuBA,GACA,mBAAmB,GAEnB;;;;;;;;;;;;;;;;;;;;CAoBC,GAED,0CAA0C;AAC1C,oCAAoC;AAGpC,wBAAwB;AACxB,8FAA8F;AAC9F,8EAA8E;AAK9E,IAAI,MAAM;IAEN,mBAAmB;IAEnB,OAAO,SAAS,GAAG;QACf,IAAI,gBAAgB,OAAO,OAAO;YAC9B,MAAM,IAAI,MAAM,wBAAwB;QAC5C,OAAO;YACH,MAAM,wBAAwB;QAClC;IACJ;IACA,OAAO,SAAS,GAAG;QACf,IAAI,gBAAgB,OAAO,SAAS;YAChC,KAAK,UAAU,MAAM;QACzB,OAAO;YACH,QAAQ,GAAG,CAAC,0BAA0B;QAC1C;IACJ;IAEA,mBAAkB,GAAG;QACjB,IAAI,MAAM,IAAI,CAAC,GAAG,CAAC,UAAU;QAC7B,IAAI;YACA,MAAM,IAAI,iBAAiB,CAAC;QAChC,EAAE,OAAO,GAAG;YACR,MAAM,IAAI,WAAW;QACzB;QACA,OAAO;IACX;IAEA,mBAAkB,GAAG;QACjB,IAAI,MAAM,IAAI,CAAC,GAAG,CAAC,UAAU;QAC7B,IAAI;YACA,MAAM,IAAI,iBAAiB,CAAC;QAChC,EAAE,OAAO,GAAG;YACR,MAAM,IAAI,WAAW;QACzB;QACA,OAAO;IACX;IAEA,uBAAuB,IAAI,OAAO;IAElC,4BAA4B;IAC5B,kCAAkC;IAElC,wBAAwB;QACpB,QAAQ;QACd,OAAO;QACD,YAAY;QACZ,OAAO;QACP,UAAU;QACV,QAAQ;QACR,UAAU;QACV,UAAU;QACV,QAAQ;QACR,QAAQ;QACR,YAAY;QACZ,OAAO;QACP,OAAO;QACP,OAAO;QACP,QAAQ;QACR,QAAQ;QACR,QAAQ;QACR,SAAS;QACT,OAAO;QACP,QAAQ;QACR,QAAQ;QACR,QAAQ;QACR,MAAM;QACN,SAAS;QACT,UAAU;QACV,UAAU;QACV,MAAM;QACN,OAAO;QACP,MAAM;QACN,OAAO;QACP,SAAS;QACT,OAAO;QACP,SAAS;QACT,UAAU;QACV,QAAQ;QACR,MAAM;QACN,OAAO;QACP,UAAU;QACV,QAAQ;QACR,QAAQ;QACR,WAAW;QACX,WAAW;QACX,SAAS;QACT,QAAQ;QACR,QAAQ;QACR,QAAQ;IACZ;IACA,gCAAgC;QAC5B,SAAS;QACf,aAAa;QACP,aAAa;QACb,gBAAgB;QAChB,QAAQ;QACR,cAAc;QACd,YAAY;QACZ,aAAa;QACb,cAAc;QACd,YAAY;QACZ,WAAW;QACX,gBAAgB;QAChB,QAAQ;QACR,WAAW;QACX,UAAU;QACV,UAAU;QACV,WAAW;QACX,YAAY;QACZ,cAAc;QACd,WAAW;QACX,UAAU;QACV,SAAS;QACT,SAAS;QACT,QAAQ;QACR,gBAAgB;QAChB,gBAAgB;QAChB,gBAAgB;QAChB,QAAQ;QACR,SAAS;QACT,QAAQ;QACR,aAAa;QACb,QAAQ;QACR,YAAY;QACZ,aAAa;QACb,eAAe;QACf,QAAQ;QACR,cAAc;QACd,YAAY;QACZ,WAAW;QACX,WAAW;QACX,eAAe;QACf,cAAc;QACd,cAAc;QACd,SAAS;QACT,SAAS;QACT,UAAU;IACd;IAEA,oBAAoB;QAChB,OAAO;QACb,MAAM;QACA,WAAW;QACX,MAAM;QACN,SAAS;QACT,OAAO;QACP,SAAS;QACT,SAAS;QACT,OAAO;QACP,OAAO;QACP,WAAW;QACX,MAAM;QACN,MAAM;QACN,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,QAAQ;QACR,MAAM;QACN,OAAO;QACP,OAAO;QACP,OAAO;QACP,KAAK;QACL,QAAQ;QACR,SAAS;QACT,SAAS;QACT,KAAK;QACL,MAAM;QACN,KAAK;QACL,MAAM;QACN,QAAQ;QACR,MAAM;QACN,QAAQ;QACR,SAAS;QACT,OAAO;QACP,KAAK;QACL,MAAM;QACN,SAAS;QACT,OAAO;QACP,OAAO;QACP,UAAU;QACV,UAAU;QACV,QAAQ;QACR,OAAO;QACP,OAAO;QACP,OAAO;IACX;IACA,eAAe;QACX,kBAAkB;QAClB,eAAe;QACf,wBAAwB;QACxB,qBAAqB;QACrB,cAAc;QACd,oBAAoB;QACpB,cAAc;QACd,oBAAoB;QACpB,iBAAiB;IACrB;IACA,cAAc;QACV,cAAc;QACd,eAAe;QACf,QAAQ;QACR,WAAW;QACX,WAAW;QACX,UAAU;QACV,cAAc;QACd,YAAY;QACZ,UAAU;QACV,WAAW;IACf;IACA,kBAAkB,SAAS,KAAK;QAC5B,IAAI,MAAM,GAAG,CAAC,MAAM,KAAK,QAAQ;YAC7B,IAAI,CAAC,KAAK,GAAG;YACb,IAAI,CAAC,MAAM,GAAG,SAAS,GAAG;gBAEtB,sDAAsD;gBAEtD,IAAI,MAAM,MAAM,MAAM;gBACtB,IAAI,MAAM,IAAI,KAAK,CAAC;gBACpB,IAAK,IAAI,IAAE,GAAE,OAAK,IAAI,MAAM,EAAC,IAAE,MAAK,KAAK,EAAG;oBACxC,IAAI,GAAG,CAAC,EAAE,KAAK,KAAK;wBAChB,IAAI,MAAO,IAAI,CAAC,KAAK,GAAG,GAAI;4BACxB,GAAG,CAAC,EAAE,GAAG;wBACb;wBACA,IAAI,CAAC,KAAK,IAAI;oBAClB,OAAO,IAAI,GAAG,CAAC,EAAE,KAAK,KAAK;wBACvB,IAAI,MAAO,IAAI,CAAC,KAAK,GAAG,GAAI;4BACxB,GAAG,CAAC,EAAE,GAAG;wBACb;wBACA,IAAI,CAAC,KAAK,IAAI;oBAClB;gBACJ;gBACA,IAAI,MAAM,IAAI,IAAI,CAAC;gBACnB,OAAO;YACX;QACJ,OAAO;YACH,IAAI,CAAC,MAAM,GAAG,SAAS,GAAG;gBACtB,OAAO;YACX;QACJ;IACJ;IAEA,cAAc;QAAC;QAAS;QAAa;QAAmB;QAAe;QAAS;QAAmB;QAAoB;QAAY;QAAQ;QAAc;QAAS;QAAU;QAAe;QAAU;KAAgB;IAErN,cAAc;QACV,SAAQ;QACR,eAAc;QACd,SAAQ;QACR,SAAQ;QACR,UAAS;QACT,mBAAkB;QAClB,oBAAmB;QACnB,WAAU;QACV,aAAY;QACZ,aAAY;QACZ,mBAAmB;QACnB,eAAe;QACf,iBAAiB;QACjB,gBAAgB;QAChB,UAAU;QACV,WAAU;QACV,SAAQ;QACR,UAAS;IACb;IAEA,sBAAsB;QAClB,IAAI,CAAC,kBAAkB,GAAG,CAAC;QAC3B,IAAI,CAAC,mBAAmB,GAAG,CAAC;QAC5B,IAAI,CAAC,qBAAqB,GAAG,CAAC;QAC9B,IAAI,CAAC,mBAAmB,GAAG,CAAC;QAC5B,IAAI,CAAC,QAAQ,GAAG,CAAC;QACjB,IAAI,CAAC,MAAM,GAAG,CAAC;QACf,IAAI,CAAC,KAAK,GAAG,CAAC;QACd,IAAI,CAAC,KAAK,GAAG,CAAC;QACd,IAAI,CAAC,WAAW,GAAG,CAAC;QACpB,IAAI,CAAC,OAAO,GAAG,CAAC;QAChB,IAAI,CAAC,mBAAmB,GAAG,CAAC;QAC5B,IAAI,CAAC,eAAe,GAAG,CAAC;IAC5B;IAEA,kBAAkB,SAAU,KAAK,EAAE,OAAO,EAAE,IAAI;QAClD,IAAI,SAAS;QACP,IAAI,MAAM,GAAG,CAAC,sBAAsB,IAAI,WAAW,YAAY,WAAW;YACzE,IAAI,yBAAyB,MAAM,MAAM,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,0BAA0B;YAC5F,IAAI,uBAAuB;YAC3B,IAAI,MAAM,MAAM,CAAC,KAAK,EAAE;gBACvB,uBAAuB,MAAM,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,0BAA0B;YAC1E;YACA,IAAI,sBAAsB;gBACzB,IAAK,IAAI,IAAE,qBAAqB,MAAM,GAAC,GAAG,IAAI,CAAC,GAAG,IAAK;oBACtD,IAAI,MAAM,GAAG,CAAC,sBAAsB,CAAC,QAAQ,CAAC,OAAO,CAAC,oBAAoB,CAAC,EAAE,IAAI,CAAC,GAAG;wBACpF,SAAS,oBAAoB,CAAC,EAAE;wBAChC;oBACD;gBACD;YACD;YACA,IAAI,CAAC,UAAU,wBAAwB;gBACtC,IAAK,IAAI,IAAE,uBAAuB,MAAM,GAAC,GAAG,IAAI,CAAC,GAAG,IAAK;oBACxD,IAAI,MAAM,GAAG,CAAC,sBAAsB,CAAC,QAAQ,CAAC,OAAO,CAAC,sBAAsB,CAAC,EAAE,IAAI,CAAC,GAAG;wBACtF,SAAS,sBAAsB,CAAC,EAAE;wBAClC;oBACD;gBACD;YACD;QACE;QACA,OAAO;IACX;IAEA,sBAAsB;QAClB,SAAS;QACT,mBAAmB;QACnB,oBAAoB;QACpB,WAAW;QACX,UAAU;QACV,SAAS;QACT,WAAW;QACX,eAAe;QACf,SAAS;QACT,SAAS;QACT,UAAU;QAChB,iBAAiB;QACjB,mBAAmB;QACnB,eAAe;QACf,gBAAgB;QAChB,iBAAiB;QACjB,0BAA0B;QACpB,eAAe;QACf,kBAAkB;QAClB,qBAAqB;QACrB,WAAW;QACX,QAAQ;QACR,SAAS;QACT,WAAW;QACX,iBAAiB;QACjB,mBAAmB;QACnB,qBAAqB;QACrB,UAAU;QACV,mBAAmB;QACnB,aAAa;IACjB;IAEA,cAAc,SAAS,IAAI;QACvB,IAAI,IAAI,CAAC,GAAG,CAAC,sBAAsB,CAAC,yBAAyB,EAAE;YAC3D,0CAA0C;YAC1C,IAAI,KAAK,OAAO,EAAE;gBACd,KAAK,OAAO,GAAG,KAAK,KAAK,OAAO;gBAChC,IAAI,MAAM,KAAK,OAAO,CAAC,OAAO,CAAC;gBAC/B,IAAI,MAAM,CAAC,GAAG;oBACV,IAAI,cAAc,KAAK,OAAO;oBAC9B,KAAK,OAAO,GAAG,YAAY,KAAK,CAAC,GAAG;oBACpC,cAAc,YAAY,KAAK,CAAC,MAAM;oBACtC,IAAI,IAAI,YAAY,KAAK,CAAC;oBAC1B,IAAI,GAAG;wBACH,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,iBAAiB,CAAC,CAAC,CAAC,EAAE;wBACjE,cAAc,YAAY,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,MAAM;oBAC/C;oBACA,IAAI,CAAC,gBAAgB,GAAG,YAAY,OAAO,CAAC,QAAQ,IAAI,OAAO,CAAC,QAAQ;gBAC5E;YACJ;QACJ;QACA,IAAI,KAAK,OAAO,EAAE;YACd,KAAK,OAAO,GAAG,CAAC,KAAK,KAAK,OAAO,EAAE,OAAO,CAAC,QAAQ;QACvD;QACA,OAAO;IACX;IAEA,oBAAoB,SAAS,GAAG;QAC5B,IAAI,CAAC,KAAK;YACN;QACJ;QACA,IAAI,MAAM,IAAI,KAAK,CAAC;QACpB,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,WAAW;QAC3B,IAAI,GAAG,CAAC,EAAE,EAAE;YACR,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,WAAW;QAC/B;QACA,OAAO,IAAI,IAAI,CAAC;IACpB;IAEA,qBAAqB,SAAS,IAAI,EAAE,kBAAkB,EAAE,iBAAiB;QACrE,IAAI,aAAa,OAAO,KAAK,IAAI,EAAE;YAC/B;QACJ;QACA,IAAI,QAAQ,EAAE;QACd,IAAI,QAAQ,KAAK,IAAI,CAAC,KAAK,CAAC;QAC5B,oBAAoB;QACpB,IAAK,IAAI,IAAE,GAAG,OAAK,MAAM,MAAM,EAAE,IAAE,MAAM,IAAK;YAC1C,IAAI,OAAO,KAAK,CAAC,EAAE;YACnB,IAAI,QAAQ,EAAE;YACd,IAAI,IAAI,KAAK,KAAK,CAAC,IAAI,kBAAkB;YACzC,IAAI,GAAG;gBACH,IAAI,OAAO,KAAK,KAAK,CAAC,IAAI,kBAAkB;gBAC5C,IAAK,IAAI,IAAE,GAAE,OAAM,KAAK,MAAM,GAAC,GAAG,IAAE,MAAK,IAAK;oBAC1C,MAAM,IAAI,CAAC,IAAI,CAAC,EAAE;oBAClB,MAAM,IAAI,CAAC,CAAC,CAAC,EAAE;gBACnB;gBACA,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,MAAM,GAAC,EAAE;gBAC9B,IAAK,IAAI,IAAE,GAAE,OAAK,MAAM,MAAM,EAAC,IAAE,MAAK,KAAK,EAAG;oBAC1C,oDAAoD;oBACpD,IAAI,KAAK,CAAC,IAAE,EAAE,CAAC,IAAI,MAAM,CAAC,IAAE,KAAK,IAAE,CAAC,KAAK,CAAC,KAAK,CAAC,IAAE,EAAE,CAAC,KAAK,CAAC,IAAI,iBAAiB,GAAG;wBAC/E;oBACJ,OAAO;wBACH,KAAK,CAAC,EAAE,GAAG,OAAO,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,GAAE,CAAC,GAAG,IAAI,KAAK;oBACpD;gBACJ;gBACA,KAAK,CAAC,EAAE,GAAG,MAAM,IAAI,CAAC;YAC1B;QACJ;QACA,UAAU;QACV,QAAQ,MAAM,IAAI,CAAC,MAAM,KAAK,CAAC;QAC/B,IAAI,SAAS;QACb,IAAI,QAAQ,CAAC;QACb,IAAK,IAAI,IAAE,GAAE,OAAK,MAAM,MAAM,EAAC,IAAE,MAAK,IAAK;YACvC,IAAI,OAAO,KAAK,CAAC,EAAE;YACnB,IAAI,KAAK,KAAK,KAAK,CAAC,IAAI,iBAAiB;YACzC,IAAI,CAAC,KAAK,IAAI,IAAI;gBACd;YACJ,OAAO,IAAI,CAAC,IAAI;gBACZ,IAAI,MAAM,GAAG;oBACT;gBACJ,OAAO;oBACH,SAAS;oBACT;gBACJ;YACJ;YACA,IAAI,MAAM,EAAE,CAAC,EAAE;YACf,IAAI,MAAM,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,QAAQ,IAAI,OAAO,CAAC,QAAQ;YACpD,IAAI,QAAQ,QAAQ;gBAChB,KAAK,IAAI,GAAG;gBACZ,KAAK,CAAC,EAAE,GAAG;YACf,OAAO,IAAI,IAAI,cAAc,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,SAAS,OAAO,CAAC,GAAG;gBAClE,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,mBAAmB;oBACjC,IAAI,CAAC,IAAI,GAAG,IAAI,UAAU,CAAC,gBAAgB,CAAC;oBAC5C,IAAI,CAAC,sBAAuB,kBAAkB,CAAC,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC,MAAO;wBAC5E,KAAK,CAAC,EAAE,GAAG;oBACf;gBACJ;YACJ,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBACnB,IAAI,IAAI,cAAc,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,SAAS,OAAO,CAAC,GAAG;oBAC3D,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;wBACb,KAAK,CAAC,IAAI,GAAG,EAAE;oBACnB;oBACA,IAAI,MAAM,IAAI,KAAK,CAAC;oBACpB,IAAI,IAAI,MAAM,KAAK,GAAG;wBAClB,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;4BAAC,SAAQ,GAAG,CAAC,EAAE;wBAAA;oBACnC,OAAO,IAAI,IAAI,MAAM,KAAK,GAAG;wBACzB,IAAI,OAAO;4BAAC,QAAO,GAAG,CAAC,EAAE;4BAAC,OAAM,GAAG,CAAC,EAAE;wBAAA;wBACtC,IAAI,cAAc,CAAC;wBACnB,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;oBACpB;gBACJ,OAAO;oBACH,IAAI,CAAC,IAAI,GAAG;gBAChB;gBACA,IAAI,CAAC,sBAAsB,kBAAkB,CAAC,IAAI,EAAE;oBAChD,KAAK,CAAC,EAAE,GAAG;gBACf;YACJ;QACJ;QACA,IAAK,IAAI,OAAO,MAAO;YACnB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI;QAC1B;QACA,uFAAuF;QACvF,IAAI,oBAAoB;YACpB,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,IAAI;gBACtB,KAAK,CAAC,OAAO,GAAG,OAAO,KAAK,CAAC,OAAO;YACxC;YACA,IAAK,IAAI,IAAE,SAAO,GAAE,IAAE,CAAC,GAAE,IAAK;gBAC1B,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,IAAI;oBAClB,QAAQ,MAAM,KAAK,CAAC,GAAG,GAAG,MAAM,CAAC,MAAM,KAAK,CAAC,IAAI;gBACrD;YACJ;QACJ;QACA,KAAK,IAAI,GAAG,MAAM,IAAI,CAAC,MAAM,IAAI;IACrC;IAEA,wBAAwB,SAAU,KAAK,EAAE,MAAM;QAC3C,IAAI,CAAC,QAAQ;YACT,SAAS;QACb;QACA,IAAI,KAAK;QACT,8CAA8C;QAC9C,kDAAkD;QAClD,iDAAiD;QACjD,EAAE;QACF,uCAAuC;QACvC,uCAAuC;QACvC,kDAAkD;QAClD,mCAAmC;QACnC,8BAA8B;QAC9B,IAAI,cAAc,OAAO,OAAO,CAAC,YAAY,IAAI,OAAO,CAAC,0CAAyC;QAClG,IAAI,YAAY,YAAY,KAAK,CAAC,CAAC;QACnC,IAAI,YAAY,KAAK,CAAC,IAAI,0BAA0B,GAAG;YACnD,KAAK;QACT,OAAO,IAAI,IAAI,oBAAoB,CAAC,KAAK,CAAC,GAAE,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,GAAG;YACrE,KAAK;QACT,OAAO,IAAI,UAAU,KAAK,CAAC,eAAe;YACtC,KAAK;QACT;QACA,+DAA+D;QAC/D,gCAAgC;QAChC,IAAI,SAAS,CAAC,SAAS,EAAE,EAAE,OAAO,CAAC,QAAQ;QAC3C,OAAO;IACX;IAEA,wBAAwB,SAAS,KAAK,EAAE,MAAM;QAC1C,IAAI,oBAAoB;QACxB,IAAI,cAAc,OAAO,OAAO,CAAC,YAAY,IAAI,OAAO,CAAC,0CAAyC;QAClG,IAAI,YAAY,YAAY,KAAK,CAAC,CAAC;QACnC,IAAI,IAAI,oBAAoB,CAAC,KAAK,CAAC,GAAE,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,KAAK,OAAO,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,GAAG;YACjG,MAAM,GAAG,CAAC,gBAAgB,GAAG;YAC7B,OAAO;QACX;QACA,OAAO;IACX;IAEA,yBAAyB,SAAS,KAAK,EAAE,MAAM;QAC3C,IAAI,CAAC,QAAQ;YACT,OAAO;QACX;QACA,IAAI,OAAO,KAAK,CAAC,IAAI,4BAA4B,KAAK;YAAC;YAAI;SAAI,CAAC,OAAO,CAAC,OAAO,KAAK,CAAC,GAAE,MAAM,CAAC,GAAG;YAC7F,SAAS,MAAM;QACnB;QACA,OAAO;IACX;IAEA,SAAS;QAAC;QAAa;KAAW;IAElC,wBAAwB;IAExB,SAAS;IACT,6BAA6B;IAE7B,OAAO;IACP,KAAK;IACL,WAAW;IAEX,MAAM;IACN,WAAW;IACX,wBAAwB;IACxB,UAAU;IAEV,UAAU;IACV,QAAQ;IAER,SAAS;IAET,QAAQ;IACR,OAAO;IAEP,YAAY;IACZ,WAAW;IAEX,SAAS;IACT,WAAW;IAEX,gBAAgB;IAChB,qBAAqB;IACrB,eAAe;IACf,4BAA4B;IAC5B,+BAA+B;IAE/B,cAAc;QACV,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;QACL,KAAK;IACT;IAEA,oBAAoB;QAAC;QAAY;QAA+B;KAAY;IAE5E,OAAO;QAAC;QAAY;QAAiB;QAAgB;QAAqB;KAAS;IAEnF,aAAa;QAAC;QAA+B;QAAyC;QAAW;KAAgB;IAEjH,sBAAsB;QAAC;QAAK;QAAK;QAAK;QAAK;KAAI;IAC/C,sBAAsB;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IAEpD,eAAe;IACf,MAAM;IACN,SAAS;IACT,UAAU;IACV,UAAU;IAEV,YAAY;QAAC;QAAQ;QAAS;KAAM;IACpC,gBAAgB;QAAC;QAAQ;QAAS;QAAO;KAAS;IAClD,qBAAqB;QAAC;QAAQ;QAAS;QAAO;QAAY;QAAa;KAAU;IAEjF,YAAY;QAAC;QAAyB;QAAU;QAAS;QAAqB;QAAU;KAAU;IAElG,sBAAsB;QAClB;QACA;QACA;KACH;IAED,gCAAgC;QAC5B;QACA;QACA;QACA;QACA;KACH;IAED,iBAAiB;QACb;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACH;IAED,OAAO;IACP,QAAQ;IACR,UAAU;IAEV,oBAAoB;IACpB,oBAAoB;IAEpB,eAAe;IACf,EAAE;IACF,4DAA4D;IAC5D,oEAAoE;IACpE,qEAAqE;IACrE,uEAAuE;IACvE,qEAAqE;IACrE,mDAAmD;IACnD,kCAAkC;IAClC,qEAAqE;IACrE,qBAAqB;IAIrB,qBAAqB;IACrB,mBAAmB;IACnB,uBAAuB;IACvB,8BAA8B;IAC9B,4BAA4B;IAC5B,uBAAuB;IAEvB,qBAAqB;IAErB,kBAAkB;IAElB,oBAAoB;IACpB,mBAAmB;IAEtB,uBAAuB;IACvB,wBAAwB;IAErB,iBAAiB;QAAC;QAAS;QAAe;QAAgB;KAAS;IAEnE,gBAAgB;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACH;IACD,UAAU;QACN;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACH;IACD,mBAAmB;QACf;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACH;IACD,sBAAsB;IACtB,4DAA4D;IAC5D,gEAAgE;IAChE,iEAAiE;IACjE,kCAAkC;IAClC,gCAAgC;IAChC,gBAAgB;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACH;IACD,2BAA2B;QACvB;QACA;KACH;IACD,oBAAoB,SAAS,GAAG;QAC5B,IAAI,OAAO;YAAC;YAAS;YAAS;YAAQ;YAAO;SAAU;QACvD,IAAI,MAAM,CAAC;QACX,IAAK,IAAI,IAAE,GAAE,OAAK,KAAK,MAAM,EAAC,IAAE,MAAK,IAAK;YACtC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,MAAM,UAAU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","ignoreList":[0],"debugId":null}}]
}